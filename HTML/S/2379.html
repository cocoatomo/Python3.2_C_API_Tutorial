<html>
<head>
<title>Modules/_ctypes/libffi/src/x86/win32.S</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/<a href='../files/3354.html'>_ctypes</a>/<a href='../files/3356.html'>libffi</a>/<a href='../files/3358.html'>src</a>/<a href='../files/3375.html'>x86</a>/win32.S</h2>
<i><font color='green'>/* [&lt;][&gt;][^][v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* -----------------------------------------------------------------------</font></i>
<a name='L2'><i><font color='green'>   win32.S - Copyright (c) 1996, 1998, 2001, 2002, 2009  Red Hat, Inc.</font></i>
<a name='L3'><i><font color='green'>             Copyright (c) 2001  John Beniton</font></i>
<a name='L4'><i><font color='green'>             Copyright (c) 2002  Ranjit Mathew</font></i>
<a name='L5'><i><font color='green'>             Copyright (c) 2009  Daniel Witte</font></i>
<a name='L6'><i><font color='green'>                        </font></i>
<a name='L7'><i><font color='green'> </font></i>
<a name='L8'><i><font color='green'>   X86 Foreign Function Interface</font></i>
<a name='L9'><i><font color='green'> </font></i>
<a name='L10'><i><font color='green'>   Permission is hereby granted, free of charge, to any person obtaining</font></i>
<a name='L11'><i><font color='green'>   a copy of this software and associated documentation files (the</font></i>
<a name='L12'><i><font color='green'>   ``Software''), to deal in the Software without restriction, including</font></i>
<a name='L13'><i><font color='green'>   without limitation the rights to use, copy, modify, merge, publish,</font></i>
<a name='L14'><i><font color='green'>   distribute, sublicense, and/or sell copies of the Software, and to</font></i>
<a name='L15'><i><font color='green'>   permit persons to whom the Software is furnished to do so, subject to</font></i>
<a name='L16'><i><font color='green'>   the following conditions:</font></i>
<a name='L17'><i><font color='green'> </font></i>
<a name='L18'><i><font color='green'>   The above copyright notice and this permission notice shall be included</font></i>
<a name='L19'><i><font color='green'>   in all copies or substantial portions of the Software.</font></i>
<a name='L20'><i><font color='green'> </font></i>
<a name='L21'><i><font color='green'>   THE SOFTWARE IS PROVIDED ``AS IS'', WITHOUT WARRANTY OF ANY KIND,</font></i>
<a name='L22'><i><font color='green'>   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</font></i>
<a name='L23'><i><font color='green'>   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</font></i>
<a name='L24'><i><font color='green'>   NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</font></i>
<a name='L25'><i><font color='green'>   HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</font></i>
<a name='L26'><i><font color='green'>   WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</font></i>
<a name='L27'><i><font color='green'>   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</font></i>
<a name='L28'><i><font color='green'>   DEALINGS IN THE SOFTWARE.</font></i>
<a name='L29'><i><font color='green'>   -----------------------------------------------------------------------</font></i>
<a name='L30'><i><font color='green'>   */</font></i>
<a name='L31'> 
<a name='L32'><font color='darkred'>#define</font> <a href='../R/1720.html' title='Multiple refered from 29 places.'>LIBFFI_ASM</a>
<a name='L33'><font color='darkred'>#include</font> &lt;<a href='../I/327.html'>fficonfig.h</a>&gt;
<a name='L34'><font color='darkred'>#include</font> &lt;<a href='../I/325.html'>ffi.h</a>&gt;
<a name='L35'>
<a name='L36'><font color='darkred'>#ifdef</font> _MSC_VER
<a name='L37'>
<a name='L38'>.386
<a name='L39'>.MODEL FLAT, C
<a name='L40'>
<a name='L41'>EXTRN ffi_closure_SYSV_inner:NEAR
<a name='L42'>
<a name='L43'>_TEXT SEGMENT
<a name='L44'>
<a name='L45'>ffi_call_win32 PROC NEAR,
<a name='L46'>    ffi_prep_args : NEAR PTR DWORD,
<a name='L47'>    ecif          : NEAR PTR DWORD,
<a name='L48'>    cif_bytes     : DWORD,
<a name='L49'>    cif_flags     : DWORD,
<a name='L50'>    rvalue        : NEAR PTR DWORD,
<a name='L51'>    fn            : NEAR PTR DWORD
<a name='L52'>
<a name='L53'>        ;; Make room for all of the new args.
<a name='L54'>        mov  ecx, cif_bytes
<a name='L55'>        sub  esp, ecx
<a name='L56'>
<a name='L57'>        mov  eax, esp
<a name='L58'>
<a name='L59'>        ;; Place all of the ffi_prep_args in position
<a name='L60'>        push ecif
<a name='L61'>        push eax
<a name='L62'>        call ffi_prep_args
<a name='L63'>
<a name='L64'>        ;; Return stack to previous state and call the function
<a name='L65'>        add  esp, 8
<a name='L66'>
<a name='L67'>        call fn
<a name='L68'>
<a name='L69'>        ;; cdecl:   we restore esp in the epilogue, so there's no need to
<a name='L70'>        ;;          remove the space we pushed for the args.
<a name='L71'>        ;; stdcall: the callee has already cleaned the stack.
<a name='L72'>
<a name='L73'>        ;; Load ecx with the return type code
<a name='L74'>        mov  ecx, cif_flags
<a name='L75'>
<a name='L76'>        ;; If the return value pointer is NULL, assume no return value.
<a name='L77'>        cmp  rvalue, 0
<a name='L78'>        jne  ca_jumptable
<a name='L79'>
<a name='L80'>        ;; Even if there is no space for the return value, we are
<a name='L81'>        ;; obliged to handle floating-point values.
<a name='L82'>        cmp  ecx, FFI_TYPE_FLOAT
<a name='L83'>        jne  ca_epilogue
<a name='L84'>        fstp st(0)
<a name='L85'>
<a name='L86'>        jmp  ca_epilogue
<a name='L87'>
<a name='L88'>ca_jumptable:
<a name='L89'>        jmp  [ca_jumpdata + 4 * ecx]
<a name='L90'>ca_jumpdata:
<a name='L91'>        ;; Do not insert anything here between label and jump table.
<a name='L92'>        dd offset ca_epilogue       ;; FFI_TYPE_VOID
<a name='L93'>        dd offset ca_retint         ;; FFI_TYPE_INT
<a name='L94'>        dd offset ca_retfloat       ;; FFI_TYPE_FLOAT
<a name='L95'>        dd offset ca_retdouble      ;; FFI_TYPE_DOUBLE
<a name='L96'>        dd offset ca_retlongdouble  ;; FFI_TYPE_LONGDOUBLE
<a name='L97'>        dd offset ca_retint8        ;; FFI_TYPE_UINT8
<a name='L98'>        dd offset ca_retint8        ;; FFI_TYPE_SINT8
<a name='L99'>        dd offset ca_retint16       ;; FFI_TYPE_UINT16
<a name='L100'>        dd offset ca_retint16       ;; FFI_TYPE_SINT16
<a name='L101'>        dd offset ca_retint         ;; FFI_TYPE_UINT32
<a name='L102'>        dd offset ca_retint         ;; FFI_TYPE_SINT32
<a name='L103'>        dd offset ca_retint64       ;; FFI_TYPE_UINT64
<a name='L104'>        dd offset ca_retint64       ;; FFI_TYPE_SINT64
<a name='L105'>        dd offset ca_epilogue       ;; FFI_TYPE_STRUCT
<a name='L106'>        dd offset ca_retint         ;; FFI_TYPE_POINTER
<a name='L107'>        dd offset ca_retint8        ;; FFI_TYPE_SMALL_STRUCT_1B
<a name='L108'>        dd offset ca_retint16       ;; FFI_TYPE_SMALL_STRUCT_2B
<a name='L109'>        dd offset ca_retint         ;; FFI_TYPE_SMALL_STRUCT_4B
<a name='L110'>
<a name='L111'>ca_retint8:
<a name='L112'>        ;; Load %ecx with the pointer to storage for the return value
<a name='L113'>        mov   ecx, rvalue
<a name='L114'>        mov   [ecx + 0], al
<a name='L115'>        jmp   ca_epilogue
<a name='L116'>
<a name='L117'>ca_retint16:
<a name='L118'>        ;; Load %ecx with the pointer to storage for the return value
<a name='L119'>        mov   ecx, rvalue
<a name='L120'>        mov   [ecx + 0], ax
<a name='L121'>        jmp   ca_epilogue
<a name='L122'>
<a name='L123'>ca_retint:
<a name='L124'>        ;; Load %ecx with the pointer to storage for the return value
<a name='L125'>        mov   ecx, rvalue
<a name='L126'>        mov   [ecx + 0], eax
<a name='L127'>        jmp   ca_epilogue
<a name='L128'>
<a name='L129'>ca_retint64:
<a name='L130'>        ;; Load %ecx with the pointer to storage for the return value
<a name='L131'>        mov   ecx, rvalue
<a name='L132'>        mov   [ecx + 0], eax
<a name='L133'>        mov   [ecx + 4], edx
<a name='L134'>        jmp   ca_epilogue
<a name='L135'>
<a name='L136'>ca_retfloat:
<a name='L137'>        ;; Load %ecx with the pointer to storage for the return value
<a name='L138'>        mov   ecx, rvalue
<a name='L139'>        fstp  DWORD PTR [ecx]
<a name='L140'>        jmp   ca_epilogue
<a name='L141'>
<a name='L142'>ca_retdouble:
<a name='L143'>        ;; Load %ecx with the pointer to storage for the return value
<a name='L144'>        mov   ecx, rvalue
<a name='L145'>        fstp  QWORD PTR [ecx]
<a name='L146'>        jmp   ca_epilogue
<a name='L147'>
<a name='L148'>ca_retlongdouble:
<a name='L149'>        ;; Load %ecx with the pointer to storage for the return value
<a name='L150'>        mov   ecx, rvalue
<a name='L151'>        fstp  TBYTE PTR [ecx]
<a name='L152'>        jmp   ca_epilogue
<a name='L153'>
<a name='L154'>ca_epilogue:
<a name='L155'>        ;; Epilogue code is autogenerated.
<a name='L156'>        ret
<a name='L157'>ffi_call_win32 ENDP
<a name='L158'>
<a name='L159'>ffi_closure_SYSV PROC NEAR FORCEFRAME
<a name='L160'>    ;; the ffi_closure ctx is passed in eax by the trampoline.
<a name='L161'>
<a name='L162'>        sub  esp, 40
<a name='L163'>        lea  edx, [ebp - 24]
<a name='L164'>        mov  [ebp - 12], edx         ;; resp
<a name='L165'>        lea  edx, [ebp + 8]
<a name='L166'>        mov  [esp + 8], edx          ;; args
<a name='L167'>        lea  edx, [ebp - 12]
<a name='L168'>        mov  [esp + 4], edx          ;; &amp;resp
<a name='L169'>        mov  [esp], eax              ;; closure
<a name='L170'>        call ffi_closure_SYSV_inner
<a name='L171'>        mov  ecx, [ebp - 12]
<a name='L172'>
<a name='L173'>cs_jumptable:
<a name='L174'>        jmp  [cs_jumpdata + 4 * eax]
<a name='L175'>cs_jumpdata:
<a name='L176'>        ;; Do not insert anything here between the label and jump table.
<a name='L177'>        dd offset cs_epilogue       ;; FFI_TYPE_VOID
<a name='L178'>        dd offset cs_retint         ;; FFI_TYPE_INT
<a name='L179'>        dd offset cs_retfloat       ;; FFI_TYPE_FLOAT
<a name='L180'>        dd offset cs_retdouble      ;; FFI_TYPE_DOUBLE
<a name='L181'>        dd offset cs_retlongdouble  ;; FFI_TYPE_LONGDOUBLE
<a name='L182'>        dd offset cs_retint8        ;; FFI_TYPE_UINT8
<a name='L183'>        dd offset cs_retint8        ;; FFI_TYPE_SINT8
<a name='L184'>        dd offset cs_retint16       ;; FFI_TYPE_UINT16
<a name='L185'>        dd offset cs_retint16       ;; FFI_TYPE_SINT16
<a name='L186'>        dd offset cs_retint         ;; FFI_TYPE_UINT32
<a name='L187'>        dd offset cs_retint         ;; FFI_TYPE_SINT32
<a name='L188'>        dd offset cs_retint64       ;; FFI_TYPE_UINT64
<a name='L189'>        dd offset cs_retint64       ;; FFI_TYPE_SINT64
<a name='L190'>        dd offset cs_retstruct      ;; FFI_TYPE_STRUCT
<a name='L191'>        dd offset cs_retint         ;; FFI_TYPE_POINTER
<a name='L192'>        dd offset cs_retint8        ;; FFI_TYPE_SMALL_STRUCT_1B
<a name='L193'>        dd offset cs_retint16       ;; FFI_TYPE_SMALL_STRUCT_2B
<a name='L194'>        dd offset cs_retint         ;; FFI_TYPE_SMALL_STRUCT_4B
<a name='L195'>
<a name='L196'>cs_retint8:
<a name='L197'>        mov   al, [ecx]
<a name='L198'>        jmp   cs_epilogue
<a name='L199'>
<a name='L200'>cs_retint16:
<a name='L201'>        mov   ax, [ecx]
<a name='L202'>        jmp   cs_epilogue
<a name='L203'>
<a name='L204'>cs_retint:
<a name='L205'>        mov   eax, [ecx]
<a name='L206'>        jmp   cs_epilogue
<a name='L207'>
<a name='L208'>cs_retint64:
<a name='L209'>        mov   eax, [ecx + 0]
<a name='L210'>        mov   edx, [ecx + 4]
<a name='L211'>        jmp   cs_epilogue
<a name='L212'>
<a name='L213'>cs_retfloat:
<a name='L214'>        fld   DWORD PTR [ecx]
<a name='L215'>        jmp   cs_epilogue
<a name='L216'>
<a name='L217'>cs_retdouble:
<a name='L218'>        fld   QWORD PTR [ecx]
<a name='L219'>        jmp   cs_epilogue
<a name='L220'>
<a name='L221'>cs_retlongdouble:
<a name='L222'>        fld   TBYTE PTR [ecx]
<a name='L223'>        jmp   cs_epilogue
<a name='L224'>
<a name='L225'>cs_retstruct:
<a name='L226'>        ;; Caller expects us to pop struct return value pointer hidden arg.
<a name='L227'>        ;; Epilogue code is autogenerated.
<a name='L228'>        ret     4
<a name='L229'>
<a name='L230'>cs_epilogue:
<a name='L231'>        ;; Epilogue code is autogenerated.
<a name='L232'>        ret
<a name='L233'>ffi_closure_SYSV ENDP
<a name='L234'>
<a name='L235'><font color='darkred'>#if</font> !<a href='../D/1162.html' title='Multiple defined in 2 places.'>FFI_NO_RAW_API</a>
<a name='L236'>
<a name='L237'><font color='darkred'>#define</font> RAW_CLOSURE_CIF_OFFSET ((FFI_TRAMPOLINE_SIZE + 3) AND NOT 3)
<a name='L238'><font color='darkred'>#define</font> RAW_CLOSURE_FUN_OFFSET (RAW_CLOSURE_CIF_OFFSET + 4)
<a name='L239'><font color='darkred'>#define</font> RAW_CLOSURE_USER_DATA_OFFSET (RAW_CLOSURE_FUN_OFFSET + 4)
<a name='L240'><font color='darkred'>#define</font> CIF_FLAGS_OFFSET 20
<a name='L241'>
<a name='L242'>ffi_closure_raw_SYSV PROC NEAR USES esi
<a name='L243'>    ;; the ffi_closure ctx is passed in eax by the trampoline.
<a name='L244'>
<a name='L245'>        sub  esp, 40
<a name='L246'>        mov  esi, [eax + RAW_CLOSURE_CIF_OFFSET]        ;; closure-&gt;cif
<a name='L247'>        mov  edx, [eax + RAW_CLOSURE_USER_DATA_OFFSET]  ;; closure-&gt;user_data
<a name='L248'>        mov  [esp + 12], edx                            ;; user_data
<a name='L249'>        lea  edx, [ebp + 8]
<a name='L250'>        mov  [esp + 8], edx                             ;; raw_args
<a name='L251'>        lea  edx, [ebp - 24]
<a name='L252'>        mov  [esp + 4], edx                             ;; &amp;res
<a name='L253'>        mov  [esp], esi                                 ;; cif
<a name='L254'>        call DWORD PTR [eax + RAW_CLOSURE_FUN_OFFSET]   ;; closure-&gt;fun
<a name='L255'>        mov  eax, [esi + CIF_FLAGS_OFFSET]              ;; cif-&gt;flags
<a name='L256'>        lea  ecx, [ebp - 24]
<a name='L257'>
<a name='L258'>cr_jumptable:
<a name='L259'>        jmp  [cr_jumpdata + 4 * eax]
<a name='L260'>cr_jumpdata:
<a name='L261'>        ;; Do not insert anything here between the label and jump table.
<a name='L262'>        dd offset cr_epilogue       ;; FFI_TYPE_VOID
<a name='L263'>        dd offset cr_retint         ;; FFI_TYPE_INT
<a name='L264'>        dd offset cr_retfloat       ;; FFI_TYPE_FLOAT
<a name='L265'>        dd offset cr_retdouble      ;; FFI_TYPE_DOUBLE
<a name='L266'>        dd offset cr_retlongdouble  ;; FFI_TYPE_LONGDOUBLE
<a name='L267'>        dd offset cr_retint8        ;; FFI_TYPE_UINT8
<a name='L268'>        dd offset cr_retint8        ;; FFI_TYPE_SINT8
<a name='L269'>        dd offset cr_retint16       ;; FFI_TYPE_UINT16
<a name='L270'>        dd offset cr_retint16       ;; FFI_TYPE_SINT16
<a name='L271'>        dd offset cr_retint         ;; FFI_TYPE_UINT32
<a name='L272'>        dd offset cr_retint         ;; FFI_TYPE_SINT32
<a name='L273'>        dd offset cr_retint64       ;; FFI_TYPE_UINT64
<a name='L274'>        dd offset cr_retint64       ;; FFI_TYPE_SINT64
<a name='L275'>        dd offset cr_epilogue       ;; FFI_TYPE_STRUCT
<a name='L276'>        dd offset cr_retint         ;; FFI_TYPE_POINTER
<a name='L277'>        dd offset cr_retint8        ;; FFI_TYPE_SMALL_STRUCT_1B
<a name='L278'>        dd offset cr_retint16       ;; FFI_TYPE_SMALL_STRUCT_2B
<a name='L279'>        dd offset cr_retint         ;; FFI_TYPE_SMALL_STRUCT_4B
<a name='L280'>
<a name='L281'>cr_retint8:
<a name='L282'>        mov   al, [ecx]
<a name='L283'>        jmp   cr_epilogue
<a name='L284'>
<a name='L285'>cr_retint16:
<a name='L286'>        mov   ax, [ecx]
<a name='L287'>        jmp   cr_epilogue
<a name='L288'>
<a name='L289'>cr_retint:
<a name='L290'>        mov   eax, [ecx]
<a name='L291'>        jmp   cr_epilogue
<a name='L292'>
<a name='L293'>cr_retint64:
<a name='L294'>        mov   eax, [ecx + 0]
<a name='L295'>        mov   edx, [ecx + 4]
<a name='L296'>        jmp   cr_epilogue
<a name='L297'>
<a name='L298'>cr_retfloat:
<a name='L299'>        fld   DWORD PTR [ecx]
<a name='L300'>        jmp   cr_epilogue
<a name='L301'>
<a name='L302'>cr_retdouble:
<a name='L303'>        fld   QWORD PTR [ecx]
<a name='L304'>        jmp   cr_epilogue
<a name='L305'>
<a name='L306'>cr_retlongdouble:
<a name='L307'>        fld   TBYTE PTR [ecx]
<a name='L308'>        jmp   cr_epilogue
<a name='L309'>
<a name='L310'>cr_epilogue:
<a name='L311'>        ;; Epilogue code is autogenerated.
<a name='L312'>        ret
<a name='L313'>ffi_closure_raw_SYSV ENDP
<a name='L314'>
<a name='L315'><font color='darkred'>#endif</font> <i><font color='green'>/* !FFI_NO_RAW_API */</font></i>
<a name='L316'>
<a name='L317'>ffi_closure_STDCALL PROC NEAR FORCEFRAME
<a name='L318'>    ;; the ffi_closure ctx is passed in eax by the trampoline.
<a name='L319'>
<a name='L320'>        sub  esp, 40
<a name='L321'>        lea  edx, [ebp - 24]
<a name='L322'>        mov  [ebp - 12], edx         ;; resp
<a name='L323'>        lea  edx, [ebp + 12]         ;; account for stub return address on stack
<a name='L324'>        mov  [esp + 8], edx          ;; args
<a name='L325'>        lea  edx, [ebp - 12]
<a name='L326'>        mov  [esp + 4], edx          ;; &amp;resp
<a name='L327'>        mov  [esp], eax              ;; closure
<a name='L328'>        call ffi_closure_SYSV_inner
<a name='L329'>        mov  ecx, [ebp - 12]
<a name='L330'>
<a name='L331'>cd_jumptable:
<a name='L332'>        jmp  [cd_jumpdata + 4 * eax]
<a name='L333'>cd_jumpdata:
<a name='L334'>        ;; Do not insert anything here between the label and jump table.
<a name='L335'>        dd offset cd_epilogue       ;; FFI_TYPE_VOID
<a name='L336'>        dd offset cd_retint         ;; FFI_TYPE_INT
<a name='L337'>        dd offset cd_retfloat       ;; FFI_TYPE_FLOAT
<a name='L338'>        dd offset cd_retdouble      ;; FFI_TYPE_DOUBLE
<a name='L339'>        dd offset cd_retlongdouble  ;; FFI_TYPE_LONGDOUBLE
<a name='L340'>        dd offset cd_retint8        ;; FFI_TYPE_UINT8
<a name='L341'>        dd offset cd_retint8        ;; FFI_TYPE_SINT8
<a name='L342'>        dd offset cd_retint16       ;; FFI_TYPE_UINT16
<a name='L343'>        dd offset cd_retint16       ;; FFI_TYPE_SINT16
<a name='L344'>        dd offset cd_retint         ;; FFI_TYPE_UINT32
<a name='L345'>        dd offset cd_retint         ;; FFI_TYPE_SINT32
<a name='L346'>        dd offset cd_retint64       ;; FFI_TYPE_UINT64
<a name='L347'>        dd offset cd_retint64       ;; FFI_TYPE_SINT64
<a name='L348'>        dd offset cd_epilogue       ;; FFI_TYPE_STRUCT
<a name='L349'>        dd offset cd_retint         ;; FFI_TYPE_POINTER
<a name='L350'>        dd offset cd_retint8        ;; FFI_TYPE_SMALL_STRUCT_1B
<a name='L351'>        dd offset cd_retint16       ;; FFI_TYPE_SMALL_STRUCT_2B
<a name='L352'>        dd offset cd_retint         ;; FFI_TYPE_SMALL_STRUCT_4B
<a name='L353'>
<a name='L354'>cd_retint8:
<a name='L355'>        mov   al, [ecx]
<a name='L356'>        jmp   cd_epilogue
<a name='L357'>
<a name='L358'>cd_retint16:
<a name='L359'>        mov   ax, [ecx]
<a name='L360'>        jmp   cd_epilogue
<a name='L361'>
<a name='L362'>cd_retint:
<a name='L363'>        mov   eax, [ecx]
<a name='L364'>        jmp   cd_epilogue
<a name='L365'>
<a name='L366'>cd_retint64:
<a name='L367'>        mov   eax, [ecx + 0]
<a name='L368'>        mov   edx, [ecx + 4]
<a name='L369'>        jmp   cd_epilogue
<a name='L370'>
<a name='L371'>cd_retfloat:
<a name='L372'>        fld   DWORD PTR [ecx]
<a name='L373'>        jmp   cd_epilogue
<a name='L374'>
<a name='L375'>cd_retdouble:
<a name='L376'>        fld   QWORD PTR [ecx]
<a name='L377'>        jmp   cd_epilogue
<a name='L378'>
<a name='L379'>cd_retlongdouble:
<a name='L380'>        fld   TBYTE PTR [ecx]
<a name='L381'>        jmp   cd_epilogue
<a name='L382'>
<a name='L383'>cd_epilogue:
<a name='L384'>        ;; Epilogue code is autogenerated.
<a name='L385'>        ret
<a name='L386'>ffi_closure_STDCALL ENDP
<a name='L387'>
<a name='L388'>_TEXT ENDS
<a name='L389'>END
<a name='L390'>
<a name='L391'><font color='darkred'>#else</font>
<a name='L392'>
<a name='L393'>        .text
<a name='L394'> 
<a name='L395'><i><font color='green'>        # This assumes we are using gas.</font></i>
<a name='L396'>        .balign 16
<a name='L397'>        .globl  _ffi_call_win32
<a name='L398'>        .def    _ffi_call_win32;        .scl    2;      .type   32;     .endef
<a name='L399'>_ffi_call_win32:
<a name='L400'>.LFB1:
<a name='L401'>        pushl %ebp
<a name='L402'>.LCFI0:
<a name='L403'>        movl  %esp,%ebp
<a name='L404'>.LCFI1:
<a name='L405'><i><font color='green'>        # Make room for all of the new args.</font></i>
<a name='L406'>        movl  16(%ebp),%ecx                                                     
<a name='L407'>        subl  %ecx,%esp
<a name='L408'> 
<a name='L409'>        movl  %esp,%eax
<a name='L410'> 
<a name='L411'><i><font color='green'>        # Place all of the ffi_prep_args in position</font></i>
<a name='L412'>        pushl 12(%ebp)
<a name='L413'>        pushl %eax
<a name='L414'>        call  *8(%ebp)
<a name='L415'> 
<a name='L416'><i><font color='green'>        # Return stack to previous state and call the function</font></i>
<a name='L417'>        addl  $8,%esp
<a name='L418'> 
<a name='L419'><i><font color='green'>        # FIXME: Align the stack to a 128-bit boundary to avoid</font></i>
<a name='L420'><i><font color='green'>        # potential performance hits.</font></i>
<a name='L421'>
<a name='L422'>        call  *28(%ebp)
<a name='L423'> 
<a name='L424'><i><font color='green'>        # stdcall functions pop arguments off the stack themselves</font></i>
<a name='L425'>
<a name='L426'><i><font color='green'>        # Load %ecx with the return type code</font></i>
<a name='L427'>        movl  20(%ebp),%ecx
<a name='L428'> 
<a name='L429'><i><font color='green'>        # If the return value pointer is NULL, assume no return value.</font></i>
<a name='L430'>        cmpl  $0,24(%ebp)
<a name='L431'>        jne   0f
<a name='L432'> 
<a name='L433'><i><font color='green'>        # Even if there is no space for the return value, we are</font></i>
<a name='L434'><i><font color='green'>        # obliged to handle floating-point values.</font></i>
<a name='L435'>        cmpl  $FFI_TYPE_FLOAT,%ecx
<a name='L436'>        jne   .Lnoretval
<a name='L437'>        fstp  %st(0)
<a name='L438'> 
<a name='L439'>        jmp   .Lepilogue
<a name='L440'>
<a name='L441'>0:
<a name='L442'>        call    1f
<a name='L443'><i><font color='green'>        # Do not insert anything here between the call and the jump table.</font></i>
<a name='L444'>.Lstore_table:
<a name='L445'>        .long   .Lnoretval              <i><font color='green'>/* FFI_TYPE_VOID */</font></i>
<a name='L446'>        .long   .Lretint                <i><font color='green'>/* FFI_TYPE_INT */</font></i>
<a name='L447'>        .long   .Lretfloat              <i><font color='green'>/* FFI_TYPE_FLOAT */</font></i>
<a name='L448'>        .long   .Lretdouble             <i><font color='green'>/* FFI_TYPE_DOUBLE */</font></i>
<a name='L449'>        .long   .Lretlongdouble         <i><font color='green'>/* FFI_TYPE_LONGDOUBLE */</font></i>
<a name='L450'>        .long   .Lretuint8              <i><font color='green'>/* FFI_TYPE_UINT8 */</font></i>
<a name='L451'>        .long   .Lretsint8              <i><font color='green'>/* FFI_TYPE_SINT8 */</font></i>
<a name='L452'>        .long   .Lretuint16             <i><font color='green'>/* FFI_TYPE_UINT16 */</font></i>
<a name='L453'>        .long   .Lretsint16             <i><font color='green'>/* FFI_TYPE_SINT16 */</font></i>
<a name='L454'>        .long   .Lretint                <i><font color='green'>/* FFI_TYPE_UINT32 */</font></i>
<a name='L455'>        .long   .Lretint                <i><font color='green'>/* FFI_TYPE_SINT32 */</font></i>
<a name='L456'>        .long   .Lretint64              <i><font color='green'>/* FFI_TYPE_UINT64 */</font></i>
<a name='L457'>        .long   .Lretint64              <i><font color='green'>/* FFI_TYPE_SINT64 */</font></i>
<a name='L458'>        .long   .Lretstruct             <i><font color='green'>/* FFI_TYPE_STRUCT */</font></i>
<a name='L459'>        .long   .Lretint                <i><font color='green'>/* FFI_TYPE_POINTER */</font></i>
<a name='L460'>        .long   .Lretstruct1b           <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_1B */</font></i>
<a name='L461'>        .long   .Lretstruct2b           <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_2B */</font></i>
<a name='L462'>        .long   .Lretstruct4b           <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_4B */</font></i>
<a name='L463'>1:
<a name='L464'>        add     %ecx, %ecx
<a name='L465'>        add     %ecx, %ecx
<a name='L466'>        add     (%esp),%ecx
<a name='L467'>        add     $4, %esp
<a name='L468'>        jmp     *(%ecx)
<a name='L469'>
<a name='L470'>        <i><font color='green'>/* Sign/zero extend as appropriate.  */</font></i>
<a name='L471'>.Lretsint8:
<a name='L472'>        movsbl  %al, %eax
<a name='L473'>        jmp     .Lretint
<a name='L474'>
<a name='L475'>.Lretsint16:
<a name='L476'>        movswl  %ax, %eax
<a name='L477'>        jmp     .Lretint
<a name='L478'>
<a name='L479'>.Lretuint8:
<a name='L480'>        movzbl  %al, %eax
<a name='L481'>        jmp     .Lretint
<a name='L482'>
<a name='L483'>.Lretuint16:
<a name='L484'>        movzwl  %ax, %eax
<a name='L485'>        jmp     .Lretint
<a name='L486'>
<a name='L487'>.Lretint:
<a name='L488'><i><font color='green'>        # Load %ecx with the pointer to storage for the return value</font></i>
<a name='L489'>        movl  24(%ebp),%ecx
<a name='L490'>        movl  %eax,0(%ecx)
<a name='L491'>        jmp   .Lepilogue
<a name='L492'> 
<a name='L493'>.Lretfloat:
<a name='L494'><i><font color='green'>         # Load %ecx with the pointer to storage for the return value</font></i>
<a name='L495'>        movl  24(%ebp),%ecx
<a name='L496'>        fstps (%ecx)
<a name='L497'>        jmp   .Lepilogue
<a name='L498'> 
<a name='L499'>.Lretdouble:
<a name='L500'><i><font color='green'>        # Load %ecx with the pointer to storage for the return value</font></i>
<a name='L501'>        movl  24(%ebp),%ecx
<a name='L502'>        fstpl (%ecx)
<a name='L503'>        jmp   .Lepilogue
<a name='L504'> 
<a name='L505'>.Lretlongdouble:
<a name='L506'><i><font color='green'>        # Load %ecx with the pointer to storage for the return value</font></i>
<a name='L507'>        movl  24(%ebp),%ecx
<a name='L508'>        fstpt (%ecx)
<a name='L509'>        jmp   .Lepilogue
<a name='L510'> 
<a name='L511'>.Lretint64:
<a name='L512'><i><font color='green'>        # Load %ecx with the pointer to storage for the return value</font></i>
<a name='L513'>        movl  24(%ebp),%ecx
<a name='L514'>        movl  %eax,0(%ecx)
<a name='L515'>        movl  %edx,4(%ecx)
<a name='L516'>        jmp   .Lepilogue
<a name='L517'>
<a name='L518'>.Lretstruct1b:
<a name='L519'><i><font color='green'>        # Load %ecx with the pointer to storage for the return value</font></i>
<a name='L520'>        movl  24(%ebp),%ecx
<a name='L521'>        movb  %al,0(%ecx)
<a name='L522'>        jmp   .Lepilogue
<a name='L523'> 
<a name='L524'>.Lretstruct2b:
<a name='L525'><i><font color='green'>        # Load %ecx with the pointer to storage for the return value</font></i>
<a name='L526'>        movl  24(%ebp),%ecx
<a name='L527'>        movw  %ax,0(%ecx)
<a name='L528'>        jmp   .Lepilogue
<a name='L529'>
<a name='L530'>.Lretstruct4b:
<a name='L531'><i><font color='green'>        # Load %ecx with the pointer to storage for the return value</font></i>
<a name='L532'>        movl  24(%ebp),%ecx
<a name='L533'>        movl  %eax,0(%ecx)
<a name='L534'>        jmp   .Lepilogue
<a name='L535'>
<a name='L536'>.Lretstruct:
<a name='L537'><i><font color='green'>        # Nothing to do!</font></i>
<a name='L538'> 
<a name='L539'>.Lnoretval:
<a name='L540'>.Lepilogue:
<a name='L541'>        movl %ebp,%esp
<a name='L542'>        popl %ebp
<a name='L543'>        ret
<a name='L544'>.ffi_call_win32_end:
<a name='L545'>.LFE1:
<a name='L546'>
<a name='L547'><i><font color='green'>        # This assumes we are using gas.</font></i>
<a name='L548'>        .balign 16
<a name='L549'>        .globl  _ffi_closure_SYSV
<a name='L550'>        .def    _ffi_closure_SYSV;      .scl    2;      .type   32;     .endef
<a name='L551'>_ffi_closure_SYSV:
<a name='L552'>.LFB3:
<a name='L553'>        pushl   %ebp
<a name='L554'>.LCFI4:
<a name='L555'>        movl    %esp, %ebp
<a name='L556'>.LCFI5:
<a name='L557'>        subl    $40, %esp
<a name='L558'>        leal    -24(%ebp), %edx
<a name='L559'>        movl    %edx, -12(%ebp) <i><font color='green'>/* resp */</font></i>
<a name='L560'>        leal    8(%ebp), %edx
<a name='L561'>        movl    %edx, 4(%esp)   <i><font color='green'>/* args = __builtin_dwarf_cfa () */</font></i>
<a name='L562'>        leal    -12(%ebp), %edx
<a name='L563'>        movl    %edx, (%esp)    <i><font color='green'>/* &amp;resp */</font></i>
<a name='L564'>        call    _ffi_closure_SYSV_inner
<a name='L565'>        movl    -12(%ebp), %ecx
<a name='L566'>
<a name='L567'>0:
<a name='L568'>        call    1f
<a name='L569'><i><font color='green'>        # Do not insert anything here between the call and the jump table.</font></i>
<a name='L570'>.Lcls_store_table:
<a name='L571'>        .long   .Lcls_noretval          <i><font color='green'>/* FFI_TYPE_VOID */</font></i>
<a name='L572'>        .long   .Lcls_retint            <i><font color='green'>/* FFI_TYPE_INT */</font></i>
<a name='L573'>        .long   .Lcls_retfloat          <i><font color='green'>/* FFI_TYPE_FLOAT */</font></i>
<a name='L574'>        .long   .Lcls_retdouble         <i><font color='green'>/* FFI_TYPE_DOUBLE */</font></i>
<a name='L575'>        .long   .Lcls_retldouble        <i><font color='green'>/* FFI_TYPE_LONGDOUBLE */</font></i>
<a name='L576'>        .long   .Lcls_retuint8          <i><font color='green'>/* FFI_TYPE_UINT8 */</font></i>
<a name='L577'>        .long   .Lcls_retsint8          <i><font color='green'>/* FFI_TYPE_SINT8 */</font></i>
<a name='L578'>        .long   .Lcls_retuint16         <i><font color='green'>/* FFI_TYPE_UINT16 */</font></i>
<a name='L579'>        .long   .Lcls_retsint16         <i><font color='green'>/* FFI_TYPE_SINT16 */</font></i>
<a name='L580'>        .long   .Lcls_retint            <i><font color='green'>/* FFI_TYPE_UINT32 */</font></i>
<a name='L581'>        .long   .Lcls_retint            <i><font color='green'>/* FFI_TYPE_SINT32 */</font></i>
<a name='L582'>        .long   .Lcls_retllong          <i><font color='green'>/* FFI_TYPE_UINT64 */</font></i>
<a name='L583'>        .long   .Lcls_retllong          <i><font color='green'>/* FFI_TYPE_SINT64 */</font></i>
<a name='L584'>        .long   .Lcls_retstruct         <i><font color='green'>/* FFI_TYPE_STRUCT */</font></i>
<a name='L585'>        .long   .Lcls_retint            <i><font color='green'>/* FFI_TYPE_POINTER */</font></i>
<a name='L586'>        .long   .Lcls_retstruct1        <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_1B */</font></i>
<a name='L587'>        .long   .Lcls_retstruct2        <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_2B */</font></i>
<a name='L588'>        .long   .Lcls_retstruct4        <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_4B */</font></i>
<a name='L589'>
<a name='L590'>1:
<a name='L591'>        add     %eax, %eax
<a name='L592'>        add     %eax, %eax
<a name='L593'>        add     (%esp),%eax
<a name='L594'>        add     $4, %esp
<a name='L595'>        jmp     *(%eax)
<a name='L596'>
<a name='L597'>        <i><font color='green'>/* Sign/zero extend as appropriate.  */</font></i>
<a name='L598'>.Lcls_retsint8:
<a name='L599'>        movsbl  (%ecx), %eax
<a name='L600'>        jmp     .Lcls_epilogue
<a name='L601'>
<a name='L602'>.Lcls_retsint16:
<a name='L603'>        movswl  (%ecx), %eax
<a name='L604'>        jmp     .Lcls_epilogue
<a name='L605'>
<a name='L606'>.Lcls_retuint8:
<a name='L607'>        movzbl  (%ecx), %eax
<a name='L608'>        jmp     .Lcls_epilogue
<a name='L609'>
<a name='L610'>.Lcls_retuint16:
<a name='L611'>        movzwl  (%ecx), %eax
<a name='L612'>        jmp     .Lcls_epilogue
<a name='L613'>
<a name='L614'>.Lcls_retint:
<a name='L615'>        movl    (%ecx), %eax
<a name='L616'>        jmp     .Lcls_epilogue
<a name='L617'>
<a name='L618'>.Lcls_retfloat:
<a name='L619'>        flds    (%ecx)
<a name='L620'>        jmp     .Lcls_epilogue
<a name='L621'>
<a name='L622'>.Lcls_retdouble:
<a name='L623'>        fldl    (%ecx)
<a name='L624'>        jmp     .Lcls_epilogue
<a name='L625'>
<a name='L626'>.Lcls_retldouble:
<a name='L627'>        fldt    (%ecx)
<a name='L628'>        jmp     .Lcls_epilogue
<a name='L629'>
<a name='L630'>.Lcls_retllong:
<a name='L631'>        movl    (%ecx), %eax
<a name='L632'>        movl    4(%ecx), %edx
<a name='L633'>        jmp     .Lcls_epilogue
<a name='L634'>
<a name='L635'>.Lcls_retstruct1:
<a name='L636'>        movsbl  (%ecx), %eax
<a name='L637'>        jmp     .Lcls_epilogue
<a name='L638'>
<a name='L639'>.Lcls_retstruct2:
<a name='L640'>        movswl  (%ecx), %eax
<a name='L641'>        jmp     .Lcls_epilogue
<a name='L642'>
<a name='L643'>.Lcls_retstruct4:
<a name='L644'>        movl    (%ecx), %eax
<a name='L645'>        jmp     .Lcls_epilogue
<a name='L646'>
<a name='L647'>.Lcls_retstruct:
<a name='L648'><i><font color='green'>        # Caller expects us to pop struct return value pointer hidden arg.</font></i>
<a name='L649'>        movl    %ebp, %esp
<a name='L650'>        popl    %ebp
<a name='L651'>        ret     $0x4
<a name='L652'>
<a name='L653'>.Lcls_noretval:
<a name='L654'>.Lcls_epilogue:
<a name='L655'>        movl    %ebp, %esp
<a name='L656'>        popl    %ebp
<a name='L657'>        ret
<a name='L658'>.ffi_closure_SYSV_end:
<a name='L659'>.LFE3:
<a name='L660'>
<a name='L661'><font color='darkred'>#if</font> !<a href='../D/1162.html' title='Multiple defined in 2 places.'>FFI_NO_RAW_API</a>
<a name='L662'>
<a name='L663'><font color='darkred'>#define</font> RAW_CLOSURE_CIF_OFFSET ((FFI_TRAMPOLINE_SIZE + 3) &amp; ~3)
<a name='L664'><font color='darkred'>#define</font> RAW_CLOSURE_FUN_OFFSET (RAW_CLOSURE_CIF_OFFSET + 4)
<a name='L665'><font color='darkred'>#define</font> RAW_CLOSURE_USER_DATA_OFFSET (RAW_CLOSURE_FUN_OFFSET + 4)
<a name='L666'><font color='darkred'>#define</font> CIF_FLAGS_OFFSET 20
<a name='L667'>
<a name='L668'><i><font color='green'>        # This assumes we are using gas.</font></i>
<a name='L669'>        .balign 16
<a name='L670'>        .globl  _ffi_closure_raw_SYSV
<a name='L671'>        .def    _ffi_closure_raw_SYSV;  .scl    2;      .type   32;     .endef
<a name='L672'>_ffi_closure_raw_SYSV:
<a name='L673'>.LFB4:
<a name='L674'>        pushl   %ebp
<a name='L675'>.LCFI6:
<a name='L676'>        movl    %esp, %ebp
<a name='L677'>.LCFI7:
<a name='L678'>        pushl   %esi
<a name='L679'>.LCFI8:
<a name='L680'>        subl    $36, %esp
<a name='L681'>        movl    RAW_CLOSURE_CIF_OFFSET(%eax), %esi       <i><font color='green'>/* closure-&gt;cif */</font></i>
<a name='L682'>        movl    RAW_CLOSURE_USER_DATA_OFFSET(%eax), %edx <i><font color='green'>/* closure-&gt;user_data */</font></i>
<a name='L683'>        movl    %edx, 12(%esp)  <i><font color='green'>/* user_data */</font></i>
<a name='L684'>        leal    8(%ebp), %edx   <i><font color='green'>/* __builtin_dwarf_cfa () */</font></i>
<a name='L685'>        movl    %edx, 8(%esp)   <i><font color='green'>/* raw_args */</font></i>
<a name='L686'>        leal    -24(%ebp), %edx
<a name='L687'>        movl    %edx, 4(%esp)   <i><font color='green'>/* &amp;res */</font></i>
<a name='L688'>        movl    %esi, (%esp)    <i><font color='green'>/* cif */</font></i>
<a name='L689'>        call    *RAW_CLOSURE_FUN_OFFSET(%eax)            <i><font color='green'>/* closure-&gt;fun */</font></i>
<a name='L690'>        movl    CIF_FLAGS_OFFSET(%esi), %eax             <i><font color='green'>/* rtype */</font></i>
<a name='L691'>0:
<a name='L692'>        call    1f
<a name='L693'><i><font color='green'>        # Do not insert anything here between the call and the jump table.</font></i>
<a name='L694'>.Lrcls_store_table:
<a name='L695'>        .long   .Lrcls_noretval         <i><font color='green'>/* FFI_TYPE_VOID */</font></i>
<a name='L696'>        .long   .Lrcls_retint           <i><font color='green'>/* FFI_TYPE_INT */</font></i>
<a name='L697'>        .long   .Lrcls_retfloat         <i><font color='green'>/* FFI_TYPE_FLOAT */</font></i>
<a name='L698'>        .long   .Lrcls_retdouble        <i><font color='green'>/* FFI_TYPE_DOUBLE */</font></i>
<a name='L699'>        .long   .Lrcls_retldouble       <i><font color='green'>/* FFI_TYPE_LONGDOUBLE */</font></i>
<a name='L700'>        .long   .Lrcls_retuint8         <i><font color='green'>/* FFI_TYPE_UINT8 */</font></i>
<a name='L701'>        .long   .Lrcls_retsint8         <i><font color='green'>/* FFI_TYPE_SINT8 */</font></i>
<a name='L702'>        .long   .Lrcls_retuint16        <i><font color='green'>/* FFI_TYPE_UINT16 */</font></i>
<a name='L703'>        .long   .Lrcls_retsint16        <i><font color='green'>/* FFI_TYPE_SINT16 */</font></i>
<a name='L704'>        .long   .Lrcls_retint           <i><font color='green'>/* FFI_TYPE_UINT32 */</font></i>
<a name='L705'>        .long   .Lrcls_retint           <i><font color='green'>/* FFI_TYPE_SINT32 */</font></i>
<a name='L706'>        .long   .Lrcls_retllong         <i><font color='green'>/* FFI_TYPE_UINT64 */</font></i>
<a name='L707'>        .long   .Lrcls_retllong         <i><font color='green'>/* FFI_TYPE_SINT64 */</font></i>
<a name='L708'>        .long   .Lrcls_retstruct        <i><font color='green'>/* FFI_TYPE_STRUCT */</font></i>
<a name='L709'>        .long   .Lrcls_retint           <i><font color='green'>/* FFI_TYPE_POINTER */</font></i>
<a name='L710'>        .long   .Lrcls_retstruct1       <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_1B */</font></i>
<a name='L711'>        .long   .Lrcls_retstruct2       <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_2B */</font></i>
<a name='L712'>        .long   .Lrcls_retstruct4       <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_4B */</font></i>
<a name='L713'>1:
<a name='L714'>        add     %eax, %eax
<a name='L715'>        add     %eax, %eax
<a name='L716'>        add     (%esp),%eax
<a name='L717'>        add     $4, %esp
<a name='L718'>        jmp     *(%eax)
<a name='L719'>
<a name='L720'>        <i><font color='green'>/* Sign/zero extend as appropriate.  */</font></i>
<a name='L721'>.Lrcls_retsint8:
<a name='L722'>        movsbl  -24(%ebp), %eax
<a name='L723'>        jmp     .Lrcls_epilogue
<a name='L724'>
<a name='L725'>.Lrcls_retsint16:
<a name='L726'>        movswl  -24(%ebp), %eax
<a name='L727'>        jmp     .Lrcls_epilogue
<a name='L728'>
<a name='L729'>.Lrcls_retuint8:
<a name='L730'>        movzbl  -24(%ebp), %eax
<a name='L731'>        jmp     .Lrcls_epilogue
<a name='L732'>
<a name='L733'>.Lrcls_retuint16:
<a name='L734'>        movzwl  -24(%ebp), %eax
<a name='L735'>        jmp     .Lrcls_epilogue
<a name='L736'>
<a name='L737'>.Lrcls_retint:
<a name='L738'>        movl    -24(%ebp), %eax
<a name='L739'>        jmp     .Lrcls_epilogue
<a name='L740'>
<a name='L741'>.Lrcls_retfloat:
<a name='L742'>        flds    -24(%ebp)
<a name='L743'>        jmp     .Lrcls_epilogue
<a name='L744'>
<a name='L745'>.Lrcls_retdouble:
<a name='L746'>        fldl    -24(%ebp)
<a name='L747'>        jmp     .Lrcls_epilogue
<a name='L748'>
<a name='L749'>.Lrcls_retldouble:
<a name='L750'>        fldt    -24(%ebp)
<a name='L751'>        jmp     .Lrcls_epilogue
<a name='L752'>
<a name='L753'>.Lrcls_retllong:
<a name='L754'>        movl    -24(%ebp), %eax
<a name='L755'>        movl    -20(%ebp), %edx
<a name='L756'>        jmp     .Lrcls_epilogue
<a name='L757'>
<a name='L758'>.Lrcls_retstruct1:
<a name='L759'>        movsbl  -24(%ebp), %eax
<a name='L760'>        jmp     .Lrcls_epilogue
<a name='L761'>
<a name='L762'>.Lrcls_retstruct2:
<a name='L763'>        movswl  -24(%ebp), %eax
<a name='L764'>        jmp     .Lrcls_epilogue
<a name='L765'>
<a name='L766'>.Lrcls_retstruct4:
<a name='L767'>        movl    -24(%ebp), %eax
<a name='L768'>        jmp     .Lrcls_epilogue
<a name='L769'>
<a name='L770'>.Lrcls_retstruct:
<a name='L771'><i><font color='green'>        # Nothing to do!</font></i>
<a name='L772'>
<a name='L773'>.Lrcls_noretval:
<a name='L774'>.Lrcls_epilogue:
<a name='L775'>        addl    $36, %esp
<a name='L776'>        popl    %esi
<a name='L777'>        popl    %ebp
<a name='L778'>        ret
<a name='L779'>.ffi_closure_raw_SYSV_end:
<a name='L780'>.LFE4:
<a name='L781'>
<a name='L782'><font color='darkred'>#endif</font> <i><font color='green'>/* !FFI_NO_RAW_API */</font></i>
<a name='L783'>
<a name='L784'><i><font color='green'>        # This assumes we are using gas.</font></i>
<a name='L785'>        .balign 16
<a name='L786'>        .globl  _ffi_closure_STDCALL
<a name='L787'>        .def    _ffi_closure_STDCALL;   .scl    2;      .type   32;     .endef
<a name='L788'>_ffi_closure_STDCALL:
<a name='L789'>.LFB5:
<a name='L790'>        pushl   %ebp
<a name='L791'>.LCFI9:
<a name='L792'>        movl    %esp, %ebp
<a name='L793'>.LCFI10:
<a name='L794'>        subl    $40, %esp
<a name='L795'>        leal    -24(%ebp), %edx
<a name='L796'>        movl    %edx, -12(%ebp) <i><font color='green'>/* resp */</font></i>
<a name='L797'>        leal    12(%ebp), %edx  <i><font color='green'>/* account for stub return address on stack */</font></i>
<a name='L798'>        movl    %edx, 4(%esp)   <i><font color='green'>/* args */</font></i>
<a name='L799'>        leal    -12(%ebp), %edx
<a name='L800'>        movl    %edx, (%esp)    <i><font color='green'>/* &amp;resp */</font></i>
<a name='L801'>        call    _ffi_closure_SYSV_inner
<a name='L802'>        movl    -12(%ebp), %ecx
<a name='L803'>0:
<a name='L804'>        call    1f
<a name='L805'><i><font color='green'>        # Do not insert anything here between the call and the jump table.</font></i>
<a name='L806'>.Lscls_store_table:
<a name='L807'>        .long   .Lscls_noretval         <i><font color='green'>/* FFI_TYPE_VOID */</font></i>
<a name='L808'>        .long   .Lscls_retint           <i><font color='green'>/* FFI_TYPE_INT */</font></i>
<a name='L809'>        .long   .Lscls_retfloat         <i><font color='green'>/* FFI_TYPE_FLOAT */</font></i>
<a name='L810'>        .long   .Lscls_retdouble        <i><font color='green'>/* FFI_TYPE_DOUBLE */</font></i>
<a name='L811'>        .long   .Lscls_retldouble       <i><font color='green'>/* FFI_TYPE_LONGDOUBLE */</font></i>
<a name='L812'>        .long   .Lscls_retuint8         <i><font color='green'>/* FFI_TYPE_UINT8 */</font></i>
<a name='L813'>        .long   .Lscls_retsint8         <i><font color='green'>/* FFI_TYPE_SINT8 */</font></i>
<a name='L814'>        .long   .Lscls_retuint16        <i><font color='green'>/* FFI_TYPE_UINT16 */</font></i>
<a name='L815'>        .long   .Lscls_retsint16        <i><font color='green'>/* FFI_TYPE_SINT16 */</font></i>
<a name='L816'>        .long   .Lscls_retint           <i><font color='green'>/* FFI_TYPE_UINT32 */</font></i>
<a name='L817'>        .long   .Lscls_retint           <i><font color='green'>/* FFI_TYPE_SINT32 */</font></i>
<a name='L818'>        .long   .Lscls_retllong         <i><font color='green'>/* FFI_TYPE_UINT64 */</font></i>
<a name='L819'>        .long   .Lscls_retllong         <i><font color='green'>/* FFI_TYPE_SINT64 */</font></i>
<a name='L820'>        .long   .Lscls_retstruct        <i><font color='green'>/* FFI_TYPE_STRUCT */</font></i>
<a name='L821'>        .long   .Lscls_retint           <i><font color='green'>/* FFI_TYPE_POINTER */</font></i>
<a name='L822'>        .long   .Lscls_retstruct1       <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_1B */</font></i>
<a name='L823'>        .long   .Lscls_retstruct2       <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_2B */</font></i>
<a name='L824'>        .long   .Lscls_retstruct4       <i><font color='green'>/* FFI_TYPE_SMALL_STRUCT_4B */</font></i>
<a name='L825'>1:
<a name='L826'>        add     %eax, %eax
<a name='L827'>        add     %eax, %eax
<a name='L828'>        add     (%esp),%eax
<a name='L829'>        add     $4, %esp
<a name='L830'>        jmp     *(%eax)
<a name='L831'>
<a name='L832'>        <i><font color='green'>/* Sign/zero extend as appropriate.  */</font></i>
<a name='L833'>.Lscls_retsint8:
<a name='L834'>        movsbl  (%ecx), %eax
<a name='L835'>        jmp     .Lscls_epilogue
<a name='L836'>
<a name='L837'>.Lscls_retsint16:
<a name='L838'>        movswl  (%ecx), %eax
<a name='L839'>        jmp     .Lscls_epilogue
<a name='L840'>
<a name='L841'>.Lscls_retuint8:
<a name='L842'>        movzbl  (%ecx), %eax
<a name='L843'>        jmp     .Lscls_epilogue
<a name='L844'>
<a name='L845'>.Lscls_retuint16:
<a name='L846'>        movzwl  (%ecx), %eax
<a name='L847'>        jmp     .Lscls_epilogue
<a name='L848'>
<a name='L849'>.Lscls_retint:
<a name='L850'>        movl    (%ecx), %eax
<a name='L851'>        jmp     .Lscls_epilogue
<a name='L852'>
<a name='L853'>.Lscls_retfloat:
<a name='L854'>        flds    (%ecx)
<a name='L855'>        jmp     .Lscls_epilogue
<a name='L856'>
<a name='L857'>.Lscls_retdouble:
<a name='L858'>        fldl    (%ecx)
<a name='L859'>        jmp     .Lscls_epilogue
<a name='L860'>
<a name='L861'>.Lscls_retldouble:
<a name='L862'>        fldt    (%ecx)
<a name='L863'>        jmp     .Lscls_epilogue
<a name='L864'>
<a name='L865'>.Lscls_retllong:
<a name='L866'>        movl    (%ecx), %eax
<a name='L867'>        movl    4(%ecx), %edx
<a name='L868'>        jmp     .Lscls_epilogue
<a name='L869'>
<a name='L870'>.Lscls_retstruct1:
<a name='L871'>        movsbl  (%ecx), %eax
<a name='L872'>        jmp     .Lscls_epilogue
<a name='L873'>
<a name='L874'>.Lscls_retstruct2:
<a name='L875'>        movswl  (%ecx), %eax
<a name='L876'>        jmp     .Lscls_epilogue
<a name='L877'>
<a name='L878'>.Lscls_retstruct4:
<a name='L879'>        movl    (%ecx), %eax
<a name='L880'>        jmp     .Lscls_epilogue
<a name='L881'>
<a name='L882'>.Lscls_retstruct:
<a name='L883'><i><font color='green'>        # Nothing to do!</font></i>
<a name='L884'>
<a name='L885'>.Lscls_noretval:
<a name='L886'>.Lscls_epilogue:
<a name='L887'>        movl    %ebp, %esp
<a name='L888'>        popl    %ebp
<a name='L889'>        ret
<a name='L890'>.ffi_closure_STDCALL_end:
<a name='L891'>.LFE5:
<a name='L892'>
<a name='L893'>        .section        .eh_frame,"w"
<a name='L894'>.Lframe1:
<a name='L895'>.LSCIE1:
<a name='L896'>        .long   .LECIE1-.LASCIE1  <i><font color='green'>/* Length of Common Information Entry */</font></i>
<a name='L897'>.LASCIE1:
<a name='L898'>        .long   0x0     <i><font color='green'>/* CIE Identifier Tag */</font></i>
<a name='L899'>        .byte   0x1     <i><font color='green'>/* CIE Version */</font></i>
<a name='L900'><font color='darkred'>#ifdef</font> __PIC__
<a name='L901'>        .ascii "zR\0"   <i><font color='green'>/* CIE Augmentation */</font></i>
<a name='L902'><font color='darkred'>#else</font>
<a name='L903'>        .ascii "\0"     <i><font color='green'>/* CIE Augmentation */</font></i>
<a name='L904'><font color='darkred'>#endif</font>
<a name='L905'>        .byte   0x1     <i><font color='green'>/* .uleb128 0x1; CIE Code Alignment Factor */</font></i>
<a name='L906'>        .byte   0x7c    <i><font color='green'>/* .sleb128 -4; CIE Data Alignment Factor */</font></i>
<a name='L907'>        .byte   0x8     <i><font color='green'>/* CIE RA Column */</font></i>
<a name='L908'><font color='darkred'>#ifdef</font> __PIC__
<a name='L909'>        .byte   0x1     <i><font color='green'>/* .uleb128 0x1; Augmentation size */</font></i>
<a name='L910'>        .byte   0x1b    <i><font color='green'>/* FDE Encoding (pcrel sdata4) */</font></i>
<a name='L911'><font color='darkred'>#endif</font>
<a name='L912'>        .byte   0xc     <i><font color='green'>/* DW_CFA_def_cfa CFA = r4 + 4 = 4(%esp) */</font></i>
<a name='L913'>        .byte   0x4     <i><font color='green'>/* .uleb128 0x4 */</font></i>
<a name='L914'>        .byte   0x4     <i><font color='green'>/* .uleb128 0x4 */</font></i>
<a name='L915'>        .byte   0x88    <i><font color='green'>/* DW_CFA_offset, column 0x8 %eip at CFA + 1 * -4 */</font></i>
<a name='L916'>        .byte   0x1     <i><font color='green'>/* .uleb128 0x1 */</font></i>
<a name='L917'>        .align 4
<a name='L918'>.LECIE1:
<a name='L919'>
<a name='L920'>.LSFDE1:
<a name='L921'>        .long   .LEFDE1-.LASFDE1        <i><font color='green'>/* FDE Length */</font></i>
<a name='L922'>.LASFDE1:
<a name='L923'>        .long   .LASFDE1-.Lframe1       <i><font color='green'>/* FDE CIE offset */</font></i>
<a name='L924'><font color='darkred'>#if</font> <b>defined</b> __PIC__ &amp;&amp; <b>defined</b> HAVE_AS_X86_PCREL
<a name='L925'>        .long   .LFB1-. <i><font color='green'>/* FDE initial location */</font></i>
<a name='L926'><font color='darkred'>#else</font>
<a name='L927'>        .long   .LFB1
<a name='L928'><font color='darkred'>#endif</font>
<a name='L929'>        .long   .LFE1-.LFB1     <i><font color='green'>/* FDE address range */</font></i>
<a name='L930'><font color='darkred'>#ifdef</font> __PIC__
<a name='L931'>        .byte   0x0     <i><font color='green'>/* .uleb128 0x0; Augmentation size */</font></i>
<a name='L932'><font color='darkred'>#endif</font>
<a name='L933'>        <i><font color='green'>/* DW_CFA_xxx CFI instructions go here.  */</font></i>
<a name='L934'>
<a name='L935'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L936'>        .long   .LCFI0-.LFB1
<a name='L937'>        .byte   0xe     <i><font color='green'>/* DW_CFA_def_cfa_offset CFA = r4 + 8 = 8(%esp) */</font></i>
<a name='L938'>        .byte   0x8     <i><font color='green'>/* .uleb128 0x8 */</font></i>
<a name='L939'>        .byte   0x85    <i><font color='green'>/* DW_CFA_offset, column 0x5 %ebp at CFA + 2 * -4 */</font></i>
<a name='L940'>        .byte   0x2     <i><font color='green'>/* .uleb128 0x2 */</font></i>
<a name='L941'>
<a name='L942'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L943'>        .long   .LCFI1-.LCFI0
<a name='L944'>        .byte   0xd     <i><font color='green'>/* DW_CFA_def_cfa_register CFA = r5 = %ebp */</font></i>
<a name='L945'>        .byte   0x5     <i><font color='green'>/* .uleb128 0x5 */</font></i>
<a name='L946'>
<a name='L947'>        <i><font color='green'>/* End of DW_CFA_xxx CFI instructions.  */</font></i>
<a name='L948'>        .align 4
<a name='L949'>.LEFDE1:
<a name='L950'>
<a name='L951'>
<a name='L952'>.LSFDE3:
<a name='L953'>        .long   .LEFDE3-.LASFDE3        <i><font color='green'>/* FDE Length */</font></i>
<a name='L954'>.LASFDE3:
<a name='L955'>        .long   .LASFDE3-.Lframe1       <i><font color='green'>/* FDE CIE offset */</font></i>
<a name='L956'><font color='darkred'>#if</font> <b>defined</b> __PIC__ &amp;&amp; <b>defined</b> HAVE_AS_X86_PCREL
<a name='L957'>        .long   .LFB3-. <i><font color='green'>/* FDE initial location */</font></i>
<a name='L958'><font color='darkred'>#else</font>
<a name='L959'>        .long   .LFB3
<a name='L960'><font color='darkred'>#endif</font>
<a name='L961'>        .long   .LFE3-.LFB3     <i><font color='green'>/* FDE address range */</font></i>
<a name='L962'><font color='darkred'>#ifdef</font> __PIC__
<a name='L963'>        .byte   0x0     <i><font color='green'>/* .uleb128 0x0; Augmentation size */</font></i>
<a name='L964'><font color='darkred'>#endif</font>
<a name='L965'>        <i><font color='green'>/* DW_CFA_xxx CFI instructions go here.  */</font></i>
<a name='L966'>
<a name='L967'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L968'>        .long   .LCFI4-.LFB3
<a name='L969'>        .byte   0xe     <i><font color='green'>/* DW_CFA_def_cfa_offset CFA = r4 + 8 = 8(%esp) */</font></i>
<a name='L970'>        .byte   0x8     <i><font color='green'>/* .uleb128 0x8 */</font></i>
<a name='L971'>        .byte   0x85    <i><font color='green'>/* DW_CFA_offset, column 0x5 %ebp at CFA + 2 * -4 */</font></i>
<a name='L972'>        .byte   0x2     <i><font color='green'>/* .uleb128 0x2 */</font></i>
<a name='L973'>
<a name='L974'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L975'>        .long   .LCFI5-.LCFI4
<a name='L976'>        .byte   0xd     <i><font color='green'>/* DW_CFA_def_cfa_register CFA = r5 = %ebp */</font></i>
<a name='L977'>        .byte   0x5     <i><font color='green'>/* .uleb128 0x5 */</font></i>
<a name='L978'>
<a name='L979'>        <i><font color='green'>/* End of DW_CFA_xxx CFI instructions.  */</font></i>
<a name='L980'>        .align 4
<a name='L981'>.LEFDE3:
<a name='L982'>
<a name='L983'><font color='darkred'>#if</font> !<a href='../D/1162.html' title='Multiple defined in 2 places.'>FFI_NO_RAW_API</a>
<a name='L984'>
<a name='L985'>.LSFDE4:
<a name='L986'>        .long   .LEFDE4-.LASFDE4        <i><font color='green'>/* FDE Length */</font></i>
<a name='L987'>.LASFDE4:
<a name='L988'>        .long   .LASFDE4-.Lframe1       <i><font color='green'>/* FDE CIE offset */</font></i>
<a name='L989'><font color='darkred'>#if</font> <b>defined</b> __PIC__ &amp;&amp; <b>defined</b> HAVE_AS_X86_PCREL
<a name='L990'>        .long   .LFB4-. <i><font color='green'>/* FDE initial location */</font></i>
<a name='L991'><font color='darkred'>#else</font>
<a name='L992'>        .long   .LFB4
<a name='L993'><font color='darkred'>#endif</font>
<a name='L994'>        .long   .LFE4-.LFB4     <i><font color='green'>/* FDE address range */</font></i>
<a name='L995'><font color='darkred'>#ifdef</font> __PIC__
<a name='L996'>        .byte   0x0     <i><font color='green'>/* .uleb128 0x0; Augmentation size */</font></i>
<a name='L997'><font color='darkred'>#endif</font>
<a name='L998'>        <i><font color='green'>/* DW_CFA_xxx CFI instructions go here.  */</font></i>
<a name='L999'>
<a name='L1000'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L1001'>        .long   .LCFI6-.LFB4
<a name='L1002'>        .byte   0xe     <i><font color='green'>/* DW_CFA_def_cfa_offset CFA = r4 + 8 = 8(%esp) */</font></i>
<a name='L1003'>        .byte   0x8     <i><font color='green'>/* .uleb128 0x8 */</font></i>
<a name='L1004'>        .byte   0x85    <i><font color='green'>/* DW_CFA_offset, column 0x5 %ebp at CFA + 2 * -4 */</font></i>
<a name='L1005'>        .byte   0x2     <i><font color='green'>/* .uleb128 0x2 */</font></i>
<a name='L1006'>
<a name='L1007'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L1008'>        .long   .LCFI7-.LCFI6
<a name='L1009'>        .byte   0xd     <i><font color='green'>/* DW_CFA_def_cfa_register CFA = r5 = %ebp */</font></i>
<a name='L1010'>        .byte   0x5     <i><font color='green'>/* .uleb128 0x5 */</font></i>
<a name='L1011'>
<a name='L1012'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L1013'>        .long   .LCFI8-.LCFI7
<a name='L1014'>        .byte   0x86    <i><font color='green'>/* DW_CFA_offset, column 0x6 %esi at CFA + 3 * -4 */</font></i>
<a name='L1015'>        .byte   0x3     <i><font color='green'>/* .uleb128 0x3 */</font></i>
<a name='L1016'>
<a name='L1017'>        <i><font color='green'>/* End of DW_CFA_xxx CFI instructions.  */</font></i>
<a name='L1018'>        .align 4
<a name='L1019'>.LEFDE4:
<a name='L1020'>
<a name='L1021'><font color='darkred'>#endif</font> <i><font color='green'>/* !FFI_NO_RAW_API */</font></i>
<a name='L1022'>
<a name='L1023'>.LSFDE5:
<a name='L1024'>        .long   .LEFDE5-.LASFDE5        <i><font color='green'>/* FDE Length */</font></i>
<a name='L1025'>.LASFDE5:
<a name='L1026'>        .long   .LASFDE5-.Lframe1       <i><font color='green'>/* FDE CIE offset */</font></i>
<a name='L1027'><font color='darkred'>#if</font> <b>defined</b> __PIC__ &amp;&amp; <b>defined</b> HAVE_AS_X86_PCREL
<a name='L1028'>        .long   .LFB5-. <i><font color='green'>/* FDE initial location */</font></i>
<a name='L1029'><font color='darkred'>#else</font>
<a name='L1030'>        .long   .LFB5
<a name='L1031'><font color='darkred'>#endif</font>
<a name='L1032'>        .long   .LFE5-.LFB5     <i><font color='green'>/* FDE address range */</font></i>
<a name='L1033'><font color='darkred'>#ifdef</font> __PIC__
<a name='L1034'>        .byte   0x0     <i><font color='green'>/* .uleb128 0x0; Augmentation size */</font></i>
<a name='L1035'><font color='darkred'>#endif</font>
<a name='L1036'>        <i><font color='green'>/* DW_CFA_xxx CFI instructions go here.  */</font></i>
<a name='L1037'>
<a name='L1038'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L1039'>        .long   .LCFI9-.LFB5
<a name='L1040'>        .byte   0xe     <i><font color='green'>/* DW_CFA_def_cfa_offset CFA = r4 + 8 = 8(%esp) */</font></i>
<a name='L1041'>        .byte   0x8     <i><font color='green'>/* .uleb128 0x8 */</font></i>
<a name='L1042'>        .byte   0x85    <i><font color='green'>/* DW_CFA_offset, column 0x5 %ebp at CFA + 2 * -4 */</font></i>
<a name='L1043'>        .byte   0x2     <i><font color='green'>/* .uleb128 0x2 */</font></i>
<a name='L1044'>
<a name='L1045'>        .byte   0x4     <i><font color='green'>/* DW_CFA_advance_loc4 */</font></i>
<a name='L1046'>        .long   .LCFI10-.LCFI9
<a name='L1047'>        .byte   0xd     <i><font color='green'>/* DW_CFA_def_cfa_register CFA = r5 = %ebp */</font></i>
<a name='L1048'>        .byte   0x5     <i><font color='green'>/* .uleb128 0x5 */</font></i>
<a name='L1049'>
<a name='L1050'>        <i><font color='green'>/* End of DW_CFA_xxx CFI instructions.  */</font></i>
<a name='L1051'>        .align 4
<a name='L1052'>.LEFDE5:
<a name='L1053'>
<a name='L1054'><font color='darkred'>#endif</font> <i><font color='green'>/* !_MSC_VER */</font></i>
<a name='L1055'>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;][^][v]<a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
