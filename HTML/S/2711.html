<html>
<head>
<title>Modules/socketmodule.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/socketmodule.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L352'>[^]</a><a href='#L5364'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L352' title='Defined at 352.'>dup_socket</a>
<li><a href='#L473' title='Defined at 473.'>select_error</a>
<li><a href='#L494' title='Defined at 494.'>set_error</a>
<li><a href='#L546' title='Defined at 546.'>set_herror</a>
<li><a href='#L565' title='Defined at 565.'>set_gaierror</a>
<li><a href='#L591' title='Defined at 591.'>sendsegmented</a>
<li><a href='#L615' title='Defined at 615.'>internal_setblocking</a>
<li><a href='#L659' title='Defined at 659.'>internal_select_ex</a>
<li><a href='#L717' title='Defined at 717.'>internal_select</a>
<li><a href='#L768' title='Defined at 768.'>init_sockobject</a>
<li><a href='#L797' title='Defined at 797.'>new_sockobject</a>
<li><a href='#L822' title='Defined at 822.'>setipaddr</a>
<li><a href='#L948' title='Defined at 948.'>makeipaddr</a>
<li><a href='#L969' title='Defined at 969.'>setbdaddr</a>
<li><a href='#L996' title='Defined at 996.'>makebdaddr</a>
<li><a href='#L1015' title='Defined at 1015.'>makesockaddr</a>
<li><a href='#L1217' title='Defined at 1217.'>getsockaddrarg</a>
<li><a href='#L1579' title='Defined at 1579.'>getsockaddrlen</a>
<li><a href='#L1670' title='Defined at 1670.'>sock_accept</a>
<li><a href='#L1735' title='Defined at 1735.'>sock_setblocking</a>
<li><a href='#L1764' title='Defined at 1764.'>sock_settimeout</a>
<li><a href='#L1798' title='Defined at 1798.'>sock_gettimeout</a>
<li><a href='#L1821' title='Defined at 1821.'>sock_setsockopt</a>
<li><a href='#L1861' title='Defined at 1861.'>sock_getsockopt</a>
<li><a href='#L1917' title='Defined at 1917.'>sock_bind</a>
<li><a href='#L1947' title='Defined at 1947.'>sock_close</a>
<li><a href='#L1967' title='Defined at 1967.'>sock_detach</a>
<li><a href='#L1982' title='Defined at 1982.'>internal_connect</a>
<li><a href='#L2073' title='Defined at 2073.'>sock_connect</a>
<li><a href='#L2107' title='Defined at 2107.'>sock_connect_ex</a>
<li><a href='#L2141' title='Defined at 2141.'>sock_fileno</a>
<li><a href='#L2155' title='Defined at 2155.'>sock_getsockname</a>
<li><a href='#L2184' title='Defined at 2184.'>sock_getpeername</a>
<li><a href='#L2214' title='Defined at 2214.'>sock_listen</a>
<li><a href='#L2251' title='Defined at 2251.'>sock_recv_guts</a>
<li><a href='#L2337' title='Defined at 2337.'>sock_recv</a>
<li><a href='#L2386' title='Defined at 2386.'>sock_recv_into</a>
<li><a href='#L2457' title='Defined at 2457.'>sock_recvfrom_guts</a>
<li><a href='#L2515' title='Defined at 2515.'>sock_recvfrom</a>
<li><a href='#L2567' title='Defined at 2567.'>sock_recvfrom_into</a>
<li><a href='#L2620' title='Defined at 2620.'>sock_send</a>
<li><a href='#L2671' title='Defined at 2671.'>sock_sendall</a>
<li><a href='#L2745' title='Defined at 2745.'>sock_sendto</a>
<li><a href='#L2803' title='Defined at 2803.'>sock_shutdown</a>
<li><a href='#L2828' title='Defined at 2828.'>sock_ioctl</a>
<li><a href='#L2942' title='Defined at 2942.'>sock_dealloc</a>
<li><a href='#L2963' title='Defined at 2963.'>sock_repr</a>
<li><a href='#L2987' title='Defined at 2987.'>sock_new</a>
<li><a href='#L3005' title='Defined at 3005.'>sock_initobj</a>
<li><a href='#L3094' title='Defined at 3094.'>socket_gethostname</a>
<li><a href='#L3143' title='Defined at 3143.'>socket_gethostbyname</a>
<li><a href='#L3168' title='Defined at 3168.'>gethost_common</a>
<li><a href='#L3297' title='Defined at 3297.'>socket_gethostbyname_ex</a>
<li><a href='#L3371' title='Defined at 3371.'>socket_gethostbyaddr</a>
<li><a href='#L3469' title='Defined at 3469.'>socket_getservbyname</a>
<li><a href='#L3499' title='Defined at 3499.'>socket_getservbyport</a>
<li><a href='#L3535' title='Defined at 3535.'>socket_getprotobyname</a>
<li><a href='#L3561' title='Defined at 3561.'>socket_dup</a>
<li><a href='#L3596' title='Defined at 3596.'>socket_socketpair</a>
<li><a href='#L3646' title='Defined at 3646.'>socket_ntohs</a>
<li><a href='#L3669' title='Defined at 3669.'>socket_ntohl</a>
<li><a href='#L3705' title='Defined at 3705.'>socket_htons</a>
<li><a href='#L3728' title='Defined at 3728.'>socket_htonl</a>
<li><a href='#L3769' title='Defined at 3769.'>socket_inet_aton</a>
<li><a href='#L3842' title='Defined at 3842.'>socket_inet_ntoa</a>
<li><a href='#L3872' title='Defined at 3872.'>socket_inet_pton</a>
<li><a href='#L3922' title='Defined at 3922.'>socket_inet_ntop</a>
<li><a href='#L3980' title='Defined at 3980.'>socket_getaddrinfo</a>
<li><a href='#L4092' title='Defined at 4092.'>socket_getnameinfo</a>
<li><a href='#L4177' title='Defined at 4177.'>socket_getdefaulttimeout</a>
<li><a href='#L4195' title='Defined at 4195.'>socket_setdefaulttimeout</a>
<li><a href='#L4286' title='Defined at 4286.'>os_cleanup</a>
<li><a href='#L4292' title='Defined at 4292.'>os_init</a>
<li><a href='#L4327' title='Defined at 4327.'>os_init</a>
<li><a href='#L4350' title='Defined at 4350.'>os_init</a>
<li><a href='#L4396' title='Defined at 4396.'>PyInit__socket</a>
<li><a href='#L5346' title='Defined at 5346.'>inet_pton</a>
<li><a href='#L5364' title='Defined at 5364.'>inet_ntop</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* Socket module */</font></i>
<a name='L2'>
<a name='L3'><i><font color='green'>/*</font></i>
<a name='L4'><i><font color='green'></font></i>
<a name='L5'><i><font color='green'>This module provides an interface to Berkeley socket IPC.</font></i>
<a name='L6'><i><font color='green'></font></i>
<a name='L7'><i><font color='green'>Limitations:</font></i>
<a name='L8'><i><font color='green'></font></i>
<a name='L9'><i><font color='green'>- Only AF_INET, AF_INET6 and AF_UNIX address families are supported in a</font></i>
<a name='L10'><i><font color='green'>  portable manner, though AF_PACKET, AF_NETLINK and AF_TIPC are supported</font></i>
<a name='L11'><i><font color='green'>  under Linux.</font></i>
<a name='L12'><i><font color='green'>- No read/write operations (use sendall/recv or makefile instead).</font></i>
<a name='L13'><i><font color='green'>- Additional restrictions apply on some non-Unix platforms (compensated</font></i>
<a name='L14'><i><font color='green'>  for by socket.py).</font></i>
<a name='L15'><i><font color='green'></font></i>
<a name='L16'><i><font color='green'>Module interface:</font></i>
<a name='L17'><i><font color='green'></font></i>
<a name='L18'><i><font color='green'>- socket.error: exception raised for socket specific errors</font></i>
<a name='L19'><i><font color='green'>- socket.gaierror: exception raised for getaddrinfo/getnameinfo errors,</font></i>
<a name='L20'><i><font color='green'>    a subclass of socket.error</font></i>
<a name='L21'><i><font color='green'>- socket.herror: exception raised for gethostby* errors,</font></i>
<a name='L22'><i><font color='green'>    a subclass of socket.error</font></i>
<a name='L23'><i><font color='green'>- socket.gethostbyname(hostname) --&gt; host IP address (string: 'dd.dd.dd.dd')</font></i>
<a name='L24'><i><font color='green'>- socket.gethostbyaddr(IP address) --&gt; (hostname, [alias, ...], [IP addr, ...])</font></i>
<a name='L25'><i><font color='green'>- socket.gethostname() --&gt; host name (string: 'spam' or 'spam.domain.com')</font></i>
<a name='L26'><i><font color='green'>- socket.getprotobyname(protocolname) --&gt; protocol number</font></i>
<a name='L27'><i><font color='green'>- socket.getservbyname(servicename[, protocolname]) --&gt; port number</font></i>
<a name='L28'><i><font color='green'>- socket.getservbyport(portnumber[, protocolname]) --&gt; service name</font></i>
<a name='L29'><i><font color='green'>- socket.socket([family[, type [, proto, fileno]]]) --&gt; new socket object</font></i>
<a name='L30'><i><font color='green'>    (fileno specifies a pre-existing socket file descriptor)</font></i>
<a name='L31'><i><font color='green'>- socket.socketpair([family[, type [, proto]]]) --&gt; (socket, socket)</font></i>
<a name='L32'><i><font color='green'>- socket.ntohs(16 bit value) --&gt; new int object</font></i>
<a name='L33'><i><font color='green'>- socket.ntohl(32 bit value) --&gt; new int object</font></i>
<a name='L34'><i><font color='green'>- socket.htons(16 bit value) --&gt; new int object</font></i>
<a name='L35'><i><font color='green'>- socket.htonl(32 bit value) --&gt; new int object</font></i>
<a name='L36'><i><font color='green'>- socket.getaddrinfo(host, port [, family, socktype, proto, flags])</font></i>
<a name='L37'><i><font color='green'>    --&gt; List of (family, socktype, proto, canonname, sockaddr)</font></i>
<a name='L38'><i><font color='green'>- socket.getnameinfo(sockaddr, flags) --&gt; (host, port)</font></i>
<a name='L39'><i><font color='green'>- socket.AF_INET, socket.SOCK_STREAM, etc.: constants from &lt;socket.h&gt;</font></i>
<a name='L40'><i><font color='green'>- socket.has_ipv6: boolean value indicating if IPv6 is supported</font></i>
<a name='L41'><i><font color='green'>- socket.inet_aton(IP address) -&gt; 32-bit packed IP representation</font></i>
<a name='L42'><i><font color='green'>- socket.inet_ntoa(packed IP) -&gt; IP address string</font></i>
<a name='L43'><i><font color='green'>- socket.getdefaulttimeout() -&gt; None | float</font></i>
<a name='L44'><i><font color='green'>- socket.setdefaulttimeout(None | float)</font></i>
<a name='L45'><i><font color='green'>- an Internet socket address is a pair (hostname, port)</font></i>
<a name='L46'><i><font color='green'>  where hostname can be anything recognized by gethostbyname()</font></i>
<a name='L47'><i><font color='green'>  (including the dd.dd.dd.dd notation) and port is in host byte order</font></i>
<a name='L48'><i><font color='green'>- where a hostname is returned, the dd.dd.dd.dd notation is used</font></i>
<a name='L49'><i><font color='green'>- a UNIX domain socket address is a string specifying the pathname</font></i>
<a name='L50'><i><font color='green'>- an AF_PACKET socket address is a tuple containing a string</font></i>
<a name='L51'><i><font color='green'>  specifying the ethernet interface and an integer specifying</font></i>
<a name='L52'><i><font color='green'>  the Ethernet protocol number to be received. For example:</font></i>
<a name='L53'><i><font color='green'>  ("eth0",0x1234).  Optional 3rd,4th,5th elements in the tuple</font></i>
<a name='L54'><i><font color='green'>  specify packet-type and ha-type/addr.</font></i>
<a name='L55'><i><font color='green'>- an AF_TIPC socket address is expressed as</font></i>
<a name='L56'><i><font color='green'> (addr_type, v1, v2, v3 [, scope]); where addr_type can be one of:</font></i>
<a name='L57'><i><font color='green'>    TIPC_ADDR_NAMESEQ, TIPC_ADDR_NAME, and TIPC_ADDR_ID;</font></i>
<a name='L58'><i><font color='green'>  and scope can be one of:</font></i>
<a name='L59'><i><font color='green'>    TIPC_ZONE_SCOPE, TIPC_CLUSTER_SCOPE, and TIPC_NODE_SCOPE.</font></i>
<a name='L60'><i><font color='green'>  The meaning of v1, v2 and v3 depends on the value of addr_type:</font></i>
<a name='L61'><i><font color='green'>    if addr_type is TIPC_ADDR_NAME:</font></i>
<a name='L62'><i><font color='green'>        v1 is the server type</font></i>
<a name='L63'><i><font color='green'>        v2 is the port identifier</font></i>
<a name='L64'><i><font color='green'>        v3 is ignored</font></i>
<a name='L65'><i><font color='green'>    if addr_type is TIPC_ADDR_NAMESEQ:</font></i>
<a name='L66'><i><font color='green'>        v1 is the server type</font></i>
<a name='L67'><i><font color='green'>        v2 is the lower port number</font></i>
<a name='L68'><i><font color='green'>        v3 is the upper port number</font></i>
<a name='L69'><i><font color='green'>    if addr_type is TIPC_ADDR_ID:</font></i>
<a name='L70'><i><font color='green'>        v1 is the node</font></i>
<a name='L71'><i><font color='green'>        v2 is the ref</font></i>
<a name='L72'><i><font color='green'>        v3 is ignored</font></i>
<a name='L73'><i><font color='green'></font></i>
<a name='L74'><i><font color='green'></font></i>
<a name='L75'><i><font color='green'>Local naming conventions:</font></i>
<a name='L76'><i><font color='green'></font></i>
<a name='L77'><i><font color='green'>- names starting with sock_ are socket object methods</font></i>
<a name='L78'><i><font color='green'>- names starting with socket_ are module-level functions</font></i>
<a name='L79'><i><font color='green'>- names starting with PySocket are exported through socketmodule.h</font></i>
<a name='L80'><i><font color='green'></font></i>
<a name='L81'><i><font color='green'>*/</font></i>
<a name='L82'>
<a name='L83'><font color='darkred'>#ifdef</font> __APPLE__
<a name='L84'>  <i><font color='green'>/*</font></i>
<a name='L85'><i><font color='green'>   * inet_aton is not available on OSX 10.3, yet we want to use a binary</font></i>
<a name='L86'><i><font color='green'>   * that was build on 10.4 or later to work on that release, weak linking</font></i>
<a name='L87'><i><font color='green'>   * comes to the rescue.</font></i>
<a name='L88'><i><font color='green'>   */</font></i>
<a name='L89'><font color='darkred'># pragma</font> weak inet_aton
<a name='L90'><font color='darkred'>#endif</font>
<a name='L91'>
<a name='L92'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L93'><font color='darkred'>#include</font> "<a href='577.html'>structmember.h</a>"
<a name='L94'>
<a name='L95'><font color='darkred'>#undef</font> <a href='../R/1834.html' title='Multiple refered from 13 places.'>MAX</a>
<a name='L96'><font color='darkred'>#define</font> <a href='../R/1834.html' title='Multiple refered from 13 places.'>MAX</a>(x, y) ((x) &lt; (y) ? (y) : (x))
<a name='L97'>
<a name='L98'><i><font color='green'>/* Socket object documentation */</font></i>
<a name='L99'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(sock_doc,
<a name='L100'>"socket([family[, type[, proto]]]) -&gt; socket object\n\
<a name='L101'>\n\
<a name='L102'>Open a socket of the given type.  The family argument specifies the\n\
<a name='L103'>address family; it defaults to AF_INET.  The type argument specifies\n\
<a name='L104'>whether this is a stream (SOCK_STREAM, this is the default)\n\
<a name='L105'>or datagram (SOCK_DGRAM) socket.  The protocol argument defaults to 0,\n\
<a name='L106'>specifying the default protocol.  Keyword arguments are accepted.\n\
<a name='L107'>\n\
<a name='L108'>A socket object represents one endpoint of a network connection.\n\
<a name='L109'>\n\
<a name='L110'>Methods of socket objects (keyword arguments not allowed):\n\
<a name='L111'>\n\
<a name='L112'>_accept() -- accept connection, returning new socket fd and client address\n\
<a name='L113'>bind(addr) -- bind the socket to a local address\n\
<a name='L114'>close() -- close the socket\n\
<a name='L115'>connect(addr) -- connect the socket to a remote address\n\
<a name='L116'>connect_ex(addr) -- connect, return an error code instead of an exception\n\
<a name='L117'>_dup() -- return a new socket fd duplicated from fileno()\n\
<a name='L118'>fileno() -- return underlying file descriptor\n\
<a name='L119'>getpeername() -- return remote address [*]\n\
<a name='L120'>getsockname() -- return local address\n\
<a name='L121'>getsockopt(level, optname[, buflen]) -- get socket options\n\
<a name='L122'>gettimeout() -- return timeout or None\n\
<a name='L123'>listen(n) -- start listening for incoming connections\n\
<a name='L124'>recv(buflen[, flags]) -- receive data\n\
<a name='L125'>recv_into(buffer[, nbytes[, flags]]) -- receive data (into a buffer)\n\
<a name='L126'>recvfrom(buflen[, flags]) -- receive data and sender\'s address\n\
<a name='L127'>recvfrom_into(buffer[, nbytes, [, flags])\n\
<a name='L128'>  -- receive data and sender\'s address (into a buffer)\n\
<a name='L129'>sendall(data[, flags]) -- send all data\n\
<a name='L130'>send(data[, flags]) -- send data, may not send all of it\n\
<a name='L131'>sendto(data[, flags], addr) -- send data to a given address\n\
<a name='L132'>setblocking(0 | 1) -- set or clear the blocking I/O flag\n\
<a name='L133'>setsockopt(level, optname, value) -- set socket options\n\
<a name='L134'>settimeout(None | float) -- set or clear the timeout\n\
<a name='L135'>shutdown(how) -- shut down traffic in one or both directions\n\
<a name='L136'>\n\
<a name='L137'> [*] not available on all platforms!");
<a name='L138'>
<a name='L139'><i><font color='green'>/* XXX This is a terrible mess of platform-dependent preprocessor hacks.</font></i>
<a name='L140'><i><font color='green'>   I hope some day someone can clean this up please... */</font></i>
<a name='L141'>
<a name='L142'><i><font color='green'>/* Hacks for gethostbyname_r().  On some non-Linux platforms, the configure</font></i>
<a name='L143'><i><font color='green'>   script doesn't get this right, so we hardcode some platform checks below.</font></i>
<a name='L144'><i><font color='green'>   On the other hand, not all Linux versions agree, so there the settings</font></i>
<a name='L145'><i><font color='green'>   computed by the configure script are needed! */</font></i>
<a name='L146'>
<a name='L147'><font color='darkred'>#ifndef</font> linux
<a name='L148'><font color='darkred'># undef</font> <a href='../R/1351.html' title='Multiple refered from 4 places.'>HAVE_GETHOSTBYNAME_R_3_ARG</a>
<a name='L149'><font color='darkred'># undef</font> <a href='../R/1352.html' title='Multiple refered from 2 places.'>HAVE_GETHOSTBYNAME_R_5_ARG</a>
<a name='L150'><font color='darkred'># undef</font> <a href='../R/1353.html' title='Multiple refered from 4 places.'>HAVE_GETHOSTBYNAME_R_6_ARG</a>
<a name='L151'><font color='darkred'>#endif</font>
<a name='L152'>
<a name='L153'><font color='darkred'>#ifndef</font> <a href='../D/5537.html' title='Multiple defined in 3 places.'>WITH_THREAD</a>
<a name='L154'><font color='darkred'># undef</font> <a href='../R/1350.html' title='Multiple refered from 6 places.'>HAVE_GETHOSTBYNAME_R</a>
<a name='L155'><font color='darkred'>#endif</font>
<a name='L156'>
<a name='L157'><font color='darkred'>#ifdef</font> <a href='../D/1499.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R</a>
<a name='L158'><font color='darkred'># if</font> <b>defined</b>(_AIX) || <b>defined</b>(__osf__)
<a name='L159'><font color='darkred'>#  define</font> <a href='../R/1351.html' title='Multiple refered from 4 places.'>HAVE_GETHOSTBYNAME_R_3_ARG</a>
<a name='L160'><font color='darkred'># elif</font> <b>defined</b>(__sun) || <b>defined</b>(__sgi)
<a name='L161'><font color='darkred'>#  define</font> <a href='../R/1352.html' title='Multiple refered from 2 places.'>HAVE_GETHOSTBYNAME_R_5_ARG</a>
<a name='L162'><font color='darkred'># elif</font> <b>defined</b>(linux)
<a name='L163'><i><font color='green'>/* Rely on the configure script */</font></i>
<a name='L164'><font color='darkred'># else</font>
<a name='L165'><font color='darkred'>#  undef</font> <a href='../R/1350.html' title='Multiple refered from 6 places.'>HAVE_GETHOSTBYNAME_R</a>
<a name='L166'><font color='darkred'># endif</font>
<a name='L167'><font color='darkred'>#endif</font>
<a name='L168'>
<a name='L169'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../D/1499.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R</a>) &amp;&amp; <b>defined</b>(<a href='../D/5537.html' title='Multiple defined in 3 places.'>WITH_THREAD</a>) &amp;&amp; \
<a name='L170'>    !<b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>)
<a name='L171'><font color='darkred'># define</font> <a href='../R/4770.html' title='Multiple refered from 7 places.'>USE_GETHOSTBYNAME_LOCK</a>
<a name='L172'><font color='darkred'>#endif</font>
<a name='L173'>
<a name='L174'><i><font color='green'>/* To use __FreeBSD_version */</font></i>
<a name='L175'><font color='darkred'>#ifdef</font> <a href='../S/2894.html#L294' title='Defined at 294 in PC/os2emx/pyconfig.h.'>HAVE_SYS_PARAM_H</a>
<a name='L176'><font color='darkred'>#include</font> &lt;sys/param.h&gt;
<a name='L177'><font color='darkred'>#endif</font>
<a name='L178'><i><font color='green'>/* On systems on which getaddrinfo() is believed to not be thread-safe,</font></i>
<a name='L179'><i><font color='green'>   (this includes the getaddrinfo emulation) protect access with a lock. */</font></i>
<a name='L180'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/5537.html' title='Multiple defined in 3 places.'>WITH_THREAD</a>) &amp;&amp; (<b>defined</b>(__APPLE__) || \
<a name='L181'>    (<b>defined</b>(__FreeBSD__) &amp;&amp; __FreeBSD_version+0 &lt; 503000) || \
<a name='L182'>    <b>defined</b>(__OpenBSD__) || <b>defined</b>(__NetBSD__) || \
<a name='L183'>    <b>defined</b>(__VMS) || !<b>defined</b>(<a href='../D/1494.html' title='Multiple defined in 3 places.'>HAVE_GETADDRINFO</a>))
<a name='L184'><font color='darkred'>#define</font> <a href='../R/4769.html' title='Multiple refered from 4 places.'>USE_GETADDRINFO_LOCK</a>
<a name='L185'><font color='darkred'>#endif</font>
<a name='L186'>
<a name='L187'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L184' title='Defined at 184 in Modules/socketmodule.c.'>USE_GETADDRINFO_LOCK</a>
<a name='L188'><font color='darkred'>#define</font> <a href='../R/10.html' title='Multiple refered from 4 places.'>ACQUIRE_GETADDRINFO_LOCK</a> <a href='../D/3846.html' title='Multiple defined in 10 places.'>PyThread_acquire_lock</a>(netdb_lock, 1);
<a name='L189'><font color='darkred'>#define</font> <a href='../R/3935.html' title='Multiple refered from 4 places.'>RELEASE_GETADDRINFO_LOCK</a> <a href='../D/3858.html' title='Multiple defined in 11 places.'>PyThread_release_lock</a>(netdb_lock);
<a name='L190'><font color='darkred'>#else</font>
<a name='L191'><font color='darkred'>#define</font> <a href='../R/10.html' title='Multiple refered from 4 places.'>ACQUIRE_GETADDRINFO_LOCK</a>
<a name='L192'><font color='darkred'>#define</font> <a href='../R/3935.html' title='Multiple refered from 4 places.'>RELEASE_GETADDRINFO_LOCK</a>
<a name='L193'><font color='darkred'>#endif</font>
<a name='L194'>
<a name='L195'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2711.html#L171' title='Defined at 171 in Modules/socketmodule.c.'>USE_GETHOSTBYNAME_LOCK</a>) || <b>defined</b>(<a href='../S/2711.html#L184' title='Defined at 184 in Modules/socketmodule.c.'>USE_GETADDRINFO_LOCK</a>)
<a name='L196'><font color='darkred'># include</font> "<a href='572.html'>pythread.h</a>"
<a name='L197'><font color='darkred'>#endif</font>
<a name='L198'>
<a name='L199'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2903.html#L66' title='Defined at 66 in PC/os2vacpp/pyconfig.h.'>PYCC_VACPP</a>)
<a name='L200'><font color='darkred'># include</font> &lt;types.h&gt;
<a name='L201'><font color='darkred'># include</font> &lt;io.h&gt;
<a name='L202'><font color='darkred'># include</font> &lt;sys/ioctl.h&gt;
<a name='L203'><font color='darkred'># include</font> &lt;utils.h&gt;
<a name='L204'><font color='darkred'># include</font> &lt;<a href='2809.html'>ctype.h</a>&gt;
<a name='L205'><font color='darkred'>#endif</font>
<a name='L206'>
<a name='L207'><font color='darkred'>#if</font> <b>defined</b>(__VMS)
<a name='L208'><font color='darkred'>#  include</font> &lt;ioctl.h&gt;
<a name='L209'><font color='darkred'>#endif</font>
<a name='L210'>
<a name='L211'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>)
<a name='L212'><font color='darkred'># define</font>  INCL_DOS
<a name='L213'><font color='darkred'># define</font>  INCL_DOSERRORS
<a name='L214'><font color='darkred'># define</font>  INCL_NOPMAPI
<a name='L215'><font color='darkred'># include</font> &lt;os2.h&gt;
<a name='L216'><font color='darkred'>#endif</font>
<a name='L217'>
<a name='L218'><font color='darkred'>#if</font> <b>defined</b>(__sgi) &amp;&amp; _COMPILER_VERSION&gt;700 &amp;&amp; !<a href='../D/6380.html' title='Multiple defined in 2 places.'>_SGIAPI</a>
<a name='L219'><i><font color='green'>/* make sure that the reentrant (gethostbyaddr_r etc)</font></i>
<a name='L220'><i><font color='green'>   functions are declared correctly if compiling with</font></i>
<a name='L221'><i><font color='green'>   MIPSPro 7.x in ANSI C mode (default) */</font></i>
<a name='L222'>
<a name='L223'><i><font color='green'>/* XXX Using _SGIAPI is the wrong thing,</font></i>
<a name='L224'><i><font color='green'>   but I don't know what the right thing is. */</font></i>
<a name='L225'><font color='darkred'>#undef</font> <a href='../S/2711.html#L218' title='Refered from 218 in Modules/socketmodule.c.'>_SGIAPI</a> <i><font color='green'>/* to avoid warning */</font></i>
<a name='L226'><font color='darkred'>#define</font> <a href='../S/2711.html#L218' title='Refered from 218 in Modules/socketmodule.c.'>_SGIAPI</a> 1
<a name='L227'>
<a name='L228'><font color='darkred'>#undef</font> _XOPEN_SOURCE
<a name='L229'><font color='darkred'>#include</font> &lt;sys/socket.h&gt;
<a name='L230'><font color='darkred'>#include</font> &lt;sys/types.h&gt;
<a name='L231'><font color='darkred'>#include</font> &lt;netinet/in.h&gt;
<a name='L232'><font color='darkred'>#ifdef</font> <a href='../D/6382.html' title='Multiple defined in 2 places.'>_SS_ALIGNSIZE</a>
<a name='L233'><font color='darkred'>#define</font> <a href='../R/1345.html' title='Multiple refered from 3 places.'>HAVE_GETADDRINFO</a> 1
<a name='L234'><font color='darkred'>#define</font> <a href='../R/1355.html' title='Multiple refered from 3 places.'>HAVE_GETNAMEINFO</a> 1
<a name='L235'><font color='darkred'>#endif</font>
<a name='L236'>
<a name='L237'><font color='darkred'>#define</font> <a href='../R/1365.html' title='Multiple refered from 4 places.'>HAVE_INET_PTON</a>
<a name='L238'><font color='darkred'>#include</font> &lt;netdb.h&gt;
<a name='L239'><font color='darkred'>#endif</font>
<a name='L240'>
<a name='L241'><i><font color='green'>/* Irix 6.5 fails to define this variable at all. This is needed</font></i>
<a name='L242'><i><font color='green'>   for both GCC and SGI's compiler. I'd say that the SGI headers</font></i>
<a name='L243'><i><font color='green'>   are just busted. Same thing for Solaris. */</font></i>
<a name='L244'><font color='darkred'>#if</font> (<b>defined</b>(__sgi) || <b>defined</b>(sun)) &amp;&amp; !<b>defined</b>(<a href='../S/2711.html#L245' title='Defined at 245 in Modules/socketmodule.c.'>INET_ADDRSTRLEN</a>)
<a name='L245'><font color='darkred'>#define</font> <a href='../R/1512.html' title='Multiple refered from 3 places.'>INET_ADDRSTRLEN</a> 16
<a name='L246'><font color='darkred'>#endif</font>
<a name='L247'>
<a name='L248'><i><font color='green'>/* Generic includes */</font></i>
<a name='L249'><font color='darkred'>#ifdef</font> <a href='../D/1582.html' title='Multiple defined in 4 places.'>HAVE_SYS_TYPES_H</a>
<a name='L250'><font color='darkred'>#include</font> &lt;sys/types.h&gt;
<a name='L251'><font color='darkred'>#endif</font>
<a name='L252'>
<a name='L253'><i><font color='green'>/* Generic socket object definitions and includes */</font></i>
<a name='L254'><font color='darkred'>#define</font> PySocket_BUILDING_SOCKET
<a name='L255'><font color='darkred'>#include</font> "<a href='2712.html'>socketmodule.h</a>"
<a name='L256'>
<a name='L257'><i><font color='green'>/* Addressing includes */</font></i>
<a name='L258'>
<a name='L259'><font color='darkred'>#ifndef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L260'>
<a name='L261'><i><font color='green'>/* Non-MS WINDOWS includes */</font></i>
<a name='L262'><font color='darkred'># include</font> &lt;netdb.h&gt;
<a name='L263'>
<a name='L264'><i><font color='green'>/* Headers needed for inet_ntoa() and inet_addr() */</font></i>
<a name='L265'><font color='darkred'># if</font> <b>defined</b>(<a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>) &amp;&amp; <b>defined</b>(<a href='../S/2903.html#L66' title='Defined at 66 in PC/os2vacpp/pyconfig.h.'>PYCC_VACPP</a>)
<a name='L266'><font color='darkred'>#  include</font> &lt;netdb.h&gt;
<a name='L267'><b>typedef</b> <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> <a href='../R/10429.html' title='Multiple refered from 11 places.'>socklen_t</a>;
<a name='L268'><font color='darkred'># else</font>
<a name='L269'><font color='darkred'>#   include</font> &lt;arpa/inet.h&gt;
<a name='L270'><font color='darkred'># endif</font>
<a name='L271'>
<a name='L272'><font color='darkred'>#  include</font> &lt;fcntl.h&gt;
<a name='L273'>
<a name='L274'><font color='darkred'>#else</font>
<a name='L275'>
<a name='L276'><i><font color='green'>/* MS_WINDOWS includes */</font></i>
<a name='L277'><font color='darkred'># ifdef</font> <a href='../D/1484.html' title='Multiple defined in 4 places.'>HAVE_FCNTL_H</a>
<a name='L278'><font color='darkred'>#  include</font> &lt;fcntl.h&gt;
<a name='L279'><font color='darkred'># endif</font>
<a name='L280'>
<a name='L281'><font color='darkred'>#endif</font>
<a name='L282'>
<a name='L283'><font color='darkred'>#include</font> &lt;stddef.h&gt;
<a name='L284'>
<a name='L285'><font color='darkred'>#ifndef</font> <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>
<a name='L286'><font color='darkred'># define</font> <a href='../R/9362.html' title='Multiple refered from 235 places.'>offsetof</a>(type, member) ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)(&amp;((type *)0)-&gt;member))
<a name='L287'><font color='darkred'>#endif</font>
<a name='L288'>
<a name='L289'><font color='darkred'>#ifndef</font> <a href='../S/2711.html#L290' title='Defined at 290 in Modules/socketmodule.c.'>O_NONBLOCK</a>
<a name='L290'><font color='darkred'># define</font> <a href='../R/2208.html' title='Multiple refered from 6 places.'>O_NONBLOCK</a> O_NDELAY
<a name='L291'><font color='darkred'>#endif</font>
<a name='L292'>
<a name='L293'><i><font color='green'>/* include Python's addrinfo.h unless it causes trouble */</font></i>
<a name='L294'><font color='darkred'>#if</font> <b>defined</b>(__sgi) &amp;&amp; _COMPILER_VERSION&gt;700 &amp;&amp; <b>defined</b>(<a href='../D/6382.html' title='Multiple defined in 2 places.'>_SS_ALIGNSIZE</a>)
<a name='L295'>  <i><font color='green'>/* Do not include addinfo.h on some newer IRIX versions.</font></i>
<a name='L296'><i><font color='green'>   * _SS_ALIGNSIZE is defined in sys/socket.h by 6.5.21,</font></i>
<a name='L297'><i><font color='green'>   * for example, but not by 6.5.10.</font></i>
<a name='L298'><i><font color='green'>   */</font></i>
<a name='L299'><font color='darkred'>#elif</font> <b>defined</b>(_MSC_VER) &amp;&amp; _MSC_VER&gt;1201
<a name='L300'>  <i><font color='green'>/* Do not include addrinfo.h for MSVC7 or greater. 'addrinfo' and</font></i>
<a name='L301'><i><font color='green'>   * EAI_* constants are defined in (the already included) ws2tcpip.h.</font></i>
<a name='L302'><i><font color='green'>   */</font></i>
<a name='L303'><font color='darkred'>#else</font>
<a name='L304'><font color='darkred'>#  include</font> "<a href='2620.html'>addrinfo.h</a>"
<a name='L305'><font color='darkred'>#endif</font>
<a name='L306'>
<a name='L307'><font color='darkred'>#ifndef</font> <a href='../S/2711.html#L237' title='Defined at 237 in Modules/socketmodule.c.'>HAVE_INET_PTON</a>
<a name='L308'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../S/2906.html#L178' title='Defined at 178 in PC/pyconfig.h.'>NTDDI_VERSION</a>) || (<a href='../S/2906.html#L178' title='Defined at 178 in PC/pyconfig.h.'>NTDDI_VERSION</a> &lt; NTDDI_LONGHORN)
<a name='L309'><b>int</b> <a href='../S/2711.html#L5346' title='Defined at 5346 in Modules/socketmodule.c.'>inet_pton</a>(<b>int</b> af, <b>const</b> <b>char</b> *src, <b>void</b> *dst);
<a name='L310'><b>const</b> <b>char</b> *<a href='../S/2711.html#L5364' title='Defined at 5364 in Modules/socketmodule.c.'>inet_ntop</a>(<b>int</b> af, <b>const</b> <b>void</b> *src, <b>char</b> *dst, <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> size);
<a name='L311'><font color='darkred'>#endif</font>
<a name='L312'><font color='darkred'>#endif</font>
<a name='L313'>
<a name='L314'><font color='darkred'>#ifdef</font> __APPLE__
<a name='L315'><i><font color='green'>/* On OS X, getaddrinfo returns no error indication of lookup</font></i>
<a name='L316'><i><font color='green'>   failure, so we must use the emulation instead of the libinfo</font></i>
<a name='L317'><i><font color='green'>   implementation. Unfortunately, performing an autoconf test</font></i>
<a name='L318'><i><font color='green'>   for this bug would require DNS access for the machine performing</font></i>
<a name='L319'><i><font color='green'>   the configuration, which is not acceptable. Therefore, we</font></i>
<a name='L320'><i><font color='green'>   determine the bug just by checking for __APPLE__. If this bug</font></i>
<a name='L321'><i><font color='green'>   gets ever fixed, perhaps checking for sys/version.h would be</font></i>
<a name='L322'><i><font color='green'>   appropriate, which is 10/0 on the system with the bug. */</font></i>
<a name='L323'><font color='darkred'>#ifndef</font> <a href='../D/1504.html' title='Multiple defined in 2 places.'>HAVE_GETNAMEINFO</a>
<a name='L324'><i><font color='green'>/* This bug seems to be fixed in Jaguar. Ths easiest way I could</font></i>
<a name='L325'><i><font color='green'>   Find to check for Jaguar is that it has getnameinfo(), which</font></i>
<a name='L326'><i><font color='green'>   older releases don't have */</font></i>
<a name='L327'><font color='darkred'>#undef</font> <a href='../R/1345.html' title='Multiple refered from 3 places.'>HAVE_GETADDRINFO</a>
<a name='L328'><font color='darkred'>#endif</font>
<a name='L329'>
<a name='L330'><font color='darkred'>#ifdef</font> HAVE_INET_ATON
<a name='L331'><font color='darkred'>#define</font> <a href='../R/4771.html' title='Multiple refered from 5 places.'>USE_INET_ATON_WEAKLINK</a>
<a name='L332'><font color='darkred'>#endif</font>
<a name='L333'>
<a name='L334'><font color='darkred'>#endif</font>
<a name='L335'>
<a name='L336'><i><font color='green'>/* I know this is a bad practice, but it is the easiest... */</font></i>
<a name='L337'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../D/1494.html' title='Multiple defined in 3 places.'>HAVE_GETADDRINFO</a>)
<a name='L338'><i><font color='green'>/* avoid clashes with the C library definition of the symbol. */</font></i>
<a name='L339'><font color='darkred'>#define</font> <a href='../R/8109.html' title='Multiple refered from 5 places.'>getaddrinfo</a> fake_getaddrinfo
<a name='L340'><font color='darkred'>#define</font> <a href='../S/2711.html#L576' title='Refered from 576 in Modules/socketmodule.c.'>gai_strerror</a> fake_gai_strerror
<a name='L341'><font color='darkred'>#define</font> <a href='../R/7930.html' title='Multiple refered from 10 places.'>freeaddrinfo</a> fake_freeaddrinfo
<a name='L342'><font color='darkred'>#include</font> "getaddrinfo.c"
<a name='L343'><font color='darkred'>#endif</font>
<a name='L344'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../D/1504.html' title='Multiple defined in 2 places.'>HAVE_GETNAMEINFO</a>)
<a name='L345'><font color='darkred'>#define</font> <a href='../R/8157.html' title='Multiple refered from 3 places.'>getnameinfo</a> fake_getnameinfo
<a name='L346'><font color='darkred'>#include</font> "getnameinfo.c"
<a name='L347'><font color='darkred'>#endif</font>
<a name='L348'>
<a name='L349'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L350'><i><font color='green'>/* On Windows a socket is really a handle not an fd */</font></i>
<a name='L351'><b>static</b> <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a>
<a name='L352'><a href='../S/2711.html#L3571' title='Refered from 3571 in Modules/socketmodule.c.'>dup_socket</a>(<a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> handle)
<a name='L353'><font color='red'>{</font>
<a name='L354'>    WSAPROTOCOL_INFO info;
<a name='L355'>
<a name='L356'>    <b>if</b> (WSADuplicateSocket(handle, GetCurrentProcessId(), &amp;info))
<a name='L357'>        <b>return</b> <a href='../S/2711.html#L433' title='Defined at 433 in Modules/socketmodule.c.'>INVALID_SOCKET</a>;
<a name='L358'>
<a name='L359'>    <b>return</b> WSASocket(FROM_PROTOCOL_INFO, FROM_PROTOCOL_INFO,
<a name='L360'>                     FROM_PROTOCOL_INFO, &amp;info, 0, 0);
<a name='L361'><font color='red'>}</font>
<a name='L362'><font color='darkred'>#define</font> <a href='../R/4202.html' title='Multiple refered from 7 places.'>SOCKETCLOSE</a> closesocket
<a name='L363'><font color='darkred'>#else</font>
<a name='L364'><i><font color='green'>/* On Unix we can use dup to duplicate the file descriptor of a socket*/</font></i>
<a name='L365'><font color='darkred'>#define</font> <a href='../S/2711.html#L3571' title='Refered from 3571 in Modules/socketmodule.c.'>dup_socket</a>(fd) dup(fd)
<a name='L366'><font color='darkred'>#endif</font>
<a name='L367'>
<a name='L368'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L80' title='Defined at 80 in PC/pyconfig.h.'>MS_WIN32</a>
<a name='L369'><font color='darkred'>#define</font> <a href='../R/811.html' title='Multiple refered from 3 places.'>EAFNOSUPPORT</a> WSAEAFNOSUPPORT
<a name='L370'><font color='darkred'>#define</font> <a href='../R/10370.html' title='Multiple refered from 8 places.'>snprintf</a> _snprintf
<a name='L371'><font color='darkred'>#endif</font>
<a name='L372'>
<a name='L373'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>) &amp;&amp; !<b>defined</b>(<a href='../S/2894.html#L13' title='Defined at 13 in PC/os2emx/pyconfig.h.'>PYCC_GCC</a>)
<a name='L374'><font color='darkred'>#define</font> <a href='../R/4202.html' title='Multiple refered from 7 places.'>SOCKETCLOSE</a> soclose
<a name='L375'><font color='darkred'>#define</font> <a href='../R/2110.html' title='Multiple refered from 2 places.'>NO_DUP</a> <i><font color='green'>/* Sockets are Not Actual File Handles under OS/2 */</font></i>
<a name='L376'><font color='darkred'>#endif</font>
<a name='L377'>
<a name='L378'><font color='darkred'>#ifndef</font> <a href='../D/4772.html' title='Multiple defined in 3 places.'>SOCKETCLOSE</a>
<a name='L379'><font color='darkred'>#define</font> <a href='../R/4202.html' title='Multiple refered from 7 places.'>SOCKETCLOSE</a> close
<a name='L380'><font color='darkred'>#endif</font>
<a name='L381'>
<a name='L382'><font color='darkred'>#if</font> (<b>defined</b>(HAVE_BLUETOOTH_H) || <b>defined</b>(HAVE_BLUETOOTH_BLUETOOTH_H)) &amp;&amp; !<b>defined</b>(__NetBSD__) &amp;&amp; !<b>defined</b>(__DragonFly__)
<a name='L383'><font color='darkred'>#define</font> <a href='../R/4759.html' title='Multiple refered from 5 places.'>USE_BLUETOOTH</a> 1
<a name='L384'><font color='darkred'>#if</font> <b>defined</b>(__FreeBSD__)
<a name='L385'><font color='darkred'>#define</font> <a href='../R/287.html' title='Multiple refered from 4 places.'>BTPROTO_L2CAP</a> BLUETOOTH_PROTO_L2CAP
<a name='L386'><font color='darkred'>#define</font> <a href='../R/288.html' title='Multiple refered from 4 places.'>BTPROTO_RFCOMM</a> BLUETOOTH_PROTO_RFCOMM
<a name='L387'><font color='darkred'>#define</font> <a href='../R/286.html' title='Multiple refered from 5 places.'>BTPROTO_HCI</a> BLUETOOTH_PROTO_HCI
<a name='L388'><font color='darkred'>#define</font> <a href='../S/2711.html#L4598' title='Refered from 4598 in Modules/socketmodule.c.'>SOL_HCI</a> SOL_HCI_RAW
<a name='L389'><font color='darkred'>#define</font> <a href='../S/2711.html#L4600' title='Refered from 4600 in Modules/socketmodule.c.'>HCI_FILTER</a> SO_HCI_RAW_FILTER
<a name='L390'><font color='darkred'>#define</font> <a href='../R/10403.html' title='Multiple refered from 6 places.'>sockaddr_l2</a> sockaddr_l2cap
<a name='L391'><font color='darkred'>#define</font> <a href='../R/10404.html' title='Multiple refered from 5 places.'>sockaddr_rc</a> sockaddr_rfcomm
<a name='L392'><font color='darkred'>#define</font> hci_dev hci_node
<a name='L393'><font color='darkred'>#define</font> <a href='../R/5308.html' title='Multiple refered from 5 places.'>_BT_L2_MEMB</a>(sa, memb) ((sa)-&gt;l2cap_##memb)
<a name='L394'><font color='darkred'>#define</font> <a href='../R/5309.html' title='Multiple refered from 5 places.'>_BT_RC_MEMB</a>(sa, memb) ((sa)-&gt;rfcomm_##memb)
<a name='L395'><font color='darkred'>#define</font> <a href='../R/5307.html' title='Multiple refered from 6 places.'>_BT_HCI_MEMB</a>(sa, memb) ((sa)-&gt;hci_##memb)
<a name='L396'><font color='darkred'>#elif</font> <b>defined</b>(__NetBSD__) || <b>defined</b>(__DragonFly__)
<a name='L397'><font color='darkred'>#define</font> <a href='../R/10403.html' title='Multiple refered from 6 places.'>sockaddr_l2</a> sockaddr_bt
<a name='L398'><font color='darkred'>#define</font> <a href='../R/10404.html' title='Multiple refered from 5 places.'>sockaddr_rc</a> sockaddr_bt
<a name='L399'><font color='darkred'>#define</font> <a href='../R/10402.html' title='Multiple refered from 4 places.'>sockaddr_hci</a> sockaddr_bt
<a name='L400'><font color='darkred'>#define</font> <a href='../R/10405.html' title='Multiple refered from 5 places.'>sockaddr_sco</a> sockaddr_bt
<a name='L401'><font color='darkred'>#define</font> <a href='../S/2711.html#L4598' title='Refered from 4598 in Modules/socketmodule.c.'>SOL_HCI</a> <a href='../S/2711.html#L387' title='Defined at 387 in Modules/socketmodule.c.'>BTPROTO_HCI</a>
<a name='L402'><font color='darkred'>#define</font> <a href='../S/2711.html#L4606' title='Refered from 4606 in Modules/socketmodule.c.'>HCI_DATA_DIR</a> SO_HCI_DIRECTION
<a name='L403'><font color='darkred'>#define</font> <a href='../R/5308.html' title='Multiple refered from 5 places.'>_BT_L2_MEMB</a>(sa, memb) ((sa)-&gt;bt_##memb)
<a name='L404'><font color='darkred'>#define</font> <a href='../R/5309.html' title='Multiple refered from 5 places.'>_BT_RC_MEMB</a>(sa, memb) ((sa)-&gt;bt_##memb)
<a name='L405'><font color='darkred'>#define</font> <a href='../R/5307.html' title='Multiple refered from 6 places.'>_BT_HCI_MEMB</a>(sa, memb) ((sa)-&gt;bt_##memb)
<a name='L406'><font color='darkred'>#define</font> <a href='../R/5310.html' title='Multiple refered from 3 places.'>_BT_SCO_MEMB</a>(sa, memb) ((sa)-&gt;bt_##memb)
<a name='L407'><font color='darkred'>#else</font>
<a name='L408'><font color='darkred'>#define</font> <a href='../R/5308.html' title='Multiple refered from 5 places.'>_BT_L2_MEMB</a>(sa, memb) ((sa)-&gt;l2_##memb)
<a name='L409'><font color='darkred'>#define</font> <a href='../R/5309.html' title='Multiple refered from 5 places.'>_BT_RC_MEMB</a>(sa, memb) ((sa)-&gt;rc_##memb)
<a name='L410'><font color='darkred'>#define</font> <a href='../R/5307.html' title='Multiple refered from 6 places.'>_BT_HCI_MEMB</a>(sa, memb) ((sa)-&gt;hci_##memb)
<a name='L411'><font color='darkred'>#define</font> <a href='../R/5310.html' title='Multiple refered from 3 places.'>_BT_SCO_MEMB</a>(sa, memb) ((sa)-&gt;sco_##memb)
<a name='L412'><font color='darkred'>#endif</font>
<a name='L413'><font color='darkred'>#endif</font>
<a name='L414'>
<a name='L415'><font color='darkred'>#ifdef</font> __VMS
<a name='L416'><i><font color='green'>/* TCP/IP Services for VMS uses a maximum send/recv buffer length */</font></i>
<a name='L417'><font color='darkred'>#define</font> <a href='../R/4040.html' title='Multiple refered from 3 places.'>SEGMENT_SIZE</a> (32 * 1024 -1)
<a name='L418'><font color='darkred'>#endif</font>
<a name='L419'>
<a name='L420'><font color='darkred'>#define</font> <a href='../R/4022.html' title='Multiple refered from 19 places.'>SAS2SA</a>(x)       ((<b>struct</b> sockaddr *)(x))
<a name='L421'>
<a name='L422'><i><font color='green'>/*</font></i>
<a name='L423'><i><font color='green'> * Constants for getnameinfo()</font></i>
<a name='L424'><i><font color='green'> */</font></i>
<a name='L425'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../D/2307.html' title='Multiple defined in 2 places.'>NI_MAXHOST</a>)
<a name='L426'><font color='darkred'>#define</font> <a href='../R/2089.html' title='Multiple refered from 6 places.'>NI_MAXHOST</a> 1025
<a name='L427'><font color='darkred'>#endif</font>
<a name='L428'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../D/2308.html' title='Multiple defined in 2 places.'>NI_MAXSERV</a>)
<a name='L429'><font color='darkred'>#define</font> <a href='../R/2090.html' title='Multiple refered from 4 places.'>NI_MAXSERV</a> 32
<a name='L430'><font color='darkred'>#endif</font>
<a name='L431'>
<a name='L432'><font color='darkred'>#ifndef</font> <a href='../S/2711.html#L433' title='Defined at 433 in Modules/socketmodule.c.'>INVALID_SOCKET</a> <i><font color='green'>/* MS defines this */</font></i>
<a name='L433'><font color='darkred'>#define</font> <a href='../R/1564.html' title='Multiple refered from 8 places.'>INVALID_SOCKET</a> (-1)
<a name='L434'><font color='darkred'>#endif</font>
<a name='L435'>
<a name='L436'><i><font color='green'>/* XXX There's a problem here: *static* functions are not supposed to have</font></i>
<a name='L437'><i><font color='green'>   a Py prefix (or use CapitalizedWords).  Later... */</font></i>
<a name='L438'>
<a name='L439'><i><font color='green'>/* Global variable holding the exception type for errors detected</font></i>
<a name='L440'><i><font color='green'>   by this module (but not argument type or memory errors, etc.). */</font></i>
<a name='L441'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *socket_error;
<a name='L442'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *socket_herror;
<a name='L443'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *socket_gaierror;
<a name='L444'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *socket_timeout;
<a name='L445'>
<a name='L446'><i><font color='green'>/* A forward reference to the socket type object.</font></i>
<a name='L447'><i><font color='green'>   The sock_type variable contains pointers to various functions,</font></i>
<a name='L448'><i><font color='green'>   some of which call new_sockobject(), which uses sock_type, so</font></i>
<a name='L449'><i><font color='green'>   there has to be a circular reference. */</font></i>
<a name='L450'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> sock_type;
<a name='L451'>
<a name='L452'><font color='darkred'>#if</font> <b>defined</b>(HAVE_POLL_H)
<a name='L453'><font color='darkred'>#include</font> &lt;poll.h&gt;
<a name='L454'><font color='darkred'>#elif</font> <b>defined</b>(HAVE_SYS_POLL_H)
<a name='L455'><font color='darkred'>#include</font> &lt;sys/poll.h&gt;
<a name='L456'><font color='darkred'>#endif</font>
<a name='L457'>
<a name='L458'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L758' title='Defined at 758 in PC/pyconfig.h.'>Py_SOCKET_FD_CAN_BE_GE_FD_SETSIZE</a>
<a name='L459'><i><font color='green'>/* Platform can select file descriptors beyond FD_SETSIZE */</font></i>
<a name='L460'><font color='darkred'>#define</font> <a href='../R/1604.html' title='Multiple refered from 8 places.'>IS_SELECTABLE</a>(s) 1
<a name='L461'><font color='darkred'>#elif</font> <b>defined</b>(HAVE_POLL)
<a name='L462'><i><font color='green'>/* Instead of select(), we'll use poll() since poll() works on any fd. */</font></i>
<a name='L463'><font color='darkred'>#define</font> <a href='../R/1604.html' title='Multiple refered from 8 places.'>IS_SELECTABLE</a>(s) 1
<a name='L464'><i><font color='green'>/* Can we call select() with this socket without a buffer overrun? */</font></i>
<a name='L465'><font color='darkred'>#else</font>
<a name='L466'><i><font color='green'>/* POSIX says selecting file descriptors beyond FD_SETSIZE</font></i>
<a name='L467'><i><font color='green'>   has undefined behaviour.  If there's no timeout left, we don't have to</font></i>
<a name='L468'><i><font color='green'>   call select, so it's a safe, little white lie. */</font></i>
<a name='L469'><font color='darkred'>#define</font> <a href='../R/1604.html' title='Multiple refered from 8 places.'>IS_SELECTABLE</a>(s) ((s)-&gt;sock_fd &lt; <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> || s-&gt;sock_timeout &lt;= 0.0)
<a name='L470'><font color='darkred'>#endif</font>
<a name='L471'>
<a name='L472'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L473'><a href='../R/10138.html' title='Multiple refered from 6 places.'>select_error</a>(<b>void</b>)
<a name='L474'><font color='red'>{</font>
<a name='L475'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "unable to select on socket");
<a name='L476'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L477'><font color='red'>}</font>
<a name='L478'>
<a name='L479'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L480'><font color='darkred'>#ifndef</font> <a href='../S/2711.html#L481' title='Defined at 481 in Modules/socketmodule.c.'>WSAEAGAIN</a>
<a name='L481'><font color='darkred'>#define</font> <a href='../S/2711.html#L480' title='Refered from 480 in Modules/socketmodule.c.'>WSAEAGAIN</a> WSAEWOULDBLOCK
<a name='L482'><font color='darkred'>#endif</font>
<a name='L483'><font color='darkred'>#define</font> <a href='../S/2711.html#L756' title='Refered from 756 in Modules/socketmodule.c.'>CHECK_ERRNO</a>(expected) \
<a name='L484'>    (WSAGetLastError() == WSA ## expected)
<a name='L485'><font color='darkred'>#else</font>
<a name='L486'><font color='darkred'>#define</font> <a href='../S/2711.html#L756' title='Refered from 756 in Modules/socketmodule.c.'>CHECK_ERRNO</a>(expected) \
<a name='L487'>    (errno == expected)
<a name='L488'><font color='darkred'>#endif</font>
<a name='L489'>
<a name='L490'><i><font color='green'>/* Convenience function to raise an error according to errno</font></i>
<a name='L491'><i><font color='green'>   and return a NULL pointer from a function. */</font></i>
<a name='L492'>
<a name='L493'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L494'><a href='../R/10200.html' title='Multiple refered from 11 places.'>set_error</a>(<b>void</b>)
<a name='L495'><font color='red'>{</font>
<a name='L496'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L497'>    <b>int</b> err_no = WSAGetLastError();
<a name='L498'>    <i><font color='green'>/* PyErr_SetExcFromWindowsErr() invokes FormatMessage() which</font></i>
<a name='L499'><i><font color='green'>       recognizes the error codes used by both GetLastError() and</font></i>
<a name='L500'><i><font color='green'>       WSAGetLastError */</font></i>
<a name='L501'>    <b>if</b> (err_no)
<a name='L502'>        <b>return</b> <a href='../S/3106.html#L541' title='Defined at 541 in Python/errors.c.'>PyErr_SetExcFromWindowsErr</a>(socket_error, err_no);
<a name='L503'><font color='darkred'>#endif</font>
<a name='L504'>
<a name='L505'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>) &amp;&amp; !<b>defined</b>(<a href='../S/2894.html#L13' title='Defined at 13 in PC/os2emx/pyconfig.h.'>PYCC_GCC</a>)
<a name='L506'>    <b>if</b> (sock_errno() != NO_ERROR) <font color='red'>{</font>
<a name='L507'>        APIRET rc;
<a name='L508'>        ULONG  msglen;
<a name='L509'>        <b>char</b> outbuf[100];
<a name='L510'>        <b>int</b> myerrorcode = sock_errno();
<a name='L511'>
<a name='L512'>        <i><font color='green'>/* Retrieve socket-related error message from MPTN.MSG file */</font></i>
<a name='L513'>        rc = DosGetMessage(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0, outbuf, <b>sizeof</b>(outbuf),
<a name='L514'>                           myerrorcode - SOCBASEERR + 26,
<a name='L515'>                           "mptn.msg",
<a name='L516'>                           &amp;msglen);
<a name='L517'>        <b>if</b> (rc == NO_ERROR) <font color='red'>{</font>
<a name='L518'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L519'>
<a name='L520'>            <i><font color='green'>/* OS/2 doesn't guarantee a terminator */</font></i>
<a name='L521'>            outbuf[msglen] = '\0';
<a name='L522'>            <b>if</b> (strlen(outbuf) &gt; 0) <font color='red'>{</font>
<a name='L523'>                <i><font color='green'>/* If non-empty msg, trim CRLF */</font></i>
<a name='L524'>                <b>char</b> *lastc = &amp;outbuf[ strlen(outbuf)-1 ];
<a name='L525'>                <b>while</b> (lastc &gt; outbuf &amp;&amp;
<a name='L526'>                       <a href='../D/9346.html' title='Multiple defined in 2 places.'>isspace</a>(<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*lastc))) <font color='red'>{</font>
<a name='L527'>                    <i><font color='green'>/* Trim trailing whitespace (CRLF) */</font></i>
<a name='L528'>                    *lastc-- = '\0';
<a name='L529'>                <font color='red'>}</font>
<a name='L530'>            <font color='red'>}</font>
<a name='L531'>            v = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(is)", myerrorcode, outbuf);
<a name='L532'>            <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L533'>                <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(socket_error, v);
<a name='L534'>                Py_DECREF(v);
<a name='L535'>            <font color='red'>}</font>
<a name='L536'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L537'>        <font color='red'>}</font>
<a name='L538'>    <font color='red'>}</font>
<a name='L539'><font color='darkred'>#endif</font>
<a name='L540'>
<a name='L541'>    <b>return</b> <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(socket_error);
<a name='L542'><font color='red'>}</font>
<a name='L543'>
<a name='L544'>
<a name='L545'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L546'><a href='../S/2711.html#L3178' title='Refered from 3178 in Modules/socketmodule.c.'>set_herror</a>(<b>int</b> h_error)
<a name='L547'><font color='red'>{</font>
<a name='L548'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L549'>
<a name='L550'><font color='darkred'>#ifdef</font> HAVE_HSTRERROR
<a name='L551'>    v = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(is)", h_error, (<b>char</b> *)hstrerror(h_error));
<a name='L552'><font color='darkred'>#else</font>
<a name='L553'>    v = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(is)", h_error, "host not found");
<a name='L554'><font color='darkred'>#endif</font>
<a name='L555'>    <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L556'>        <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(socket_herror, v);
<a name='L557'>        Py_DECREF(v);
<a name='L558'>    <font color='red'>}</font>
<a name='L559'>
<a name='L560'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L561'><font color='red'>}</font>
<a name='L562'>
<a name='L563'>
<a name='L564'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L565'><a href='../R/10206.html' title='Multiple refered from 6 places.'>set_gaierror</a>(<b>int</b> error)
<a name='L566'><font color='red'>{</font>
<a name='L567'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L568'>
<a name='L569'><font color='darkred'>#ifdef</font> <a href='../D/888.html' title='Multiple defined in 2 places.'>EAI_SYSTEM</a>
<a name='L570'>    <i><font color='green'>/* EAI_SYSTEM is not available on Windows XP. */</font></i>
<a name='L571'>    <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> == <a href='../D/888.html' title='Multiple defined in 2 places.'>EAI_SYSTEM</a>)
<a name='L572'>        <b>return</b> <a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>();
<a name='L573'><font color='darkred'>#endif</font>
<a name='L574'>
<a name='L575'><font color='darkred'>#ifdef</font> HAVE_GAI_STRERROR
<a name='L576'>    v = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(is)", <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>, <a href='../D/8771.html' title='Multiple defined in 2 places.'>gai_strerror</a>(<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>));
<a name='L577'><font color='darkred'>#else</font>
<a name='L578'>    v = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(is)", <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>, "getaddrinfo failed");
<a name='L579'><font color='darkred'>#endif</font>
<a name='L580'>    <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L581'>        <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(socket_gaierror, v);
<a name='L582'>        Py_DECREF(v);
<a name='L583'>    <font color='red'>}</font>
<a name='L584'>
<a name='L585'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L586'><font color='red'>}</font>
<a name='L587'>
<a name='L588'><font color='darkred'>#ifdef</font> __VMS
<a name='L589'><i><font color='green'>/* Function to send in segments */</font></i>
<a name='L590'><b>static</b> <b>int</b>
<a name='L591'><a href='../R/10160.html' title='Multiple refered from 2 places.'>sendsegmented</a>(<b>int</b> sock_fd, <b>char</b> *buf, <b>int</b> len, <b>int</b> flags)
<a name='L592'><font color='red'>{</font>
<a name='L593'>    <b>int</b> n = 0;
<a name='L594'>    <b>int</b> remaining = len;
<a name='L595'>
<a name='L596'>    <b>while</b> (remaining &gt; 0) <font color='red'>{</font>
<a name='L597'>        <b>unsigned</b> <b>int</b> segment;
<a name='L598'>
<a name='L599'>        segment = (remaining &gt;= <a href='../S/2711.html#L417' title='Defined at 417 in Modules/socketmodule.c.'>SEGMENT_SIZE</a> ? <a href='../S/2711.html#L417' title='Defined at 417 in Modules/socketmodule.c.'>SEGMENT_SIZE</a> : remaining);
<a name='L600'>        n = send(sock_fd, buf, segment, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L601'>        <b>if</b> (n &lt; 0) <font color='red'>{</font>
<a name='L602'>            <b>return</b> n;
<a name='L603'>        <font color='red'>}</font>
<a name='L604'>        remaining -= segment;
<a name='L605'>        buf += segment;
<a name='L606'>    <font color='red'>}</font> <i><font color='green'>/* end while */</font></i>
<a name='L607'>
<a name='L608'>    <b>return</b> len;
<a name='L609'><font color='red'>}</font>
<a name='L610'><font color='darkred'>#endif</font>
<a name='L611'>
<a name='L612'><i><font color='green'>/* Function to perform the setting of socket blocking mode</font></i>
<a name='L613'><i><font color='green'>   internally. block = (1 | 0). */</font></i>
<a name='L614'><b>static</b> <b>int</b>
<a name='L615'><a href='../R/8456.html' title='Multiple refered from 3 places.'>internal_setblocking</a>(PySocketSockObject *s, <b>int</b> block)
<a name='L616'><font color='red'>{</font>
<a name='L617'><font color='darkred'>#ifndef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L618'>    <b>int</b> delay_flag;
<a name='L619'><font color='darkred'>#endif</font>
<a name='L620'><font color='darkred'>#ifdef</font> SOCK_NONBLOCK
<a name='L621'>    <b>if</b> (<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>)
<a name='L622'>        s-&gt;sock_type &amp;= (~SOCK_NONBLOCK);
<a name='L623'>    <b>else</b>
<a name='L624'>        s-&gt;sock_type |= SOCK_NONBLOCK;
<a name='L625'><font color='darkred'>#endif</font>
<a name='L626'>
<a name='L627'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L628'><font color='darkred'>#ifndef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L629'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>) &amp;&amp; !<b>defined</b>(<a href='../S/2894.html#L13' title='Defined at 13 in PC/os2emx/pyconfig.h.'>PYCC_GCC</a>)
<a name='L630'>    <a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a> = !<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>;
<a name='L631'>    ioctl(s-&gt;sock_fd, FIONBIO, (caddr_t)&amp;<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>, <b>sizeof</b>(<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>));
<a name='L632'><font color='darkred'>#elif</font> <b>defined</b>(__VMS)
<a name='L633'>    <a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a> = !<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>;
<a name='L634'>    ioctl(s-&gt;sock_fd, FIONBIO, (<b>unsigned</b> <b>int</b> *)&amp;<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>);
<a name='L635'><font color='darkred'>#else</font>  <i><font color='green'>/* !PYOS_OS2 &amp;&amp; !__VMS */</font></i>
<a name='L636'>    delay_flag = fcntl(s-&gt;sock_fd, F_GETFL, 0);
<a name='L637'>    <b>if</b> (<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>)
<a name='L638'>        delay_flag &amp;= (~<a href='../S/2711.html#L290' title='Defined at 290 in Modules/socketmodule.c.'>O_NONBLOCK</a>);
<a name='L639'>    <b>else</b>
<a name='L640'>        delay_flag |= <a href='../S/2711.html#L290' title='Defined at 290 in Modules/socketmodule.c.'>O_NONBLOCK</a>;
<a name='L641'>    fcntl(s-&gt;sock_fd, F_SETFL, delay_flag);
<a name='L642'><font color='darkred'>#endif</font> <i><font color='green'>/* !PYOS_OS2 */</font></i>
<a name='L643'><font color='darkred'>#else</font> <i><font color='green'>/* MS_WINDOWS */</font></i>
<a name='L644'>    <a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a> = !<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>;
<a name='L645'>    ioctlsocket(s-&gt;sock_fd, FIONBIO, (u_long*)&amp;<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>);
<a name='L646'><font color='darkred'>#endif</font> <i><font color='green'>/* MS_WINDOWS */</font></i>
<a name='L647'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L648'>
<a name='L649'>    <i><font color='green'>/* Since these don't return anything */</font></i>
<a name='L650'>    <b>return</b> 1;
<a name='L651'><font color='red'>}</font>
<a name='L652'>
<a name='L653'><i><font color='green'>/* Do a select()/poll() on the socket, if necessary (sock_timeout &gt; 0).</font></i>
<a name='L654'><i><font color='green'>   The argument writing indicates the direction.</font></i>
<a name='L655'><i><font color='green'>   This does not raise an exception; we'll let our caller do that</font></i>
<a name='L656'><i><font color='green'>   after they've reacquired the interpreter lock.</font></i>
<a name='L657'><i><font color='green'>   Returns 1 on timeout, -1 on error, 0 otherwise. */</font></i>
<a name='L658'><b>static</b> <b>int</b>
<a name='L659'><a href='../R/8455.html' title='Multiple refered from 7 places.'>internal_select_ex</a>(PySocketSockObject *s, <b>int</b> writing, <b>double</b> interval)
<a name='L660'><font color='red'>{</font>
<a name='L661'>    <b>int</b> n;
<a name='L662'>
<a name='L663'>    <i><font color='green'>/* Nothing to do unless we're in timeout mode (not non-blocking) */</font></i>
<a name='L664'>    <b>if</b> (s-&gt;sock_timeout &lt;= 0.0)
<a name='L665'>        <b>return</b> 0;
<a name='L666'>
<a name='L667'>    <i><font color='green'>/* Guard against closed socket */</font></i>
<a name='L668'>    <b>if</b> (s-&gt;sock_fd &lt; 0)
<a name='L669'>        <b>return</b> 0;
<a name='L670'>
<a name='L671'>    <i><font color='green'>/* Handling this condition here simplifies the select loops */</font></i>
<a name='L672'>    <b>if</b> (interval &lt; 0.0)
<a name='L673'>        <b>return</b> 1;
<a name='L674'>
<a name='L675'>    <i><font color='green'>/* Prefer poll, if available, since you can poll() any fd</font></i>
<a name='L676'><i><font color='green'>     * which can't be done with select(). */</font></i>
<a name='L677'><font color='darkred'>#ifdef</font> HAVE_POLL
<a name='L678'>    <font color='red'>{</font>
<a name='L679'>        <b>struct</b> pollfd pollfd;
<a name='L680'>        <b>int</b> timeout;
<a name='L681'>
<a name='L682'>        pollfd.fd = s-&gt;sock_fd;
<a name='L683'>        pollfd.events = writing ? POLLOUT : POLLIN;
<a name='L684'>
<a name='L685'>        <i><font color='green'>/* s-&gt;sock_timeout is in seconds, timeout in ms */</font></i>
<a name='L686'>        timeout = (<b>int</b>)(interval * 1000 + 0.5);
<a name='L687'>        n = poll(&amp;pollfd, 1, timeout);
<a name='L688'>    <font color='red'>}</font>
<a name='L689'><font color='darkred'>#else</font>
<a name='L690'>    <font color='red'>{</font>
<a name='L691'>        <i><font color='green'>/* Construct the arguments to select */</font></i>
<a name='L692'>        fd_set fds;
<a name='L693'>        <b>struct</b> timeval tv;
<a name='L694'>        tv.tv_sec = (<b>int</b>)interval;
<a name='L695'>        tv.tv_usec = (<b>int</b>)((interval - tv.tv_sec) * 1e6);
<a name='L696'>        FD_ZERO(&amp;fds);
<a name='L697'>        FD_SET(s-&gt;sock_fd, &amp;fds);
<a name='L698'>
<a name='L699'>        <i><font color='green'>/* See if the socket is ready */</font></i>
<a name='L700'>        <b>if</b> (writing)
<a name='L701'>            n = select(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(s-&gt;sock_fd+1, <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a>, <b>int</b>),
<a name='L702'>                       <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;fds, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;tv);
<a name='L703'>        <b>else</b>
<a name='L704'>            n = select(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(s-&gt;sock_fd+1, <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a>, <b>int</b>),
<a name='L705'>                       &amp;fds, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;tv);
<a name='L706'>    <font color='red'>}</font>
<a name='L707'><font color='darkred'>#endif</font>
<a name='L708'>
<a name='L709'>    <b>if</b> (n &lt; 0)
<a name='L710'>        <b>return</b> -1;
<a name='L711'>    <b>if</b> (n == 0)
<a name='L712'>        <b>return</b> 1;
<a name='L713'>    <b>return</b> 0;
<a name='L714'><font color='red'>}</font>
<a name='L715'>
<a name='L716'><b>static</b> <b>int</b>
<a name='L717'><a href='../R/8454.html' title='Multiple refered from 2 places.'>internal_select</a>(PySocketSockObject *s, <b>int</b> writing)
<a name='L718'><font color='red'>{</font>
<a name='L719'>    <b>return</b> <a href='../S/2711.html#L659' title='Defined at 659 in Modules/socketmodule.c.'>internal_select_ex</a>(s, writing, s-&gt;sock_timeout);
<a name='L720'><font color='red'>}</font>
<a name='L721'>
<a name='L722'><i><font color='green'>/*</font></i>
<a name='L723'><i><font color='green'>   Two macros for automatic retry of select() in case of false positives</font></i>
<a name='L724'><i><font color='green'>   (for example, select() could indicate a socket is ready for reading</font></i>
<a name='L725'><i><font color='green'>    but the data then discarded by the OS because of a wrong checksum).</font></i>
<a name='L726'><i><font color='green'>   Here is an example of use:</font></i>
<a name='L727'><i><font color='green'></font></i>
<a name='L728'><i><font color='green'>    BEGIN_SELECT_LOOP(s)</font></i>
<a name='L729'><i><font color='green'>    Py_BEGIN_ALLOW_THREADS</font></i>
<a name='L730'><i><font color='green'>    timeout = internal_select_ex(s, 0, interval);</font></i>
<a name='L731'><i><font color='green'>    if (!timeout)</font></i>
<a name='L732'><i><font color='green'>        outlen = recv(s-&gt;sock_fd, cbuf, len, flags);</font></i>
<a name='L733'><i><font color='green'>    Py_END_ALLOW_THREADS</font></i>
<a name='L734'><i><font color='green'>    if (timeout == 1) {</font></i>
<a name='L735'><i><font color='green'>        PyErr_SetString(socket_timeout, "timed out");</font></i>
<a name='L736'><i><font color='green'>        return -1;</font></i>
<a name='L737'><i><font color='green'>    }</font></i>
<a name='L738'><i><font color='green'>    END_SELECT_LOOP(s)</font></i>
<a name='L739'><i><font color='green'>*/</font></i>
<a name='L740'>
<a name='L741'><font color='darkred'>#define</font> <a href='../R/225.html' title='Multiple refered from 6 places.'>BEGIN_SELECT_LOOP</a>(s) \
<a name='L742'>    <font color='red'>{</font> \
<a name='L743'>        <a href='../D/6194.html' title='Multiple defined in 2 places.'>_PyTime_timeval</a> now, deadline = <font color='red'>{</font>0, 0<font color='red'>}</font>; \
<a name='L744'>        <b>double</b> interval = s-&gt;sock_timeout; \
<a name='L745'>        <b>int</b> has_timeout = s-&gt;sock_timeout &gt; 0.0; \
<a name='L746'>        <b>if</b> (has_timeout) <font color='red'>{</font> \
<a name='L747'>            <a href='../S/3139.html#L23' title='Defined at 23 in Python/pytime.c.'>_PyTime_gettimeofday</a>(&amp;now); \
<a name='L748'>            deadline = now; \
<a name='L749'>            _PyTime_ADD_SECONDS(deadline, s-&gt;sock_timeout); \
<a name='L750'>        <font color='red'>}</font> \
<a name='L751'>        <b>while</b> (1) <font color='red'>{</font> \
<a name='L752'>            errno = 0; \
<a name='L753'>
<a name='L754'><font color='darkred'>#define</font> <a href='../R/857.html' title='Multiple refered from 6 places.'>END_SELECT_LOOP</a>(s) \
<a name='L755'>            <b>if</b> (!has_timeout || \
<a name='L756'>                (!<a href='../D/524.html' title='Multiple defined in 2 places.'>CHECK_ERRNO</a>(EWOULDBLOCK) &amp;&amp; !<a href='../D/524.html' title='Multiple defined in 2 places.'>CHECK_ERRNO</a>(EAGAIN))) \
<a name='L757'>                <b>break</b>; \
<a name='L758'>            <a href='../S/3139.html#L23' title='Defined at 23 in Python/pytime.c.'>_PyTime_gettimeofday</a>(&amp;now); \
<a name='L759'>            interval = <a href='../S/573.html#L36' title='Defined at 36 in Include/pytime.h.'>_PyTime_INTERVAL</a>(now, deadline); \
<a name='L760'>        <font color='red'>}</font> \
<a name='L761'>    <font color='red'>}</font> \
<a name='L762'>
<a name='L763'><i><font color='green'>/* Initialize a new socket object. */</font></i>
<a name='L764'>
<a name='L765'><b>static</b> <b>double</b> defaulttimeout = -1.0; <i><font color='green'>/* Default timeout for new sockets */</font></i>
<a name='L766'>
<a name='L767'><b>static</b> <b>void</b>
<a name='L768'><a href='../R/8387.html' title='Multiple refered from 2 places.'>init_sockobject</a>(PySocketSockObject *s,
<a name='L769'>                <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> fd, <b>int</b> family, <b>int</b> type, <b>int</b> proto)
<a name='L770'><font color='red'>{</font>
<a name='L771'>    s-&gt;sock_fd = fd;
<a name='L772'>    s-&gt;sock_family = family;
<a name='L773'>    s-&gt;sock_type = type;
<a name='L774'>    s-&gt;sock_proto = proto;
<a name='L775'>
<a name='L776'>    s-&gt;errorhandler = &amp;<a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>;
<a name='L777'><font color='darkred'>#ifdef</font> SOCK_NONBLOCK
<a name='L778'>    <b>if</b> (type &amp; SOCK_NONBLOCK)
<a name='L779'>        s-&gt;sock_timeout = 0.0;
<a name='L780'>    <b>else</b>
<a name='L781'><font color='darkred'>#endif</font>
<a name='L782'>    <font color='red'>{</font>
<a name='L783'>        s-&gt;sock_timeout = defaulttimeout;
<a name='L784'>        <b>if</b> (defaulttimeout &gt;= 0.0)
<a name='L785'>            <a href='../S/2711.html#L615' title='Defined at 615 in Modules/socketmodule.c.'>internal_setblocking</a>(s, 0);
<a name='L786'>    <font color='red'>}</font>
<a name='L787'>
<a name='L788'><font color='red'>}</font>
<a name='L789'>
<a name='L790'>
<a name='L791'><i><font color='green'>/* Create a new socket object.</font></i>
<a name='L792'><i><font color='green'>   This just creates the object and initializes it.</font></i>
<a name='L793'><i><font color='green'>   If the creation fails, return NULL and set an exception (implicit</font></i>
<a name='L794'><i><font color='green'>   in NEWOBJ()). */</font></i>
<a name='L795'>
<a name='L796'><b>static</b> <a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *
<a name='L797'><a href='../R/9207.html' title='Multiple refered from 2 places.'>new_sockobject</a>(<a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> fd, <b>int</b> family, <b>int</b> type, <b>int</b> proto)
<a name='L798'><font color='red'>{</font>
<a name='L799'>    <a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *s;
<a name='L800'>    s = (<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *)
<a name='L801'>        <a href='../S/2824.html#L730' title='Defined at 730 in Objects/typeobject.c.'>PyType_GenericNew</a>(&amp;sock_type, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L802'>    <b>if</b> (s != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L803'>        <a href='../S/2711.html#L768' title='Defined at 768 in Modules/socketmodule.c.'>init_sockobject</a>(s, fd, family, type, proto);
<a name='L804'>    <b>return</b> s;
<a name='L805'><font color='red'>}</font>
<a name='L806'>
<a name='L807'>
<a name='L808'><i><font color='green'>/* Lock to allow python interpreter to continue, but only allow one</font></i>
<a name='L809'><i><font color='green'>   thread to be in gethostbyname or getaddrinfo */</font></i>
<a name='L810'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2711.html#L171' title='Defined at 171 in Modules/socketmodule.c.'>USE_GETHOSTBYNAME_LOCK</a>) || <b>defined</b>(<a href='../S/2711.html#L184' title='Defined at 184 in Modules/socketmodule.c.'>USE_GETADDRINFO_LOCK</a>)
<a name='L811'><a href='../S/572.html#L5' title='Defined at 5 in Include/pythread.h.'>PyThread_type_lock</a> netdb_lock;
<a name='L812'><font color='darkred'>#endif</font>
<a name='L813'>
<a name='L814'>
<a name='L815'><i><font color='green'>/* Convert a string specifying a host name or one of a few symbolic</font></i>
<a name='L816'><i><font color='green'>   names to a numeric IP address.  This usually calls gethostbyname()</font></i>
<a name='L817'><i><font color='green'>   to do the work; the names "" and "&lt;broadcast&gt;" are special.</font></i>
<a name='L818'><i><font color='green'>   Return the length (IPv4 should be 4 bytes), or negative if</font></i>
<a name='L819'><i><font color='green'>   an error occurred; then an exception is raised. */</font></i>
<a name='L820'>
<a name='L821'><b>static</b> <b>int</b>
<a name='L822'><a href='../R/10270.html' title='Multiple refered from 5 places.'>setipaddr</a>(<b>char</b> *name, <b>struct</b> sockaddr *addr_ret, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> addr_ret_size, <b>int</b> af)
<a name='L823'><font color='red'>{</font>
<a name='L824'>    <b>struct</b> <a href='../S/2620.html#L127' title='Defined at 127 in Modules/addrinfo.h.'>addrinfo</a> hints, *res;
<a name='L825'>    <b>int</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L826'>    <b>int</b> d1, d2, d3, d4;
<a name='L827'>    <b>char</b> ch;
<a name='L828'>
<a name='L829'>    memset((<b>void</b> *) addr_ret, '\0', <b>sizeof</b>(*addr_ret));
<a name='L830'>    <b>if</b> (name[0] == '\0') <font color='red'>{</font>
<a name='L831'>        <b>int</b> siz;
<a name='L832'>        memset(&amp;hints, 0, <b>sizeof</b>(hints));
<a name='L833'>        hints.ai_family = af;
<a name='L834'>        hints.ai_socktype = SOCK_DGRAM;         <i><font color='green'>/*dummy*/</font></i>
<a name='L835'>        hints.ai_flags = <a href='../D/52.html' title='Multiple defined in 2 places.'>AI_PASSIVE</a>;
<a name='L836'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L837'>        <a href='../D/19.html' title='Multiple defined in 2 places.'>ACQUIRE_GETADDRINFO_LOCK</a>
<a name='L838'>        <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../D/8911.html' title='Multiple defined in 4 places.'>getaddrinfo</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, "0", &amp;hints, &amp;res);
<a name='L839'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L840'>        <i><font color='green'>/* We assume that those thread-unsafe getaddrinfo() versions</font></i>
<a name='L841'><i><font color='green'>           *are* safe regarding their return value, ie. that a</font></i>
<a name='L842'><i><font color='green'>           subsequent call to getaddrinfo() does not destroy the</font></i>
<a name='L843'><i><font color='green'>           outcome of the first call. */</font></i>
<a name='L844'>        <a href='../D/4464.html' title='Multiple defined in 2 places.'>RELEASE_GETADDRINFO_LOCK</a>
<a name='L845'>        <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>) <font color='red'>{</font>
<a name='L846'>            <a href='../S/2711.html#L565' title='Defined at 565 in Modules/socketmodule.c.'>set_gaierror</a>(<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>);
<a name='L847'>            <b>return</b> -1;
<a name='L848'>        <font color='red'>}</font>
<a name='L849'>        <b>switch</b> (res-&gt;ai_family) <font color='red'>{</font>
<a name='L850'>        <b>case</b> AF_INET:
<a name='L851'>            siz = 4;
<a name='L852'>            <b>break</b>;
<a name='L853'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L854'>        <b>case</b> AF_INET6:
<a name='L855'>            siz = 16;
<a name='L856'>            <b>break</b>;
<a name='L857'><font color='darkred'>#endif</font>
<a name='L858'>        <b>default</b>:
<a name='L859'>            <a href='../D/8729.html' title='Multiple defined in 2 places.'>freeaddrinfo</a>(res);
<a name='L860'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L861'>                "unsupported address family");
<a name='L862'>            <b>return</b> -1;
<a name='L863'>        <font color='red'>}</font>
<a name='L864'>        <b>if</b> (res-&gt;ai_next) <font color='red'>{</font>
<a name='L865'>            <a href='../D/8729.html' title='Multiple defined in 2 places.'>freeaddrinfo</a>(res);
<a name='L866'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L867'>                "wildcard resolved to multiple address");
<a name='L868'>            <b>return</b> -1;
<a name='L869'>        <font color='red'>}</font>
<a name='L870'>        <b>if</b> (res-&gt;ai_addrlen &lt; addr_ret_size)
<a name='L871'>            addr_ret_size = res-&gt;ai_addrlen;
<a name='L872'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(addr_ret, res-&gt;ai_addr, addr_ret_size);
<a name='L873'>        <a href='../D/8729.html' title='Multiple defined in 2 places.'>freeaddrinfo</a>(res);
<a name='L874'>        <b>return</b> siz;
<a name='L875'>    <font color='red'>}</font>
<a name='L876'>    <b>if</b> (name[0] == '&lt;' &amp;&amp; strcmp(name, "&lt;broadcast&gt;") == 0) <font color='red'>{</font>
<a name='L877'>        <b>struct</b> sockaddr_in *sin;
<a name='L878'>        <b>if</b> (af != AF_INET &amp;&amp; af != AF_UNSPEC) <font color='red'>{</font>
<a name='L879'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L880'>                "address family mismatched");
<a name='L881'>            <b>return</b> -1;
<a name='L882'>        <font color='red'>}</font>
<a name='L883'>        sin = (<b>struct</b> sockaddr_in *)addr_ret;
<a name='L884'>        memset((<b>void</b> *) sin, '\0', <b>sizeof</b>(*sin));
<a name='L885'>        sin-&gt;sin_family = AF_INET;
<a name='L886'><font color='darkred'>#ifdef</font> HAVE_SOCKADDR_SA_LEN
<a name='L887'>        sin-&gt;sin_len = <b>sizeof</b>(*sin);
<a name='L888'><font color='darkred'>#endif</font>
<a name='L889'>        sin-&gt;sin_addr.s_addr = INADDR_BROADCAST;
<a name='L890'>        <b>return</b> <b>sizeof</b>(sin-&gt;sin_addr);
<a name='L891'>    <font color='red'>}</font>
<a name='L892'>    <b>if</b> (sscanf(name, "%d.%d.%d.%d%c", &amp;d1, &amp;d2, &amp;d3, &amp;d4, &amp;ch) == 4 &amp;&amp;
<a name='L893'>        0 &lt;= d1 &amp;&amp; d1 &lt;= 255 &amp;&amp; 0 &lt;= d2 &amp;&amp; d2 &lt;= 255 &amp;&amp;
<a name='L894'>        0 &lt;= d3 &amp;&amp; d3 &lt;= 255 &amp;&amp; 0 &lt;= d4 &amp;&amp; d4 &lt;= 255) <font color='red'>{</font>
<a name='L895'>        <b>struct</b> sockaddr_in *sin;
<a name='L896'>        sin = (<b>struct</b> sockaddr_in *)addr_ret;
<a name='L897'>        sin-&gt;sin_addr.s_addr = htonl(
<a name='L898'>            ((<b>long</b>) d1 &lt;&lt; 24) | ((<b>long</b>) d2 &lt;&lt; 16) |
<a name='L899'>            ((<b>long</b>) d3 &lt;&lt; 8) | ((<b>long</b>) d4 &lt;&lt; 0));
<a name='L900'>        sin-&gt;sin_family = AF_INET;
<a name='L901'><font color='darkred'>#ifdef</font> HAVE_SOCKADDR_SA_LEN
<a name='L902'>        sin-&gt;sin_len = <b>sizeof</b>(*sin);
<a name='L903'><font color='darkred'>#endif</font>
<a name='L904'>        <b>return</b> 4;
<a name='L905'>    <font color='red'>}</font>
<a name='L906'>    memset(&amp;hints, 0, <b>sizeof</b>(hints));
<a name='L907'>    hints.ai_family = af;
<a name='L908'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L909'>    <a href='../D/19.html' title='Multiple defined in 2 places.'>ACQUIRE_GETADDRINFO_LOCK</a>
<a name='L910'>    <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../D/8911.html' title='Multiple defined in 4 places.'>getaddrinfo</a>(name, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;hints, &amp;res);
<a name='L911'><font color='darkred'>#if</font> <b>defined</b>(__digital__) &amp;&amp; <b>defined</b>(__unix__)
<a name='L912'>    <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> == <a href='../D/884.html' title='Multiple defined in 2 places.'>EAI_NONAME</a> &amp;&amp; af == AF_UNSPEC) <font color='red'>{</font>
<a name='L913'>        <i><font color='green'>/* On Tru64 V5.1, numeric-to-addr conversion fails</font></i>
<a name='L914'><i><font color='green'>           if no address family is given. Assume IPv4 for now.*/</font></i>
<a name='L915'>        hints.ai_family = AF_INET;
<a name='L916'>        <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../D/8911.html' title='Multiple defined in 4 places.'>getaddrinfo</a>(name, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;hints, &amp;res);
<a name='L917'>    <font color='red'>}</font>
<a name='L918'><font color='darkred'>#endif</font>
<a name='L919'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L920'>    <a href='../D/4464.html' title='Multiple defined in 2 places.'>RELEASE_GETADDRINFO_LOCK</a>  <i><font color='green'>/* see comment in setipaddr() */</font></i>
<a name='L921'>    <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>) <font color='red'>{</font>
<a name='L922'>        <a href='../S/2711.html#L565' title='Defined at 565 in Modules/socketmodule.c.'>set_gaierror</a>(<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>);
<a name='L923'>        <b>return</b> -1;
<a name='L924'>    <font color='red'>}</font>
<a name='L925'>    <b>if</b> (res-&gt;ai_addrlen &lt; addr_ret_size)
<a name='L926'>        addr_ret_size = res-&gt;ai_addrlen;
<a name='L927'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *) addr_ret, res-&gt;ai_addr, addr_ret_size);
<a name='L928'>    <a href='../D/8729.html' title='Multiple defined in 2 places.'>freeaddrinfo</a>(res);
<a name='L929'>    <b>switch</b> (addr_ret-&gt;sa_family) <font color='red'>{</font>
<a name='L930'>    <b>case</b> AF_INET:
<a name='L931'>        <b>return</b> 4;
<a name='L932'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L933'>    <b>case</b> AF_INET6:
<a name='L934'>        <b>return</b> 16;
<a name='L935'><font color='darkred'>#endif</font>
<a name='L936'>    <b>default</b>:
<a name='L937'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "unknown address family");
<a name='L938'>        <b>return</b> -1;
<a name='L939'>    <font color='red'>}</font>
<a name='L940'><font color='red'>}</font>
<a name='L941'>
<a name='L942'>
<a name='L943'><i><font color='green'>/* Create a string object representing an IP address.</font></i>
<a name='L944'><i><font color='green'>   This is always a string of the form 'dd.dd.dd.dd' (with variable</font></i>
<a name='L945'><i><font color='green'>   size numbers). */</font></i>
<a name='L946'>
<a name='L947'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L948'><a href='../R/8857.html' title='Multiple refered from 5 places.'>makeipaddr</a>(<b>struct</b> sockaddr *addr, <b>int</b> addrlen)
<a name='L949'><font color='red'>{</font>
<a name='L950'>    <b>char</b> buf[<a href='../D/2307.html' title='Multiple defined in 2 places.'>NI_MAXHOST</a>];
<a name='L951'>    <b>int</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L952'>
<a name='L953'>    <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../D/8959.html' title='Multiple defined in 2 places.'>getnameinfo</a>(addr, addrlen, buf, <b>sizeof</b>(buf), <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0,
<a name='L954'>        <a href='../S/2620.html#L118' title='Defined at 118 in Modules/addrinfo.h.'>NI_NUMERICHOST</a>);
<a name='L955'>    <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>) <font color='red'>{</font>
<a name='L956'>        <a href='../S/2711.html#L565' title='Defined at 565 in Modules/socketmodule.c.'>set_gaierror</a>(<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>);
<a name='L957'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L958'>    <font color='red'>}</font>
<a name='L959'>    <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(buf);
<a name='L960'><font color='red'>}</font>
<a name='L961'>
<a name='L962'>
<a name='L963'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L383' title='Defined at 383 in Modules/socketmodule.c.'>USE_BLUETOOTH</a>
<a name='L964'><i><font color='green'>/* Convert a string representation of a Bluetooth address into a numeric</font></i>
<a name='L965'><i><font color='green'>   address.  Returns the length (6), or raises an exception and returns -1 if</font></i>
<a name='L966'><i><font color='green'>   an error occurred. */</font></i>
<a name='L967'>
<a name='L968'><b>static</b> <b>int</b>
<a name='L969'><a href='../R/10264.html' title='Multiple refered from 4 places.'>setbdaddr</a>(<b>char</b> *name, bdaddr_t *bdaddr)
<a name='L970'><font color='red'>{</font>
<a name='L971'>    <b>unsigned</b> <b>int</b> b0, b1, b2, b3, b4, b5;
<a name='L972'>    <b>char</b> ch;
<a name='L973'>    <b>int</b> n;
<a name='L974'>
<a name='L975'>    n = sscanf(name, "%X:%X:%X:%X:%X:%X%c",
<a name='L976'>               &amp;b5, &amp;b4, &amp;b3, &amp;b2, &amp;b1, &amp;b0, &amp;ch);
<a name='L977'>    <b>if</b> (n == 6 &amp;&amp; (b0 | b1 | b2 | b3 | b4 | b5) &lt; 256) <font color='red'>{</font>
<a name='L978'>        bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[0] = b0;
<a name='L979'>        bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[1] = b1;
<a name='L980'>        bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[2] = b2;
<a name='L981'>        bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[3] = b3;
<a name='L982'>        bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[4] = b4;
<a name='L983'>        bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[5] = b5;
<a name='L984'>        <b>return</b> 6;
<a name='L985'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L986'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "bad bluetooth address");
<a name='L987'>        <b>return</b> -1;
<a name='L988'>    <font color='red'>}</font>
<a name='L989'><font color='red'>}</font>
<a name='L990'>
<a name='L991'><i><font color='green'>/* Create a string representation of the Bluetooth address.  This is always a</font></i>
<a name='L992'><i><font color='green'>   string of the form 'XX:XX:XX:XX:XX:XX' where XX is a two digit hexadecimal</font></i>
<a name='L993'><i><font color='green'>   value (zero padded if necessary). */</font></i>
<a name='L994'>
<a name='L995'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L996'><a href='../R/8852.html' title='Multiple refered from 4 places.'>makebdaddr</a>(bdaddr_t *bdaddr)
<a name='L997'><font color='red'>{</font>
<a name='L998'>    <b>char</b> buf[(6 * 2) + 5 + 1];
<a name='L999'>
<a name='L1000'>    sprintf(buf, "%02X:%02X:%02X:%02X:%02X:%02X",
<a name='L1001'>        bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[5], bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[4], bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[3],
<a name='L1002'>        bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[2], bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[1], bdaddr-&gt;<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>[0]);
<a name='L1003'>    <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(buf);
<a name='L1004'><font color='red'>}</font>
<a name='L1005'><font color='darkred'>#endif</font>
<a name='L1006'>
<a name='L1007'>
<a name='L1008'><i><font color='green'>/* Create an object representing the given socket address,</font></i>
<a name='L1009'><i><font color='green'>   suitable for passing it back to bind(), connect() etc.</font></i>
<a name='L1010'><i><font color='green'>   The family field of the sockaddr structure is inspected</font></i>
<a name='L1011'><i><font color='green'>   to determine what kind of address it really is. */</font></i>
<a name='L1012'>
<a name='L1013'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L1014'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1015'><a href='../R/8859.html' title='Multiple refered from 5 places.'>makesockaddr</a>(<a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> sockfd, <b>struct</b> sockaddr *addr, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> addrlen, <b>int</b> proto)
<a name='L1016'><font color='red'>{</font>
<a name='L1017'>    <b>if</b> (addrlen == 0) <font color='red'>{</font>
<a name='L1018'>        <i><font color='green'>/* No address -- may be recvfrom() from known socket */</font></i>
<a name='L1019'>        Py_INCREF(Py_None);
<a name='L1020'>        <b>return</b> Py_None;
<a name='L1021'>    <font color='red'>}</font>
<a name='L1022'>
<a name='L1023'>    <b>switch</b> (addr-&gt;sa_family) <font color='red'>{</font>
<a name='L1024'>
<a name='L1025'>    <b>case</b> AF_INET:
<a name='L1026'>    <font color='red'>{</font>
<a name='L1027'>        <b>struct</b> sockaddr_in *a;
<a name='L1028'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addrobj = <a href='../S/2711.html#L948' title='Defined at 948 in Modules/socketmodule.c.'>makeipaddr</a>(addr, <b>sizeof</b>(*a));
<a name='L1029'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1030'>        <b>if</b> (addrobj) <font color='red'>{</font>
<a name='L1031'>            a = (<b>struct</b> sockaddr_in *)addr;
<a name='L1032'>            ret = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("Oi", addrobj, ntohs(a-&gt;sin_port));
<a name='L1033'>            Py_DECREF(addrobj);
<a name='L1034'>        <font color='red'>}</font>
<a name='L1035'>        <b>return</b> ret;
<a name='L1036'>    <font color='red'>}</font>
<a name='L1037'>
<a name='L1038'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>)
<a name='L1039'>    <b>case</b> <a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>:
<a name='L1040'>    <font color='red'>{</font>
<a name='L1041'>        <b>struct</b> sockaddr_un *a = (<b>struct</b> sockaddr_un *) addr;
<a name='L1042'><font color='darkred'>#ifdef</font> linux
<a name='L1043'>        <b>if</b> (a-&gt;sun_path[0] == 0) <font color='red'>{</font>  <i><font color='green'>/* Linux abstract namespace */</font></i>
<a name='L1044'>            addrlen -= <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<b>struct</b> sockaddr_un, sun_path);
<a name='L1045'>            <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(a-&gt;sun_path, addrlen);
<a name='L1046'>        <font color='red'>}</font>
<a name='L1047'>        <b>else</b>
<a name='L1048'><font color='darkred'>#endif</font> <i><font color='green'>/* linux */</font></i>
<a name='L1049'>        <font color='red'>{</font>
<a name='L1050'>            <i><font color='green'>/* regular NULL-terminated string */</font></i>
<a name='L1051'>            <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(a-&gt;sun_path);
<a name='L1052'>        <font color='red'>}</font>
<a name='L1053'>    <font color='red'>}</font>
<a name='L1054'><font color='darkred'>#endif</font> <i><font color='green'>/* AF_UNIX */</font></i>
<a name='L1055'>
<a name='L1056'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>)
<a name='L1057'>       <b>case</b> <a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>:
<a name='L1058'>       <font color='red'>{</font>
<a name='L1059'>           <b>struct</b> sockaddr_nl *a = (<b>struct</b> sockaddr_nl *) addr;
<a name='L1060'>           <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("II", a-&gt;nl_pid, a-&gt;nl_groups);
<a name='L1061'>       <font color='red'>}</font>
<a name='L1062'><font color='darkred'>#endif</font> <i><font color='green'>/* AF_NETLINK */</font></i>
<a name='L1063'>
<a name='L1064'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L1065'>    <b>case</b> AF_INET6:
<a name='L1066'>    <font color='red'>{</font>
<a name='L1067'>        <b>struct</b> sockaddr_in6 *a;
<a name='L1068'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addrobj = <a href='../S/2711.html#L948' title='Defined at 948 in Modules/socketmodule.c.'>makeipaddr</a>(addr, <b>sizeof</b>(*a));
<a name='L1069'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1070'>        <b>if</b> (addrobj) <font color='red'>{</font>
<a name='L1071'>            a = (<b>struct</b> sockaddr_in6 *)addr;
<a name='L1072'>            ret = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("Oiii",
<a name='L1073'>                                addrobj,
<a name='L1074'>                                ntohs(a-&gt;sin6_port),
<a name='L1075'>                                a-&gt;sin6_flowinfo,
<a name='L1076'>                                a-&gt;sin6_scope_id);
<a name='L1077'>            Py_DECREF(addrobj);
<a name='L1078'>        <font color='red'>}</font>
<a name='L1079'>        <b>return</b> ret;
<a name='L1080'>    <font color='red'>}</font>
<a name='L1081'><font color='darkred'>#endif</font>
<a name='L1082'>
<a name='L1083'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L383' title='Defined at 383 in Modules/socketmodule.c.'>USE_BLUETOOTH</a>
<a name='L1084'>    <b>case</b> AF_BLUETOOTH:
<a name='L1085'>        <b>switch</b> (proto) <font color='red'>{</font>
<a name='L1086'>
<a name='L1087'>        <b>case</b> <a href='../S/2711.html#L385' title='Defined at 385 in Modules/socketmodule.c.'>BTPROTO_L2CAP</a>:
<a name='L1088'>        <font color='red'>{</font>
<a name='L1089'>            <b>struct</b> <a href='../D/11264.html' title='Multiple defined in 2 places.'>sockaddr_l2</a> *a = (<b>struct</b> <a href='../D/11264.html' title='Multiple defined in 2 places.'>sockaddr_l2</a> *) addr;
<a name='L1090'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addrobj = <a href='../S/2711.html#L996' title='Defined at 996 in Modules/socketmodule.c.'>makebdaddr</a>(&amp;<a href='../D/5982.html' title='Multiple defined in 3 places.'>_BT_L2_MEMB</a>(a, bdaddr));
<a name='L1091'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1092'>            <b>if</b> (addrobj) <font color='red'>{</font>
<a name='L1093'>                ret = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("Oi",
<a name='L1094'>                                    addrobj,
<a name='L1095'>                                    <a href='../D/5982.html' title='Multiple defined in 3 places.'>_BT_L2_MEMB</a>(a, psm));
<a name='L1096'>                Py_DECREF(addrobj);
<a name='L1097'>            <font color='red'>}</font>
<a name='L1098'>            <b>return</b> ret;
<a name='L1099'>        <font color='red'>}</font>
<a name='L1100'>
<a name='L1101'>        <b>case</b> <a href='../S/2711.html#L386' title='Defined at 386 in Modules/socketmodule.c.'>BTPROTO_RFCOMM</a>:
<a name='L1102'>        <font color='red'>{</font>
<a name='L1103'>            <b>struct</b> <a href='../D/11265.html' title='Multiple defined in 2 places.'>sockaddr_rc</a> *a = (<b>struct</b> <a href='../D/11265.html' title='Multiple defined in 2 places.'>sockaddr_rc</a> *) addr;
<a name='L1104'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addrobj = <a href='../S/2711.html#L996' title='Defined at 996 in Modules/socketmodule.c.'>makebdaddr</a>(&amp;<a href='../D/5983.html' title='Multiple defined in 3 places.'>_BT_RC_MEMB</a>(a, bdaddr));
<a name='L1105'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1106'>            <b>if</b> (addrobj) <font color='red'>{</font>
<a name='L1107'>                ret = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("Oi",
<a name='L1108'>                                    addrobj,
<a name='L1109'>                                    <a href='../D/5983.html' title='Multiple defined in 3 places.'>_BT_RC_MEMB</a>(a, channel));
<a name='L1110'>                Py_DECREF(addrobj);
<a name='L1111'>            <font color='red'>}</font>
<a name='L1112'>            <b>return</b> ret;
<a name='L1113'>        <font color='red'>}</font>
<a name='L1114'>
<a name='L1115'>        <b>case</b> <a href='../S/2711.html#L387' title='Defined at 387 in Modules/socketmodule.c.'>BTPROTO_HCI</a>:
<a name='L1116'>        <font color='red'>{</font>
<a name='L1117'>            <b>struct</b> <a href='../S/2711.html#L399' title='Defined at 399 in Modules/socketmodule.c.'>sockaddr_hci</a> *a = (<b>struct</b> <a href='../S/2711.html#L399' title='Defined at 399 in Modules/socketmodule.c.'>sockaddr_hci</a> *) addr;
<a name='L1118'><font color='darkred'>#if</font> <b>defined</b>(__NetBSD__) || <b>defined</b>(__DragonFly__)
<a name='L1119'>            <b>return</b> <a href='../S/2711.html#L996' title='Defined at 996 in Modules/socketmodule.c.'>makebdaddr</a>(&amp;<a href='../D/5981.html' title='Multiple defined in 3 places.'>_BT_HCI_MEMB</a>(a, bdaddr));
<a name='L1120'><font color='darkred'>#else</font>
<a name='L1121'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1122'>            ret = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("i", <a href='../D/5981.html' title='Multiple defined in 3 places.'>_BT_HCI_MEMB</a>(a, dev));
<a name='L1123'>            <b>return</b> ret;
<a name='L1124'><font color='darkred'>#endif</font>
<a name='L1125'>        <font color='red'>}</font>
<a name='L1126'>
<a name='L1127'><font color='darkred'>#if</font> !<b>defined</b>(__FreeBSD__)
<a name='L1128'>        <b>case</b> BTPROTO_SCO:
<a name='L1129'>        <font color='red'>{</font>
<a name='L1130'>            <b>struct</b> <a href='../S/2711.html#L400' title='Defined at 400 in Modules/socketmodule.c.'>sockaddr_sco</a> *a = (<b>struct</b> <a href='../S/2711.html#L400' title='Defined at 400 in Modules/socketmodule.c.'>sockaddr_sco</a> *) addr;
<a name='L1131'>            <b>return</b> <a href='../S/2711.html#L996' title='Defined at 996 in Modules/socketmodule.c.'>makebdaddr</a>(&amp;<a href='../D/5984.html' title='Multiple defined in 2 places.'>_BT_SCO_MEMB</a>(a, bdaddr));
<a name='L1132'>        <font color='red'>}</font>
<a name='L1133'><font color='darkred'>#endif</font>
<a name='L1134'>
<a name='L1135'>        <b>default</b>:
<a name='L1136'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1137'>                            "Unknown Bluetooth protocol");
<a name='L1138'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1139'>        <font color='red'>}</font>
<a name='L1140'><font color='darkred'>#endif</font>
<a name='L1141'>
<a name='L1142'><font color='darkred'>#if</font> <b>defined</b>(HAVE_NETPACKET_PACKET_H) &amp;&amp; <b>defined</b>(SIOCGIFNAME)
<a name='L1143'>    <b>case</b> AF_PACKET:
<a name='L1144'>    <font color='red'>{</font>
<a name='L1145'>        <b>struct</b> sockaddr_ll *a = (<b>struct</b> sockaddr_ll *)addr;
<a name='L1146'>        <b>char</b> *ifname = "";
<a name='L1147'>        <b>struct</b> ifreq ifr;
<a name='L1148'>        <i><font color='green'>/* need to look up interface name give index */</font></i>
<a name='L1149'>        <b>if</b> (a-&gt;sll_ifindex) <font color='red'>{</font>
<a name='L1150'>            ifr.ifr_ifindex = a-&gt;sll_ifindex;
<a name='L1151'>            <b>if</b> (ioctl(sockfd, SIOCGIFNAME, &amp;ifr) == 0)
<a name='L1152'>                ifname = ifr.ifr_name;
<a name='L1153'>        <font color='red'>}</font>
<a name='L1154'>        <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("shbhy#",
<a name='L1155'>                             ifname,
<a name='L1156'>                             ntohs(a-&gt;sll_protocol),
<a name='L1157'>                             a-&gt;sll_pkttype,
<a name='L1158'>                             a-&gt;sll_hatype,
<a name='L1159'>                             a-&gt;sll_addr,
<a name='L1160'>                             a-&gt;sll_halen);
<a name='L1161'>    <font color='red'>}</font>
<a name='L1162'><font color='darkred'>#endif</font>
<a name='L1163'>
<a name='L1164'><font color='darkred'>#ifdef</font> HAVE_LINUX_TIPC_H
<a name='L1165'>    <b>case</b> AF_TIPC:
<a name='L1166'>    <font color='red'>{</font>
<a name='L1167'>        <b>struct</b> sockaddr_tipc *a = (<b>struct</b> sockaddr_tipc *) addr;
<a name='L1168'>        <b>if</b> (a-&gt;addrtype == TIPC_ADDR_NAMESEQ) <font color='red'>{</font>
<a name='L1169'>            <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("IIIII",
<a name='L1170'>                            a-&gt;addrtype,
<a name='L1171'>                            a-&gt;addr.nameseq.type,
<a name='L1172'>                            a-&gt;addr.nameseq.lower,
<a name='L1173'>                            a-&gt;addr.nameseq.upper,
<a name='L1174'>                            a-&gt;scope);
<a name='L1175'>        <font color='red'>}</font> <b>else</b> <b>if</b> (a-&gt;addrtype == TIPC_ADDR_NAME) <font color='red'>{</font>
<a name='L1176'>            <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("IIIII",
<a name='L1177'>                            a-&gt;addrtype,
<a name='L1178'>                            a-&gt;addr.name.name.type,
<a name='L1179'>                            a-&gt;addr.name.name.instance,
<a name='L1180'>                            a-&gt;addr.name.name.instance,
<a name='L1181'>                            a-&gt;scope);
<a name='L1182'>        <font color='red'>}</font> <b>else</b> <b>if</b> (a-&gt;addrtype == TIPC_ADDR_ID) <font color='red'>{</font>
<a name='L1183'>            <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("IIIII",
<a name='L1184'>                            a-&gt;addrtype,
<a name='L1185'>                            a-&gt;addr.id.<a href='../S/543.html#L17' title='Defined at 17 in Include/node.h.'>node</a>,
<a name='L1186'>                            a-&gt;addr.id.ref,
<a name='L1187'>                            0,
<a name='L1188'>                            a-&gt;scope);
<a name='L1189'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1190'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1191'>                            "Invalid address type");
<a name='L1192'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1193'>        <font color='red'>}</font>
<a name='L1194'>    <font color='red'>}</font>
<a name='L1195'><font color='darkred'>#endif</font>
<a name='L1196'>
<a name='L1197'>    <i><font color='green'>/* More cases here... */</font></i>
<a name='L1198'>
<a name='L1199'>    <b>default</b>:
<a name='L1200'>        <i><font color='green'>/* If we don't know the address family, don't raise an</font></i>
<a name='L1201'><i><font color='green'>           exception -- return it as an (int, bytes) tuple. */</font></i>
<a name='L1202'>        <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("iy#",
<a name='L1203'>                             addr-&gt;sa_family,
<a name='L1204'>                             addr-&gt;sa_data,
<a name='L1205'>                             <b>sizeof</b>(addr-&gt;sa_data));
<a name='L1206'>
<a name='L1207'>    <font color='red'>}</font>
<a name='L1208'><font color='red'>}</font>
<a name='L1209'>
<a name='L1210'>
<a name='L1211'><i><font color='green'>/* Parse a socket address argument according to the socket object's</font></i>
<a name='L1212'><i><font color='green'>   address family.  Return 1 if the address was in the proper format,</font></i>
<a name='L1213'><i><font color='green'>   0 of not.  The address is returned through addr_ret, its length</font></i>
<a name='L1214'><i><font color='green'>   through len_ret. */</font></i>
<a name='L1215'>
<a name='L1216'><b>static</b> <b>int</b>
<a name='L1217'><a href='../R/8164.html' title='Multiple refered from 4 places.'>getsockaddrarg</a>(PySocketSockObject *s, PyObject *args,
<a name='L1218'>               <b>struct</b> sockaddr *addr_ret, <b>int</b> *len_ret)
<a name='L1219'><font color='red'>{</font>
<a name='L1220'>    <b>switch</b> (s-&gt;sock_family) <font color='red'>{</font>
<a name='L1221'>
<a name='L1222'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>)
<a name='L1223'>    <b>case</b> <a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>:
<a name='L1224'>    <font color='red'>{</font>
<a name='L1225'>        <b>struct</b> sockaddr_un* addr;
<a name='L1226'>        <b>char</b> *path;
<a name='L1227'>        <b>int</b> len;
<a name='L1228'>        <b>if</b> (!<a href='../S/541.html#L15' title='Defined at 15 in Include/modsupport.h.'>PyArg_Parse</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "s#", &amp;path, &amp;len))
<a name='L1229'>            <b>return</b> 0;
<a name='L1230'>
<a name='L1231'>        addr = (<b>struct</b> sockaddr_un*)addr_ret;
<a name='L1232'><font color='darkred'>#ifdef</font> linux
<a name='L1233'>        <b>if</b> (len &gt; 0 &amp;&amp; path[0] == 0) <font color='red'>{</font>
<a name='L1234'>            <i><font color='green'>/* Linux abstract namespace extension */</font></i>
<a name='L1235'>            <b>if</b> (len &gt; <b>sizeof</b> addr-&gt;sun_path) <font color='red'>{</font>
<a name='L1236'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L1237'>                                "AF_UNIX path too long");
<a name='L1238'>                <b>return</b> 0;
<a name='L1239'>            <font color='red'>}</font>
<a name='L1240'>        <font color='red'>}</font>
<a name='L1241'>        <b>else</b>
<a name='L1242'><font color='darkred'>#endif</font> <i><font color='green'>/* linux */</font></i>
<a name='L1243'>        <font color='red'>{</font>
<a name='L1244'>            <i><font color='green'>/* regular NULL-terminated string */</font></i>
<a name='L1245'>            <b>if</b> (len &gt;= <b>sizeof</b> addr-&gt;sun_path) <font color='red'>{</font>
<a name='L1246'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L1247'>                                "AF_UNIX path too long");
<a name='L1248'>                <b>return</b> 0;
<a name='L1249'>            <font color='red'>}</font>
<a name='L1250'>            addr-&gt;sun_path[len] = 0;
<a name='L1251'>        <font color='red'>}</font>
<a name='L1252'>        addr-&gt;sun_family = s-&gt;sock_family;
<a name='L1253'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(addr-&gt;sun_path, path, len);
<a name='L1254'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>)
<a name='L1255'>        *len_ret = <b>sizeof</b>(*addr);
<a name='L1256'><font color='darkred'>#else</font>
<a name='L1257'>        *len_ret = len + <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<b>struct</b> sockaddr_un, sun_path);
<a name='L1258'><font color='darkred'>#endif</font>
<a name='L1259'>        <b>return</b> 1;
<a name='L1260'>    <font color='red'>}</font>
<a name='L1261'><font color='darkred'>#endif</font> <i><font color='green'>/* AF_UNIX */</font></i>
<a name='L1262'>
<a name='L1263'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>)
<a name='L1264'>    <b>case</b> <a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>:
<a name='L1265'>    <font color='red'>{</font>
<a name='L1266'>        <b>struct</b> sockaddr_nl* addr;
<a name='L1267'>        <b>int</b> pid, groups;
<a name='L1268'>        addr = (<b>struct</b> sockaddr_nl *)addr_ret;
<a name='L1269'>        <b>if</b> (!PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L1270'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1271'>                PyExc_TypeError,
<a name='L1272'>                "getsockaddrarg: "
<a name='L1273'>                "AF_NETLINK address must be tuple, not %.500s",
<a name='L1274'>                <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)-&gt;tp_name);
<a name='L1275'>            <b>return</b> 0;
<a name='L1276'>        <font color='red'>}</font>
<a name='L1277'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "II:getsockaddrarg", &amp;pid, &amp;groups))
<a name='L1278'>            <b>return</b> 0;
<a name='L1279'>        addr-&gt;nl_family = <a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>;
<a name='L1280'>        addr-&gt;nl_pid = pid;
<a name='L1281'>        addr-&gt;nl_groups = groups;
<a name='L1282'>        *len_ret = <b>sizeof</b>(*addr);
<a name='L1283'>        <b>return</b> 1;
<a name='L1284'>    <font color='red'>}</font>
<a name='L1285'><font color='darkred'>#endif</font>
<a name='L1286'>
<a name='L1287'>    <b>case</b> AF_INET:
<a name='L1288'>    <font color='red'>{</font>
<a name='L1289'>        <b>struct</b> sockaddr_in* addr;
<a name='L1290'>        <b>char</b> *host;
<a name='L1291'>        <b>int</b> port, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1292'>        <b>if</b> (!PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L1293'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1294'>                PyExc_TypeError,
<a name='L1295'>                "getsockaddrarg: "
<a name='L1296'>                "AF_INET address must be tuple, not %.500s",
<a name='L1297'>                <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)-&gt;tp_name);
<a name='L1298'>            <b>return</b> 0;
<a name='L1299'>        <font color='red'>}</font>
<a name='L1300'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "eti:getsockaddrarg",
<a name='L1301'>                              "idna", &amp;host, &amp;port))
<a name='L1302'>            <b>return</b> 0;
<a name='L1303'>        addr=(<b>struct</b> sockaddr_in*)addr_ret;
<a name='L1304'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2711.html#L822' title='Defined at 822 in Modules/socketmodule.c.'>setipaddr</a>(host, (<b>struct</b> sockaddr *)addr,
<a name='L1305'>                           <b>sizeof</b>(*addr),  AF_INET);
<a name='L1306'>        <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(host);
<a name='L1307'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt; 0)
<a name='L1308'>            <b>return</b> 0;
<a name='L1309'>        <b>if</b> (port &lt; 0 || port &gt; 0xffff) <font color='red'>{</font>
<a name='L1310'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(
<a name='L1311'>                PyExc_OverflowError,
<a name='L1312'>                "getsockaddrarg: port must be 0-65535.");
<a name='L1313'>            <b>return</b> 0;
<a name='L1314'>        <font color='red'>}</font>
<a name='L1315'>        addr-&gt;sin_family = AF_INET;
<a name='L1316'>        addr-&gt;sin_port = htons((<b>short</b>)port);
<a name='L1317'>        *len_ret = <b>sizeof</b> *addr;
<a name='L1318'>        <b>return</b> 1;
<a name='L1319'>    <font color='red'>}</font>
<a name='L1320'>
<a name='L1321'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L1322'>    <b>case</b> AF_INET6:
<a name='L1323'>    <font color='red'>{</font>
<a name='L1324'>        <b>struct</b> sockaddr_in6* addr;
<a name='L1325'>        <b>char</b> *host;
<a name='L1326'>        <b>int</b> port, flowinfo, scope_id, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1327'>        flowinfo = scope_id = 0;
<a name='L1328'>        <b>if</b> (!PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L1329'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1330'>                PyExc_TypeError,
<a name='L1331'>                "getsockaddrarg: "
<a name='L1332'>                "AF_INET6 address must be tuple, not %.500s",
<a name='L1333'>                <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)-&gt;tp_name);
<a name='L1334'>            <b>return</b> 0;
<a name='L1335'>        <font color='red'>}</font>
<a name='L1336'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "eti|ii",
<a name='L1337'>                              "idna", &amp;host, &amp;port, &amp;flowinfo,
<a name='L1338'>                              &amp;scope_id)) <font color='red'>{</font>
<a name='L1339'>            <b>return</b> 0;
<a name='L1340'>        <font color='red'>}</font>
<a name='L1341'>        addr = (<b>struct</b> sockaddr_in6*)addr_ret;
<a name='L1342'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2711.html#L822' title='Defined at 822 in Modules/socketmodule.c.'>setipaddr</a>(host, (<b>struct</b> sockaddr *)addr,
<a name='L1343'>                           <b>sizeof</b>(*addr), AF_INET6);
<a name='L1344'>        <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(host);
<a name='L1345'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt; 0)
<a name='L1346'>            <b>return</b> 0;
<a name='L1347'>        <b>if</b> (port &lt; 0 || port &gt; 0xffff) <font color='red'>{</font>
<a name='L1348'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(
<a name='L1349'>                PyExc_OverflowError,
<a name='L1350'>                "getsockaddrarg: port must be 0-65535.");
<a name='L1351'>            <b>return</b> 0;
<a name='L1352'>        <font color='red'>}</font>
<a name='L1353'>        addr-&gt;sin6_family = s-&gt;sock_family;
<a name='L1354'>        addr-&gt;sin6_port = htons((<b>short</b>)port);
<a name='L1355'>        addr-&gt;sin6_flowinfo = flowinfo;
<a name='L1356'>        addr-&gt;sin6_scope_id = scope_id;
<a name='L1357'>        *len_ret = <b>sizeof</b> *addr;
<a name='L1358'>        <b>return</b> 1;
<a name='L1359'>    <font color='red'>}</font>
<a name='L1360'><font color='darkred'>#endif</font>
<a name='L1361'>
<a name='L1362'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L383' title='Defined at 383 in Modules/socketmodule.c.'>USE_BLUETOOTH</a>
<a name='L1363'>    <b>case</b> AF_BLUETOOTH:
<a name='L1364'>    <font color='red'>{</font>
<a name='L1365'>        <b>switch</b> (s-&gt;sock_proto) <font color='red'>{</font>
<a name='L1366'>        <b>case</b> <a href='../S/2711.html#L385' title='Defined at 385 in Modules/socketmodule.c.'>BTPROTO_L2CAP</a>:
<a name='L1367'>        <font color='red'>{</font>
<a name='L1368'>            <b>struct</b> <a href='../D/11264.html' title='Multiple defined in 2 places.'>sockaddr_l2</a> *addr;
<a name='L1369'>            <b>char</b> *straddr;
<a name='L1370'>
<a name='L1371'>            addr = (<b>struct</b> <a href='../D/11264.html' title='Multiple defined in 2 places.'>sockaddr_l2</a> *)addr_ret;
<a name='L1372'>            memset(addr, 0, <b>sizeof</b>(<b>struct</b> <a href='../D/11264.html' title='Multiple defined in 2 places.'>sockaddr_l2</a>));
<a name='L1373'>            <a href='../D/5982.html' title='Multiple defined in 3 places.'>_BT_L2_MEMB</a>(addr, family) = AF_BLUETOOTH;
<a name='L1374'>            <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "si", &amp;straddr,
<a name='L1375'>                                  &amp;<a href='../D/5982.html' title='Multiple defined in 3 places.'>_BT_L2_MEMB</a>(addr, psm))) <font color='red'>{</font>
<a name='L1376'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrarg: "
<a name='L1377'>                                "wrong format");
<a name='L1378'>                <b>return</b> 0;
<a name='L1379'>            <font color='red'>}</font>
<a name='L1380'>            <b>if</b> (<a href='../S/2711.html#L969' title='Defined at 969 in Modules/socketmodule.c.'>setbdaddr</a>(straddr, &amp;<a href='../D/5982.html' title='Multiple defined in 3 places.'>_BT_L2_MEMB</a>(addr, bdaddr)) &lt; 0)
<a name='L1381'>                <b>return</b> 0;
<a name='L1382'>
<a name='L1383'>            *len_ret = <b>sizeof</b> *addr;
<a name='L1384'>            <b>return</b> 1;
<a name='L1385'>        <font color='red'>}</font>
<a name='L1386'>        <b>case</b> <a href='../S/2711.html#L386' title='Defined at 386 in Modules/socketmodule.c.'>BTPROTO_RFCOMM</a>:
<a name='L1387'>        <font color='red'>{</font>
<a name='L1388'>            <b>struct</b> <a href='../D/11265.html' title='Multiple defined in 2 places.'>sockaddr_rc</a> *addr;
<a name='L1389'>            <b>char</b> *straddr;
<a name='L1390'>
<a name='L1391'>            addr = (<b>struct</b> <a href='../D/11265.html' title='Multiple defined in 2 places.'>sockaddr_rc</a> *)addr_ret;
<a name='L1392'>            <a href='../D/5983.html' title='Multiple defined in 3 places.'>_BT_RC_MEMB</a>(addr, family) = AF_BLUETOOTH;
<a name='L1393'>            <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "si", &amp;straddr,
<a name='L1394'>                                  &amp;<a href='../D/5983.html' title='Multiple defined in 3 places.'>_BT_RC_MEMB</a>(addr, channel))) <font color='red'>{</font>
<a name='L1395'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrarg: "
<a name='L1396'>                                "wrong format");
<a name='L1397'>                <b>return</b> 0;
<a name='L1398'>            <font color='red'>}</font>
<a name='L1399'>            <b>if</b> (<a href='../S/2711.html#L969' title='Defined at 969 in Modules/socketmodule.c.'>setbdaddr</a>(straddr, &amp;<a href='../D/5983.html' title='Multiple defined in 3 places.'>_BT_RC_MEMB</a>(addr, bdaddr)) &lt; 0)
<a name='L1400'>                <b>return</b> 0;
<a name='L1401'>
<a name='L1402'>            *len_ret = <b>sizeof</b> *addr;
<a name='L1403'>            <b>return</b> 1;
<a name='L1404'>        <font color='red'>}</font>
<a name='L1405'>        <b>case</b> <a href='../S/2711.html#L387' title='Defined at 387 in Modules/socketmodule.c.'>BTPROTO_HCI</a>:
<a name='L1406'>        <font color='red'>{</font>
<a name='L1407'>            <b>struct</b> <a href='../S/2711.html#L399' title='Defined at 399 in Modules/socketmodule.c.'>sockaddr_hci</a> *addr = (<b>struct</b> <a href='../S/2711.html#L399' title='Defined at 399 in Modules/socketmodule.c.'>sockaddr_hci</a> *)addr_ret;
<a name='L1408'><font color='darkred'>#if</font> <b>defined</b>(__NetBSD__) || <b>defined</b>(__DragonFly__)
<a name='L1409'>                        <b>char</b> *straddr = PyBytes_AS_STRING(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L1410'>
<a name='L1411'>                        <a href='../D/5981.html' title='Multiple defined in 3 places.'>_BT_HCI_MEMB</a>(addr, family) = AF_BLUETOOTH;
<a name='L1412'>            <b>if</b> (straddr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1413'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrarg: "
<a name='L1414'>                    "wrong format");
<a name='L1415'>                <b>return</b> 0;
<a name='L1416'>            <font color='red'>}</font>
<a name='L1417'>            <b>if</b> (<a href='../S/2711.html#L969' title='Defined at 969 in Modules/socketmodule.c.'>setbdaddr</a>(straddr, &amp;<a href='../D/5981.html' title='Multiple defined in 3 places.'>_BT_HCI_MEMB</a>(addr, bdaddr)) &lt; 0)
<a name='L1418'>                <b>return</b> 0;
<a name='L1419'><font color='darkred'>#else</font>
<a name='L1420'>            <a href='../D/5981.html' title='Multiple defined in 3 places.'>_BT_HCI_MEMB</a>(addr, family) = AF_BLUETOOTH;
<a name='L1421'>            <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "i", &amp;<a href='../D/5981.html' title='Multiple defined in 3 places.'>_BT_HCI_MEMB</a>(addr, dev))) <font color='red'>{</font>
<a name='L1422'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrarg: "
<a name='L1423'>                                "wrong format");
<a name='L1424'>                <b>return</b> 0;
<a name='L1425'>            <font color='red'>}</font>
<a name='L1426'><font color='darkred'>#endif</font>
<a name='L1427'>            *len_ret = <b>sizeof</b> *addr;
<a name='L1428'>            <b>return</b> 1;
<a name='L1429'>        <font color='red'>}</font>
<a name='L1430'><font color='darkred'>#if</font> !<b>defined</b>(__FreeBSD__)
<a name='L1431'>        <b>case</b> BTPROTO_SCO:
<a name='L1432'>        <font color='red'>{</font>
<a name='L1433'>            <b>struct</b> <a href='../S/2711.html#L400' title='Defined at 400 in Modules/socketmodule.c.'>sockaddr_sco</a> *addr;
<a name='L1434'>            <b>char</b> *straddr;
<a name='L1435'>
<a name='L1436'>            addr = (<b>struct</b> <a href='../S/2711.html#L400' title='Defined at 400 in Modules/socketmodule.c.'>sockaddr_sco</a> *)addr_ret;
<a name='L1437'>            <a href='../D/5984.html' title='Multiple defined in 2 places.'>_BT_SCO_MEMB</a>(addr, family) = AF_BLUETOOTH;
<a name='L1438'>            <b>if</b> (!PyBytes_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L1439'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrarg: "
<a name='L1440'>                                "wrong format");
<a name='L1441'>                <b>return</b> 0;
<a name='L1442'>            <font color='red'>}</font>
<a name='L1443'>            straddr = PyBytes_AS_STRING(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L1444'>            <b>if</b> (<a href='../S/2711.html#L969' title='Defined at 969 in Modules/socketmodule.c.'>setbdaddr</a>(straddr, &amp;<a href='../D/5984.html' title='Multiple defined in 2 places.'>_BT_SCO_MEMB</a>(addr, bdaddr)) &lt; 0)
<a name='L1445'>                <b>return</b> 0;
<a name='L1446'>
<a name='L1447'>            *len_ret = <b>sizeof</b> *addr;
<a name='L1448'>            <b>return</b> 1;
<a name='L1449'>        <font color='red'>}</font>
<a name='L1450'><font color='darkred'>#endif</font>
<a name='L1451'>        <b>default</b>:
<a name='L1452'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrarg: unknown Bluetooth protocol");
<a name='L1453'>            <b>return</b> 0;
<a name='L1454'>        <font color='red'>}</font>
<a name='L1455'>    <font color='red'>}</font>
<a name='L1456'><font color='darkred'>#endif</font>
<a name='L1457'>
<a name='L1458'><font color='darkred'>#if</font> <b>defined</b>(HAVE_NETPACKET_PACKET_H) &amp;&amp; <b>defined</b>(SIOCGIFINDEX)
<a name='L1459'>    <b>case</b> AF_PACKET:
<a name='L1460'>    <font color='red'>{</font>
<a name='L1461'>        <b>struct</b> sockaddr_ll* addr;
<a name='L1462'>        <b>struct</b> ifreq ifr;
<a name='L1463'>        <b>char</b> *interfaceName;
<a name='L1464'>        <b>int</b> protoNumber;
<a name='L1465'>        <b>int</b> hatype = 0;
<a name='L1466'>        <b>int</b> pkttype = 0;
<a name='L1467'>        <b>char</b> *haddr = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1468'>        <b>unsigned</b> <b>int</b> halen = 0;
<a name='L1469'>
<a name='L1470'>        <b>if</b> (!PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L1471'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1472'>                PyExc_TypeError,
<a name='L1473'>                "getsockaddrarg: "
<a name='L1474'>                "AF_PACKET address must be tuple, not %.500s",
<a name='L1475'>                <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)-&gt;tp_name);
<a name='L1476'>            <b>return</b> 0;
<a name='L1477'>        <font color='red'>}</font>
<a name='L1478'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "si|iiy#", &amp;interfaceName,
<a name='L1479'>                              &amp;protoNumber, &amp;pkttype, &amp;hatype,
<a name='L1480'>                              &amp;haddr, &amp;halen))
<a name='L1481'>            <b>return</b> 0;
<a name='L1482'>        strncpy(ifr.ifr_name, interfaceName, <b>sizeof</b>(ifr.ifr_name));
<a name='L1483'>        ifr.ifr_name[(<b>sizeof</b>(ifr.ifr_name))-1] = '\0';
<a name='L1484'>        <b>if</b> (ioctl(s-&gt;sock_fd, SIOCGIFINDEX, &amp;ifr) &lt; 0) <font color='red'>{</font>
<a name='L1485'>            s-&gt;errorhandler();
<a name='L1486'>            <b>return</b> 0;
<a name='L1487'>        <font color='red'>}</font>
<a name='L1488'>        <b>if</b> (halen &gt; 8) <font color='red'>{</font>
<a name='L1489'>          <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1490'>                          "Hardware address must be 8 bytes or less");
<a name='L1491'>          <b>return</b> 0;
<a name='L1492'>        <font color='red'>}</font>
<a name='L1493'>        <b>if</b> (protoNumber &lt; 0 || protoNumber &gt; 0xffff) <font color='red'>{</font>
<a name='L1494'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(
<a name='L1495'>                PyExc_OverflowError,
<a name='L1496'>                "getsockaddrarg: protoNumber must be 0-65535.");
<a name='L1497'>            <b>return</b> 0;
<a name='L1498'>        <font color='red'>}</font>
<a name='L1499'>        addr = (<b>struct</b> sockaddr_ll*)addr_ret;
<a name='L1500'>        addr-&gt;sll_family = AF_PACKET;
<a name='L1501'>        addr-&gt;sll_protocol = htons((<b>short</b>)protoNumber);
<a name='L1502'>        addr-&gt;sll_ifindex = ifr.ifr_ifindex;
<a name='L1503'>        addr-&gt;sll_pkttype = pkttype;
<a name='L1504'>        addr-&gt;sll_hatype = hatype;
<a name='L1505'>        <b>if</b> (halen != 0) <font color='red'>{</font>
<a name='L1506'>          <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;addr-&gt;sll_addr, haddr, halen);
<a name='L1507'>        <font color='red'>}</font>
<a name='L1508'>        addr-&gt;sll_halen = halen;
<a name='L1509'>        *len_ret = <b>sizeof</b> *addr;
<a name='L1510'>        <b>return</b> 1;
<a name='L1511'>    <font color='red'>}</font>
<a name='L1512'><font color='darkred'>#endif</font>
<a name='L1513'>
<a name='L1514'><font color='darkred'>#ifdef</font> HAVE_LINUX_TIPC_H
<a name='L1515'>    <b>case</b> AF_TIPC:
<a name='L1516'>    <font color='red'>{</font>
<a name='L1517'>        <b>unsigned</b> <b>int</b> atype, <a href='../S/2333.html#L113' title='Defined at 113 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v1</a>, v2, v3;
<a name='L1518'>        <b>unsigned</b> <b>int</b> scope = TIPC_CLUSTER_SCOPE;
<a name='L1519'>        <b>struct</b> sockaddr_tipc *addr;
<a name='L1520'>
<a name='L1521'>        <b>if</b> (!PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L1522'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1523'>                PyExc_TypeError,
<a name='L1524'>                "getsockaddrarg: "
<a name='L1525'>                "AF_TIPC address must be tuple, not %.500s",
<a name='L1526'>                <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)-&gt;tp_name);
<a name='L1527'>            <b>return</b> 0;
<a name='L1528'>        <font color='red'>}</font>
<a name='L1529'>
<a name='L1530'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>,
<a name='L1531'>                                "IIII|I;Invalid TIPC address format",
<a name='L1532'>                                &amp;atype, &amp;<a href='../S/2333.html#L113' title='Defined at 113 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v1</a>, &amp;v2, &amp;v3, &amp;scope))
<a name='L1533'>            <b>return</b> 0;
<a name='L1534'>
<a name='L1535'>        addr = (<b>struct</b> sockaddr_tipc *) addr_ret;
<a name='L1536'>        memset(addr, 0, <b>sizeof</b>(<b>struct</b> sockaddr_tipc));
<a name='L1537'>
<a name='L1538'>        addr-&gt;family = AF_TIPC;
<a name='L1539'>        addr-&gt;scope = scope;
<a name='L1540'>        addr-&gt;addrtype = atype;
<a name='L1541'>
<a name='L1542'>        <b>if</b> (atype == TIPC_ADDR_NAMESEQ) <font color='red'>{</font>
<a name='L1543'>            addr-&gt;addr.nameseq.type = <a href='../S/2333.html#L113' title='Defined at 113 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v1</a>;
<a name='L1544'>            addr-&gt;addr.nameseq.lower = v2;
<a name='L1545'>            addr-&gt;addr.nameseq.upper = v3;
<a name='L1546'>        <font color='red'>}</font> <b>else</b> <b>if</b> (atype == TIPC_ADDR_NAME) <font color='red'>{</font>
<a name='L1547'>            addr-&gt;addr.name.name.type = <a href='../S/2333.html#L113' title='Defined at 113 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v1</a>;
<a name='L1548'>            addr-&gt;addr.name.name.instance = v2;
<a name='L1549'>        <font color='red'>}</font> <b>else</b> <b>if</b> (atype == TIPC_ADDR_ID) <font color='red'>{</font>
<a name='L1550'>            addr-&gt;addr.id.<a href='../S/543.html#L17' title='Defined at 17 in Include/node.h.'>node</a> = <a href='../S/2333.html#L113' title='Defined at 113 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v1</a>;
<a name='L1551'>            addr-&gt;addr.id.ref = v2;
<a name='L1552'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1553'>            <i><font color='green'>/* Shouldn't happen */</font></i>
<a name='L1554'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "Invalid address type");
<a name='L1555'>            <b>return</b> 0;
<a name='L1556'>        <font color='red'>}</font>
<a name='L1557'>
<a name='L1558'>        *len_ret = <b>sizeof</b>(*addr);
<a name='L1559'>
<a name='L1560'>        <b>return</b> 1;
<a name='L1561'>    <font color='red'>}</font>
<a name='L1562'><font color='darkred'>#endif</font>
<a name='L1563'>
<a name='L1564'>    <i><font color='green'>/* More cases here... */</font></i>
<a name='L1565'>
<a name='L1566'>    <b>default</b>:
<a name='L1567'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrarg: bad family");
<a name='L1568'>        <b>return</b> 0;
<a name='L1569'>
<a name='L1570'>    <font color='red'>}</font>
<a name='L1571'><font color='red'>}</font>
<a name='L1572'>
<a name='L1573'>
<a name='L1574'><i><font color='green'>/* Get the address length according to the socket object's address family.</font></i>
<a name='L1575'><i><font color='green'>   Return 1 if the family is known, 0 otherwise.  The length is returned</font></i>
<a name='L1576'><i><font color='green'>   through len_ret. */</font></i>
<a name='L1577'>
<a name='L1578'><b>static</b> <b>int</b>
<a name='L1579'><a href='../R/8165.html' title='Multiple refered from 4 places.'>getsockaddrlen</a>(PySocketSockObject *s, <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> *len_ret)
<a name='L1580'><font color='red'>{</font>
<a name='L1581'>    <b>switch</b> (s-&gt;sock_family) <font color='red'>{</font>
<a name='L1582'>
<a name='L1583'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>)
<a name='L1584'>    <b>case</b> <a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>:
<a name='L1585'>    <font color='red'>{</font>
<a name='L1586'>        *len_ret = <b>sizeof</b> (<b>struct</b> sockaddr_un);
<a name='L1587'>        <b>return</b> 1;
<a name='L1588'>    <font color='red'>}</font>
<a name='L1589'><font color='darkred'>#endif</font> <i><font color='green'>/* AF_UNIX */</font></i>
<a name='L1590'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>)
<a name='L1591'>       <b>case</b> <a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>:
<a name='L1592'>       <font color='red'>{</font>
<a name='L1593'>           *len_ret = <b>sizeof</b> (<b>struct</b> sockaddr_nl);
<a name='L1594'>           <b>return</b> 1;
<a name='L1595'>       <font color='red'>}</font>
<a name='L1596'><font color='darkred'>#endif</font>
<a name='L1597'>
<a name='L1598'>    <b>case</b> AF_INET:
<a name='L1599'>    <font color='red'>{</font>
<a name='L1600'>        *len_ret = <b>sizeof</b> (<b>struct</b> sockaddr_in);
<a name='L1601'>        <b>return</b> 1;
<a name='L1602'>    <font color='red'>}</font>
<a name='L1603'>
<a name='L1604'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L1605'>    <b>case</b> AF_INET6:
<a name='L1606'>    <font color='red'>{</font>
<a name='L1607'>        *len_ret = <b>sizeof</b> (<b>struct</b> sockaddr_in6);
<a name='L1608'>        <b>return</b> 1;
<a name='L1609'>    <font color='red'>}</font>
<a name='L1610'><font color='darkred'>#endif</font>
<a name='L1611'>
<a name='L1612'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L383' title='Defined at 383 in Modules/socketmodule.c.'>USE_BLUETOOTH</a>
<a name='L1613'>    <b>case</b> AF_BLUETOOTH:
<a name='L1614'>    <font color='red'>{</font>
<a name='L1615'>        <b>switch</b>(s-&gt;sock_proto)
<a name='L1616'>        <font color='red'>{</font>
<a name='L1617'>
<a name='L1618'>        <b>case</b> <a href='../S/2711.html#L385' title='Defined at 385 in Modules/socketmodule.c.'>BTPROTO_L2CAP</a>:
<a name='L1619'>            *len_ret = <b>sizeof</b> (<b>struct</b> <a href='../D/11264.html' title='Multiple defined in 2 places.'>sockaddr_l2</a>);
<a name='L1620'>            <b>return</b> 1;
<a name='L1621'>        <b>case</b> <a href='../S/2711.html#L386' title='Defined at 386 in Modules/socketmodule.c.'>BTPROTO_RFCOMM</a>:
<a name='L1622'>            *len_ret = <b>sizeof</b> (<b>struct</b> <a href='../D/11265.html' title='Multiple defined in 2 places.'>sockaddr_rc</a>);
<a name='L1623'>            <b>return</b> 1;
<a name='L1624'>        <b>case</b> <a href='../S/2711.html#L387' title='Defined at 387 in Modules/socketmodule.c.'>BTPROTO_HCI</a>:
<a name='L1625'>            *len_ret = <b>sizeof</b> (<b>struct</b> <a href='../S/2711.html#L399' title='Defined at 399 in Modules/socketmodule.c.'>sockaddr_hci</a>);
<a name='L1626'>            <b>return</b> 1;
<a name='L1627'><font color='darkred'>#if</font> !<b>defined</b>(__FreeBSD__)
<a name='L1628'>        <b>case</b> BTPROTO_SCO:
<a name='L1629'>            *len_ret = <b>sizeof</b> (<b>struct</b> <a href='../S/2711.html#L400' title='Defined at 400 in Modules/socketmodule.c.'>sockaddr_sco</a>);
<a name='L1630'>            <b>return</b> 1;
<a name='L1631'><font color='darkred'>#endif</font>
<a name='L1632'>        <b>default</b>:
<a name='L1633'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrlen: "
<a name='L1634'>                            "unknown BT protocol");
<a name='L1635'>            <b>return</b> 0;
<a name='L1636'>
<a name='L1637'>        <font color='red'>}</font>
<a name='L1638'>    <font color='red'>}</font>
<a name='L1639'><font color='darkred'>#endif</font>
<a name='L1640'>
<a name='L1641'><font color='darkred'>#ifdef</font> HAVE_NETPACKET_PACKET_H
<a name='L1642'>    <b>case</b> AF_PACKET:
<a name='L1643'>    <font color='red'>{</font>
<a name='L1644'>        *len_ret = <b>sizeof</b> (<b>struct</b> sockaddr_ll);
<a name='L1645'>        <b>return</b> 1;
<a name='L1646'>    <font color='red'>}</font>
<a name='L1647'><font color='darkred'>#endif</font>
<a name='L1648'>
<a name='L1649'><font color='darkred'>#ifdef</font> HAVE_LINUX_TIPC_H
<a name='L1650'>    <b>case</b> AF_TIPC:
<a name='L1651'>    <font color='red'>{</font>
<a name='L1652'>        *len_ret = <b>sizeof</b> (<b>struct</b> sockaddr_tipc);
<a name='L1653'>        <b>return</b> 1;
<a name='L1654'>    <font color='red'>}</font>
<a name='L1655'><font color='darkred'>#endif</font>
<a name='L1656'>
<a name='L1657'>    <i><font color='green'>/* More cases here... */</font></i>
<a name='L1658'>
<a name='L1659'>    <b>default</b>:
<a name='L1660'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "getsockaddrlen: bad family");
<a name='L1661'>        <b>return</b> 0;
<a name='L1662'>
<a name='L1663'>    <font color='red'>}</font>
<a name='L1664'><font color='red'>}</font>
<a name='L1665'>
<a name='L1666'>
<a name='L1667'><i><font color='green'>/* s._accept() -&gt; (fd, address) */</font></i>
<a name='L1668'>
<a name='L1669'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1670'><a href='../S/2711.html#L2874' title='Refered from 2874 in Modules/socketmodule.c.'>sock_accept</a>(PySocketSockObject *s)
<a name='L1671'><font color='red'>{</font>
<a name='L1672'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L1673'>    <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> newfd = <a href='../S/2711.html#L433' title='Defined at 433 in Modules/socketmodule.c.'>INVALID_SOCKET</a>;
<a name='L1674'>    <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> addrlen;
<a name='L1675'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *sock = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1676'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addr = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1677'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1678'>    <b>int</b> timeout;
<a name='L1679'>    <b>if</b> (!<a href='../S/2711.html#L1579' title='Defined at 1579 in Modules/socketmodule.c.'>getsockaddrlen</a>(s, &amp;addrlen))
<a name='L1680'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1681'>    memset(&amp;addrbuf, 0, addrlen);
<a name='L1682'>
<a name='L1683'>    <b>if</b> (!<a href='../D/1795.html' title='Multiple defined in 3 places.'>IS_SELECTABLE</a>(s))
<a name='L1684'>        <b>return</b> <a href='../S/2711.html#L473' title='Defined at 473 in Modules/socketmodule.c.'>select_error</a>();
<a name='L1685'>
<a name='L1686'>    <a href='../S/2711.html#L741' title='Defined at 741 in Modules/socketmodule.c.'>BEGIN_SELECT_LOOP</a>(s)
<a name='L1687'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L1688'>    timeout = <a href='../S/2711.html#L659' title='Defined at 659 in Modules/socketmodule.c.'>internal_select_ex</a>(s, 0, interval);
<a name='L1689'>    <b>if</b> (!timeout) <font color='red'>{</font>
<a name='L1690'>        newfd = accept(s-&gt;sock_fd, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen);
<a name='L1691'>    <font color='red'>}</font>
<a name='L1692'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L1693'>
<a name='L1694'>    <b>if</b> (timeout == 1) <font color='red'>{</font>
<a name='L1695'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_timeout, "timed out");
<a name='L1696'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1697'>    <font color='red'>}</font>
<a name='L1698'>    <a href='../S/2711.html#L754' title='Defined at 754 in Modules/socketmodule.c.'>END_SELECT_LOOP</a>(s)
<a name='L1699'>
<a name='L1700'>    <b>if</b> (newfd == <a href='../S/2711.html#L433' title='Defined at 433 in Modules/socketmodule.c.'>INVALID_SOCKET</a>)
<a name='L1701'>        <b>return</b> s-&gt;errorhandler();
<a name='L1702'>
<a name='L1703'>    sock = <a href='../D/3468.html' title='Multiple defined in 2 places.'>PyLong_FromSocket_t</a>(newfd);
<a name='L1704'>    <b>if</b> (sock == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1705'>        <a href='../D/4772.html' title='Multiple defined in 3 places.'>SOCKETCLOSE</a>(newfd);
<a name='L1706'>        <b>goto</b> finally;
<a name='L1707'>    <font color='red'>}</font>
<a name='L1708'>
<a name='L1709'>    addr = <a href='../S/2711.html#L1015' title='Defined at 1015 in Modules/socketmodule.c.'>makesockaddr</a>(s-&gt;sock_fd, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf),
<a name='L1710'>                        addrlen, s-&gt;sock_proto);
<a name='L1711'>    <b>if</b> (addr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1712'>        <b>goto</b> finally;
<a name='L1713'>
<a name='L1714'>    res = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(2, sock, addr);
<a name='L1715'>
<a name='L1716'>finally:
<a name='L1717'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(sock);
<a name='L1718'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(addr);
<a name='L1719'>    <b>return</b> res;
<a name='L1720'><font color='red'>}</font>
<a name='L1721'>
<a name='L1722'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(accept_doc,
<a name='L1723'>"_accept() -&gt; (integer, address info)\n\
<a name='L1724'>\n\
<a name='L1725'>Wait for an incoming connection.  Return a new socket file descriptor\n\
<a name='L1726'>representing the connection, and the address of the client.\n\
<a name='L1727'>For IP sockets, the address info is a pair (hostaddr, port).");
<a name='L1728'>
<a name='L1729'><i><font color='green'>/* s.setblocking(flag) method.  Argument:</font></i>
<a name='L1730'><i><font color='green'>   False -- non-blocking mode; same as settimeout(0)</font></i>
<a name='L1731'><i><font color='green'>   True -- blocking mode; same as settimeout(None)</font></i>
<a name='L1732'><i><font color='green'>*/</font></i>
<a name='L1733'>
<a name='L1734'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1735'><a href='../S/2711.html#L2916' title='Refered from 2916 in Modules/socketmodule.c.'>sock_setblocking</a>(PySocketSockObject *s, PyObject *arg)
<a name='L1736'><font color='red'>{</font>
<a name='L1737'>    <b>int</b> <a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>;
<a name='L1738'>
<a name='L1739'>    <a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a> = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1740'>    <b>if</b> (<a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a> == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1741'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1742'>
<a name='L1743'>    s-&gt;sock_timeout = <a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a> ? -1.0 : 0.0;
<a name='L1744'>    <a href='../S/2711.html#L615' title='Defined at 615 in Modules/socketmodule.c.'>internal_setblocking</a>(s, <a href='../D/7006.html' title='Multiple defined in 4 places.'>block</a>);
<a name='L1745'>
<a name='L1746'>    Py_INCREF(Py_None);
<a name='L1747'>    <b>return</b> Py_None;
<a name='L1748'><font color='red'>}</font>
<a name='L1749'>
<a name='L1750'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(setblocking_doc,
<a name='L1751'>"setblocking(flag)\n\
<a name='L1752'>\n\
<a name='L1753'>Set the socket to blocking (flag is true) or non-blocking (false).\n\
<a name='L1754'>setblocking(True) is equivalent to settimeout(None);\n\
<a name='L1755'>setblocking(False) is equivalent to settimeout(0.0).");
<a name='L1756'>
<a name='L1757'><i><font color='green'>/* s.settimeout(timeout) method.  Argument:</font></i>
<a name='L1758'><i><font color='green'>   None -- no timeout, blocking mode; same as setblocking(True)</font></i>
<a name='L1759'><i><font color='green'>   0.0  -- non-blocking mode; same as setblocking(False)</font></i>
<a name='L1760'><i><font color='green'>   &gt; 0  -- timeout mode; operations time out after timeout seconds</font></i>
<a name='L1761'><i><font color='green'>   &lt; 0  -- illegal; raises an exception</font></i>
<a name='L1762'><i><font color='green'>*/</font></i>
<a name='L1763'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1764'><a href='../S/2711.html#L2918' title='Refered from 2918 in Modules/socketmodule.c.'>sock_settimeout</a>(PySocketSockObject *s, PyObject *arg)
<a name='L1765'><font color='red'>{</font>
<a name='L1766'>    <b>double</b> timeout;
<a name='L1767'>
<a name='L1768'>    <b>if</b> (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None)
<a name='L1769'>        timeout = -1.0;
<a name='L1770'>    <b>else</b> <font color='red'>{</font>
<a name='L1771'>        timeout = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1772'>        <b>if</b> (timeout &lt; 0.0) <font color='red'>{</font>
<a name='L1773'>            <b>if</b> (!<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1774'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1775'>                                "Timeout value out of range");
<a name='L1776'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1777'>        <font color='red'>}</font>
<a name='L1778'>    <font color='red'>}</font>
<a name='L1779'>
<a name='L1780'>    s-&gt;sock_timeout = timeout;
<a name='L1781'>    <a href='../S/2711.html#L615' title='Defined at 615 in Modules/socketmodule.c.'>internal_setblocking</a>(s, timeout &lt; 0.0);
<a name='L1782'>
<a name='L1783'>    Py_INCREF(Py_None);
<a name='L1784'>    <b>return</b> Py_None;
<a name='L1785'><font color='red'>}</font>
<a name='L1786'>
<a name='L1787'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(settimeout_doc,
<a name='L1788'>"settimeout(timeout)\n\
<a name='L1789'>\n\
<a name='L1790'>Set a timeout on socket operations.  'timeout' can be a float,\n\
<a name='L1791'>giving in seconds, or None.  Setting a timeout of None disables\n\
<a name='L1792'>the timeout feature and is equivalent to setblocking(1).\n\
<a name='L1793'>Setting a timeout of zero is the same as setblocking(0).");
<a name='L1794'>
<a name='L1795'><i><font color='green'>/* s.gettimeout() method.</font></i>
<a name='L1796'><i><font color='green'>   Returns the timeout associated with a socket. */</font></i>
<a name='L1797'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1798'><a href='../S/2711.html#L2920' title='Refered from 2920 in Modules/socketmodule.c.'>sock_gettimeout</a>(PySocketSockObject *s)
<a name='L1799'><font color='red'>{</font>
<a name='L1800'>    <b>if</b> (s-&gt;sock_timeout &lt; 0.0) <font color='red'>{</font>
<a name='L1801'>        Py_INCREF(Py_None);
<a name='L1802'>        <b>return</b> Py_None;
<a name='L1803'>    <font color='red'>}</font>
<a name='L1804'>    <b>else</b>
<a name='L1805'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(s-&gt;sock_timeout);
<a name='L1806'><font color='red'>}</font>
<a name='L1807'>
<a name='L1808'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(gettimeout_doc,
<a name='L1809'>"gettimeout() -&gt; timeout\n\
<a name='L1810'>\n\
<a name='L1811'>Returns the timeout in floating seconds associated with socket \n\
<a name='L1812'>operations. A timeout of None indicates that timeouts on socket \n\
<a name='L1813'>operations are disabled.");
<a name='L1814'>
<a name='L1815'><i><font color='green'>/* s.setsockopt() method.</font></i>
<a name='L1816'><i><font color='green'>   With an integer third argument, sets an integer option.</font></i>
<a name='L1817'><i><font color='green'>   With a string third argument, sets an option from a buffer;</font></i>
<a name='L1818'><i><font color='green'>   use optional built-in module 'struct' to encode the string. */</font></i>
<a name='L1819'>
<a name='L1820'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1821'><a href='../S/2711.html#L2922' title='Refered from 2922 in Modules/socketmodule.c.'>sock_setsockopt</a>(PySocketSockObject *s, PyObject *args)
<a name='L1822'><font color='red'>{</font>
<a name='L1823'>    <b>int</b> level;
<a name='L1824'>    <b>int</b> optname;
<a name='L1825'>    <b>int</b> res;
<a name='L1826'>    <b>char</b> *buf;
<a name='L1827'>    <b>int</b> buflen;
<a name='L1828'>    <b>int</b> flag;
<a name='L1829'>
<a name='L1830'>    <b>if</b> (<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "iii:setsockopt",
<a name='L1831'>                         &amp;level, &amp;optname, &amp;flag)) <font color='red'>{</font>
<a name='L1832'>        buf = (<b>char</b> *) &amp;flag;
<a name='L1833'>        buflen = <b>sizeof</b> flag;
<a name='L1834'>    <font color='red'>}</font>
<a name='L1835'>    <b>else</b> <font color='red'>{</font>
<a name='L1836'>        <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1837'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "iiy#:setsockopt",
<a name='L1838'>                              &amp;level, &amp;optname, &amp;buf, &amp;buflen))
<a name='L1839'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1840'>    <font color='red'>}</font>
<a name='L1841'>    res = setsockopt(s-&gt;sock_fd, level, optname, (<b>void</b> *)buf, buflen);
<a name='L1842'>    <b>if</b> (res &lt; 0)
<a name='L1843'>        <b>return</b> s-&gt;errorhandler();
<a name='L1844'>    Py_INCREF(Py_None);
<a name='L1845'>    <b>return</b> Py_None;
<a name='L1846'><font color='red'>}</font>
<a name='L1847'>
<a name='L1848'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(setsockopt_doc,
<a name='L1849'>"setsockopt(level, option, value)\n\
<a name='L1850'>\n\
<a name='L1851'>Set a socket option.  See the Unix manual for level and option.\n\
<a name='L1852'>The value argument can either be an integer or a string.");
<a name='L1853'>
<a name='L1854'>
<a name='L1855'><i><font color='green'>/* s.getsockopt() method.</font></i>
<a name='L1856'><i><font color='green'>   With two arguments, retrieves an integer option.</font></i>
<a name='L1857'><i><font color='green'>   With a third integer argument, retrieves a string buffer of that size;</font></i>
<a name='L1858'><i><font color='green'>   use optional built-in module 'struct' to decode the string. */</font></i>
<a name='L1859'>
<a name='L1860'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1861'><a href='../S/2711.html#L2894' title='Refered from 2894 in Modules/socketmodule.c.'>sock_getsockopt</a>(PySocketSockObject *s, PyObject *args)
<a name='L1862'><font color='red'>{</font>
<a name='L1863'>    <b>int</b> level;
<a name='L1864'>    <b>int</b> optname;
<a name='L1865'>    <b>int</b> res;
<a name='L1866'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *buf;
<a name='L1867'>    <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> buflen = 0;
<a name='L1868'>
<a name='L1869'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "ii|i:getsockopt",
<a name='L1870'>                          &amp;level, &amp;optname, &amp;buflen))
<a name='L1871'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1872'>
<a name='L1873'>    <b>if</b> (buflen == 0) <font color='red'>{</font>
<a name='L1874'>        <b>int</b> flag = 0;
<a name='L1875'>        <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> flagsize = <b>sizeof</b> flag;
<a name='L1876'>        res = getsockopt(s-&gt;sock_fd, level, optname,
<a name='L1877'>                         (<b>void</b> *)&amp;flag, &amp;flagsize);
<a name='L1878'>        <b>if</b> (res &lt; 0)
<a name='L1879'>            <b>return</b> s-&gt;errorhandler();
<a name='L1880'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(flag);
<a name='L1881'>    <font color='red'>}</font>
<a name='L1882'><font color='darkred'>#ifdef</font> __VMS
<a name='L1883'>    <i><font color='green'>/* socklen_t is unsigned so no negative test is needed,</font></i>
<a name='L1884'><i><font color='green'>       test buflen == 0 is previously done */</font></i>
<a name='L1885'>    <b>if</b> (buflen &gt; 1024) <font color='red'>{</font>
<a name='L1886'><font color='darkred'>#else</font>
<a name='L1887'>    <b>if</b> (buflen &lt;= 0 || buflen &gt; 1024) <font color='red'>{</font>
<a name='L1888'><font color='darkred'>#endif</font>
<a name='L1889'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L1890'>                        "getsockopt buflen out of range");
<a name='L1891'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1892'>    <font color='red'>}</font>
<a name='L1893'>    buf = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>((<b>char</b> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, buflen);
<a name='L1894'>    <b>if</b> (buf == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1895'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1896'>    res = getsockopt(s-&gt;sock_fd, level, optname,
<a name='L1897'>                     (<b>void</b> *)PyBytes_AS_STRING(buf), &amp;buflen);
<a name='L1898'>    <b>if</b> (res &lt; 0) <font color='red'>{</font>
<a name='L1899'>        Py_DECREF(buf);
<a name='L1900'>        <b>return</b> s-&gt;errorhandler();
<a name='L1901'>    <font color='red'>}</font>
<a name='L1902'>    <a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;buf, buflen);
<a name='L1903'>    <b>return</b> buf;
<a name='L1904'><font color='red'>}</font>
<a name='L1905'>
<a name='L1906'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getsockopt_doc,
<a name='L1907'>"getsockopt(level, option[, buffersize]) -&gt; value\n\
<a name='L1908'>\n\
<a name='L1909'>Get a socket option.  See the Unix manual for level and option.\n\
<a name='L1910'>If a nonzero buffersize argument is given, the return value is a\n\
<a name='L1911'>string of that length; otherwise it is an integer.");
<a name='L1912'>
<a name='L1913'>
<a name='L1914'><i><font color='green'>/* s.bind(sockaddr) method */</font></i>
<a name='L1915'>
<a name='L1916'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1917'><a href='../S/2711.html#L2876' title='Refered from 2876 in Modules/socketmodule.c.'>sock_bind</a>(PySocketSockObject *s, PyObject *addro)
<a name='L1918'><font color='red'>{</font>
<a name='L1919'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L1920'>    <b>int</b> addrlen;
<a name='L1921'>    <b>int</b> res;
<a name='L1922'>
<a name='L1923'>    <b>if</b> (!<a href='../S/2711.html#L1217' title='Defined at 1217 in Modules/socketmodule.c.'>getsockaddrarg</a>(s, addro, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen))
<a name='L1924'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1925'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L1926'>    res = bind(s-&gt;sock_fd, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), addrlen);
<a name='L1927'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L1928'>    <b>if</b> (res &lt; 0)
<a name='L1929'>        <b>return</b> s-&gt;errorhandler();
<a name='L1930'>    Py_INCREF(Py_None);
<a name='L1931'>    <b>return</b> Py_None;
<a name='L1932'><font color='red'>}</font>
<a name='L1933'>
<a name='L1934'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(bind_doc,
<a name='L1935'>"bind(address)\n\
<a name='L1936'>\n\
<a name='L1937'>Bind the socket to a local address.  For IP sockets, the address is a\n\
<a name='L1938'>pair (host, port); the host must refer to the local host. For raw packet\n\
<a name='L1939'>sockets the address is a tuple (ifname, proto [,pkttype [,hatype]])");
<a name='L1940'>
<a name='L1941'>
<a name='L1942'><i><font color='green'>/* s.close() method.</font></i>
<a name='L1943'><i><font color='green'>   Set the file descriptor to -1 so operations tried subsequently</font></i>
<a name='L1944'><i><font color='green'>   will surely fail. */</font></i>
<a name='L1945'>
<a name='L1946'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1947'><a href='../S/2711.html#L2878' title='Refered from 2878 in Modules/socketmodule.c.'>sock_close</a>(PySocketSockObject *s)
<a name='L1948'><font color='red'>{</font>
<a name='L1949'>    <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> fd;
<a name='L1950'>
<a name='L1951'>    <b>if</b> ((fd = s-&gt;sock_fd) != -1) <font color='red'>{</font>
<a name='L1952'>        s-&gt;sock_fd = -1;
<a name='L1953'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L1954'>        (<b>void</b>) <a href='../D/4772.html' title='Multiple defined in 3 places.'>SOCKETCLOSE</a>(fd);
<a name='L1955'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L1956'>    <font color='red'>}</font>
<a name='L1957'>    Py_INCREF(Py_None);
<a name='L1958'>    <b>return</b> Py_None;
<a name='L1959'><font color='red'>}</font>
<a name='L1960'>
<a name='L1961'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(close_doc,
<a name='L1962'>"close()\n\
<a name='L1963'>\n\
<a name='L1964'>Close the socket.  It cannot be used after this call.");
<a name='L1965'>
<a name='L1966'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1967'><a href='../S/2711.html#L2884' title='Refered from 2884 in Modules/socketmodule.c.'>sock_detach</a>(PySocketSockObject *s)
<a name='L1968'><font color='red'>{</font>
<a name='L1969'>    <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> fd = s-&gt;sock_fd;
<a name='L1970'>    s-&gt;sock_fd = -1;
<a name='L1971'>    <b>return</b> <a href='../D/3468.html' title='Multiple defined in 2 places.'>PyLong_FromSocket_t</a>(fd);
<a name='L1972'><font color='red'>}</font>
<a name='L1973'>
<a name='L1974'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(detach_doc,
<a name='L1975'>"detach()\n\
<a name='L1976'>\n\
<a name='L1977'>Close the socket object without closing the underlying file descriptor.\
<a name='L1978'>The object cannot be used after this call, but the file descriptor\
<a name='L1979'>can be reused for other purposes.  The file descriptor is returned.");
<a name='L1980'>
<a name='L1981'><b>static</b> <b>int</b>
<a name='L1982'><a href='../R/8446.html' title='Multiple refered from 2 places.'>internal_connect</a>(PySocketSockObject *s, <b>struct</b> sockaddr *addr, <b>int</b> addrlen,
<a name='L1983'>                 <b>int</b> *timeoutp)
<a name='L1984'><font color='red'>{</font>
<a name='L1985'>    <b>int</b> res, timeout;
<a name='L1986'>
<a name='L1987'>    timeout = 0;
<a name='L1988'>    res = connect(s-&gt;sock_fd, addr, addrlen);
<a name='L1989'>
<a name='L1990'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L1991'>
<a name='L1992'>    <b>if</b> (s-&gt;sock_timeout &gt; 0.0) <font color='red'>{</font>
<a name='L1993'>        <b>if</b> (res &lt; 0 &amp;&amp; WSAGetLastError() == WSAEWOULDBLOCK &amp;&amp;
<a name='L1994'>            <a href='../D/1795.html' title='Multiple defined in 3 places.'>IS_SELECTABLE</a>(s)) <font color='red'>{</font>
<a name='L1995'>            <i><font color='green'>/* This is a mess.  Best solution: trust select */</font></i>
<a name='L1996'>            fd_set fds;
<a name='L1997'>            fd_set fds_exc;
<a name='L1998'>            <b>struct</b> timeval tv;
<a name='L1999'>            tv.tv_sec = (<b>int</b>)s-&gt;sock_timeout;
<a name='L2000'>            tv.tv_usec = (<b>int</b>)((s-&gt;sock_timeout - tv.tv_sec) * 1e6);
<a name='L2001'>            FD_ZERO(&amp;fds);
<a name='L2002'>            FD_SET(s-&gt;sock_fd, &amp;fds);
<a name='L2003'>            FD_ZERO(&amp;fds_exc);
<a name='L2004'>            FD_SET(s-&gt;sock_fd, &amp;fds_exc);
<a name='L2005'>            res = select(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(s-&gt;sock_fd+1, <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a>, <b>int</b>),
<a name='L2006'>                         <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;fds, &amp;fds_exc, &amp;tv);
<a name='L2007'>            <b>if</b> (res == 0) <font color='red'>{</font>
<a name='L2008'>                res = WSAEWOULDBLOCK;
<a name='L2009'>                timeout = 1;
<a name='L2010'>            <font color='red'>}</font> <b>else</b> <b>if</b> (res &gt; 0) <font color='red'>{</font>
<a name='L2011'>                <b>if</b> (FD_ISSET(s-&gt;sock_fd, &amp;fds))
<a name='L2012'>                    <i><font color='green'>/* The socket is in the writable set - this</font></i>
<a name='L2013'><i><font color='green'>                       means connected */</font></i>
<a name='L2014'>                    res = 0;
<a name='L2015'>                <b>else</b> <font color='red'>{</font>
<a name='L2016'>                    <i><font color='green'>/* As per MS docs, we need to call getsockopt()</font></i>
<a name='L2017'><i><font color='green'>                       to get the underlying error */</font></i>
<a name='L2018'>                    <b>int</b> res_size = <b>sizeof</b> res;
<a name='L2019'>                    <i><font color='green'>/* It must be in the exception set */</font></i>
<a name='L2020'>                    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(FD_ISSET(s-&gt;sock_fd, &amp;fds_exc));
<a name='L2021'>                    <b>if</b> (0 == getsockopt(s-&gt;sock_fd, SOL_SOCKET, SO_ERROR,
<a name='L2022'>                                        (<b>char</b> *)&amp;res, &amp;res_size))
<a name='L2023'>                        <i><font color='green'>/* getsockopt also clears WSAGetLastError,</font></i>
<a name='L2024'><i><font color='green'>                           so reset it back. */</font></i>
<a name='L2025'>                        WSASetLastError(res);
<a name='L2026'>                    <b>else</b>
<a name='L2027'>                        res = WSAGetLastError();
<a name='L2028'>                <font color='red'>}</font>
<a name='L2029'>            <font color='red'>}</font>
<a name='L2030'>            <i><font color='green'>/* else if (res &lt; 0) an error occurred */</font></i>
<a name='L2031'>        <font color='red'>}</font>
<a name='L2032'>    <font color='red'>}</font>
<a name='L2033'>
<a name='L2034'>    <b>if</b> (res &lt; 0)
<a name='L2035'>        res = WSAGetLastError();
<a name='L2036'>
<a name='L2037'><font color='darkred'>#else</font>
<a name='L2038'>
<a name='L2039'>    <b>if</b> (s-&gt;sock_timeout &gt; 0.0) <font color='red'>{</font>
<a name='L2040'>        <b>if</b> (res &lt; 0 &amp;&amp; errno == EINPROGRESS &amp;&amp; <a href='../D/1795.html' title='Multiple defined in 3 places.'>IS_SELECTABLE</a>(s)) <font color='red'>{</font>
<a name='L2041'>            timeout = <a href='../S/2711.html#L717' title='Defined at 717 in Modules/socketmodule.c.'>internal_select</a>(s, 1);
<a name='L2042'>            <b>if</b> (timeout == 0) <font color='red'>{</font>
<a name='L2043'>                <i><font color='green'>/* Bug #1019808: in case of an EINPROGRESS,</font></i>
<a name='L2044'><i><font color='green'>                   use getsockopt(SO_ERROR) to get the real</font></i>
<a name='L2045'><i><font color='green'>                   error. */</font></i>
<a name='L2046'>                <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> res_size = <b>sizeof</b> res;
<a name='L2047'>                (<b>void</b>)getsockopt(s-&gt;sock_fd, SOL_SOCKET,
<a name='L2048'>                                 SO_ERROR, &amp;res, &amp;res_size);
<a name='L2049'>                <b>if</b> (res == EISCONN)
<a name='L2050'>                    res = 0;
<a name='L2051'>                errno = res;
<a name='L2052'>            <font color='red'>}</font>
<a name='L2053'>            <b>else</b> <b>if</b> (timeout == -1) <font color='red'>{</font>
<a name='L2054'>                res = errno;            <i><font color='green'>/* had error */</font></i>
<a name='L2055'>            <font color='red'>}</font>
<a name='L2056'>            <b>else</b>
<a name='L2057'>                res = EWOULDBLOCK;                      <i><font color='green'>/* timed out */</font></i>
<a name='L2058'>        <font color='red'>}</font>
<a name='L2059'>    <font color='red'>}</font>
<a name='L2060'>
<a name='L2061'>    <b>if</b> (res &lt; 0)
<a name='L2062'>        res = errno;
<a name='L2063'>
<a name='L2064'><font color='darkred'>#endif</font>
<a name='L2065'>    *timeoutp = timeout;
<a name='L2066'>
<a name='L2067'>    <b>return</b> res;
<a name='L2068'><font color='red'>}</font>
<a name='L2069'>
<a name='L2070'><i><font color='green'>/* s.connect(sockaddr) method */</font></i>
<a name='L2071'>
<a name='L2072'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2073'><a href='../S/2711.html#L2880' title='Refered from 2880 in Modules/socketmodule.c.'>sock_connect</a>(PySocketSockObject *s, PyObject *addro)
<a name='L2074'><font color='red'>{</font>
<a name='L2075'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L2076'>    <b>int</b> addrlen;
<a name='L2077'>    <b>int</b> res;
<a name='L2078'>    <b>int</b> timeout;
<a name='L2079'>
<a name='L2080'>    <b>if</b> (!<a href='../S/2711.html#L1217' title='Defined at 1217 in Modules/socketmodule.c.'>getsockaddrarg</a>(s, addro, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen))
<a name='L2081'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2082'>
<a name='L2083'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2084'>    res = <a href='../S/2711.html#L1982' title='Defined at 1982 in Modules/socketmodule.c.'>internal_connect</a>(s, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), addrlen, &amp;timeout);
<a name='L2085'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2086'>
<a name='L2087'>    <b>if</b> (timeout == 1) <font color='red'>{</font>
<a name='L2088'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_timeout, "timed out");
<a name='L2089'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2090'>    <font color='red'>}</font>
<a name='L2091'>    <b>if</b> (res != 0)
<a name='L2092'>        <b>return</b> s-&gt;errorhandler();
<a name='L2093'>    Py_INCREF(Py_None);
<a name='L2094'>    <b>return</b> Py_None;
<a name='L2095'><font color='red'>}</font>
<a name='L2096'>
<a name='L2097'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(connect_doc,
<a name='L2098'>"connect(address)\n\
<a name='L2099'>\n\
<a name='L2100'>Connect the socket to a remote address.  For IP sockets, the address\n\
<a name='L2101'>is a pair (host, port).");
<a name='L2102'>
<a name='L2103'>
<a name='L2104'><i><font color='green'>/* s.connect_ex(sockaddr) method */</font></i>
<a name='L2105'>
<a name='L2106'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2107'><a href='../S/2711.html#L2882' title='Refered from 2882 in Modules/socketmodule.c.'>sock_connect_ex</a>(PySocketSockObject *s, PyObject *addro)
<a name='L2108'><font color='red'>{</font>
<a name='L2109'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L2110'>    <b>int</b> addrlen;
<a name='L2111'>    <b>int</b> res;
<a name='L2112'>    <b>int</b> timeout;
<a name='L2113'>
<a name='L2114'>    <b>if</b> (!<a href='../S/2711.html#L1217' title='Defined at 1217 in Modules/socketmodule.c.'>getsockaddrarg</a>(s, addro, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen))
<a name='L2115'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2116'>
<a name='L2117'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2118'>    res = <a href='../S/2711.html#L1982' title='Defined at 1982 in Modules/socketmodule.c.'>internal_connect</a>(s, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), addrlen, &amp;timeout);
<a name='L2119'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2120'>
<a name='L2121'>    <i><font color='green'>/* Signals are not errors (though they may raise exceptions).  Adapted</font></i>
<a name='L2122'><i><font color='green'>       from PyErr_SetFromErrnoWithFilenameObject(). */</font></i>
<a name='L2123'><font color='darkred'>#ifdef</font> EINTR
<a name='L2124'>    <b>if</b> (res == EINTR &amp;&amp; <a href='../D/3143.html' title='Multiple defined in 2 places.'>PyErr_CheckSignals</a>())
<a name='L2125'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2126'><font color='darkred'>#endif</font>
<a name='L2127'>
<a name='L2128'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>) res);
<a name='L2129'><font color='red'>}</font>
<a name='L2130'>
<a name='L2131'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(connect_ex_doc,
<a name='L2132'>"connect_ex(address) -&gt; errno\n\
<a name='L2133'>\n\
<a name='L2134'>This is like connect(address), but returns an error code (the errno value)\n\
<a name='L2135'>instead of raising an exception when an error occurs.");
<a name='L2136'>
<a name='L2137'>
<a name='L2138'><i><font color='green'>/* s.fileno() method */</font></i>
<a name='L2139'>
<a name='L2140'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2141'><a href='../S/2711.html#L2886' title='Refered from 2886 in Modules/socketmodule.c.'>sock_fileno</a>(PySocketSockObject *s)
<a name='L2142'><font color='red'>{</font>
<a name='L2143'>    <b>return</b> <a href='../D/3468.html' title='Multiple defined in 2 places.'>PyLong_FromSocket_t</a>(s-&gt;sock_fd);
<a name='L2144'><font color='red'>}</font>
<a name='L2145'>
<a name='L2146'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(fileno_doc,
<a name='L2147'>"fileno() -&gt; integer\n\
<a name='L2148'>\n\
<a name='L2149'>Return the integer file descriptor of the socket.");
<a name='L2150'>
<a name='L2151'>
<a name='L2152'><i><font color='green'>/* s.getsockname() method */</font></i>
<a name='L2153'>
<a name='L2154'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2155'><a href='../S/2711.html#L2892' title='Refered from 2892 in Modules/socketmodule.c.'>sock_getsockname</a>(PySocketSockObject *s)
<a name='L2156'><font color='red'>{</font>
<a name='L2157'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L2158'>    <b>int</b> res;
<a name='L2159'>    <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> addrlen;
<a name='L2160'>
<a name='L2161'>    <b>if</b> (!<a href='../S/2711.html#L1579' title='Defined at 1579 in Modules/socketmodule.c.'>getsockaddrlen</a>(s, &amp;addrlen))
<a name='L2162'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2163'>    memset(&amp;addrbuf, 0, addrlen);
<a name='L2164'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2165'>    res = getsockname(s-&gt;sock_fd, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen);
<a name='L2166'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2167'>    <b>if</b> (res &lt; 0)
<a name='L2168'>        <b>return</b> s-&gt;errorhandler();
<a name='L2169'>    <b>return</b> <a href='../S/2711.html#L1015' title='Defined at 1015 in Modules/socketmodule.c.'>makesockaddr</a>(s-&gt;sock_fd, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), addrlen,
<a name='L2170'>                        s-&gt;sock_proto);
<a name='L2171'><font color='red'>}</font>
<a name='L2172'>
<a name='L2173'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getsockname_doc,
<a name='L2174'>"getsockname() -&gt; address info\n\
<a name='L2175'>\n\
<a name='L2176'>Return the address of the local endpoint.  For IP sockets, the address\n\
<a name='L2177'>info is a pair (hostaddr, port).");
<a name='L2178'>
<a name='L2179'>
<a name='L2180'><font color='darkred'>#ifdef</font> <a href='../D/1506.html' title='Multiple defined in 3 places.'>HAVE_GETPEERNAME</a>         <i><font color='green'>/* Cray APP doesn't have this :-( */</font></i>
<a name='L2181'><i><font color='green'>/* s.getpeername() method */</font></i>
<a name='L2182'>
<a name='L2183'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2184'><a href='../S/2711.html#L2889' title='Refered from 2889 in Modules/socketmodule.c.'>sock_getpeername</a>(PySocketSockObject *s)
<a name='L2185'><font color='red'>{</font>
<a name='L2186'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L2187'>    <b>int</b> res;
<a name='L2188'>    <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> addrlen;
<a name='L2189'>
<a name='L2190'>    <b>if</b> (!<a href='../S/2711.html#L1579' title='Defined at 1579 in Modules/socketmodule.c.'>getsockaddrlen</a>(s, &amp;addrlen))
<a name='L2191'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2192'>    memset(&amp;addrbuf, 0, addrlen);
<a name='L2193'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2194'>    res = getpeername(s-&gt;sock_fd, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen);
<a name='L2195'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2196'>    <b>if</b> (res &lt; 0)
<a name='L2197'>        <b>return</b> s-&gt;errorhandler();
<a name='L2198'>    <b>return</b> <a href='../S/2711.html#L1015' title='Defined at 1015 in Modules/socketmodule.c.'>makesockaddr</a>(s-&gt;sock_fd, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), addrlen,
<a name='L2199'>                        s-&gt;sock_proto);
<a name='L2200'><font color='red'>}</font>
<a name='L2201'>
<a name='L2202'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getpeername_doc,
<a name='L2203'>"getpeername() -&gt; address info\n\
<a name='L2204'>\n\
<a name='L2205'>Return the address of the remote endpoint.  For IP sockets, the address\n\
<a name='L2206'>info is a pair (hostaddr, port).");
<a name='L2207'>
<a name='L2208'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_GETPEERNAME */</font></i>
<a name='L2209'>
<a name='L2210'>
<a name='L2211'><i><font color='green'>/* s.listen(n) method */</font></i>
<a name='L2212'>
<a name='L2213'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2214'><a href='../S/2711.html#L2900' title='Refered from 2900 in Modules/socketmodule.c.'>sock_listen</a>(PySocketSockObject *s, PyObject *arg)
<a name='L2215'><font color='red'>{</font>
<a name='L2216'>    <b>int</b> backlog;
<a name='L2217'>    <b>int</b> res;
<a name='L2218'>
<a name='L2219'>    backlog = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L2220'>    <b>if</b> (backlog == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2221'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2222'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2223'>    <b>if</b> (backlog &lt; 1)
<a name='L2224'>        backlog = 1;
<a name='L2225'>    res = listen(s-&gt;sock_fd, backlog);
<a name='L2226'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2227'>    <b>if</b> (res &lt; 0)
<a name='L2228'>        <b>return</b> s-&gt;errorhandler();
<a name='L2229'>    Py_INCREF(Py_None);
<a name='L2230'>    <b>return</b> Py_None;
<a name='L2231'><font color='red'>}</font>
<a name='L2232'>
<a name='L2233'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(listen_doc,
<a name='L2234'>"listen(backlog)\n\
<a name='L2235'>\n\
<a name='L2236'>Enable a server to accept connections.  The backlog argument must be at\n\
<a name='L2237'>least 1; it specifies the number of unaccepted connection that the system\n\
<a name='L2238'>will allow before refusing new connections.");
<a name='L2239'>
<a name='L2240'>
<a name='L2241'><i><font color='green'>/*</font></i>
<a name='L2242'><i><font color='green'> * This is the guts of the recv() and recv_into() methods, which reads into a</font></i>
<a name='L2243'><i><font color='green'> * char buffer.  If you have any inc/dec ref to do to the objects that contain</font></i>
<a name='L2244'><i><font color='green'> * the buffer, do it in the caller.  This function returns the number of bytes</font></i>
<a name='L2245'><i><font color='green'> * succesfully read.  If there was an error, it returns -1.  Note that it is</font></i>
<a name='L2246'><i><font color='green'> * also possible that we return a number of bytes smaller than the request</font></i>
<a name='L2247'><i><font color='green'> * bytes.</font></i>
<a name='L2248'><i><font color='green'> */</font></i>
<a name='L2249'>
<a name='L2250'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L2251'><a href='../R/10389.html' title='Multiple refered from 2 places.'>sock_recv_guts</a>(PySocketSockObject *s, <b>char</b>* cbuf, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len, <b>int</b> flags)
<a name='L2252'><font color='red'>{</font>
<a name='L2253'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outlen = -1;
<a name='L2254'>    <b>int</b> timeout;
<a name='L2255'><font color='darkred'>#ifdef</font> __VMS
<a name='L2256'>    <b>int</b> remaining;
<a name='L2257'>    <b>char</b> *<a href='../S/2737.html#L992' title='Defined at 992 in Modules/zlib/deflate.c.'>read_buf</a>;
<a name='L2258'><font color='darkred'>#endif</font>
<a name='L2259'>
<a name='L2260'>    <b>if</b> (!<a href='../D/1795.html' title='Multiple defined in 3 places.'>IS_SELECTABLE</a>(s)) <font color='red'>{</font>
<a name='L2261'>        <a href='../S/2711.html#L473' title='Defined at 473 in Modules/socketmodule.c.'>select_error</a>();
<a name='L2262'>        <b>return</b> -1;
<a name='L2263'>    <font color='red'>}</font>
<a name='L2264'>    <b>if</b> (len == 0) <font color='red'>{</font>
<a name='L2265'>        <i><font color='green'>/* If 0 bytes were requested, do nothing. */</font></i>
<a name='L2266'>        <b>return</b> 0;
<a name='L2267'>    <font color='red'>}</font>
<a name='L2268'>
<a name='L2269'><font color='darkred'>#ifndef</font> __VMS
<a name='L2270'>    <a href='../S/2711.html#L741' title='Defined at 741 in Modules/socketmodule.c.'>BEGIN_SELECT_LOOP</a>(s)
<a name='L2271'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2272'>    timeout = <a href='../S/2711.html#L659' title='Defined at 659 in Modules/socketmodule.c.'>internal_select_ex</a>(s, 0, interval);
<a name='L2273'>    <b>if</b> (!timeout)
<a name='L2274'>        outlen = recv(s-&gt;sock_fd, cbuf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L2275'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2276'>
<a name='L2277'>    <b>if</b> (timeout == 1) <font color='red'>{</font>
<a name='L2278'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_timeout, "timed out");
<a name='L2279'>        <b>return</b> -1;
<a name='L2280'>    <font color='red'>}</font>
<a name='L2281'>    <a href='../S/2711.html#L754' title='Defined at 754 in Modules/socketmodule.c.'>END_SELECT_LOOP</a>(s)
<a name='L2282'>    <b>if</b> (outlen &lt; 0) <font color='red'>{</font>
<a name='L2283'>        <i><font color='green'>/* Note: the call to errorhandler() ALWAYS indirectly returned</font></i>
<a name='L2284'><i><font color='green'>           NULL, so ignore its return value */</font></i>
<a name='L2285'>        s-&gt;errorhandler();
<a name='L2286'>        <b>return</b> -1;
<a name='L2287'>    <font color='red'>}</font>
<a name='L2288'><font color='darkred'>#else</font>
<a name='L2289'>    <a href='../S/2737.html#L992' title='Defined at 992 in Modules/zlib/deflate.c.'>read_buf</a> = cbuf;
<a name='L2290'>    remaining = len;
<a name='L2291'>    <b>while</b> (remaining != 0) <font color='red'>{</font>
<a name='L2292'>        <b>unsigned</b> <b>int</b> segment;
<a name='L2293'>        <b>int</b> nread = -1;
<a name='L2294'>
<a name='L2295'>        segment = remaining /<a href='../S/2711.html#L417' title='Defined at 417 in Modules/socketmodule.c.'>SEGMENT_SIZE</a>;
<a name='L2296'>        <b>if</b> (segment != 0) <font color='red'>{</font>
<a name='L2297'>            segment = <a href='../S/2711.html#L417' title='Defined at 417 in Modules/socketmodule.c.'>SEGMENT_SIZE</a>;
<a name='L2298'>        <font color='red'>}</font>
<a name='L2299'>        <b>else</b> <font color='red'>{</font>
<a name='L2300'>            segment = remaining;
<a name='L2301'>        <font color='red'>}</font>
<a name='L2302'>
<a name='L2303'>        <a href='../S/2711.html#L741' title='Defined at 741 in Modules/socketmodule.c.'>BEGIN_SELECT_LOOP</a>(s)
<a name='L2304'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2305'>        timeout = <a href='../S/2711.html#L659' title='Defined at 659 in Modules/socketmodule.c.'>internal_select_ex</a>(s, 0, interval);
<a name='L2306'>        <b>if</b> (!timeout)
<a name='L2307'>            nread = recv(s-&gt;sock_fd, <a href='../S/2737.html#L992' title='Defined at 992 in Modules/zlib/deflate.c.'>read_buf</a>, segment, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L2308'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2309'>        <b>if</b> (timeout == 1) <font color='red'>{</font>
<a name='L2310'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_timeout, "timed out");
<a name='L2311'>            <b>return</b> -1;
<a name='L2312'>        <font color='red'>}</font>
<a name='L2313'>        <a href='../S/2711.html#L754' title='Defined at 754 in Modules/socketmodule.c.'>END_SELECT_LOOP</a>(s)
<a name='L2314'>
<a name='L2315'>        <b>if</b> (nread &lt; 0) <font color='red'>{</font>
<a name='L2316'>            s-&gt;errorhandler();
<a name='L2317'>            <b>return</b> -1;
<a name='L2318'>        <font color='red'>}</font>
<a name='L2319'>        <b>if</b> (nread != remaining) <font color='red'>{</font>
<a name='L2320'>            <a href='../S/2737.html#L992' title='Defined at 992 in Modules/zlib/deflate.c.'>read_buf</a> += nread;
<a name='L2321'>            <b>break</b>;
<a name='L2322'>        <font color='red'>}</font>
<a name='L2323'>
<a name='L2324'>        remaining -= segment;
<a name='L2325'>        <a href='../S/2737.html#L992' title='Defined at 992 in Modules/zlib/deflate.c.'>read_buf</a> += segment;
<a name='L2326'>    <font color='red'>}</font>
<a name='L2327'>    outlen = <a href='../S/2737.html#L992' title='Defined at 992 in Modules/zlib/deflate.c.'>read_buf</a> - cbuf;
<a name='L2328'><font color='darkred'>#endif</font> <i><font color='green'>/* !__VMS */</font></i>
<a name='L2329'>
<a name='L2330'>    <b>return</b> outlen;
<a name='L2331'><font color='red'>}</font>
<a name='L2332'>
<a name='L2333'>
<a name='L2334'><i><font color='green'>/* s.recv(nbytes [,flags]) method */</font></i>
<a name='L2335'>
<a name='L2336'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2337'><a href='../S/2711.html#L2902' title='Refered from 2902 in Modules/socketmodule.c.'>sock_recv</a>(PySocketSockObject *s, PyObject *args)
<a name='L2338'><font color='red'>{</font>
<a name='L2339'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> recvlen, outlen;
<a name='L2340'>    <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L2341'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *buf;
<a name='L2342'>
<a name='L2343'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "n|i:recv", &amp;recvlen, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>))
<a name='L2344'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2345'>
<a name='L2346'>    <b>if</b> (recvlen &lt; 0) <font color='red'>{</font>
<a name='L2347'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L2348'>                        "negative buffersize in recv");
<a name='L2349'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2350'>    <font color='red'>}</font>
<a name='L2351'>
<a name='L2352'>    <i><font color='green'>/* Allocate a new string. */</font></i>
<a name='L2353'>    buf = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>((<b>char</b> *) 0, recvlen);
<a name='L2354'>    <b>if</b> (buf == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2355'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2356'>
<a name='L2357'>    <i><font color='green'>/* Call the guts */</font></i>
<a name='L2358'>    outlen = <a href='../S/2711.html#L2251' title='Defined at 2251 in Modules/socketmodule.c.'>sock_recv_guts</a>(s, PyBytes_AS_STRING(buf), recvlen, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L2359'>    <b>if</b> (outlen &lt; 0) <font color='red'>{</font>
<a name='L2360'>        <i><font color='green'>/* An error occurred, release the string and return an</font></i>
<a name='L2361'><i><font color='green'>           error. */</font></i>
<a name='L2362'>        Py_DECREF(buf);
<a name='L2363'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2364'>    <font color='red'>}</font>
<a name='L2365'>    <b>if</b> (outlen != recvlen) <font color='red'>{</font>
<a name='L2366'>        <i><font color='green'>/* We did not read as many bytes as we anticipated, resize the</font></i>
<a name='L2367'><i><font color='green'>           string if possible and be successful. */</font></i>
<a name='L2368'>        <a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;buf, outlen);
<a name='L2369'>    <font color='red'>}</font>
<a name='L2370'>
<a name='L2371'>    <b>return</b> buf;
<a name='L2372'><font color='red'>}</font>
<a name='L2373'>
<a name='L2374'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(recv_doc,
<a name='L2375'>"recv(buffersize[, flags]) -&gt; data\n\
<a name='L2376'>\n\
<a name='L2377'>Receive up to buffersize bytes from the socket.  For the optional flags\n\
<a name='L2378'>argument, see the Unix manual.  When no data is available, block until\n\
<a name='L2379'>at least one byte is available or until the remote end is closed.  When\n\
<a name='L2380'>the remote end is closed and all data is read, return the empty string.");
<a name='L2381'>
<a name='L2382'>
<a name='L2383'><i><font color='green'>/* s.recv_into(buffer, [nbytes [,flags]]) method */</font></i>
<a name='L2384'>
<a name='L2385'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L2386'><a href='../S/2711.html#L2904' title='Refered from 2904 in Modules/socketmodule.c.'>sock_recv_into</a>(PySocketSockObject *s, PyObject *args, PyObject *kwds)
<a name='L2387'><font color='red'>{</font>
<a name='L2388'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"buffer", "nbytes", "flags", 0<font color='red'>}</font>;
<a name='L2389'>
<a name='L2390'>    <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L2391'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuf;
<a name='L2392'>    <b>char</b> *buf;
<a name='L2393'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> buflen, readlen, recvlen = 0;
<a name='L2394'>
<a name='L2395'>    <i><font color='green'>/* Get the buffer's memory */</font></i>
<a name='L2396'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "w*|ni:recv_into", kwlist,
<a name='L2397'>                                     &amp;pbuf, &amp;recvlen, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>))
<a name='L2398'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2399'>    buf = pbuf.buf;
<a name='L2400'>    buflen = pbuf.len;
<a name='L2401'>
<a name='L2402'>    <b>if</b> (recvlen &lt; 0) <font color='red'>{</font>
<a name='L2403'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2404'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L2405'>                        "negative buffersize in recv_into");
<a name='L2406'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2407'>    <font color='red'>}</font>
<a name='L2408'>    <b>if</b> (recvlen == 0) <font color='red'>{</font>
<a name='L2409'>        <i><font color='green'>/* If nbytes was not specified, use the buffer's length */</font></i>
<a name='L2410'>        recvlen = buflen;
<a name='L2411'>    <font color='red'>}</font>
<a name='L2412'>
<a name='L2413'>    <i><font color='green'>/* Check if the buffer is large enough */</font></i>
<a name='L2414'>    <b>if</b> (buflen &lt; recvlen) <font color='red'>{</font>
<a name='L2415'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2416'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L2417'>                        "buffer too small for requested bytes");
<a name='L2418'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2419'>    <font color='red'>}</font>
<a name='L2420'>
<a name='L2421'>    <i><font color='green'>/* Call the guts */</font></i>
<a name='L2422'>    readlen = <a href='../S/2711.html#L2251' title='Defined at 2251 in Modules/socketmodule.c.'>sock_recv_guts</a>(s, buf, recvlen, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L2423'>    <b>if</b> (readlen &lt; 0) <font color='red'>{</font>
<a name='L2424'>        <i><font color='green'>/* Return an error. */</font></i>
<a name='L2425'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2426'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2427'>    <font color='red'>}</font>
<a name='L2428'>
<a name='L2429'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2430'>    <i><font color='green'>/* Return the number of bytes read.  Note that we do not do anything</font></i>
<a name='L2431'><i><font color='green'>       special here in the case that readlen &lt; recvlen. */</font></i>
<a name='L2432'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(readlen);
<a name='L2433'><font color='red'>}</font>
<a name='L2434'>
<a name='L2435'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(recv_into_doc,
<a name='L2436'>"recv_into(buffer, [nbytes[, flags]]) -&gt; nbytes_read\n\
<a name='L2437'>\n\
<a name='L2438'>A version of recv() that stores its data into a buffer rather than creating \n\
<a name='L2439'>a new string.  Receive up to buffersize bytes from the socket.  If buffersize \n\
<a name='L2440'>is not specified (or 0), receive up to the size available in the given buffer.\n\
<a name='L2441'>\n\
<a name='L2442'>See recv() for documentation about the flags.");
<a name='L2443'>
<a name='L2444'>
<a name='L2445'><i><font color='green'>/*</font></i>
<a name='L2446'><i><font color='green'> * This is the guts of the recvfrom() and recvfrom_into() methods, which reads</font></i>
<a name='L2447'><i><font color='green'> * into a char buffer.  If you have any inc/def ref to do to the objects that</font></i>
<a name='L2448'><i><font color='green'> * contain the buffer, do it in the caller.  This function returns the number</font></i>
<a name='L2449'><i><font color='green'> * of bytes succesfully read.  If there was an error, it returns -1.  Note</font></i>
<a name='L2450'><i><font color='green'> * that it is also possible that we return a number of bytes smaller than the</font></i>
<a name='L2451'><i><font color='green'> * request bytes.</font></i>
<a name='L2452'><i><font color='green'> *</font></i>
<a name='L2453'><i><font color='green'> * 'addr' is a return value for the address object.  Note that you must decref</font></i>
<a name='L2454'><i><font color='green'> * it yourself.</font></i>
<a name='L2455'><i><font color='green'> */</font></i>
<a name='L2456'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L2457'><a href='../R/10392.html' title='Multiple refered from 2 places.'>sock_recvfrom_guts</a>(PySocketSockObject *s, <b>char</b>* cbuf, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len, <b>int</b> flags,
<a name='L2458'>                   PyObject** addr)
<a name='L2459'><font color='red'>{</font>
<a name='L2460'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L2461'>    <b>int</b> timeout;
<a name='L2462'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = -1;
<a name='L2463'>    <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> addrlen;
<a name='L2464'>
<a name='L2465'>    *addr = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2466'>
<a name='L2467'>    <b>if</b> (!<a href='../S/2711.html#L1579' title='Defined at 1579 in Modules/socketmodule.c.'>getsockaddrlen</a>(s, &amp;addrlen))
<a name='L2468'>        <b>return</b> -1;
<a name='L2469'>
<a name='L2470'>    <b>if</b> (!<a href='../D/1795.html' title='Multiple defined in 3 places.'>IS_SELECTABLE</a>(s)) <font color='red'>{</font>
<a name='L2471'>        <a href='../S/2711.html#L473' title='Defined at 473 in Modules/socketmodule.c.'>select_error</a>();
<a name='L2472'>        <b>return</b> -1;
<a name='L2473'>    <font color='red'>}</font>
<a name='L2474'>
<a name='L2475'>    <a href='../S/2711.html#L741' title='Defined at 741 in Modules/socketmodule.c.'>BEGIN_SELECT_LOOP</a>(s)
<a name='L2476'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2477'>    memset(&amp;addrbuf, 0, addrlen);
<a name='L2478'>    timeout = <a href='../S/2711.html#L659' title='Defined at 659 in Modules/socketmodule.c.'>internal_select_ex</a>(s, 0, interval);
<a name='L2479'>    <b>if</b> (!timeout) <font color='red'>{</font>
<a name='L2480'><font color='darkred'>#ifndef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L2481'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>) &amp;&amp; !<b>defined</b>(<a href='../S/2894.html#L13' title='Defined at 13 in PC/os2emx/pyconfig.h.'>PYCC_GCC</a>)
<a name='L2482'>        n = recvfrom(s-&gt;sock_fd, cbuf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>,
<a name='L2483'>                     <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen);
<a name='L2484'><font color='darkred'>#else</font>
<a name='L2485'>        n = recvfrom(s-&gt;sock_fd, cbuf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>,
<a name='L2486'>                     (<b>void</b> *) &amp;addrbuf, &amp;addrlen);
<a name='L2487'><font color='darkred'>#endif</font>
<a name='L2488'><font color='darkred'>#else</font>
<a name='L2489'>        n = recvfrom(s-&gt;sock_fd, cbuf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>,
<a name='L2490'>                     <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen);
<a name='L2491'><font color='darkred'>#endif</font>
<a name='L2492'>    <font color='red'>}</font>
<a name='L2493'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2494'>
<a name='L2495'>    <b>if</b> (timeout == 1) <font color='red'>{</font>
<a name='L2496'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_timeout, "timed out");
<a name='L2497'>        <b>return</b> -1;
<a name='L2498'>    <font color='red'>}</font>
<a name='L2499'>    <a href='../S/2711.html#L754' title='Defined at 754 in Modules/socketmodule.c.'>END_SELECT_LOOP</a>(s)
<a name='L2500'>    <b>if</b> (n &lt; 0) <font color='red'>{</font>
<a name='L2501'>        s-&gt;errorhandler();
<a name='L2502'>        <b>return</b> -1;
<a name='L2503'>    <font color='red'>}</font>
<a name='L2504'>
<a name='L2505'>    <b>if</b> (!(*addr = <a href='../S/2711.html#L1015' title='Defined at 1015 in Modules/socketmodule.c.'>makesockaddr</a>(s-&gt;sock_fd, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf),
<a name='L2506'>                               addrlen, s-&gt;sock_proto)))
<a name='L2507'>        <b>return</b> -1;
<a name='L2508'>
<a name='L2509'>    <b>return</b> n;
<a name='L2510'><font color='red'>}</font>
<a name='L2511'>
<a name='L2512'><i><font color='green'>/* s.recvfrom(nbytes [,flags]) method */</font></i>
<a name='L2513'>
<a name='L2514'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2515'><a href='../S/2711.html#L2906' title='Refered from 2906 in Modules/socketmodule.c.'>sock_recvfrom</a>(PySocketSockObject *s, PyObject *args)
<a name='L2516'><font color='red'>{</font>
<a name='L2517'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *buf = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2518'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addr = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2519'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2520'>    <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L2521'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> recvlen, outlen;
<a name='L2522'>
<a name='L2523'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "n|i:recvfrom", &amp;recvlen, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>))
<a name='L2524'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2525'>
<a name='L2526'>    <b>if</b> (recvlen &lt; 0) <font color='red'>{</font>
<a name='L2527'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L2528'>                        "negative buffersize in recvfrom");
<a name='L2529'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2530'>    <font color='red'>}</font>
<a name='L2531'>
<a name='L2532'>    buf = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>((<b>char</b> *) 0, recvlen);
<a name='L2533'>    <b>if</b> (buf == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2534'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2535'>
<a name='L2536'>    outlen = <a href='../S/2711.html#L2457' title='Defined at 2457 in Modules/socketmodule.c.'>sock_recvfrom_guts</a>(s, PyBytes_AS_STRING(buf),
<a name='L2537'>                                recvlen, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, &amp;addr);
<a name='L2538'>    <b>if</b> (outlen &lt; 0) <font color='red'>{</font>
<a name='L2539'>        <b>goto</b> finally;
<a name='L2540'>    <font color='red'>}</font>
<a name='L2541'>
<a name='L2542'>    <b>if</b> (outlen != recvlen) <font color='red'>{</font>
<a name='L2543'>        <i><font color='green'>/* We did not read as many bytes as we anticipated, resize the</font></i>
<a name='L2544'><i><font color='green'>           string if possible and be succesful. */</font></i>
<a name='L2545'>        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;buf, outlen) &lt; 0)
<a name='L2546'>            <i><font color='green'>/* Oopsy, not so succesful after all. */</font></i>
<a name='L2547'>            <b>goto</b> finally;
<a name='L2548'>    <font color='red'>}</font>
<a name='L2549'>
<a name='L2550'>    ret = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(2, buf, addr);
<a name='L2551'>
<a name='L2552'>finally:
<a name='L2553'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(buf);
<a name='L2554'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(addr);
<a name='L2555'>    <b>return</b> ret;
<a name='L2556'><font color='red'>}</font>
<a name='L2557'>
<a name='L2558'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(recvfrom_doc,
<a name='L2559'>"recvfrom(buffersize[, flags]) -&gt; (data, address info)\n\
<a name='L2560'>\n\
<a name='L2561'>Like recv(buffersize, flags) but also return the sender's address info.");
<a name='L2562'>
<a name='L2563'>
<a name='L2564'><i><font color='green'>/* s.recvfrom_into(buffer[, nbytes [,flags]]) method */</font></i>
<a name='L2565'>
<a name='L2566'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2567'><a href='../S/2711.html#L2908' title='Refered from 2908 in Modules/socketmodule.c.'>sock_recvfrom_into</a>(PySocketSockObject *s, PyObject *args, PyObject* kwds)
<a name='L2568'><font color='red'>{</font>
<a name='L2569'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"buffer", "nbytes", "flags", 0<font color='red'>}</font>;
<a name='L2570'>
<a name='L2571'>    <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L2572'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuf;
<a name='L2573'>    <b>char</b> *buf;
<a name='L2574'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> readlen, buflen, recvlen = 0;
<a name='L2575'>
<a name='L2576'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addr = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2577'>
<a name='L2578'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "w*|ni:recvfrom_into",
<a name='L2579'>                                     kwlist, &amp;pbuf,
<a name='L2580'>                                     &amp;recvlen, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>))
<a name='L2581'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2582'>    buf = pbuf.buf;
<a name='L2583'>    buflen = pbuf.len;
<a name='L2584'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(buf != 0 &amp;&amp; buflen &gt; 0);
<a name='L2585'>
<a name='L2586'>    <b>if</b> (recvlen &lt; 0) <font color='red'>{</font>
<a name='L2587'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2588'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L2589'>                        "negative buffersize in recvfrom_into");
<a name='L2590'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2591'>    <font color='red'>}</font>
<a name='L2592'>    <b>if</b> (recvlen == 0) <font color='red'>{</font>
<a name='L2593'>        <i><font color='green'>/* If nbytes was not specified, use the buffer's length */</font></i>
<a name='L2594'>        recvlen = buflen;
<a name='L2595'>    <font color='red'>}</font>
<a name='L2596'>
<a name='L2597'>    readlen = <a href='../S/2711.html#L2457' title='Defined at 2457 in Modules/socketmodule.c.'>sock_recvfrom_guts</a>(s, buf, recvlen, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, &amp;addr);
<a name='L2598'>    <b>if</b> (readlen &lt; 0) <font color='red'>{</font>
<a name='L2599'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2600'>        <i><font color='green'>/* Return an error */</font></i>
<a name='L2601'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(addr);
<a name='L2602'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2603'>    <font color='red'>}</font>
<a name='L2604'>
<a name='L2605'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2606'>    <i><font color='green'>/* Return the number of bytes read and the address.  Note that we do</font></i>
<a name='L2607'><i><font color='green'>       not do anything special here in the case that readlen &lt; recvlen. */</font></i>
<a name='L2608'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("nN", readlen, addr);
<a name='L2609'><font color='red'>}</font>
<a name='L2610'>
<a name='L2611'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(recvfrom_into_doc,
<a name='L2612'>"recvfrom_into(buffer[, nbytes[, flags]]) -&gt; (nbytes, address info)\n\
<a name='L2613'>\n\
<a name='L2614'>Like recv_into(buffer[, nbytes[, flags]]) but also return the sender's address info.");
<a name='L2615'>
<a name='L2616'>
<a name='L2617'><i><font color='green'>/* s.send(data [,flags]) method */</font></i>
<a name='L2618'>
<a name='L2619'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2620'><a href='../S/2711.html#L2910' title='Refered from 2910 in Modules/socketmodule.c.'>sock_send</a>(PySocketSockObject *s, PyObject *args)
<a name='L2621'><font color='red'>{</font>
<a name='L2622'>    <b>char</b> *buf;
<a name='L2623'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len, n = -1;
<a name='L2624'>    <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0, timeout;
<a name='L2625'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuf;
<a name='L2626'>
<a name='L2627'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*|i:send", &amp;pbuf, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>))
<a name='L2628'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2629'>
<a name='L2630'>    <b>if</b> (!<a href='../D/1795.html' title='Multiple defined in 3 places.'>IS_SELECTABLE</a>(s)) <font color='red'>{</font>
<a name='L2631'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2632'>        <b>return</b> <a href='../S/2711.html#L473' title='Defined at 473 in Modules/socketmodule.c.'>select_error</a>();
<a name='L2633'>    <font color='red'>}</font>
<a name='L2634'>    buf = pbuf.buf;
<a name='L2635'>    len = pbuf.len;
<a name='L2636'>
<a name='L2637'>    <a href='../S/2711.html#L741' title='Defined at 741 in Modules/socketmodule.c.'>BEGIN_SELECT_LOOP</a>(s)
<a name='L2638'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2639'>    timeout = <a href='../S/2711.html#L659' title='Defined at 659 in Modules/socketmodule.c.'>internal_select_ex</a>(s, 1, interval);
<a name='L2640'>    <b>if</b> (!timeout)
<a name='L2641'><font color='darkred'>#ifdef</font> __VMS
<a name='L2642'>        n = <a href='../S/2711.html#L591' title='Defined at 591 in Modules/socketmodule.c.'>sendsegmented</a>(s-&gt;sock_fd, buf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L2643'><font color='darkred'>#else</font>
<a name='L2644'>        n = send(s-&gt;sock_fd, buf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L2645'><font color='darkred'>#endif</font>
<a name='L2646'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2647'>    <b>if</b> (timeout == 1) <font color='red'>{</font>
<a name='L2648'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2649'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_timeout, "timed out");
<a name='L2650'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2651'>    <font color='red'>}</font>
<a name='L2652'>    <a href='../S/2711.html#L754' title='Defined at 754 in Modules/socketmodule.c.'>END_SELECT_LOOP</a>(s)
<a name='L2653'>
<a name='L2654'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2655'>    <b>if</b> (n &lt; 0)
<a name='L2656'>        <b>return</b> s-&gt;errorhandler();
<a name='L2657'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(n);
<a name='L2658'><font color='red'>}</font>
<a name='L2659'>
<a name='L2660'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(send_doc,
<a name='L2661'>"send(data[, flags]) -&gt; count\n\
<a name='L2662'>\n\
<a name='L2663'>Send a data string to the socket.  For the optional flags\n\
<a name='L2664'>argument, see the Unix manual.  Return the number of bytes\n\
<a name='L2665'>sent; this may be less than len(data) if the network is busy.");
<a name='L2666'>
<a name='L2667'>
<a name='L2668'><i><font color='green'>/* s.sendall(data [,flags]) method */</font></i>
<a name='L2669'>
<a name='L2670'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2671'><a href='../S/2711.html#L2912' title='Refered from 2912 in Modules/socketmodule.c.'>sock_sendall</a>(PySocketSockObject *s, PyObject *args)
<a name='L2672'><font color='red'>{</font>
<a name='L2673'>    <b>char</b> *buf;
<a name='L2674'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len, n = -1;
<a name='L2675'>    <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0, timeout, saved_errno;
<a name='L2676'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuf;
<a name='L2677'>
<a name='L2678'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*|i:sendall", &amp;pbuf, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>))
<a name='L2679'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2680'>    buf = pbuf.buf;
<a name='L2681'>    len = pbuf.len;
<a name='L2682'>
<a name='L2683'>    <b>if</b> (!<a href='../D/1795.html' title='Multiple defined in 3 places.'>IS_SELECTABLE</a>(s)) <font color='red'>{</font>
<a name='L2684'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2685'>        <b>return</b> <a href='../S/2711.html#L473' title='Defined at 473 in Modules/socketmodule.c.'>select_error</a>();
<a name='L2686'>    <font color='red'>}</font>
<a name='L2687'>
<a name='L2688'>    <b>do</b> <font color='red'>{</font>
<a name='L2689'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2690'>        timeout = <a href='../S/2711.html#L717' title='Defined at 717 in Modules/socketmodule.c.'>internal_select</a>(s, 1);
<a name='L2691'>        n = -1;
<a name='L2692'>        <b>if</b> (!timeout) <font color='red'>{</font>
<a name='L2693'><font color='darkred'>#ifdef</font> __VMS
<a name='L2694'>            n = <a href='../S/2711.html#L591' title='Defined at 591 in Modules/socketmodule.c.'>sendsegmented</a>(s-&gt;sock_fd, buf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L2695'><font color='darkred'>#else</font>
<a name='L2696'>            n = send(s-&gt;sock_fd, buf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L2697'><font color='darkred'>#endif</font>
<a name='L2698'>        <font color='red'>}</font>
<a name='L2699'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2700'>        <b>if</b> (timeout == 1) <font color='red'>{</font>
<a name='L2701'>            <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2702'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_timeout, "timed out");
<a name='L2703'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2704'>        <font color='red'>}</font>
<a name='L2705'>        <i><font color='green'>/* PyErr_CheckSignals() might change errno */</font></i>
<a name='L2706'>        saved_errno = errno;
<a name='L2707'>        <i><font color='green'>/* We must run our signal handlers before looping again.</font></i>
<a name='L2708'><i><font color='green'>           send() can return a successful partial write when it is</font></i>
<a name='L2709'><i><font color='green'>           interrupted, so we can't restrict ourselves to EINTR. */</font></i>
<a name='L2710'>        <b>if</b> (<a href='../D/3143.html' title='Multiple defined in 2 places.'>PyErr_CheckSignals</a>()) <font color='red'>{</font>
<a name='L2711'>            <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2712'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2713'>        <font color='red'>}</font>
<a name='L2714'>        <b>if</b> (n &lt; 0) <font color='red'>{</font>
<a name='L2715'>            <i><font color='green'>/* If interrupted, try again */</font></i>
<a name='L2716'>            <b>if</b> (saved_errno == EINTR)
<a name='L2717'>                <b>continue</b>;
<a name='L2718'>            <b>else</b>
<a name='L2719'>                <b>break</b>;
<a name='L2720'>        <font color='red'>}</font>
<a name='L2721'>        buf += n;
<a name='L2722'>        len -= n;
<a name='L2723'>    <font color='red'>}</font> <b>while</b> (len &gt; 0);
<a name='L2724'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2725'>
<a name='L2726'>    <b>if</b> (n &lt; 0)
<a name='L2727'>        <b>return</b> s-&gt;errorhandler();
<a name='L2728'>
<a name='L2729'>    Py_INCREF(Py_None);
<a name='L2730'>    <b>return</b> Py_None;
<a name='L2731'><font color='red'>}</font>
<a name='L2732'>
<a name='L2733'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(sendall_doc,
<a name='L2734'>"sendall(data[, flags])\n\
<a name='L2735'>\n\
<a name='L2736'>Send a data string to the socket.  For the optional flags\n\
<a name='L2737'>argument, see the Unix manual.  This calls send() repeatedly\n\
<a name='L2738'>until all data is sent.  If an error occurs, it's impossible\n\
<a name='L2739'>to tell how much data has been sent.");
<a name='L2740'>
<a name='L2741'>
<a name='L2742'><i><font color='green'>/* s.sendto(data, [flags,] sockaddr) method */</font></i>
<a name='L2743'>
<a name='L2744'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2745'><a href='../S/2711.html#L2914' title='Refered from 2914 in Modules/socketmodule.c.'>sock_sendto</a>(PySocketSockObject *s, PyObject *args)
<a name='L2746'><font color='red'>{</font>
<a name='L2747'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuf;
<a name='L2748'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addro;
<a name='L2749'>    <b>char</b> *buf;
<a name='L2750'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L2751'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L2752'>    <b>int</b> addrlen, n = -1, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, timeout;
<a name='L2753'>
<a name='L2754'>    <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L2755'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*O:sendto", &amp;pbuf, &amp;addro)) <font color='red'>{</font>
<a name='L2756'>        <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L2757'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*iO:sendto",
<a name='L2758'>                              &amp;pbuf, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, &amp;addro))
<a name='L2759'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2760'>    <font color='red'>}</font>
<a name='L2761'>    buf = pbuf.buf;
<a name='L2762'>    len = pbuf.len;
<a name='L2763'>
<a name='L2764'>    <b>if</b> (!<a href='../D/1795.html' title='Multiple defined in 3 places.'>IS_SELECTABLE</a>(s)) <font color='red'>{</font>
<a name='L2765'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2766'>        <b>return</b> <a href='../S/2711.html#L473' title='Defined at 473 in Modules/socketmodule.c.'>select_error</a>();
<a name='L2767'>    <font color='red'>}</font>
<a name='L2768'>
<a name='L2769'>    <b>if</b> (!<a href='../S/2711.html#L1217' title='Defined at 1217 in Modules/socketmodule.c.'>getsockaddrarg</a>(s, addro, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), &amp;addrlen)) <font color='red'>{</font>
<a name='L2770'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2771'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2772'>    <font color='red'>}</font>
<a name='L2773'>
<a name='L2774'>    <a href='../S/2711.html#L741' title='Defined at 741 in Modules/socketmodule.c.'>BEGIN_SELECT_LOOP</a>(s)
<a name='L2775'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2776'>    timeout = <a href='../S/2711.html#L659' title='Defined at 659 in Modules/socketmodule.c.'>internal_select_ex</a>(s, 1, interval);
<a name='L2777'>    <b>if</b> (!timeout)
<a name='L2778'>        n = sendto(s-&gt;sock_fd, buf, len, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), addrlen);
<a name='L2779'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2780'>
<a name='L2781'>    <b>if</b> (timeout == 1) <font color='red'>{</font>
<a name='L2782'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2783'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_timeout, "timed out");
<a name='L2784'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2785'>    <font color='red'>}</font>
<a name='L2786'>    <a href='../S/2711.html#L754' title='Defined at 754 in Modules/socketmodule.c.'>END_SELECT_LOOP</a>(s)
<a name='L2787'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L2788'>    <b>if</b> (n &lt; 0)
<a name='L2789'>        <b>return</b> s-&gt;errorhandler();
<a name='L2790'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(n);
<a name='L2791'><font color='red'>}</font>
<a name='L2792'>
<a name='L2793'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(sendto_doc,
<a name='L2794'>"sendto(data[, flags], address) -&gt; count\n\
<a name='L2795'>\n\
<a name='L2796'>Like send(data, flags) but allows specifying the destination address.\n\
<a name='L2797'>For IP sockets, the address is a pair (hostaddr, port).");
<a name='L2798'>
<a name='L2799'>
<a name='L2800'><i><font color='green'>/* s.shutdown(how) method */</font></i>
<a name='L2801'>
<a name='L2802'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2803'><a href='../S/2711.html#L2924' title='Refered from 2924 in Modules/socketmodule.c.'>sock_shutdown</a>(PySocketSockObject *s, PyObject *arg)
<a name='L2804'><font color='red'>{</font>
<a name='L2805'>    <b>int</b> how;
<a name='L2806'>    <b>int</b> res;
<a name='L2807'>
<a name='L2808'>    how = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L2809'>    <b>if</b> (how == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2810'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2811'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L2812'>    res = shutdown(s-&gt;sock_fd, how);
<a name='L2813'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L2814'>    <b>if</b> (res &lt; 0)
<a name='L2815'>        <b>return</b> s-&gt;errorhandler();
<a name='L2816'>    Py_INCREF(Py_None);
<a name='L2817'>    <b>return</b> Py_None;
<a name='L2818'><font color='red'>}</font>
<a name='L2819'>
<a name='L2820'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(shutdown_doc,
<a name='L2821'>"shutdown(flag)\n\
<a name='L2822'>\n\
<a name='L2823'>Shut down the reading side of the socket (flag == SHUT_RD), the writing side\n\
<a name='L2824'>of the socket (flag == SHUT_WR), or both ends (flag == SHUT_RDWR).");
<a name='L2825'>
<a name='L2826'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>) &amp;&amp; <b>defined</b>(SIO_RCVALL)
<a name='L2827'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L2828'><a href='../S/2711.html#L2897' title='Refered from 2897 in Modules/socketmodule.c.'>sock_ioctl</a>(PySocketSockObject *s, PyObject *arg)
<a name='L2829'><font color='red'>{</font>
<a name='L2830'>    <b>unsigned</b> <b>long</b> cmd = SIO_RCVALL;
<a name='L2831'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *argO;
<a name='L2832'>    DWORD recv;
<a name='L2833'>
<a name='L2834'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, "kO:ioctl", &amp;cmd, &amp;argO))
<a name='L2835'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2836'>
<a name='L2837'>    <b>switch</b> (cmd) <font color='red'>{</font>
<a name='L2838'>    <b>case</b> SIO_RCVALL: <font color='red'>{</font>
<a name='L2839'>        <b>unsigned</b> <b>int</b> option = RCVALL_ON;
<a name='L2840'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, "kI:ioctl", &amp;cmd, &amp;option))
<a name='L2841'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2842'>        <b>if</b> (WSAIoctl(s-&gt;sock_fd, cmd, &amp;option, <b>sizeof</b>(option),
<a name='L2843'>                         <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0, &amp;recv, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) == SOCKET_ERROR) <font color='red'>{</font>
<a name='L2844'>            <b>return</b> <a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>();
<a name='L2845'>        <font color='red'>}</font>
<a name='L2846'>        <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(recv); <font color='red'>}</font>
<a name='L2847'>    <b>case</b> SIO_KEEPALIVE_VALS: <font color='red'>{</font>
<a name='L2848'>        <b>struct</b> tcp_keepalive ka;
<a name='L2849'>        <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, "k(kkk):ioctl", &amp;cmd,
<a name='L2850'>                        &amp;ka.onoff, &amp;ka.keepalivetime, &amp;ka.keepaliveinterval))
<a name='L2851'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2852'>        <b>if</b> (WSAIoctl(s-&gt;sock_fd, cmd, &amp;ka, <b>sizeof</b>(ka),
<a name='L2853'>                         <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0, &amp;recv, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) == SOCKET_ERROR) <font color='red'>{</font>
<a name='L2854'>            <b>return</b> <a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>();
<a name='L2855'>        <font color='red'>}</font>
<a name='L2856'>        <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(recv); <font color='red'>}</font>
<a name='L2857'>    <b>default</b>:
<a name='L2858'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError, "invalid ioctl command %d", cmd);
<a name='L2859'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2860'>    <font color='red'>}</font>
<a name='L2861'><font color='red'>}</font>
<a name='L2862'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(sock_ioctl_doc,
<a name='L2863'>"ioctl(cmd, option) -&gt; long\n\
<a name='L2864'>\n\
<a name='L2865'>Control the socket with WSAIoctl syscall. Currently supported 'cmd' values are\n\
<a name='L2866'>SIO_RCVALL:  'option' must be one of the socket.RCVALL_* constants.\n\
<a name='L2867'>SIO_KEEPALIVE_VALS:  'option' is a tuple of (onoff, timeout, interval).");
<a name='L2868'>
<a name='L2869'><font color='darkred'>#endif</font>
<a name='L2870'>
<a name='L2871'><i><font color='green'>/* List of methods for socket objects */</font></i>
<a name='L2872'>
<a name='L2873'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> sock_methods[] = <font color='red'>{</font>
<a name='L2874'>    <font color='red'>{</font>"_accept",           (PyCFunction)<a href='../S/2711.html#L1670' title='Defined at 1670 in Modules/socketmodule.c.'>sock_accept</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L2875'>                      accept_doc<font color='red'>}</font>,
<a name='L2876'>    <font color='red'>{</font>"bind",              (PyCFunction)<a href='../S/2711.html#L1917' title='Defined at 1917 in Modules/socketmodule.c.'>sock_bind</a>, METH_O,
<a name='L2877'>                      bind_doc<font color='red'>}</font>,
<a name='L2878'>    <font color='red'>{</font>"close",             (PyCFunction)<a href='../S/2711.html#L1947' title='Defined at 1947 in Modules/socketmodule.c.'>sock_close</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L2879'>                      close_doc<font color='red'>}</font>,
<a name='L2880'>    <font color='red'>{</font>"connect",           (PyCFunction)<a href='../S/2711.html#L2073' title='Defined at 2073 in Modules/socketmodule.c.'>sock_connect</a>, METH_O,
<a name='L2881'>                      connect_doc<font color='red'>}</font>,
<a name='L2882'>    <font color='red'>{</font>"connect_ex",        (PyCFunction)<a href='../S/2711.html#L2107' title='Defined at 2107 in Modules/socketmodule.c.'>sock_connect_ex</a>, METH_O,
<a name='L2883'>                      connect_ex_doc<font color='red'>}</font>,
<a name='L2884'>    <font color='red'>{</font>"detach",            (PyCFunction)<a href='../S/2711.html#L1967' title='Defined at 1967 in Modules/socketmodule.c.'>sock_detach</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L2885'>                      detach_doc<font color='red'>}</font>,
<a name='L2886'>    <font color='red'>{</font>"fileno",            (PyCFunction)<a href='../S/2711.html#L2141' title='Defined at 2141 in Modules/socketmodule.c.'>sock_fileno</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L2887'>                      fileno_doc<font color='red'>}</font>,
<a name='L2888'><font color='darkred'>#ifdef</font> <a href='../D/1506.html' title='Multiple defined in 3 places.'>HAVE_GETPEERNAME</a>
<a name='L2889'>    <font color='red'>{</font>"getpeername",       (PyCFunction)<a href='../S/2711.html#L2184' title='Defined at 2184 in Modules/socketmodule.c.'>sock_getpeername</a>,
<a name='L2890'>                      <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, getpeername_doc<font color='red'>}</font>,
<a name='L2891'><font color='darkred'>#endif</font>
<a name='L2892'>    <font color='red'>{</font>"getsockname",       (PyCFunction)<a href='../S/2711.html#L2155' title='Defined at 2155 in Modules/socketmodule.c.'>sock_getsockname</a>,
<a name='L2893'>                      <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, getsockname_doc<font color='red'>}</font>,
<a name='L2894'>    <font color='red'>{</font>"getsockopt",        (PyCFunction)<a href='../S/2711.html#L1861' title='Defined at 1861 in Modules/socketmodule.c.'>sock_getsockopt</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L2895'>                      getsockopt_doc<font color='red'>}</font>,
<a name='L2896'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>) &amp;&amp; <b>defined</b>(SIO_RCVALL)
<a name='L2897'>    <font color='red'>{</font>"ioctl",             (PyCFunction)<a href='../S/2711.html#L2828' title='Defined at 2828 in Modules/socketmodule.c.'>sock_ioctl</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L2898'>                      sock_ioctl_doc<font color='red'>}</font>,
<a name='L2899'><font color='darkred'>#endif</font>
<a name='L2900'>    <font color='red'>{</font>"listen",            (PyCFunction)<a href='../S/2711.html#L2214' title='Defined at 2214 in Modules/socketmodule.c.'>sock_listen</a>, METH_O,
<a name='L2901'>                      listen_doc<font color='red'>}</font>,
<a name='L2902'>    <font color='red'>{</font>"recv",              (PyCFunction)<a href='../S/2711.html#L2337' title='Defined at 2337 in Modules/socketmodule.c.'>sock_recv</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L2903'>                      recv_doc<font color='red'>}</font>,
<a name='L2904'>    <font color='red'>{</font>"recv_into",         (PyCFunction)<a href='../S/2711.html#L2386' title='Defined at 2386 in Modules/socketmodule.c.'>sock_recv_into</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS,
<a name='L2905'>                      recv_into_doc<font color='red'>}</font>,
<a name='L2906'>    <font color='red'>{</font>"recvfrom",          (PyCFunction)<a href='../S/2711.html#L2515' title='Defined at 2515 in Modules/socketmodule.c.'>sock_recvfrom</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L2907'>                      recvfrom_doc<font color='red'>}</font>,
<a name='L2908'>    <font color='red'>{</font>"recvfrom_into",  (PyCFunction)<a href='../S/2711.html#L2567' title='Defined at 2567 in Modules/socketmodule.c.'>sock_recvfrom_into</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS,
<a name='L2909'>                      recvfrom_into_doc<font color='red'>}</font>,
<a name='L2910'>    <font color='red'>{</font>"send",              (PyCFunction)<a href='../S/2711.html#L2620' title='Defined at 2620 in Modules/socketmodule.c.'>sock_send</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L2911'>                      send_doc<font color='red'>}</font>,
<a name='L2912'>    <font color='red'>{</font>"sendall",           (PyCFunction)<a href='../S/2711.html#L2671' title='Defined at 2671 in Modules/socketmodule.c.'>sock_sendall</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L2913'>                      sendall_doc<font color='red'>}</font>,
<a name='L2914'>    <font color='red'>{</font>"sendto",            (PyCFunction)<a href='../S/2711.html#L2745' title='Defined at 2745 in Modules/socketmodule.c.'>sock_sendto</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L2915'>                      sendto_doc<font color='red'>}</font>,
<a name='L2916'>    <font color='red'>{</font>"setblocking",       (PyCFunction)<a href='../S/2711.html#L1735' title='Defined at 1735 in Modules/socketmodule.c.'>sock_setblocking</a>, METH_O,
<a name='L2917'>                      setblocking_doc<font color='red'>}</font>,
<a name='L2918'>    <font color='red'>{</font>"settimeout",    (PyCFunction)<a href='../S/2711.html#L1764' title='Defined at 1764 in Modules/socketmodule.c.'>sock_settimeout</a>, METH_O,
<a name='L2919'>                      settimeout_doc<font color='red'>}</font>,
<a name='L2920'>    <font color='red'>{</font>"gettimeout",    (PyCFunction)<a href='../S/2711.html#L1798' title='Defined at 1798 in Modules/socketmodule.c.'>sock_gettimeout</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L2921'>                      gettimeout_doc<font color='red'>}</font>,
<a name='L2922'>    <font color='red'>{</font>"setsockopt",        (PyCFunction)<a href='../S/2711.html#L1821' title='Defined at 1821 in Modules/socketmodule.c.'>sock_setsockopt</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L2923'>                      setsockopt_doc<font color='red'>}</font>,
<a name='L2924'>    <font color='red'>{</font>"shutdown",          (PyCFunction)<a href='../S/2711.html#L2803' title='Defined at 2803 in Modules/socketmodule.c.'>sock_shutdown</a>, METH_O,
<a name='L2925'>                      shutdown_doc<font color='red'>}</font>,
<a name='L2926'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,                      <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>           <i><font color='green'>/* sentinel */</font></i>
<a name='L2927'><font color='red'>}</font>;
<a name='L2928'>
<a name='L2929'><i><font color='green'>/* SockObject members */</font></i>
<a name='L2930'><b>static</b> <a href='../D/3506.html' title='Multiple defined in 2 places.'>PyMemberDef</a> sock_memberlist[] = <font color='red'>{</font>
<a name='L2931'>       <font color='red'>{</font>"family", <a href='../S/577.html#L39' title='Defined at 39 in Include/structmember.h.'>T_INT</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a>, sock_family), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a>, "the socket family"<font color='red'>}</font>,
<a name='L2932'>       <font color='red'>{</font>"type", <a href='../S/577.html#L39' title='Defined at 39 in Include/structmember.h.'>T_INT</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a>, sock_type), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a>, "the socket type"<font color='red'>}</font>,
<a name='L2933'>       <font color='red'>{</font>"proto", <a href='../S/577.html#L39' title='Defined at 39 in Include/structmember.h.'>T_INT</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a>, sock_proto), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a>, "the socket protocol"<font color='red'>}</font>,
<a name='L2934'>       <font color='red'>{</font>"timeout", <a href='../S/577.html#L42' title='Defined at 42 in Include/structmember.h.'>T_DOUBLE</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a>, sock_timeout), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a>, "the socket timeout"<font color='red'>}</font>,
<a name='L2935'>       <font color='red'>{</font>0<font color='red'>}</font>,
<a name='L2936'><font color='red'>}</font>;
<a name='L2937'>
<a name='L2938'><i><font color='green'>/* Deallocate a socket object in response to the last Py_DECREF().</font></i>
<a name='L2939'><i><font color='green'>   First close the file description. */</font></i>
<a name='L2940'>
<a name='L2941'><b>static</b> <b>void</b>
<a name='L2942'><a href='../S/2711.html#L3052' title='Refered from 3052 in Modules/socketmodule.c.'>sock_dealloc</a>(PySocketSockObject *s)
<a name='L2943'><font color='red'>{</font>
<a name='L2944'>    <b>if</b> (s-&gt;sock_fd != -1) <font color='red'>{</font>
<a name='L2945'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc, *val, *tb;
<a name='L2946'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> old_refcount = <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(s);
<a name='L2947'>        ++<a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(s);
<a name='L2948'>        <a href='../S/3106.html#L304' title='Defined at 304 in Python/errors.c.'>PyErr_Fetch</a>(&amp;exc, &amp;val, &amp;tb);
<a name='L2949'>        <b>if</b> (<a href='../S/3087.html#L732' title='Defined at 732 in Python/_warnings.c.'>PyErr_WarnFormat</a>(PyExc_ResourceWarning, 1,
<a name='L2950'>                             "unclosed %R", s))
<a name='L2951'>            <i><font color='green'>/* Spurious errors can appear at shutdown */</font></i>
<a name='L2952'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_Warning))
<a name='L2953'>                <a href='../S/3106.html#L708' title='Defined at 708 in Python/errors.c.'>PyErr_WriteUnraisable</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) s);
<a name='L2954'>        <a href='../S/3106.html#L25' title='Defined at 25 in Python/errors.c.'>PyErr_Restore</a>(exc, val, tb);
<a name='L2955'>        (<b>void</b>) <a href='../D/4772.html' title='Multiple defined in 3 places.'>SOCKETCLOSE</a>(s-&gt;sock_fd);
<a name='L2956'>        <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(s) = old_refcount;
<a name='L2957'>    <font color='red'>}</font>
<a name='L2958'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(s)-&gt;tp_free((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)s);
<a name='L2959'><font color='red'>}</font>
<a name='L2960'>
<a name='L2961'>
<a name='L2962'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2963'><a href='../S/2711.html#L3057' title='Refered from 3057 in Modules/socketmodule.c.'>sock_repr</a>(PySocketSockObject *s)
<a name='L2964'><font color='red'>{</font>
<a name='L2965'><font color='darkred'>#if</font> <a href='../D/4741.html' title='Multiple defined in 3 places.'>SIZEOF_SOCKET_T</a> &gt; <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>
<a name='L2966'>    <b>if</b> (s-&gt;sock_fd &gt; <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>) <font color='red'>{</font>
<a name='L2967'>        <i><font color='green'>/* this can occur on Win64, and actually there is a special</font></i>
<a name='L2968'><i><font color='green'>           ugly printf formatter for decimal pointer length integer</font></i>
<a name='L2969'><i><font color='green'>           printing, only bother if necessary*/</font></i>
<a name='L2970'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L2971'>                        "no printf formatter to display "
<a name='L2972'>                        "the socket descriptor in decimal");
<a name='L2973'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2974'>    <font color='red'>}</font>
<a name='L2975'><font color='darkred'>#endif</font>
<a name='L2976'>    <b>return</b> <a href='../D/4008.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormat</a>(
<a name='L2977'>        "&lt;socket object, fd=%ld, family=%d, type=%d, proto=%d&gt;",
<a name='L2978'>        (<b>long</b>)s-&gt;sock_fd, s-&gt;sock_family,
<a name='L2979'>        s-&gt;sock_type,
<a name='L2980'>        s-&gt;sock_proto);
<a name='L2981'><font color='red'>}</font>
<a name='L2982'>
<a name='L2983'>
<a name='L2984'><i><font color='green'>/* Create a new, uninitialized socket object. */</font></i>
<a name='L2985'>
<a name='L2986'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2987'><a href='../S/2711.html#L3085' title='Refered from 3085 in Modules/socketmodule.c.'>sock_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L2988'><font color='red'>{</font>
<a name='L2989'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *new;
<a name='L2990'>
<a name='L2991'>    new = type-&gt;tp_alloc(type, 0);
<a name='L2992'>    <b>if</b> (new != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2993'>        ((<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *)new)-&gt;sock_fd = -1;
<a name='L2994'>        ((<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *)new)-&gt;sock_timeout = -1.0;
<a name='L2995'>        ((<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *)new)-&gt;errorhandler = &amp;<a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>;
<a name='L2996'>    <font color='red'>}</font>
<a name='L2997'>    <b>return</b> new;
<a name='L2998'><font color='red'>}</font>
<a name='L2999'>
<a name='L3000'>
<a name='L3001'><i><font color='green'>/* Initialize a new socket object. */</font></i>
<a name='L3002'>
<a name='L3003'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3004'><b>static</b> <b>int</b>
<a name='L3005'><a href='../S/2711.html#L3083' title='Refered from 3083 in Modules/socketmodule.c.'>sock_initobj</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L3006'><font color='red'>{</font>
<a name='L3007'>    <a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *s = (<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *)self;
<a name='L3008'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fdobj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3009'>    <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> fd = <a href='../S/2711.html#L433' title='Defined at 433 in Modules/socketmodule.c.'>INVALID_SOCKET</a>;
<a name='L3010'>    <b>int</b> family = AF_INET, type = SOCK_STREAM, proto = 0;
<a name='L3011'>    <b>static</b> <b>char</b> *keywords[] = <font color='red'>{</font>"family", "type", "proto", "fileno", 0<font color='red'>}</font>;
<a name='L3012'>
<a name='L3013'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds,
<a name='L3014'>                                     "|iiiO:socket", keywords,
<a name='L3015'>                                     &amp;family, &amp;type, &amp;proto, &amp;fdobj))
<a name='L3016'>        <b>return</b> -1;
<a name='L3017'>
<a name='L3018'>    <b>if</b> (fdobj != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; fdobj != Py_None) <font color='red'>{</font>
<a name='L3019'>        fd = <a href='../D/3454.html' title='Multiple defined in 2 places.'>PyLong_AsSocket_t</a>(fdobj);
<a name='L3020'>        <b>if</b> (fd == (<a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a>)(-1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3021'>            <b>return</b> -1;
<a name='L3022'>        <b>if</b> (fd == <a href='../S/2711.html#L433' title='Defined at 433 in Modules/socketmodule.c.'>INVALID_SOCKET</a>) <font color='red'>{</font>
<a name='L3023'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L3024'>                            "can't use invalid socket value");
<a name='L3025'>            <b>return</b> -1;
<a name='L3026'>        <font color='red'>}</font>
<a name='L3027'>    <font color='red'>}</font>
<a name='L3028'>    <b>else</b> <font color='red'>{</font>
<a name='L3029'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L3030'>        fd = socket(family, type, proto);
<a name='L3031'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L3032'>
<a name='L3033'>        <b>if</b> (fd == <a href='../S/2711.html#L433' title='Defined at 433 in Modules/socketmodule.c.'>INVALID_SOCKET</a>) <font color='red'>{</font>
<a name='L3034'>            <a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>();
<a name='L3035'>            <b>return</b> -1;
<a name='L3036'>        <font color='red'>}</font>
<a name='L3037'>    <font color='red'>}</font>
<a name='L3038'>    <a href='../S/2711.html#L768' title='Defined at 768 in Modules/socketmodule.c.'>init_sockobject</a>(s, fd, family, type, proto);
<a name='L3039'>
<a name='L3040'>    <b>return</b> 0;
<a name='L3041'>
<a name='L3042'><font color='red'>}</font>
<a name='L3043'>
<a name='L3044'>
<a name='L3045'><i><font color='green'>/* Type object for socket objects. */</font></i>
<a name='L3046'>
<a name='L3047'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> sock_type = <font color='red'>{</font>
<a name='L3048'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(0, 0)         <i><font color='green'>/* Must fill in type value later */</font></i>
<a name='L3049'>    "_socket.socket",                           <i><font color='green'>/* tp_name */</font></i>
<a name='L3050'>    <b>sizeof</b>(<a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a>),                 <i><font color='green'>/* tp_basicsize */</font></i>
<a name='L3051'>    0,                                          <i><font color='green'>/* tp_itemsize */</font></i>
<a name='L3052'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2711.html#L2942' title='Defined at 2942 in Modules/socketmodule.c.'>sock_dealloc</a>,                   <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L3053'>    0,                                          <i><font color='green'>/* tp_print */</font></i>
<a name='L3054'>    0,                                          <i><font color='green'>/* tp_getattr */</font></i>
<a name='L3055'>    0,                                          <i><font color='green'>/* tp_setattr */</font></i>
<a name='L3056'>    0,                                          <i><font color='green'>/* tp_reserved */</font></i>
<a name='L3057'>    (reprfunc)<a href='../S/2711.html#L2963' title='Defined at 2963 in Modules/socketmodule.c.'>sock_repr</a>,                        <i><font color='green'>/* tp_repr */</font></i>
<a name='L3058'>    0,                                          <i><font color='green'>/* tp_as_number */</font></i>
<a name='L3059'>    0,                                          <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L3060'>    0,                                          <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L3061'>    0,                                          <i><font color='green'>/* tp_hash */</font></i>
<a name='L3062'>    0,                                          <i><font color='green'>/* tp_call */</font></i>
<a name='L3063'>    0,                                          <i><font color='green'>/* tp_str */</font></i>
<a name='L3064'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,                    <i><font color='green'>/* tp_getattro */</font></i>
<a name='L3065'>    0,                                          <i><font color='green'>/* tp_setattro */</font></i>
<a name='L3066'>    0,                                          <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L3067'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE, <i><font color='green'>/* tp_flags */</font></i>
<a name='L3068'>    sock_doc,                                   <i><font color='green'>/* tp_doc */</font></i>
<a name='L3069'>    0,                                          <i><font color='green'>/* tp_traverse */</font></i>
<a name='L3070'>    0,                                          <i><font color='green'>/* tp_clear */</font></i>
<a name='L3071'>    0,                                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L3072'>    0,                                          <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L3073'>    0,                                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L3074'>    0,                                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L3075'>    sock_methods,                               <i><font color='green'>/* tp_methods */</font></i>
<a name='L3076'>    sock_memberlist,                            <i><font color='green'>/* tp_members */</font></i>
<a name='L3077'>    0,                                          <i><font color='green'>/* tp_getset */</font></i>
<a name='L3078'>    0,                                          <i><font color='green'>/* tp_base */</font></i>
<a name='L3079'>    0,                                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L3080'>    0,                                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L3081'>    0,                                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L3082'>    0,                                          <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L3083'>    <a href='../S/2711.html#L3005' title='Defined at 3005 in Modules/socketmodule.c.'>sock_initobj</a>,                               <i><font color='green'>/* tp_init */</font></i>
<a name='L3084'>    <a href='../S/2824.html#L700' title='Defined at 700 in Objects/typeobject.c.'>PyType_GenericAlloc</a>,                        <i><font color='green'>/* tp_alloc */</font></i>
<a name='L3085'>    <a href='../S/2711.html#L2987' title='Defined at 2987 in Modules/socketmodule.c.'>sock_new</a>,                                   <i><font color='green'>/* tp_new */</font></i>
<a name='L3086'>    PyObject_Del,                               <i><font color='green'>/* tp_free */</font></i>
<a name='L3087'><font color='red'>}</font>;
<a name='L3088'>
<a name='L3089'>
<a name='L3090'><i><font color='green'>/* Python interface to gethostname(). */</font></i>
<a name='L3091'>
<a name='L3092'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3093'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3094'><a href='../S/2711.html#L4234' title='Refered from 4234 in Modules/socketmodule.c.'>socket_gethostname</a>(PyObject *self, PyObject *unused)
<a name='L3095'><font color='red'>{</font>
<a name='L3096'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L3097'>    <i><font color='green'>/* Don't use winsock's gethostname, as this returns the ANSI</font></i>
<a name='L3098'><i><font color='green'>       version of the hostname, whereas we need a Unicode string.</font></i>
<a name='L3099'><i><font color='green'>       Otherwise, gethostname apparently also returns the DNS name. */</font></i>
<a name='L3100'>    wchar_t buf[MAX_COMPUTERNAME_LENGTH + 1];
<a name='L3101'>    DWORD size = <b>sizeof</b>(buf) / <b>sizeof</b>(wchar_t);
<a name='L3102'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L3103'>    <b>if</b> (!GetComputerNameExW(ComputerNamePhysicalDnsHostname, buf, &amp;size)) <font color='red'>{</font>
<a name='L3104'>        <b>if</b> (GetLastError() == ERROR_MORE_DATA) <font color='red'>{</font>
<a name='L3105'>            <i><font color='green'>/* MSDN says this may occur "because DNS allows longer names */</font></i>
<a name='L3106'>            <b>if</b> (size == 0) <i><font color='green'>/* XXX: I'm not sure how to handle this */</font></i>
<a name='L3107'>                <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L3108'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, size - 1);
<a name='L3109'>            <b>if</b> (!<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)
<a name='L3110'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3111'>            <b>if</b> (GetComputerNameExW(ComputerNamePhysicalDnsHostname,
<a name='L3112'>                                   <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>),
<a name='L3113'>                                   &amp;size))
<a name='L3114'>                <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L3115'>            Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L3116'>        <font color='red'>}</font>
<a name='L3117'>        <b>return</b> <a href='../S/3106.html#L541' title='Defined at 541 in Python/errors.c.'>PyErr_SetExcFromWindowsErr</a>(PyExc_WindowsError, GetLastError());
<a name='L3118'>    <font color='red'>}</font>
<a name='L3119'>    <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(buf, size);            
<a name='L3120'><font color='darkred'>#else</font>
<a name='L3121'>    <b>char</b> buf[1024];
<a name='L3122'>    <b>int</b> res;
<a name='L3123'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L3124'>    res = gethostname(buf, (<b>int</b>) <b>sizeof</b> buf - 1);
<a name='L3125'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L3126'>    <b>if</b> (res &lt; 0)
<a name='L3127'>        <b>return</b> <a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>();
<a name='L3128'>    buf[<b>sizeof</b> buf - 1] = '\0';
<a name='L3129'>    <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(buf);
<a name='L3130'><font color='darkred'>#endif</font>
<a name='L3131'><font color='red'>}</font>
<a name='L3132'>
<a name='L3133'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(gethostname_doc,
<a name='L3134'>"gethostname() -&gt; string\n\
<a name='L3135'>\n\
<a name='L3136'>Return the current host name.");
<a name='L3137'>
<a name='L3138'>
<a name='L3139'><i><font color='green'>/* Python interface to gethostbyname(name). */</font></i>
<a name='L3140'>
<a name='L3141'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3142'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3143'><a href='../S/2711.html#L4228' title='Refered from 4228 in Modules/socketmodule.c.'>socket_gethostbyname</a>(PyObject *self, PyObject *args)
<a name='L3144'><font color='red'>{</font>
<a name='L3145'>    <b>char</b> *name;
<a name='L3146'>    <a href='../S/2712.html#L126' title='Defined at 126 in Modules/socketmodule.h.'>sock_addr_t</a> addrbuf;
<a name='L3147'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3148'>
<a name='L3149'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "et:gethostbyname", "idna", &amp;name))
<a name='L3150'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3151'>    <b>if</b> (<a href='../S/2711.html#L822' title='Defined at 822 in Modules/socketmodule.c.'>setipaddr</a>(name, <a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf),  <b>sizeof</b>(addrbuf), AF_INET) &lt; 0)
<a name='L3152'>        <b>goto</b> finally;
<a name='L3153'>    ret = <a href='../S/2711.html#L948' title='Defined at 948 in Modules/socketmodule.c.'>makeipaddr</a>(<a href='../S/2711.html#L420' title='Defined at 420 in Modules/socketmodule.c.'>SAS2SA</a>(&amp;addrbuf), <b>sizeof</b>(<b>struct</b> sockaddr_in));
<a name='L3154'>finally:
<a name='L3155'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(name);
<a name='L3156'>    <b>return</b> ret;
<a name='L3157'><font color='red'>}</font>
<a name='L3158'>
<a name='L3159'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(gethostbyname_doc,
<a name='L3160'>"gethostbyname(host) -&gt; address\n\
<a name='L3161'>\n\
<a name='L3162'>Return the IP address (a string of the form '255.255.255.255') for a host.");
<a name='L3163'>
<a name='L3164'>
<a name='L3165'><i><font color='green'>/* Convenience function common to gethostbyname_ex and gethostbyaddr */</font></i>
<a name='L3166'>
<a name='L3167'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3168'><a href='../R/8150.html' title='Multiple refered from 2 places.'>gethost_common</a>(<b>struct</b> hostent *h, <b>struct</b> sockaddr *addr, <b>int</b> alen, <b>int</b> af)
<a name='L3169'><font color='red'>{</font>
<a name='L3170'>    <b>char</b> **pch;
<a name='L3171'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *rtn_tuple = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3172'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *name_list = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3173'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addr_list = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3174'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tmp;
<a name='L3175'>
<a name='L3176'>    <b>if</b> (h == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3177'>        <i><font color='green'>/* Let's get real error message to return */</font></i>
<a name='L3178'>        <a href='../S/2711.html#L546' title='Defined at 546 in Modules/socketmodule.c.'>set_herror</a>(h_errno);
<a name='L3179'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3180'>    <font color='red'>}</font>
<a name='L3181'>
<a name='L3182'>    <b>if</b> (h-&gt;h_addrtype != af) <font color='red'>{</font>
<a name='L3183'>        <i><font color='green'>/* Let's get real error message to return */</font></i>
<a name='L3184'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L3185'>                        (<b>char</b> *)strerror(<a href='../S/2711.html#L369' title='Defined at 369 in Modules/socketmodule.c.'>EAFNOSUPPORT</a>));
<a name='L3186'>
<a name='L3187'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3188'>    <font color='red'>}</font>
<a name='L3189'>
<a name='L3190'>    <b>switch</b> (af) <font color='red'>{</font>
<a name='L3191'>
<a name='L3192'>    <b>case</b> AF_INET:
<a name='L3193'>        <b>if</b> (alen &lt; <b>sizeof</b>(<b>struct</b> sockaddr_in))
<a name='L3194'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3195'>        <b>break</b>;
<a name='L3196'>
<a name='L3197'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3198'>    <b>case</b> AF_INET6:
<a name='L3199'>        <b>if</b> (alen &lt; <b>sizeof</b>(<b>struct</b> sockaddr_in6))
<a name='L3200'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3201'>        <b>break</b>;
<a name='L3202'><font color='darkred'>#endif</font>
<a name='L3203'>
<a name='L3204'>    <font color='red'>}</font>
<a name='L3205'>
<a name='L3206'>    <b>if</b> ((name_list = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3207'>        <b>goto</b> err;
<a name='L3208'>
<a name='L3209'>    <b>if</b> ((addr_list = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3210'>        <b>goto</b> err;
<a name='L3211'>
<a name='L3212'>    <i><font color='green'>/* SF #1511317: h_aliases can be NULL */</font></i>
<a name='L3213'>    <b>if</b> (h-&gt;h_aliases) <font color='red'>{</font>
<a name='L3214'>        <b>for</b> (pch = h-&gt;h_aliases; *pch != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; pch++) <font color='red'>{</font>
<a name='L3215'>            <b>int</b> status;
<a name='L3216'>            tmp = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(*pch);
<a name='L3217'>            <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3218'>                <b>goto</b> err;
<a name='L3219'>
<a name='L3220'>            status = <a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(name_list, tmp);
<a name='L3221'>            Py_DECREF(tmp);
<a name='L3222'>
<a name='L3223'>            <b>if</b> (status)
<a name='L3224'>                <b>goto</b> err;
<a name='L3225'>        <font color='red'>}</font>
<a name='L3226'>    <font color='red'>}</font>
<a name='L3227'>
<a name='L3228'>    <b>for</b> (pch = h-&gt;h_addr_list; *pch != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; pch++) <font color='red'>{</font>
<a name='L3229'>        <b>int</b> status;
<a name='L3230'>
<a name='L3231'>        <b>switch</b> (af) <font color='red'>{</font>
<a name='L3232'>
<a name='L3233'>        <b>case</b> AF_INET:
<a name='L3234'>            <font color='red'>{</font>
<a name='L3235'>            <b>struct</b> sockaddr_in sin;
<a name='L3236'>            memset(&amp;sin, 0, <b>sizeof</b>(sin));
<a name='L3237'>            sin.sin_family = af;
<a name='L3238'><font color='darkred'>#ifdef</font> HAVE_SOCKADDR_SA_LEN
<a name='L3239'>            sin.sin_len = <b>sizeof</b>(sin);
<a name='L3240'><font color='darkred'>#endif</font>
<a name='L3241'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;sin.sin_addr, *pch, <b>sizeof</b>(sin.sin_addr));
<a name='L3242'>            tmp = <a href='../S/2711.html#L948' title='Defined at 948 in Modules/socketmodule.c.'>makeipaddr</a>((<b>struct</b> sockaddr *)&amp;sin, <b>sizeof</b>(sin));
<a name='L3243'>
<a name='L3244'>            <b>if</b> (pch == h-&gt;h_addr_list &amp;&amp; alen &gt;= <b>sizeof</b>(sin))
<a name='L3245'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *) addr, &amp;sin, <b>sizeof</b>(sin));
<a name='L3246'>            <b>break</b>;
<a name='L3247'>            <font color='red'>}</font>
<a name='L3248'>
<a name='L3249'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3250'>        <b>case</b> AF_INET6:
<a name='L3251'>            <font color='red'>{</font>
<a name='L3252'>            <b>struct</b> sockaddr_in6 sin6;
<a name='L3253'>            memset(&amp;sin6, 0, <b>sizeof</b>(sin6));
<a name='L3254'>            sin6.sin6_family = af;
<a name='L3255'><font color='darkred'>#ifdef</font> HAVE_SOCKADDR_SA_LEN
<a name='L3256'>            sin6.sin6_len = <b>sizeof</b>(sin6);
<a name='L3257'><font color='darkred'>#endif</font>
<a name='L3258'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;sin6.sin6_addr, *pch, <b>sizeof</b>(sin6.sin6_addr));
<a name='L3259'>            tmp = <a href='../S/2711.html#L948' title='Defined at 948 in Modules/socketmodule.c.'>makeipaddr</a>((<b>struct</b> sockaddr *)&amp;sin6,
<a name='L3260'>                <b>sizeof</b>(sin6));
<a name='L3261'>
<a name='L3262'>            <b>if</b> (pch == h-&gt;h_addr_list &amp;&amp; alen &gt;= <b>sizeof</b>(sin6))
<a name='L3263'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *) addr, &amp;sin6, <b>sizeof</b>(sin6));
<a name='L3264'>            <b>break</b>;
<a name='L3265'>            <font color='red'>}</font>
<a name='L3266'><font color='darkred'>#endif</font>
<a name='L3267'>
<a name='L3268'>        <b>default</b>:                <i><font color='green'>/* can't happen */</font></i>
<a name='L3269'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L3270'>                            "unsupported address family");
<a name='L3271'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3272'>        <font color='red'>}</font>
<a name='L3273'>
<a name='L3274'>        <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3275'>            <b>goto</b> err;
<a name='L3276'>
<a name='L3277'>        status = <a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(addr_list, tmp);
<a name='L3278'>        Py_DECREF(tmp);
<a name='L3279'>
<a name='L3280'>        <b>if</b> (status)
<a name='L3281'>            <b>goto</b> err;
<a name='L3282'>    <font color='red'>}</font>
<a name='L3283'>
<a name='L3284'>    rtn_tuple = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("sOO", h-&gt;h_name, name_list, addr_list);
<a name='L3285'>
<a name='L3286'> err:
<a name='L3287'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(name_list);
<a name='L3288'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(addr_list);
<a name='L3289'>    <b>return</b> rtn_tuple;
<a name='L3290'><font color='red'>}</font>
<a name='L3291'>
<a name='L3292'>
<a name='L3293'><i><font color='green'>/* Python interface to gethostbyname_ex(name). */</font></i>
<a name='L3294'>
<a name='L3295'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3296'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3297'><a href='../S/2711.html#L4230' title='Refered from 4230 in Modules/socketmodule.c.'>socket_gethostbyname_ex</a>(PyObject *self, PyObject *args)
<a name='L3298'><font color='red'>{</font>
<a name='L3299'>    <b>char</b> *name;
<a name='L3300'>    <b>struct</b> hostent *h;
<a name='L3301'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3302'>    <b>struct</b> <a href='../S/2620.html#L153' title='Defined at 153 in Modules/addrinfo.h.'>sockaddr_storage</a> addr;
<a name='L3303'><font color='darkred'>#else</font>
<a name='L3304'>    <b>struct</b> sockaddr_in addr;
<a name='L3305'><font color='darkred'>#endif</font>
<a name='L3306'>    <b>struct</b> sockaddr *sa;
<a name='L3307'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3308'><font color='darkred'>#ifdef</font> <a href='../D/1499.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R</a>
<a name='L3309'>    <b>struct</b> hostent hp_allocated;
<a name='L3310'><font color='darkred'>#ifdef</font> <a href='../D/1500.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R_3_ARG</a>
<a name='L3311'>    <b>struct</b> hostent_data data;
<a name='L3312'><font color='darkred'>#else</font>
<a name='L3313'>    <b>char</b> buf[16384];
<a name='L3314'>    <b>int</b> buf_len = (<b>sizeof</b> buf) - 1;
<a name='L3315'>    <b>int</b> errnop;
<a name='L3316'><font color='darkred'>#endif</font>
<a name='L3317'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/1500.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R_3_ARG</a>) || <b>defined</b>(<a href='../S/2711.html#L150' title='Defined at 150 in Modules/socketmodule.c.'>HAVE_GETHOSTBYNAME_R_6_ARG</a>)
<a name='L3318'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L3319'><font color='darkred'>#endif</font>
<a name='L3320'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_GETHOSTBYNAME_R */</font></i>
<a name='L3321'>
<a name='L3322'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "et:gethostbyname_ex", "idna", &amp;name))
<a name='L3323'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3324'>    <b>if</b> (<a href='../S/2711.html#L822' title='Defined at 822 in Modules/socketmodule.c.'>setipaddr</a>(name, (<b>struct</b> sockaddr *)&amp;addr, <b>sizeof</b>(addr), AF_INET) &lt; 0)
<a name='L3325'>        <b>goto</b> finally;
<a name='L3326'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L3327'><font color='darkred'>#ifdef</font> <a href='../D/1499.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R</a>
<a name='L3328'><font color='darkred'>#if</font>   <b>defined</b>(<a href='../S/2711.html#L150' title='Defined at 150 in Modules/socketmodule.c.'>HAVE_GETHOSTBYNAME_R_6_ARG</a>)
<a name='L3329'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = gethostbyname_r(name, &amp;hp_allocated, buf, buf_len,
<a name='L3330'>                             &amp;h, &amp;errnop);
<a name='L3331'><font color='darkred'>#elif</font> <b>defined</b>(<a href='../D/1501.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R_5_ARG</a>)
<a name='L3332'>    h = gethostbyname_r(name, &amp;hp_allocated, buf, buf_len, &amp;errnop);
<a name='L3333'><font color='darkred'>#else</font> <i><font color='green'>/* HAVE_GETHOSTBYNAME_R_3_ARG */</font></i>
<a name='L3334'>    memset((<b>void</b> *) &amp;data, '\0', <b>sizeof</b>(data));
<a name='L3335'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = gethostbyname_r(name, &amp;hp_allocated, &amp;data);
<a name='L3336'>    h = (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != 0) ? <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> : &amp;hp_allocated;
<a name='L3337'><font color='darkred'>#endif</font>
<a name='L3338'><font color='darkred'>#else</font> <i><font color='green'>/* not HAVE_GETHOSTBYNAME_R */</font></i>
<a name='L3339'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L171' title='Defined at 171 in Modules/socketmodule.c.'>USE_GETHOSTBYNAME_LOCK</a>
<a name='L3340'>    <a href='../D/3846.html' title='Multiple defined in 10 places.'>PyThread_acquire_lock</a>(netdb_lock, 1);
<a name='L3341'><font color='darkred'>#endif</font>
<a name='L3342'>    h = gethostbyname(name);
<a name='L3343'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_GETHOSTBYNAME_R */</font></i>
<a name='L3344'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L3345'>    <i><font color='green'>/* Some C libraries would require addr.__ss_family instead of</font></i>
<a name='L3346'><i><font color='green'>       addr.ss_family.</font></i>
<a name='L3347'><i><font color='green'>       Therefore, we cast the sockaddr_storage into sockaddr to</font></i>
<a name='L3348'><i><font color='green'>       access sa_family. */</font></i>
<a name='L3349'>    sa = (<b>struct</b> sockaddr*)&amp;addr;
<a name='L3350'>    ret = <a href='../S/2711.html#L3168' title='Defined at 3168 in Modules/socketmodule.c.'>gethost_common</a>(h, (<b>struct</b> sockaddr *)&amp;addr, <b>sizeof</b>(addr),
<a name='L3351'>                         sa-&gt;sa_family);
<a name='L3352'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L171' title='Defined at 171 in Modules/socketmodule.c.'>USE_GETHOSTBYNAME_LOCK</a>
<a name='L3353'>    <a href='../D/3858.html' title='Multiple defined in 11 places.'>PyThread_release_lock</a>(netdb_lock);
<a name='L3354'><font color='darkred'>#endif</font>
<a name='L3355'>finally:
<a name='L3356'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(name);
<a name='L3357'>    <b>return</b> ret;
<a name='L3358'><font color='red'>}</font>
<a name='L3359'>
<a name='L3360'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(ghbn_ex_doc,
<a name='L3361'>"gethostbyname_ex(host) -&gt; (name, aliaslist, addresslist)\n\
<a name='L3362'>\n\
<a name='L3363'>Return the true host name, a list of aliases, and a list of IP addresses,\n\
<a name='L3364'>for a host.  The host argument is a string giving a host name or IP number.");
<a name='L3365'>
<a name='L3366'>
<a name='L3367'><i><font color='green'>/* Python interface to gethostbyaddr(IP). */</font></i>
<a name='L3368'>
<a name='L3369'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3370'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3371'><a href='../S/2711.html#L4232' title='Refered from 4232 in Modules/socketmodule.c.'>socket_gethostbyaddr</a>(PyObject *self, PyObject *args)
<a name='L3372'><font color='red'>{</font>
<a name='L3373'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3374'>    <b>struct</b> <a href='../S/2620.html#L153' title='Defined at 153 in Modules/addrinfo.h.'>sockaddr_storage</a> addr;
<a name='L3375'><font color='darkred'>#else</font>
<a name='L3376'>    <b>struct</b> sockaddr_in addr;
<a name='L3377'><font color='darkred'>#endif</font>
<a name='L3378'>    <b>struct</b> sockaddr *sa = (<b>struct</b> sockaddr *)&amp;addr;
<a name='L3379'>    <b>char</b> *ip_num;
<a name='L3380'>    <b>struct</b> hostent *h;
<a name='L3381'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3382'><font color='darkred'>#ifdef</font> <a href='../D/1499.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R</a>
<a name='L3383'>    <b>struct</b> hostent hp_allocated;
<a name='L3384'><font color='darkred'>#ifdef</font> <a href='../D/1500.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R_3_ARG</a>
<a name='L3385'>    <b>struct</b> hostent_data data;
<a name='L3386'><font color='darkred'>#else</font>
<a name='L3387'>    <i><font color='green'>/* glibcs up to 2.10 assume that the buf argument to</font></i>
<a name='L3388'><i><font color='green'>       gethostbyaddr_r is 8-byte aligned, which at least llvm-gcc</font></i>
<a name='L3389'><i><font color='green'>       does not ensure. The attribute below instructs the compiler</font></i>
<a name='L3390'><i><font color='green'>       to maintain this alignment. */</font></i>
<a name='L3391'>    <b>char</b> buf[16384] <a href='../D/4073.html' title='Multiple defined in 2 places.'>Py_ALIGNED</a>(8);
<a name='L3392'>    <b>int</b> buf_len = (<b>sizeof</b> buf) - 1;
<a name='L3393'>    <b>int</b> errnop;
<a name='L3394'><font color='darkred'>#endif</font>
<a name='L3395'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/1500.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R_3_ARG</a>) || <b>defined</b>(<a href='../S/2711.html#L150' title='Defined at 150 in Modules/socketmodule.c.'>HAVE_GETHOSTBYNAME_R_6_ARG</a>)
<a name='L3396'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L3397'><font color='darkred'>#endif</font>
<a name='L3398'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_GETHOSTBYNAME_R */</font></i>
<a name='L3399'>    <b>char</b> *ap;
<a name='L3400'>    <b>int</b> al;
<a name='L3401'>    <b>int</b> af;
<a name='L3402'>
<a name='L3403'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "et:gethostbyaddr", "idna", &amp;ip_num))
<a name='L3404'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3405'>    af = AF_UNSPEC;
<a name='L3406'>    <b>if</b> (<a href='../S/2711.html#L822' title='Defined at 822 in Modules/socketmodule.c.'>setipaddr</a>(ip_num, sa, <b>sizeof</b>(addr), af) &lt; 0)
<a name='L3407'>        <b>goto</b> finally;
<a name='L3408'>    af = sa-&gt;sa_family;
<a name='L3409'>    ap = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3410'>    al = 0;
<a name='L3411'>    <b>switch</b> (af) <font color='red'>{</font>
<a name='L3412'>    <b>case</b> AF_INET:
<a name='L3413'>        ap = (<b>char</b> *)&amp;((<b>struct</b> sockaddr_in *)sa)-&gt;sin_addr;
<a name='L3414'>        al = <b>sizeof</b>(((<b>struct</b> sockaddr_in *)sa)-&gt;sin_addr);
<a name='L3415'>        <b>break</b>;
<a name='L3416'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3417'>    <b>case</b> AF_INET6:
<a name='L3418'>        ap = (<b>char</b> *)&amp;((<b>struct</b> sockaddr_in6 *)sa)-&gt;sin6_addr;
<a name='L3419'>        al = <b>sizeof</b>(((<b>struct</b> sockaddr_in6 *)sa)-&gt;sin6_addr);
<a name='L3420'>        <b>break</b>;
<a name='L3421'><font color='darkred'>#endif</font>
<a name='L3422'>    <b>default</b>:
<a name='L3423'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "unsupported address family");
<a name='L3424'>        <b>goto</b> finally;
<a name='L3425'>    <font color='red'>}</font>
<a name='L3426'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L3427'><font color='darkred'>#ifdef</font> <a href='../D/1499.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R</a>
<a name='L3428'><font color='darkred'>#if</font>   <b>defined</b>(<a href='../S/2711.html#L150' title='Defined at 150 in Modules/socketmodule.c.'>HAVE_GETHOSTBYNAME_R_6_ARG</a>)
<a name='L3429'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = gethostbyaddr_r(ap, al, af,
<a name='L3430'>        &amp;hp_allocated, buf, buf_len,
<a name='L3431'>        &amp;h, &amp;errnop);
<a name='L3432'><font color='darkred'>#elif</font> <b>defined</b>(<a href='../D/1501.html' title='Multiple defined in 2 places.'>HAVE_GETHOSTBYNAME_R_5_ARG</a>)
<a name='L3433'>    h = gethostbyaddr_r(ap, al, af,
<a name='L3434'>                        &amp;hp_allocated, buf, buf_len, &amp;errnop);
<a name='L3435'><font color='darkred'>#else</font> <i><font color='green'>/* HAVE_GETHOSTBYNAME_R_3_ARG */</font></i>
<a name='L3436'>    memset((<b>void</b> *) &amp;data, '\0', <b>sizeof</b>(data));
<a name='L3437'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = gethostbyaddr_r(ap, al, af, &amp;hp_allocated, &amp;data);
<a name='L3438'>    h = (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != 0) ? <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> : &amp;hp_allocated;
<a name='L3439'><font color='darkred'>#endif</font>
<a name='L3440'><font color='darkred'>#else</font> <i><font color='green'>/* not HAVE_GETHOSTBYNAME_R */</font></i>
<a name='L3441'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L171' title='Defined at 171 in Modules/socketmodule.c.'>USE_GETHOSTBYNAME_LOCK</a>
<a name='L3442'>    <a href='../D/3846.html' title='Multiple defined in 10 places.'>PyThread_acquire_lock</a>(netdb_lock, 1);
<a name='L3443'><font color='darkred'>#endif</font>
<a name='L3444'>    h = gethostbyaddr(ap, al, af);
<a name='L3445'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_GETHOSTBYNAME_R */</font></i>
<a name='L3446'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L3447'>    ret = <a href='../S/2711.html#L3168' title='Defined at 3168 in Modules/socketmodule.c.'>gethost_common</a>(h, (<b>struct</b> sockaddr *)&amp;addr, <b>sizeof</b>(addr), af);
<a name='L3448'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L171' title='Defined at 171 in Modules/socketmodule.c.'>USE_GETHOSTBYNAME_LOCK</a>
<a name='L3449'>    <a href='../D/3858.html' title='Multiple defined in 11 places.'>PyThread_release_lock</a>(netdb_lock);
<a name='L3450'><font color='darkred'>#endif</font>
<a name='L3451'>finally:
<a name='L3452'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(ip_num);
<a name='L3453'>    <b>return</b> ret;
<a name='L3454'><font color='red'>}</font>
<a name='L3455'>
<a name='L3456'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(gethostbyaddr_doc,
<a name='L3457'>"gethostbyaddr(host) -&gt; (name, aliaslist, addresslist)\n\
<a name='L3458'>\n\
<a name='L3459'>Return the true host name, a list of aliases, and a list of IP addresses,\n\
<a name='L3460'>for a host.  The host argument is a string giving a host name or IP number.");
<a name='L3461'>
<a name='L3462'>
<a name='L3463'><i><font color='green'>/* Python interface to getservbyname(name).</font></i>
<a name='L3464'><i><font color='green'>   This only returns the port number, since the other info is already</font></i>
<a name='L3465'><i><font color='green'>   known or not useful (like the list of aliases). */</font></i>
<a name='L3466'>
<a name='L3467'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3468'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3469'><a href='../S/2711.html#L4236' title='Refered from 4236 in Modules/socketmodule.c.'>socket_getservbyname</a>(PyObject *self, PyObject *args)
<a name='L3470'><font color='red'>{</font>
<a name='L3471'>    <b>char</b> *name, *proto=<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3472'>    <b>struct</b> servent *sp;
<a name='L3473'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "s|s:getservbyname", &amp;name, &amp;proto))
<a name='L3474'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3475'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L3476'>    sp = getservbyname(name, proto);
<a name='L3477'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L3478'>    <b>if</b> (sp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3479'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "service/proto not found");
<a name='L3480'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3481'>    <font color='red'>}</font>
<a name='L3482'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>) ntohs(sp-&gt;s_port));
<a name='L3483'><font color='red'>}</font>
<a name='L3484'>
<a name='L3485'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getservbyname_doc,
<a name='L3486'>"getservbyname(servicename[, protocolname]) -&gt; integer\n\
<a name='L3487'>\n\
<a name='L3488'>Return a port number from a service name and protocol name.\n\
<a name='L3489'>The optional protocol name, if given, should be 'tcp' or 'udp',\n\
<a name='L3490'>otherwise any protocol will match.");
<a name='L3491'>
<a name='L3492'>
<a name='L3493'><i><font color='green'>/* Python interface to getservbyport(port).</font></i>
<a name='L3494'><i><font color='green'>   This only returns the service name, since the other info is already</font></i>
<a name='L3495'><i><font color='green'>   known or not useful (like the list of aliases). */</font></i>
<a name='L3496'>
<a name='L3497'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3498'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3499'><a href='../S/2711.html#L4238' title='Refered from 4238 in Modules/socketmodule.c.'>socket_getservbyport</a>(PyObject *self, PyObject *args)
<a name='L3500'><font color='red'>{</font>
<a name='L3501'>    <b>int</b> port;
<a name='L3502'>    <b>char</b> *proto=<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3503'>    <b>struct</b> servent *sp;
<a name='L3504'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "i|s:getservbyport", &amp;port, &amp;proto))
<a name='L3505'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3506'>    <b>if</b> (port &lt; 0 || port &gt; 0xffff) <font color='red'>{</font>
<a name='L3507'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(
<a name='L3508'>            PyExc_OverflowError,
<a name='L3509'>            "getservbyport: port must be 0-65535.");
<a name='L3510'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3511'>    <font color='red'>}</font>
<a name='L3512'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L3513'>    sp = getservbyport(htons((<b>short</b>)port), proto);
<a name='L3514'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L3515'>    <b>if</b> (sp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3516'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "port/proto not found");
<a name='L3517'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3518'>    <font color='red'>}</font>
<a name='L3519'>    <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(sp-&gt;s_name);
<a name='L3520'><font color='red'>}</font>
<a name='L3521'>
<a name='L3522'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getservbyport_doc,
<a name='L3523'>"getservbyport(port[, protocolname]) -&gt; string\n\
<a name='L3524'>\n\
<a name='L3525'>Return the service name from a port number and protocol name.\n\
<a name='L3526'>The optional protocol name, if given, should be 'tcp' or 'udp',\n\
<a name='L3527'>otherwise any protocol will match.");
<a name='L3528'>
<a name='L3529'><i><font color='green'>/* Python interface to getprotobyname(name).</font></i>
<a name='L3530'><i><font color='green'>   This only returns the protocol number, since the other info is</font></i>
<a name='L3531'><i><font color='green'>   already known or not useful (like the list of aliases). */</font></i>
<a name='L3532'>
<a name='L3533'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3534'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3535'><a href='../S/2711.html#L4240' title='Refered from 4240 in Modules/socketmodule.c.'>socket_getprotobyname</a>(PyObject *self, PyObject *args)
<a name='L3536'><font color='red'>{</font>
<a name='L3537'>    <b>char</b> *name;
<a name='L3538'>    <b>struct</b> protoent *sp;
<a name='L3539'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "s:getprotobyname", &amp;name))
<a name='L3540'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3541'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L3542'>    sp = getprotobyname(name);
<a name='L3543'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L3544'>    <b>if</b> (sp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3545'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "protocol not found");
<a name='L3546'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3547'>    <font color='red'>}</font>
<a name='L3548'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>) sp-&gt;p_proto);
<a name='L3549'><font color='red'>}</font>
<a name='L3550'>
<a name='L3551'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getprotobyname_doc,
<a name='L3552'>"getprotobyname(name) -&gt; integer\n\
<a name='L3553'>\n\
<a name='L3554'>Return the protocol number for the named protocol.  (Rarely used.)");
<a name='L3555'>
<a name='L3556'>
<a name='L3557'><font color='darkred'>#ifndef</font> <a href='../S/2711.html#L375' title='Defined at 375 in Modules/socketmodule.c.'>NO_DUP</a>
<a name='L3558'><i><font color='green'>/* dup() function for socket fds */</font></i>
<a name='L3559'>
<a name='L3560'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3561'><a href='../S/2711.html#L4243' title='Refered from 4243 in Modules/socketmodule.c.'>socket_dup</a>(PyObject *self, PyObject *fdobj)
<a name='L3562'><font color='red'>{</font>
<a name='L3563'>    <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> fd, newfd;
<a name='L3564'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *newfdobj;
<a name='L3565'>
<a name='L3566'>
<a name='L3567'>    fd = <a href='../D/3454.html' title='Multiple defined in 2 places.'>PyLong_AsSocket_t</a>(fdobj);
<a name='L3568'>    <b>if</b> (fd == (<a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a>)(-1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3569'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3570'>
<a name='L3571'>    newfd = <a href='../D/8281.html' title='Multiple defined in 2 places.'>dup_socket</a>(fd);
<a name='L3572'>    <b>if</b> (newfd == <a href='../S/2711.html#L433' title='Defined at 433 in Modules/socketmodule.c.'>INVALID_SOCKET</a>)
<a name='L3573'>        <b>return</b> <a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>();
<a name='L3574'>
<a name='L3575'>    newfdobj = <a href='../D/3468.html' title='Multiple defined in 2 places.'>PyLong_FromSocket_t</a>(newfd);
<a name='L3576'>    <b>if</b> (newfdobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3577'>        <a href='../D/4772.html' title='Multiple defined in 3 places.'>SOCKETCLOSE</a>(newfd);
<a name='L3578'>    <b>return</b> newfdobj;
<a name='L3579'><font color='red'>}</font>
<a name='L3580'>
<a name='L3581'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(dup_doc,
<a name='L3582'>"dup(integer) -&gt; integer\n\
<a name='L3583'>\n\
<a name='L3584'>Duplicate an integer socket file descriptor.  This is like os.dup(), but for\n\
<a name='L3585'>sockets; on some platforms os.dup() won't work for socket file descriptors.");
<a name='L3586'><font color='darkred'>#endif</font>
<a name='L3587'>
<a name='L3588'>
<a name='L3589'><font color='darkred'>#ifdef</font> HAVE_SOCKETPAIR
<a name='L3590'><i><font color='green'>/* Create a pair of sockets using the socketpair() function.</font></i>
<a name='L3591'><i><font color='green'>   Arguments as for socket() except the default family is AF_UNIX if</font></i>
<a name='L3592'><i><font color='green'>   defined on the platform; otherwise, the default is AF_INET. */</font></i>
<a name='L3593'>
<a name='L3594'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3595'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3596'><a href='../S/2711.html#L4247' title='Refered from 4247 in Modules/socketmodule.c.'>socket_socketpair</a>(PyObject *self, PyObject *args)
<a name='L3597'><font color='red'>{</font>
<a name='L3598'>    <a href='../S/2712.html#L143' title='Defined at 143 in Modules/socketmodule.h.'>PySocketSockObject</a> *s0 = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *s1 = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3599'>    <a href='../D/4778.html' title='Multiple defined in 2 places.'>SOCKET_T</a> sv[2];
<a name='L3600'>    <b>int</b> family, type = SOCK_STREAM, proto = 0;
<a name='L3601'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3602'>
<a name='L3603'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>)
<a name='L3604'>    family = <a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>;
<a name='L3605'><font color='darkred'>#else</font>
<a name='L3606'>    family = AF_INET;
<a name='L3607'><font color='darkred'>#endif</font>
<a name='L3608'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|iii:socketpair",
<a name='L3609'>                          &amp;family, &amp;type, &amp;proto))
<a name='L3610'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3611'>    <i><font color='green'>/* Create a pair of socket fds */</font></i>
<a name='L3612'>    <b>if</b> (socketpair(family, type, proto, sv) &lt; 0)
<a name='L3613'>        <b>return</b> <a href='../D/11060.html' title='Multiple defined in 2 places.'>set_error</a>();
<a name='L3614'>    s0 = <a href='../S/2711.html#L797' title='Defined at 797 in Modules/socketmodule.c.'>new_sockobject</a>(sv[0], family, type, proto);
<a name='L3615'>    <b>if</b> (s0 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3616'>        <b>goto</b> finally;
<a name='L3617'>    s1 = <a href='../S/2711.html#L797' title='Defined at 797 in Modules/socketmodule.c.'>new_sockobject</a>(sv[1], family, type, proto);
<a name='L3618'>    <b>if</b> (s1 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3619'>        <b>goto</b> finally;
<a name='L3620'>    res = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(2, s0, s1);
<a name='L3621'>
<a name='L3622'>finally:
<a name='L3623'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3624'>        <b>if</b> (s0 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3625'>            <a href='../D/4772.html' title='Multiple defined in 3 places.'>SOCKETCLOSE</a>(sv[0]);
<a name='L3626'>        <b>if</b> (s1 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3627'>            <a href='../D/4772.html' title='Multiple defined in 3 places.'>SOCKETCLOSE</a>(sv[1]);
<a name='L3628'>    <font color='red'>}</font>
<a name='L3629'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(s0);
<a name='L3630'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(s1);
<a name='L3631'>    <b>return</b> res;
<a name='L3632'><font color='red'>}</font>
<a name='L3633'>
<a name='L3634'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(socketpair_doc,
<a name='L3635'>"socketpair([family[, type[, proto]]]) -&gt; (socket object, socket object)\n\
<a name='L3636'>\n\
<a name='L3637'>Create a pair of socket objects from the sockets returned by the platform\n\
<a name='L3638'>socketpair() function.\n\
<a name='L3639'>The arguments are the same as for socket() except the default family is\n\
<a name='L3640'>AF_UNIX if defined on the platform; otherwise, the default is AF_INET.");
<a name='L3641'>
<a name='L3642'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_SOCKETPAIR */</font></i>
<a name='L3643'>
<a name='L3644'>
<a name='L3645'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3646'><a href='../S/2711.html#L4250' title='Refered from 4250 in Modules/socketmodule.c.'>socket_ntohs</a>(PyObject *self, PyObject *args)
<a name='L3647'><font color='red'>{</font>
<a name='L3648'>    <b>int</b> x1, x2;
<a name='L3649'>
<a name='L3650'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "i:ntohs", &amp;x1)) <font color='red'>{</font>
<a name='L3651'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3652'>    <font color='red'>}</font>
<a name='L3653'>    <b>if</b> (x1 &lt; 0) <font color='red'>{</font>
<a name='L3654'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L3655'>            "can't convert negative number to unsigned long");
<a name='L3656'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3657'>    <font color='red'>}</font>
<a name='L3658'>    x2 = (<b>unsigned</b> <b>int</b>)ntohs((<b>unsigned</b> <b>short</b>)x1);
<a name='L3659'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(x2);
<a name='L3660'><font color='red'>}</font>
<a name='L3661'>
<a name='L3662'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(ntohs_doc,
<a name='L3663'>"ntohs(integer) -&gt; integer\n\
<a name='L3664'>\n\
<a name='L3665'>Convert a 16-bit integer from network to host byte order.");
<a name='L3666'>
<a name='L3667'>
<a name='L3668'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3669'><a href='../S/2711.html#L4252' title='Refered from 4252 in Modules/socketmodule.c.'>socket_ntohl</a>(PyObject *self, PyObject *arg)
<a name='L3670'><font color='red'>{</font>
<a name='L3671'>    <b>unsigned</b> <b>long</b> x;
<a name='L3672'>
<a name='L3673'>    <b>if</b> (PyLong_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L3674'>        x = <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L3675'>        <b>if</b> (x == (<b>unsigned</b> <b>long</b>) -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3676'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3677'><font color='darkred'>#if</font> <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; 4
<a name='L3678'>        <font color='red'>{</font>
<a name='L3679'>            <b>unsigned</b> <b>long</b> y;
<a name='L3680'>            <i><font color='green'>/* only want the trailing 32 bits */</font></i>
<a name='L3681'>            y = x &amp; 0xFFFFFFFFUL;
<a name='L3682'>            <b>if</b> (y ^ x)
<a name='L3683'>                <b>return</b> <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_OverflowError,
<a name='L3684'>                            "long int larger than 32 bits");
<a name='L3685'>            x = y;
<a name='L3686'>        <font color='red'>}</font>
<a name='L3687'><font color='darkred'>#endif</font>
<a name='L3688'>    <font color='red'>}</font>
<a name='L3689'>    <b>else</b>
<a name='L3690'>        <b>return</b> <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L3691'>                            "expected int/long, %s found",
<a name='L3692'>                            <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)-&gt;tp_name);
<a name='L3693'>    <b>if</b> (x == (<b>unsigned</b> <b>long</b>) -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3694'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3695'>    <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(ntohl(x));
<a name='L3696'><font color='red'>}</font>
<a name='L3697'>
<a name='L3698'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(ntohl_doc,
<a name='L3699'>"ntohl(integer) -&gt; integer\n\
<a name='L3700'>\n\
<a name='L3701'>Convert a 32-bit integer from network to host byte order.");
<a name='L3702'>
<a name='L3703'>
<a name='L3704'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3705'><a href='../S/2711.html#L4254' title='Refered from 4254 in Modules/socketmodule.c.'>socket_htons</a>(PyObject *self, PyObject *args)
<a name='L3706'><font color='red'>{</font>
<a name='L3707'>    <b>int</b> x1, x2;
<a name='L3708'>
<a name='L3709'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "i:htons", &amp;x1)) <font color='red'>{</font>
<a name='L3710'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3711'>    <font color='red'>}</font>
<a name='L3712'>    <b>if</b> (x1 &lt; 0) <font color='red'>{</font>
<a name='L3713'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L3714'>            "can't convert negative number to unsigned long");
<a name='L3715'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3716'>    <font color='red'>}</font>
<a name='L3717'>    x2 = (<b>unsigned</b> <b>int</b>)htons((<b>unsigned</b> <b>short</b>)x1);
<a name='L3718'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(x2);
<a name='L3719'><font color='red'>}</font>
<a name='L3720'>
<a name='L3721'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(htons_doc,
<a name='L3722'>"htons(integer) -&gt; integer\n\
<a name='L3723'>\n\
<a name='L3724'>Convert a 16-bit integer from host to network byte order.");
<a name='L3725'>
<a name='L3726'>
<a name='L3727'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3728'><a href='../S/2711.html#L4256' title='Refered from 4256 in Modules/socketmodule.c.'>socket_htonl</a>(PyObject *self, PyObject *arg)
<a name='L3729'><font color='red'>{</font>
<a name='L3730'>    <b>unsigned</b> <b>long</b> x;
<a name='L3731'>
<a name='L3732'>    <b>if</b> (PyLong_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L3733'>        x = <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L3734'>        <b>if</b> (x == (<b>unsigned</b> <b>long</b>) -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3735'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3736'><font color='darkred'>#if</font> <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; 4
<a name='L3737'>        <font color='red'>{</font>
<a name='L3738'>            <b>unsigned</b> <b>long</b> y;
<a name='L3739'>            <i><font color='green'>/* only want the trailing 32 bits */</font></i>
<a name='L3740'>            y = x &amp; 0xFFFFFFFFUL;
<a name='L3741'>            <b>if</b> (y ^ x)
<a name='L3742'>                <b>return</b> <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_OverflowError,
<a name='L3743'>                            "long int larger than 32 bits");
<a name='L3744'>            x = y;
<a name='L3745'>        <font color='red'>}</font>
<a name='L3746'><font color='darkred'>#endif</font>
<a name='L3747'>    <font color='red'>}</font>
<a name='L3748'>    <b>else</b>
<a name='L3749'>        <b>return</b> <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L3750'>                            "expected int/long, %s found",
<a name='L3751'>                            <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)-&gt;tp_name);
<a name='L3752'>    <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(htonl((<b>unsigned</b> <b>long</b>)x));
<a name='L3753'><font color='red'>}</font>
<a name='L3754'>
<a name='L3755'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(htonl_doc,
<a name='L3756'>"htonl(integer) -&gt; integer\n\
<a name='L3757'>\n\
<a name='L3758'>Convert a 32-bit integer from host to network byte order.");
<a name='L3759'>
<a name='L3760'><i><font color='green'>/* socket.inet_aton() and socket.inet_ntoa() functions. */</font></i>
<a name='L3761'>
<a name='L3762'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(inet_aton_doc,
<a name='L3763'>"inet_aton(string) -&gt; bytes giving packed 32-bit IP representation\n\
<a name='L3764'>\n\
<a name='L3765'>Convert an IP address in string format (123.45.67.89) to the 32-bit packed\n\
<a name='L3766'>binary format used in low-level network functions.");
<a name='L3767'>
<a name='L3768'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L3769'><a href='../S/2711.html#L4258' title='Refered from 4258 in Modules/socketmodule.c.'>socket_inet_aton</a>(PyObject *self, PyObject *args)
<a name='L3770'><font color='red'>{</font>
<a name='L3771'><font color='darkred'>#ifndef</font> <a href='../S/2711.html#L3772' title='Defined at 3772 in Modules/socketmodule.c.'>INADDR_NONE</a>
<a name='L3772'><font color='darkred'>#define</font> <a href='../R/1507.html' title='Multiple refered from 5 places.'>INADDR_NONE</a> (-1)
<a name='L3773'><font color='darkred'>#endif</font>
<a name='L3774'><font color='darkred'>#ifdef</font> HAVE_INET_ATON
<a name='L3775'>    <b>struct</b> in_addr buf;
<a name='L3776'><font color='darkred'>#endif</font>
<a name='L3777'>
<a name='L3778'><font color='darkred'>#if</font> !<b>defined</b>(HAVE_INET_ATON) || <b>defined</b>(<a href='../S/2711.html#L331' title='Defined at 331 in Modules/socketmodule.c.'>USE_INET_ATON_WEAKLINK</a>)
<a name='L3779'><font color='darkred'>#if</font> (<a href='../D/4733.html' title='Multiple defined in 3 places.'>SIZEOF_INT</a> != 4)
<a name='L3780'><font color='darkred'>#error</font> "Not sure if in_addr_t exists and int is not 32-bits."
<a name='L3781'><font color='darkred'>#endif</font>
<a name='L3782'>    <i><font color='green'>/* Have to use inet_addr() instead */</font></i>
<a name='L3783'>    <b>unsigned</b> <b>int</b> packed_addr;
<a name='L3784'><font color='darkred'>#endif</font>
<a name='L3785'>    <b>char</b> *ip_addr;
<a name='L3786'>
<a name='L3787'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "s:inet_aton", &amp;ip_addr))
<a name='L3788'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3789'>
<a name='L3790'>
<a name='L3791'><font color='darkred'>#ifdef</font> HAVE_INET_ATON
<a name='L3792'>
<a name='L3793'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L331' title='Defined at 331 in Modules/socketmodule.c.'>USE_INET_ATON_WEAKLINK</a>
<a name='L3794'>    <b>if</b> (inet_aton != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3795'><font color='darkred'>#endif</font>
<a name='L3796'>    <b>if</b> (inet_aton(ip_addr, &amp;buf))
<a name='L3797'>        <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>((<b>char</b> *)(&amp;buf),
<a name='L3798'>                                          <b>sizeof</b>(buf));
<a name='L3799'>
<a name='L3800'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L3801'>                    "illegal IP address string passed to inet_aton");
<a name='L3802'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3803'>
<a name='L3804'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L331' title='Defined at 331 in Modules/socketmodule.c.'>USE_INET_ATON_WEAKLINK</a>
<a name='L3805'>   <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L3806'><font color='darkred'>#endif</font>
<a name='L3807'>
<a name='L3808'><font color='darkred'>#endif</font>
<a name='L3809'>
<a name='L3810'><font color='darkred'>#if</font> !<b>defined</b>(HAVE_INET_ATON) || <b>defined</b>(<a href='../S/2711.html#L331' title='Defined at 331 in Modules/socketmodule.c.'>USE_INET_ATON_WEAKLINK</a>)
<a name='L3811'>
<a name='L3812'>    <i><font color='green'>/* special-case this address as inet_addr might return INADDR_NONE</font></i>
<a name='L3813'><i><font color='green'>     * for this */</font></i>
<a name='L3814'>    <b>if</b> (strcmp(ip_addr, "255.255.255.255") == 0) <font color='red'>{</font>
<a name='L3815'>        packed_addr = 0xFFFFFFFF;
<a name='L3816'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L3817'>
<a name='L3818'>        packed_addr = inet_addr(ip_addr);
<a name='L3819'>
<a name='L3820'>        <b>if</b> (packed_addr == <a href='../S/2711.html#L3772' title='Defined at 3772 in Modules/socketmodule.c.'>INADDR_NONE</a>) <font color='red'>{</font>               <i><font color='green'>/* invalid address */</font></i>
<a name='L3821'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L3822'>                "illegal IP address string passed to inet_aton");
<a name='L3823'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3824'>        <font color='red'>}</font>
<a name='L3825'>    <font color='red'>}</font>
<a name='L3826'>    <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>((<b>char</b> *) &amp;packed_addr,
<a name='L3827'>                                      <b>sizeof</b>(packed_addr));
<a name='L3828'>
<a name='L3829'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L331' title='Defined at 331 in Modules/socketmodule.c.'>USE_INET_ATON_WEAKLINK</a>
<a name='L3830'>   <font color='red'>}</font>
<a name='L3831'><font color='darkred'>#endif</font>
<a name='L3832'>
<a name='L3833'><font color='darkred'>#endif</font>
<a name='L3834'><font color='red'>}</font>
<a name='L3835'>
<a name='L3836'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(inet_ntoa_doc,
<a name='L3837'>"inet_ntoa(packed_ip) -&gt; ip_address_string\n\
<a name='L3838'>\n\
<a name='L3839'>Convert an IP address from 32-bit packed binary format to string format");
<a name='L3840'>
<a name='L3841'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L3842'><a href='../S/2711.html#L4260' title='Refered from 4260 in Modules/socketmodule.c.'>socket_inet_ntoa</a>(PyObject *self, PyObject *args)
<a name='L3843'><font color='red'>{</font>
<a name='L3844'>    <b>char</b> *packed_str;
<a name='L3845'>    <b>int</b> addr_len;
<a name='L3846'>    <b>struct</b> in_addr packed_addr;
<a name='L3847'>
<a name='L3848'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y#:inet_ntoa", &amp;packed_str, &amp;addr_len)) <font color='red'>{</font>
<a name='L3849'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3850'>    <font color='red'>}</font>
<a name='L3851'>
<a name='L3852'>    <b>if</b> (addr_len != <b>sizeof</b>(packed_addr)) <font color='red'>{</font>
<a name='L3853'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L3854'>            "packed IP wrong length for inet_ntoa");
<a name='L3855'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3856'>    <font color='red'>}</font>
<a name='L3857'>
<a name='L3858'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;packed_addr, packed_str, addr_len);
<a name='L3859'>
<a name='L3860'>    <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(inet_ntoa(packed_addr));
<a name='L3861'><font color='red'>}</font>
<a name='L3862'>
<a name='L3863'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L237' title='Defined at 237 in Modules/socketmodule.c.'>HAVE_INET_PTON</a>
<a name='L3864'>
<a name='L3865'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(inet_pton_doc,
<a name='L3866'>"inet_pton(af, ip) -&gt; packed IP address string\n\
<a name='L3867'>\n\
<a name='L3868'>Convert an IP address from string format to a packed string suitable\n\
<a name='L3869'>for use with low-level network functions.");
<a name='L3870'>
<a name='L3871'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3872'><a href='../S/2711.html#L4263' title='Refered from 4263 in Modules/socketmodule.c.'>socket_inet_pton</a>(PyObject *self, PyObject *args)
<a name='L3873'><font color='red'>{</font>
<a name='L3874'>    <b>int</b> af;
<a name='L3875'>    <b>char</b>* ip;
<a name='L3876'>    <b>int</b> retval;
<a name='L3877'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3878'>    <b>char</b> packed[<a href='../D/2033.html' title='Multiple defined in 10 places.'>MAX</a>(<b>sizeof</b>(<b>struct</b> in_addr), <b>sizeof</b>(<b>struct</b> in6_addr))];
<a name='L3879'><font color='darkred'>#else</font>
<a name='L3880'>    <b>char</b> packed[<b>sizeof</b>(<b>struct</b> in_addr)];
<a name='L3881'><font color='darkred'>#endif</font>
<a name='L3882'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "is:inet_pton", &amp;af, &amp;ip)) <font color='red'>{</font>
<a name='L3883'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3884'>    <font color='red'>}</font>
<a name='L3885'>
<a name='L3886'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>) &amp;&amp; <b>defined</b>(AF_INET6)
<a name='L3887'>    <b>if</b>(af == AF_INET6) <font color='red'>{</font>
<a name='L3888'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L3889'>                        "can't use AF_INET6, IPv6 is disabled");
<a name='L3890'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3891'>    <font color='red'>}</font>
<a name='L3892'><font color='darkred'>#endif</font>
<a name='L3893'>
<a name='L3894'>    retval = <a href='../S/2711.html#L5346' title='Defined at 5346 in Modules/socketmodule.c.'>inet_pton</a>(af, ip, packed);
<a name='L3895'>    <b>if</b> (retval &lt; 0) <font color='red'>{</font>
<a name='L3896'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(socket_error);
<a name='L3897'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3898'>    <font color='red'>}</font> <b>else</b> <b>if</b> (retval == 0) <font color='red'>{</font>
<a name='L3899'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L3900'>            "illegal IP address string passed to inet_pton");
<a name='L3901'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3902'>    <font color='red'>}</font> <b>else</b> <b>if</b> (af == AF_INET) <font color='red'>{</font>
<a name='L3903'>        <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(packed,
<a name='L3904'>                                          <b>sizeof</b>(<b>struct</b> in_addr));
<a name='L3905'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3906'>    <font color='red'>}</font> <b>else</b> <b>if</b> (af == AF_INET6) <font color='red'>{</font>
<a name='L3907'>        <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(packed,
<a name='L3908'>                                          <b>sizeof</b>(<b>struct</b> in6_addr));
<a name='L3909'><font color='darkred'>#endif</font>
<a name='L3910'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L3911'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "unknown address family");
<a name='L3912'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3913'>    <font color='red'>}</font>
<a name='L3914'><font color='red'>}</font>
<a name='L3915'>
<a name='L3916'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(inet_ntop_doc,
<a name='L3917'>"inet_ntop(af, packed_ip) -&gt; string formatted IP address\n\
<a name='L3918'>\n\
<a name='L3919'>Convert a packed IP address of the given family to string format.");
<a name='L3920'>
<a name='L3921'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3922'><a href='../S/2711.html#L4265' title='Refered from 4265 in Modules/socketmodule.c.'>socket_inet_ntop</a>(PyObject *self, PyObject *args)
<a name='L3923'><font color='red'>{</font>
<a name='L3924'>    <b>int</b> af;
<a name='L3925'>    <b>char</b>* packed;
<a name='L3926'>    <b>int</b> len;
<a name='L3927'>    <b>const</b> <b>char</b>* retval;
<a name='L3928'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3929'>    <b>char</b> ip[<a href='../D/2033.html' title='Multiple defined in 10 places.'>MAX</a>(<a href='../S/2711.html#L245' title='Defined at 245 in Modules/socketmodule.c.'>INET_ADDRSTRLEN</a>, INET6_ADDRSTRLEN) + 1];
<a name='L3930'><font color='darkred'>#else</font>
<a name='L3931'>    <b>char</b> ip[<a href='../S/2711.html#L245' title='Defined at 245 in Modules/socketmodule.c.'>INET_ADDRSTRLEN</a> + 1];
<a name='L3932'><font color='darkred'>#endif</font>
<a name='L3933'>
<a name='L3934'>    <i><font color='green'>/* Guarantee NUL-termination for PyUnicode_FromString() below */</font></i>
<a name='L3935'>    memset((<b>void</b> *) &amp;ip[0], '\0', <b>sizeof</b>(ip));
<a name='L3936'>
<a name='L3937'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "iy#:inet_ntop", &amp;af, &amp;packed, &amp;len)) <font color='red'>{</font>
<a name='L3938'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3939'>    <font color='red'>}</font>
<a name='L3940'>
<a name='L3941'>    <b>if</b> (af == AF_INET) <font color='red'>{</font>
<a name='L3942'>        <b>if</b> (len != <b>sizeof</b>(<b>struct</b> in_addr)) <font color='red'>{</font>
<a name='L3943'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L3944'>                "invalid length of packed IP address string");
<a name='L3945'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3946'>        <font color='red'>}</font>
<a name='L3947'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L3948'>    <font color='red'>}</font> <b>else</b> <b>if</b> (af == AF_INET6) <font color='red'>{</font>
<a name='L3949'>        <b>if</b> (len != <b>sizeof</b>(<b>struct</b> in6_addr)) <font color='red'>{</font>
<a name='L3950'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L3951'>                "invalid length of packed IP address string");
<a name='L3952'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3953'>        <font color='red'>}</font>
<a name='L3954'><font color='darkred'>#endif</font>
<a name='L3955'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L3956'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L3957'>            "unknown address family %d", af);
<a name='L3958'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3959'>    <font color='red'>}</font>
<a name='L3960'>
<a name='L3961'>    retval = <a href='../S/2711.html#L5364' title='Defined at 5364 in Modules/socketmodule.c.'>inet_ntop</a>(af, packed, ip, <b>sizeof</b>(ip));
<a name='L3962'>    <b>if</b> (!retval) <font color='red'>{</font>
<a name='L3963'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(socket_error);
<a name='L3964'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3965'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L3966'>        <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(retval);
<a name='L3967'>    <font color='red'>}</font>
<a name='L3968'>
<a name='L3969'>    <i><font color='green'>/* NOTREACHED */</font></i>
<a name='L3970'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_RuntimeError, "invalid handling of inet_ntop");
<a name='L3971'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3972'><font color='red'>}</font>
<a name='L3973'>
<a name='L3974'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_INET_PTON */</font></i>
<a name='L3975'>
<a name='L3976'><i><font color='green'>/* Python interface to getaddrinfo(host, port). */</font></i>
<a name='L3977'>
<a name='L3978'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L3979'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3980'><a href='../S/2711.html#L4268' title='Refered from 4268 in Modules/socketmodule.c.'>socket_getaddrinfo</a>(PyObject *self, PyObject *args, PyObject* kwargs)
<a name='L3981'><font color='red'>{</font>
<a name='L3982'>    <b>static</b> <b>char</b>* kwnames[] = <font color='red'>{</font>"host", "port", "family", "type", "proto", 
<a name='L3983'>                              "flags", 0<font color='red'>}</font>;
<a name='L3984'>    <b>struct</b> <a href='../S/2620.html#L127' title='Defined at 127 in Modules/addrinfo.h.'>addrinfo</a> hints, *res;
<a name='L3985'>    <b>struct</b> <a href='../S/2620.html#L127' title='Defined at 127 in Modules/addrinfo.h.'>addrinfo</a> *res0 = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3986'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *hobj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3987'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pobj = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3988'>    <b>char</b> pbuf[30];
<a name='L3989'>    <b>char</b> *hptr, *pptr;
<a name='L3990'>    <b>int</b> family, socktype, protocol, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>;
<a name='L3991'>    <b>int</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3992'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *all = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3993'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *idna = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3994'>
<a name='L3995'>    family = socktype = protocol = <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L3996'>    family = AF_UNSPEC;
<a name='L3997'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwargs, "OO|iiii:getaddrinfo", 
<a name='L3998'>                          kwnames, &amp;hobj, &amp;pobj, &amp;family, &amp;socktype,
<a name='L3999'>                          &amp;protocol, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>)) <font color='red'>{</font>
<a name='L4000'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4001'>    <font color='red'>}</font>
<a name='L4002'>    <b>if</b> (hobj == Py_None) <font color='red'>{</font>
<a name='L4003'>        hptr = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4004'>    <font color='red'>}</font> <b>else</b> <b>if</b> (PyUnicode_Check(hobj)) <font color='red'>{</font>
<a name='L4005'>        idna = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(hobj, "encode", "s", "idna");
<a name='L4006'>        <b>if</b> (!idna)
<a name='L4007'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4008'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyBytes_Check(idna));
<a name='L4009'>        hptr = PyBytes_AS_STRING(idna);
<a name='L4010'>    <font color='red'>}</font> <b>else</b> <b>if</b> (PyBytes_Check(hobj)) <font color='red'>{</font>
<a name='L4011'>        hptr = <a href='../S/2779.html#L517' title='Defined at 517 in Objects/bytesobject.c.'>PyBytes_AsString</a>(hobj);
<a name='L4012'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L4013'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L4014'>                        "getaddrinfo() argument 1 must be string or None");
<a name='L4015'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4016'>    <font color='red'>}</font>
<a name='L4017'>    <b>if</b> (PyLong_CheckExact(pobj)) <font color='red'>{</font>
<a name='L4018'>        <b>long</b> <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(pobj);
<a name='L4019'>        <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4020'>            <b>goto</b> err;
<a name='L4021'>        <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(pbuf, <b>sizeof</b>(pbuf), "%ld", <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L4022'>        pptr = pbuf;
<a name='L4023'>    <font color='red'>}</font> <b>else</b> <b>if</b> (PyUnicode_Check(pobj)) <font color='red'>{</font>
<a name='L4024'>        pptr = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(pobj);
<a name='L4025'>        <b>if</b> (pptr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4026'>            <b>goto</b> err;
<a name='L4027'>    <font color='red'>}</font> <b>else</b> <b>if</b> (PyBytes_Check(pobj)) <font color='red'>{</font>
<a name='L4028'>        pptr = PyBytes_AS_STRING(pobj);
<a name='L4029'>    <font color='red'>}</font> <b>else</b> <b>if</b> (pobj == Py_None) <font color='red'>{</font>
<a name='L4030'>        pptr = (<b>char</b> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4031'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L4032'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error, "Int or String expected");
<a name='L4033'>        <b>goto</b> err;
<a name='L4034'>    <font color='red'>}</font>
<a name='L4035'>    memset(&amp;hints, 0, <b>sizeof</b>(hints));
<a name='L4036'>    hints.ai_family = family;
<a name='L4037'>    hints.ai_socktype = socktype;
<a name='L4038'>    hints.ai_protocol = protocol;
<a name='L4039'>    hints.ai_flags = <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>;
<a name='L4040'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L4041'>    <a href='../D/19.html' title='Multiple defined in 2 places.'>ACQUIRE_GETADDRINFO_LOCK</a>
<a name='L4042'>    <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../D/8911.html' title='Multiple defined in 4 places.'>getaddrinfo</a>(hptr, pptr, &amp;hints, &amp;res0);
<a name='L4043'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L4044'>    <a href='../D/4464.html' title='Multiple defined in 2 places.'>RELEASE_GETADDRINFO_LOCK</a>  <i><font color='green'>/* see comment in setipaddr() */</font></i>
<a name='L4045'>    <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>) <font color='red'>{</font>
<a name='L4046'>        <a href='../S/2711.html#L565' title='Defined at 565 in Modules/socketmodule.c.'>set_gaierror</a>(<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>);
<a name='L4047'>        <b>goto</b> err;
<a name='L4048'>    <font color='red'>}</font>
<a name='L4049'>
<a name='L4050'>    <b>if</b> ((all = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4051'>        <b>goto</b> err;
<a name='L4052'>    <b>for</b> (res = res0; res; res = res-&gt;ai_next) <font color='red'>{</font>
<a name='L4053'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *single;
<a name='L4054'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *addr =
<a name='L4055'>            <a href='../S/2711.html#L1015' title='Defined at 1015 in Modules/socketmodule.c.'>makesockaddr</a>(-1, res-&gt;ai_addr, res-&gt;ai_addrlen, protocol);
<a name='L4056'>        <b>if</b> (addr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4057'>            <b>goto</b> err;
<a name='L4058'>        single = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("iiisO", res-&gt;ai_family,
<a name='L4059'>            res-&gt;ai_socktype, res-&gt;ai_protocol,
<a name='L4060'>            res-&gt;ai_canonname ? res-&gt;ai_canonname : "",
<a name='L4061'>            addr);
<a name='L4062'>        Py_DECREF(addr);
<a name='L4063'>        <b>if</b> (single == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4064'>            <b>goto</b> err;
<a name='L4065'>
<a name='L4066'>        <b>if</b> (<a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(all, single))
<a name='L4067'>            <b>goto</b> err;
<a name='L4068'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(single);
<a name='L4069'>    <font color='red'>}</font>
<a name='L4070'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(idna);
<a name='L4071'>    <b>if</b> (res0)
<a name='L4072'>        <a href='../D/8729.html' title='Multiple defined in 2 places.'>freeaddrinfo</a>(res0);
<a name='L4073'>    <b>return</b> all;
<a name='L4074'> err:
<a name='L4075'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(all);
<a name='L4076'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(idna);
<a name='L4077'>    <b>if</b> (res0)
<a name='L4078'>        <a href='../D/8729.html' title='Multiple defined in 2 places.'>freeaddrinfo</a>(res0);
<a name='L4079'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4080'><font color='red'>}</font>
<a name='L4081'>
<a name='L4082'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getaddrinfo_doc,
<a name='L4083'>"getaddrinfo(host, port [, family, socktype, proto, flags])\n\
<a name='L4084'>    -&gt; list of (family, socktype, proto, canonname, sockaddr)\n\
<a name='L4085'>\n\
<a name='L4086'>Resolve host and port into addrinfo struct.");
<a name='L4087'>
<a name='L4088'><i><font color='green'>/* Python interface to getnameinfo(sa, flags). */</font></i>
<a name='L4089'>
<a name='L4090'><i><font color='green'>/*ARGSUSED*/</font></i>
<a name='L4091'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4092'><a href='../S/2711.html#L4270' title='Refered from 4270 in Modules/socketmodule.c.'>socket_getnameinfo</a>(PyObject *self, PyObject *args)
<a name='L4093'><font color='red'>{</font>
<a name='L4094'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *sa = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4095'>    <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>;
<a name='L4096'>    <b>char</b> *hostp;
<a name='L4097'>    <b>int</b> port, flowinfo, scope_id;
<a name='L4098'>    <b>char</b> hbuf[<a href='../D/2307.html' title='Multiple defined in 2 places.'>NI_MAXHOST</a>], pbuf[<a href='../D/2308.html' title='Multiple defined in 2 places.'>NI_MAXSERV</a>];
<a name='L4099'>    <b>struct</b> <a href='../S/2620.html#L127' title='Defined at 127 in Modules/addrinfo.h.'>addrinfo</a> hints, *res = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4100'>    <b>int</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4101'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4102'>
<a name='L4103'>    <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = flowinfo = scope_id = 0;
<a name='L4104'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "Oi:getnameinfo", &amp;sa, &amp;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>))
<a name='L4105'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4106'>    <b>if</b> (!PyTuple_Check(sa)) <font color='red'>{</font>
<a name='L4107'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L4108'>                        "getnameinfo() argument 1 must be a tuple");
<a name='L4109'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4110'>    <font color='red'>}</font>
<a name='L4111'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(sa, "si|ii",
<a name='L4112'>                          &amp;hostp, &amp;port, &amp;flowinfo, &amp;scope_id))
<a name='L4113'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4114'>    <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(pbuf, <b>sizeof</b>(pbuf), "%d", port);
<a name='L4115'>    memset(&amp;hints, 0, <b>sizeof</b>(hints));
<a name='L4116'>    hints.ai_family = AF_UNSPEC;
<a name='L4117'>    hints.ai_socktype = SOCK_DGRAM;     <i><font color='green'>/* make numeric port happy */</font></i>
<a name='L4118'>    hints.ai_flags = <a href='../D/51.html' title='Multiple defined in 2 places.'>AI_NUMERICHOST</a>;    <i><font color='green'>/* don't do any name resolution */</font></i>
<a name='L4119'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L4120'>    <a href='../D/19.html' title='Multiple defined in 2 places.'>ACQUIRE_GETADDRINFO_LOCK</a>
<a name='L4121'>    <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../D/8911.html' title='Multiple defined in 4 places.'>getaddrinfo</a>(hostp, pbuf, &amp;hints, &amp;res);
<a name='L4122'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L4123'>    <a href='../D/4464.html' title='Multiple defined in 2 places.'>RELEASE_GETADDRINFO_LOCK</a>  <i><font color='green'>/* see comment in setipaddr() */</font></i>
<a name='L4124'>    <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>) <font color='red'>{</font>
<a name='L4125'>        <a href='../S/2711.html#L565' title='Defined at 565 in Modules/socketmodule.c.'>set_gaierror</a>(<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>);
<a name='L4126'>        <b>goto</b> fail;
<a name='L4127'>    <font color='red'>}</font>
<a name='L4128'>    <b>if</b> (res-&gt;ai_next) <font color='red'>{</font>
<a name='L4129'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L4130'>            "sockaddr resolved to multiple addresses");
<a name='L4131'>        <b>goto</b> fail;
<a name='L4132'>    <font color='red'>}</font>
<a name='L4133'>    <b>switch</b> (res-&gt;ai_family) <font color='red'>{</font>
<a name='L4134'>    <b>case</b> AF_INET:
<a name='L4135'>        <font color='red'>{</font>
<a name='L4136'>        <b>if</b> (PyTuple_GET_SIZE(sa) != 2) <font color='red'>{</font>
<a name='L4137'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(socket_error,
<a name='L4138'>                "IPv4 sockaddr must be 2 tuple");
<a name='L4139'>            <b>goto</b> fail;
<a name='L4140'>        <font color='red'>}</font>
<a name='L4141'>        <b>break</b>;
<a name='L4142'>        <font color='red'>}</font>
<a name='L4143'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L4144'>    <b>case</b> AF_INET6:
<a name='L4145'>        <font color='red'>{</font>
<a name='L4146'>        <b>struct</b> sockaddr_in6 *sin6;
<a name='L4147'>        sin6 = (<b>struct</b> sockaddr_in6 *)res-&gt;ai_addr;
<a name='L4148'>        sin6-&gt;sin6_flowinfo = flowinfo;
<a name='L4149'>        sin6-&gt;sin6_scope_id = scope_id;
<a name='L4150'>        <b>break</b>;
<a name='L4151'>        <font color='red'>}</font>
<a name='L4152'><font color='darkred'>#endif</font>
<a name='L4153'>    <font color='red'>}</font>
<a name='L4154'>    <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../D/8959.html' title='Multiple defined in 2 places.'>getnameinfo</a>(res-&gt;ai_addr, (<a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a>) res-&gt;ai_addrlen,
<a name='L4155'>                    hbuf, <b>sizeof</b>(hbuf), pbuf, <b>sizeof</b>(pbuf), <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L4156'>    <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>) <font color='red'>{</font>
<a name='L4157'>        <a href='../S/2711.html#L565' title='Defined at 565 in Modules/socketmodule.c.'>set_gaierror</a>(<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>);
<a name='L4158'>        <b>goto</b> fail;
<a name='L4159'>    <font color='red'>}</font>
<a name='L4160'>    ret = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("ss", hbuf, pbuf);
<a name='L4161'>
<a name='L4162'>fail:
<a name='L4163'>    <b>if</b> (res)
<a name='L4164'>        <a href='../D/8729.html' title='Multiple defined in 2 places.'>freeaddrinfo</a>(res);
<a name='L4165'>    <b>return</b> ret;
<a name='L4166'><font color='red'>}</font>
<a name='L4167'>
<a name='L4168'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getnameinfo_doc,
<a name='L4169'>"getnameinfo(sockaddr, flags) --&gt; (host, port)\n\
<a name='L4170'>\n\
<a name='L4171'>Get host and port for a sockaddr.");
<a name='L4172'>
<a name='L4173'>
<a name='L4174'><i><font color='green'>/* Python API to getting and setting the default timeout value. */</font></i>
<a name='L4175'>
<a name='L4176'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4177'><a href='../S/2711.html#L4272' title='Refered from 4272 in Modules/socketmodule.c.'>socket_getdefaulttimeout</a>(PyObject *self)
<a name='L4178'><font color='red'>{</font>
<a name='L4179'>    <b>if</b> (defaulttimeout &lt; 0.0) <font color='red'>{</font>
<a name='L4180'>        Py_INCREF(Py_None);
<a name='L4181'>        <b>return</b> Py_None;
<a name='L4182'>    <font color='red'>}</font>
<a name='L4183'>    <b>else</b>
<a name='L4184'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(defaulttimeout);
<a name='L4185'><font color='red'>}</font>
<a name='L4186'>
<a name='L4187'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(getdefaulttimeout_doc,
<a name='L4188'>"getdefaulttimeout() -&gt; timeout\n\
<a name='L4189'>\n\
<a name='L4190'>Returns the default timeout in floating seconds for new socket objects.\n\
<a name='L4191'>A value of None indicates that new socket objects have no timeout.\n\
<a name='L4192'>When the socket module is first imported, the default is None.");
<a name='L4193'>
<a name='L4194'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4195'><a href='../S/2711.html#L4274' title='Refered from 4274 in Modules/socketmodule.c.'>socket_setdefaulttimeout</a>(PyObject *self, PyObject *arg)
<a name='L4196'><font color='red'>{</font>
<a name='L4197'>    <b>double</b> timeout;
<a name='L4198'>
<a name='L4199'>    <b>if</b> (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None)
<a name='L4200'>        timeout = -1.0;
<a name='L4201'>    <b>else</b> <font color='red'>{</font>
<a name='L4202'>        timeout = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L4203'>        <b>if</b> (timeout &lt; 0.0) <font color='red'>{</font>
<a name='L4204'>            <b>if</b> (!<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4205'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L4206'>                                "Timeout value out of range");
<a name='L4207'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4208'>        <font color='red'>}</font>
<a name='L4209'>    <font color='red'>}</font>
<a name='L4210'>
<a name='L4211'>    defaulttimeout = timeout;
<a name='L4212'>
<a name='L4213'>    Py_INCREF(Py_None);
<a name='L4214'>    <b>return</b> Py_None;
<a name='L4215'><font color='red'>}</font>
<a name='L4216'>
<a name='L4217'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(setdefaulttimeout_doc,
<a name='L4218'>"setdefaulttimeout(timeout)\n\
<a name='L4219'>\n\
<a name='L4220'>Set the default timeout in floating seconds for new socket objects.\n\
<a name='L4221'>A value of None indicates that new socket objects have no timeout.\n\
<a name='L4222'>When the socket module is first imported, the default is None.");
<a name='L4223'>
<a name='L4224'>
<a name='L4225'><i><font color='green'>/* List of functions exported by this module. */</font></i>
<a name='L4226'>
<a name='L4227'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> socket_methods[] = <font color='red'>{</font>
<a name='L4228'>    <font color='red'>{</font>"gethostbyname",           <a href='../S/2711.html#L3143' title='Defined at 3143 in Modules/socketmodule.c.'>socket_gethostbyname</a>,
<a name='L4229'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, gethostbyname_doc<font color='red'>}</font>,
<a name='L4230'>    <font color='red'>{</font>"gethostbyname_ex",        <a href='../S/2711.html#L3297' title='Defined at 3297 in Modules/socketmodule.c.'>socket_gethostbyname_ex</a>,
<a name='L4231'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, ghbn_ex_doc<font color='red'>}</font>,
<a name='L4232'>    <font color='red'>{</font>"gethostbyaddr",           <a href='../S/2711.html#L3371' title='Defined at 3371 in Modules/socketmodule.c.'>socket_gethostbyaddr</a>,
<a name='L4233'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, gethostbyaddr_doc<font color='red'>}</font>,
<a name='L4234'>    <font color='red'>{</font>"gethostname",             <a href='../S/2711.html#L3094' title='Defined at 3094 in Modules/socketmodule.c.'>socket_gethostname</a>,
<a name='L4235'>     <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,  gethostname_doc<font color='red'>}</font>,
<a name='L4236'>    <font color='red'>{</font>"getservbyname",           <a href='../S/2711.html#L3469' title='Defined at 3469 in Modules/socketmodule.c.'>socket_getservbyname</a>,
<a name='L4237'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, getservbyname_doc<font color='red'>}</font>,
<a name='L4238'>    <font color='red'>{</font>"getservbyport",           <a href='../S/2711.html#L3499' title='Defined at 3499 in Modules/socketmodule.c.'>socket_getservbyport</a>,
<a name='L4239'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, getservbyport_doc<font color='red'>}</font>,
<a name='L4240'>    <font color='red'>{</font>"getprotobyname",          <a href='../S/2711.html#L3535' title='Defined at 3535 in Modules/socketmodule.c.'>socket_getprotobyname</a>,
<a name='L4241'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, getprotobyname_doc<font color='red'>}</font>,
<a name='L4242'><font color='darkred'>#ifndef</font> <a href='../S/2711.html#L375' title='Defined at 375 in Modules/socketmodule.c.'>NO_DUP</a>
<a name='L4243'>    <font color='red'>{</font>"dup",                     <a href='../S/2711.html#L3561' title='Defined at 3561 in Modules/socketmodule.c.'>socket_dup</a>,
<a name='L4244'>     METH_O, dup_doc<font color='red'>}</font>,
<a name='L4245'><font color='darkred'>#endif</font>
<a name='L4246'><font color='darkred'>#ifdef</font> HAVE_SOCKETPAIR
<a name='L4247'>    <font color='red'>{</font>"socketpair",              <a href='../S/2711.html#L3596' title='Defined at 3596 in Modules/socketmodule.c.'>socket_socketpair</a>,
<a name='L4248'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, socketpair_doc<font color='red'>}</font>,
<a name='L4249'><font color='darkred'>#endif</font>
<a name='L4250'>    <font color='red'>{</font>"ntohs",                   <a href='../S/2711.html#L3646' title='Defined at 3646 in Modules/socketmodule.c.'>socket_ntohs</a>,
<a name='L4251'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, ntohs_doc<font color='red'>}</font>,
<a name='L4252'>    <font color='red'>{</font>"ntohl",                   <a href='../S/2711.html#L3669' title='Defined at 3669 in Modules/socketmodule.c.'>socket_ntohl</a>,
<a name='L4253'>     METH_O, ntohl_doc<font color='red'>}</font>,
<a name='L4254'>    <font color='red'>{</font>"htons",                   <a href='../S/2711.html#L3705' title='Defined at 3705 in Modules/socketmodule.c.'>socket_htons</a>,
<a name='L4255'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, htons_doc<font color='red'>}</font>,
<a name='L4256'>    <font color='red'>{</font>"htonl",                   <a href='../S/2711.html#L3728' title='Defined at 3728 in Modules/socketmodule.c.'>socket_htonl</a>,
<a name='L4257'>     METH_O, htonl_doc<font color='red'>}</font>,
<a name='L4258'>    <font color='red'>{</font>"inet_aton",               <a href='../S/2711.html#L3769' title='Defined at 3769 in Modules/socketmodule.c.'>socket_inet_aton</a>,
<a name='L4259'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, inet_aton_doc<font color='red'>}</font>,
<a name='L4260'>    <font color='red'>{</font>"inet_ntoa",               <a href='../S/2711.html#L3842' title='Defined at 3842 in Modules/socketmodule.c.'>socket_inet_ntoa</a>,
<a name='L4261'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, inet_ntoa_doc<font color='red'>}</font>,
<a name='L4262'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L237' title='Defined at 237 in Modules/socketmodule.c.'>HAVE_INET_PTON</a>
<a name='L4263'>    <font color='red'>{</font>"inet_pton",               <a href='../S/2711.html#L3872' title='Defined at 3872 in Modules/socketmodule.c.'>socket_inet_pton</a>,
<a name='L4264'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, inet_pton_doc<font color='red'>}</font>,
<a name='L4265'>    <font color='red'>{</font>"inet_ntop",               <a href='../S/2711.html#L3922' title='Defined at 3922 in Modules/socketmodule.c.'>socket_inet_ntop</a>,
<a name='L4266'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, inet_ntop_doc<font color='red'>}</font>,
<a name='L4267'><font color='darkred'>#endif</font>
<a name='L4268'>    <font color='red'>{</font>"getaddrinfo",             (PyCFunction)<a href='../S/2711.html#L3980' title='Defined at 3980 in Modules/socketmodule.c.'>socket_getaddrinfo</a>,
<a name='L4269'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS, getaddrinfo_doc<font color='red'>}</font>,
<a name='L4270'>    <font color='red'>{</font>"getnameinfo",             <a href='../S/2711.html#L4092' title='Defined at 4092 in Modules/socketmodule.c.'>socket_getnameinfo</a>,
<a name='L4271'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, getnameinfo_doc<font color='red'>}</font>,
<a name='L4272'>    <font color='red'>{</font>"getdefaulttimeout",       (PyCFunction)<a href='../S/2711.html#L4177' title='Defined at 4177 in Modules/socketmodule.c.'>socket_getdefaulttimeout</a>,
<a name='L4273'>     <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, getdefaulttimeout_doc<font color='red'>}</font>,
<a name='L4274'>    <font color='red'>{</font>"setdefaulttimeout",       <a href='../S/2711.html#L4195' title='Defined at 4195 in Modules/socketmodule.c.'>socket_setdefaulttimeout</a>,
<a name='L4275'>     METH_O, setdefaulttimeout_doc<font color='red'>}</font>,
<a name='L4276'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,                      <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>            <i><font color='green'>/* Sentinel */</font></i>
<a name='L4277'><font color='red'>}</font>;
<a name='L4278'>
<a name='L4279'>
<a name='L4280'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L4281'><font color='darkred'>#define</font> <a href='../S/2711.html#L4348' title='Refered from 4348 in Modules/socketmodule.c.'>OS_INIT_DEFINED</a>
<a name='L4282'>
<a name='L4283'><i><font color='green'>/* Additional initialization and cleanup for Windows */</font></i>
<a name='L4284'>
<a name='L4285'><b>static</b> <b>void</b>
<a name='L4286'><a href='../S/2711.html#L4299' title='Refered from 4299 in Modules/socketmodule.c.'>os_cleanup</a>(<b>void</b>)
<a name='L4287'><font color='red'>{</font>
<a name='L4288'>    WSACleanup();
<a name='L4289'><font color='red'>}</font>
<a name='L4290'>
<a name='L4291'><b>static</b> <b>int</b>
<a name='L4292'><a href='../S/2711.html#L4400' title='Refered from 4400 in Modules/socketmodule.c.'>os_init</a>(<b>void</b>)
<a name='L4293'><font color='red'>{</font>
<a name='L4294'>    WSADATA WSAData;
<a name='L4295'>    <b>int</b> ret;
<a name='L4296'>    ret = WSAStartup(0x0101, &amp;WSAData);
<a name='L4297'>    <b>switch</b> (ret) <font color='red'>{</font>
<a name='L4298'>    <b>case</b> 0:     <i><font color='green'>/* No error */</font></i>
<a name='L4299'>        <a href='../S/3138.html#L2177' title='Defined at 2177 in Python/pythonrun.c.'>Py_AtExit</a>(<a href='../S/2711.html#L4286' title='Defined at 4286 in Modules/socketmodule.c.'>os_cleanup</a>);
<a name='L4300'>        <b>return</b> 1; <i><font color='green'>/* Success */</font></i>
<a name='L4301'>    <b>case</b> WSASYSNOTREADY:
<a name='L4302'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ImportError,
<a name='L4303'>                        "WSAStartup failed: network not ready");
<a name='L4304'>        <b>break</b>;
<a name='L4305'>    <b>case</b> WSAVERNOTSUPPORTED:
<a name='L4306'>    <b>case</b> WSAEINVAL:
<a name='L4307'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(
<a name='L4308'>            PyExc_ImportError,
<a name='L4309'>            "WSAStartup failed: requested version not supported");
<a name='L4310'>        <b>break</b>;
<a name='L4311'>    <b>default</b>:
<a name='L4312'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ImportError, "WSAStartup failed: error code %d", ret);
<a name='L4313'>        <b>break</b>;
<a name='L4314'>    <font color='red'>}</font>
<a name='L4315'>    <b>return</b> 0; <i><font color='green'>/* Failure */</font></i>
<a name='L4316'><font color='red'>}</font>
<a name='L4317'>
<a name='L4318'><font color='darkred'>#endif</font> <i><font color='green'>/* MS_WINDOWS */</font></i>
<a name='L4319'>
<a name='L4320'>
<a name='L4321'><font color='darkred'>#ifdef</font> <a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>
<a name='L4322'><font color='darkred'>#define</font> <a href='../S/2711.html#L4348' title='Refered from 4348 in Modules/socketmodule.c.'>OS_INIT_DEFINED</a>
<a name='L4323'>
<a name='L4324'><i><font color='green'>/* Additional initialization for OS/2 */</font></i>
<a name='L4325'>
<a name='L4326'><b>static</b> <b>int</b>
<a name='L4327'><a href='../S/2711.html#L4400' title='Refered from 4400 in Modules/socketmodule.c.'>os_init</a>(<b>void</b>)
<a name='L4328'><font color='red'>{</font>
<a name='L4329'><font color='darkred'>#ifndef</font> <a href='../S/2894.html#L13' title='Defined at 13 in PC/os2emx/pyconfig.h.'>PYCC_GCC</a>
<a name='L4330'>    <b>int</b> rc = sock_init();
<a name='L4331'>
<a name='L4332'>    <b>if</b> (rc == 0) <font color='red'>{</font>
<a name='L4333'>        <b>return</b> 1; <i><font color='green'>/* Success */</font></i>
<a name='L4334'>    <font color='red'>}</font>
<a name='L4335'>
<a name='L4336'>    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ImportError, "OS/2 TCP/IP Error# %d", sock_errno());
<a name='L4337'>
<a name='L4338'>    <b>return</b> 0;  <i><font color='green'>/* Failure */</font></i>
<a name='L4339'><font color='darkred'>#else</font>
<a name='L4340'>    <i><font color='green'>/* No need to initialise sockets with GCC/EMX */</font></i>
<a name='L4341'>    <b>return</b> 1; <i><font color='green'>/* Success */</font></i>
<a name='L4342'><font color='darkred'>#endif</font>
<a name='L4343'><font color='red'>}</font>
<a name='L4344'>
<a name='L4345'><font color='darkred'>#endif</font> <i><font color='green'>/* PYOS_OS2 */</font></i>
<a name='L4346'>
<a name='L4347'>
<a name='L4348'><font color='darkred'>#ifndef</font> <a href='../D/2430.html' title='Multiple defined in 2 places.'>OS_INIT_DEFINED</a>
<a name='L4349'><b>static</b> <b>int</b>
<a name='L4350'><a href='../S/2711.html#L4400' title='Refered from 4400 in Modules/socketmodule.c.'>os_init</a>(<b>void</b>)
<a name='L4351'><font color='red'>{</font>
<a name='L4352'>    <b>return</b> 1; <i><font color='green'>/* Success */</font></i>
<a name='L4353'><font color='red'>}</font>
<a name='L4354'><font color='darkred'>#endif</font>
<a name='L4355'>
<a name='L4356'>
<a name='L4357'><i><font color='green'>/* C API table - always add new things to the end for binary</font></i>
<a name='L4358'><i><font color='green'>   compatibility. */</font></i>
<a name='L4359'><b>static</b>
<a name='L4360'><a href='../S/2712.html#L200' title='Defined at 200 in Modules/socketmodule.h.'>PySocketModule_APIObject</a> PySocketModuleAPI =
<a name='L4361'><font color='red'>{</font>
<a name='L4362'>    &amp;sock_type,
<a name='L4363'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L4364'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L4365'><font color='red'>}</font>;
<a name='L4366'>
<a name='L4367'>
<a name='L4368'><i><font color='green'>/* Initialize the _socket module.</font></i>
<a name='L4369'><i><font color='green'></font></i>
<a name='L4370'><i><font color='green'>   This module is actually called "_socket", and there's a wrapper</font></i>
<a name='L4371'><i><font color='green'>   "socket.py" which implements some additional functionality.</font></i>
<a name='L4372'><i><font color='green'>   The import of "_socket" may fail with an ImportError exception if</font></i>
<a name='L4373'><i><font color='green'>   os-specific initialization fails.  On Windows, this does WINSOCK</font></i>
<a name='L4374'><i><font color='green'>   initialization.  When WINSOCK is initialized succesfully, a call to</font></i>
<a name='L4375'><i><font color='green'>   WSACleanup() is scheduled to be made at exit time.</font></i>
<a name='L4376'><i><font color='green'>*/</font></i>
<a name='L4377'>
<a name='L4378'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(socket_doc,
<a name='L4379'>"Implementation module for socket operations.\n\
<a name='L4380'>\n\
<a name='L4381'>See the socket module for documentation.");
<a name='L4382'>
<a name='L4383'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> socketmodule = <font color='red'>{</font>
<a name='L4384'>    <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L4385'>    <a href='../S/2712.html#L79' title='Defined at 79 in Modules/socketmodule.h.'>PySocket_MODULE_NAME</a>,
<a name='L4386'>    socket_doc,
<a name='L4387'>    -1,
<a name='L4388'>    socket_methods,
<a name='L4389'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L4390'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L4391'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L4392'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L4393'><font color='red'>}</font>;
<a name='L4394'>
<a name='L4395'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L4396'>PyInit__socket(<b>void</b>)
<a name='L4397'><font color='red'>{</font>
<a name='L4398'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *m, *has_ipv6;
<a name='L4399'>
<a name='L4400'>    <b>if</b> (!<a href='../D/10227.html' title='Multiple defined in 3 places.'>os_init</a>())
<a name='L4401'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4402'>
<a name='L4403'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(&amp;sock_type) = &amp;PyType_Type;
<a name='L4404'>    m = PyModule_Create(&amp;socketmodule);
<a name='L4405'>    <b>if</b> (m == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4406'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4407'>
<a name='L4408'>    socket_error = <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("socket.error",
<a name='L4409'>                                      PyExc_IOError, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4410'>    <b>if</b> (socket_error == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4411'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4412'>    PySocketModuleAPI.<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = socket_error;
<a name='L4413'>    Py_INCREF(socket_error);
<a name='L4414'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "error", socket_error);
<a name='L4415'>    socket_herror = <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("socket.herror",
<a name='L4416'>                                       socket_error, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4417'>    <b>if</b> (socket_herror == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4418'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4419'>    Py_INCREF(socket_herror);
<a name='L4420'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "herror", socket_herror);
<a name='L4421'>    socket_gaierror = <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("socket.gaierror", socket_error,
<a name='L4422'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4423'>    <b>if</b> (socket_gaierror == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4424'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4425'>    Py_INCREF(socket_gaierror);
<a name='L4426'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "gaierror", socket_gaierror);
<a name='L4427'>    socket_timeout = <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("socket.timeout",
<a name='L4428'>                                        socket_error, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4429'>    <b>if</b> (socket_timeout == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4430'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4431'>    PySocketModuleAPI.timeout_error = socket_timeout;
<a name='L4432'>    Py_INCREF(socket_timeout);
<a name='L4433'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "timeout", socket_timeout);
<a name='L4434'>    Py_INCREF((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;sock_type);
<a name='L4435'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "SocketType",
<a name='L4436'>                           (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;sock_type) != 0)
<a name='L4437'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4438'>    Py_INCREF((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;sock_type);
<a name='L4439'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "socket",
<a name='L4440'>                           (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;sock_type) != 0)
<a name='L4441'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4442'>
<a name='L4443'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L29' title='Defined at 29 in Modules/socketmodule.h.'>ENABLE_IPV6</a>
<a name='L4444'>    has_ipv6 = Py_True;
<a name='L4445'><font color='darkred'>#else</font>
<a name='L4446'>    has_ipv6 = Py_False;
<a name='L4447'><font color='darkred'>#endif</font>
<a name='L4448'>    Py_INCREF(has_ipv6);
<a name='L4449'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "has_ipv6", has_ipv6);
<a name='L4450'>
<a name='L4451'>    <i><font color='green'>/* Export C API */</font></i>
<a name='L4452'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, <a href='../S/2712.html#L80' title='Defined at 80 in Modules/socketmodule.h.'>PySocket_CAPI_NAME</a>,
<a name='L4453'>           <a href='../S/2780.html#L44' title='Defined at 44 in Objects/capsule.c.'>PyCapsule_New</a>(&amp;PySocketModuleAPI, <a href='../S/2712.html#L81' title='Defined at 81 in Modules/socketmodule.h.'>PySocket_CAPSULE_NAME</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4454'>                             ) != 0)
<a name='L4455'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4456'>
<a name='L4457'>    <i><font color='green'>/* Address families (we only support AF_INET and AF_UNIX) */</font></i>
<a name='L4458'><font color='darkred'>#ifdef</font> AF_UNSPEC
<a name='L4459'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_UNSPEC", AF_UNSPEC);
<a name='L4460'><font color='darkred'>#endif</font>
<a name='L4461'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_INET", AF_INET);
<a name='L4462'><font color='darkred'>#ifdef</font> AF_INET6
<a name='L4463'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_INET6", AF_INET6);
<a name='L4464'><font color='darkred'>#endif</font> <i><font color='green'>/* AF_INET6 */</font></i>
<a name='L4465'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>)
<a name='L4466'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_UNIX", <a href='../S/2712.html#L38' title='Defined at 38 in Modules/socketmodule.h.'>AF_UNIX</a>);
<a name='L4467'><font color='darkred'>#endif</font> <i><font color='green'>/* AF_UNIX */</font></i>
<a name='L4468'><font color='darkred'>#ifdef</font> AF_AX25
<a name='L4469'>    <i><font color='green'>/* Amateur Radio AX.25 */</font></i>
<a name='L4470'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_AX25", AF_AX25);
<a name='L4471'><font color='darkred'>#endif</font>
<a name='L4472'><font color='darkred'>#ifdef</font> AF_IPX
<a name='L4473'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_IPX", AF_IPX); <i><font color='green'>/* Novell IPX */</font></i>
<a name='L4474'><font color='darkred'>#endif</font>
<a name='L4475'><font color='darkred'>#ifdef</font> AF_APPLETALK
<a name='L4476'>    <i><font color='green'>/* Appletalk DDP */</font></i>
<a name='L4477'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_APPLETALK", AF_APPLETALK);
<a name='L4478'><font color='darkred'>#endif</font>
<a name='L4479'><font color='darkred'>#ifdef</font> AF_NETROM
<a name='L4480'>    <i><font color='green'>/* Amateur radio NetROM */</font></i>
<a name='L4481'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_NETROM", AF_NETROM);
<a name='L4482'><font color='darkred'>#endif</font>
<a name='L4483'><font color='darkred'>#ifdef</font> AF_BRIDGE
<a name='L4484'>    <i><font color='green'>/* Multiprotocol bridge */</font></i>
<a name='L4485'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_BRIDGE", AF_BRIDGE);
<a name='L4486'><font color='darkred'>#endif</font>
<a name='L4487'><font color='darkred'>#ifdef</font> AF_ATMPVC
<a name='L4488'>    <i><font color='green'>/* ATM PVCs */</font></i>
<a name='L4489'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_ATMPVC", AF_ATMPVC);
<a name='L4490'><font color='darkred'>#endif</font>
<a name='L4491'><font color='darkred'>#ifdef</font> AF_AAL5
<a name='L4492'>    <i><font color='green'>/* Reserved for Werner's ATM */</font></i>
<a name='L4493'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_AAL5", AF_AAL5);
<a name='L4494'><font color='darkred'>#endif</font>
<a name='L4495'><font color='darkred'>#ifdef</font> AF_X25
<a name='L4496'>    <i><font color='green'>/* Reserved for X.25 project */</font></i>
<a name='L4497'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_X25", AF_X25);
<a name='L4498'><font color='darkred'>#endif</font>
<a name='L4499'><font color='darkred'>#ifdef</font> AF_INET6
<a name='L4500'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_INET6", AF_INET6); <i><font color='green'>/* IP version 6 */</font></i>
<a name='L4501'><font color='darkred'>#endif</font>
<a name='L4502'><font color='darkred'>#ifdef</font> AF_ROSE
<a name='L4503'>    <i><font color='green'>/* Amateur Radio X.25 PLP */</font></i>
<a name='L4504'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_ROSE", AF_ROSE);
<a name='L4505'><font color='darkred'>#endif</font>
<a name='L4506'><font color='darkred'>#ifdef</font> AF_DECnet
<a name='L4507'>    <i><font color='green'>/* Reserved for DECnet project */</font></i>
<a name='L4508'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_DECnet", AF_DECnet);
<a name='L4509'><font color='darkred'>#endif</font>
<a name='L4510'><font color='darkred'>#ifdef</font> AF_NETBEUI
<a name='L4511'>    <i><font color='green'>/* Reserved for 802.2LLC project */</font></i>
<a name='L4512'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_NETBEUI", AF_NETBEUI);
<a name='L4513'><font color='darkred'>#endif</font>
<a name='L4514'><font color='darkred'>#ifdef</font> AF_SECURITY
<a name='L4515'>    <i><font color='green'>/* Security callback pseudo AF */</font></i>
<a name='L4516'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_SECURITY", AF_SECURITY);
<a name='L4517'><font color='darkred'>#endif</font>
<a name='L4518'><font color='darkred'>#ifdef</font> AF_KEY
<a name='L4519'>    <i><font color='green'>/* PF_KEY key management API */</font></i>
<a name='L4520'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_KEY", AF_KEY);
<a name='L4521'><font color='darkred'>#endif</font>
<a name='L4522'><font color='darkred'>#ifdef</font> <a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>
<a name='L4523'>    <i><font color='green'>/*  */</font></i>
<a name='L4524'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_NETLINK", <a href='../S/2712.html#L47' title='Defined at 47 in Modules/socketmodule.h.'>AF_NETLINK</a>);
<a name='L4525'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_ROUTE", NETLINK_ROUTE);
<a name='L4526'><font color='darkred'>#ifdef</font> NETLINK_SKIP
<a name='L4527'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_SKIP", NETLINK_SKIP);
<a name='L4528'><font color='darkred'>#endif</font>
<a name='L4529'><font color='darkred'>#ifdef</font> NETLINK_W1
<a name='L4530'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_W1", NETLINK_W1);
<a name='L4531'><font color='darkred'>#endif</font>
<a name='L4532'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_USERSOCK", NETLINK_USERSOCK);
<a name='L4533'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_FIREWALL", NETLINK_FIREWALL);
<a name='L4534'><font color='darkred'>#ifdef</font> NETLINK_TCPDIAG
<a name='L4535'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_TCPDIAG", NETLINK_TCPDIAG);
<a name='L4536'><font color='darkred'>#endif</font>
<a name='L4537'><font color='darkred'>#ifdef</font> NETLINK_NFLOG
<a name='L4538'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_NFLOG", NETLINK_NFLOG);
<a name='L4539'><font color='darkred'>#endif</font>
<a name='L4540'><font color='darkred'>#ifdef</font> NETLINK_XFRM
<a name='L4541'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_XFRM", NETLINK_XFRM);
<a name='L4542'><font color='darkred'>#endif</font>
<a name='L4543'><font color='darkred'>#ifdef</font> NETLINK_ARPD
<a name='L4544'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_ARPD", NETLINK_ARPD);
<a name='L4545'><font color='darkred'>#endif</font>
<a name='L4546'><font color='darkred'>#ifdef</font> NETLINK_ROUTE6
<a name='L4547'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_ROUTE6", NETLINK_ROUTE6);
<a name='L4548'><font color='darkred'>#endif</font>
<a name='L4549'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_IP6_FW", NETLINK_IP6_FW);
<a name='L4550'><font color='darkred'>#ifdef</font> NETLINK_DNRTMSG
<a name='L4551'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_DNRTMSG", NETLINK_DNRTMSG);
<a name='L4552'><font color='darkred'>#endif</font>
<a name='L4553'><font color='darkred'>#ifdef</font> NETLINK_TAPBASE
<a name='L4554'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NETLINK_TAPBASE", NETLINK_TAPBASE);
<a name='L4555'><font color='darkred'>#endif</font>
<a name='L4556'><font color='darkred'>#endif</font> <i><font color='green'>/* AF_NETLINK */</font></i>
<a name='L4557'><font color='darkred'>#ifdef</font> AF_ROUTE
<a name='L4558'>    <i><font color='green'>/* Alias to emulate 4.4BSD */</font></i>
<a name='L4559'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_ROUTE", AF_ROUTE);
<a name='L4560'><font color='darkred'>#endif</font>
<a name='L4561'><font color='darkred'>#ifdef</font> AF_ASH
<a name='L4562'>    <i><font color='green'>/* Ash */</font></i>
<a name='L4563'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_ASH", AF_ASH);
<a name='L4564'><font color='darkred'>#endif</font>
<a name='L4565'><font color='darkred'>#ifdef</font> AF_ECONET
<a name='L4566'>    <i><font color='green'>/* Acorn Econet */</font></i>
<a name='L4567'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_ECONET", AF_ECONET);
<a name='L4568'><font color='darkred'>#endif</font>
<a name='L4569'><font color='darkred'>#ifdef</font> AF_ATMSVC
<a name='L4570'>    <i><font color='green'>/* ATM SVCs */</font></i>
<a name='L4571'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_ATMSVC", AF_ATMSVC);
<a name='L4572'><font color='darkred'>#endif</font>
<a name='L4573'><font color='darkred'>#ifdef</font> AF_SNA
<a name='L4574'>    <i><font color='green'>/* Linux SNA Project (nutters!) */</font></i>
<a name='L4575'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_SNA", AF_SNA);
<a name='L4576'><font color='darkred'>#endif</font>
<a name='L4577'><font color='darkred'>#ifdef</font> AF_IRDA
<a name='L4578'>    <i><font color='green'>/* IRDA sockets */</font></i>
<a name='L4579'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_IRDA", AF_IRDA);
<a name='L4580'><font color='darkred'>#endif</font>
<a name='L4581'><font color='darkred'>#ifdef</font> AF_PPPOX
<a name='L4582'>    <i><font color='green'>/* PPPoX sockets */</font></i>
<a name='L4583'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_PPPOX", AF_PPPOX);
<a name='L4584'><font color='darkred'>#endif</font>
<a name='L4585'><font color='darkred'>#ifdef</font> AF_WANPIPE
<a name='L4586'>    <i><font color='green'>/* Wanpipe API Sockets */</font></i>
<a name='L4587'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_WANPIPE", AF_WANPIPE);
<a name='L4588'><font color='darkred'>#endif</font>
<a name='L4589'><font color='darkred'>#ifdef</font> AF_LLC
<a name='L4590'>    <i><font color='green'>/* Linux LLC */</font></i>
<a name='L4591'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_LLC", AF_LLC);
<a name='L4592'><font color='darkred'>#endif</font>
<a name='L4593'>
<a name='L4594'><font color='darkred'>#ifdef</font> <a href='../S/2711.html#L383' title='Defined at 383 in Modules/socketmodule.c.'>USE_BLUETOOTH</a>
<a name='L4595'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_BLUETOOTH", AF_BLUETOOTH);
<a name='L4596'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "BTPROTO_L2CAP", <a href='../S/2711.html#L385' title='Defined at 385 in Modules/socketmodule.c.'>BTPROTO_L2CAP</a>);
<a name='L4597'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "BTPROTO_HCI", <a href='../S/2711.html#L387' title='Defined at 387 in Modules/socketmodule.c.'>BTPROTO_HCI</a>);
<a name='L4598'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_HCI", <a href='../D/4781.html' title='Multiple defined in 2 places.'>SOL_HCI</a>);
<a name='L4599'><font color='darkred'>#if</font> !<b>defined</b>(__NetBSD__) &amp;&amp; !<b>defined</b>(__DragonFly__)
<a name='L4600'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "HCI_FILTER", <a href='../S/2711.html#L389' title='Defined at 389 in Modules/socketmodule.c.'>HCI_FILTER</a>);
<a name='L4601'><font color='darkred'>#endif</font>
<a name='L4602'><font color='darkred'>#if</font> !<b>defined</b>(__FreeBSD__)
<a name='L4603'><font color='darkred'>#if</font> !<b>defined</b>(__NetBSD__) &amp;&amp; !<b>defined</b>(__DragonFly__)
<a name='L4604'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "HCI_TIME_STAMP", HCI_TIME_STAMP);
<a name='L4605'><font color='darkred'>#endif</font>
<a name='L4606'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "HCI_DATA_DIR", <a href='../S/2711.html#L402' title='Defined at 402 in Modules/socketmodule.c.'>HCI_DATA_DIR</a>);
<a name='L4607'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "BTPROTO_SCO", BTPROTO_SCO);
<a name='L4608'><font color='darkred'>#endif</font>
<a name='L4609'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "BTPROTO_RFCOMM", <a href='../S/2711.html#L386' title='Defined at 386 in Modules/socketmodule.c.'>BTPROTO_RFCOMM</a>);
<a name='L4610'>    <a href='../S/3125.html#L566' title='Defined at 566 in Python/modsupport.c.'>PyModule_AddStringConstant</a>(m, "BDADDR_ANY", "00:00:00:00:00:00");
<a name='L4611'>    <a href='../S/3125.html#L566' title='Defined at 566 in Python/modsupport.c.'>PyModule_AddStringConstant</a>(m, "BDADDR_LOCAL", "00:00:00:FF:FF:FF");
<a name='L4612'><font color='darkred'>#endif</font>
<a name='L4613'>
<a name='L4614'><font color='darkred'>#ifdef</font> AF_PACKET
<a name='L4615'>    PyModule_AddIntMacro(m, AF_PACKET);
<a name='L4616'><font color='darkred'>#endif</font>
<a name='L4617'><font color='darkred'>#ifdef</font> PF_PACKET
<a name='L4618'>    PyModule_AddIntMacro(m, PF_PACKET);
<a name='L4619'><font color='darkred'>#endif</font>
<a name='L4620'><font color='darkred'>#ifdef</font> PACKET_HOST
<a name='L4621'>    PyModule_AddIntMacro(m, PACKET_HOST);
<a name='L4622'><font color='darkred'>#endif</font>
<a name='L4623'><font color='darkred'>#ifdef</font> PACKET_BROADCAST
<a name='L4624'>    PyModule_AddIntMacro(m, PACKET_BROADCAST);
<a name='L4625'><font color='darkred'>#endif</font>
<a name='L4626'><font color='darkred'>#ifdef</font> PACKET_MULTICAST
<a name='L4627'>    PyModule_AddIntMacro(m, PACKET_MULTICAST);
<a name='L4628'><font color='darkred'>#endif</font>
<a name='L4629'><font color='darkred'>#ifdef</font> PACKET_OTHERHOST
<a name='L4630'>    PyModule_AddIntMacro(m, PACKET_OTHERHOST);
<a name='L4631'><font color='darkred'>#endif</font>
<a name='L4632'><font color='darkred'>#ifdef</font> PACKET_OUTGOING
<a name='L4633'>    PyModule_AddIntMacro(m, PACKET_OUTGOING);
<a name='L4634'><font color='darkred'>#endif</font>
<a name='L4635'><font color='darkred'>#ifdef</font> PACKET_LOOPBACK
<a name='L4636'>    PyModule_AddIntMacro(m, PACKET_LOOPBACK);
<a name='L4637'><font color='darkred'>#endif</font>
<a name='L4638'><font color='darkred'>#ifdef</font> PACKET_FASTROUTE
<a name='L4639'>    PyModule_AddIntMacro(m, PACKET_FASTROUTE);
<a name='L4640'><font color='darkred'>#endif</font>
<a name='L4641'>
<a name='L4642'><font color='darkred'>#ifdef</font> HAVE_LINUX_TIPC_H
<a name='L4643'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AF_TIPC", AF_TIPC);
<a name='L4644'>
<a name='L4645'>    <i><font color='green'>/* for addresses */</font></i>
<a name='L4646'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_ADDR_NAMESEQ", TIPC_ADDR_NAMESEQ);
<a name='L4647'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_ADDR_NAME", TIPC_ADDR_NAME);
<a name='L4648'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_ADDR_ID", TIPC_ADDR_ID);
<a name='L4649'>
<a name='L4650'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_ZONE_SCOPE", TIPC_ZONE_SCOPE);
<a name='L4651'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_CLUSTER_SCOPE", TIPC_CLUSTER_SCOPE);
<a name='L4652'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_NODE_SCOPE", TIPC_NODE_SCOPE);
<a name='L4653'>
<a name='L4654'>    <i><font color='green'>/* for setsockopt() */</font></i>
<a name='L4655'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_TIPC", SOL_TIPC);
<a name='L4656'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_IMPORTANCE", TIPC_IMPORTANCE);
<a name='L4657'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_SRC_DROPPABLE", TIPC_SRC_DROPPABLE);
<a name='L4658'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_DEST_DROPPABLE",
<a name='L4659'>                    TIPC_DEST_DROPPABLE);
<a name='L4660'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_CONN_TIMEOUT", TIPC_CONN_TIMEOUT);
<a name='L4661'>
<a name='L4662'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_LOW_IMPORTANCE",
<a name='L4663'>                    TIPC_LOW_IMPORTANCE);
<a name='L4664'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_MEDIUM_IMPORTANCE",
<a name='L4665'>                    TIPC_MEDIUM_IMPORTANCE);
<a name='L4666'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_HIGH_IMPORTANCE",
<a name='L4667'>                    TIPC_HIGH_IMPORTANCE);
<a name='L4668'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_CRITICAL_IMPORTANCE",
<a name='L4669'>                    TIPC_CRITICAL_IMPORTANCE);
<a name='L4670'>
<a name='L4671'>    <i><font color='green'>/* for subscriptions */</font></i>
<a name='L4672'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_SUB_PORTS", TIPC_SUB_PORTS);
<a name='L4673'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_SUB_SERVICE", TIPC_SUB_SERVICE);
<a name='L4674'><font color='darkred'>#ifdef</font> TIPC_SUB_CANCEL
<a name='L4675'>    <i><font color='green'>/* doesn't seem to be available everywhere */</font></i>
<a name='L4676'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_SUB_CANCEL", TIPC_SUB_CANCEL);
<a name='L4677'><font color='darkred'>#endif</font>
<a name='L4678'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_WAIT_FOREVER", TIPC_WAIT_FOREVER);
<a name='L4679'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_PUBLISHED", TIPC_PUBLISHED);
<a name='L4680'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_WITHDRAWN", TIPC_WITHDRAWN);
<a name='L4681'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_SUBSCR_TIMEOUT", TIPC_SUBSCR_TIMEOUT);
<a name='L4682'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_CFG_SRV", TIPC_CFG_SRV);
<a name='L4683'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TIPC_TOP_SRV", TIPC_TOP_SRV);
<a name='L4684'><font color='darkred'>#endif</font>
<a name='L4685'>
<a name='L4686'>    <i><font color='green'>/* Socket types */</font></i>
<a name='L4687'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOCK_STREAM", SOCK_STREAM);
<a name='L4688'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOCK_DGRAM", SOCK_DGRAM);
<a name='L4689'><i><font color='green'>/* We have incomplete socket support. */</font></i>
<a name='L4690'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOCK_RAW", SOCK_RAW);
<a name='L4691'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOCK_SEQPACKET", SOCK_SEQPACKET);
<a name='L4692'><font color='darkred'>#if</font> <b>defined</b>(SOCK_RDM)
<a name='L4693'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOCK_RDM", SOCK_RDM);
<a name='L4694'><font color='darkred'>#endif</font>
<a name='L4695'><font color='darkred'>#ifdef</font> SOCK_CLOEXEC
<a name='L4696'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOCK_CLOEXEC", SOCK_CLOEXEC);
<a name='L4697'><font color='darkred'>#endif</font>
<a name='L4698'><font color='darkred'>#ifdef</font> SOCK_NONBLOCK
<a name='L4699'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOCK_NONBLOCK", SOCK_NONBLOCK);
<a name='L4700'><font color='darkred'>#endif</font>
<a name='L4701'>
<a name='L4702'><font color='darkred'>#ifdef</font>  SO_DEBUG
<a name='L4703'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_DEBUG", SO_DEBUG);
<a name='L4704'><font color='darkred'>#endif</font>
<a name='L4705'><font color='darkred'>#ifdef</font>  SO_ACCEPTCONN
<a name='L4706'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_ACCEPTCONN", SO_ACCEPTCONN);
<a name='L4707'><font color='darkred'>#endif</font>
<a name='L4708'><font color='darkred'>#ifdef</font>  SO_REUSEADDR
<a name='L4709'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_REUSEADDR", SO_REUSEADDR);
<a name='L4710'><font color='darkred'>#endif</font>
<a name='L4711'><font color='darkred'>#ifdef</font> SO_EXCLUSIVEADDRUSE
<a name='L4712'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_EXCLUSIVEADDRUSE", SO_EXCLUSIVEADDRUSE);
<a name='L4713'><font color='darkred'>#endif</font>
<a name='L4714'>
<a name='L4715'><font color='darkred'>#ifdef</font>  SO_KEEPALIVE
<a name='L4716'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_KEEPALIVE", SO_KEEPALIVE);
<a name='L4717'><font color='darkred'>#endif</font>
<a name='L4718'><font color='darkred'>#ifdef</font>  SO_DONTROUTE
<a name='L4719'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_DONTROUTE", SO_DONTROUTE);
<a name='L4720'><font color='darkred'>#endif</font>
<a name='L4721'><font color='darkred'>#ifdef</font>  SO_BROADCAST
<a name='L4722'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_BROADCAST", SO_BROADCAST);
<a name='L4723'><font color='darkred'>#endif</font>
<a name='L4724'><font color='darkred'>#ifdef</font>  SO_USELOOPBACK
<a name='L4725'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_USELOOPBACK", SO_USELOOPBACK);
<a name='L4726'><font color='darkred'>#endif</font>
<a name='L4727'><font color='darkred'>#ifdef</font>  SO_LINGER
<a name='L4728'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_LINGER", SO_LINGER);
<a name='L4729'><font color='darkred'>#endif</font>
<a name='L4730'><font color='darkred'>#ifdef</font>  SO_OOBINLINE
<a name='L4731'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_OOBINLINE", SO_OOBINLINE);
<a name='L4732'><font color='darkred'>#endif</font>
<a name='L4733'><font color='darkred'>#ifdef</font>  SO_REUSEPORT
<a name='L4734'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_REUSEPORT", SO_REUSEPORT);
<a name='L4735'><font color='darkred'>#endif</font>
<a name='L4736'><font color='darkred'>#ifdef</font>  SO_SNDBUF
<a name='L4737'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_SNDBUF", SO_SNDBUF);
<a name='L4738'><font color='darkred'>#endif</font>
<a name='L4739'><font color='darkred'>#ifdef</font>  SO_RCVBUF
<a name='L4740'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_RCVBUF", SO_RCVBUF);
<a name='L4741'><font color='darkred'>#endif</font>
<a name='L4742'><font color='darkred'>#ifdef</font>  SO_SNDLOWAT
<a name='L4743'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_SNDLOWAT", SO_SNDLOWAT);
<a name='L4744'><font color='darkred'>#endif</font>
<a name='L4745'><font color='darkred'>#ifdef</font>  SO_RCVLOWAT
<a name='L4746'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_RCVLOWAT", SO_RCVLOWAT);
<a name='L4747'><font color='darkred'>#endif</font>
<a name='L4748'><font color='darkred'>#ifdef</font>  SO_SNDTIMEO
<a name='L4749'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_SNDTIMEO", SO_SNDTIMEO);
<a name='L4750'><font color='darkred'>#endif</font>
<a name='L4751'><font color='darkred'>#ifdef</font>  SO_RCVTIMEO
<a name='L4752'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_RCVTIMEO", SO_RCVTIMEO);
<a name='L4753'><font color='darkred'>#endif</font>
<a name='L4754'><font color='darkred'>#ifdef</font>  SO_ERROR
<a name='L4755'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_ERROR", SO_ERROR);
<a name='L4756'><font color='darkred'>#endif</font>
<a name='L4757'><font color='darkred'>#ifdef</font>  SO_TYPE
<a name='L4758'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_TYPE", SO_TYPE);
<a name='L4759'><font color='darkred'>#endif</font>
<a name='L4760'><font color='darkred'>#ifdef</font>  SO_SETFIB
<a name='L4761'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SO_SETFIB", SO_SETFIB);
<a name='L4762'><font color='darkred'>#endif</font>
<a name='L4763'>
<a name='L4764'>    <i><font color='green'>/* Maximum number of connections for "listen" */</font></i>
<a name='L4765'><font color='darkred'>#ifdef</font>  SOMAXCONN
<a name='L4766'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOMAXCONN", SOMAXCONN);
<a name='L4767'><font color='darkred'>#else</font>
<a name='L4768'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOMAXCONN", 5); <i><font color='green'>/* Common value */</font></i>
<a name='L4769'><font color='darkred'>#endif</font>
<a name='L4770'>
<a name='L4771'>    <i><font color='green'>/* Flags for send, recv */</font></i>
<a name='L4772'><font color='darkred'>#ifdef</font>  MSG_OOB
<a name='L4773'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_OOB", MSG_OOB);
<a name='L4774'><font color='darkred'>#endif</font>
<a name='L4775'><font color='darkred'>#ifdef</font>  MSG_PEEK
<a name='L4776'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_PEEK", MSG_PEEK);
<a name='L4777'><font color='darkred'>#endif</font>
<a name='L4778'><font color='darkred'>#ifdef</font>  MSG_DONTROUTE
<a name='L4779'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_DONTROUTE", MSG_DONTROUTE);
<a name='L4780'><font color='darkred'>#endif</font>
<a name='L4781'><font color='darkred'>#ifdef</font>  MSG_DONTWAIT
<a name='L4782'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_DONTWAIT", MSG_DONTWAIT);
<a name='L4783'><font color='darkred'>#endif</font>
<a name='L4784'><font color='darkred'>#ifdef</font>  MSG_EOR
<a name='L4785'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_EOR", MSG_EOR);
<a name='L4786'><font color='darkred'>#endif</font>
<a name='L4787'><font color='darkred'>#ifdef</font>  MSG_TRUNC
<a name='L4788'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_TRUNC", MSG_TRUNC);
<a name='L4789'><font color='darkred'>#endif</font>
<a name='L4790'><font color='darkred'>#ifdef</font>  MSG_CTRUNC
<a name='L4791'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_CTRUNC", MSG_CTRUNC);
<a name='L4792'><font color='darkred'>#endif</font>
<a name='L4793'><font color='darkred'>#ifdef</font>  MSG_WAITALL
<a name='L4794'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_WAITALL", MSG_WAITALL);
<a name='L4795'><font color='darkred'>#endif</font>
<a name='L4796'><font color='darkred'>#ifdef</font>  MSG_BTAG
<a name='L4797'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_BTAG", MSG_BTAG);
<a name='L4798'><font color='darkred'>#endif</font>
<a name='L4799'><font color='darkred'>#ifdef</font>  MSG_ETAG
<a name='L4800'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MSG_ETAG", MSG_ETAG);
<a name='L4801'><font color='darkred'>#endif</font>
<a name='L4802'>
<a name='L4803'>    <i><font color='green'>/* Protocol level and numbers, usable for [gs]etsockopt */</font></i>
<a name='L4804'><font color='darkred'>#ifdef</font>  SOL_SOCKET
<a name='L4805'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_SOCKET", SOL_SOCKET);
<a name='L4806'><font color='darkred'>#endif</font>
<a name='L4807'><font color='darkred'>#ifdef</font>  SOL_IP
<a name='L4808'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_IP", SOL_IP);
<a name='L4809'><font color='darkred'>#else</font>
<a name='L4810'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_IP", 0);
<a name='L4811'><font color='darkred'>#endif</font>
<a name='L4812'><font color='darkred'>#ifdef</font>  SOL_IPX
<a name='L4813'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_IPX", SOL_IPX);
<a name='L4814'><font color='darkred'>#endif</font>
<a name='L4815'><font color='darkred'>#ifdef</font>  SOL_AX25
<a name='L4816'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_AX25", SOL_AX25);
<a name='L4817'><font color='darkred'>#endif</font>
<a name='L4818'><font color='darkred'>#ifdef</font>  SOL_ATALK
<a name='L4819'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_ATALK", SOL_ATALK);
<a name='L4820'><font color='darkred'>#endif</font>
<a name='L4821'><font color='darkred'>#ifdef</font>  SOL_NETROM
<a name='L4822'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_NETROM", SOL_NETROM);
<a name='L4823'><font color='darkred'>#endif</font>
<a name='L4824'><font color='darkred'>#ifdef</font>  SOL_ROSE
<a name='L4825'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_ROSE", SOL_ROSE);
<a name='L4826'><font color='darkred'>#endif</font>
<a name='L4827'><font color='darkred'>#ifdef</font>  SOL_TCP
<a name='L4828'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_TCP", SOL_TCP);
<a name='L4829'><font color='darkred'>#else</font>
<a name='L4830'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_TCP", 6);
<a name='L4831'><font color='darkred'>#endif</font>
<a name='L4832'><font color='darkred'>#ifdef</font>  SOL_UDP
<a name='L4833'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_UDP", SOL_UDP);
<a name='L4834'><font color='darkred'>#else</font>
<a name='L4835'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SOL_UDP", 17);
<a name='L4836'><font color='darkred'>#endif</font>
<a name='L4837'><font color='darkred'>#ifdef</font>  IPPROTO_IP
<a name='L4838'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IP", IPPROTO_IP);
<a name='L4839'><font color='darkred'>#else</font>
<a name='L4840'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IP", 0);
<a name='L4841'><font color='darkred'>#endif</font>
<a name='L4842'><font color='darkred'>#ifdef</font>  IPPROTO_HOPOPTS
<a name='L4843'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_HOPOPTS", IPPROTO_HOPOPTS);
<a name='L4844'><font color='darkred'>#endif</font>
<a name='L4845'><font color='darkred'>#ifdef</font>  IPPROTO_ICMP
<a name='L4846'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_ICMP", IPPROTO_ICMP);
<a name='L4847'><font color='darkred'>#else</font>
<a name='L4848'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_ICMP", 1);
<a name='L4849'><font color='darkred'>#endif</font>
<a name='L4850'><font color='darkred'>#ifdef</font>  IPPROTO_IGMP
<a name='L4851'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IGMP", IPPROTO_IGMP);
<a name='L4852'><font color='darkred'>#endif</font>
<a name='L4853'><font color='darkred'>#ifdef</font>  IPPROTO_GGP
<a name='L4854'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_GGP", IPPROTO_GGP);
<a name='L4855'><font color='darkred'>#endif</font>
<a name='L4856'><font color='darkred'>#ifdef</font>  IPPROTO_IPV4
<a name='L4857'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IPV4", IPPROTO_IPV4);
<a name='L4858'><font color='darkred'>#endif</font>
<a name='L4859'><font color='darkred'>#ifdef</font>  IPPROTO_IPV6
<a name='L4860'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IPV6", IPPROTO_IPV6);
<a name='L4861'><font color='darkred'>#endif</font>
<a name='L4862'><font color='darkred'>#ifdef</font>  IPPROTO_IPIP
<a name='L4863'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IPIP", IPPROTO_IPIP);
<a name='L4864'><font color='darkred'>#endif</font>
<a name='L4865'><font color='darkred'>#ifdef</font>  IPPROTO_TCP
<a name='L4866'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_TCP", IPPROTO_TCP);
<a name='L4867'><font color='darkred'>#else</font>
<a name='L4868'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_TCP", 6);
<a name='L4869'><font color='darkred'>#endif</font>
<a name='L4870'><font color='darkred'>#ifdef</font>  IPPROTO_EGP
<a name='L4871'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_EGP", IPPROTO_EGP);
<a name='L4872'><font color='darkred'>#endif</font>
<a name='L4873'><font color='darkred'>#ifdef</font>  IPPROTO_PUP
<a name='L4874'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_PUP", IPPROTO_PUP);
<a name='L4875'><font color='darkred'>#endif</font>
<a name='L4876'><font color='darkred'>#ifdef</font>  IPPROTO_UDP
<a name='L4877'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_UDP", IPPROTO_UDP);
<a name='L4878'><font color='darkred'>#else</font>
<a name='L4879'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_UDP", 17);
<a name='L4880'><font color='darkred'>#endif</font>
<a name='L4881'><font color='darkred'>#ifdef</font>  IPPROTO_IDP
<a name='L4882'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IDP", IPPROTO_IDP);
<a name='L4883'><font color='darkred'>#endif</font>
<a name='L4884'><font color='darkred'>#ifdef</font>  IPPROTO_HELLO
<a name='L4885'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_HELLO", IPPROTO_HELLO);
<a name='L4886'><font color='darkred'>#endif</font>
<a name='L4887'><font color='darkred'>#ifdef</font>  IPPROTO_ND
<a name='L4888'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_ND", IPPROTO_ND);
<a name='L4889'><font color='darkred'>#endif</font>
<a name='L4890'><font color='darkred'>#ifdef</font>  IPPROTO_TP
<a name='L4891'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_TP", IPPROTO_TP);
<a name='L4892'><font color='darkred'>#endif</font>
<a name='L4893'><font color='darkred'>#ifdef</font>  IPPROTO_IPV6
<a name='L4894'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IPV6", IPPROTO_IPV6);
<a name='L4895'><font color='darkred'>#endif</font>
<a name='L4896'><font color='darkred'>#ifdef</font>  IPPROTO_ROUTING
<a name='L4897'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_ROUTING", IPPROTO_ROUTING);
<a name='L4898'><font color='darkred'>#endif</font>
<a name='L4899'><font color='darkred'>#ifdef</font>  IPPROTO_FRAGMENT
<a name='L4900'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_FRAGMENT", IPPROTO_FRAGMENT);
<a name='L4901'><font color='darkred'>#endif</font>
<a name='L4902'><font color='darkred'>#ifdef</font>  IPPROTO_RSVP
<a name='L4903'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_RSVP", IPPROTO_RSVP);
<a name='L4904'><font color='darkred'>#endif</font>
<a name='L4905'><font color='darkred'>#ifdef</font>  IPPROTO_GRE
<a name='L4906'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_GRE", IPPROTO_GRE);
<a name='L4907'><font color='darkred'>#endif</font>
<a name='L4908'><font color='darkred'>#ifdef</font>  IPPROTO_ESP
<a name='L4909'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_ESP", IPPROTO_ESP);
<a name='L4910'><font color='darkred'>#endif</font>
<a name='L4911'><font color='darkred'>#ifdef</font>  IPPROTO_AH
<a name='L4912'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_AH", IPPROTO_AH);
<a name='L4913'><font color='darkred'>#endif</font>
<a name='L4914'><font color='darkred'>#ifdef</font>  IPPROTO_MOBILE
<a name='L4915'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_MOBILE", IPPROTO_MOBILE);
<a name='L4916'><font color='darkred'>#endif</font>
<a name='L4917'><font color='darkred'>#ifdef</font>  IPPROTO_ICMPV6
<a name='L4918'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_ICMPV6", IPPROTO_ICMPV6);
<a name='L4919'><font color='darkred'>#endif</font>
<a name='L4920'><font color='darkred'>#ifdef</font>  IPPROTO_NONE
<a name='L4921'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_NONE", IPPROTO_NONE);
<a name='L4922'><font color='darkred'>#endif</font>
<a name='L4923'><font color='darkred'>#ifdef</font>  IPPROTO_DSTOPTS
<a name='L4924'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_DSTOPTS", IPPROTO_DSTOPTS);
<a name='L4925'><font color='darkred'>#endif</font>
<a name='L4926'><font color='darkred'>#ifdef</font>  IPPROTO_XTP
<a name='L4927'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_XTP", IPPROTO_XTP);
<a name='L4928'><font color='darkred'>#endif</font>
<a name='L4929'><font color='darkred'>#ifdef</font>  IPPROTO_EON
<a name='L4930'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_EON", IPPROTO_EON);
<a name='L4931'><font color='darkred'>#endif</font>
<a name='L4932'><font color='darkred'>#ifdef</font>  IPPROTO_PIM
<a name='L4933'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_PIM", IPPROTO_PIM);
<a name='L4934'><font color='darkred'>#endif</font>
<a name='L4935'><font color='darkred'>#ifdef</font>  IPPROTO_IPCOMP
<a name='L4936'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_IPCOMP", IPPROTO_IPCOMP);
<a name='L4937'><font color='darkred'>#endif</font>
<a name='L4938'><font color='darkred'>#ifdef</font>  IPPROTO_VRRP
<a name='L4939'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_VRRP", IPPROTO_VRRP);
<a name='L4940'><font color='darkred'>#endif</font>
<a name='L4941'><font color='darkred'>#ifdef</font>  IPPROTO_BIP
<a name='L4942'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_BIP", IPPROTO_BIP);
<a name='L4943'><font color='darkred'>#endif</font>
<a name='L4944'><i><font color='green'>/**/</font></i>
<a name='L4945'><font color='darkred'>#ifdef</font>  IPPROTO_RAW
<a name='L4946'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_RAW", IPPROTO_RAW);
<a name='L4947'><font color='darkred'>#else</font>
<a name='L4948'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_RAW", 255);
<a name='L4949'><font color='darkred'>#endif</font>
<a name='L4950'><font color='darkred'>#ifdef</font>  IPPROTO_MAX
<a name='L4951'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPROTO_MAX", IPPROTO_MAX);
<a name='L4952'><font color='darkred'>#endif</font>
<a name='L4953'>
<a name='L4954'>    <i><font color='green'>/* Some port configuration */</font></i>
<a name='L4955'><font color='darkred'>#ifdef</font>  IPPORT_RESERVED
<a name='L4956'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPORT_RESERVED", IPPORT_RESERVED);
<a name='L4957'><font color='darkred'>#else</font>
<a name='L4958'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPORT_RESERVED", 1024);
<a name='L4959'><font color='darkred'>#endif</font>
<a name='L4960'><font color='darkred'>#ifdef</font>  IPPORT_USERRESERVED
<a name='L4961'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPORT_USERRESERVED", IPPORT_USERRESERVED);
<a name='L4962'><font color='darkred'>#else</font>
<a name='L4963'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPPORT_USERRESERVED", 5000);
<a name='L4964'><font color='darkred'>#endif</font>
<a name='L4965'>
<a name='L4966'>    <i><font color='green'>/* Some reserved IP v.4 addresses */</font></i>
<a name='L4967'><font color='darkred'>#ifdef</font>  INADDR_ANY
<a name='L4968'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_ANY", INADDR_ANY);
<a name='L4969'><font color='darkred'>#else</font>
<a name='L4970'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_ANY", 0x00000000);
<a name='L4971'><font color='darkred'>#endif</font>
<a name='L4972'><font color='darkred'>#ifdef</font>  INADDR_BROADCAST
<a name='L4973'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_BROADCAST", INADDR_BROADCAST);
<a name='L4974'><font color='darkred'>#else</font>
<a name='L4975'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_BROADCAST", 0xffffffff);
<a name='L4976'><font color='darkred'>#endif</font>
<a name='L4977'><font color='darkred'>#ifdef</font>  INADDR_LOOPBACK
<a name='L4978'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_LOOPBACK", INADDR_LOOPBACK);
<a name='L4979'><font color='darkred'>#else</font>
<a name='L4980'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_LOOPBACK", 0x7F000001);
<a name='L4981'><font color='darkred'>#endif</font>
<a name='L4982'><font color='darkred'>#ifdef</font>  INADDR_UNSPEC_GROUP
<a name='L4983'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_UNSPEC_GROUP", INADDR_UNSPEC_GROUP);
<a name='L4984'><font color='darkred'>#else</font>
<a name='L4985'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_UNSPEC_GROUP", 0xe0000000);
<a name='L4986'><font color='darkred'>#endif</font>
<a name='L4987'><font color='darkred'>#ifdef</font>  INADDR_ALLHOSTS_GROUP
<a name='L4988'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_ALLHOSTS_GROUP",
<a name='L4989'>                            INADDR_ALLHOSTS_GROUP);
<a name='L4990'><font color='darkred'>#else</font>
<a name='L4991'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_ALLHOSTS_GROUP", 0xe0000001);
<a name='L4992'><font color='darkred'>#endif</font>
<a name='L4993'><font color='darkred'>#ifdef</font>  INADDR_MAX_LOCAL_GROUP
<a name='L4994'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_MAX_LOCAL_GROUP",
<a name='L4995'>                            INADDR_MAX_LOCAL_GROUP);
<a name='L4996'><font color='darkred'>#else</font>
<a name='L4997'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_MAX_LOCAL_GROUP", 0xe00000ff);
<a name='L4998'><font color='darkred'>#endif</font>
<a name='L4999'><font color='darkred'>#ifdef</font>  <a href='../S/2711.html#L3772' title='Defined at 3772 in Modules/socketmodule.c.'>INADDR_NONE</a>
<a name='L5000'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_NONE", <a href='../S/2711.html#L3772' title='Defined at 3772 in Modules/socketmodule.c.'>INADDR_NONE</a>);
<a name='L5001'><font color='darkred'>#else</font>
<a name='L5002'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "INADDR_NONE", 0xffffffff);
<a name='L5003'><font color='darkred'>#endif</font>
<a name='L5004'>
<a name='L5005'>    <i><font color='green'>/* IPv4 [gs]etsockopt options */</font></i>
<a name='L5006'><font color='darkred'>#ifdef</font>  IP_OPTIONS
<a name='L5007'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_OPTIONS", IP_OPTIONS);
<a name='L5008'><font color='darkred'>#endif</font>
<a name='L5009'><font color='darkred'>#ifdef</font>  IP_HDRINCL
<a name='L5010'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_HDRINCL", IP_HDRINCL);
<a name='L5011'><font color='darkred'>#endif</font>
<a name='L5012'><font color='darkred'>#ifdef</font>  IP_TOS
<a name='L5013'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_TOS", IP_TOS);
<a name='L5014'><font color='darkred'>#endif</font>
<a name='L5015'><font color='darkred'>#ifdef</font>  IP_TTL
<a name='L5016'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_TTL", IP_TTL);
<a name='L5017'><font color='darkred'>#endif</font>
<a name='L5018'><font color='darkred'>#ifdef</font>  IP_RECVOPTS
<a name='L5019'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_RECVOPTS", IP_RECVOPTS);
<a name='L5020'><font color='darkred'>#endif</font>
<a name='L5021'><font color='darkred'>#ifdef</font>  IP_RECVRETOPTS
<a name='L5022'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_RECVRETOPTS", IP_RECVRETOPTS);
<a name='L5023'><font color='darkred'>#endif</font>
<a name='L5024'><font color='darkred'>#ifdef</font>  IP_RECVDSTADDR
<a name='L5025'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_RECVDSTADDR", IP_RECVDSTADDR);
<a name='L5026'><font color='darkred'>#endif</font>
<a name='L5027'><font color='darkred'>#ifdef</font>  IP_RETOPTS
<a name='L5028'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_RETOPTS", IP_RETOPTS);
<a name='L5029'><font color='darkred'>#endif</font>
<a name='L5030'><font color='darkred'>#ifdef</font>  IP_MULTICAST_IF
<a name='L5031'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_MULTICAST_IF", IP_MULTICAST_IF);
<a name='L5032'><font color='darkred'>#endif</font>
<a name='L5033'><font color='darkred'>#ifdef</font>  IP_MULTICAST_TTL
<a name='L5034'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_MULTICAST_TTL", IP_MULTICAST_TTL);
<a name='L5035'><font color='darkred'>#endif</font>
<a name='L5036'><font color='darkred'>#ifdef</font>  IP_MULTICAST_LOOP
<a name='L5037'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_MULTICAST_LOOP", IP_MULTICAST_LOOP);
<a name='L5038'><font color='darkred'>#endif</font>
<a name='L5039'><font color='darkred'>#ifdef</font>  IP_ADD_MEMBERSHIP
<a name='L5040'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_ADD_MEMBERSHIP", IP_ADD_MEMBERSHIP);
<a name='L5041'><font color='darkred'>#endif</font>
<a name='L5042'><font color='darkred'>#ifdef</font>  IP_DROP_MEMBERSHIP
<a name='L5043'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_DROP_MEMBERSHIP", IP_DROP_MEMBERSHIP);
<a name='L5044'><font color='darkred'>#endif</font>
<a name='L5045'><font color='darkred'>#ifdef</font>  IP_DEFAULT_MULTICAST_TTL
<a name='L5046'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_DEFAULT_MULTICAST_TTL",
<a name='L5047'>                            IP_DEFAULT_MULTICAST_TTL);
<a name='L5048'><font color='darkred'>#endif</font>
<a name='L5049'><font color='darkred'>#ifdef</font>  IP_DEFAULT_MULTICAST_LOOP
<a name='L5050'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_DEFAULT_MULTICAST_LOOP",
<a name='L5051'>                            IP_DEFAULT_MULTICAST_LOOP);
<a name='L5052'><font color='darkred'>#endif</font>
<a name='L5053'><font color='darkred'>#ifdef</font>  IP_MAX_MEMBERSHIPS
<a name='L5054'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IP_MAX_MEMBERSHIPS", IP_MAX_MEMBERSHIPS);
<a name='L5055'><font color='darkred'>#endif</font>
<a name='L5056'>
<a name='L5057'>    <i><font color='green'>/* IPv6 [gs]etsockopt options, defined in RFC2553 */</font></i>
<a name='L5058'><font color='darkred'>#ifdef</font>  IPV6_JOIN_GROUP
<a name='L5059'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_JOIN_GROUP", IPV6_JOIN_GROUP);
<a name='L5060'><font color='darkred'>#endif</font>
<a name='L5061'><font color='darkred'>#ifdef</font>  IPV6_LEAVE_GROUP
<a name='L5062'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_LEAVE_GROUP", IPV6_LEAVE_GROUP);
<a name='L5063'><font color='darkred'>#endif</font>
<a name='L5064'><font color='darkred'>#ifdef</font>  IPV6_MULTICAST_HOPS
<a name='L5065'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_MULTICAST_HOPS", IPV6_MULTICAST_HOPS);
<a name='L5066'><font color='darkred'>#endif</font>
<a name='L5067'><font color='darkred'>#ifdef</font>  IPV6_MULTICAST_IF
<a name='L5068'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_MULTICAST_IF", IPV6_MULTICAST_IF);
<a name='L5069'><font color='darkred'>#endif</font>
<a name='L5070'><font color='darkred'>#ifdef</font>  IPV6_MULTICAST_LOOP
<a name='L5071'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_MULTICAST_LOOP", IPV6_MULTICAST_LOOP);
<a name='L5072'><font color='darkred'>#endif</font>
<a name='L5073'><font color='darkred'>#ifdef</font>  IPV6_UNICAST_HOPS
<a name='L5074'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_UNICAST_HOPS", IPV6_UNICAST_HOPS);
<a name='L5075'><font color='darkred'>#endif</font>
<a name='L5076'>    <i><font color='green'>/* Additional IPV6 socket options, defined in RFC 3493 */</font></i>
<a name='L5077'><font color='darkred'>#ifdef</font> IPV6_V6ONLY
<a name='L5078'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_V6ONLY", IPV6_V6ONLY);
<a name='L5079'><font color='darkred'>#endif</font>
<a name='L5080'>    <i><font color='green'>/* Advanced IPV6 socket options, from RFC 3542 */</font></i>
<a name='L5081'><font color='darkred'>#ifdef</font> IPV6_CHECKSUM
<a name='L5082'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_CHECKSUM", IPV6_CHECKSUM);
<a name='L5083'><font color='darkred'>#endif</font>
<a name='L5084'><font color='darkred'>#ifdef</font> IPV6_DONTFRAG
<a name='L5085'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_DONTFRAG", IPV6_DONTFRAG);
<a name='L5086'><font color='darkred'>#endif</font>
<a name='L5087'><font color='darkred'>#ifdef</font> IPV6_DSTOPTS
<a name='L5088'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_DSTOPTS", IPV6_DSTOPTS);
<a name='L5089'><font color='darkred'>#endif</font>
<a name='L5090'><font color='darkred'>#ifdef</font> IPV6_HOPLIMIT
<a name='L5091'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_HOPLIMIT", IPV6_HOPLIMIT);
<a name='L5092'><font color='darkred'>#endif</font>
<a name='L5093'><font color='darkred'>#ifdef</font> IPV6_HOPOPTS
<a name='L5094'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_HOPOPTS", IPV6_HOPOPTS);
<a name='L5095'><font color='darkred'>#endif</font>
<a name='L5096'><font color='darkred'>#ifdef</font> IPV6_NEXTHOP
<a name='L5097'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_NEXTHOP", IPV6_NEXTHOP);
<a name='L5098'><font color='darkred'>#endif</font>
<a name='L5099'><font color='darkred'>#ifdef</font> IPV6_PATHMTU
<a name='L5100'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_PATHMTU", IPV6_PATHMTU);
<a name='L5101'><font color='darkred'>#endif</font>
<a name='L5102'><font color='darkred'>#ifdef</font> IPV6_PKTINFO
<a name='L5103'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_PKTINFO", IPV6_PKTINFO);
<a name='L5104'><font color='darkred'>#endif</font>
<a name='L5105'><font color='darkred'>#ifdef</font> IPV6_RECVDSTOPTS
<a name='L5106'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RECVDSTOPTS", IPV6_RECVDSTOPTS);
<a name='L5107'><font color='darkred'>#endif</font>
<a name='L5108'><font color='darkred'>#ifdef</font> IPV6_RECVHOPLIMIT
<a name='L5109'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RECVHOPLIMIT", IPV6_RECVHOPLIMIT);
<a name='L5110'><font color='darkred'>#endif</font>
<a name='L5111'><font color='darkred'>#ifdef</font> IPV6_RECVHOPOPTS
<a name='L5112'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RECVHOPOPTS", IPV6_RECVHOPOPTS);
<a name='L5113'><font color='darkred'>#endif</font>
<a name='L5114'><font color='darkred'>#ifdef</font> IPV6_RECVPKTINFO
<a name='L5115'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RECVPKTINFO", IPV6_RECVPKTINFO);
<a name='L5116'><font color='darkred'>#endif</font>
<a name='L5117'><font color='darkred'>#ifdef</font> IPV6_RECVRTHDR
<a name='L5118'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RECVRTHDR", IPV6_RECVRTHDR);
<a name='L5119'><font color='darkred'>#endif</font>
<a name='L5120'><font color='darkred'>#ifdef</font> IPV6_RECVTCLASS
<a name='L5121'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RECVTCLASS", IPV6_RECVTCLASS);
<a name='L5122'><font color='darkred'>#endif</font>
<a name='L5123'><font color='darkred'>#ifdef</font> IPV6_RTHDR
<a name='L5124'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RTHDR", IPV6_RTHDR);
<a name='L5125'><font color='darkred'>#endif</font>
<a name='L5126'><font color='darkred'>#ifdef</font> IPV6_RTHDRDSTOPTS
<a name='L5127'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RTHDRDSTOPTS", IPV6_RTHDRDSTOPTS);
<a name='L5128'><font color='darkred'>#endif</font>
<a name='L5129'><font color='darkred'>#ifdef</font> IPV6_RTHDR_TYPE_0
<a name='L5130'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RTHDR_TYPE_0", IPV6_RTHDR_TYPE_0);
<a name='L5131'><font color='darkred'>#endif</font>
<a name='L5132'><font color='darkred'>#ifdef</font> IPV6_RECVPATHMTU
<a name='L5133'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_RECVPATHMTU", IPV6_RECVPATHMTU);
<a name='L5134'><font color='darkred'>#endif</font>
<a name='L5135'><font color='darkred'>#ifdef</font> IPV6_TCLASS
<a name='L5136'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_TCLASS", IPV6_TCLASS);
<a name='L5137'><font color='darkred'>#endif</font>
<a name='L5138'><font color='darkred'>#ifdef</font> IPV6_USE_MIN_MTU
<a name='L5139'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPV6_USE_MIN_MTU", IPV6_USE_MIN_MTU);
<a name='L5140'><font color='darkred'>#endif</font>
<a name='L5141'>
<a name='L5142'>    <i><font color='green'>/* TCP options */</font></i>
<a name='L5143'><font color='darkred'>#ifdef</font>  TCP_NODELAY
<a name='L5144'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_NODELAY", TCP_NODELAY);
<a name='L5145'><font color='darkred'>#endif</font>
<a name='L5146'><font color='darkred'>#ifdef</font>  TCP_MAXSEG
<a name='L5147'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_MAXSEG", TCP_MAXSEG);
<a name='L5148'><font color='darkred'>#endif</font>
<a name='L5149'><font color='darkred'>#ifdef</font>  TCP_CORK
<a name='L5150'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_CORK", TCP_CORK);
<a name='L5151'><font color='darkred'>#endif</font>
<a name='L5152'><font color='darkred'>#ifdef</font>  TCP_KEEPIDLE
<a name='L5153'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_KEEPIDLE", TCP_KEEPIDLE);
<a name='L5154'><font color='darkred'>#endif</font>
<a name='L5155'><font color='darkred'>#ifdef</font>  TCP_KEEPINTVL
<a name='L5156'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_KEEPINTVL", TCP_KEEPINTVL);
<a name='L5157'><font color='darkred'>#endif</font>
<a name='L5158'><font color='darkred'>#ifdef</font>  TCP_KEEPCNT
<a name='L5159'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_KEEPCNT", TCP_KEEPCNT);
<a name='L5160'><font color='darkred'>#endif</font>
<a name='L5161'><font color='darkred'>#ifdef</font>  TCP_SYNCNT
<a name='L5162'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_SYNCNT", TCP_SYNCNT);
<a name='L5163'><font color='darkred'>#endif</font>
<a name='L5164'><font color='darkred'>#ifdef</font>  TCP_LINGER2
<a name='L5165'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_LINGER2", TCP_LINGER2);
<a name='L5166'><font color='darkred'>#endif</font>
<a name='L5167'><font color='darkred'>#ifdef</font>  TCP_DEFER_ACCEPT
<a name='L5168'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_DEFER_ACCEPT", TCP_DEFER_ACCEPT);
<a name='L5169'><font color='darkred'>#endif</font>
<a name='L5170'><font color='darkred'>#ifdef</font>  TCP_WINDOW_CLAMP
<a name='L5171'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_WINDOW_CLAMP", TCP_WINDOW_CLAMP);
<a name='L5172'><font color='darkred'>#endif</font>
<a name='L5173'><font color='darkred'>#ifdef</font>  TCP_INFO
<a name='L5174'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_INFO", TCP_INFO);
<a name='L5175'><font color='darkred'>#endif</font>
<a name='L5176'><font color='darkred'>#ifdef</font>  TCP_QUICKACK
<a name='L5177'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "TCP_QUICKACK", TCP_QUICKACK);
<a name='L5178'><font color='darkred'>#endif</font>
<a name='L5179'>
<a name='L5180'>
<a name='L5181'>    <i><font color='green'>/* IPX options */</font></i>
<a name='L5182'><font color='darkred'>#ifdef</font>  IPX_TYPE
<a name='L5183'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "IPX_TYPE", IPX_TYPE);
<a name='L5184'><font color='darkred'>#endif</font>
<a name='L5185'>
<a name='L5186'>    <i><font color='green'>/* get{addr,name}info parameters */</font></i>
<a name='L5187'><font color='darkred'>#ifdef</font> <a href='../D/875.html' title='Multiple defined in 2 places.'>EAI_ADDRFAMILY</a>
<a name='L5188'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_ADDRFAMILY", <a href='../D/875.html' title='Multiple defined in 2 places.'>EAI_ADDRFAMILY</a>);
<a name='L5189'><font color='darkred'>#endif</font>
<a name='L5190'><font color='darkred'>#ifdef</font> <a href='../D/876.html' title='Multiple defined in 2 places.'>EAI_AGAIN</a>
<a name='L5191'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_AGAIN", <a href='../D/876.html' title='Multiple defined in 2 places.'>EAI_AGAIN</a>);
<a name='L5192'><font color='darkred'>#endif</font>
<a name='L5193'><font color='darkred'>#ifdef</font> <a href='../D/877.html' title='Multiple defined in 2 places.'>EAI_BADFLAGS</a>
<a name='L5194'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_BADFLAGS", <a href='../D/877.html' title='Multiple defined in 2 places.'>EAI_BADFLAGS</a>);
<a name='L5195'><font color='darkred'>#endif</font>
<a name='L5196'><font color='darkred'>#ifdef</font> <a href='../D/879.html' title='Multiple defined in 2 places.'>EAI_FAIL</a>
<a name='L5197'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_FAIL", <a href='../D/879.html' title='Multiple defined in 2 places.'>EAI_FAIL</a>);
<a name='L5198'><font color='darkred'>#endif</font>
<a name='L5199'><font color='darkred'>#ifdef</font> <a href='../D/880.html' title='Multiple defined in 2 places.'>EAI_FAMILY</a>
<a name='L5200'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_FAMILY", <a href='../D/880.html' title='Multiple defined in 2 places.'>EAI_FAMILY</a>);
<a name='L5201'><font color='darkred'>#endif</font>
<a name='L5202'><font color='darkred'>#ifdef</font> <a href='../D/882.html' title='Multiple defined in 2 places.'>EAI_MEMORY</a>
<a name='L5203'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_MEMORY", <a href='../D/882.html' title='Multiple defined in 2 places.'>EAI_MEMORY</a>);
<a name='L5204'><font color='darkred'>#endif</font>
<a name='L5205'><font color='darkred'>#ifdef</font> <a href='../D/883.html' title='Multiple defined in 2 places.'>EAI_NODATA</a>
<a name='L5206'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_NODATA", <a href='../D/883.html' title='Multiple defined in 2 places.'>EAI_NODATA</a>);
<a name='L5207'><font color='darkred'>#endif</font>
<a name='L5208'><font color='darkred'>#ifdef</font> <a href='../D/884.html' title='Multiple defined in 2 places.'>EAI_NONAME</a>
<a name='L5209'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_NONAME", <a href='../D/884.html' title='Multiple defined in 2 places.'>EAI_NONAME</a>);
<a name='L5210'><font color='darkred'>#endif</font>
<a name='L5211'><font color='darkred'>#ifdef</font> EAI_OVERFLOW
<a name='L5212'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_OVERFLOW", EAI_OVERFLOW);
<a name='L5213'><font color='darkred'>#endif</font>
<a name='L5214'><font color='darkred'>#ifdef</font> <a href='../D/886.html' title='Multiple defined in 2 places.'>EAI_SERVICE</a>
<a name='L5215'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_SERVICE", <a href='../D/886.html' title='Multiple defined in 2 places.'>EAI_SERVICE</a>);
<a name='L5216'><font color='darkred'>#endif</font>
<a name='L5217'><font color='darkred'>#ifdef</font> <a href='../D/887.html' title='Multiple defined in 2 places.'>EAI_SOCKTYPE</a>
<a name='L5218'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_SOCKTYPE", <a href='../D/887.html' title='Multiple defined in 2 places.'>EAI_SOCKTYPE</a>);
<a name='L5219'><font color='darkred'>#endif</font>
<a name='L5220'><font color='darkred'>#ifdef</font> <a href='../D/888.html' title='Multiple defined in 2 places.'>EAI_SYSTEM</a>
<a name='L5221'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_SYSTEM", <a href='../D/888.html' title='Multiple defined in 2 places.'>EAI_SYSTEM</a>);
<a name='L5222'><font color='darkred'>#endif</font>
<a name='L5223'><font color='darkred'>#ifdef</font> <a href='../D/878.html' title='Multiple defined in 2 places.'>EAI_BADHINTS</a>
<a name='L5224'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_BADHINTS", <a href='../D/878.html' title='Multiple defined in 2 places.'>EAI_BADHINTS</a>);
<a name='L5225'><font color='darkred'>#endif</font>
<a name='L5226'><font color='darkred'>#ifdef</font> <a href='../D/885.html' title='Multiple defined in 2 places.'>EAI_PROTOCOL</a>
<a name='L5227'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_PROTOCOL", <a href='../D/885.html' title='Multiple defined in 2 places.'>EAI_PROTOCOL</a>);
<a name='L5228'><font color='darkred'>#endif</font>
<a name='L5229'><font color='darkred'>#ifdef</font> <a href='../D/881.html' title='Multiple defined in 2 places.'>EAI_MAX</a>
<a name='L5230'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EAI_MAX", <a href='../D/881.html' title='Multiple defined in 2 places.'>EAI_MAX</a>);
<a name='L5231'><font color='darkred'>#endif</font>
<a name='L5232'><font color='darkred'>#ifdef</font> <a href='../D/52.html' title='Multiple defined in 2 places.'>AI_PASSIVE</a>
<a name='L5233'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_PASSIVE", <a href='../D/52.html' title='Multiple defined in 2 places.'>AI_PASSIVE</a>);
<a name='L5234'><font color='darkred'>#endif</font>
<a name='L5235'><font color='darkred'>#ifdef</font> <a href='../D/48.html' title='Multiple defined in 2 places.'>AI_CANONNAME</a>
<a name='L5236'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_CANONNAME", <a href='../D/48.html' title='Multiple defined in 2 places.'>AI_CANONNAME</a>);
<a name='L5237'><font color='darkred'>#endif</font>
<a name='L5238'><font color='darkred'>#ifdef</font> <a href='../D/51.html' title='Multiple defined in 2 places.'>AI_NUMERICHOST</a>
<a name='L5239'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_NUMERICHOST", <a href='../D/51.html' title='Multiple defined in 2 places.'>AI_NUMERICHOST</a>);
<a name='L5240'><font color='darkred'>#endif</font>
<a name='L5241'><font color='darkred'>#ifdef</font> AI_NUMERICSERV
<a name='L5242'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_NUMERICSERV", AI_NUMERICSERV);
<a name='L5243'><font color='darkred'>#endif</font>
<a name='L5244'><font color='darkred'>#ifdef</font> <a href='../D/50.html' title='Multiple defined in 2 places.'>AI_MASK</a>
<a name='L5245'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_MASK", <a href='../D/50.html' title='Multiple defined in 2 places.'>AI_MASK</a>);
<a name='L5246'><font color='darkred'>#endif</font>
<a name='L5247'><font color='darkred'>#ifdef</font> <a href='../D/47.html' title='Multiple defined in 2 places.'>AI_ALL</a>
<a name='L5248'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_ALL", <a href='../D/47.html' title='Multiple defined in 2 places.'>AI_ALL</a>);
<a name='L5249'><font color='darkred'>#endif</font>
<a name='L5250'><font color='darkred'>#ifdef</font> <a href='../D/54.html' title='Multiple defined in 2 places.'>AI_V4MAPPED_CFG</a>
<a name='L5251'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_V4MAPPED_CFG", <a href='../D/54.html' title='Multiple defined in 2 places.'>AI_V4MAPPED_CFG</a>);
<a name='L5252'><font color='darkred'>#endif</font>
<a name='L5253'><font color='darkred'>#ifdef</font> <a href='../D/46.html' title='Multiple defined in 2 places.'>AI_ADDRCONFIG</a>
<a name='L5254'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_ADDRCONFIG", <a href='../D/46.html' title='Multiple defined in 2 places.'>AI_ADDRCONFIG</a>);
<a name='L5255'><font color='darkred'>#endif</font>
<a name='L5256'><font color='darkred'>#ifdef</font> <a href='../D/53.html' title='Multiple defined in 2 places.'>AI_V4MAPPED</a>
<a name='L5257'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_V4MAPPED", <a href='../D/53.html' title='Multiple defined in 2 places.'>AI_V4MAPPED</a>);
<a name='L5258'><font color='darkred'>#endif</font>
<a name='L5259'><font color='darkred'>#ifdef</font> <a href='../D/49.html' title='Multiple defined in 2 places.'>AI_DEFAULT</a>
<a name='L5260'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "AI_DEFAULT", <a href='../D/49.html' title='Multiple defined in 2 places.'>AI_DEFAULT</a>);
<a name='L5261'><font color='darkred'>#endif</font>
<a name='L5262'><font color='darkred'>#ifdef</font> <a href='../D/2307.html' title='Multiple defined in 2 places.'>NI_MAXHOST</a>
<a name='L5263'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NI_MAXHOST", <a href='../D/2307.html' title='Multiple defined in 2 places.'>NI_MAXHOST</a>);
<a name='L5264'><font color='darkred'>#endif</font>
<a name='L5265'><font color='darkred'>#ifdef</font> <a href='../D/2308.html' title='Multiple defined in 2 places.'>NI_MAXSERV</a>
<a name='L5266'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NI_MAXSERV", <a href='../D/2308.html' title='Multiple defined in 2 places.'>NI_MAXSERV</a>);
<a name='L5267'><font color='darkred'>#endif</font>
<a name='L5268'><font color='darkred'>#ifdef</font> <a href='../S/2620.html#L117' title='Defined at 117 in Modules/addrinfo.h.'>NI_NOFQDN</a>
<a name='L5269'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NI_NOFQDN", <a href='../S/2620.html#L117' title='Defined at 117 in Modules/addrinfo.h.'>NI_NOFQDN</a>);
<a name='L5270'><font color='darkred'>#endif</font>
<a name='L5271'><font color='darkred'>#ifdef</font> <a href='../S/2620.html#L118' title='Defined at 118 in Modules/addrinfo.h.'>NI_NUMERICHOST</a>
<a name='L5272'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NI_NUMERICHOST", <a href='../S/2620.html#L118' title='Defined at 118 in Modules/addrinfo.h.'>NI_NUMERICHOST</a>);
<a name='L5273'><font color='darkred'>#endif</font>
<a name='L5274'><font color='darkred'>#ifdef</font> <a href='../S/2620.html#L119' title='Defined at 119 in Modules/addrinfo.h.'>NI_NAMEREQD</a>
<a name='L5275'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NI_NAMEREQD", <a href='../S/2620.html#L119' title='Defined at 119 in Modules/addrinfo.h.'>NI_NAMEREQD</a>);
<a name='L5276'><font color='darkred'>#endif</font>
<a name='L5277'><font color='darkred'>#ifdef</font> <a href='../S/2620.html#L120' title='Defined at 120 in Modules/addrinfo.h.'>NI_NUMERICSERV</a>
<a name='L5278'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NI_NUMERICSERV", <a href='../S/2620.html#L120' title='Defined at 120 in Modules/addrinfo.h.'>NI_NUMERICSERV</a>);
<a name='L5279'><font color='darkred'>#endif</font>
<a name='L5280'><font color='darkred'>#ifdef</font> <a href='../S/2620.html#L121' title='Defined at 121 in Modules/addrinfo.h.'>NI_DGRAM</a>
<a name='L5281'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "NI_DGRAM", <a href='../S/2620.html#L121' title='Defined at 121 in Modules/addrinfo.h.'>NI_DGRAM</a>);
<a name='L5282'><font color='darkred'>#endif</font>
<a name='L5283'>
<a name='L5284'>    <i><font color='green'>/* shutdown() parameters */</font></i>
<a name='L5285'><font color='darkred'>#ifdef</font> SHUT_RD
<a name='L5286'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_RD", SHUT_RD);
<a name='L5287'><font color='darkred'>#elif</font> <b>defined</b>(SD_RECEIVE)
<a name='L5288'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_RD", SD_RECEIVE);
<a name='L5289'><font color='darkred'>#else</font>
<a name='L5290'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_RD", 0);
<a name='L5291'><font color='darkred'>#endif</font>
<a name='L5292'><font color='darkred'>#ifdef</font> SHUT_WR
<a name='L5293'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_WR", SHUT_WR);
<a name='L5294'><font color='darkred'>#elif</font> <b>defined</b>(SD_SEND)
<a name='L5295'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_WR", SD_SEND);
<a name='L5296'><font color='darkred'>#else</font>
<a name='L5297'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_WR", 1);
<a name='L5298'><font color='darkred'>#endif</font>
<a name='L5299'><font color='darkred'>#ifdef</font> SHUT_RDWR
<a name='L5300'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_RDWR", SHUT_RDWR);
<a name='L5301'><font color='darkred'>#elif</font> <b>defined</b>(SD_BOTH)
<a name='L5302'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_RDWR", SD_BOTH);
<a name='L5303'><font color='darkred'>#else</font>
<a name='L5304'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "SHUT_RDWR", 2);
<a name='L5305'><font color='darkred'>#endif</font>
<a name='L5306'>
<a name='L5307'><font color='darkred'>#ifdef</font> SIO_RCVALL
<a name='L5308'>    <font color='red'>{</font>
<a name='L5309'>        DWORD codes[] = <font color='red'>{</font>SIO_RCVALL, SIO_KEEPALIVE_VALS<font color='red'>}</font>;
<a name='L5310'>        <b>const</b> <b>char</b> *names[] = <font color='red'>{</font>"SIO_RCVALL", "SIO_KEEPALIVE_VALS"<font color='red'>}</font>;
<a name='L5311'>        <b>int</b> i;
<a name='L5312'>        <b>for</b>(i = 0; i&lt;<b>sizeof</b>(codes)/<b>sizeof</b>(*codes); ++i) <font color='red'>{</font>
<a name='L5313'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tmp;
<a name='L5314'>            tmp = <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(codes[i]);
<a name='L5315'>            <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5316'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5317'>            <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, names[i], tmp);
<a name='L5318'>        <font color='red'>}</font>
<a name='L5319'>    <font color='red'>}</font>
<a name='L5320'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "RCVALL_OFF", RCVALL_OFF);
<a name='L5321'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "RCVALL_ON", RCVALL_ON);
<a name='L5322'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "RCVALL_SOCKETLEVELONLY", RCVALL_SOCKETLEVELONLY);
<a name='L5323'><font color='darkred'>#ifdef</font> RCVALL_IPLEVEL
<a name='L5324'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "RCVALL_IPLEVEL", RCVALL_IPLEVEL);
<a name='L5325'><font color='darkred'>#endif</font>
<a name='L5326'><font color='darkred'>#ifdef</font> RCVALL_MAX
<a name='L5327'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "RCVALL_MAX", RCVALL_MAX);
<a name='L5328'><font color='darkred'>#endif</font>
<a name='L5329'><font color='darkred'>#endif</font> <i><font color='green'>/* _MSTCPIP_ */</font></i>
<a name='L5330'>
<a name='L5331'>    <i><font color='green'>/* Initialize gethostbyname lock */</font></i>
<a name='L5332'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2711.html#L171' title='Defined at 171 in Modules/socketmodule.c.'>USE_GETHOSTBYNAME_LOCK</a>) || <b>defined</b>(<a href='../S/2711.html#L184' title='Defined at 184 in Modules/socketmodule.c.'>USE_GETADDRINFO_LOCK</a>)
<a name='L5333'>    netdb_lock = <a href='../D/3848.html' title='Multiple defined in 11 places.'>PyThread_allocate_lock</a>();
<a name='L5334'><font color='darkred'>#endif</font>
<a name='L5335'>    <b>return</b> m;
<a name='L5336'><font color='red'>}</font>
<a name='L5337'>
<a name='L5338'>
<a name='L5339'><font color='darkred'>#ifndef</font> <a href='../S/2711.html#L237' title='Defined at 237 in Modules/socketmodule.c.'>HAVE_INET_PTON</a>
<a name='L5340'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../S/2906.html#L178' title='Defined at 178 in PC/pyconfig.h.'>NTDDI_VERSION</a>) || (<a href='../S/2906.html#L178' title='Defined at 178 in PC/pyconfig.h.'>NTDDI_VERSION</a> &lt; NTDDI_LONGHORN)
<a name='L5341'>
<a name='L5342'><i><font color='green'>/* Simplistic emulation code for inet_pton that only works for IPv4 */</font></i>
<a name='L5343'><i><font color='green'>/* These are not exposed because they do not set errno properly */</font></i>
<a name='L5344'>
<a name='L5345'><b>int</b>
<a name='L5346'><a href='../R/8347.html' title='Multiple refered from 4 places.'>inet_pton</a>(<b>int</b> af, <b>const</b> <b>char</b> *src, <b>void</b> *dst)
<a name='L5347'><font color='red'>{</font>
<a name='L5348'>    <b>if</b> (af == AF_INET) <font color='red'>{</font>
<a name='L5349'><font color='darkred'>#if</font> (<a href='../D/4733.html' title='Multiple defined in 3 places.'>SIZEOF_INT</a> != 4)
<a name='L5350'><font color='darkred'>#error</font> "Not sure if in_addr_t exists and int is not 32-bits."
<a name='L5351'><font color='darkred'>#endif</font>
<a name='L5352'>        <b>unsigned</b> <b>int</b> packed_addr;
<a name='L5353'>        packed_addr = inet_addr(src);
<a name='L5354'>        <b>if</b> (packed_addr == <a href='../S/2711.html#L3772' title='Defined at 3772 in Modules/socketmodule.c.'>INADDR_NONE</a>)
<a name='L5355'>            <b>return</b> 0;
<a name='L5356'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(dst, &amp;packed_addr, 4);
<a name='L5357'>        <b>return</b> 1;
<a name='L5358'>    <font color='red'>}</font>
<a name='L5359'>    <i><font color='green'>/* Should set errno to EAFNOSUPPORT */</font></i>
<a name='L5360'>    <b>return</b> -1;
<a name='L5361'><font color='red'>}</font>
<a name='L5362'>
<a name='L5363'><b>const</b> <b>char</b> *
<a name='L5364'><a href='../R/8346.html' title='Multiple refered from 4 places.'>inet_ntop</a>(<b>int</b> af, <b>const</b> <b>void</b> *src, <b>char</b> *dst, <a href='../D/11290.html' title='Multiple defined in 3 places.'>socklen_t</a> size)
<a name='L5365'><font color='red'>{</font>
<a name='L5366'>    <b>if</b> (af == AF_INET) <font color='red'>{</font>
<a name='L5367'>        <b>struct</b> in_addr packed_addr;
<a name='L5368'>        <b>if</b> (size &lt; 16)
<a name='L5369'>            <i><font color='green'>/* Should set errno to ENOSPC. */</font></i>
<a name='L5370'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5371'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;packed_addr, src, <b>sizeof</b>(packed_addr));
<a name='L5372'>        <b>return</b> strncpy(dst, inet_ntoa(packed_addr), size);
<a name='L5373'>    <font color='red'>}</font>
<a name='L5374'>    <i><font color='green'>/* Should set errno to EAFNOSUPPORT */</font></i>
<a name='L5375'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5376'><font color='red'>}</font>
<a name='L5377'>
<a name='L5378'><font color='darkred'>#endif</font>
<a name='L5379'><font color='darkred'>#endif</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L352'>[^]</a><a href='#L5364'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
