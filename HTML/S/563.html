<html>
<head>
<title>Include/pymath.h</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3349.html'>Include</a>/pymath.h</h2>
<i><font color='green'>/* [&lt;][&gt;][^][v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2><a href='570.html#L63' title='Included from 63 in Include/Python.h.'>INCLUDED FROM</a></h2>
<hr>
<pre>
<a name='L1'><font color='darkred'>#ifndef</font> <a href='../S/563.html#L2' title='Defined at 2 in Include/pymath.h.'>Py_PYMATH_H</a>
<a name='L2'><font color='darkred'>#define</font> <a href='../S/563.html#L1' title='Refered from 1 in Include/pymath.h.'>Py_PYMATH_H</a>
<a name='L3'>
<a name='L4'><font color='darkred'>#include</font> "<a href='../I/625.html'>pyconfig.h</a>" <i><font color='green'>/* include for defines */</font></i>
<a name='L5'>
<a name='L6'><i><font color='green'>/**************************************************************************</font></i>
<a name='L7'><i><font color='green'>Symbols and macros to supply platform-independent interfaces to mathematical</font></i>
<a name='L8'><i><font color='green'>functions and constants</font></i>
<a name='L9'><i><font color='green'>**************************************************************************/</font></i>
<a name='L10'>
<a name='L11'><i><font color='green'>/* Python provides implementations for copysign, round and hypot in</font></i>
<a name='L12'><i><font color='green'> * Python/pymath.c just in case your math library doesn't provide the</font></i>
<a name='L13'><i><font color='green'> * functions.</font></i>
<a name='L14'><i><font color='green'> *</font></i>
<a name='L15'><i><font color='green'> *Note: PC/pyconfig.h defines copysign as _copysign</font></i>
<a name='L16'><i><font color='green'> */</font></i>
<a name='L17'><font color='darkred'>#ifndef</font> <a href='../S/2906.html#L434' title='Defined at 434 in PC/pyconfig.h.'>HAVE_COPYSIGN</a>
<a name='L18'><b>extern</b> <b>double</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(<b>double</b>, <b>double</b>);
<a name='L19'><font color='darkred'>#endif</font>
<a name='L20'>
<a name='L21'><font color='darkred'>#ifndef</font> HAVE_ROUND
<a name='L22'><b>extern</b> <b>double</b> <a href='../S/3133.html#L70' title='Defined at 70 in Python/pymath.c.'>round</a>(<b>double</b>);
<a name='L23'><font color='darkred'>#endif</font>
<a name='L24'>
<a name='L25'><font color='darkred'>#ifndef</font> <a href='../D/1514.html' title='Multiple defined in 3 places.'>HAVE_HYPOT</a>
<a name='L26'><b>extern</b> <b>double</b> <a href='../D/9086.html' title='Multiple defined in 3 places.'>hypot</a>(<b>double</b>, <b>double</b>);
<a name='L27'><font color='darkred'>#endif</font>
<a name='L28'>
<a name='L29'><i><font color='green'>/* extra declarations */</font></i>
<a name='L30'><font color='darkred'>#ifndef</font> _MSC_VER
<a name='L31'><font color='darkred'>#ifndef</font> __STDC__
<a name='L32'><b>extern</b> <b>double</b> fmod (<b>double</b>, <b>double</b>);
<a name='L33'><b>extern</b> <b>double</b> frexp (<b>double</b>, <b>int</b> *);
<a name='L34'><b>extern</b> <b>double</b> ldexp (<b>double</b>, <b>int</b>);
<a name='L35'><b>extern</b> <b>double</b> modf (<b>double</b>, <b>double</b> *);
<a name='L36'><b>extern</b> <b>double</b> pow(<b>double</b>, <b>double</b>);
<a name='L37'><font color='darkred'>#endif</font> <i><font color='green'>/* __STDC__ */</font></i>
<a name='L38'><font color='darkred'>#endif</font> <i><font color='green'>/* _MSC_VER */</font></i>
<a name='L39'>
<a name='L40'><font color='darkred'>#ifdef</font> _OSF_SOURCE
<a name='L41'><i><font color='green'>/* OSF1 5.1 doesn't make these available with XOPEN_SOURCE_EXTENDED defined */</font></i>
<a name='L42'><b>extern</b> <b>int</b> finite(<b>double</b>);
<a name='L43'><b>extern</b> <b>double</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(<b>double</b>, <b>double</b>);
<a name='L44'><font color='darkred'>#endif</font>
<a name='L45'>
<a name='L46'><i><font color='green'>/* High precision defintion of pi and e (Euler)</font></i>
<a name='L47'><i><font color='green'> * The values are taken from libc6's math.h.</font></i>
<a name='L48'><i><font color='green'> */</font></i>
<a name='L49'><font color='darkred'>#ifndef</font> <a href='../S/563.html#L50' title='Defined at 50 in Include/pymath.h.'>Py_MATH_PIl</a>
<a name='L50'><font color='darkred'>#define</font> <a href='../S/563.html#L49' title='Refered from 49 in Include/pymath.h.'>Py_MATH_PIl</a> 3.1415926535897932384626433832795029L
<a name='L51'><font color='darkred'>#endif</font>
<a name='L52'><font color='darkred'>#ifndef</font> <a href='../S/563.html#L53' title='Defined at 53 in Include/pymath.h.'>Py_MATH_PI</a>
<a name='L53'><font color='darkred'>#define</font> <a href='../R/3744.html' title='Multiple refered from 18 places.'>Py_MATH_PI</a> 3.14159265358979323846
<a name='L54'><font color='darkred'>#endif</font>
<a name='L55'>
<a name='L56'><font color='darkred'>#ifndef</font> <a href='../S/563.html#L57' title='Defined at 57 in Include/pymath.h.'>Py_MATH_El</a>
<a name='L57'><font color='darkred'>#define</font> <a href='../S/563.html#L56' title='Refered from 56 in Include/pymath.h.'>Py_MATH_El</a> 2.7182818284590452353602874713526625L
<a name='L58'><font color='darkred'>#endif</font>
<a name='L59'>
<a name='L60'><font color='darkred'>#ifndef</font> <a href='../S/563.html#L61' title='Defined at 61 in Include/pymath.h.'>Py_MATH_E</a>
<a name='L61'><font color='darkred'>#define</font> <a href='../R/3742.html' title='Multiple refered from 9 places.'>Py_MATH_E</a> 2.7182818284590452354
<a name='L62'><font color='darkred'>#endif</font>
<a name='L63'>
<a name='L64'><i><font color='green'>/* On x86, Py_FORCE_DOUBLE forces a floating-point number out of an x87 FPU</font></i>
<a name='L65'><i><font color='green'>   register and into a 64-bit memory location, rounding from extended</font></i>
<a name='L66'><i><font color='green'>   precision to double precision in the process.  On other platforms it does</font></i>
<a name='L67'><i><font color='green'>   nothing. */</font></i>
<a name='L68'>
<a name='L69'><i><font color='green'>/* we take double rounding as evidence of x87 usage */</font></i>
<a name='L70'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L71'><font color='darkred'>#ifndef</font> Py_FORCE_DOUBLE
<a name='L72'><font color='darkred'>#  ifdef</font> X87_DOUBLE_ROUNDING
<a name='L73'><a href='../D/2716.html' title='Multiple defined in 45 places.'>PyAPI_FUNC</a>(<b>double</b>) _Py_force_double(<b>double</b>);
<a name='L74'><font color='darkred'>#    define</font> Py_FORCE_DOUBLE(X) (_Py_force_double(X))
<a name='L75'><font color='darkred'>#  else</font>
<a name='L76'><font color='darkred'>#    define</font> Py_FORCE_DOUBLE(X) (X)
<a name='L77'><font color='darkred'>#  endif</font>
<a name='L78'><font color='darkred'>#endif</font>
<a name='L79'><font color='darkred'>#endif</font>
<a name='L80'>
<a name='L81'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L82'><font color='darkred'>#ifdef</font> <a href='../D/1493.html' title='Multiple defined in 2 places.'>HAVE_GCC_ASM_FOR_X87</a>
<a name='L83'>PyAPI_FUNC(<b>unsigned</b> <b>short</b>) _Py_get_387controlword(<b>void</b>);
<a name='L84'>PyAPI_FUNC(<b>void</b>) _Py_set_387controlword(<b>unsigned</b> <b>short</b>);
<a name='L85'><font color='darkred'>#endif</font>
<a name='L86'><font color='darkred'>#endif</font>
<a name='L87'>
<a name='L88'><i><font color='green'>/* Py_IS_NAN(X)</font></i>
<a name='L89'><i><font color='green'> * Return 1 if float or double arg is a NaN, else 0.</font></i>
<a name='L90'><i><font color='green'> * Caution:</font></i>
<a name='L91'><i><font color='green'> *     X is evaluated more than once.</font></i>
<a name='L92'><i><font color='green'> *     This may not work on all platforms.  Each platform has *some*</font></i>
<a name='L93'><i><font color='green'> *     way to spell this, though -- override in pyconfig.h if you have</font></i>
<a name='L94'><i><font color='green'> *     a platform where it doesn't work.</font></i>
<a name='L95'><i><font color='green'> * Note: PC/pyconfig.h defines Py_IS_NAN as _isnan</font></i>
<a name='L96'><i><font color='green'> */</font></i>
<a name='L97'><font color='darkred'>#ifndef</font> <a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>
<a name='L98'><font color='darkred'>#if</font> <b>defined</b> <a href='../S/2906.html#L440' title='Defined at 440 in PC/pyconfig.h.'>HAVE_DECL_ISNAN</a> &amp;&amp; <a href='../S/2906.html#L440' title='Defined at 440 in PC/pyconfig.h.'>HAVE_DECL_ISNAN</a> == 1
<a name='L99'><font color='darkred'>#define</font> Py_IS_NAN(X) isnan(X)
<a name='L100'><font color='darkred'>#else</font>
<a name='L101'><font color='darkred'>#define</font> Py_IS_NAN(X) ((X) != (X))
<a name='L102'><font color='darkred'>#endif</font>
<a name='L103'><font color='darkred'>#endif</font>
<a name='L104'>
<a name='L105'><i><font color='green'>/* Py_IS_INFINITY(X)</font></i>
<a name='L106'><i><font color='green'> * Return 1 if float or double arg is an infinity, else 0.</font></i>
<a name='L107'><i><font color='green'> * Caution:</font></i>
<a name='L108'><i><font color='green'> *    X is evaluated more than once.</font></i>
<a name='L109'><i><font color='green'> *    This implementation may set the underflow flag if |X| is very small;</font></i>
<a name='L110'><i><font color='green'> *    it really can't be implemented correctly (&amp; easily) before C99.</font></i>
<a name='L111'><i><font color='green'> *    Override in pyconfig.h if you have a better spelling on your platform.</font></i>
<a name='L112'><i><font color='green'> *  Py_FORCE_DOUBLE is used to avoid getting false negatives from a</font></i>
<a name='L113'><i><font color='green'> *    non-infinite value v sitting in an 80-bit x87 register such that</font></i>
<a name='L114'><i><font color='green'> *    v becomes infinite when spilled from the register to 64-bit memory.</font></i>
<a name='L115'><i><font color='green'> * Note: PC/pyconfig.h defines Py_IS_INFINITY as _isinf</font></i>
<a name='L116'><i><font color='green'> */</font></i>
<a name='L117'><font color='darkred'>#ifndef</font> <a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>
<a name='L118'><font color='darkred'>#  if</font> <b>defined</b> <a href='../S/2906.html#L437' title='Defined at 437 in PC/pyconfig.h.'>HAVE_DECL_ISINF</a> &amp;&amp; <a href='../S/2906.html#L437' title='Defined at 437 in PC/pyconfig.h.'>HAVE_DECL_ISINF</a> == 1
<a name='L119'><font color='darkred'>#    define</font> <a href='../R/3727.html' title='Multiple refered from 56 places.'>Py_IS_INFINITY</a>(X) isinf(X)
<a name='L120'><font color='darkred'>#  else</font>
<a name='L121'><font color='darkred'>#    define</font> <a href='../R/3727.html' title='Multiple refered from 56 places.'>Py_IS_INFINITY</a>(X) ((X) &amp;&amp;                                   \
<a name='L122'>                               (Py_FORCE_DOUBLE(X)*0.5 == Py_FORCE_DOUBLE(X)))
<a name='L123'><font color='darkred'>#  endif</font>
<a name='L124'><font color='darkred'>#endif</font>
<a name='L125'>
<a name='L126'><i><font color='green'>/* Py_IS_FINITE(X)</font></i>
<a name='L127'><i><font color='green'> * Return 1 if float or double arg is neither infinite nor NAN, else 0.</font></i>
<a name='L128'><i><font color='green'> * Some compilers (e.g. VisualStudio) have intrisics for this, so a special</font></i>
<a name='L129'><i><font color='green'> * macro for this particular test is useful</font></i>
<a name='L130'><i><font color='green'> * Note: PC/pyconfig.h defines Py_IS_FINITE as _finite</font></i>
<a name='L131'><i><font color='green'> */</font></i>
<a name='L132'><font color='darkred'>#ifndef</font> <a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>
<a name='L133'><font color='darkred'>#if</font> <b>defined</b> HAVE_DECL_ISFINITE &amp;&amp; HAVE_DECL_ISFINITE == 1
<a name='L134'><font color='darkred'>#define</font> <a href='../R/3726.html' title='Multiple refered from 48 places.'>Py_IS_FINITE</a>(X) isfinite(X)
<a name='L135'><font color='darkred'>#elif</font> <b>defined</b> HAVE_FINITE
<a name='L136'><font color='darkred'>#define</font> <a href='../R/3726.html' title='Multiple refered from 48 places.'>Py_IS_FINITE</a>(X) finite(X)
<a name='L137'><font color='darkred'>#else</font>
<a name='L138'><font color='darkred'>#define</font> <a href='../R/3726.html' title='Multiple refered from 48 places.'>Py_IS_FINITE</a>(X) (!<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(X) &amp;&amp; !<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(X))
<a name='L139'><font color='darkred'>#endif</font>
<a name='L140'><font color='darkred'>#endif</font>
<a name='L141'>
<a name='L142'><i><font color='green'>/* HUGE_VAL is supposed to expand to a positive double infinity.  Python</font></i>
<a name='L143'><i><font color='green'> * uses Py_HUGE_VAL instead because some platforms are broken in this</font></i>
<a name='L144'><i><font color='green'> * respect.  We used to embed code in pyport.h to try to worm around that,</font></i>
<a name='L145'><i><font color='green'> * but different platforms are broken in conflicting ways.  If you're on</font></i>
<a name='L146'><i><font color='green'> * a platform where HUGE_VAL is defined incorrectly, fiddle your Python</font></i>
<a name='L147'><i><font color='green'> * config to #define Py_HUGE_VAL to something that works on your platform.</font></i>
<a name='L148'><i><font color='green'> */</font></i>
<a name='L149'><font color='darkred'>#ifndef</font> <a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a>
<a name='L150'><font color='darkred'>#define</font> <a href='../R/3715.html' title='Multiple refered from 18 places.'>Py_HUGE_VAL</a> HUGE_VAL
<a name='L151'><font color='darkred'>#endif</font>
<a name='L152'>
<a name='L153'><i><font color='green'>/* Py_NAN</font></i>
<a name='L154'><i><font color='green'> * A value that evaluates to a NaN. On IEEE 754 platforms INF*0 or</font></i>
<a name='L155'><i><font color='green'> * INF/INF works. Define Py_NO_NAN in pyconfig.h if your platform</font></i>
<a name='L156'><i><font color='green'> * doesn't support NaNs.</font></i>
<a name='L157'><i><font color='green'> */</font></i>
<a name='L158'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>) &amp;&amp; !<b>defined</b>(Py_NO_NAN)
<a name='L159'><font color='darkred'>#define</font> <a href='../R/3754.html' title='Multiple refered from 19 places.'>Py_NAN</a> (<a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a> * 0.)
<a name='L160'><font color='darkred'>#endif</font>
<a name='L161'>
<a name='L162'><i><font color='green'>/* Py_OVERFLOWED(X)</font></i>
<a name='L163'><i><font color='green'> * Return 1 iff a libm function overflowed.  Set errno to 0 before calling</font></i>
<a name='L164'><i><font color='green'> * a libm function, and invoke this macro after, passing the function</font></i>
<a name='L165'><i><font color='green'> * result.</font></i>
<a name='L166'><i><font color='green'> * Caution:</font></i>
<a name='L167'><i><font color='green'> *    This isn't reliable.  C99 no longer requires libm to set errno under</font></i>
<a name='L168'><i><font color='green'> *        any exceptional condition, but does require +- HUGE_VAL return</font></i>
<a name='L169'><i><font color='green'> *        values on overflow.  A 754 box *probably* maps HUGE_VAL to a</font></i>
<a name='L170'><i><font color='green'> *        double infinity, and we're cool if that's so, unless the input</font></i>
<a name='L171'><i><font color='green'> *        was an infinity and an infinity is the expected result.  A C89</font></i>
<a name='L172'><i><font color='green'> *        system sets errno to ERANGE, so we check for that too.  We're</font></i>
<a name='L173'><i><font color='green'> *        out of luck if a C99 754 box doesn't map HUGE_VAL to +Inf, or</font></i>
<a name='L174'><i><font color='green'> *        if the returned result is a NaN, or if a C89 box returns HUGE_VAL</font></i>
<a name='L175'><i><font color='green'> *        in non-overflow cases.</font></i>
<a name='L176'><i><font color='green'> *    X is evaluated more than once.</font></i>
<a name='L177'><i><font color='green'> * Some platforms have better way to spell this, so expect some #ifdef'ery.</font></i>
<a name='L178'><i><font color='green'> *</font></i>
<a name='L179'><i><font color='green'> * OpenBSD uses 'isinf()' because a compiler bug on that platform causes</font></i>
<a name='L180'><i><font color='green'> * the longer macro version to be mis-compiled. This isn't optimal, and</font></i>
<a name='L181'><i><font color='green'> * should be removed once a newer compiler is available on that platform.</font></i>
<a name='L182'><i><font color='green'> * The system that had the failure was running OpenBSD 3.2 on Intel, with</font></i>
<a name='L183'><i><font color='green'> * gcc 2.95.3.</font></i>
<a name='L184'><i><font color='green'> *</font></i>
<a name='L185'><i><font color='green'> * According to Tim's checkin, the FreeBSD systems use isinf() to work</font></i>
<a name='L186'><i><font color='green'> * around a FPE bug on that platform.</font></i>
<a name='L187'><i><font color='green'> */</font></i>
<a name='L188'><font color='darkred'>#if</font> <b>defined</b>(__FreeBSD__) || <b>defined</b>(__OpenBSD__)
<a name='L189'><font color='darkred'>#define</font> Py_OVERFLOWED(X) isinf(X)
<a name='L190'><font color='darkred'>#else</font>
<a name='L191'><font color='darkred'>#define</font> Py_OVERFLOWED(X) ((X) != 0.0 &amp;&amp; (errno == ERANGE ||    \
<a name='L192'>                                         (X) == <a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a> || \
<a name='L193'>                                         (X) == -<a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a>))
<a name='L194'><font color='darkred'>#endif</font>
<a name='L195'>
<a name='L196'><font color='darkred'>#endif</font> <i><font color='green'>/* Py_PYMATH_H */</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;][^][v]<a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
