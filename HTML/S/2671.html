<html>
<head>
<title>Modules/expat/xmltok_ns.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/<a href='../files/3389.html'>expat</a>/xmltok_ns.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L2'>[^]</a><a href='#L8'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L2' title='Defined at 2.'>NS</a>
<li><a href='#L8' title='Defined at 8.'>NS</a>
</ol>
<hr>
<pre>
<a name='L1'><b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> *
<a name='L2'><a href='../R/2119.html' title='Multiple refered from 13 places.'>NS</a>(XmlGetUtf8InternalEncoding)(<b>void</b>)
<a name='L3'><font color='red'>{</font>
<a name='L4'>  <b>return</b> &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(internal_utf8_encoding).enc;
<a name='L5'><font color='red'>}</font>
<a name='L6'>
<a name='L7'><b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> *
<a name='L8'><a href='../R/2119.html' title='Multiple refered from 13 places.'>NS</a>(XmlGetUtf16InternalEncoding)(<b>void</b>)
<a name='L9'><font color='red'>{</font>
<a name='L10'><font color='darkred'>#if</font> <a href='../D/367.html' title='Multiple defined in 11 places.'>BYTEORDER</a> == 1234
<a name='L11'>  <b>return</b> &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(internal_little2_encoding).enc;
<a name='L12'><font color='darkred'>#elif</font> <a href='../D/367.html' title='Multiple defined in 11 places.'>BYTEORDER</a> == 4321
<a name='L13'>  <b>return</b> &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(internal_big2_encoding).enc;
<a name='L14'><font color='darkred'>#else</font>
<a name='L15'>  <b>const</b> <b>short</b> n = 1;
<a name='L16'>  <b>return</b> (*(<b>const</b> <b>char</b> *)&amp;n
<a name='L17'>          ? &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(internal_little2_encoding).enc
<a name='L18'>          : &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(internal_big2_encoding).enc);
<a name='L19'><font color='darkred'>#endif</font>
<a name='L20'><font color='red'>}</font>
<a name='L21'>
<a name='L22'><b>static</b> <b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> * <b>const</b> <a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(encodings)[] = <font color='red'>{</font>
<a name='L23'>  &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(latin1_encoding).enc,
<a name='L24'>  &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(ascii_encoding).enc,
<a name='L25'>  &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(utf8_encoding).enc,
<a name='L26'>  &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(big2_encoding).enc,
<a name='L27'>  &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(big2_encoding).enc,
<a name='L28'>  &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(little2_encoding).enc,
<a name='L29'>  &amp;<a href='../D/10134.html' title='Multiple defined in 5 places.'>ns</a>(utf8_encoding).enc <i><font color='green'>/* NO_ENC */</font></i>
<a name='L30'><font color='red'>}</font>;
<a name='L31'>
<a name='L32'><b>static</b> <b>int</b> <a href='../S/2657.html#L52' title='Defined at 52 in Modules/expat/internal.h.'>PTRCALL</a>
<a name='L33'><a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(initScanProlog)(<b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> *enc, <b>const</b> <b>char</b> *ptr, <b>const</b> <b>char</b> *end,
<a name='L34'>                   <b>const</b> <b>char</b> **nextTokPtr)
<a name='L35'><font color='red'>{</font>
<a name='L36'>  <b>return</b> <a href='../S/2667.html#L1489' title='Defined at 1489 in Modules/expat/xmltok.c.'>initScan</a>(<a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(encodings), (<b>const</b> <a href='../S/2668.html#L264' title='Defined at 264 in Modules/expat/xmltok.h.'>INIT_ENCODING</a> *)enc,
<a name='L37'>                  <a href='../S/2668.html#L96' title='Defined at 96 in Modules/expat/xmltok.h.'>XML_PROLOG_STATE</a>, ptr, end, nextTokPtr);
<a name='L38'><font color='red'>}</font>
<a name='L39'>
<a name='L40'><b>static</b> <b>int</b> <a href='../S/2657.html#L52' title='Defined at 52 in Modules/expat/internal.h.'>PTRCALL</a>
<a name='L41'><a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(initScanContent)(<b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> *enc, <b>const</b> <b>char</b> *ptr, <b>const</b> <b>char</b> *end,
<a name='L42'>                    <b>const</b> <b>char</b> **nextTokPtr)
<a name='L43'><font color='red'>{</font>
<a name='L44'>  <b>return</b> <a href='../S/2667.html#L1489' title='Defined at 1489 in Modules/expat/xmltok.c.'>initScan</a>(<a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(encodings), (<b>const</b> <a href='../S/2668.html#L264' title='Defined at 264 in Modules/expat/xmltok.h.'>INIT_ENCODING</a> *)enc,
<a name='L45'>                  <a href='../S/2668.html#L97' title='Defined at 97 in Modules/expat/xmltok.h.'>XML_CONTENT_STATE</a>, ptr, end, nextTokPtr);
<a name='L46'><font color='red'>}</font>
<a name='L47'>
<a name='L48'><b>int</b>
<a name='L49'><a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(XmlInitEncoding)(<a href='../S/2668.html#L264' title='Defined at 264 in Modules/expat/xmltok.h.'>INIT_ENCODING</a> *p, <b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> **encPtr,
<a name='L50'>                    <b>const</b> <b>char</b> *name)
<a name='L51'><font color='red'>{</font>
<a name='L52'>  <b>int</b> i = <a href='../S/2667.html#L1454' title='Defined at 1454 in Modules/expat/xmltok.c.'>getEncodingIndex</a>(name);
<a name='L53'>  <b>if</b> (i == <a href='../S/2667.html#L1419' title='Defined at 1419 in Modules/expat/xmltok.c.'>UNKNOWN_ENC</a>)
<a name='L54'>    <b>return</b> 0;
<a name='L55'>  <a href='../S/2667.html#L1478' title='Defined at 1478 in Modules/expat/xmltok.c.'>SET_INIT_ENC_INDEX</a>(p, i);
<a name='L56'>  p-&gt;initEnc.scanners[<a href='../S/2668.html#L96' title='Defined at 96 in Modules/expat/xmltok.h.'>XML_PROLOG_STATE</a>] = <a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(initScanProlog);
<a name='L57'>  p-&gt;initEnc.scanners[<a href='../S/2668.html#L97' title='Defined at 97 in Modules/expat/xmltok.h.'>XML_CONTENT_STATE</a>] = <a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(initScanContent);
<a name='L58'>  p-&gt;initEnc.updatePosition = <a href='../S/2667.html#L933' title='Defined at 933 in Modules/expat/xmltok.c.'>initUpdatePosition</a>;
<a name='L59'>  p-&gt;encPtr = encPtr;
<a name='L60'>  *encPtr = &amp;(p-&gt;initEnc);
<a name='L61'>  <b>return</b> 1;
<a name='L62'><font color='red'>}</font>
<a name='L63'>
<a name='L64'><b>static</b> <b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> *
<a name='L65'><a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(findEncoding)(<b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> *enc, <b>const</b> <b>char</b> *ptr, <b>const</b> <b>char</b> *end)
<a name='L66'><font color='red'>{</font>
<a name='L67'><font color='darkred'>#define</font> <a href='../R/851.html' title='Multiple refered from 2 places.'>ENCODING_MAX</a> 128
<a name='L68'>  <b>char</b> buf[<a href='../S/2671.html#L67' title='Defined at 67 in Modules/expat/xmltok_ns.c.'>ENCODING_MAX</a>];
<a name='L69'>  <b>char</b> *p = buf;
<a name='L70'>  <b>int</b> i;
<a name='L71'>  <a href='../S/2668.html#L255' title='Defined at 255 in Modules/expat/xmltok.h.'>XmlUtf8Convert</a>(enc, &amp;ptr, end, &amp;p, p + <a href='../S/2671.html#L67' title='Defined at 67 in Modules/expat/xmltok_ns.c.'>ENCODING_MAX</a> - 1);
<a name='L72'>  <b>if</b> (ptr != end)
<a name='L73'>    <b>return</b> 0;
<a name='L74'>  *p = 0;
<a name='L75'>  <b>if</b> (<a href='../S/2667.html#L915' title='Defined at 915 in Modules/expat/xmltok.c.'>streqci</a>(buf, KW_UTF_16) &amp;&amp; enc-&gt;minBytesPerChar == 2)
<a name='L76'>    <b>return</b> enc;
<a name='L77'>  i = <a href='../S/2667.html#L1454' title='Defined at 1454 in Modules/expat/xmltok.c.'>getEncodingIndex</a>(buf);
<a name='L78'>  <b>if</b> (i == <a href='../S/2667.html#L1419' title='Defined at 1419 in Modules/expat/xmltok.c.'>UNKNOWN_ENC</a>)
<a name='L79'>    <b>return</b> 0;
<a name='L80'>  <b>return</b> <a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(encodings)[i];
<a name='L81'><font color='red'>}</font>
<a name='L82'>
<a name='L83'><b>int</b>
<a name='L84'><a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(XmlParseXmlDecl)(<b>int</b> isGeneralTextEntity,
<a name='L85'>                    <b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> *enc,
<a name='L86'>                    <b>const</b> <b>char</b> *ptr,
<a name='L87'>                    <b>const</b> <b>char</b> *end,
<a name='L88'>                    <b>const</b> <b>char</b> **badPtr,
<a name='L89'>                    <b>const</b> <b>char</b> **versionPtr,
<a name='L90'>                    <b>const</b> <b>char</b> **versionEndPtr,
<a name='L91'>                    <b>const</b> <b>char</b> **encodingName,
<a name='L92'>                    <b>const</b> <a href='../S/2668.html#L126' title='Defined at 126 in Modules/expat/xmltok.h.'>ENCODING</a> **<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>,
<a name='L93'>                    <b>int</b> *standalone)
<a name='L94'><font color='red'>{</font>
<a name='L95'>  <b>return</b> <a href='../S/2667.html#L1074' title='Defined at 1074 in Modules/expat/xmltok.c.'>doParseXmlDecl</a>(<a href='../D/2337.html' title='Multiple defined in 6 places.'>NS</a>(findEncoding),
<a name='L96'>                        isGeneralTextEntity,
<a name='L97'>                        enc,
<a name='L98'>                        ptr,
<a name='L99'>                        end,
<a name='L100'>                        badPtr,
<a name='L101'>                        versionPtr,
<a name='L102'>                        versionEndPtr,
<a name='L103'>                        encodingName,
<a name='L104'>                        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>,
<a name='L105'>                        standalone);
<a name='L106'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L2'>[^]</a><a href='#L8'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
