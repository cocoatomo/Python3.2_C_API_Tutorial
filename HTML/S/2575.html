<html>
<head>
<title>Modules/_io/textio.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/<a href='../files/3385.html'>_io</a>/textio.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L25'>[^]</a><a href='#L2555'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L25' title='Defined at 25.'>_unsupported</a>
<li><a href='#L39' title='Defined at 39.'>textiobase_detach</a>
<li><a href='#L52' title='Defined at 52.'>textiobase_read</a>
<li><a href='#L64' title='Defined at 64.'>textiobase_readline</a>
<li><a href='#L76' title='Defined at 76.'>textiobase_write</a>
<li><a href='#L88' title='Defined at 88.'>textiobase_encoding_get</a>
<li><a href='#L102' title='Defined at 102.'>textiobase_newlines_get</a>
<li><a href='#L114' title='Defined at 114.'>textiobase_errors_get</a>
<li><a href='#L199' title='Defined at 199.'>incrementalnewlinedecoder_init</a>
<li><a href='#L232' title='Defined at 232.'>incrementalnewlinedecoder_dealloc</a>
<li><a href='#L245' title='Defined at 245.'>_PyIncrementalNewlineDecoder_decode</a>
<li><a href='#L463' title='Defined at 463.'>incrementalnewlinedecoder_decode</a>
<li><a href='#L477' title='Defined at 477.'>incrementalnewlinedecoder_getstate</a>
<li><a href='#L505' title='Defined at 505.'>incrementalnewlinedecoder_setstate</a>
<li><a href='#L524' title='Defined at 524.'>incrementalnewlinedecoder_reset</a>
<li><a href='#L535' title='Defined at 535.'>incrementalnewlinedecoder_newlines_get</a>
<li><a href='#L700' title='Defined at 700.'>ascii_encode</a>
<li><a href='#L708' title='Defined at 708.'>utf16be_encode</a>
<li><a href='#L716' title='Defined at 716.'>utf16le_encode</a>
<li><a href='#L724' title='Defined at 724.'>utf16_encode</a>
<li><a href='#L740' title='Defined at 740.'>utf32be_encode</a>
<li><a href='#L748' title='Defined at 748.'>utf32le_encode</a>
<li><a href='#L756' title='Defined at 756.'>utf32_encode</a>
<li><a href='#L772' title='Defined at 772.'>utf8_encode</a>
<li><a href='#L780' title='Defined at 780.'>latin1_encode</a>
<li><a href='#L809' title='Defined at 809.'>textiowrapper_init</a>
<li><a href='#L1077' title='Defined at 1077.'>_textiowrapper_clear</a>
<li><a href='#L1096' title='Defined at 1096.'>textiowrapper_dealloc</a>
<li><a href='#L1109' title='Defined at 1109.'>textiowrapper_traverse</a>
<li><a href='#L1127' title='Defined at 1127.'>textiowrapper_clear</a>
<li><a href='#L1191' title='Defined at 1191.'>textiowrapper_detach</a>
<li><a href='#L1206' title='Defined at 1206.'>Py_LOCAL_INLINE</a>
<li><a href='#L1221' title='Defined at 1221.'>_textiowrapper_writeflush</a>
<li><a href='#L1247' title='Defined at 1247.'>textiowrapper_write</a>
<li><a href='#L1344' title='Defined at 1344.'>textiowrapper_set_decoded_chars</a>
<li><a href='#L1352' title='Defined at 1352.'>textiowrapper_get_decoded_chars</a>
<li><a href='#L1387' title='Defined at 1387.'>textiowrapper_read_chunk</a>
<li><a href='#L1480' title='Defined at 1480.'>textiowrapper_read</a>
<li><a href='#L1575' title='Defined at 1575.'>find_control_char</a>
<li><a href='#L1590' title='Defined at 1590.'>_PyIO_find_line_ending</a>
<li><a href='#L1673' title='Defined at 1673.'>_textiowrapper_readline</a>
<li><a href='#L1827' title='Defined at 1827.'>textiowrapper_readline</a>
<li><a href='#L1887' title='Defined at 1887.'>textiowrapper_parse_cookie</a>
<li><a href='#L1911' title='Defined at 1911.'>textiowrapper_build_cookie</a>
<li><a href='#L1926' title='Defined at 1926.'>_textiowrapper_decoder_setstate</a>
<li><a href='#L1947' title='Defined at 1947.'>_textiowrapper_encoder_setstate</a>
<li><a href='#L1967' title='Defined at 1967.'>textiowrapper_seek</a>
<li><a href='#L2135' title='Defined at 2135.'>textiowrapper_tell</a>
<li><a href='#L2305' title='Defined at 2305.'>textiowrapper_truncate</a>
<li><a href='#L2324' title='Defined at 2324.'>textiowrapper_repr</a>
<li><a href='#L2378' title='Defined at 2378.'>textiowrapper_fileno</a>
<li><a href='#L2385' title='Defined at 2385.'>textiowrapper_seekable</a>
<li><a href='#L2392' title='Defined at 2392.'>textiowrapper_readable</a>
<li><a href='#L2399' title='Defined at 2399.'>textiowrapper_writable</a>
<li><a href='#L2406' title='Defined at 2406.'>textiowrapper_isatty</a>
<li><a href='#L2413' title='Defined at 2413.'>textiowrapper_getstate</a>
<li><a href='#L2421' title='Defined at 2421.'>textiowrapper_flush</a>
<li><a href='#L2432' title='Defined at 2432.'>textiowrapper_close</a>
<li><a href='#L2469' title='Defined at 2469.'>textiowrapper_iternext</a>
<li><a href='#L2507' title='Defined at 2507.'>textiowrapper_name_get</a>
<li><a href='#L2514' title='Defined at 2514.'>textiowrapper_closed_get</a>
<li><a href='#L2521' title='Defined at 2521.'>textiowrapper_newlines_get</a>
<li><a href='#L2541' title='Defined at 2541.'>textiowrapper_errors_get</a>
<li><a href='#L2548' title='Defined at 2548.'>textiowrapper_chunk_size_get</a>
<li><a href='#L2555' title='Defined at 2555.'>textiowrapper_chunk_size_set</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*</font></i>
<a name='L2'><i><font color='green'>    An implementation of Text I/O as defined by PEP 3116 - "New I/O"</font></i>
<a name='L3'><i><font color='green'></font></i>
<a name='L4'><i><font color='green'>    Classes defined here: TextIOBase, IncrementalNewlineDecoder, TextIOWrapper.</font></i>
<a name='L5'><i><font color='green'></font></i>
<a name='L6'><i><font color='green'>    Written by Amaury Forgeot d'Arc and Antoine Pitrou</font></i>
<a name='L7'><i><font color='green'>*/</font></i>
<a name='L8'>
<a name='L9'><font color='darkred'>#define</font> <a href='../R/2388.html' title='Multiple refered from 2 places.'>PY_SSIZE_T_CLEAN</a>
<a name='L10'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L11'><font color='darkred'>#include</font> "<a href='577.html'>structmember.h</a>"
<a name='L12'><font color='darkred'>#include</font> "<a href='2569.html'>_iomodule.h</a>"
<a name='L13'>
<a name='L14'><i><font color='green'>/* TextIOBase */</font></i>
<a name='L15'>
<a name='L16'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiobase_doc,
<a name='L17'>    "Base class for text I/O.\n"
<a name='L18'>    "\n"
<a name='L19'>    "This class provides a character and line based interface to stream\n"
<a name='L20'>    "I/O. There is no readinto method because Python's character strings\n"
<a name='L21'>    "are immutable. There is no public constructor.\n"
<a name='L22'>    );
<a name='L23'>
<a name='L24'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L25'><a href='../R/5881.html' title='Multiple refered from 11 places.'>_unsupported</a>(<b>const</b> <b>char</b> *message)
<a name='L26'><font color='red'>{</font>
<a name='L27'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(<a href='../S/2569.html#L143' title='Defined at 143 in Modules/_io/_iomodule.h.'>IO_STATE</a>-&gt;unsupported_operation, message);
<a name='L28'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L29'><font color='red'>}</font>
<a name='L30'>
<a name='L31'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiobase_detach_doc,
<a name='L32'>    "Separate the underlying buffer from the TextIOBase and return it.\n"
<a name='L33'>    "\n"
<a name='L34'>    "After the underlying buffer has been detached, the TextIO is in an\n"
<a name='L35'>    "unusable state.\n"
<a name='L36'>    );
<a name='L37'>
<a name='L38'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L39'><a href='../S/2575.html#L121' title='Refered from 121 in Modules/_io/textio.c.'>textiobase_detach</a>(PyObject *self)
<a name='L40'><font color='red'>{</font>
<a name='L41'>    <b>return</b> <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("detach");
<a name='L42'><font color='red'>}</font>
<a name='L43'>
<a name='L44'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiobase_read_doc,
<a name='L45'>    "Read at most n characters from stream.\n"
<a name='L46'>    "\n"
<a name='L47'>    "Read from underlying buffer until we have n characters or we hit EOF.\n"
<a name='L48'>    "If n is negative or omitted, read until EOF.\n"
<a name='L49'>    );
<a name='L50'>
<a name='L51'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L52'><a href='../S/2575.html#L122' title='Refered from 122 in Modules/_io/textio.c.'>textiobase_read</a>(PyObject *self, PyObject *args)
<a name='L53'><font color='red'>{</font>
<a name='L54'>    <b>return</b> <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("read");
<a name='L55'><font color='red'>}</font>
<a name='L56'>
<a name='L57'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiobase_readline_doc,
<a name='L58'>    "Read until newline or EOF.\n"
<a name='L59'>    "\n"
<a name='L60'>    "Returns an empty string if EOF is hit immediately.\n"
<a name='L61'>    );
<a name='L62'>
<a name='L63'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L64'><a href='../S/2575.html#L123' title='Refered from 123 in Modules/_io/textio.c.'>textiobase_readline</a>(PyObject *self, PyObject *args)
<a name='L65'><font color='red'>{</font>
<a name='L66'>    <b>return</b> <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("readline");
<a name='L67'><font color='red'>}</font>
<a name='L68'>
<a name='L69'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiobase_write_doc,
<a name='L70'>    "Write string to stream.\n"
<a name='L71'>    "Returns the number of characters written (which is always equal to\n"
<a name='L72'>    "the length of the string).\n"
<a name='L73'>    );
<a name='L74'>
<a name='L75'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L76'><a href='../S/2575.html#L124' title='Refered from 124 in Modules/_io/textio.c.'>textiobase_write</a>(PyObject *self, PyObject *args)
<a name='L77'><font color='red'>{</font>
<a name='L78'>    <b>return</b> <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("write");
<a name='L79'><font color='red'>}</font>
<a name='L80'>
<a name='L81'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiobase_encoding_doc,
<a name='L82'>    "Encoding of the text stream.\n"
<a name='L83'>    "\n"
<a name='L84'>    "Subclasses should override.\n"
<a name='L85'>    );
<a name='L86'>
<a name='L87'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L88'><a href='../S/2575.html#L129' title='Refered from 129 in Modules/_io/textio.c.'>textiobase_encoding_get</a>(PyObject *self, <b>void</b> *context)
<a name='L89'><font color='red'>{</font>
<a name='L90'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L91'><font color='red'>}</font>
<a name='L92'>
<a name='L93'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiobase_newlines_doc,
<a name='L94'>    "Line endings translated so far.\n"
<a name='L95'>    "\n"
<a name='L96'>    "Only line endings translated during reading are considered.\n"
<a name='L97'>    "\n"
<a name='L98'>    "Subclasses should override.\n"
<a name='L99'>    );
<a name='L100'>
<a name='L101'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L102'><a href='../S/2575.html#L130' title='Refered from 130 in Modules/_io/textio.c.'>textiobase_newlines_get</a>(PyObject *self, <b>void</b> *context)
<a name='L103'><font color='red'>{</font>
<a name='L104'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L105'><font color='red'>}</font>
<a name='L106'>
<a name='L107'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiobase_errors_doc,
<a name='L108'>    "The error setting of the decoder or encoder.\n"
<a name='L109'>    "\n"
<a name='L110'>    "Subclasses should override.\n"
<a name='L111'>    );
<a name='L112'>
<a name='L113'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L114'><a href='../S/2575.html#L131' title='Refered from 131 in Modules/_io/textio.c.'>textiobase_errors_get</a>(PyObject *self, <b>void</b> *context)
<a name='L115'><font color='red'>{</font>
<a name='L116'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L117'><font color='red'>}</font>
<a name='L118'>
<a name='L119'>
<a name='L120'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> textiobase_methods[] = <font color='red'>{</font>
<a name='L121'>    <font color='red'>{</font>"detach", (PyCFunction)<a href='../S/2575.html#L39' title='Defined at 39 in Modules/_io/textio.c.'>textiobase_detach</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, textiobase_detach_doc<font color='red'>}</font>,
<a name='L122'>    <font color='red'>{</font>"read", <a href='../S/2575.html#L52' title='Defined at 52 in Modules/_io/textio.c.'>textiobase_read</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, textiobase_read_doc<font color='red'>}</font>,
<a name='L123'>    <font color='red'>{</font>"readline", <a href='../S/2575.html#L64' title='Defined at 64 in Modules/_io/textio.c.'>textiobase_readline</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, textiobase_readline_doc<font color='red'>}</font>,
<a name='L124'>    <font color='red'>{</font>"write", <a href='../S/2575.html#L76' title='Defined at 76 in Modules/_io/textio.c.'>textiobase_write</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, textiobase_write_doc<font color='red'>}</font>,
<a name='L125'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L126'><font color='red'>}</font>;
<a name='L127'>
<a name='L128'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> textiobase_getset[] = <font color='red'>{</font>
<a name='L129'>    <font color='red'>{</font>"encoding", (getter)<a href='../S/2575.html#L88' title='Defined at 88 in Modules/_io/textio.c.'>textiobase_encoding_get</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, textiobase_encoding_doc<font color='red'>}</font>,
<a name='L130'>    <font color='red'>{</font>"newlines", (getter)<a href='../S/2575.html#L102' title='Defined at 102 in Modules/_io/textio.c.'>textiobase_newlines_get</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, textiobase_newlines_doc<font color='red'>}</font>,
<a name='L131'>    <font color='red'>{</font>"errors", (getter)<a href='../S/2575.html#L114' title='Defined at 114 in Modules/_io/textio.c.'>textiobase_errors_get</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, textiobase_errors_doc<font color='red'>}</font>,
<a name='L132'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L133'><font color='red'>}</font>;
<a name='L134'>
<a name='L135'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyTextIOBase_Type = <font color='red'>{</font>
<a name='L136'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L137'>    "_io._TextIOBase",          <i><font color='green'>/*tp_name*/</font></i>
<a name='L138'>    0,                          <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L139'>    0,                          <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L140'>    0,                          <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L141'>    0,                          <i><font color='green'>/*tp_print*/</font></i>
<a name='L142'>    0,                          <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L143'>    0,                          <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L144'>    0,                          <i><font color='green'>/*tp_compare */</font></i>
<a name='L145'>    0,                          <i><font color='green'>/*tp_repr*/</font></i>
<a name='L146'>    0,                          <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L147'>    0,                          <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L148'>    0,                          <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L149'>    0,                          <i><font color='green'>/*tp_hash */</font></i>
<a name='L150'>    0,                          <i><font color='green'>/*tp_call*/</font></i>
<a name='L151'>    0,                          <i><font color='green'>/*tp_str*/</font></i>
<a name='L152'>    0,                          <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L153'>    0,                          <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L154'>    0,                          <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L155'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE,  <i><font color='green'>/*tp_flags*/</font></i>
<a name='L156'>    textiobase_doc,             <i><font color='green'>/* tp_doc */</font></i>
<a name='L157'>    0,                          <i><font color='green'>/* tp_traverse */</font></i>
<a name='L158'>    0,                          <i><font color='green'>/* tp_clear */</font></i>
<a name='L159'>    0,                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L160'>    0,                          <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L161'>    0,                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L162'>    0,                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L163'>    textiobase_methods,         <i><font color='green'>/* tp_methods */</font></i>
<a name='L164'>    0,                          <i><font color='green'>/* tp_members */</font></i>
<a name='L165'>    textiobase_getset,          <i><font color='green'>/* tp_getset */</font></i>
<a name='L166'>    &amp;PyIOBase_Type,             <i><font color='green'>/* tp_base */</font></i>
<a name='L167'>    0,                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L168'>    0,                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L169'>    0,                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L170'>    0,                          <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L171'>    0,                          <i><font color='green'>/* tp_init */</font></i>
<a name='L172'>    0,                          <i><font color='green'>/* tp_alloc */</font></i>
<a name='L173'>    0,                          <i><font color='green'>/* tp_new */</font></i>
<a name='L174'><font color='red'>}</font>;
<a name='L175'>
<a name='L176'>
<a name='L177'><i><font color='green'>/* IncrementalNewlineDecoder */</font></i>
<a name='L178'>
<a name='L179'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(incrementalnewlinedecoder_doc,
<a name='L180'>    "Codec used when reading a file in universal newlines mode.  It wraps\n"
<a name='L181'>    "another incremental decoder, translating \\r\\n and \\r into \\n.  It also\n"
<a name='L182'>    "records the types of newlines encountered.  When used with\n"
<a name='L183'>    "translate=False, it ensures that the newline sequence is returned in\n"
<a name='L184'>    "one piece. When used with decoder=None, it expects unicode strings as\n"
<a name='L185'>    "decode input and translates newlines without first invoking an external\n"
<a name='L186'>    "decoder.\n"
<a name='L187'>    );
<a name='L188'>
<a name='L189'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L190'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L191'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoder;
<a name='L192'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errors;
<a name='L193'>    <b>signed</b> <b>int</b> pendingcr: 1;
<a name='L194'>    <b>signed</b> <b>int</b> translate: 1;
<a name='L195'>    <b>unsigned</b> <b>int</b> seennl: 3;
<a name='L196'><font color='red'>}</font> <a href='../R/9255.html' title='Multiple refered from 2 places.'>nldecoder_object</a>;
<a name='L197'>
<a name='L198'><b>static</b> <b>int</b>
<a name='L199'><a href='../S/2575.html#L608' title='Refered from 608 in Modules/_io/textio.c.'>incrementalnewlinedecoder_init</a>(nldecoder_object *self,
<a name='L200'>                               PyObject *args, PyObject *kwds)
<a name='L201'><font color='red'>{</font>
<a name='L202'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoder;
<a name='L203'>    <b>int</b> translate;
<a name='L204'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L205'>    <b>char</b> *kwlist[] = <font color='red'>{</font>"decoder", "translate", "errors", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L206'>
<a name='L207'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "Oi|O:IncrementalNewlineDecoder",
<a name='L208'>                                     kwlist, &amp;decoder, &amp;translate, &amp;errors))
<a name='L209'>        <b>return</b> -1;
<a name='L210'>
<a name='L211'>    self-&gt;decoder = decoder;
<a name='L212'>    Py_INCREF(decoder);
<a name='L213'>
<a name='L214'>    <b>if</b> (errors == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L215'>        self-&gt;errors = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("strict");
<a name='L216'>        <b>if</b> (self-&gt;errors == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L217'>            <b>return</b> -1;
<a name='L218'>    <font color='red'>}</font>
<a name='L219'>    <b>else</b> <font color='red'>{</font>
<a name='L220'>        Py_INCREF(errors);
<a name='L221'>        self-&gt;errors = errors;
<a name='L222'>    <font color='red'>}</font>
<a name='L223'>
<a name='L224'>    self-&gt;translate = translate;
<a name='L225'>    self-&gt;seennl = 0;
<a name='L226'>    self-&gt;pendingcr = 0;
<a name='L227'>
<a name='L228'>    <b>return</b> 0;
<a name='L229'><font color='red'>}</font>
<a name='L230'>
<a name='L231'><b>static</b> <b>void</b>
<a name='L232'><a href='../S/2575.html#L577' title='Refered from 577 in Modules/_io/textio.c.'>incrementalnewlinedecoder_dealloc</a>(nldecoder_object *self)
<a name='L233'><font color='red'>{</font>
<a name='L234'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;decoder);
<a name='L235'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;errors);
<a name='L236'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_free((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self);
<a name='L237'><font color='red'>}</font>
<a name='L238'>
<a name='L239'><font color='darkred'>#define</font> <a href='../R/4037.html' title='Multiple refered from 7 places.'>SEEN_CR</a>   1
<a name='L240'><font color='darkred'>#define</font> <a href='../R/4039.html' title='Multiple refered from 9 places.'>SEEN_LF</a>   2
<a name='L241'><font color='darkred'>#define</font> <a href='../R/4038.html' title='Multiple refered from 7 places.'>SEEN_CRLF</a> 4
<a name='L242'><font color='darkred'>#define</font> <a href='../R/4036.html' title='Multiple refered from 2 places.'>SEEN_ALL</a> (<a href='../S/2575.html#L239' title='Defined at 239 in Modules/_io/textio.c.'>SEEN_CR</a> | <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a> | <a href='../S/2575.html#L241' title='Defined at 241 in Modules/_io/textio.c.'>SEEN_CRLF</a>)
<a name='L243'>
<a name='L244'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L245'><a href='../R/5433.html' title='Multiple refered from 4 places.'>_PyIncrementalNewlineDecoder_decode</a>(PyObject *_self,
<a name='L246'>                                    PyObject *input, <b>int</b> final)
<a name='L247'><font color='red'>{</font>
<a name='L248'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *output;
<a name='L249'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> output_len;
<a name='L250'>    <a href='../S/2575.html#L196' title='Defined at 196 in Modules/_io/textio.c.'>nldecoder_object</a> *self = (<a href='../S/2575.html#L196' title='Defined at 196 in Modules/_io/textio.c.'>nldecoder_object</a> *) _self;
<a name='L251'>
<a name='L252'>    <b>if</b> (self-&gt;decoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L253'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L254'>                        "IncrementalNewlineDecoder.__init__ not called");
<a name='L255'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L256'>    <font color='red'>}</font>
<a name='L257'>
<a name='L258'>    <i><font color='green'>/* decode input (with the eventual \r from a previous pass) */</font></i>
<a name='L259'>    <b>if</b> (self-&gt;decoder != Py_None) <font color='red'>{</font>
<a name='L260'>        output = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder,
<a name='L261'>            _PyIO_str_decode, input, final ? Py_True : Py_False, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L262'>    <font color='red'>}</font>
<a name='L263'>    <b>else</b> <font color='red'>{</font>
<a name='L264'>        output = input;
<a name='L265'>        Py_INCREF(output);
<a name='L266'>    <font color='red'>}</font>
<a name='L267'>
<a name='L268'>    <b>if</b> (output == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L269'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L270'>
<a name='L271'>    <b>if</b> (!PyUnicode_Check(output)) <font color='red'>{</font>
<a name='L272'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L273'>                        "decoder should return a string result");
<a name='L274'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L275'>    <font color='red'>}</font>
<a name='L276'>
<a name='L277'>    output_len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(output);
<a name='L278'>    <b>if</b> (self-&gt;pendingcr &amp;&amp; (final || output_len &gt; 0)) <font color='red'>{</font>
<a name='L279'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *out;
<a name='L280'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *modified = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, output_len + 1);
<a name='L281'>        <b>if</b> (modified == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L282'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L283'>        out = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(modified);
<a name='L284'>        out[0] = '\r';
<a name='L285'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(out + 1, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(output),
<a name='L286'>               output_len * <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>));
<a name='L287'>        Py_DECREF(output);
<a name='L288'>        output = modified;
<a name='L289'>        self-&gt;pendingcr = 0;
<a name='L290'>        output_len++;
<a name='L291'>    <font color='red'>}</font>
<a name='L292'>
<a name='L293'>    <i><font color='green'>/* retain last \r even when not translating data:</font></i>
<a name='L294'><i><font color='green'>     * then readline() is sure to get \r\n in one pass</font></i>
<a name='L295'><i><font color='green'>     */</font></i>
<a name='L296'>    <b>if</b> (!final) <font color='red'>{</font>
<a name='L297'>        <b>if</b> (output_len &gt; 0
<a name='L298'>            &amp;&amp; <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(output)[output_len - 1] == '\r') <font color='red'>{</font>
<a name='L299'>
<a name='L300'>            <b>if</b> (<a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(output) == 1) <font color='red'>{</font>
<a name='L301'>                <b>if</b> (<a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(&amp;output, output_len - 1) &lt; 0)
<a name='L302'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L303'>            <font color='red'>}</font>
<a name='L304'>            <b>else</b> <font color='red'>{</font>
<a name='L305'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *modified = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(
<a name='L306'>                    <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(output),
<a name='L307'>                    output_len - 1);
<a name='L308'>                <b>if</b> (modified == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L309'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L310'>                Py_DECREF(output);
<a name='L311'>                output = modified;
<a name='L312'>            <font color='red'>}</font>
<a name='L313'>            self-&gt;pendingcr = 1;
<a name='L314'>        <font color='red'>}</font>
<a name='L315'>    <font color='red'>}</font>
<a name='L316'>
<a name='L317'>    <i><font color='green'>/* Record which newlines are read and do newline translation if desired,</font></i>
<a name='L318'><i><font color='green'>       all in one pass. */</font></i>
<a name='L319'>    <font color='red'>{</font>
<a name='L320'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *in_str;
<a name='L321'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L322'>        <b>int</b> seennl = self-&gt;seennl;
<a name='L323'>        <b>int</b> only_lf = 0;
<a name='L324'>
<a name='L325'>        in_str = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(output);
<a name='L326'>        len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(output);
<a name='L327'>
<a name='L328'>        <b>if</b> (len == 0)
<a name='L329'>            <b>return</b> output;
<a name='L330'>
<a name='L331'>        <i><font color='green'>/* If, up to now, newlines are consistently \n, do a quick check</font></i>
<a name='L332'><i><font color='green'>           for the \r *byte* with the libc's optimized memchr.</font></i>
<a name='L333'><i><font color='green'>           */</font></i>
<a name='L334'>        <b>if</b> (seennl == <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a> || seennl == 0) <font color='red'>{</font>
<a name='L335'>            only_lf = (memchr(in_str, '\r', len * <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L336'>        <font color='red'>}</font>
<a name='L337'>
<a name='L338'>        <b>if</b> (only_lf) <font color='red'>{</font>
<a name='L339'>            <i><font color='green'>/* If not already seen, quick scan for a possible "\n" character.</font></i>
<a name='L340'><i><font color='green'>               (there's nothing else to be done, even when in translation mode)</font></i>
<a name='L341'><i><font color='green'>            */</font></i>
<a name='L342'>            <b>if</b> (seennl == 0 &amp;&amp;
<a name='L343'>                memchr(in_str, '\n', len * <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)) != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L344'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s, *end;
<a name='L345'>                s = in_str;
<a name='L346'>                end = in_str + len;
<a name='L347'>                <b>for</b> (;;) <font color='red'>{</font>
<a name='L348'>                    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> c;
<a name='L349'>                    <i><font color='green'>/* Fast loop for non-control characters */</font></i>
<a name='L350'>                    <b>while</b> (*s &gt; '\n')
<a name='L351'>                        s++;
<a name='L352'>                    c = *s++;
<a name='L353'>                    <b>if</b> (c == '\n') <font color='red'>{</font>
<a name='L354'>                        seennl |= <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a>;
<a name='L355'>                        <b>break</b>;
<a name='L356'>                    <font color='red'>}</font>
<a name='L357'>                    <b>if</b> (s &gt; end)
<a name='L358'>                        <b>break</b>;
<a name='L359'>                <font color='red'>}</font>
<a name='L360'>            <font color='red'>}</font>
<a name='L361'>            <i><font color='green'>/* Finished: we have scanned for newlines, and none of them</font></i>
<a name='L362'><i><font color='green'>               need translating */</font></i>
<a name='L363'>        <font color='red'>}</font>
<a name='L364'>        <b>else</b> <b>if</b> (!self-&gt;translate) <font color='red'>{</font>
<a name='L365'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s, *end;
<a name='L366'>            <i><font color='green'>/* We have already seen all newline types, no need to scan again */</font></i>
<a name='L367'>            <b>if</b> (seennl == <a href='../S/2575.html#L242' title='Defined at 242 in Modules/_io/textio.c.'>SEEN_ALL</a>)
<a name='L368'>                <b>goto</b> endscan;
<a name='L369'>            s = in_str;
<a name='L370'>            end = in_str + len;
<a name='L371'>            <b>for</b> (;;) <font color='red'>{</font>
<a name='L372'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> c;
<a name='L373'>                <i><font color='green'>/* Fast loop for non-control characters */</font></i>
<a name='L374'>                <b>while</b> (*s &gt; '\r')
<a name='L375'>                    s++;
<a name='L376'>                c = *s++;
<a name='L377'>                <b>if</b> (c == '\n')
<a name='L378'>                    seennl |= <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a>;
<a name='L379'>                <b>else</b> <b>if</b> (c == '\r') <font color='red'>{</font>
<a name='L380'>                    <b>if</b> (*s == '\n') <font color='red'>{</font>
<a name='L381'>                        seennl |= <a href='../S/2575.html#L241' title='Defined at 241 in Modules/_io/textio.c.'>SEEN_CRLF</a>;
<a name='L382'>                        s++;
<a name='L383'>                    <font color='red'>}</font>
<a name='L384'>                    <b>else</b>
<a name='L385'>                        seennl |= <a href='../S/2575.html#L239' title='Defined at 239 in Modules/_io/textio.c.'>SEEN_CR</a>;
<a name='L386'>                <font color='red'>}</font>
<a name='L387'>                <b>if</b> (s &gt; end)
<a name='L388'>                    <b>break</b>;
<a name='L389'>                <b>if</b> (seennl == <a href='../S/2575.html#L242' title='Defined at 242 in Modules/_io/textio.c.'>SEEN_ALL</a>)
<a name='L390'>                    <b>break</b>;
<a name='L391'>            <font color='red'>}</font>
<a name='L392'>        endscan:
<a name='L393'>            ;
<a name='L394'>        <font color='red'>}</font>
<a name='L395'>        <b>else</b> <font color='red'>{</font>
<a name='L396'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *translated = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L397'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *out_str;
<a name='L398'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *in, *out, *end;
<a name='L399'>            <b>if</b> (<a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(output) != 1) <font color='red'>{</font>
<a name='L400'>                <i><font color='green'>/* We could try to optimize this so that we only do a copy</font></i>
<a name='L401'><i><font color='green'>                   when there is something to translate. On the other hand,</font></i>
<a name='L402'><i><font color='green'>                   most decoders should only output non-shared strings, i.e.</font></i>
<a name='L403'><i><font color='green'>                   translation is done in place. */</font></i>
<a name='L404'>                translated = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, len);
<a name='L405'>                <b>if</b> (translated == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L406'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L407'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(translated) == 1);
<a name='L408'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(translated),
<a name='L409'>                       <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(output),
<a name='L410'>                       len * <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>));
<a name='L411'>            <font color='red'>}</font>
<a name='L412'>            <b>else</b> <font color='red'>{</font>
<a name='L413'>                translated = output;
<a name='L414'>            <font color='red'>}</font>
<a name='L415'>            out_str = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(translated);
<a name='L416'>            in = in_str;
<a name='L417'>            out = out_str;
<a name='L418'>            end = in_str + len;
<a name='L419'>            <b>for</b> (;;) <font color='red'>{</font>
<a name='L420'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> c;
<a name='L421'>                <i><font color='green'>/* Fast loop for non-control characters */</font></i>
<a name='L422'>                <b>while</b> ((c = *in++) &gt; '\r')
<a name='L423'>                    *out++ = c;
<a name='L424'>                <b>if</b> (c == '\n') <font color='red'>{</font>
<a name='L425'>                    *out++ = c;
<a name='L426'>                    seennl |= <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a>;
<a name='L427'>                    <b>continue</b>;
<a name='L428'>                <font color='red'>}</font>
<a name='L429'>                <b>if</b> (c == '\r') <font color='red'>{</font>
<a name='L430'>                    <b>if</b> (*in == '\n') <font color='red'>{</font>
<a name='L431'>                        in++;
<a name='L432'>                        seennl |= <a href='../S/2575.html#L241' title='Defined at 241 in Modules/_io/textio.c.'>SEEN_CRLF</a>;
<a name='L433'>                    <font color='red'>}</font>
<a name='L434'>                    <b>else</b>
<a name='L435'>                        seennl |= <a href='../S/2575.html#L239' title='Defined at 239 in Modules/_io/textio.c.'>SEEN_CR</a>;
<a name='L436'>                    *out++ = '\n';
<a name='L437'>                    <b>continue</b>;
<a name='L438'>                <font color='red'>}</font>
<a name='L439'>                <b>if</b> (in &gt; end)
<a name='L440'>                    <b>break</b>;
<a name='L441'>                *out++ = c;
<a name='L442'>            <font color='red'>}</font>
<a name='L443'>            <b>if</b> (translated != output) <font color='red'>{</font>
<a name='L444'>                Py_DECREF(output);
<a name='L445'>                output = translated;
<a name='L446'>            <font color='red'>}</font>
<a name='L447'>            <b>if</b> (out - out_str != len) <font color='red'>{</font>
<a name='L448'>                <b>if</b> (<a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(&amp;output, out - out_str) &lt; 0)
<a name='L449'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L450'>            <font color='red'>}</font>
<a name='L451'>        <font color='red'>}</font>
<a name='L452'>        self-&gt;seennl |= seennl;
<a name='L453'>    <font color='red'>}</font>
<a name='L454'>
<a name='L455'>    <b>return</b> output;
<a name='L456'>
<a name='L457'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L458'>    Py_DECREF(output);
<a name='L459'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L460'><font color='red'>}</font>
<a name='L461'>
<a name='L462'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L463'><a href='../S/2575.html#L560' title='Refered from 560 in Modules/_io/textio.c.'>incrementalnewlinedecoder_decode</a>(nldecoder_object *self,
<a name='L464'>                                 PyObject *args, PyObject *kwds)
<a name='L465'><font color='red'>{</font>
<a name='L466'>    <b>char</b> *kwlist[] = <font color='red'>{</font>"input", "final", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L467'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *input;
<a name='L468'>    <b>int</b> final = 0;
<a name='L469'>
<a name='L470'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|i:IncrementalNewlineDecoder",
<a name='L471'>                                     kwlist, &amp;input, &amp;final))
<a name='L472'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L473'>    <b>return</b> <a href='../S/2575.html#L245' title='Defined at 245 in Modules/_io/textio.c.'>_PyIncrementalNewlineDecoder_decode</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) self, input, final);
<a name='L474'><font color='red'>}</font>
<a name='L475'>
<a name='L476'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L477'><a href='../S/2575.html#L561' title='Refered from 561 in Modules/_io/textio.c.'>incrementalnewlinedecoder_getstate</a>(nldecoder_object *self, PyObject *args)
<a name='L478'><font color='red'>{</font>
<a name='L479'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L480'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> flag;
<a name='L481'>
<a name='L482'>    <b>if</b> (self-&gt;decoder != Py_None) <font color='red'>{</font>
<a name='L483'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder,
<a name='L484'>           _PyIO_str_getstate, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L485'>        <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L486'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L487'>        <b>if</b> (!<a href='../S/541.html#L15' title='Defined at 15 in Include/modsupport.h.'>PyArg_Parse</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, "(OK)", &amp;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, &amp;flag)) <font color='red'>{</font>
<a name='L488'>            Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L489'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L490'>        <font color='red'>}</font>
<a name='L491'>        Py_INCREF(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L492'>        Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L493'>    <font color='red'>}</font>
<a name='L494'>    <b>else</b> <font color='red'>{</font>
<a name='L495'>        <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = <a href='../S/2779.html#L122' title='Defined at 122 in Objects/bytesobject.c.'>PyBytes_FromString</a>("");
<a name='L496'>        flag = 0;
<a name='L497'>    <font color='red'>}</font>
<a name='L498'>    flag &lt;&lt;= 1;
<a name='L499'>    <b>if</b> (self-&gt;pendingcr)
<a name='L500'>        flag |= 1;
<a name='L501'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("NK", <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, flag);
<a name='L502'><font color='red'>}</font>
<a name='L503'>
<a name='L504'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L505'><a href='../S/2575.html#L562' title='Refered from 562 in Modules/_io/textio.c.'>incrementalnewlinedecoder_setstate</a>(nldecoder_object *self, PyObject *state)
<a name='L506'><font color='red'>{</font>
<a name='L507'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L508'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> flag;
<a name='L509'>
<a name='L510'>    <b>if</b> (!<a href='../S/541.html#L15' title='Defined at 15 in Include/modsupport.h.'>PyArg_Parse</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, "(OK)", &amp;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, &amp;flag))
<a name='L511'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L512'>
<a name='L513'>    self-&gt;pendingcr = (<b>int</b>) flag &amp; 1;
<a name='L514'>    flag &gt;&gt;= 1;
<a name='L515'>
<a name='L516'>    <b>if</b> (self-&gt;decoder != Py_None)
<a name='L517'>        <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;decoder,
<a name='L518'>                                   "setstate", "((OK))", <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, flag);
<a name='L519'>    <b>else</b>
<a name='L520'>        <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L521'><font color='red'>}</font>
<a name='L522'>
<a name='L523'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L524'><a href='../S/2575.html#L563' title='Refered from 563 in Modules/_io/textio.c.'>incrementalnewlinedecoder_reset</a>(nldecoder_object *self, PyObject *args)
<a name='L525'><font color='red'>{</font>
<a name='L526'>    self-&gt;seennl = 0;
<a name='L527'>    self-&gt;pendingcr = 0;
<a name='L528'>    <b>if</b> (self-&gt;decoder != Py_None)
<a name='L529'>        <b>return</b> <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder, _PyIO_str_reset, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L530'>    <b>else</b>
<a name='L531'>        <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L532'><font color='red'>}</font>
<a name='L533'>
<a name='L534'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L535'><a href='../S/2575.html#L568' title='Refered from 568 in Modules/_io/textio.c.'>incrementalnewlinedecoder_newlines_get</a>(nldecoder_object *self, <b>void</b> *context)
<a name='L536'><font color='red'>{</font>
<a name='L537'>    <b>switch</b> (self-&gt;seennl) <font color='red'>{</font>
<a name='L538'>    <b>case</b> <a href='../S/2575.html#L239' title='Defined at 239 in Modules/_io/textio.c.'>SEEN_CR</a>:
<a name='L539'>        <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("\r");
<a name='L540'>    <b>case</b> <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a>:
<a name='L541'>        <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("\n");
<a name='L542'>    <b>case</b> <a href='../S/2575.html#L241' title='Defined at 241 in Modules/_io/textio.c.'>SEEN_CRLF</a>:
<a name='L543'>        <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("\r\n");
<a name='L544'>    <b>case</b> <a href='../S/2575.html#L239' title='Defined at 239 in Modules/_io/textio.c.'>SEEN_CR</a> | <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a>:
<a name='L545'>        <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("ss", "\r", "\n");
<a name='L546'>    <b>case</b> <a href='../S/2575.html#L239' title='Defined at 239 in Modules/_io/textio.c.'>SEEN_CR</a> | <a href='../S/2575.html#L241' title='Defined at 241 in Modules/_io/textio.c.'>SEEN_CRLF</a>:
<a name='L547'>        <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("ss", "\r", "\r\n");
<a name='L548'>    <b>case</b> <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a> | <a href='../S/2575.html#L241' title='Defined at 241 in Modules/_io/textio.c.'>SEEN_CRLF</a>:
<a name='L549'>        <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("ss", "\n", "\r\n");
<a name='L550'>    <b>case</b> <a href='../S/2575.html#L239' title='Defined at 239 in Modules/_io/textio.c.'>SEEN_CR</a> | <a href='../S/2575.html#L240' title='Defined at 240 in Modules/_io/textio.c.'>SEEN_LF</a> | <a href='../S/2575.html#L241' title='Defined at 241 in Modules/_io/textio.c.'>SEEN_CRLF</a>:
<a name='L551'>        <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("sss", "\r", "\n", "\r\n");
<a name='L552'>    <b>default</b>:
<a name='L553'>        <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L554'>   <font color='red'>}</font>
<a name='L555'>
<a name='L556'><font color='red'>}</font>
<a name='L557'>
<a name='L558'>
<a name='L559'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> incrementalnewlinedecoder_methods[] = <font color='red'>{</font>
<a name='L560'>    <font color='red'>{</font>"decode", (PyCFunction)<a href='../S/2575.html#L463' title='Defined at 463 in Modules/_io/textio.c.'>incrementalnewlinedecoder_decode</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS<font color='red'>}</font>,
<a name='L561'>    <font color='red'>{</font>"getstate", (PyCFunction)<a href='../S/2575.html#L477' title='Defined at 477 in Modules/_io/textio.c.'>incrementalnewlinedecoder_getstate</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L562'>    <font color='red'>{</font>"setstate", (PyCFunction)<a href='../S/2575.html#L505' title='Defined at 505 in Modules/_io/textio.c.'>incrementalnewlinedecoder_setstate</a>, METH_O<font color='red'>}</font>,
<a name='L563'>    <font color='red'>{</font>"reset", (PyCFunction)<a href='../S/2575.html#L524' title='Defined at 524 in Modules/_io/textio.c.'>incrementalnewlinedecoder_reset</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L564'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L565'><font color='red'>}</font>;
<a name='L566'>
<a name='L567'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> incrementalnewlinedecoder_getset[] = <font color='red'>{</font>
<a name='L568'>    <font color='red'>{</font>"newlines", (getter)<a href='../S/2575.html#L535' title='Defined at 535 in Modules/_io/textio.c.'>incrementalnewlinedecoder_newlines_get</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L569'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L570'><font color='red'>}</font>;
<a name='L571'>
<a name='L572'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyIncrementalNewlineDecoder_Type = <font color='red'>{</font>
<a name='L573'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L574'>    "_io.IncrementalNewlineDecoder", <i><font color='green'>/*tp_name*/</font></i>
<a name='L575'>    <b>sizeof</b>(<a href='../S/2575.html#L196' title='Defined at 196 in Modules/_io/textio.c.'>nldecoder_object</a>), <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L576'>    0,                          <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L577'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2575.html#L232' title='Defined at 232 in Modules/_io/textio.c.'>incrementalnewlinedecoder_dealloc</a>, <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L578'>    0,                          <i><font color='green'>/*tp_print*/</font></i>
<a name='L579'>    0,                          <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L580'>    0,                          <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L581'>    0,                          <i><font color='green'>/*tp_compare */</font></i>
<a name='L582'>    0,                          <i><font color='green'>/*tp_repr*/</font></i>
<a name='L583'>    0,                          <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L584'>    0,                          <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L585'>    0,                          <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L586'>    0,                          <i><font color='green'>/*tp_hash */</font></i>
<a name='L587'>    0,                          <i><font color='green'>/*tp_call*/</font></i>
<a name='L588'>    0,                          <i><font color='green'>/*tp_str*/</font></i>
<a name='L589'>    0,                          <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L590'>    0,                          <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L591'>    0,                          <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L592'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE,  <i><font color='green'>/*tp_flags*/</font></i>
<a name='L593'>    incrementalnewlinedecoder_doc,          <i><font color='green'>/* tp_doc */</font></i>
<a name='L594'>    0,                          <i><font color='green'>/* tp_traverse */</font></i>
<a name='L595'>    0,                          <i><font color='green'>/* tp_clear */</font></i>
<a name='L596'>    0,                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L597'>    0,                          <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L598'>    0,                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L599'>    0,                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L600'>    incrementalnewlinedecoder_methods, <i><font color='green'>/* tp_methods */</font></i>
<a name='L601'>    0,                          <i><font color='green'>/* tp_members */</font></i>
<a name='L602'>    incrementalnewlinedecoder_getset, <i><font color='green'>/* tp_getset */</font></i>
<a name='L603'>    0,                          <i><font color='green'>/* tp_base */</font></i>
<a name='L604'>    0,                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L605'>    0,                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L606'>    0,                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L607'>    0,                          <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L608'>    (initproc)<a href='../S/2575.html#L199' title='Defined at 199 in Modules/_io/textio.c.'>incrementalnewlinedecoder_init</a>, <i><font color='green'>/* tp_init */</font></i>
<a name='L609'>    0,                          <i><font color='green'>/* tp_alloc */</font></i>
<a name='L610'>    <a href='../S/2824.html#L730' title='Defined at 730 in Objects/typeobject.c.'>PyType_GenericNew</a>,          <i><font color='green'>/* tp_new */</font></i>
<a name='L611'><font color='red'>}</font>;
<a name='L612'>
<a name='L613'>
<a name='L614'><i><font color='green'>/* TextIOWrapper */</font></i>
<a name='L615'>
<a name='L616'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(textiowrapper_doc,
<a name='L617'>    "Character and line based layer over a BufferedIOBase object, buffer.\n"
<a name='L618'>    "\n"
<a name='L619'>    "encoding gives the name of the encoding that the stream will be\n"
<a name='L620'>    "decoded or encoded with. It defaults to locale.getpreferredencoding.\n"
<a name='L621'>    "\n"
<a name='L622'>    "errors determines the strictness of encoding and decoding (see the\n"
<a name='L623'>    "codecs.register) and defaults to \"strict\".\n"
<a name='L624'>    "\n"
<a name='L625'>    "newline can be None, '', '\\n', '\\r', or '\\r\\n'.  It controls the\n"
<a name='L626'>    "handling of line endings. If it is None, universal newlines is\n"
<a name='L627'>    "enabled.  With this enabled, on input, the lines endings '\\n', '\\r',\n"
<a name='L628'>    "or '\\r\\n' are translated to '\\n' before being returned to the\n"
<a name='L629'>    "caller. Conversely, on output, '\\n' is translated to the system\n"
<a name='L630'>    "default line seperator, os.linesep. If newline is any other of its\n"
<a name='L631'>    "legal values, that newline becomes the newline when the file is read\n"
<a name='L632'>    "and it is returned untranslated. On output, '\\n' is converted to the\n"
<a name='L633'>    "newline.\n"
<a name='L634'>    "\n"
<a name='L635'>    "If line_buffering is True, a call to flush is implied when a call to\n"
<a name='L636'>    "write contains a newline character."
<a name='L637'>    );
<a name='L638'>
<a name='L639'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L640'>        (*encodefunc_t)(PyObject *, PyObject *);
<a name='L641'>
<a name='L642'><b>typedef</b> <b>struct</b>
<a name='L643'><font color='red'>{</font>
<a name='L644'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L645'>    <b>int</b> ok; <i><font color='green'>/* initialized? */</font></i>
<a name='L646'>    <b>int</b> detached;
<a name='L647'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> chunk_size;
<a name='L648'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L649'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>;
<a name='L650'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *encoder;
<a name='L651'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoder;
<a name='L652'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *readnl;
<a name='L653'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errors;
<a name='L654'>    <b>const</b> <b>char</b> *writenl; <i><font color='green'>/* utf-8 encoded, NULL stands for \n */</font></i>
<a name='L655'>    <b>char</b> line_buffering;
<a name='L656'>    <b>char</b> readuniversal;
<a name='L657'>    <b>char</b> readtranslate;
<a name='L658'>    <b>char</b> writetranslate;
<a name='L659'>    <b>char</b> seekable;
<a name='L660'>    <b>char</b> telling;
<a name='L661'>    <b>char</b> deallocating;
<a name='L662'>    <i><font color='green'>/* Specialized encoding func (see below) */</font></i>
<a name='L663'>    encodefunc_t encodefunc;
<a name='L664'>    <i><font color='green'>/* Whether or not it's the start of the stream */</font></i>
<a name='L665'>    <b>char</b> encoding_start_of_stream;
<a name='L666'>
<a name='L667'>    <i><font color='green'>/* Reads and writes are internally buffered in order to speed things up.</font></i>
<a name='L668'><i><font color='green'>       However, any read will first flush the write buffer if itsn't empty.</font></i>
<a name='L669'><i><font color='green'></font></i>
<a name='L670'><i><font color='green'>       Please also note that text to be written is first encoded before being</font></i>
<a name='L671'><i><font color='green'>       buffered. This is necessary so that encoding errors are immediately</font></i>
<a name='L672'><i><font color='green'>       reported to the caller, but it unfortunately means that the</font></i>
<a name='L673'><i><font color='green'>       IncrementalEncoder (whose encode() method is always written in Python)</font></i>
<a name='L674'><i><font color='green'>       becomes a bottleneck for small writes.</font></i>
<a name='L675'><i><font color='green'>    */</font></i>
<a name='L676'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoded_chars;       <i><font color='green'>/* buffer for text returned from decoder */</font></i>
<a name='L677'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> decoded_chars_used; <i><font color='green'>/* offset into _decoded_chars for read() */</font></i>
<a name='L678'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pending_bytes;       <i><font color='green'>/* list of bytes objects waiting to be</font></i>
<a name='L679'><i><font color='green'>                                      written, or NULL */</font></i>
<a name='L680'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> pending_bytes_count;
<a name='L681'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *snapshot;
<a name='L682'>    <i><font color='green'>/* snapshot is either None, or a tuple (dec_flags, next_input) where</font></i>
<a name='L683'><i><font color='green'>     * dec_flags is the second (integer) item of the decoder state and</font></i>
<a name='L684'><i><font color='green'>     * next_input is the chunk of input bytes that comes next after the</font></i>
<a name='L685'><i><font color='green'>     * snapshot point.  We use this to reconstruct decoder states in tell().</font></i>
<a name='L686'><i><font color='green'>     */</font></i>
<a name='L687'>
<a name='L688'>    <i><font color='green'>/* Cache raw object if it's a FileIO object */</font></i>
<a name='L689'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *raw;
<a name='L690'>
<a name='L691'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *weakreflist;
<a name='L692'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dict;
<a name='L693'><font color='red'>}</font> <a href='../R/10828.html' title='Multiple refered from 6 places.'>textio</a>;
<a name='L694'>
<a name='L695'>
<a name='L696'><i><font color='green'>/* A couple of specialized cases in order to bypass the slow incremental</font></i>
<a name='L697'><i><font color='green'>   encoding methods for the most popular encodings. */</font></i>
<a name='L698'>
<a name='L699'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L700'><a href='../R/6042.html' title='Multiple refered from 2 places.'>ascii_encode</a>(textio *self, PyObject *text)
<a name='L701'><font color='red'>{</font>
<a name='L702'>    <b>return</b> <a href='../D/3991.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeASCII</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L703'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L704'>                                 PyBytes_AS_STRING(self-&gt;errors));
<a name='L705'><font color='red'>}</font>
<a name='L706'>
<a name='L707'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L708'><a href='../R/11206.html' title='Multiple refered from 2 places.'>utf16be_encode</a>(textio *self, PyObject *text)
<a name='L709'><font color='red'>{</font>
<a name='L710'>    <b>return</b> <a href='../D/3998.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF16</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L711'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L712'>                                 PyBytes_AS_STRING(self-&gt;errors), 1);
<a name='L713'><font color='red'>}</font>
<a name='L714'>
<a name='L715'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L716'><a href='../R/11207.html' title='Multiple refered from 2 places.'>utf16le_encode</a>(textio *self, PyObject *text)
<a name='L717'><font color='red'>{</font>
<a name='L718'>    <b>return</b> <a href='../D/3998.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF16</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L719'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L720'>                                 PyBytes_AS_STRING(self-&gt;errors), -1);
<a name='L721'><font color='red'>}</font>
<a name='L722'>
<a name='L723'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L724'><a href='../S/2575.html#L800' title='Refered from 800 in Modules/_io/textio.c.'>utf16_encode</a>(textio *self, PyObject *text)
<a name='L725'><font color='red'>{</font>
<a name='L726'>    <b>if</b> (!self-&gt;encoding_start_of_stream) <font color='red'>{</font>
<a name='L727'>        <i><font color='green'>/* Skip the BOM and use native byte ordering */</font></i>
<a name='L728'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/5540.html' title='Multiple defined in 8 places.'>WORDS_BIGENDIAN</a>)
<a name='L729'>        <b>return</b> <a href='../S/2575.html#L708' title='Defined at 708 in Modules/_io/textio.c.'>utf16be_encode</a>(self, text);
<a name='L730'><font color='darkred'>#else</font>
<a name='L731'>        <b>return</b> <a href='../S/2575.html#L716' title='Defined at 716 in Modules/_io/textio.c.'>utf16le_encode</a>(self, text);
<a name='L732'><font color='darkred'>#endif</font>
<a name='L733'>    <font color='red'>}</font>
<a name='L734'>    <b>return</b> <a href='../D/3998.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF16</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L735'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L736'>                                 PyBytes_AS_STRING(self-&gt;errors), 0);
<a name='L737'><font color='red'>}</font>
<a name='L738'>
<a name='L739'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L740'><a href='../R/11209.html' title='Multiple refered from 2 places.'>utf32be_encode</a>(textio *self, PyObject *text)
<a name='L741'><font color='red'>{</font>
<a name='L742'>    <b>return</b> <a href='../D/3999.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF32</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L743'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L744'>                                 PyBytes_AS_STRING(self-&gt;errors), 1);
<a name='L745'><font color='red'>}</font>
<a name='L746'>
<a name='L747'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L748'><a href='../R/11210.html' title='Multiple refered from 2 places.'>utf32le_encode</a>(textio *self, PyObject *text)
<a name='L749'><font color='red'>{</font>
<a name='L750'>    <b>return</b> <a href='../D/3999.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF32</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L751'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L752'>                                 PyBytes_AS_STRING(self-&gt;errors), -1);
<a name='L753'><font color='red'>}</font>
<a name='L754'>
<a name='L755'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L756'><a href='../S/2575.html#L803' title='Refered from 803 in Modules/_io/textio.c.'>utf32_encode</a>(textio *self, PyObject *text)
<a name='L757'><font color='red'>{</font>
<a name='L758'>    <b>if</b> (!self-&gt;encoding_start_of_stream) <font color='red'>{</font>
<a name='L759'>        <i><font color='green'>/* Skip the BOM and use native byte ordering */</font></i>
<a name='L760'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/5540.html' title='Multiple defined in 8 places.'>WORDS_BIGENDIAN</a>)
<a name='L761'>        <b>return</b> <a href='../S/2575.html#L740' title='Defined at 740 in Modules/_io/textio.c.'>utf32be_encode</a>(self, text);
<a name='L762'><font color='darkred'>#else</font>
<a name='L763'>        <b>return</b> <a href='../S/2575.html#L748' title='Defined at 748 in Modules/_io/textio.c.'>utf32le_encode</a>(self, text);
<a name='L764'><font color='darkred'>#endif</font>
<a name='L765'>    <font color='red'>}</font>
<a name='L766'>    <b>return</b> <a href='../D/3999.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF32</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L767'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L768'>                                 PyBytes_AS_STRING(self-&gt;errors), 0);
<a name='L769'><font color='red'>}</font>
<a name='L770'>
<a name='L771'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L772'><a href='../S/2575.html#L797' title='Refered from 797 in Modules/_io/textio.c.'>utf8_encode</a>(textio *self, PyObject *text)
<a name='L773'><font color='red'>{</font>
<a name='L774'>    <b>return</b> <a href='../D/4001.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF8</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L775'>                                <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L776'>                                PyBytes_AS_STRING(self-&gt;errors));
<a name='L777'><font color='red'>}</font>
<a name='L778'>
<a name='L779'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L780'><a href='../S/2575.html#L796' title='Refered from 796 in Modules/_io/textio.c.'>latin1_encode</a>(textio *self, PyObject *text)
<a name='L781'><font color='red'>{</font>
<a name='L782'>    <b>return</b> <a href='../D/3995.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeLatin1</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L783'>                                  <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text),
<a name='L784'>                                  PyBytes_AS_STRING(self-&gt;errors));
<a name='L785'><font color='red'>}</font>
<a name='L786'>
<a name='L787'><i><font color='green'>/* Map normalized encoding names onto the specialized encoding funcs */</font></i>
<a name='L788'>
<a name='L789'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L790'>    <b>const</b> <b>char</b> *name;
<a name='L791'>    encodefunc_t encodefunc;
<a name='L792'><font color='red'>}</font> <a href='../R/7546.html' title='Multiple refered from 2 places.'>encodefuncentry</a>;
<a name='L793'>
<a name='L794'><b>static</b> <a href='../S/2575.html#L792' title='Defined at 792 in Modules/_io/textio.c.'>encodefuncentry</a> encodefuncs[] = <font color='red'>{</font>
<a name='L795'>    <font color='red'>{</font>"ascii",       (encodefunc_t) <a href='../D/6796.html' title='Multiple defined in 2 places.'>ascii_encode</a><font color='red'>}</font>,
<a name='L796'>    <font color='red'>{</font>"iso8859-1",   (encodefunc_t) <a href='../S/2575.html#L780' title='Defined at 780 in Modules/_io/textio.c.'>latin1_encode</a><font color='red'>}</font>,
<a name='L797'>    <font color='red'>{</font>"utf-8",       (encodefunc_t) <a href='../S/2575.html#L772' title='Defined at 772 in Modules/_io/textio.c.'>utf8_encode</a><font color='red'>}</font>,
<a name='L798'>    <font color='red'>{</font>"utf-16-be",   (encodefunc_t) <a href='../S/2575.html#L708' title='Defined at 708 in Modules/_io/textio.c.'>utf16be_encode</a><font color='red'>}</font>,
<a name='L799'>    <font color='red'>{</font>"utf-16-le",   (encodefunc_t) <a href='../S/2575.html#L716' title='Defined at 716 in Modules/_io/textio.c.'>utf16le_encode</a><font color='red'>}</font>,
<a name='L800'>    <font color='red'>{</font>"utf-16",      (encodefunc_t) <a href='../S/2575.html#L724' title='Defined at 724 in Modules/_io/textio.c.'>utf16_encode</a><font color='red'>}</font>,
<a name='L801'>    <font color='red'>{</font>"utf-32-be",   (encodefunc_t) <a href='../S/2575.html#L740' title='Defined at 740 in Modules/_io/textio.c.'>utf32be_encode</a><font color='red'>}</font>,
<a name='L802'>    <font color='red'>{</font>"utf-32-le",   (encodefunc_t) <a href='../S/2575.html#L748' title='Defined at 748 in Modules/_io/textio.c.'>utf32le_encode</a><font color='red'>}</font>,
<a name='L803'>    <font color='red'>{</font>"utf-32",      (encodefunc_t) <a href='../S/2575.html#L756' title='Defined at 756 in Modules/_io/textio.c.'>utf32_encode</a><font color='red'>}</font>,
<a name='L804'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L805'><font color='red'>}</font>;
<a name='L806'>
<a name='L807'>
<a name='L808'><b>static</b> <b>int</b>
<a name='L809'><a href='../S/2575.html#L2648' title='Refered from 2648 in Modules/_io/textio.c.'>textiowrapper_init</a>(textio *self, PyObject *args, PyObject *kwds)
<a name='L810'><font color='red'>{</font>
<a name='L811'>    <b>char</b> *kwlist[] = <font color='red'>{</font>"buffer", "encoding", "errors",
<a name='L812'>                      "newline", "line_buffering",
<a name='L813'>                      <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L814'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, *raw;
<a name='L815'>    <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L816'>    <b>char</b> *errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L817'>    <b>char</b> *newline = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L818'>    <b>int</b> line_buffering = 0;
<a name='L819'>    _PyIO_State *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = <a href='../S/2569.html#L143' title='Defined at 143 in Modules/_io/_iomodule.h.'>IO_STATE</a>;
<a name='L820'>
<a name='L821'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L822'>    <b>int</b> r;
<a name='L823'>
<a name='L824'>    self-&gt;ok = 0;
<a name='L825'>    self-&gt;detached = 0;
<a name='L826'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|zzzi:fileio",
<a name='L827'>                                     kwlist, &amp;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, &amp;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, &amp;errors,
<a name='L828'>                                     &amp;newline, &amp;line_buffering))
<a name='L829'>        <b>return</b> -1;
<a name='L830'>
<a name='L831'>    <b>if</b> (newline &amp;&amp; newline[0] != '\0'
<a name='L832'>        &amp;&amp; !(newline[0] == '\n' &amp;&amp; newline[1] == '\0')
<a name='L833'>        &amp;&amp; !(newline[0] == '\r' &amp;&amp; newline[1] == '\0')
<a name='L834'>        &amp;&amp; !(newline[0] == '\r' &amp;&amp; newline[1] == '\n' &amp;&amp; newline[2] == '\0')) <font color='red'>{</font>
<a name='L835'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L836'>                     "illegal newline value: %s", newline);
<a name='L837'>        <b>return</b> -1;
<a name='L838'>    <font color='red'>}</font>
<a name='L839'>
<a name='L840'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L841'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L842'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;encoder);
<a name='L843'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;decoder);
<a name='L844'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;readnl);
<a name='L845'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;decoded_chars);
<a name='L846'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;pending_bytes);
<a name='L847'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L848'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;errors);
<a name='L849'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;raw);
<a name='L850'>    self-&gt;decoded_chars_used = 0;
<a name='L851'>    self-&gt;pending_bytes_count = 0;
<a name='L852'>    self-&gt;encodefunc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L853'>
<a name='L854'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L855'>        <i><font color='green'>/* Try os.device_encoding(fileno) */</font></i>
<a name='L856'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2759.html#L50' title='Defined at 50 in Modules/zlib/minigzip.c.'>fileno</a>;
<a name='L857'>        <a href='../S/2759.html#L50' title='Defined at 50 in Modules/zlib/minigzip.c.'>fileno</a> = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "fileno", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L858'>        <i><font color='green'>/* Ignore only AttributeError and UnsupportedOperation */</font></i>
<a name='L859'>        <b>if</b> (<a href='../S/2759.html#L50' title='Defined at 50 in Modules/zlib/minigzip.c.'>fileno</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L860'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError) ||
<a name='L861'>                <a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;unsupported_operation)) <font color='red'>{</font>
<a name='L862'>                <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L863'>            <font color='red'>}</font>
<a name='L864'>            <b>else</b> <font color='red'>{</font>
<a name='L865'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L866'>            <font color='red'>}</font>
<a name='L867'>        <font color='red'>}</font>
<a name='L868'>        <b>else</b> <font color='red'>{</font>
<a name='L869'>            self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;os_module,
<a name='L870'>                                                 "device_encoding",
<a name='L871'>                                                 "N", <a href='../S/2759.html#L50' title='Defined at 50 in Modules/zlib/minigzip.c.'>fileno</a>);
<a name='L872'>            <b>if</b> (self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L873'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L874'>            <b>else</b> <b>if</b> (!PyUnicode_Check(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>))
<a name='L875'>                <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L876'>        <font color='red'>}</font>
<a name='L877'>    <font color='red'>}</font>
<a name='L878'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L879'>        <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;locale_module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L880'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;locale_module = <a href='../S/3120.html#L2325' title='Defined at 2325 in Python/import.c.'>PyImport_ImportModule</a>("locale");
<a name='L881'>            <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;locale_module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L882'>                <b>goto</b> catch_ImportError;
<a name='L883'>            <b>else</b>
<a name='L884'>                <b>goto</b> use_locale;
<a name='L885'>        <font color='red'>}</font>
<a name='L886'>        <b>else</b> <font color='red'>{</font>
<a name='L887'>          use_locale:
<a name='L888'>            self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(
<a name='L889'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;locale_module, "getpreferredencoding", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L890'>            <b>if</b> (self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L891'>              catch_ImportError:
<a name='L892'>                <i><font color='green'>/*</font></i>
<a name='L893'><i><font color='green'>                 Importing locale can raise a ImportError because of</font></i>
<a name='L894'><i><font color='green'>                 _functools, and locale.getpreferredencoding can raise a</font></i>
<a name='L895'><i><font color='green'>                 ImportError if _locale is not available.  These will happen</font></i>
<a name='L896'><i><font color='green'>                 during module building.</font></i>
<a name='L897'><i><font color='green'>                */</font></i>
<a name='L898'>                <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_ImportError)) <font color='red'>{</font>
<a name='L899'>                    <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L900'>                    self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("ascii");
<a name='L901'>                <font color='red'>}</font>
<a name='L902'>                <b>else</b>
<a name='L903'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L904'>            <font color='red'>}</font>
<a name='L905'>            <b>else</b> <b>if</b> (!PyUnicode_Check(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>))
<a name='L906'>                <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L907'>        <font color='red'>}</font>
<a name='L908'>    <font color='red'>}</font>
<a name='L909'>    <b>if</b> (self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L910'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L911'>        <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L912'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L913'>    <font color='red'>}</font>
<a name='L914'>    <b>else</b> <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L915'>        self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L916'>        <b>if</b> (self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L917'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L918'>    <font color='red'>}</font>
<a name='L919'>    <b>else</b> <font color='red'>{</font>
<a name='L920'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_IOError,
<a name='L921'>                        "could not determine default encoding");
<a name='L922'>    <font color='red'>}</font>
<a name='L923'>
<a name='L924'>    <b>if</b> (errors == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L925'>        errors = "strict";
<a name='L926'>    self-&gt;errors = <a href='../S/2779.html#L122' title='Defined at 122 in Objects/bytesobject.c.'>PyBytes_FromString</a>(errors);
<a name='L927'>    <b>if</b> (self-&gt;errors == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L928'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L929'>
<a name='L930'>    self-&gt;chunk_size = 8192;
<a name='L931'>    self-&gt;readuniversal = (newline == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || newline[0] == '\0');
<a name='L932'>    self-&gt;line_buffering = line_buffering;
<a name='L933'>    self-&gt;readtranslate = (newline == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L934'>    <b>if</b> (newline) <font color='red'>{</font>
<a name='L935'>        self-&gt;readnl = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(newline);
<a name='L936'>        <b>if</b> (self-&gt;readnl == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L937'>            <b>return</b> -1;
<a name='L938'>    <font color='red'>}</font>
<a name='L939'>    self-&gt;writetranslate = (newline == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || newline[0] != '\0');
<a name='L940'>    <b>if</b> (!self-&gt;readuniversal &amp;&amp; self-&gt;readnl) <font color='red'>{</font>
<a name='L941'>        self-&gt;writenl = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(self-&gt;readnl);
<a name='L942'>        <b>if</b> (self-&gt;writenl == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L943'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L944'>        <b>if</b> (!strcmp(self-&gt;writenl, "\n"))
<a name='L945'>            self-&gt;writenl = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L946'>    <font color='red'>}</font>
<a name='L947'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L948'>    <b>else</b>
<a name='L949'>        self-&gt;writenl = "\r\n";
<a name='L950'><font color='darkred'>#endif</font>
<a name='L951'>
<a name='L952'>    <i><font color='green'>/* Build the decoder object */</font></i>
<a name='L953'>    res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "readable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L954'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L955'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L956'>    r = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(res);
<a name='L957'>    Py_DECREF(res);
<a name='L958'>    <b>if</b> (r == -1)
<a name='L959'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L960'>    <b>if</b> (r == 1) <font color='red'>{</font>
<a name='L961'>        self-&gt;decoder = <a href='../S/3093.html#L313' title='Defined at 313 in Python/codecs.c.'>PyCodec_IncrementalDecoder</a>(
<a name='L962'>            <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L963'>        <b>if</b> (self-&gt;decoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L964'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L965'>
<a name='L966'>        <b>if</b> (self-&gt;readuniversal) <font color='red'>{</font>
<a name='L967'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *incrementalDecoder = <a href='../D/3601.html' title='Multiple defined in 2 places.'>PyObject_CallFunction</a>(
<a name='L968'>                (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;PyIncrementalNewlineDecoder_Type,
<a name='L969'>                "Oi", self-&gt;decoder, (<b>int</b>)self-&gt;readtranslate);
<a name='L970'>            <b>if</b> (incrementalDecoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L971'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L972'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;decoder);
<a name='L973'>            self-&gt;decoder = incrementalDecoder;
<a name='L974'>        <font color='red'>}</font>
<a name='L975'>    <font color='red'>}</font>
<a name='L976'>
<a name='L977'>    <i><font color='green'>/* Build the encoder object */</font></i>
<a name='L978'>    res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "writable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L979'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L980'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L981'>    r = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(res);
<a name='L982'>    Py_DECREF(res);
<a name='L983'>    <b>if</b> (r == -1)
<a name='L984'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L985'>    <b>if</b> (r == 1) <font color='red'>{</font>
<a name='L986'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ci;
<a name='L987'>        self-&gt;encoder = <a href='../S/3093.html#L307' title='Defined at 307 in Python/codecs.c.'>PyCodec_IncrementalEncoder</a>(
<a name='L988'>            <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L989'>        <b>if</b> (self-&gt;encoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L990'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L991'>        <i><font color='green'>/* Get the normalized named of the codec */</font></i>
<a name='L992'>        ci = <a href='../S/3093.html#L98' title='Defined at 98 in Python/codecs.c.'>_PyCodec_Lookup</a>(<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L993'>        <b>if</b> (ci == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L994'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L995'>        res = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(ci, "name");
<a name='L996'>        Py_DECREF(ci);
<a name='L997'>        <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L998'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L999'>                <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1000'>            <b>else</b>
<a name='L1001'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1002'>        <font color='red'>}</font>
<a name='L1003'>        <b>else</b> <b>if</b> (PyUnicode_Check(res)) <font color='red'>{</font>
<a name='L1004'>            <a href='../S/2575.html#L792' title='Defined at 792 in Modules/_io/textio.c.'>encodefuncentry</a> *e = encodefuncs;
<a name='L1005'>            <b>while</b> (e-&gt;name != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1006'>                <b>if</b> (!<a href='../D/3968.html' title='Multiple defined in 3 places.'>PyUnicode_CompareWithASCIIString</a>(res, e-&gt;name)) <font color='red'>{</font>
<a name='L1007'>                    self-&gt;encodefunc = e-&gt;encodefunc;
<a name='L1008'>                    <b>break</b>;
<a name='L1009'>                <font color='red'>}</font>
<a name='L1010'>                e++;
<a name='L1011'>            <font color='red'>}</font>
<a name='L1012'>        <font color='red'>}</font>
<a name='L1013'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(res);
<a name='L1014'>    <font color='red'>}</font>
<a name='L1015'>
<a name='L1016'>    self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L1017'>    Py_INCREF(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L1018'>
<a name='L1019'>    <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>) == &amp;PyBufferedReader_Type ||
<a name='L1020'>        <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>) == &amp;PyBufferedWriter_Type ||
<a name='L1021'>        <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>) == &amp;PyBufferedRandom_Type) <font color='red'>{</font>
<a name='L1022'>        raw = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "raw");
<a name='L1023'>        <i><font color='green'>/* Cache the raw FileIO object to speed up 'closed' checks */</font></i>
<a name='L1024'>        <b>if</b> (raw == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1025'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L1026'>                <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1027'>            <b>else</b>
<a name='L1028'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1029'>        <font color='red'>}</font>
<a name='L1030'>        <b>else</b> <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(raw) == &amp;PyFileIO_Type)
<a name='L1031'>            self-&gt;raw = raw;
<a name='L1032'>        <b>else</b>
<a name='L1033'>            Py_DECREF(raw);
<a name='L1034'>    <font color='red'>}</font>
<a name='L1035'>
<a name='L1036'>    res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "seekable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1037'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1038'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1039'>    self-&gt;seekable = self-&gt;telling = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(res);
<a name='L1040'>    Py_DECREF(res);
<a name='L1041'>
<a name='L1042'>    self-&gt;encoding_start_of_stream = 0;
<a name='L1043'>    <b>if</b> (self-&gt;seekable &amp;&amp; self-&gt;encoder) <font color='red'>{</font>
<a name='L1044'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cookieObj;
<a name='L1045'>        <b>int</b> <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>;
<a name='L1046'>
<a name='L1047'>        self-&gt;encoding_start_of_stream = 1;
<a name='L1048'>
<a name='L1049'>        cookieObj = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, _PyIO_str_tell, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1050'>        <b>if</b> (cookieObj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1051'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1052'>
<a name='L1053'>        <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> = <a href='../S/2803.html#L607' title='Defined at 607 in Objects/object.c.'>PyObject_RichCompareBool</a>(cookieObj, _PyIO_zero, <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>);
<a name='L1054'>        Py_DECREF(cookieObj);
<a name='L1055'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> &lt; 0) <font color='red'>{</font>
<a name='L1056'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1057'>        <font color='red'>}</font>
<a name='L1058'>
<a name='L1059'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> == 0) <font color='red'>{</font>
<a name='L1060'>            self-&gt;encoding_start_of_stream = 0;
<a name='L1061'>            res = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;encoder, _PyIO_str_setstate,
<a name='L1062'>                                             _PyIO_zero, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1063'>            <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1064'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1065'>            Py_DECREF(res);
<a name='L1066'>        <font color='red'>}</font>
<a name='L1067'>    <font color='red'>}</font>
<a name='L1068'>
<a name='L1069'>    self-&gt;ok = 1;
<a name='L1070'>    <b>return</b> 0;
<a name='L1071'>
<a name='L1072'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1073'>    <b>return</b> -1;
<a name='L1074'><font color='red'>}</font>
<a name='L1075'>
<a name='L1076'><b>static</b> <b>int</b>
<a name='L1077'><a href='../R/5864.html' title='Multiple refered from 2 places.'>_textiowrapper_clear</a>(textio *self)
<a name='L1078'><font color='red'>{</font>
<a name='L1079'>    <b>if</b> (self-&gt;ok &amp;&amp; <a href='../S/2573.html#L196' title='Defined at 196 in Modules/_io/iobase.c.'>_PyIOBase_finalize</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) self) &lt; 0)
<a name='L1080'>        <b>return</b> -1;
<a name='L1081'>    self-&gt;ok = 0;
<a name='L1082'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L1083'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L1084'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;encoder);
<a name='L1085'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;decoder);
<a name='L1086'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;readnl);
<a name='L1087'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;decoded_chars);
<a name='L1088'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;pending_bytes);
<a name='L1089'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L1090'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;errors);
<a name='L1091'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;raw);
<a name='L1092'>    <b>return</b> 0;
<a name='L1093'><font color='red'>}</font>
<a name='L1094'>
<a name='L1095'><b>static</b> <b>void</b>
<a name='L1096'><a href='../S/2575.html#L2616' title='Refered from 2616 in Modules/_io/textio.c.'>textiowrapper_dealloc</a>(textio *self)
<a name='L1097'><font color='red'>{</font>
<a name='L1098'>    self-&gt;deallocating = 1;
<a name='L1099'>    <b>if</b> (<a href='../S/2575.html#L1077' title='Defined at 1077 in Modules/_io/textio.c.'>_textiowrapper_clear</a>(self) &lt; 0)
<a name='L1100'>        <b>return</b>;
<a name='L1101'>    <a href='../S/545.html#L281' title='Defined at 281 in Include/objimpl.h.'>_PyObject_GC_UNTRACK</a>(self);
<a name='L1102'>    <b>if</b> (self-&gt;weakreflist != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1103'>        <a href='../S/2830.html#L872' title='Defined at 872 in Objects/weakrefobject.c.'>PyObject_ClearWeakRefs</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self);
<a name='L1104'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;dict);
<a name='L1105'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_free((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self);
<a name='L1106'><font color='red'>}</font>
<a name='L1107'>
<a name='L1108'><b>static</b> <b>int</b>
<a name='L1109'><a href='../S/2575.html#L2634' title='Refered from 2634 in Modules/_io/textio.c.'>textiowrapper_traverse</a>(textio *self, visitproc visit, <b>void</b> *arg)
<a name='L1110'><font color='red'>{</font>
<a name='L1111'>    Py_VISIT(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L1112'>    Py_VISIT(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L1113'>    Py_VISIT(self-&gt;encoder);
<a name='L1114'>    Py_VISIT(self-&gt;decoder);
<a name='L1115'>    Py_VISIT(self-&gt;readnl);
<a name='L1116'>    Py_VISIT(self-&gt;decoded_chars);
<a name='L1117'>    Py_VISIT(self-&gt;pending_bytes);
<a name='L1118'>    Py_VISIT(self-&gt;snapshot);
<a name='L1119'>    Py_VISIT(self-&gt;errors);
<a name='L1120'>    Py_VISIT(self-&gt;raw);
<a name='L1121'>
<a name='L1122'>    Py_VISIT(self-&gt;dict);
<a name='L1123'>    <b>return</b> 0;
<a name='L1124'><font color='red'>}</font>
<a name='L1125'>
<a name='L1126'><b>static</b> <b>int</b>
<a name='L1127'><a href='../S/2575.html#L2635' title='Refered from 2635 in Modules/_io/textio.c.'>textiowrapper_clear</a>(textio *self)
<a name='L1128'><font color='red'>{</font>
<a name='L1129'>    <b>if</b> (<a href='../S/2575.html#L1077' title='Defined at 1077 in Modules/_io/textio.c.'>_textiowrapper_clear</a>(self) &lt; 0)
<a name='L1130'>        <b>return</b> -1;
<a name='L1131'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;dict);
<a name='L1132'>    <b>return</b> 0;
<a name='L1133'><font color='red'>}</font>
<a name='L1134'>
<a name='L1135'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1136'><a href='../S/2575.html#L2514' title='Defined at 2514 in Modules/_io/textio.c.'>textiowrapper_closed_get</a>(textio *self, <b>void</b> *context);
<a name='L1137'>
<a name='L1138'><i><font color='green'>/* This macro takes some shortcuts to make the common case faster. */</font></i>
<a name='L1139'><font color='darkred'>#define</font> <a href='../R/487.html' title='Multiple refered from 35 places.'>CHECK_CLOSED</a>(self) \
<a name='L1140'>    <b>do</b> <font color='red'>{</font> \
<a name='L1141'>        <b>int</b> r; \
<a name='L1142'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_res; \
<a name='L1143'>        <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self) == &amp;PyTextIOWrapper_Type) <font color='red'>{</font> \
<a name='L1144'>            <b>if</b> (self-&gt;raw != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) \
<a name='L1145'>                r = <a href='../S/2572.html#L69' title='Defined at 69 in Modules/_io/fileio.c.'>_PyFileIO_closed</a>(self-&gt;raw); \
<a name='L1146'>            <b>else</b> <font color='red'>{</font> \
<a name='L1147'>                _res = <a href='../S/2575.html#L2514' title='Defined at 2514 in Modules/_io/textio.c.'>textiowrapper_closed_get</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>); \
<a name='L1148'>                <b>if</b> (_res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) \
<a name='L1149'>                    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; \
<a name='L1150'>                r = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(_res); \
<a name='L1151'>                Py_DECREF(_res); \
<a name='L1152'>                <b>if</b> (r &lt; 0) \
<a name='L1153'>                    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; \
<a name='L1154'>            <font color='red'>}</font> \
<a name='L1155'>            <b>if</b> (r &gt; 0) <font color='red'>{</font> \
<a name='L1156'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, \
<a name='L1157'>                                "I/O operation on closed file."); \
<a name='L1158'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; \
<a name='L1159'>            <font color='red'>}</font> \
<a name='L1160'>        <font color='red'>}</font> \
<a name='L1161'>        <b>else</b> <b>if</b> (<a href='../S/2573.html#L160' title='Defined at 160 in Modules/_io/iobase.c.'>_PyIOBase_check_closed</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, Py_True) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) \
<a name='L1162'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; \
<a name='L1163'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L1164'>
<a name='L1165'><font color='darkred'>#define</font> <a href='../R/492.html' title='Multiple refered from 57 places.'>CHECK_INITIALIZED</a>(self) \
<a name='L1166'>    <b>if</b> (self-&gt;ok &lt;= 0) <font color='red'>{</font> \
<a name='L1167'>        <b>if</b> (self-&gt;detached) <font color='red'>{</font> \
<a name='L1168'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, \
<a name='L1169'>                 "underlying buffer has been detached"); \
<a name='L1170'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>                                   \
<a name='L1171'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, \
<a name='L1172'>                "I/O operation on uninitialized object"); \
<a name='L1173'>        <font color='red'>}</font> \
<a name='L1174'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; \
<a name='L1175'>    <font color='red'>}</font>
<a name='L1176'>
<a name='L1177'><font color='darkred'>#define</font> <a href='../R/493.html' title='Multiple refered from 2 places.'>CHECK_INITIALIZED_INT</a>(self) \
<a name='L1178'>    <b>if</b> (self-&gt;ok &lt;= 0) <font color='red'>{</font> \
<a name='L1179'>        <b>if</b> (self-&gt;detached) <font color='red'>{</font> \
<a name='L1180'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, \
<a name='L1181'>                 "underlying buffer has been detached"); \
<a name='L1182'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>                                   \
<a name='L1183'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, \
<a name='L1184'>                "I/O operation on uninitialized object"); \
<a name='L1185'>        <font color='red'>}</font> \
<a name='L1186'>        <b>return</b> -1; \
<a name='L1187'>    <font color='red'>}</font>
<a name='L1188'>
<a name='L1189'>
<a name='L1190'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1191'><a href='../S/2575.html#L2572' title='Refered from 2572 in Modules/_io/textio.c.'>textiowrapper_detach</a>(textio *self)
<a name='L1192'><font color='red'>{</font>
<a name='L1193'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, *res;
<a name='L1194'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L1195'>    res = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, _PyIO_str_flush, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1196'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1197'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1198'>    Py_DECREF(res);
<a name='L1199'>    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L1200'>    self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1201'>    self-&gt;detached = 1;
<a name='L1202'>    self-&gt;ok = 0;
<a name='L1203'>    <b>return</b> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L1204'><font color='red'>}</font>
<a name='L1205'>
<a name='L1206'>Py_LOCAL_INLINE(<b>const</b> Py_UNICODE *)
<a name='L1207'>findchar(<b>const</b> Py_UNICODE *s, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, Py_UNICODE ch)
<a name='L1208'><font color='red'>{</font>
<a name='L1209'>    <i><font color='green'>/* like wcschr, but doesn't stop at NULL characters */</font></i>
<a name='L1210'>    <b>while</b> (size-- &gt; 0) <font color='red'>{</font>
<a name='L1211'>        <b>if</b> (*s == ch)
<a name='L1212'>            <b>return</b> s;
<a name='L1213'>        s++;
<a name='L1214'>    <font color='red'>}</font>
<a name='L1215'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1216'><font color='red'>}</font>
<a name='L1217'>
<a name='L1218'><i><font color='green'>/* Flush the internal write buffer. This doesn't explicitly flush the</font></i>
<a name='L1219'><i><font color='green'>   underlying buffered object, though. */</font></i>
<a name='L1220'><b>static</b> <b>int</b>
<a name='L1221'><a href='../R/5868.html' title='Multiple refered from 5 places.'>_textiowrapper_writeflush</a>(textio *self)
<a name='L1222'><font color='red'>{</font>
<a name='L1223'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pending, *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, *ret;
<a name='L1224'>
<a name='L1225'>    <b>if</b> (self-&gt;pending_bytes == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1226'>        <b>return</b> 0;
<a name='L1227'>
<a name='L1228'>    pending = self-&gt;pending_bytes;
<a name='L1229'>    Py_INCREF(pending);
<a name='L1230'>    self-&gt;pending_bytes_count = 0;
<a name='L1231'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;pending_bytes);
<a name='L1232'>
<a name='L1233'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/2779.html#L1218' title='Defined at 1218 in Objects/bytesobject.c.'>_PyBytes_Join</a>(_PyIO_empty_bytes, pending);
<a name='L1234'>    Py_DECREF(pending);
<a name='L1235'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1236'>        <b>return</b> -1;
<a name='L1237'>    ret = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>,
<a name='L1238'>                                     _PyIO_str_write, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1239'>    Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1240'>    <b>if</b> (ret == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1241'>        <b>return</b> -1;
<a name='L1242'>    Py_DECREF(ret);
<a name='L1243'>    <b>return</b> 0;
<a name='L1244'><font color='red'>}</font>
<a name='L1245'>
<a name='L1246'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1247'><a href='../S/2575.html#L2573' title='Refered from 2573 in Modules/_io/textio.c.'>textiowrapper_write</a>(textio *self, PyObject *args)
<a name='L1248'><font color='red'>{</font>
<a name='L1249'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret;
<a name='L1250'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *text; <i><font color='green'>/* owned reference */</font></i>
<a name='L1251'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L1252'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> textlen;
<a name='L1253'>    <b>int</b> haslf = 0;
<a name='L1254'>    <b>int</b> needflush = 0;
<a name='L1255'>
<a name='L1256'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L1257'>
<a name='L1258'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "U:write", &amp;text)) <font color='red'>{</font>
<a name='L1259'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1260'>    <font color='red'>}</font>
<a name='L1261'>
<a name='L1262'>    <a href='../D/521.html' title='Multiple defined in 4 places.'>CHECK_CLOSED</a>(self);
<a name='L1263'>
<a name='L1264'>    <b>if</b> (self-&gt;encoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1265'>        <b>return</b> <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("not writable");
<a name='L1266'>
<a name='L1267'>    Py_INCREF(text);
<a name='L1268'>
<a name='L1269'>    textlen = <a href='../D/4020.html' title='Multiple defined in 3 places.'>PyUnicode_GetSize</a>(text);
<a name='L1270'>
<a name='L1271'>    <b>if</b> ((self-&gt;writetranslate &amp;&amp; self-&gt;writenl != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) || self-&gt;line_buffering)
<a name='L1272'>        <b>if</b> (<a href='../D/8607.html' title='Multiple defined in 2 places.'>findchar</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L1273'>                     <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text), '\n'))
<a name='L1274'>            haslf = 1;
<a name='L1275'>
<a name='L1276'>    <b>if</b> (haslf &amp;&amp; self-&gt;writetranslate &amp;&amp; self-&gt;writenl != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1277'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *newtext = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(
<a name='L1278'>            text, "replace", "ss", "\n", self-&gt;writenl);
<a name='L1279'>        Py_DECREF(text);
<a name='L1280'>        <b>if</b> (newtext == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1281'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1282'>        text = newtext;
<a name='L1283'>    <font color='red'>}</font>
<a name='L1284'>
<a name='L1285'>    <b>if</b> (self-&gt;line_buffering &amp;&amp;
<a name='L1286'>        (haslf ||
<a name='L1287'>         <a href='../D/8607.html' title='Multiple defined in 2 places.'>findchar</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(text),
<a name='L1288'>                  <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(text), '\r')))
<a name='L1289'>        needflush = 1;
<a name='L1290'>
<a name='L1291'>    <i><font color='green'>/* XXX What if we were just reading? */</font></i>
<a name='L1292'>    <b>if</b> (self-&gt;encodefunc != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1293'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = (*self-&gt;encodefunc)((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) self, text);
<a name='L1294'>        self-&gt;encoding_start_of_stream = 0;
<a name='L1295'>    <font color='red'>}</font>
<a name='L1296'>    <b>else</b>
<a name='L1297'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;encoder,
<a name='L1298'>                                       _PyIO_str_encode, text, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1299'>    Py_DECREF(text);
<a name='L1300'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1301'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1302'>
<a name='L1303'>    <b>if</b> (self-&gt;pending_bytes == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1304'>        self-&gt;pending_bytes = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0);
<a name='L1305'>        <b>if</b> (self-&gt;pending_bytes == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1306'>            Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1307'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1308'>        <font color='red'>}</font>
<a name='L1309'>        self-&gt;pending_bytes_count = 0;
<a name='L1310'>    <font color='red'>}</font>
<a name='L1311'>    <b>if</b> (<a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(self-&gt;pending_bytes, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0) <font color='red'>{</font>
<a name='L1312'>        Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1313'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1314'>    <font color='red'>}</font>
<a name='L1315'>    self-&gt;pending_bytes_count += PyBytes_GET_SIZE(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1316'>    Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1317'>    <b>if</b> (self-&gt;pending_bytes_count &gt; self-&gt;chunk_size || needflush) <font color='red'>{</font>
<a name='L1318'>        <b>if</b> (<a href='../S/2575.html#L1221' title='Defined at 1221 in Modules/_io/textio.c.'>_textiowrapper_writeflush</a>(self) &lt; 0)
<a name='L1319'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1320'>    <font color='red'>}</font>
<a name='L1321'>
<a name='L1322'>    <b>if</b> (needflush) <font color='red'>{</font>
<a name='L1323'>        ret = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, _PyIO_str_flush, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1324'>        <b>if</b> (ret == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1325'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1326'>        Py_DECREF(ret);
<a name='L1327'>    <font color='red'>}</font>
<a name='L1328'>
<a name='L1329'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L1330'>
<a name='L1331'>    <b>if</b> (self-&gt;decoder) <font color='red'>{</font>
<a name='L1332'>        ret = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;decoder, "reset", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1333'>        <b>if</b> (ret == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1334'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1335'>        Py_DECREF(ret);
<a name='L1336'>    <font color='red'>}</font>
<a name='L1337'>
<a name='L1338'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(textlen);
<a name='L1339'><font color='red'>}</font>
<a name='L1340'>
<a name='L1341'><i><font color='green'>/* Steal a reference to chars and store it in the decoded_char buffer;</font></i>
<a name='L1342'><i><font color='green'> */</font></i>
<a name='L1343'><b>static</b> <b>void</b>
<a name='L1344'><a href='../R/10862.html' title='Multiple refered from 6 places.'>textiowrapper_set_decoded_chars</a>(textio *self, PyObject *chars)
<a name='L1345'><font color='red'>{</font>
<a name='L1346'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;decoded_chars);
<a name='L1347'>    self-&gt;decoded_chars = chars;
<a name='L1348'>    self-&gt;decoded_chars_used = 0;
<a name='L1349'><font color='red'>}</font>
<a name='L1350'>
<a name='L1351'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1352'><a href='../R/10847.html' title='Multiple refered from 3 places.'>textiowrapper_get_decoded_chars</a>(textio *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n)
<a name='L1353'><font color='red'>{</font>
<a name='L1354'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *chars;
<a name='L1355'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> avail;
<a name='L1356'>
<a name='L1357'>    <b>if</b> (self-&gt;decoded_chars == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1358'>        <b>return</b> <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L1359'>
<a name='L1360'>    avail = (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self-&gt;decoded_chars)
<a name='L1361'>             - self-&gt;decoded_chars_used);
<a name='L1362'>
<a name='L1363'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(avail &gt;= 0);
<a name='L1364'>
<a name='L1365'>    <b>if</b> (n &lt; 0 || n &gt; avail)
<a name='L1366'>        n = avail;
<a name='L1367'>
<a name='L1368'>    <b>if</b> (self-&gt;decoded_chars_used &gt; 0 || n &lt; avail) <font color='red'>{</font>
<a name='L1369'>        chars = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(
<a name='L1370'>            <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self-&gt;decoded_chars)
<a name='L1371'>            + self-&gt;decoded_chars_used, n);
<a name='L1372'>        <b>if</b> (chars == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1373'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1374'>    <font color='red'>}</font>
<a name='L1375'>    <b>else</b> <font color='red'>{</font>
<a name='L1376'>        chars = self-&gt;decoded_chars;
<a name='L1377'>        Py_INCREF(chars);
<a name='L1378'>    <font color='red'>}</font>
<a name='L1379'>
<a name='L1380'>    self-&gt;decoded_chars_used += n;
<a name='L1381'>    <b>return</b> chars;
<a name='L1382'><font color='red'>}</font>
<a name='L1383'>
<a name='L1384'><i><font color='green'>/* Read and decode the next chunk of data from the BufferedReader.</font></i>
<a name='L1385'><i><font color='green'> */</font></i>
<a name='L1386'><b>static</b> <b>int</b>
<a name='L1387'><a href='../R/10856.html' title='Multiple refered from 2 places.'>textiowrapper_read_chunk</a>(textio *self)
<a name='L1388'><font color='red'>{</font>
<a name='L1389'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dec_buffer = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1390'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dec_flags = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1391'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *input_chunk = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1392'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoded_chars, *chunk_size;
<a name='L1393'>    <b>int</b> eof;
<a name='L1394'>
<a name='L1395'>    <i><font color='green'>/* The return value is True unless EOF was reached.  The decoded string is</font></i>
<a name='L1396'><i><font color='green'>     * placed in self._decoded_chars (replacing its previous value).  The</font></i>
<a name='L1397'><i><font color='green'>     * entire input chunk is sent to the decoder, though some of it may remain</font></i>
<a name='L1398'><i><font color='green'>     * buffered in the decoder, yet to be converted.</font></i>
<a name='L1399'><i><font color='green'>     */</font></i>
<a name='L1400'>
<a name='L1401'>    <b>if</b> (self-&gt;decoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1402'>        <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("not readable");
<a name='L1403'>        <b>return</b> -1;
<a name='L1404'>    <font color='red'>}</font>
<a name='L1405'>
<a name='L1406'>    <b>if</b> (self-&gt;telling) <font color='red'>{</font>
<a name='L1407'>        <i><font color='green'>/* To prepare for tell(), we need to snapshot a point in the file</font></i>
<a name='L1408'><i><font color='green'>         * where the decoder's input buffer is empty.</font></i>
<a name='L1409'><i><font color='green'>         */</font></i>
<a name='L1410'>
<a name='L1411'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder,
<a name='L1412'>                                                     _PyIO_str_getstate, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1413'>        <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1414'>            <b>return</b> -1;
<a name='L1415'>        <i><font color='green'>/* Given this, we know there was a valid snapshot point</font></i>
<a name='L1416'><i><font color='green'>         * len(dec_buffer) bytes ago with decoder state (b'', dec_flags).</font></i>
<a name='L1417'><i><font color='green'>         */</font></i>
<a name='L1418'>        <b>if</b> (<a href='../S/541.html#L15' title='Defined at 15 in Include/modsupport.h.'>PyArg_Parse</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, "(OO)", &amp;dec_buffer, &amp;dec_flags) &lt; 0) <font color='red'>{</font>
<a name='L1419'>            Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L1420'>            <b>return</b> -1;
<a name='L1421'>        <font color='red'>}</font>
<a name='L1422'>        Py_INCREF(dec_buffer);
<a name='L1423'>        Py_INCREF(dec_flags);
<a name='L1424'>        Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L1425'>    <font color='red'>}</font>
<a name='L1426'>
<a name='L1427'>    <i><font color='green'>/* Read a chunk, decode it, and put the result in self._decoded_chars. */</font></i>
<a name='L1428'>    chunk_size = <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(self-&gt;chunk_size);
<a name='L1429'>    <b>if</b> (chunk_size == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1430'>        <b>goto</b> fail;
<a name='L1431'>    input_chunk = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>,
<a name='L1432'>        _PyIO_str_read1, chunk_size, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1433'>    Py_DECREF(chunk_size);
<a name='L1434'>    <b>if</b> (input_chunk == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1435'>        <b>goto</b> fail;
<a name='L1436'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyBytes_Check(input_chunk));
<a name='L1437'>
<a name='L1438'>    eof = (<a href='../S/2779.html#L506' title='Defined at 506 in Objects/bytesobject.c.'>PyBytes_Size</a>(input_chunk) == 0);
<a name='L1439'>
<a name='L1440'>    <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self-&gt;decoder) == &amp;PyIncrementalNewlineDecoder_Type) <font color='red'>{</font>
<a name='L1441'>        decoded_chars = <a href='../S/2575.html#L245' title='Defined at 245 in Modules/_io/textio.c.'>_PyIncrementalNewlineDecoder_decode</a>(
<a name='L1442'>            self-&gt;decoder, input_chunk, eof);
<a name='L1443'>    <font color='red'>}</font>
<a name='L1444'>    <b>else</b> <font color='red'>{</font>
<a name='L1445'>        decoded_chars = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder,
<a name='L1446'>            _PyIO_str_decode, input_chunk, eof ? Py_True : Py_False, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1447'>    <font color='red'>}</font>
<a name='L1448'>
<a name='L1449'>    <i><font color='green'>/* TODO sanity check: isinstance(decoded_chars, unicode) */</font></i>
<a name='L1450'>    <b>if</b> (decoded_chars == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1451'>        <b>goto</b> fail;
<a name='L1452'>    <a href='../S/2575.html#L1344' title='Defined at 1344 in Modules/_io/textio.c.'>textiowrapper_set_decoded_chars</a>(self, decoded_chars);
<a name='L1453'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(decoded_chars) &gt; 0)
<a name='L1454'>        eof = 0;
<a name='L1455'>
<a name='L1456'>    <b>if</b> (self-&gt;telling) <font color='red'>{</font>
<a name='L1457'>        <i><font color='green'>/* At the snapshot point, len(dec_buffer) bytes before the read, the</font></i>
<a name='L1458'><i><font color='green'>         * next input to be decoded is dec_buffer + input_chunk.</font></i>
<a name='L1459'><i><font color='green'>         */</font></i>
<a name='L1460'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *next_input = PyNumber_Add(dec_buffer, input_chunk);
<a name='L1461'>        <b>if</b> (next_input == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1462'>            <b>goto</b> fail;
<a name='L1463'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> (PyBytes_Check(next_input));
<a name='L1464'>        Py_DECREF(dec_buffer);
<a name='L1465'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L1466'>        self-&gt;snapshot = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("NN", dec_flags, next_input);
<a name='L1467'>    <font color='red'>}</font>
<a name='L1468'>    Py_DECREF(input_chunk);
<a name='L1469'>
<a name='L1470'>    <b>return</b> (eof == 0);
<a name='L1471'>
<a name='L1472'>  fail:
<a name='L1473'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(dec_buffer);
<a name='L1474'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(dec_flags);
<a name='L1475'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(input_chunk);
<a name='L1476'>    <b>return</b> -1;
<a name='L1477'><font color='red'>}</font>
<a name='L1478'>
<a name='L1479'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1480'><a href='../S/2575.html#L2574' title='Refered from 2574 in Modules/_io/textio.c.'>textiowrapper_read</a>(textio *self, PyObject *args)
<a name='L1481'><font color='red'>{</font>
<a name='L1482'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = -1;
<a name='L1483'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *chunks = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1484'>
<a name='L1485'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L1486'>
<a name='L1487'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|O&amp;:read", &amp;<a href='../S/2568.html#L580' title='Defined at 580 in Modules/_io/_iomodule.c.'>_PyIO_ConvertSsize_t</a>, &amp;n))
<a name='L1488'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1489'>
<a name='L1490'>    <a href='../D/521.html' title='Multiple defined in 4 places.'>CHECK_CLOSED</a>(self);
<a name='L1491'>
<a name='L1492'>    <b>if</b> (self-&gt;decoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1493'>        <b>return</b> <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("not readable");
<a name='L1494'>
<a name='L1495'>    <b>if</b> (<a href='../S/2575.html#L1221' title='Defined at 1221 in Modules/_io/textio.c.'>_textiowrapper_writeflush</a>(self) &lt; 0)
<a name='L1496'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1497'>
<a name='L1498'>    <b>if</b> (n &lt; 0) <font color='red'>{</font>
<a name='L1499'>        <i><font color='green'>/* Read everything */</font></i>
<a name='L1500'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "read", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1501'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoded;
<a name='L1502'>        <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1503'>            <b>goto</b> fail;
<a name='L1504'>        decoded = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder, _PyIO_str_decode,
<a name='L1505'>                                             <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>, Py_True, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1506'>        Py_DECREF(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L1507'>        <b>if</b> (decoded == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1508'>            <b>goto</b> fail;
<a name='L1509'>
<a name='L1510'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2575.html#L1352' title='Defined at 1352 in Modules/_io/textio.c.'>textiowrapper_get_decoded_chars</a>(self, -1);
<a name='L1511'>
<a name='L1512'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1513'>            Py_DECREF(decoded);
<a name='L1514'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1515'>        <font color='red'>}</font>
<a name='L1516'>
<a name='L1517'>        <a href='../D/3946.html' title='Multiple defined in 3 places.'>PyUnicode_AppendAndDel</a>(&amp;<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, decoded);
<a name='L1518'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1519'>            <b>goto</b> fail;
<a name='L1520'>
<a name='L1521'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L1522'>        <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1523'>    <font color='red'>}</font>
<a name='L1524'>    <b>else</b> <font color='red'>{</font>
<a name='L1525'>        <b>int</b> res = 1;
<a name='L1526'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> remaining = n;
<a name='L1527'>
<a name='L1528'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2575.html#L1352' title='Defined at 1352 in Modules/_io/textio.c.'>textiowrapper_get_decoded_chars</a>(self, n);
<a name='L1529'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1530'>            <b>goto</b> fail;
<a name='L1531'>        remaining -= <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1532'>
<a name='L1533'>        <i><font color='green'>/* Keep reading chunks until we have n characters to return */</font></i>
<a name='L1534'>        <b>while</b> (remaining &gt; 0) <font color='red'>{</font>
<a name='L1535'>            res = <a href='../S/2575.html#L1387' title='Defined at 1387 in Modules/_io/textio.c.'>textiowrapper_read_chunk</a>(self);
<a name='L1536'>            <b>if</b> (res &lt; 0)
<a name='L1537'>                <b>goto</b> fail;
<a name='L1538'>            <b>if</b> (res == 0)  <i><font color='green'>/* EOF */</font></i>
<a name='L1539'>                <b>break</b>;
<a name='L1540'>            <b>if</b> (chunks == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1541'>                chunks = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0);
<a name='L1542'>                <b>if</b> (chunks == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1543'>                    <b>goto</b> fail;
<a name='L1544'>            <font color='red'>}</font>
<a name='L1545'>            <b>if</b> (<a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(chunks, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) &lt; 0)
<a name='L1546'>                <b>goto</b> fail;
<a name='L1547'>            Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1548'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2575.html#L1352' title='Defined at 1352 in Modules/_io/textio.c.'>textiowrapper_get_decoded_chars</a>(self, remaining);
<a name='L1549'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1550'>                <b>goto</b> fail;
<a name='L1551'>            remaining -= <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1552'>        <font color='red'>}</font>
<a name='L1553'>        <b>if</b> (chunks != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1554'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(chunks, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) &lt; 0)
<a name='L1555'>                <b>goto</b> fail;
<a name='L1556'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1557'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/4025.html' title='Multiple defined in 3 places.'>PyUnicode_Join</a>(_PyIO_empty_str, chunks);
<a name='L1558'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1559'>                <b>goto</b> fail;
<a name='L1560'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(chunks);
<a name='L1561'>        <font color='red'>}</font>
<a name='L1562'>        <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1563'>    <font color='red'>}</font>
<a name='L1564'>  fail:
<a name='L1565'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1566'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(chunks);
<a name='L1567'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1568'><font color='red'>}</font>
<a name='L1569'>
<a name='L1570'>
<a name='L1571'><i><font color='green'>/* NOTE: `end` must point to the real end of the Py_UNICODE storage,</font></i>
<a name='L1572'><i><font color='green'>   that is to the NUL character. Otherwise the function will produce</font></i>
<a name='L1573'><i><font color='green'>   incorrect results. */</font></i>
<a name='L1574'><b>static</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *
<a name='L1575'><a href='../R/7798.html' title='Multiple refered from 4 places.'>find_control_char</a>(Py_UNICODE *start, Py_UNICODE *end, Py_UNICODE ch)
<a name='L1576'><font color='red'>{</font>
<a name='L1577'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = start;
<a name='L1578'>    <b>for</b> (;;) <font color='red'>{</font>
<a name='L1579'>        <b>while</b> (*s &gt; ch)
<a name='L1580'>            s++;
<a name='L1581'>        <b>if</b> (*s == ch)
<a name='L1582'>            <b>return</b> s;
<a name='L1583'>        <b>if</b> (s == end)
<a name='L1584'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1585'>        s++;
<a name='L1586'>    <font color='red'>}</font>
<a name='L1587'><font color='red'>}</font>
<a name='L1588'>
<a name='L1589'><a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L1590'><a href='../R/5420.html' title='Multiple refered from 3 places.'>_PyIO_find_line_ending</a>(
<a name='L1591'>    <b>int</b> translated, <b>int</b> universal, PyObject *readnl,
<a name='L1592'>    Py_UNICODE *start, Py_UNICODE *end, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *consumed)
<a name='L1593'><font color='red'>{</font>
<a name='L1594'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = end - start;
<a name='L1595'>
<a name='L1596'>    <b>if</b> (translated) <font color='red'>{</font>
<a name='L1597'>        <i><font color='green'>/* Newlines are already translated, only search for \n */</font></i>
<a name='L1598'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *pos = <a href='../S/2575.html#L1575' title='Defined at 1575 in Modules/_io/textio.c.'>find_control_char</a>(start, end, '\n');
<a name='L1599'>        <b>if</b> (pos != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1600'>            <b>return</b> pos - start + 1;
<a name='L1601'>        <b>else</b> <font color='red'>{</font>
<a name='L1602'>            *consumed = len;
<a name='L1603'>            <b>return</b> -1;
<a name='L1604'>        <font color='red'>}</font>
<a name='L1605'>    <font color='red'>}</font>
<a name='L1606'>    <b>else</b> <b>if</b> (universal) <font color='red'>{</font>
<a name='L1607'>        <i><font color='green'>/* Universal newline search. Find any of \r, \r\n, \n</font></i>
<a name='L1608'><i><font color='green'>         * The decoder ensures that \r\n are not split in two pieces</font></i>
<a name='L1609'><i><font color='green'>         */</font></i>
<a name='L1610'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = start;
<a name='L1611'>        <b>for</b> (;;) <font color='red'>{</font>
<a name='L1612'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch;
<a name='L1613'>            <i><font color='green'>/* Fast path for non-control chars. The loop always ends</font></i>
<a name='L1614'><i><font color='green'>               since the Py_UNICODE storage is NUL-terminated. */</font></i>
<a name='L1615'>            <b>while</b> (*s &gt; '\r')
<a name='L1616'>                s++;
<a name='L1617'>            <b>if</b> (s &gt;= end) <font color='red'>{</font>
<a name='L1618'>                *consumed = len;
<a name='L1619'>                <b>return</b> -1;
<a name='L1620'>            <font color='red'>}</font>
<a name='L1621'>            ch = *s++;
<a name='L1622'>            <b>if</b> (ch == '\n')
<a name='L1623'>                <b>return</b> s - start;
<a name='L1624'>            <b>if</b> (ch == '\r') <font color='red'>{</font>
<a name='L1625'>                <b>if</b> (*s == '\n')
<a name='L1626'>                    <b>return</b> s - start + 1;
<a name='L1627'>                <b>else</b>
<a name='L1628'>                    <b>return</b> s - start;
<a name='L1629'>            <font color='red'>}</font>
<a name='L1630'>        <font color='red'>}</font>
<a name='L1631'>    <font color='red'>}</font>
<a name='L1632'>    <b>else</b> <font color='red'>{</font>
<a name='L1633'>        <i><font color='green'>/* Non-universal mode. */</font></i>
<a name='L1634'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> readnl_len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(readnl);
<a name='L1635'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *nl = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(readnl);
<a name='L1636'>        <b>if</b> (readnl_len == 1) <font color='red'>{</font>
<a name='L1637'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *pos = <a href='../S/2575.html#L1575' title='Defined at 1575 in Modules/_io/textio.c.'>find_control_char</a>(start, end, nl[0]);
<a name='L1638'>            <b>if</b> (pos != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1639'>                <b>return</b> pos - start + 1;
<a name='L1640'>            *consumed = len;
<a name='L1641'>            <b>return</b> -1;
<a name='L1642'>        <font color='red'>}</font>
<a name='L1643'>        <b>else</b> <font color='red'>{</font>
<a name='L1644'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = start;
<a name='L1645'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e = end - readnl_len + 1;
<a name='L1646'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *pos;
<a name='L1647'>            <b>if</b> (e &lt; s)
<a name='L1648'>                e = s;
<a name='L1649'>            <b>while</b> (s &lt; e) <font color='red'>{</font>
<a name='L1650'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1651'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *pos = <a href='../S/2575.html#L1575' title='Defined at 1575 in Modules/_io/textio.c.'>find_control_char</a>(s, end, nl[0]);
<a name='L1652'>                <b>if</b> (pos == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || pos &gt;= e)
<a name='L1653'>                    <b>break</b>;
<a name='L1654'>                <b>for</b> (i = 1; i &lt; readnl_len; i++) <font color='red'>{</font>
<a name='L1655'>                    <b>if</b> (pos[i] != nl[i])
<a name='L1656'>                        <b>break</b>;
<a name='L1657'>                <font color='red'>}</font>
<a name='L1658'>                <b>if</b> (i == readnl_len)
<a name='L1659'>                    <b>return</b> pos - start + readnl_len;
<a name='L1660'>                s = pos + 1;
<a name='L1661'>            <font color='red'>}</font>
<a name='L1662'>            pos = <a href='../S/2575.html#L1575' title='Defined at 1575 in Modules/_io/textio.c.'>find_control_char</a>(e, end, nl[0]);
<a name='L1663'>            <b>if</b> (pos == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1664'>                *consumed = len;
<a name='L1665'>            <b>else</b>
<a name='L1666'>                *consumed = pos - start;
<a name='L1667'>            <b>return</b> -1;
<a name='L1668'>        <font color='red'>}</font>
<a name='L1669'>    <font color='red'>}</font>
<a name='L1670'><font color='red'>}</font>
<a name='L1671'>
<a name='L1672'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1673'><a href='../R/5867.html' title='Multiple refered from 2 places.'>_textiowrapper_readline</a>(textio *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> limit)
<a name='L1674'><font color='red'>{</font>
<a name='L1675'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *line = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *chunks = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *remaining = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1676'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start, endpos, chunked, offset_to_buffer;
<a name='L1677'>    <b>int</b> res;
<a name='L1678'>
<a name='L1679'>    <a href='../D/521.html' title='Multiple defined in 4 places.'>CHECK_CLOSED</a>(self);
<a name='L1680'>
<a name='L1681'>    <b>if</b> (<a href='../S/2575.html#L1221' title='Defined at 1221 in Modules/_io/textio.c.'>_textiowrapper_writeflush</a>(self) &lt; 0)
<a name='L1682'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1683'>
<a name='L1684'>    chunked = 0;
<a name='L1685'>
<a name='L1686'>    <b>while</b> (1) <font color='red'>{</font>
<a name='L1687'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *ptr;
<a name='L1688'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> line_len;
<a name='L1689'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> consumed = 0;
<a name='L1690'>
<a name='L1691'>        <i><font color='green'>/* First, get some data if necessary */</font></i>
<a name='L1692'>        res = 1;
<a name='L1693'>        <b>while</b> (!self-&gt;decoded_chars ||
<a name='L1694'>               !<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self-&gt;decoded_chars)) <font color='red'>{</font>
<a name='L1695'>            res = <a href='../S/2575.html#L1387' title='Defined at 1387 in Modules/_io/textio.c.'>textiowrapper_read_chunk</a>(self);
<a name='L1696'>            <b>if</b> (res &lt; 0)
<a name='L1697'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1698'>            <b>if</b> (res == 0)
<a name='L1699'>                <b>break</b>;
<a name='L1700'>        <font color='red'>}</font>
<a name='L1701'>        <b>if</b> (res == 0) <font color='red'>{</font>
<a name='L1702'>            <i><font color='green'>/* end of file */</font></i>
<a name='L1703'>            <a href='../S/2575.html#L1344' title='Defined at 1344 in Modules/_io/textio.c.'>textiowrapper_set_decoded_chars</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1704'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L1705'>            start = endpos = offset_to_buffer = 0;
<a name='L1706'>            <b>break</b>;
<a name='L1707'>        <font color='red'>}</font>
<a name='L1708'>
<a name='L1709'>        <b>if</b> (remaining == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1710'>            line = self-&gt;decoded_chars;
<a name='L1711'>            start = self-&gt;decoded_chars_used;
<a name='L1712'>            offset_to_buffer = 0;
<a name='L1713'>            Py_INCREF(line);
<a name='L1714'>        <font color='red'>}</font>
<a name='L1715'>        <b>else</b> <font color='red'>{</font>
<a name='L1716'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;decoded_chars_used == 0);
<a name='L1717'>            line = <a href='../D/3969.html' title='Multiple defined in 3 places.'>PyUnicode_Concat</a>(remaining, self-&gt;decoded_chars);
<a name='L1718'>            start = 0;
<a name='L1719'>            offset_to_buffer = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(remaining);
<a name='L1720'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(remaining);
<a name='L1721'>            <b>if</b> (line == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1722'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1723'>        <font color='red'>}</font>
<a name='L1724'>
<a name='L1725'>        ptr = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(line);
<a name='L1726'>        line_len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(line);
<a name='L1727'>
<a name='L1728'>        endpos = <a href='../S/2575.html#L1590' title='Defined at 1590 in Modules/_io/textio.c.'>_PyIO_find_line_ending</a>(
<a name='L1729'>            self-&gt;readtranslate, self-&gt;readuniversal, self-&gt;readnl,
<a name='L1730'>            ptr + start, ptr + line_len, &amp;consumed);
<a name='L1731'>        <b>if</b> (endpos &gt;= 0) <font color='red'>{</font>
<a name='L1732'>            endpos += start;
<a name='L1733'>            <b>if</b> (limit &gt;= 0 &amp;&amp; (endpos - start) + chunked &gt;= limit)
<a name='L1734'>                endpos = start + limit - chunked;
<a name='L1735'>            <b>break</b>;
<a name='L1736'>        <font color='red'>}</font>
<a name='L1737'>
<a name='L1738'>        <i><font color='green'>/* We can put aside up to `endpos` */</font></i>
<a name='L1739'>        endpos = consumed + start;
<a name='L1740'>        <b>if</b> (limit &gt;= 0 &amp;&amp; (endpos - start) + chunked &gt;= limit) <font color='red'>{</font>
<a name='L1741'>            <i><font color='green'>/* Didn't find line ending, but reached length limit */</font></i>
<a name='L1742'>            endpos = start + limit - chunked;
<a name='L1743'>            <b>break</b>;
<a name='L1744'>        <font color='red'>}</font>
<a name='L1745'>
<a name='L1746'>        <b>if</b> (endpos &gt; start) <font color='red'>{</font>
<a name='L1747'>            <i><font color='green'>/* No line ending seen yet - put aside current data */</font></i>
<a name='L1748'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s;
<a name='L1749'>            <b>if</b> (chunks == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1750'>                chunks = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0);
<a name='L1751'>                <b>if</b> (chunks == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1752'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1753'>            <font color='red'>}</font>
<a name='L1754'>            s = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(ptr + start, endpos - start);
<a name='L1755'>            <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1756'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1757'>            <b>if</b> (<a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(chunks, s) &lt; 0) <font color='red'>{</font>
<a name='L1758'>                Py_DECREF(s);
<a name='L1759'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1760'>            <font color='red'>}</font>
<a name='L1761'>            chunked += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(s);
<a name='L1762'>            Py_DECREF(s);
<a name='L1763'>        <font color='red'>}</font>
<a name='L1764'>        <i><font color='green'>/* There may be some remaining bytes we'll have to prepend to the</font></i>
<a name='L1765'><i><font color='green'>           next chunk of data */</font></i>
<a name='L1766'>        <b>if</b> (endpos &lt; line_len) <font color='red'>{</font>
<a name='L1767'>            remaining = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(
<a name='L1768'>                    ptr + endpos, line_len - endpos);
<a name='L1769'>            <b>if</b> (remaining == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1770'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1771'>        <font color='red'>}</font>
<a name='L1772'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(line);
<a name='L1773'>        <i><font color='green'>/* We have consumed the buffer */</font></i>
<a name='L1774'>        <a href='../S/2575.html#L1344' title='Defined at 1344 in Modules/_io/textio.c.'>textiowrapper_set_decoded_chars</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1775'>    <font color='red'>}</font>
<a name='L1776'>
<a name='L1777'>    <b>if</b> (line != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1778'>        <i><font color='green'>/* Our line ends in the current buffer */</font></i>
<a name='L1779'>        self-&gt;decoded_chars_used = endpos - offset_to_buffer;
<a name='L1780'>        <b>if</b> (start &gt; 0 || endpos &lt; <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(line)) <font color='red'>{</font>
<a name='L1781'>            <b>if</b> (start == 0 &amp;&amp; <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(line) == 1) <font color='red'>{</font>
<a name='L1782'>                <b>if</b> (<a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(&amp;line, endpos) &lt; 0)
<a name='L1783'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1784'>            <font color='red'>}</font>
<a name='L1785'>            <b>else</b> <font color='red'>{</font>
<a name='L1786'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(
<a name='L1787'>                        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(line) + start, endpos - start);
<a name='L1788'>                <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(line);
<a name='L1789'>                <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1790'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1791'>                line = s;
<a name='L1792'>            <font color='red'>}</font>
<a name='L1793'>        <font color='red'>}</font>
<a name='L1794'>    <font color='red'>}</font>
<a name='L1795'>    <b>if</b> (remaining != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1796'>        <b>if</b> (chunks == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1797'>            chunks = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0);
<a name='L1798'>            <b>if</b> (chunks == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1799'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1800'>        <font color='red'>}</font>
<a name='L1801'>        <b>if</b> (<a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(chunks, remaining) &lt; 0)
<a name='L1802'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1803'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(remaining);
<a name='L1804'>    <font color='red'>}</font>
<a name='L1805'>    <b>if</b> (chunks != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1806'>        <b>if</b> (line != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(chunks, line) &lt; 0)
<a name='L1807'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1808'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(line);
<a name='L1809'>        line = <a href='../D/4025.html' title='Multiple defined in 3 places.'>PyUnicode_Join</a>(_PyIO_empty_str, chunks);
<a name='L1810'>        <b>if</b> (line == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1811'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1812'>        Py_DECREF(chunks);
<a name='L1813'>    <font color='red'>}</font>
<a name='L1814'>    <b>if</b> (line == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1815'>        line = <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L1816'>
<a name='L1817'>    <b>return</b> line;
<a name='L1818'>
<a name='L1819'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1820'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(chunks);
<a name='L1821'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(remaining);
<a name='L1822'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(line);
<a name='L1823'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1824'><font color='red'>}</font>
<a name='L1825'>
<a name='L1826'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1827'><a href='../S/2575.html#L2575' title='Refered from 2575 in Modules/_io/textio.c.'>textiowrapper_readline</a>(textio *self, PyObject *args)
<a name='L1828'><font color='red'>{</font>
<a name='L1829'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> limit = -1;
<a name='L1830'>
<a name='L1831'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L1832'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|n:readline", &amp;limit)) <font color='red'>{</font>
<a name='L1833'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1834'>    <font color='red'>}</font>
<a name='L1835'>    <b>return</b> <a href='../S/2575.html#L1673' title='Defined at 1673 in Modules/_io/textio.c.'>_textiowrapper_readline</a>(self, limit);
<a name='L1836'><font color='red'>}</font>
<a name='L1837'>
<a name='L1838'><i><font color='green'>/* Seek and Tell */</font></i>
<a name='L1839'>
<a name='L1840'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L1841'>    <a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a> start_pos;
<a name='L1842'>    <b>int</b> dec_flags;
<a name='L1843'>    <b>int</b> bytes_to_feed;
<a name='L1844'>    <b>int</b> chars_to_skip;
<a name='L1845'>    <b>char</b> need_eof;
<a name='L1846'><font color='red'>}</font> <a href='../R/7011.html' title='Multiple refered from 2 places.'>cookie_type</a>;
<a name='L1847'>
<a name='L1848'><i><font color='green'>/*</font></i>
<a name='L1849'><i><font color='green'>   To speed up cookie packing/unpacking, we store the fields in a temporary</font></i>
<a name='L1850'><i><font color='green'>   string and call _PyLong_FromByteArray() or _PyLong_AsByteArray (resp.).</font></i>
<a name='L1851'><i><font color='green'>   The following macros define at which offsets in the intermediary byte</font></i>
<a name='L1852'><i><font color='green'>   string the various CookieStruct fields will be stored.</font></i>
<a name='L1853'><i><font color='green'> */</font></i>
<a name='L1854'>
<a name='L1855'><font color='darkred'>#define</font> <a href='../R/582.html' title='Multiple refered from 2 places.'>COOKIE_BUF_LEN</a>      (<b>sizeof</b>(<a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a>) + 3 * <b>sizeof</b>(<b>int</b>) + <b>sizeof</b>(<b>char</b>))
<a name='L1856'>
<a name='L1857'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/5540.html' title='Multiple defined in 8 places.'>WORDS_BIGENDIAN</a>)
<a name='L1858'>
<a name='L1859'><font color='darkred'># define</font> <a href='../R/1595.html' title='Multiple refered from 4 places.'>IS_LITTLE_ENDIAN</a>   0
<a name='L1860'>
<a name='L1861'><i><font color='green'>/* We want the least significant byte of start_pos to also be the least</font></i>
<a name='L1862'><i><font color='green'>   significant byte of the cookie, which means that in big-endian mode we</font></i>
<a name='L1863'><i><font color='green'>   must copy the fields in reverse order. */</font></i>
<a name='L1864'>
<a name='L1865'><font color='darkred'># define</font> <a href='../R/2181.html' title='Multiple refered from 2 places.'>OFF_START_POS</a>      (<b>sizeof</b>(<b>char</b>) + 3 * <b>sizeof</b>(<b>int</b>))
<a name='L1866'><font color='darkred'># define</font> <a href='../R/2179.html' title='Multiple refered from 2 places.'>OFF_DEC_FLAGS</a>      (<b>sizeof</b>(<b>char</b>) + 2 * <b>sizeof</b>(<b>int</b>))
<a name='L1867'><font color='darkred'># define</font> <a href='../R/2177.html' title='Multiple refered from 2 places.'>OFF_BYTES_TO_FEED</a>  (<b>sizeof</b>(<b>char</b>) + <b>sizeof</b>(<b>int</b>))
<a name='L1868'><font color='darkred'># define</font> <a href='../R/2178.html' title='Multiple refered from 2 places.'>OFF_CHARS_TO_SKIP</a>  (<b>sizeof</b>(<b>char</b>))
<a name='L1869'><font color='darkred'># define</font> <a href='../R/2180.html' title='Multiple refered from 2 places.'>OFF_NEED_EOF</a>       0
<a name='L1870'>
<a name='L1871'><font color='darkred'>#else</font>
<a name='L1872'>
<a name='L1873'><font color='darkred'># define</font> <a href='../R/1595.html' title='Multiple refered from 4 places.'>IS_LITTLE_ENDIAN</a>   1
<a name='L1874'>
<a name='L1875'><i><font color='green'>/* Little-endian mode: the least significant byte of start_pos will</font></i>
<a name='L1876'><i><font color='green'>   naturally end up the least significant byte of the cookie. */</font></i>
<a name='L1877'>
<a name='L1878'><font color='darkred'># define</font> <a href='../R/2181.html' title='Multiple refered from 2 places.'>OFF_START_POS</a>      0
<a name='L1879'><font color='darkred'># define</font> <a href='../R/2179.html' title='Multiple refered from 2 places.'>OFF_DEC_FLAGS</a>      (<b>sizeof</b>(<a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a>))
<a name='L1880'><font color='darkred'># define</font> <a href='../R/2177.html' title='Multiple refered from 2 places.'>OFF_BYTES_TO_FEED</a>  (<b>sizeof</b>(<a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a>) + <b>sizeof</b>(<b>int</b>))
<a name='L1881'><font color='darkred'># define</font> <a href='../R/2178.html' title='Multiple refered from 2 places.'>OFF_CHARS_TO_SKIP</a>  (<b>sizeof</b>(<a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a>) + 2 * <b>sizeof</b>(<b>int</b>))
<a name='L1882'><font color='darkred'># define</font> <a href='../R/2180.html' title='Multiple refered from 2 places.'>OFF_NEED_EOF</a>       (<b>sizeof</b>(<a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a>) + 3 * <b>sizeof</b>(<b>int</b>))
<a name='L1883'>
<a name='L1884'><font color='darkred'>#endif</font>
<a name='L1885'>
<a name='L1886'><b>static</b> <b>int</b>
<a name='L1887'><a href='../S/2575.html#L2061' title='Refered from 2061 in Modules/_io/textio.c.'>textiowrapper_parse_cookie</a>(cookie_type *cookie, PyObject *cookieObj)
<a name='L1888'><font color='red'>{</font>
<a name='L1889'>    <b>unsigned</b> <b>char</b> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[<a href='../S/2575.html#L1855' title='Defined at 1855 in Modules/_io/textio.c.'>COOKIE_BUF_LEN</a>];
<a name='L1890'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *cookieLong = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2775.html#L1325' title='Defined at 1325 in Objects/abstract.c.'>PyNumber_Long</a>(cookieObj);
<a name='L1891'>    <b>if</b> (cookieLong == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1892'>        <b>return</b> -1;
<a name='L1893'>
<a name='L1894'>    <b>if</b> (<a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>(cookieLong, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, <b>sizeof</b>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>),
<a name='L1895'>                            <a href='../D/1786.html' title='Multiple defined in 5 places.'>IS_LITTLE_ENDIAN</a>, 0) &lt; 0) <font color='red'>{</font>
<a name='L1896'>        Py_DECREF(cookieLong);
<a name='L1897'>        <b>return</b> -1;
<a name='L1898'>    <font color='red'>}</font>
<a name='L1899'>    Py_DECREF(cookieLong);
<a name='L1900'>
<a name='L1901'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;cookie-&gt;start_pos, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2408.html' title='Multiple defined in 2 places.'>OFF_START_POS</a>, <b>sizeof</b>(cookie-&gt;start_pos));
<a name='L1902'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;cookie-&gt;dec_flags, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2406.html' title='Multiple defined in 2 places.'>OFF_DEC_FLAGS</a>, <b>sizeof</b>(cookie-&gt;dec_flags));
<a name='L1903'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;cookie-&gt;bytes_to_feed, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2404.html' title='Multiple defined in 2 places.'>OFF_BYTES_TO_FEED</a>, <b>sizeof</b>(cookie-&gt;bytes_to_feed));
<a name='L1904'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;cookie-&gt;chars_to_skip, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2405.html' title='Multiple defined in 2 places.'>OFF_CHARS_TO_SKIP</a>, <b>sizeof</b>(cookie-&gt;chars_to_skip));
<a name='L1905'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;cookie-&gt;need_eof, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2407.html' title='Multiple defined in 2 places.'>OFF_NEED_EOF</a>, <b>sizeof</b>(cookie-&gt;need_eof));
<a name='L1906'>
<a name='L1907'>    <b>return</b> 0;
<a name='L1908'><font color='red'>}</font>
<a name='L1909'>
<a name='L1910'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1911'><a href='../R/10836.html' title='Multiple refered from 2 places.'>textiowrapper_build_cookie</a>(cookie_type *cookie)
<a name='L1912'><font color='red'>{</font>
<a name='L1913'>    <b>unsigned</b> <b>char</b> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[<a href='../S/2575.html#L1855' title='Defined at 1855 in Modules/_io/textio.c.'>COOKIE_BUF_LEN</a>];
<a name='L1914'>
<a name='L1915'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2408.html' title='Multiple defined in 2 places.'>OFF_START_POS</a>, &amp;cookie-&gt;start_pos, <b>sizeof</b>(cookie-&gt;start_pos));
<a name='L1916'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2406.html' title='Multiple defined in 2 places.'>OFF_DEC_FLAGS</a>, &amp;cookie-&gt;dec_flags, <b>sizeof</b>(cookie-&gt;dec_flags));
<a name='L1917'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2404.html' title='Multiple defined in 2 places.'>OFF_BYTES_TO_FEED</a>, &amp;cookie-&gt;bytes_to_feed, <b>sizeof</b>(cookie-&gt;bytes_to_feed));
<a name='L1918'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2405.html' title='Multiple defined in 2 places.'>OFF_CHARS_TO_SKIP</a>, &amp;cookie-&gt;chars_to_skip, <b>sizeof</b>(cookie-&gt;chars_to_skip));
<a name='L1919'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + <a href='../D/2407.html' title='Multiple defined in 2 places.'>OFF_NEED_EOF</a>, &amp;cookie-&gt;need_eof, <b>sizeof</b>(cookie-&gt;need_eof));
<a name='L1920'>
<a name='L1921'>    <b>return</b> <a href='../S/2799.html#L683' title='Defined at 683 in Objects/longobject.c.'>_PyLong_FromByteArray</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, <b>sizeof</b>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>), <a href='../D/1786.html' title='Multiple defined in 5 places.'>IS_LITTLE_ENDIAN</a>, 0);
<a name='L1922'><font color='red'>}</font>
<a name='L1923'><font color='darkred'>#undef</font> <a href='../R/1595.html' title='Multiple refered from 4 places.'>IS_LITTLE_ENDIAN</a>
<a name='L1924'>
<a name='L1925'><b>static</b> <b>int</b>
<a name='L1926'><a href='../R/5865.html' title='Multiple refered from 2 places.'>_textiowrapper_decoder_setstate</a>(textio *self, cookie_type *cookie)
<a name='L1927'><font color='red'>{</font>
<a name='L1928'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L1929'>    <i><font color='green'>/* When seeking to the start of the stream, we call decoder.reset()</font></i>
<a name='L1930'><i><font color='green'>       rather than decoder.getstate().</font></i>
<a name='L1931'><i><font color='green'>       This is for a few decoders such as utf-16 for which the state value</font></i>
<a name='L1932'><i><font color='green'>       at start is not (b"", 0) but e.g. (b"", 2) (meaning, in the case of</font></i>
<a name='L1933'><i><font color='green'>       utf-16, that we are expecting a BOM).</font></i>
<a name='L1934'><i><font color='green'>    */</font></i>
<a name='L1935'>    <b>if</b> (cookie-&gt;start_pos == 0 &amp;&amp; cookie-&gt;dec_flags == 0)
<a name='L1936'>        res = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder, _PyIO_str_reset, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1937'>    <b>else</b>
<a name='L1938'>        res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;decoder, "setstate",
<a name='L1939'>                                  "((yi))", "", cookie-&gt;dec_flags);
<a name='L1940'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1941'>        <b>return</b> -1;
<a name='L1942'>    Py_DECREF(res);
<a name='L1943'>    <b>return</b> 0;
<a name='L1944'><font color='red'>}</font>
<a name='L1945'>
<a name='L1946'><b>static</b> <b>int</b>
<a name='L1947'><a href='../S/2575.html#L2124' title='Refered from 2124 in Modules/_io/textio.c.'>_textiowrapper_encoder_setstate</a>(textio *self, cookie_type *cookie)
<a name='L1948'><font color='red'>{</font>
<a name='L1949'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L1950'>    <i><font color='green'>/* Same as _textiowrapper_decoder_setstate() above. */</font></i>
<a name='L1951'>    <b>if</b> (cookie-&gt;start_pos == 0 &amp;&amp; cookie-&gt;dec_flags == 0) <font color='red'>{</font>
<a name='L1952'>        res = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;encoder, _PyIO_str_reset, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1953'>        self-&gt;encoding_start_of_stream = 1;
<a name='L1954'>    <font color='red'>}</font>
<a name='L1955'>    <b>else</b> <font color='red'>{</font>
<a name='L1956'>        res = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;encoder, _PyIO_str_setstate,
<a name='L1957'>                                         _PyIO_zero, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1958'>        self-&gt;encoding_start_of_stream = 0;
<a name='L1959'>    <font color='red'>}</font>
<a name='L1960'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1961'>        <b>return</b> -1;
<a name='L1962'>    Py_DECREF(res);
<a name='L1963'>    <b>return</b> 0;
<a name='L1964'><font color='red'>}</font>
<a name='L1965'>
<a name='L1966'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1967'><a href='../S/2575.html#L2586' title='Refered from 2586 in Modules/_io/textio.c.'>textiowrapper_seek</a>(textio *self, PyObject *args)
<a name='L1968'><font color='red'>{</font>
<a name='L1969'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cookieObj, *posobj;
<a name='L1970'>    <a href='../S/2575.html#L1846' title='Defined at 1846 in Modules/_io/textio.c.'>cookie_type</a> cookie;
<a name='L1971'>    <b>int</b> whence = 0;
<a name='L1972'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L1973'>    <b>int</b> <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>;
<a name='L1974'>
<a name='L1975'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L1976'>
<a name='L1977'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "O|i:seek", &amp;cookieObj, &amp;whence))
<a name='L1978'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1979'>    <a href='../D/521.html' title='Multiple defined in 4 places.'>CHECK_CLOSED</a>(self);
<a name='L1980'>
<a name='L1981'>    Py_INCREF(cookieObj);
<a name='L1982'>
<a name='L1983'>    <b>if</b> (!self-&gt;seekable) <font color='red'>{</font>
<a name='L1984'>        <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("underlying stream is not seekable");
<a name='L1985'>        <b>goto</b> fail;
<a name='L1986'>    <font color='red'>}</font>
<a name='L1987'>
<a name='L1988'>    <b>if</b> (whence == 1) <font color='red'>{</font>
<a name='L1989'>        <i><font color='green'>/* seek relative to current position */</font></i>
<a name='L1990'>        <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> = <a href='../S/2803.html#L607' title='Defined at 607 in Objects/object.c.'>PyObject_RichCompareBool</a>(cookieObj, _PyIO_zero, <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>);
<a name='L1991'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> &lt; 0)
<a name='L1992'>            <b>goto</b> fail;
<a name='L1993'>
<a name='L1994'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> == 0) <font color='red'>{</font>
<a name='L1995'>            <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("can't do nonzero cur-relative seeks");
<a name='L1996'>            <b>goto</b> fail;
<a name='L1997'>        <font color='red'>}</font>
<a name='L1998'>
<a name='L1999'>        <i><font color='green'>/* Seeking to the current position should attempt to</font></i>
<a name='L2000'><i><font color='green'>         * sync the underlying buffer with the current position.</font></i>
<a name='L2001'><i><font color='green'>         */</font></i>
<a name='L2002'>        Py_DECREF(cookieObj);
<a name='L2003'>        cookieObj = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, "tell", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2004'>        <b>if</b> (cookieObj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2005'>            <b>goto</b> fail;
<a name='L2006'>    <font color='red'>}</font>
<a name='L2007'>    <b>else</b> <b>if</b> (whence == 2) <font color='red'>{</font>
<a name='L2008'>        <i><font color='green'>/* seek relative to end of file */</font></i>
<a name='L2009'>
<a name='L2010'>        <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> = <a href='../S/2803.html#L607' title='Defined at 607 in Objects/object.c.'>PyObject_RichCompareBool</a>(cookieObj, _PyIO_zero, <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>);
<a name='L2011'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> &lt; 0)
<a name='L2012'>            <b>goto</b> fail;
<a name='L2013'>
<a name='L2014'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> == 0) <font color='red'>{</font>
<a name='L2015'>            <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("can't do nonzero end-relative seeks");
<a name='L2016'>            <b>goto</b> fail;
<a name='L2017'>        <font color='red'>}</font>
<a name='L2018'>
<a name='L2019'>        res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, "flush", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2020'>        <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2021'>            <b>goto</b> fail;
<a name='L2022'>        Py_DECREF(res);
<a name='L2023'>
<a name='L2024'>        <a href='../S/2575.html#L1344' title='Defined at 1344 in Modules/_io/textio.c.'>textiowrapper_set_decoded_chars</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2025'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L2026'>        <b>if</b> (self-&gt;decoder) <font color='red'>{</font>
<a name='L2027'>            res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;decoder, "reset", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2028'>            <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2029'>                <b>goto</b> fail;
<a name='L2030'>            Py_DECREF(res);
<a name='L2031'>        <font color='red'>}</font>
<a name='L2032'>
<a name='L2033'>        res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "seek", "ii", 0, 2);
<a name='L2034'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(cookieObj);
<a name='L2035'>        <b>return</b> res;
<a name='L2036'>    <font color='red'>}</font>
<a name='L2037'>    <b>else</b> <b>if</b> (whence != 0) <font color='red'>{</font>
<a name='L2038'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L2039'>                     "invalid whence (%d, should be 0, 1 or 2)", whence);
<a name='L2040'>        <b>goto</b> fail;
<a name='L2041'>    <font color='red'>}</font>
<a name='L2042'>
<a name='L2043'>    <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> = <a href='../S/2803.html#L607' title='Defined at 607 in Objects/object.c.'>PyObject_RichCompareBool</a>(cookieObj, _PyIO_zero, <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LT</a>);
<a name='L2044'>    <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> &lt; 0)
<a name='L2045'>        <b>goto</b> fail;
<a name='L2046'>
<a name='L2047'>    <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> == 1) <font color='red'>{</font>
<a name='L2048'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L2049'>                     "negative seek position %R", cookieObj);
<a name='L2050'>        <b>goto</b> fail;
<a name='L2051'>    <font color='red'>}</font>
<a name='L2052'>
<a name='L2053'>    res = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, _PyIO_str_flush, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2054'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2055'>        <b>goto</b> fail;
<a name='L2056'>    Py_DECREF(res);
<a name='L2057'>
<a name='L2058'>    <i><font color='green'>/* The strategy of seek() is to go back to the safe start point</font></i>
<a name='L2059'><i><font color='green'>     * and replay the effect of read(chars_to_skip) from there.</font></i>
<a name='L2060'><i><font color='green'>     */</font></i>
<a name='L2061'>    <b>if</b> (<a href='../S/2575.html#L1887' title='Defined at 1887 in Modules/_io/textio.c.'>textiowrapper_parse_cookie</a>(&amp;cookie, cookieObj) &lt; 0)
<a name='L2062'>        <b>goto</b> fail;
<a name='L2063'>
<a name='L2064'>    <i><font color='green'>/* Seek back to the safe start point. */</font></i>
<a name='L2065'>    posobj = PyLong_FromOff_t(cookie.start_pos);
<a name='L2066'>    <b>if</b> (posobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2067'>        <b>goto</b> fail;
<a name='L2068'>    res = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>,
<a name='L2069'>                                     _PyIO_str_seek, posobj, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2070'>    Py_DECREF(posobj);
<a name='L2071'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2072'>        <b>goto</b> fail;
<a name='L2073'>    Py_DECREF(res);
<a name='L2074'>
<a name='L2075'>    <a href='../S/2575.html#L1344' title='Defined at 1344 in Modules/_io/textio.c.'>textiowrapper_set_decoded_chars</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2076'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L2077'>
<a name='L2078'>    <i><font color='green'>/* Restore the decoder to its state from the safe start point. */</font></i>
<a name='L2079'>    <b>if</b> (self-&gt;decoder) <font color='red'>{</font>
<a name='L2080'>        <b>if</b> (<a href='../S/2575.html#L1926' title='Defined at 1926 in Modules/_io/textio.c.'>_textiowrapper_decoder_setstate</a>(self, &amp;cookie) &lt; 0)
<a name='L2081'>            <b>goto</b> fail;
<a name='L2082'>    <font color='red'>}</font>
<a name='L2083'>
<a name='L2084'>    <b>if</b> (cookie.chars_to_skip) <font color='red'>{</font>
<a name='L2085'>        <i><font color='green'>/* Just like _read_chunk, feed the decoder and save a snapshot. */</font></i>
<a name='L2086'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *input_chunk = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(
<a name='L2087'>            self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "read", "i", cookie.bytes_to_feed);
<a name='L2088'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoded;
<a name='L2089'>
<a name='L2090'>        <b>if</b> (input_chunk == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2091'>            <b>goto</b> fail;
<a name='L2092'>
<a name='L2093'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> (PyBytes_Check(input_chunk));
<a name='L2094'>
<a name='L2095'>        self-&gt;snapshot = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("iN", cookie.dec_flags, input_chunk);
<a name='L2096'>        <b>if</b> (self-&gt;snapshot == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2097'>            Py_DECREF(input_chunk);
<a name='L2098'>            <b>goto</b> fail;
<a name='L2099'>        <font color='red'>}</font>
<a name='L2100'>
<a name='L2101'>        decoded = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;decoder, "decode",
<a name='L2102'>                                      "Oi", input_chunk, (<b>int</b>)cookie.need_eof);
<a name='L2103'>
<a name='L2104'>        <b>if</b> (decoded == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2105'>            <b>goto</b> fail;
<a name='L2106'>
<a name='L2107'>        <a href='../S/2575.html#L1344' title='Defined at 1344 in Modules/_io/textio.c.'>textiowrapper_set_decoded_chars</a>(self, decoded);
<a name='L2108'>
<a name='L2109'>        <i><font color='green'>/* Skip chars_to_skip of the decoded characters. */</font></i>
<a name='L2110'>        <b>if</b> (<a href='../D/4020.html' title='Multiple defined in 3 places.'>PyUnicode_GetSize</a>(self-&gt;decoded_chars) &lt; cookie.chars_to_skip) <font color='red'>{</font>
<a name='L2111'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_IOError, "can't restore logical file position");
<a name='L2112'>            <b>goto</b> fail;
<a name='L2113'>        <font color='red'>}</font>
<a name='L2114'>        self-&gt;decoded_chars_used = cookie.chars_to_skip;
<a name='L2115'>    <font color='red'>}</font>
<a name='L2116'>    <b>else</b> <font color='red'>{</font>
<a name='L2117'>        self-&gt;snapshot = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("iy", cookie.dec_flags, "");
<a name='L2118'>        <b>if</b> (self-&gt;snapshot == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2119'>            <b>goto</b> fail;
<a name='L2120'>    <font color='red'>}</font>
<a name='L2121'>
<a name='L2122'>    <i><font color='green'>/* Finally, reset the encoder (merely useful for proper BOM handling) */</font></i>
<a name='L2123'>    <b>if</b> (self-&gt;encoder) <font color='red'>{</font>
<a name='L2124'>        <b>if</b> (<a href='../S/2575.html#L1947' title='Defined at 1947 in Modules/_io/textio.c.'>_textiowrapper_encoder_setstate</a>(self, &amp;cookie) &lt; 0)
<a name='L2125'>            <b>goto</b> fail;
<a name='L2126'>    <font color='red'>}</font>
<a name='L2127'>    <b>return</b> cookieObj;
<a name='L2128'>  fail:
<a name='L2129'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(cookieObj);
<a name='L2130'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2131'>
<a name='L2132'><font color='red'>}</font>
<a name='L2133'>
<a name='L2134'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2135'><a href='../S/2575.html#L2587' title='Refered from 2587 in Modules/_io/textio.c.'>textiowrapper_tell</a>(textio *self, PyObject *args)
<a name='L2136'><font color='red'>{</font>
<a name='L2137'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L2138'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *posobj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2139'>    <a href='../S/2575.html#L1846' title='Defined at 1846 in Modules/_io/textio.c.'>cookie_type</a> cookie = <font color='red'>{</font>0,0,0,0,0<font color='red'>}</font>;
<a name='L2140'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *next_input;
<a name='L2141'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> chars_to_skip, chars_decoded;
<a name='L2142'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *saved_state = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2143'>    <b>char</b> *input, *input_end;
<a name='L2144'>
<a name='L2145'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2146'>    <a href='../D/521.html' title='Multiple defined in 4 places.'>CHECK_CLOSED</a>(self);
<a name='L2147'>
<a name='L2148'>    <b>if</b> (!self-&gt;seekable) <font color='red'>{</font>
<a name='L2149'>        <a href='../S/2575.html#L25' title='Defined at 25 in Modules/_io/textio.c.'>_unsupported</a>("underlying stream is not seekable");
<a name='L2150'>        <b>goto</b> fail;
<a name='L2151'>    <font color='red'>}</font>
<a name='L2152'>    <b>if</b> (!self-&gt;telling) <font color='red'>{</font>
<a name='L2153'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_IOError,
<a name='L2154'>                        "telling position disabled by next() call");
<a name='L2155'>        <b>goto</b> fail;
<a name='L2156'>    <font color='red'>}</font>
<a name='L2157'>
<a name='L2158'>    <b>if</b> (<a href='../S/2575.html#L1221' title='Defined at 1221 in Modules/_io/textio.c.'>_textiowrapper_writeflush</a>(self) &lt; 0)
<a name='L2159'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2160'>    res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, "flush", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2161'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2162'>        <b>goto</b> fail;
<a name='L2163'>    Py_DECREF(res);
<a name='L2164'>
<a name='L2165'>    posobj = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "tell", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2166'>    <b>if</b> (posobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2167'>        <b>goto</b> fail;
<a name='L2168'>
<a name='L2169'>    <b>if</b> (self-&gt;decoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || self-&gt;snapshot == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2170'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> (self-&gt;decoded_chars == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || <a href='../D/4020.html' title='Multiple defined in 3 places.'>PyUnicode_GetSize</a>(self-&gt;decoded_chars) == 0);
<a name='L2171'>        <b>return</b> posobj;
<a name='L2172'>    <font color='red'>}</font>
<a name='L2173'>
<a name='L2174'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/1522.html' title='Multiple defined in 4 places.'>HAVE_LARGEFILE_SUPPORT</a>)
<a name='L2175'>    cookie.start_pos = <a href='../S/2799.html#L1137' title='Defined at 1137 in Objects/longobject.c.'>PyLong_AsLongLong</a>(posobj);
<a name='L2176'><font color='darkred'>#else</font>
<a name='L2177'>    cookie.start_pos = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(posobj);
<a name='L2178'><font color='darkred'>#endif</font>
<a name='L2179'>    <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2180'>        <b>goto</b> fail;
<a name='L2181'>
<a name='L2182'>    <i><font color='green'>/* Skip backward to the snapshot point (see _read_chunk). */</font></i>
<a name='L2183'>    <b>if</b> (!<a href='../S/541.html#L15' title='Defined at 15 in Include/modsupport.h.'>PyArg_Parse</a>(self-&gt;snapshot, "(iO)", &amp;cookie.dec_flags, &amp;next_input))
<a name='L2184'>        <b>goto</b> fail;
<a name='L2185'>
<a name='L2186'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> (PyBytes_Check(next_input));
<a name='L2187'>
<a name='L2188'>    cookie.start_pos -= PyBytes_GET_SIZE(next_input);
<a name='L2189'>
<a name='L2190'>    <i><font color='green'>/* How many decoded characters have been used up since the snapshot? */</font></i>
<a name='L2191'>    <b>if</b> (self-&gt;decoded_chars_used == 0)  <font color='red'>{</font>
<a name='L2192'>        <i><font color='green'>/* We haven't moved from the snapshot point. */</font></i>
<a name='L2193'>        Py_DECREF(posobj);
<a name='L2194'>        <b>return</b> <a href='../S/2575.html#L1911' title='Defined at 1911 in Modules/_io/textio.c.'>textiowrapper_build_cookie</a>(&amp;cookie);
<a name='L2195'>    <font color='red'>}</font>
<a name='L2196'>
<a name='L2197'>    chars_to_skip = self-&gt;decoded_chars_used;
<a name='L2198'>
<a name='L2199'>    <i><font color='green'>/* Starting from the snapshot position, we will walk the decoder</font></i>
<a name='L2200'><i><font color='green'>     * forward until it gives us enough decoded characters.</font></i>
<a name='L2201'><i><font color='green'>     */</font></i>
<a name='L2202'>    saved_state = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder,
<a name='L2203'>                                             _PyIO_str_getstate, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2204'>    <b>if</b> (saved_state == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2205'>        <b>goto</b> fail;
<a name='L2206'>
<a name='L2207'>    <i><font color='green'>/* Note our initial start point. */</font></i>
<a name='L2208'>    <b>if</b> (<a href='../S/2575.html#L1926' title='Defined at 1926 in Modules/_io/textio.c.'>_textiowrapper_decoder_setstate</a>(self, &amp;cookie) &lt; 0)
<a name='L2209'>        <b>goto</b> fail;
<a name='L2210'>
<a name='L2211'>    <i><font color='green'>/* Feed the decoder one byte at a time.  As we go, note the</font></i>
<a name='L2212'><i><font color='green'>     * nearest "safe start point" before the current location</font></i>
<a name='L2213'><i><font color='green'>     * (a point where the decoder has nothing buffered, so seek()</font></i>
<a name='L2214'><i><font color='green'>     * can safely start from there and advance to this location).</font></i>
<a name='L2215'><i><font color='green'>     */</font></i>
<a name='L2216'>    chars_decoded = 0;
<a name='L2217'>    input = PyBytes_AS_STRING(next_input);
<a name='L2218'>    input_end = input + PyBytes_GET_SIZE(next_input);
<a name='L2219'>    <b>while</b> (input &lt; input_end) <font color='red'>{</font>
<a name='L2220'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L2221'>        <b>char</b> *dec_buffer;
<a name='L2222'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> dec_buffer_len;
<a name='L2223'>        <b>int</b> dec_flags;
<a name='L2224'>
<a name='L2225'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoded = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(
<a name='L2226'>            self-&gt;decoder, "decode", "y#", input, 1);
<a name='L2227'>        <b>if</b> (decoded == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2228'>            <b>goto</b> fail;
<a name='L2229'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> (PyUnicode_Check(decoded));
<a name='L2230'>        chars_decoded += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(decoded);
<a name='L2231'>        Py_DECREF(decoded);
<a name='L2232'>
<a name='L2233'>        cookie.bytes_to_feed += 1;
<a name='L2234'>
<a name='L2235'>        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;decoder,
<a name='L2236'>                                           _PyIO_str_getstate, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2237'>        <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2238'>            <b>goto</b> fail;
<a name='L2239'>        <b>if</b> (!<a href='../S/541.html#L15' title='Defined at 15 in Include/modsupport.h.'>PyArg_Parse</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, "(y#i)", &amp;dec_buffer, &amp;dec_buffer_len, &amp;dec_flags)) <font color='red'>{</font>
<a name='L2240'>            Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L2241'>            <b>goto</b> fail;
<a name='L2242'>        <font color='red'>}</font>
<a name='L2243'>        Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L2244'>
<a name='L2245'>        <b>if</b> (dec_buffer_len == 0 &amp;&amp; chars_decoded &lt;= chars_to_skip) <font color='red'>{</font>
<a name='L2246'>            <i><font color='green'>/* Decoder buffer is empty, so this is a safe start point. */</font></i>
<a name='L2247'>            cookie.start_pos += cookie.bytes_to_feed;
<a name='L2248'>            chars_to_skip -= chars_decoded;
<a name='L2249'>            cookie.dec_flags = dec_flags;
<a name='L2250'>            cookie.bytes_to_feed = 0;
<a name='L2251'>            chars_decoded = 0;
<a name='L2252'>        <font color='red'>}</font>
<a name='L2253'>        <b>if</b> (chars_decoded &gt;= chars_to_skip)
<a name='L2254'>            <b>break</b>;
<a name='L2255'>        input++;
<a name='L2256'>    <font color='red'>}</font>
<a name='L2257'>    <b>if</b> (input == input_end) <font color='red'>{</font>
<a name='L2258'>        <i><font color='green'>/* We didn't get enough decoded data; signal EOF to get more. */</font></i>
<a name='L2259'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *decoded = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(
<a name='L2260'>            self-&gt;decoder, "decode", "yi", "", <i><font color='green'>/* final = */</font></i> 1);
<a name='L2261'>        <b>if</b> (decoded == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2262'>            <b>goto</b> fail;
<a name='L2263'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> (PyUnicode_Check(decoded));
<a name='L2264'>        chars_decoded += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(decoded);
<a name='L2265'>        Py_DECREF(decoded);
<a name='L2266'>        cookie.need_eof = 1;
<a name='L2267'>
<a name='L2268'>        <b>if</b> (chars_decoded &lt; chars_to_skip) <font color='red'>{</font>
<a name='L2269'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_IOError,
<a name='L2270'>                            "can't reconstruct logical file position");
<a name='L2271'>            <b>goto</b> fail;
<a name='L2272'>        <font color='red'>}</font>
<a name='L2273'>    <font color='red'>}</font>
<a name='L2274'>
<a name='L2275'>    <i><font color='green'>/* finally */</font></i>
<a name='L2276'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(posobj);
<a name='L2277'>    res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;decoder, "setstate", "(O)", saved_state);
<a name='L2278'>    Py_DECREF(saved_state);
<a name='L2279'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2280'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2281'>    Py_DECREF(res);
<a name='L2282'>
<a name='L2283'>    <i><font color='green'>/* The returned cookie corresponds to the last safe start point. */</font></i>
<a name='L2284'>    cookie.chars_to_skip = <a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(chars_to_skip, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>, <b>int</b>);
<a name='L2285'>    <b>return</b> <a href='../S/2575.html#L1911' title='Defined at 1911 in Modules/_io/textio.c.'>textiowrapper_build_cookie</a>(&amp;cookie);
<a name='L2286'>
<a name='L2287'>  fail:
<a name='L2288'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(posobj);
<a name='L2289'>    <b>if</b> (saved_state) <font color='red'>{</font>
<a name='L2290'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *type, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, *traceback;
<a name='L2291'>        <a href='../S/3106.html#L304' title='Defined at 304 in Python/errors.c.'>PyErr_Fetch</a>(&amp;type, &amp;<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, &amp;traceback);
<a name='L2292'>
<a name='L2293'>        res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;decoder, "setstate", "(O)", saved_state);
<a name='L2294'>        Py_DECREF(saved_state);
<a name='L2295'>        <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2296'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2297'>        Py_DECREF(res);
<a name='L2298'>
<a name='L2299'>        <a href='../S/3106.html#L25' title='Defined at 25 in Python/errors.c.'>PyErr_Restore</a>(type, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, traceback);
<a name='L2300'>    <font color='red'>}</font>
<a name='L2301'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2302'><font color='red'>}</font>
<a name='L2303'>
<a name='L2304'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2305'><a href='../S/2575.html#L2588' title='Refered from 2588 in Modules/_io/textio.c.'>textiowrapper_truncate</a>(textio *self, PyObject *args)
<a name='L2306'><font color='red'>{</font>
<a name='L2307'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pos = Py_None;
<a name='L2308'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L2309'>
<a name='L2310'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self)
<a name='L2311'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|O:truncate", &amp;pos)) <font color='red'>{</font>
<a name='L2312'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2313'>    <font color='red'>}</font>
<a name='L2314'>
<a name='L2315'>    res = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) self, _PyIO_str_flush, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2316'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2317'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2318'>    Py_DECREF(res);
<a name='L2319'>
<a name='L2320'>    <b>return</b> <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, _PyIO_str_truncate, pos, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2321'><font color='red'>}</font>
<a name='L2322'>
<a name='L2323'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2324'><a href='../S/2575.html#L2621' title='Refered from 2621 in Modules/_io/textio.c.'>textiowrapper_repr</a>(textio *self)
<a name='L2325'><font color='red'>{</font>
<a name='L2326'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *nameobj, *modeobj, *res, *s;
<a name='L2327'>
<a name='L2328'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2329'>
<a name='L2330'>    res = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("&lt;_io.TextIOWrapper");
<a name='L2331'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2332'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2333'>    nameobj = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) self, "name");
<a name='L2334'>    <b>if</b> (nameobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2335'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L2336'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L2337'>        <b>else</b>
<a name='L2338'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2339'>    <font color='red'>}</font>
<a name='L2340'>    <b>else</b> <font color='red'>{</font>
<a name='L2341'>        s = <a href='../D/4008.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormat</a>(" name=%R", nameobj);
<a name='L2342'>        Py_DECREF(nameobj);
<a name='L2343'>        <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2344'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2345'>        <a href='../D/3946.html' title='Multiple defined in 3 places.'>PyUnicode_AppendAndDel</a>(&amp;res, s);
<a name='L2346'>        <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2347'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2348'>    <font color='red'>}</font>
<a name='L2349'>    modeobj = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) self, "mode");
<a name='L2350'>    <b>if</b> (modeobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2351'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L2352'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L2353'>        <b>else</b>
<a name='L2354'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2355'>    <font color='red'>}</font>
<a name='L2356'>    <b>else</b> <font color='red'>{</font>
<a name='L2357'>        s = <a href='../D/4008.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormat</a>(" mode=%R", modeobj);
<a name='L2358'>        Py_DECREF(modeobj);
<a name='L2359'>        <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2360'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2361'>        <a href='../D/3946.html' title='Multiple defined in 3 places.'>PyUnicode_AppendAndDel</a>(&amp;res, s);
<a name='L2362'>        <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2363'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2364'>    <font color='red'>}</font>
<a name='L2365'>    s = <a href='../D/4008.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormat</a>("%U encoding=%R&gt;",
<a name='L2366'>                             res, self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L2367'>    Py_DECREF(res);
<a name='L2368'>    <b>return</b> s;
<a name='L2369'><a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L2370'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(res);
<a name='L2371'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2372'><font color='red'>}</font>
<a name='L2373'>
<a name='L2374'>
<a name='L2375'><i><font color='green'>/* Inquiries */</font></i>
<a name='L2376'>
<a name='L2377'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2378'><a href='../S/2575.html#L2579' title='Refered from 2579 in Modules/_io/textio.c.'>textiowrapper_fileno</a>(textio *self, PyObject *args)
<a name='L2379'><font color='red'>{</font>
<a name='L2380'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2381'>    <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "fileno", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2382'><font color='red'>}</font>
<a name='L2383'>
<a name='L2384'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2385'><a href='../S/2575.html#L2580' title='Refered from 2580 in Modules/_io/textio.c.'>textiowrapper_seekable</a>(textio *self, PyObject *args)
<a name='L2386'><font color='red'>{</font>
<a name='L2387'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2388'>    <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "seekable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2389'><font color='red'>}</font>
<a name='L2390'>
<a name='L2391'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2392'><a href='../S/2575.html#L2581' title='Refered from 2581 in Modules/_io/textio.c.'>textiowrapper_readable</a>(textio *self, PyObject *args)
<a name='L2393'><font color='red'>{</font>
<a name='L2394'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2395'>    <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "readable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2396'><font color='red'>}</font>
<a name='L2397'>
<a name='L2398'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2399'><a href='../S/2575.html#L2582' title='Refered from 2582 in Modules/_io/textio.c.'>textiowrapper_writable</a>(textio *self, PyObject *args)
<a name='L2400'><font color='red'>{</font>
<a name='L2401'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2402'>    <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "writable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2403'><font color='red'>}</font>
<a name='L2404'>
<a name='L2405'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2406'><a href='../S/2575.html#L2583' title='Refered from 2583 in Modules/_io/textio.c.'>textiowrapper_isatty</a>(textio *self, PyObject *args)
<a name='L2407'><font color='red'>{</font>
<a name='L2408'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2409'>    <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "isatty", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2410'><font color='red'>}</font>
<a name='L2411'>
<a name='L2412'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2413'><a href='../S/2575.html#L2584' title='Refered from 2584 in Modules/_io/textio.c.'>textiowrapper_getstate</a>(textio *self, PyObject *args)
<a name='L2414'><font color='red'>{</font>
<a name='L2415'>    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L2416'>                 "cannot serialize '%s' object", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_name);
<a name='L2417'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2418'><font color='red'>}</font>
<a name='L2419'>
<a name='L2420'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2421'><a href='../S/2575.html#L2576' title='Refered from 2576 in Modules/_io/textio.c.'>textiowrapper_flush</a>(textio *self, PyObject *args)
<a name='L2422'><font color='red'>{</font>
<a name='L2423'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2424'>    <a href='../D/521.html' title='Multiple defined in 4 places.'>CHECK_CLOSED</a>(self);
<a name='L2425'>    self-&gt;telling = self-&gt;seekable;
<a name='L2426'>    <b>if</b> (<a href='../S/2575.html#L1221' title='Defined at 1221 in Modules/_io/textio.c.'>_textiowrapper_writeflush</a>(self) &lt; 0)
<a name='L2427'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2428'>    <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "flush", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2429'><font color='red'>}</font>
<a name='L2430'>
<a name='L2431'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2432'><a href='../S/2575.html#L2577' title='Refered from 2577 in Modules/_io/textio.c.'>textiowrapper_close</a>(textio *self, PyObject *args)
<a name='L2433'><font color='red'>{</font>
<a name='L2434'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L2435'>    <b>int</b> r;
<a name='L2436'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2437'>
<a name='L2438'>    res = <a href='../S/2575.html#L2514' title='Defined at 2514 in Modules/_io/textio.c.'>textiowrapper_closed_get</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2439'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2440'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2441'>    r = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(res);
<a name='L2442'>    Py_DECREF(res);
<a name='L2443'>    <b>if</b> (r &lt; 0)
<a name='L2444'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2445'>
<a name='L2446'>    <b>if</b> (r &gt; 0) <font color='red'>{</font>
<a name='L2447'>        <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>; <i><font color='green'>/* stream already closed */</font></i>
<a name='L2448'>    <font color='red'>}</font>
<a name='L2449'>    <b>else</b> <font color='red'>{</font>
<a name='L2450'>        <b>if</b> (self-&gt;deallocating) <font color='red'>{</font>
<a name='L2451'>            res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "_dealloc_warn", "O", self);
<a name='L2452'>            <b>if</b> (res)
<a name='L2453'>                Py_DECREF(res);
<a name='L2454'>            <b>else</b>
<a name='L2455'>                <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L2456'>        <font color='red'>}</font>
<a name='L2457'>        res = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, "flush", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2458'>        <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2459'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2460'>        <font color='red'>}</font>
<a name='L2461'>        <b>else</b>
<a name='L2462'>            Py_DECREF(res);
<a name='L2463'>
<a name='L2464'>        <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "close", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2465'>    <font color='red'>}</font>
<a name='L2466'><font color='red'>}</font>
<a name='L2467'>
<a name='L2468'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2469'><a href='../S/2575.html#L2639' title='Refered from 2639 in Modules/_io/textio.c.'>textiowrapper_iternext</a>(textio *self)
<a name='L2470'><font color='red'>{</font>
<a name='L2471'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *line;
<a name='L2472'>
<a name='L2473'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2474'>
<a name='L2475'>    self-&gt;telling = 0;
<a name='L2476'>    <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self) == &amp;PyTextIOWrapper_Type) <font color='red'>{</font>
<a name='L2477'>        <i><font color='green'>/* Skip method call overhead for speed */</font></i>
<a name='L2478'>        line = <a href='../S/2575.html#L1673' title='Defined at 1673 in Modules/_io/textio.c.'>_textiowrapper_readline</a>(self, -1);
<a name='L2479'>    <font color='red'>}</font>
<a name='L2480'>    <b>else</b> <font color='red'>{</font>
<a name='L2481'>        line = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self,
<a name='L2482'>                                           _PyIO_str_readline, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2483'>        <b>if</b> (line &amp;&amp; !PyUnicode_Check(line)) <font color='red'>{</font>
<a name='L2484'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_IOError,
<a name='L2485'>                         "readline() should have returned an str object, "
<a name='L2486'>                         "not '%.200s'", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(line)-&gt;tp_name);
<a name='L2487'>            Py_DECREF(line);
<a name='L2488'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2489'>        <font color='red'>}</font>
<a name='L2490'>    <font color='red'>}</font>
<a name='L2491'>
<a name='L2492'>    <b>if</b> (line == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2493'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2494'>
<a name='L2495'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(line) == 0) <font color='red'>{</font>
<a name='L2496'>        <i><font color='green'>/* Reached EOF or would have blocked */</font></i>
<a name='L2497'>        Py_DECREF(line);
<a name='L2498'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;snapshot);
<a name='L2499'>        self-&gt;telling = self-&gt;seekable;
<a name='L2500'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2501'>    <font color='red'>}</font>
<a name='L2502'>
<a name='L2503'>    <b>return</b> line;
<a name='L2504'><font color='red'>}</font>
<a name='L2505'>
<a name='L2506'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2507'><a href='../S/2575.html#L2600' title='Refered from 2600 in Modules/_io/textio.c.'>textiowrapper_name_get</a>(textio *self, <b>void</b> *context)
<a name='L2508'><font color='red'>{</font>
<a name='L2509'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2510'>    <b>return</b> <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "name");
<a name='L2511'><font color='red'>}</font>
<a name='L2512'>
<a name='L2513'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2514'><a href='../R/10841.html' title='Multiple refered from 4 places.'>textiowrapper_closed_get</a>(textio *self, <b>void</b> *context)
<a name='L2515'><font color='red'>{</font>
<a name='L2516'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2517'>    <b>return</b> <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, _PyIO_str_closed);
<a name='L2518'><font color='red'>}</font>
<a name='L2519'>
<a name='L2520'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2521'><a href='../S/2575.html#L2604' title='Refered from 2604 in Modules/_io/textio.c.'>textiowrapper_newlines_get</a>(textio *self, <b>void</b> *context)
<a name='L2522'><font color='red'>{</font>
<a name='L2523'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L2524'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2525'>    <b>if</b> (self-&gt;decoder == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2526'>        <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L2527'>    res = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(self-&gt;decoder, _PyIO_str_newlines);
<a name='L2528'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2529'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError)) <font color='red'>{</font>
<a name='L2530'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L2531'>            <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L2532'>        <font color='red'>}</font>
<a name='L2533'>        <b>else</b> <font color='red'>{</font>
<a name='L2534'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2535'>        <font color='red'>}</font>
<a name='L2536'>    <font color='red'>}</font>
<a name='L2537'>    <b>return</b> res;
<a name='L2538'><font color='red'>}</font>
<a name='L2539'>
<a name='L2540'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2541'><a href='../S/2575.html#L2605' title='Refered from 2605 in Modules/_io/textio.c.'>textiowrapper_errors_get</a>(textio *self, <b>void</b> *context)
<a name='L2542'><font color='red'>{</font>
<a name='L2543'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2544'>    <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(PyBytes_AS_STRING(self-&gt;errors));
<a name='L2545'><font color='red'>}</font>
<a name='L2546'>
<a name='L2547'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2548'><a href='../S/2575.html#L2606' title='Refered from 2606 in Modules/_io/textio.c.'>textiowrapper_chunk_size_get</a>(textio *self, <b>void</b> *context)
<a name='L2549'><font color='red'>{</font>
<a name='L2550'>    <a href='../D/526.html' title='Multiple defined in 3 places.'>CHECK_INITIALIZED</a>(self);
<a name='L2551'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(self-&gt;chunk_size);
<a name='L2552'><font color='red'>}</font>
<a name='L2553'>
<a name='L2554'><b>static</b> <b>int</b>
<a name='L2555'><a href='../S/2575.html#L2607' title='Refered from 2607 in Modules/_io/textio.c.'>textiowrapper_chunk_size_set</a>(textio *self, PyObject *arg, <b>void</b> *context)
<a name='L2556'><font color='red'>{</font>
<a name='L2557'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n;
<a name='L2558'>    <a href='../D/527.html' title='Multiple defined in 2 places.'>CHECK_INITIALIZED_INT</a>(self);
<a name='L2559'>    n = <a href='../S/2775.html#L1227' title='Defined at 1227 in Objects/abstract.c.'>PyNumber_AsSsize_t</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, PyExc_TypeError);
<a name='L2560'>    <b>if</b> (n == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2561'>        <b>return</b> -1;
<a name='L2562'>    <b>if</b> (n &lt;= 0) <font color='red'>{</font>
<a name='L2563'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L2564'>                        "a strictly positive integer is required");
<a name='L2565'>        <b>return</b> -1;
<a name='L2566'>    <font color='red'>}</font>
<a name='L2567'>    self-&gt;chunk_size = n;
<a name='L2568'>    <b>return</b> 0;
<a name='L2569'><font color='red'>}</font>
<a name='L2570'>
<a name='L2571'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> textiowrapper_methods[] = <font color='red'>{</font>
<a name='L2572'>    <font color='red'>{</font>"detach", (PyCFunction)<a href='../S/2575.html#L1191' title='Defined at 1191 in Modules/_io/textio.c.'>textiowrapper_detach</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2573'>    <font color='red'>{</font>"write", (PyCFunction)<a href='../S/2575.html#L1247' title='Defined at 1247 in Modules/_io/textio.c.'>textiowrapper_write</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a><font color='red'>}</font>,
<a name='L2574'>    <font color='red'>{</font>"read", (PyCFunction)<a href='../S/2575.html#L1480' title='Defined at 1480 in Modules/_io/textio.c.'>textiowrapper_read</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a><font color='red'>}</font>,
<a name='L2575'>    <font color='red'>{</font>"readline", (PyCFunction)<a href='../S/2575.html#L1827' title='Defined at 1827 in Modules/_io/textio.c.'>textiowrapper_readline</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a><font color='red'>}</font>,
<a name='L2576'>    <font color='red'>{</font>"flush", (PyCFunction)<a href='../S/2575.html#L2421' title='Defined at 2421 in Modules/_io/textio.c.'>textiowrapper_flush</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2577'>    <font color='red'>{</font>"close", (PyCFunction)<a href='../S/2575.html#L2432' title='Defined at 2432 in Modules/_io/textio.c.'>textiowrapper_close</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2578'>
<a name='L2579'>    <font color='red'>{</font>"fileno", (PyCFunction)<a href='../S/2575.html#L2378' title='Defined at 2378 in Modules/_io/textio.c.'>textiowrapper_fileno</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2580'>    <font color='red'>{</font>"seekable", (PyCFunction)<a href='../S/2575.html#L2385' title='Defined at 2385 in Modules/_io/textio.c.'>textiowrapper_seekable</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2581'>    <font color='red'>{</font>"readable", (PyCFunction)<a href='../S/2575.html#L2392' title='Defined at 2392 in Modules/_io/textio.c.'>textiowrapper_readable</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2582'>    <font color='red'>{</font>"writable", (PyCFunction)<a href='../S/2575.html#L2399' title='Defined at 2399 in Modules/_io/textio.c.'>textiowrapper_writable</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2583'>    <font color='red'>{</font>"isatty", (PyCFunction)<a href='../S/2575.html#L2406' title='Defined at 2406 in Modules/_io/textio.c.'>textiowrapper_isatty</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2584'>    <font color='red'>{</font>"__getstate__", (PyCFunction)<a href='../S/2575.html#L2413' title='Defined at 2413 in Modules/_io/textio.c.'>textiowrapper_getstate</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2585'>
<a name='L2586'>    <font color='red'>{</font>"seek", (PyCFunction)<a href='../S/2575.html#L1967' title='Defined at 1967 in Modules/_io/textio.c.'>textiowrapper_seek</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a><font color='red'>}</font>,
<a name='L2587'>    <font color='red'>{</font>"tell", (PyCFunction)<a href='../S/2575.html#L2135' title='Defined at 2135 in Modules/_io/textio.c.'>textiowrapper_tell</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L2588'>    <font color='red'>{</font>"truncate", (PyCFunction)<a href='../S/2575.html#L2305' title='Defined at 2305 in Modules/_io/textio.c.'>textiowrapper_truncate</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a><font color='red'>}</font>,
<a name='L2589'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L2590'><font color='red'>}</font>;
<a name='L2591'>
<a name='L2592'><b>static</b> <a href='../D/3506.html' title='Multiple defined in 2 places.'>PyMemberDef</a> textiowrapper_members[] = <font color='red'>{</font>
<a name='L2593'>    <font color='red'>{</font>"encoding", <a href='../S/577.html#L44' title='Defined at 44 in Include/structmember.h.'>T_OBJECT</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2575.html#L693' title='Defined at 693 in Modules/_io/textio.c.'>textio</a>, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a><font color='red'>}</font>,
<a name='L2594'>    <font color='red'>{</font>"buffer", <a href='../S/577.html#L44' title='Defined at 44 in Include/structmember.h.'>T_OBJECT</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2575.html#L693' title='Defined at 693 in Modules/_io/textio.c.'>textio</a>, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a><font color='red'>}</font>,
<a name='L2595'>    <font color='red'>{</font>"line_buffering", <a href='../S/577.html#L58' title='Defined at 58 in Include/structmember.h.'>T_BOOL</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2575.html#L693' title='Defined at 693 in Modules/_io/textio.c.'>textio</a>, line_buffering), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a><font color='red'>}</font>,
<a name='L2596'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L2597'><font color='red'>}</font>;
<a name='L2598'>
<a name='L2599'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> textiowrapper_getset[] = <font color='red'>{</font>
<a name='L2600'>    <font color='red'>{</font>"name", (getter)<a href='../S/2575.html#L2507' title='Defined at 2507 in Modules/_io/textio.c.'>textiowrapper_name_get</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L2601'>    <font color='red'>{</font>"closed", (getter)<a href='../S/2575.html#L2514' title='Defined at 2514 in Modules/_io/textio.c.'>textiowrapper_closed_get</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L2602'><i><font color='green'>/*    {"mode", (getter)TextIOWrapper_mode_get, NULL, NULL},</font></i>
<a name='L2603'><i><font color='green'>*/</font></i>
<a name='L2604'>    <font color='red'>{</font>"newlines", (getter)<a href='../S/2575.html#L2521' title='Defined at 2521 in Modules/_io/textio.c.'>textiowrapper_newlines_get</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L2605'>    <font color='red'>{</font>"errors", (getter)<a href='../S/2575.html#L2541' title='Defined at 2541 in Modules/_io/textio.c.'>textiowrapper_errors_get</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L2606'>    <font color='red'>{</font>"_CHUNK_SIZE", (getter)<a href='../S/2575.html#L2548' title='Defined at 2548 in Modules/_io/textio.c.'>textiowrapper_chunk_size_get</a>,
<a name='L2607'>                    (setter)<a href='../S/2575.html#L2555' title='Defined at 2555 in Modules/_io/textio.c.'>textiowrapper_chunk_size_set</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L2608'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L2609'><font color='red'>}</font>;
<a name='L2610'>
<a name='L2611'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyTextIOWrapper_Type = <font color='red'>{</font>
<a name='L2612'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L2613'>    "_io.TextIOWrapper",        <i><font color='green'>/*tp_name*/</font></i>
<a name='L2614'>    <b>sizeof</b>(<a href='../S/2575.html#L693' title='Defined at 693 in Modules/_io/textio.c.'>textio</a>), <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L2615'>    0,                          <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L2616'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2575.html#L1096' title='Defined at 1096 in Modules/_io/textio.c.'>textiowrapper_dealloc</a>, <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L2617'>    0,                          <i><font color='green'>/*tp_print*/</font></i>
<a name='L2618'>    0,                          <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L2619'>    0,                          <i><font color='green'>/*tps_etattr*/</font></i>
<a name='L2620'>    0,                          <i><font color='green'>/*tp_compare */</font></i>
<a name='L2621'>    (reprfunc)<a href='../S/2575.html#L2324' title='Defined at 2324 in Modules/_io/textio.c.'>textiowrapper_repr</a>,<i><font color='green'>/*tp_repr*/</font></i>
<a name='L2622'>    0,                          <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L2623'>    0,                          <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L2624'>    0,                          <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L2625'>    0,                          <i><font color='green'>/*tp_hash */</font></i>
<a name='L2626'>    0,                          <i><font color='green'>/*tp_call*/</font></i>
<a name='L2627'>    0,                          <i><font color='green'>/*tp_str*/</font></i>
<a name='L2628'>    0,                          <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L2629'>    0,                          <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L2630'>    0,                          <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L2631'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE
<a name='L2632'>            | Py_TPFLAGS_HAVE_GC, <i><font color='green'>/*tp_flags*/</font></i>
<a name='L2633'>    textiowrapper_doc,          <i><font color='green'>/* tp_doc */</font></i>
<a name='L2634'>    (traverseproc)<a href='../S/2575.html#L1109' title='Defined at 1109 in Modules/_io/textio.c.'>textiowrapper_traverse</a>, <i><font color='green'>/* tp_traverse */</font></i>
<a name='L2635'>    (inquiry)<a href='../S/2575.html#L1127' title='Defined at 1127 in Modules/_io/textio.c.'>textiowrapper_clear</a>, <i><font color='green'>/* tp_clear */</font></i>
<a name='L2636'>    0,                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L2637'>    <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2575.html#L693' title='Defined at 693 in Modules/_io/textio.c.'>textio</a>, weakreflist), <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L2638'>    0,                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L2639'>    (iternextfunc)<a href='../S/2575.html#L2469' title='Defined at 2469 in Modules/_io/textio.c.'>textiowrapper_iternext</a>, <i><font color='green'>/* tp_iternext */</font></i>
<a name='L2640'>    textiowrapper_methods,      <i><font color='green'>/* tp_methods */</font></i>
<a name='L2641'>    textiowrapper_members,      <i><font color='green'>/* tp_members */</font></i>
<a name='L2642'>    textiowrapper_getset,       <i><font color='green'>/* tp_getset */</font></i>
<a name='L2643'>    0,                          <i><font color='green'>/* tp_base */</font></i>
<a name='L2644'>    0,                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L2645'>    0,                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L2646'>    0,                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L2647'>    <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2575.html#L693' title='Defined at 693 in Modules/_io/textio.c.'>textio</a>, dict), <i><font color='green'>/*tp_dictoffset*/</font></i>
<a name='L2648'>    (initproc)<a href='../S/2575.html#L809' title='Defined at 809 in Modules/_io/textio.c.'>textiowrapper_init</a>, <i><font color='green'>/* tp_init */</font></i>
<a name='L2649'>    0,                          <i><font color='green'>/* tp_alloc */</font></i>
<a name='L2650'>    <a href='../S/2824.html#L730' title='Defined at 730 in Objects/typeobject.c.'>PyType_GenericNew</a>,          <i><font color='green'>/* tp_new */</font></i>
<a name='L2651'><font color='red'>}</font>;
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L25'>[^]</a><a href='#L2555'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
