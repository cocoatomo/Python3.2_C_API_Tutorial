<html>
<head>
<title>Modules/_pickle.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/_pickle.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L140'>[^]</a><a href='#L6309'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L140' title='Defined at 140.'>stack_underflow</a>
<li><a href='#L154' title='Defined at 154.'>Pdata_dealloc</a>
<li><a href='#L173' title='Defined at 173.'>Pdata_New</a>
<li><a href='#L193' title='Defined at 193.'>Pdata_clear</a>
<li><a href='#L210' title='Defined at 210.'>Pdata_grow</a>
<li><a href='#L241' title='Defined at 241.'>Pdata_pop</a>
<li><a href='#L252' title='Defined at 252.'>Pdata_push</a>
<li><a href='#L271' title='Defined at 271.'>Pdata_poptuple</a>
<li><a href='#L288' title='Defined at 288.'>Pdata_poplist</a>
<li><a href='#L399' title='Defined at 399.'>PyMemoTable_New</a>
<li><a href='#L422' title='Defined at 422.'>PyMemoTable_Copy</a>
<li><a href='#L450' title='Defined at 450.'>PyMemoTable_Size</a>
<li><a href='#L456' title='Defined at 456.'>PyMemoTable_Clear</a>
<li><a href='#L469' title='Defined at 469.'>PyMemoTable_Del</a>
<li><a href='#L482' title='Defined at 482.'>_PyMemoTable_Lookup</a>
<li><a href='#L508' title='Defined at 508.'>_PyMemoTable_ResizeTable</a>
<li><a href='#L560' title='Defined at 560.'>PyMemoTable_Get</a>
<li><a href='#L570' title='Defined at 570.'>PyMemoTable_Set</a>
<li><a href='#L650' title='Defined at 650.'>_Pickler_FastCall</a>
<li><a href='#L663' title='Defined at 663.'>_Pickler_ClearBuffer</a>
<li><a href='#L675' title='Defined at 675.'>_Pickler_GetString</a>
<li><a href='#L688' title='Defined at 688.'>_Pickler_FlushToFile</a>
<li><a href='#L704' title='Defined at 704.'>_Pickler_Write</a>
<li><a href='#L758' title='Defined at 758.'>_Pickler_New</a>
<li><a href='#L793' title='Defined at 793.'>_Pickler_SetProtocol</a>
<li><a href='#L827' title='Defined at 827.'>_Pickler_SetOutputStream</a>
<li><a href='#L843' title='Defined at 843.'>_Unpickler_FastCall</a>
<li><a href='#L858' title='Defined at 858.'>_Unpickler_SetStringInput</a>
<li><a href='#L872' title='Defined at 872.'>_Unpickler_SkipConsumed</a>
<li><a href='#L906' title='Defined at 906.'>_Unpickler_ReadFromFile</a>
<li><a href='#L976' title='Defined at 976.'>_Unpickler_Read</a>
<li><a href='#L1007' title='Defined at 1007.'>_Unpickler_CopyLine</a>
<li><a href='#L1026' title='Defined at 1026.'>_Unpickler_Readline</a>
<li><a href='#L1058' title='Defined at 1058.'>_Unpickler_ResizeMemoList</a>
<li><a href='#L1079' title='Defined at 1079.'>_Unpickler_MemoGet</a>
<li><a href='#L1090' title='Defined at 1090.'>_Unpickler_MemoPut</a>
<li><a href='#L1107' title='Defined at 1107.'>_Unpickler_NewMemo</a>
<li><a href='#L1118' title='Defined at 1118.'>_Unpickler_MemoCleanup</a>
<li><a href='#L1134' title='Defined at 1134.'>_Unpickler_New</a>
<li><a href='#L1180' title='Defined at 1180.'>_Unpickler_SetInputStream</a>
<li><a href='#L1206' title='Defined at 1206.'>_Unpickler_SetInputEncoding</a>
<li><a href='#L1226' title='Defined at 1226.'>memo_get</a>
<li><a href='#L1273' title='Defined at 1273.'>memo_put</a>
<li><a href='#L1325' title='Defined at 1325.'>whichmodule</a>
<li><a href='#L1409' title='Defined at 1409.'>fast_save_enter</a>
<li><a href='#L1444' title='Defined at 1444.'>fast_save_leave</a>
<li><a href='#L1460' title='Defined at 1460.'>save_none</a>
<li><a href='#L1470' title='Defined at 1470.'>save_bool</a>
<li><a href='#L1488' title='Defined at 1488.'>save_int</a>
<li><a href='#L1536' title='Defined at 1536.'>save_long</a>
<li><a href='#L1660' title='Defined at 1660.'>save_float</a>
<li><a href='#L1702' title='Defined at 1702.'>save_bytes</a>
<li><a href='#L1771' title='Defined at 1771.'>raw_unicode_escape</a>
<li><a href='#L1861' title='Defined at 1861.'>save_unicode</a>
<li><a href='#L1922' title='Defined at 1922.'>store_tuple_elements</a>
<li><a href='#L1947' title='Defined at 1947.'>save_tuple</a>
<li><a href='#L2053' title='Defined at 2053.'>batch_list</a>
<li><a href='#L2169' title='Defined at 2169.'>batch_list_exact</a>
<li><a href='#L2214' title='Defined at 2214.'>save_list</a>
<li><a href='#L2288' title='Defined at 2288.'>batch_dict</a>
<li><a href='#L2419' title='Defined at 2419.'>batch_dict_exact</a>
<li><a href='#L2473' title='Defined at 2473.'>save_dict</a>
<li><a href='#L2543' title='Defined at 2543.'>save_global</a>
<li><a href='#L2797' title='Defined at 2797.'>save_pers</a>
<li><a href='#L2854' title='Defined at 2854.'>save_reduce</a>
<li><a href='#L3047' title='Defined at 3047.'>save</a>
<li><a href='#L3242' title='Defined at 3242.'>dump</a>
<li><a href='#L3272' title='Defined at 3272.'>Pickler_clear_memo</a>
<li><a href='#L3284' title='Defined at 3284.'>Pickler_dump</a>
<li><a href='#L3322' title='Defined at 3322.'>Pickler_dealloc</a>
<li><a href='#L3338' title='Defined at 3338.'>Pickler_traverse</a>
<li><a href='#L3348' title='Defined at 3348.'>Pickler_clear</a>
<li><a href='#L3390' title='Defined at 3390.'>Pickler_init</a>
<li><a href='#L3459' title='Defined at 3459.'>pmp_clear</a>
<li><a href='#L3470' title='Defined at 3470.'>pmp_copy</a>
<li><a href='#L3511' title='Defined at 3511.'>pmp_reduce</a>
<li><a href='#L3544' title='Defined at 3544.'>PicklerMemoProxy_dealloc</a>
<li><a href='#L3552' title='Defined at 3552.'>PicklerMemoProxy_traverse</a>
<li><a href='#L3560' title='Defined at 3560.'>PicklerMemoProxy_clear</a>
<li><a href='#L3598' title='Defined at 3598.'>PicklerMemoProxy_New</a>
<li><a href='#L3614' title='Defined at 3614.'>Pickler_get_memo</a>
<li><a href='#L3620' title='Defined at 3620.'>Pickler_set_memo</a>
<li><a href='#L3682' title='Defined at 3682.'>Pickler_get_persid</a>
<li><a href='#L3692' title='Defined at 3692.'>Pickler_set_persid</a>
<li><a href='#L3780' title='Defined at 3780.'>find_class</a>
<li><a href='#L3787' title='Defined at 3787.'>marker</a>
<li><a href='#L3798' title='Defined at 3798.'>load_none</a>
<li><a href='#L3805' title='Defined at 3805.'>bad_readline</a>
<li><a href='#L3812' title='Defined at 3812.'>load_int</a>
<li><a href='#L3857' title='Defined at 3857.'>load_bool</a>
<li><a href='#L3870' title='Defined at 3870.'>calc_binint</a>
<li><a href='#L3892' title='Defined at 3892.'>load_binintx</a>
<li><a href='#L3907' title='Defined at 3907.'>load_binint</a>
<li><a href='#L3918' title='Defined at 3918.'>load_binint1</a>
<li><a href='#L3929' title='Defined at 3929.'>load_binint2</a>
<li><a href='#L3940' title='Defined at 3940.'>load_long</a>
<li><a href='#L3970' title='Defined at 3970.'>load_counted_long</a>
<li><a href='#L4004' title='Defined at 4004.'>load_float</a>
<li><a href='#L4033' title='Defined at 4033.'>load_binfloat</a>
<li><a href='#L4054' title='Defined at 4054.'>load_string</a>
<li><a href='#L4105' title='Defined at 4105.'>load_binbytes</a>
<li><a href='#L4132' title='Defined at 4132.'>load_short_binbytes</a>
<li><a href='#L4155' title='Defined at 4155.'>load_binstring</a>
<li><a href='#L4184' title='Defined at 4184.'>load_short_binstring</a>
<li><a href='#L4208' title='Defined at 4208.'>load_unicode</a>
<li><a href='#L4228' title='Defined at 4228.'>load_binunicode</a>
<li><a href='#L4256' title='Defined at 4256.'>load_tuple</a>
<li><a href='#L4272' title='Defined at 4272.'>load_counted_tuple</a>
<li><a href='#L4293' title='Defined at 4293.'>load_empty_list</a>
<li><a href='#L4304' title='Defined at 4304.'>load_empty_dict</a>
<li><a href='#L4315' title='Defined at 4315.'>load_list</a>
<li><a href='#L4331' title='Defined at 4331.'>load_dict</a>
<li><a href='#L4357' title='Defined at 4357.'>instantiate</a>
<li><a href='#L4375' title='Defined at 4375.'>load_obj</a>
<li><a href='#L4401' title='Defined at 4401.'>load_inst</a>
<li><a href='#L4454' title='Defined at 4454.'>load_newobj</a>
<li><a href='#L4504' title='Defined at 4504.'>load_global</a>
<li><a href='#L4540' title='Defined at 4540.'>load_persid</a>
<li><a href='#L4574' title='Defined at 4574.'>load_binpersid</a>
<li><a href='#L4601' title='Defined at 4601.'>load_pop</a>
<li><a href='#L4625' title='Defined at 4625.'>load_pop_mark</a>
<li><a href='#L4638' title='Defined at 4638.'>load_dup</a>
<li><a href='#L4651' title='Defined at 4651.'>load_get</a>
<li><a href='#L4686' title='Defined at 4686.'>load_binget</a>
<li><a href='#L4711' title='Defined at 4711.'>load_long_binget</a>
<li><a href='#L4742' title='Defined at 4742.'>load_extension</a>
<li><a href='#L4810' title='Defined at 4810.'>load_put</a>
<li><a href='#L4837' title='Defined at 4837.'>load_binput</a>
<li><a href='#L4856' title='Defined at 4856.'>load_long_binput</a>
<li><a href='#L4878' title='Defined at 4878.'>do_append</a>
<li><a href='#L4929' title='Defined at 4929.'>load_append</a>
<li><a href='#L4935' title='Defined at 4935.'>load_appends</a>
<li><a href='#L4941' title='Defined at 4941.'>do_setitems</a>
<li><a href='#L4977' title='Defined at 4977.'>load_setitem</a>
<li><a href='#L4983' title='Defined at 4983.'>load_setitems</a>
<li><a href='#L4989' title='Defined at 4989.'>load_build</a>
<li><a href='#L5103' title='Defined at 5103.'>load_mark</a>
<li><a href='#L5141' title='Defined at 5141.'>load_reduce</a>
<li><a href='#L5168' title='Defined at 5168.'>load_proto</a>
<li><a href='#L5187' title='Defined at 5187.'>load</a>
<li><a href='#L5303' title='Defined at 5303.'>Unpickler_load</a>
<li><a href='#L5334' title='Defined at 5334.'>Unpickler_find_class</a>
<li><a href='#L5427' title='Defined at 5427.'>Unpickler_dealloc</a>
<li><a href='#L5451' title='Defined at 5451.'>Unpickler_traverse</a>
<li><a href='#L5463' title='Defined at 5463.'>Unpickler_clear</a>
<li><a href='#L5513' title='Defined at 5513.'>Unpickler_init</a>
<li><a href='#L5601' title='Defined at 5601.'>ump_clear</a>
<li><a href='#L5614' title='Defined at 5614.'>ump_copy</a>
<li><a href='#L5648' title='Defined at 5648.'>ump_reduce</a>
<li><a href='#L5682' title='Defined at 5682.'>UnpicklerMemoProxy_dealloc</a>
<li><a href='#L5690' title='Defined at 5690.'>UnpicklerMemoProxy_traverse</a>
<li><a href='#L5698' title='Defined at 5698.'>UnpicklerMemoProxy_clear</a>
<li><a href='#L5736' title='Defined at 5736.'>UnpicklerMemoProxy_New</a>
<li><a href='#L5754' title='Defined at 5754.'>Unpickler_get_memo</a>
<li><a href='#L5760' title='Defined at 5760.'>Unpickler_set_memo</a>
<li><a href='#L5834' title='Defined at 5834.'>Unpickler_get_persload</a>
<li><a href='#L5844' title='Defined at 5844.'>Unpickler_set_persload</a>
<li><a href='#L5942' title='Defined at 5942.'>pickle_dump</a>
<li><a href='#L6006' title='Defined at 6006.'>pickle_dumps</a>
<li><a href='#L6071' title='Defined at 6071.'>pickle_load</a>
<li><a href='#L6134' title='Defined at 6134.'>pickle_loads</a>
<li><a href='#L6193' title='Defined at 6193.'>initmodule</a>
<li><a href='#L6309' title='Defined at 6309.'>PyInit__pickle</a>
</ol>
<hr>
<pre>
<a name='L1'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L2'><font color='darkred'>#include</font> "<a href='577.html'>structmember.h</a>"
<a name='L3'>
<a name='L4'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pickle_module_doc,
<a name='L5'>"Optimized C implementation for the Python pickle module.");
<a name='L6'>
<a name='L7'><i><font color='green'>/* Bump this when new opcodes are added to the pickle protocol. */</font></i>
<a name='L8'><b>enum</b> <font color='red'>{</font>
<a name='L9'>    <a href='../R/1461.html' title='Multiple refered from 4 places.'>HIGHEST_PROTOCOL</a> = 3,
<a name='L10'>    <a href='../S/2588.html#L800' title='Refered from 800 in Modules/_pickle.c.'>DEFAULT_PROTOCOL</a> = 3
<a name='L11'><font color='red'>}</font>;
<a name='L12'>
<a name='L13'><i><font color='green'>/* Pickle opcodes. These must be kept updated with pickle.py.</font></i>
<a name='L14'><i><font color='green'>   Extensive docs are in pickletools.py. */</font></i>
<a name='L15'><b>enum</b> <a href='../R/9374.html' title='Multiple refered from 59 places.'>opcode</a> <font color='red'>{</font>
<a name='L16'>    <a href='../R/1826.html' title='Multiple refered from 9 places.'>MARK</a>            = '(',
<a name='L17'>    <a href='../R/4366.html' title='Multiple refered from 2 places.'>STOP</a>            = '.',
<a name='L18'>    <a href='../R/2272.html' title='Multiple refered from 75 places.'>POP</a>             = '0',
<a name='L19'>    <a href='../R/2277.html' title='Multiple refered from 2 places.'>POP_MARK</a>        = '1',
<a name='L20'>    <a href='../S/2588.html#L5242' title='Refered from 5242 in Modules/_pickle.c.'>DUP</a>             = '2',
<a name='L21'>    <a href='../R/1139.html' title='Multiple refered from 2 places.'>FLOAT</a>           = 'F',
<a name='L22'>    <a href='../R/1552.html' title='Multiple refered from 4 places.'>INT</a>             = 'I',
<a name='L23'>    <a href='../R/253.html' title='Multiple refered from 2 places.'>BININT</a>          = 'J',
<a name='L24'>    <a href='../R/254.html' title='Multiple refered from 2 places.'>BININT1</a>         = 'K',
<a name='L25'>    <a href='../R/1758.html' title='Multiple refered from 16 places.'>LONG</a>            = 'L',
<a name='L26'>    <a href='../R/255.html' title='Multiple refered from 2 places.'>BININT2</a>         = 'M',
<a name='L27'>    <a href='../R/2100.html' title='Multiple refered from 33 places.'>NONE</a>            = 'N',
<a name='L28'>    <a href='../R/2251.html' title='Multiple refered from 2 places.'>PERSID</a>          = 'P',
<a name='L29'>    <a href='../R/256.html' title='Multiple refered from 2 places.'>BINPERSID</a>       = 'Q',
<a name='L30'>    <a href='../R/3915.html' title='Multiple refered from 3 places.'>REDUCE</a>          = 'R',
<a name='L31'>    <a href='../R/4384.html' title='Multiple refered from 9 places.'>STRING</a>          = 'S',
<a name='L32'>    <a href='../S/2588.html#L5221' title='Refered from 5221 in Modules/_pickle.c.'>BINSTRING</a>       = 'T',
<a name='L33'>    <a href='../S/2588.html#L5222' title='Refered from 5222 in Modules/_pickle.c.'>SHORT_BINSTRING</a> = 'U',
<a name='L34'>    <a href='../R/4729.html' title='Multiple refered from 2 places.'>UNICODE</a>         = 'V',
<a name='L35'>    <a href='../R/261.html' title='Multiple refered from 2 places.'>BINUNICODE</a>      = 'X',
<a name='L36'>    <a href='../R/61.html' title='Multiple refered from 17 places.'>APPEND</a>          = 'a',
<a name='L37'>    <a href='../R/330.html' title='Multiple refered from 2 places.'>BUILD</a>           = 'b',
<a name='L38'>    <a href='../R/1267.html' title='Multiple refered from 2 places.'>GLOBAL</a>          = 'c',
<a name='L39'>    <a href='../R/731.html' title='Multiple refered from 7 places.'>DICT</a>            = 'd',
<a name='L40'>    <a href='../R/836.html' title='Multiple refered from 2 places.'>EMPTY_DICT</a>      = '}',
<a name='L41'>    <a href='../R/62.html' title='Multiple refered from 3 places.'>APPENDS</a>         = 'e',
<a name='L42'>    <a href='../R/1231.html' title='Multiple refered from 6 places.'>GET</a>             = 'g',
<a name='L43'>    <a href='../R/252.html' title='Multiple refered from 2 places.'>BINGET</a>          = 'h',
<a name='L44'>    <a href='../S/2588.html#L5236' title='Refered from 5236 in Modules/_pickle.c.'>INST</a>            = 'i',
<a name='L45'>    <a href='../R/1764.html' title='Multiple refered from 2 places.'>LONG_BINGET</a>     = 'j',
<a name='L46'>    <a href='../R/1727.html' title='Multiple refered from 2 places.'>LIST</a>            = 'l',
<a name='L47'>    <a href='../R/837.html' title='Multiple refered from 2 places.'>EMPTY_LIST</a>      = ']',
<a name='L48'>    <a href='../S/2588.html#L5235' title='Refered from 5235 in Modules/_pickle.c.'>OBJ</a>             = 'o',
<a name='L49'>    <a href='../R/2322.html' title='Multiple refered from 6 places.'>PUT</a>             = 'p',
<a name='L50'>    <a href='../R/257.html' title='Multiple refered from 2 places.'>BINPUT</a>          = 'q',
<a name='L51'>    <a href='../R/1765.html' title='Multiple refered from 2 places.'>LONG_BINPUT</a>     = 'r',
<a name='L52'>    <a href='../R/4061.html' title='Multiple refered from 3 places.'>SETITEM</a>         = 's',
<a name='L53'>    <a href='../R/4573.html' title='Multiple refered from 3 places.'>TUPLE</a>           = 't',
<a name='L54'>    <a href='../R/840.html' title='Multiple refered from 3 places.'>EMPTY_TUPLE</a>     = ')',
<a name='L55'>    <a href='../R/4062.html' title='Multiple refered from 3 places.'>SETITEMS</a>        = 'u',
<a name='L56'>    <a href='../R/251.html' title='Multiple refered from 2 places.'>BINFLOAT</a>        = 'G',
<a name='L57'>
<a name='L58'>    <i><font color='green'>/* Protocol 2. */</font></i>
<a name='L59'>    <a href='../R/2309.html' title='Multiple refered from 2 places.'>PROTO</a>       = '\x80',
<a name='L60'>    <a href='../R/2072.html' title='Multiple refered from 2 places.'>NEWOBJ</a>      = '\x81',
<a name='L61'>    <a href='../R/926.html' title='Multiple refered from 2 places.'>EXT1</a>        = '\x82',
<a name='L62'>    <a href='../R/927.html' title='Multiple refered from 2 places.'>EXT2</a>        = '\x83',
<a name='L63'>    <a href='../R/928.html' title='Multiple refered from 2 places.'>EXT4</a>        = '\x84',
<a name='L64'>    <a href='../R/4574.html' title='Multiple refered from 2 places.'>TUPLE1</a>      = '\x85',
<a name='L65'>    <a href='../R/4575.html' title='Multiple refered from 2 places.'>TUPLE2</a>      = '\x86',
<a name='L66'>    <a href='../R/4576.html' title='Multiple refered from 2 places.'>TUPLE3</a>      = '\x87',
<a name='L67'>    <a href='../R/2073.html' title='Multiple refered from 2 places.'>NEWTRUE</a>     = '\x88',
<a name='L68'>    <a href='../R/2067.html' title='Multiple refered from 2 places.'>NEWFALSE</a>    = '\x89',
<a name='L69'>    <a href='../R/1759.html' title='Multiple refered from 3 places.'>LONG1</a>       = '\x8a',
<a name='L70'>    <a href='../R/1760.html' title='Multiple refered from 2 places.'>LONG4</a>       = '\x8b',
<a name='L71'>
<a name='L72'>    <i><font color='green'>/* Protocol 3 (Python 3.x) */</font></i>
<a name='L73'>    <a href='../R/249.html' title='Multiple refered from 2 places.'>BINBYTES</a>       = 'B',
<a name='L74'>    <a href='../R/4133.html' title='Multiple refered from 2 places.'>SHORT_BINBYTES</a> = 'C'
<a name='L75'><font color='red'>}</font>;
<a name='L76'>
<a name='L77'><i><font color='green'>/* These aren't opcodes -- they're ways to pickle bools before protocol 2</font></i>
<a name='L78'><i><font color='green'> * so that unpicklers written before bools were introduced unpickle them</font></i>
<a name='L79'><i><font color='green'> * as ints, but unpicklers after can recognize that bools were intended.</font></i>
<a name='L80'><i><font color='green'> * Note that protocol 2 added direct ways to pickle bools.</font></i>
<a name='L81'><i><font color='green'> */</font></i>
<a name='L82'><font color='darkred'>#undef</font> <a href='../R/4567.html' title='Multiple refered from 105 places.'>TRUE</a>
<a name='L83'><font color='darkred'>#define</font> <a href='../R/4567.html' title='Multiple refered from 105 places.'>TRUE</a>  "I01\n"
<a name='L84'><font color='darkred'>#undef</font> <a href='../R/993.html' title='Multiple refered from 135 places.'>FALSE</a>
<a name='L85'><font color='darkred'>#define</font> <a href='../R/993.html' title='Multiple refered from 135 places.'>FALSE</a> "I00\n"
<a name='L86'>
<a name='L87'><b>enum</b> <font color='red'>{</font>
<a name='L88'>   <i><font color='green'>/* Keep in synch with pickle.Pickler._BATCHSIZE.  This is how many elements</font></i>
<a name='L89'><i><font color='green'>      batch_list/dict() pumps out before doing APPENDS/SETITEMS.  Nothing will</font></i>
<a name='L90'><i><font color='green'>      break if this gets out of synch with pickle.py, but it's unclear that would</font></i>
<a name='L91'><i><font color='green'>      help anything either. */</font></i>
<a name='L92'>    <a href='../R/219.html' title='Multiple refered from 7 places.'>BATCHSIZE</a> = 1000,
<a name='L93'>
<a name='L94'>    <i><font color='green'>/* Nesting limit until Pickler, when running in "fast mode", starts</font></i>
<a name='L95'><i><font color='green'>       checking for self-referential data-structures. */</font></i>
<a name='L96'>    <a href='../R/999.html' title='Multiple refered from 2 places.'>FAST_NESTING_LIMIT</a> = 50,
<a name='L97'>
<a name='L98'>    <i><font color='green'>/* Initial size of the write buffer of Pickler. */</font></i>
<a name='L99'>    <a href='../R/4922.html' title='Multiple refered from 2 places.'>WRITE_BUF_SIZE</a> = 4096,
<a name='L100'>
<a name='L101'>    <i><font color='green'>/* Maximum size of the write buffer of Pickler when pickling to a</font></i>
<a name='L102'><i><font color='green'>       stream.  This is ignored for in-memory pickling. */</font></i>
<a name='L103'>    <a href='../R/1886.html' title='Multiple refered from 2 places.'>MAX_WRITE_BUF_SIZE</a> = 64 * 1024,
<a name='L104'>
<a name='L105'>    <i><font color='green'>/* Prefetch size when unpickling (disabled on unpeekable streams) */</font></i>
<a name='L106'>    <a href='../S/2588.html#L930' title='Refered from 930 in Modules/_pickle.c.'>PREFETCH</a> = 8192 * 16
<a name='L107'><font color='red'>}</font>;
<a name='L108'>
<a name='L109'><i><font color='green'>/* Exception classes for pickle. These should override the ones defined in</font></i>
<a name='L110'><i><font color='green'>   pickle.py, when the C-optimized Pickler and Unpickler are used. */</font></i>
<a name='L111'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PickleError = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L112'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PicklingError = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L113'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *UnpicklingError = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L114'>
<a name='L115'><i><font color='green'>/* copyreg.dispatch_table, {type_object: pickling_function} */</font></i>
<a name='L116'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dispatch_table = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L117'><i><font color='green'>/* For EXT[124] opcodes. */</font></i>
<a name='L118'><i><font color='green'>/* copyreg._extension_registry, {(module_name, function_name): code} */</font></i>
<a name='L119'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *extension_registry = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L120'><i><font color='green'>/* copyreg._inverted_registry, {code: (module_name, function_name)} */</font></i>
<a name='L121'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *inverted_registry = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L122'><i><font color='green'>/* copyreg._extension_cache, {code: object} */</font></i>
<a name='L123'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *extension_cache = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L124'>
<a name='L125'><i><font color='green'>/* _compat_pickle.NAME_MAPPING, {(oldmodule, oldname): (newmodule, newname)} */</font></i>
<a name='L126'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *name_mapping_2to3 = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L127'><i><font color='green'>/* _compat_pickle.IMPORT_MAPPING, {oldmodule: newmodule} */</font></i>
<a name='L128'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *import_mapping_2to3 = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L129'><i><font color='green'>/* Same, but with REVERSE_NAME_MAPPING / REVERSE_IMPORT_MAPPING */</font></i>
<a name='L130'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *name_mapping_3to2 = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L131'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *import_mapping_3to2 = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L132'>
<a name='L133'><i><font color='green'>/* XXX: Are these really nescessary? */</font></i>
<a name='L134'><i><font color='green'>/* As the name says, an empty tuple. */</font></i>
<a name='L135'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *empty_tuple = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L136'><i><font color='green'>/* For looking up name pairs in copyreg._extension_registry. */</font></i>
<a name='L137'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *two_tuple = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L138'>
<a name='L139'><b>static</b> <b>int</b>
<a name='L140'><a href='../R/10492.html' title='Multiple refered from 9 places.'>stack_underflow</a>(<b>void</b>)
<a name='L141'><font color='red'>{</font>
<a name='L142'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "unpickling stack underflow");
<a name='L143'>    <b>return</b> -1;
<a name='L144'><font color='red'>}</font>
<a name='L145'>
<a name='L146'><i><font color='green'>/* Internal data type used as the unpickling stack. */</font></i>
<a name='L147'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L148'>    <a href='../S/544.html#L97' title='Defined at 97 in Include/object.h.'>PyObject_VAR_HEAD</a>
<a name='L149'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **data;
<a name='L150'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> allocated;  <i><font color='green'>/* number of slots in data allocated */</font></i>
<a name='L151'><font color='red'>}</font> <a href='../R/2426.html' title='Multiple refered from 6 places.'>Pdata</a>;
<a name='L152'>
<a name='L153'><b>static</b> <b>void</b>
<a name='L154'><a href='../S/2588.html#L169' title='Refered from 169 in Modules/_pickle.c.'>Pdata_dealloc</a>(Pdata *self)
<a name='L155'><font color='red'>{</font>
<a name='L156'>    <b>int</b> i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self);
<a name='L157'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L158'>        Py_DECREF(self-&gt;data[i]);
<a name='L159'>    <font color='red'>}</font>
<a name='L160'>    PyMem_FREE(self-&gt;data);
<a name='L161'>    PyObject_Del(self);
<a name='L162'><font color='red'>}</font>
<a name='L163'>
<a name='L164'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Pdata_Type = <font color='red'>{</font>
<a name='L165'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L166'>    "_pickle.Pdata",              <i><font color='green'>/*tp_name*/</font></i>
<a name='L167'>    <b>sizeof</b>(<a href='../S/2588.html#L151' title='Defined at 151 in Modules/_pickle.c.'>Pdata</a>),                <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L168'>    0,                            <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L169'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2588.html#L154' title='Defined at 154 in Modules/_pickle.c.'>Pdata_dealloc</a>,    <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L170'><font color='red'>}</font>;
<a name='L171'>
<a name='L172'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L173'><a href='../R/2427.html' title='Multiple refered from 2 places.'>Pdata_New</a>(<b>void</b>)
<a name='L174'><font color='red'>{</font>
<a name='L175'>    <a href='../S/2588.html#L151' title='Defined at 151 in Modules/_pickle.c.'>Pdata</a> *self;
<a name='L176'>
<a name='L177'>    <b>if</b> (!(self = PyObject_New(<a href='../S/2588.html#L151' title='Defined at 151 in Modules/_pickle.c.'>Pdata</a>, &amp;Pdata_Type)))
<a name='L178'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L179'>    <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self) = 0;
<a name='L180'>    self-&gt;allocated = 8;
<a name='L181'>    self-&gt;data = PyMem_MALLOC(self-&gt;allocated * <b>sizeof</b>(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *));
<a name='L182'>    <b>if</b> (self-&gt;data)
<a name='L183'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self;
<a name='L184'>    Py_DECREF(self);
<a name='L185'>    <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L186'><font color='red'>}</font>
<a name='L187'>
<a name='L188'>
<a name='L189'><i><font color='green'>/* Retain only the initial clearto items.  If clearto &gt;= the current</font></i>
<a name='L190'><i><font color='green'> * number of items, this is a (non-erroneous) NOP.</font></i>
<a name='L191'><i><font color='green'> */</font></i>
<a name='L192'><b>static</b> <b>int</b>
<a name='L193'><a href='../R/2428.html' title='Multiple refered from 5 places.'>Pdata_clear</a>(Pdata *self, <b>int</b> clearto)
<a name='L194'><font color='red'>{</font>
<a name='L195'>    <b>int</b> i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self);
<a name='L196'>
<a name='L197'>    <b>if</b> (clearto &lt; 0)
<a name='L198'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L199'>    <b>if</b> (clearto &gt;= i)
<a name='L200'>        <b>return</b> 0;
<a name='L201'>
<a name='L202'>    <b>while</b> (--i &gt;= clearto) <font color='red'>{</font>
<a name='L203'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;data[i]);
<a name='L204'>    <font color='red'>}</font>
<a name='L205'>    <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self) = clearto;
<a name='L206'>    <b>return</b> 0;
<a name='L207'><font color='red'>}</font>
<a name='L208'>
<a name='L209'><b>static</b> <b>int</b>
<a name='L210'><a href='../S/2588.html#L254' title='Refered from 254 in Modules/_pickle.c.'>Pdata_grow</a>(Pdata *self)
<a name='L211'><font color='red'>{</font>
<a name='L212'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **data = self-&gt;data;
<a name='L213'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> allocated = self-&gt;allocated;
<a name='L214'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> new_allocated;
<a name='L215'>
<a name='L216'>    new_allocated = (allocated &gt;&gt; 3) + 6;
<a name='L217'>    <i><font color='green'>/* check for integer overflow */</font></i>
<a name='L218'>    <b>if</b> (new_allocated &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - allocated)
<a name='L219'>        <b>goto</b> nomemory;
<a name='L220'>    new_allocated += allocated;
<a name='L221'>    <b>if</b> (new_allocated &gt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / <b>sizeof</b>(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)))
<a name='L222'>        <b>goto</b> nomemory;
<a name='L223'>    data = PyMem_REALLOC(data, new_allocated * <b>sizeof</b>(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *));
<a name='L224'>    <b>if</b> (data == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L225'>        <b>goto</b> nomemory;
<a name='L226'>
<a name='L227'>    self-&gt;data = data;
<a name='L228'>    self-&gt;allocated = new_allocated;
<a name='L229'>    <b>return</b> 0;
<a name='L230'>
<a name='L231'>  nomemory:
<a name='L232'>    <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L233'>    <b>return</b> -1;
<a name='L234'><font color='red'>}</font>
<a name='L235'>
<a name='L236'><i><font color='green'>/* D is a Pdata*.  Pop the topmost element and store it into V, which</font></i>
<a name='L237'><i><font color='green'> * must be an lvalue holding PyObject*.  On stack underflow, UnpicklingError</font></i>
<a name='L238'><i><font color='green'> * is raised and V is set to NULL.</font></i>
<a name='L239'><i><font color='green'> */</font></i>
<a name='L240'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L241'><a href='../S/2588.html#L249' title='Refered from 249 in Modules/_pickle.c.'>Pdata_pop</a>(Pdata *self)
<a name='L242'><font color='red'>{</font>
<a name='L243'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self) == 0) <font color='red'>{</font>
<a name='L244'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "bad pickle data");
<a name='L245'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L246'>    <font color='red'>}</font>
<a name='L247'>    <b>return</b> self-&gt;data[--<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self)];
<a name='L248'><font color='red'>}</font>
<a name='L249'><font color='darkred'>#define</font> <a href='../R/2245.html' title='Multiple refered from 9 places.'>PDATA_POP</a>(<a href='../D/703.html' title='Multiple defined in 3 places.'>D</a>, V) <b>do</b> <font color='red'>{</font> (V) = <a href='../S/2588.html#L241' title='Defined at 241 in Modules/_pickle.c.'>Pdata_pop</a>((D)); <font color='red'>}</font> <b>while</b> (0)
<a name='L250'>
<a name='L251'><b>static</b> <b>int</b>
<a name='L252'><a href='../R/2434.html' title='Multiple refered from 2 places.'>Pdata_push</a>(Pdata *self, PyObject *obj)
<a name='L253'><font color='red'>{</font>
<a name='L254'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self) == self-&gt;allocated &amp;&amp; <a href='../S/2588.html#L210' title='Defined at 210 in Modules/_pickle.c.'>Pdata_grow</a>(self) &lt; 0) <font color='red'>{</font>
<a name='L255'>        <b>return</b> -1;
<a name='L256'>    <font color='red'>}</font>
<a name='L257'>    self-&gt;data[<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self)++] = obj;
<a name='L258'>    <b>return</b> 0;
<a name='L259'><font color='red'>}</font>
<a name='L260'>
<a name='L261'><i><font color='green'>/* Push an object on stack, transferring its ownership to the stack. */</font></i>
<a name='L262'><font color='darkred'>#define</font> <a href='../R/2246.html' title='Multiple refered from 27 places.'>PDATA_PUSH</a>(D, O, ER) <b>do</b> <font color='red'>{</font>                               \
<a name='L263'>        <b>if</b> (<a href='../S/2588.html#L252' title='Defined at 252 in Modules/_pickle.c.'>Pdata_push</a>((<a href='../D/703.html' title='Multiple defined in 3 places.'>D</a>), (O)) &lt; 0) <b>return</b> (ER); <font color='red'>}</font> <b>while</b>(0)
<a name='L264'>
<a name='L265'><i><font color='green'>/* Push an object on stack, adding a new reference to the object. */</font></i>
<a name='L266'><font color='darkred'>#define</font> <a href='../R/2244.html' title='Multiple refered from 7 places.'>PDATA_APPEND</a>(D, O, ER) <b>do</b> <font color='red'>{</font>                             \
<a name='L267'>        Py_INCREF((O));                                         \
<a name='L268'>        <b>if</b> (<a href='../S/2588.html#L252' title='Defined at 252 in Modules/_pickle.c.'>Pdata_push</a>((<a href='../D/703.html' title='Multiple defined in 3 places.'>D</a>), (O)) &lt; 0) <b>return</b> (ER); <font color='red'>}</font> <b>while</b>(0)
<a name='L269'>
<a name='L270'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L271'><a href='../R/2433.html' title='Multiple refered from 3 places.'>Pdata_poptuple</a>(Pdata *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start)
<a name='L272'><font color='red'>{</font>
<a name='L273'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tuple;
<a name='L274'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len, i, j;
<a name='L275'>
<a name='L276'>    len = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self) - start;
<a name='L277'>    tuple = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(len);
<a name='L278'>    <b>if</b> (tuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L279'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L280'>    <b>for</b> (i = start, j = 0; j &lt; len; i++, j++)
<a name='L281'>        PyTuple_SET_ITEM(tuple, j, self-&gt;data[i]);
<a name='L282'>
<a name='L283'>    <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self) = start;
<a name='L284'>    <b>return</b> tuple;
<a name='L285'><font color='red'>}</font>
<a name='L286'>
<a name='L287'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L288'><a href='../R/2432.html' title='Multiple refered from 2 places.'>Pdata_poplist</a>(Pdata *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start)
<a name='L289'><font color='red'>{</font>
<a name='L290'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *list;
<a name='L291'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len, i, j;
<a name='L292'>
<a name='L293'>    len = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self) - start;
<a name='L294'>    list = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(len);
<a name='L295'>    <b>if</b> (list == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L296'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L297'>    <b>for</b> (i = start, j = 0; j &lt; len; i++, j++)
<a name='L298'>        PyList_SET_ITEM(list, j, self-&gt;data[i]);
<a name='L299'>
<a name='L300'>    <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self) = start;
<a name='L301'>    <b>return</b> list;
<a name='L302'><font color='red'>}</font>
<a name='L303'>
<a name='L304'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L305'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *me_key;
<a name='L306'>    <b>long</b> me_value;
<a name='L307'><font color='red'>}</font> <a href='../R/3168.html' title='Multiple refered from 16 places.'>PyMemoEntry</a>;
<a name='L308'>
<a name='L309'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L310'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> mt_mask;
<a name='L311'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> mt_used;
<a name='L312'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> mt_allocated;
<a name='L313'>    <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> *mt_table;
<a name='L314'><font color='red'>}</font> <a href='../R/3169.html' title='Multiple refered from 8 places.'>PyMemoTable</a>;
<a name='L315'>
<a name='L316'><b>typedef</b> <b>struct</b> <a href='../R/2440.html' title='Multiple refered from 10 places.'>PicklerObject</a> <font color='red'>{</font>
<a name='L317'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L318'>    <a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a> *memo;          <i><font color='green'>/* Memo table, keep track of the seen</font></i>
<a name='L319'><i><font color='green'>                                   objects to support self-referential objects</font></i>
<a name='L320'><i><font color='green'>                                   pickling. */</font></i>
<a name='L321'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pers_func;        <i><font color='green'>/* persistent_id() method, can be NULL */</font></i>
<a name='L322'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L323'>
<a name='L324'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *write;            <i><font color='green'>/* write() method of the output stream. */</font></i>
<a name='L325'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *output_buffer;    <i><font color='green'>/* Write into a local bytearray buffer before</font></i>
<a name='L326'><i><font color='green'>                                   flushing to the stream. */</font></i>
<a name='L327'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> output_len;      <i><font color='green'>/* Length of output_buffer. */</font></i>
<a name='L328'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> max_output_len;  <i><font color='green'>/* Allocation size of output_buffer. */</font></i>
<a name='L329'>    <b>int</b> proto;                  <i><font color='green'>/* Pickle protocol number, &gt;= 0 */</font></i>
<a name='L330'>    <b>int</b> bin;                    <i><font color='green'>/* Boolean, true if proto &gt; 0 */</font></i>
<a name='L331'>    <b>int</b> buf_size;               <i><font color='green'>/* Size of the current buffered pickle data */</font></i>
<a name='L332'>    <b>int</b> fast;                   <i><font color='green'>/* Enable fast mode if set to a true value.</font></i>
<a name='L333'><i><font color='green'>                                   The fast mode disable the usage of memo,</font></i>
<a name='L334'><i><font color='green'>                                   therefore speeding the pickling process by</font></i>
<a name='L335'><i><font color='green'>                                   not generating superfluous PUT opcodes. It</font></i>
<a name='L336'><i><font color='green'>                                   should not be used if with self-referential</font></i>
<a name='L337'><i><font color='green'>                                   objects. */</font></i>
<a name='L338'>    <b>int</b> fast_nesting;
<a name='L339'>    <b>int</b> fix_imports;            <i><font color='green'>/* Indicate whether Pickler should fix</font></i>
<a name='L340'><i><font color='green'>                                   the name of globals for Python 2.x. */</font></i>
<a name='L341'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fast_memo;
<a name='L342'><font color='red'>}</font> <a href='../R/2440.html' title='Multiple refered from 10 places.'>PicklerObject</a>;
<a name='L343'>
<a name='L344'><b>typedef</b> <b>struct</b> <a href='../R/4822.html' title='Multiple refered from 8 places.'>UnpicklerObject</a> <font color='red'>{</font>
<a name='L345'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L346'>    <a href='../S/2588.html#L151' title='Defined at 151 in Modules/_pickle.c.'>Pdata</a> *<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>;               <i><font color='green'>/* Pickle data stack, store unpickled objects. */</font></i>
<a name='L347'>
<a name='L348'>    <i><font color='green'>/* The unpickler memo is just an array of PyObject *s. Using a dict</font></i>
<a name='L349'><i><font color='green'>       is unnecessary, since the keys are contiguous ints. */</font></i>
<a name='L350'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **memo;
<a name='L351'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> memo_size;
<a name='L352'>
<a name='L353'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L354'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pers_func;        <i><font color='green'>/* persistent_load() method, can be NULL. */</font></i>
<a name='L355'>
<a name='L356'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L357'>    <b>char</b> *input_buffer;
<a name='L358'>    <b>char</b> *input_line;
<a name='L359'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> input_len;
<a name='L360'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> next_read_idx;
<a name='L361'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> prefetched_idx;  <i><font color='green'>/* index of first prefetched byte */</font></i>
<a name='L362'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *read;             <i><font color='green'>/* read() method of the input stream. */</font></i>
<a name='L363'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *readline;         <i><font color='green'>/* readline() method of the input stream. */</font></i>
<a name='L364'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *peek;             <i><font color='green'>/* peek() method of the input stream, or NULL */</font></i>
<a name='L365'>
<a name='L366'>    <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>;             <i><font color='green'>/* Name of the encoding to be used for</font></i>
<a name='L367'><i><font color='green'>                                   decoding strings pickled using Python</font></i>
<a name='L368'><i><font color='green'>                                   2.x. The default value is "ASCII" */</font></i>
<a name='L369'>    <b>char</b> *errors;               <i><font color='green'>/* Name of errors handling scheme to used when</font></i>
<a name='L370'><i><font color='green'>                                   decoding strings. The default value is</font></i>
<a name='L371'><i><font color='green'>                                   "strict". */</font></i>
<a name='L372'>    <b>int</b> *marks;                 <i><font color='green'>/* Mark stack, used for unpickling container</font></i>
<a name='L373'><i><font color='green'>                                   objects. */</font></i>
<a name='L374'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> num_marks;       <i><font color='green'>/* Number of marks in the mark stack. */</font></i>
<a name='L375'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> marks_size;      <i><font color='green'>/* Current allocated size of the mark stack. */</font></i>
<a name='L376'>    <b>int</b> proto;                  <i><font color='green'>/* Protocol of the pickle loaded. */</font></i>
<a name='L377'>    <b>int</b> fix_imports;            <i><font color='green'>/* Indicate whether Unpickler should fix</font></i>
<a name='L378'><i><font color='green'>                                   the name of globals pickled by Python 2.x. */</font></i>
<a name='L379'><font color='red'>}</font> <a href='../R/4822.html' title='Multiple refered from 8 places.'>UnpicklerObject</a>;
<a name='L380'>
<a name='L381'><i><font color='green'>/* Forward declarations */</font></i>
<a name='L382'><b>static</b> <b>int</b> <a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(PicklerObject *, PyObject *, <b>int</b>);
<a name='L383'><b>static</b> <b>int</b> <a href='../S/2588.html#L2854' title='Defined at 2854 in Modules/_pickle.c.'>save_reduce</a>(PicklerObject *, PyObject *, PyObject *);
<a name='L384'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Pickler_Type;
<a name='L385'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Unpickler_Type;
<a name='L386'>
<a name='L387'>
<a name='L388'><i><font color='green'>/*************************************************************************</font></i>
<a name='L389'><i><font color='green'> A custom hashtable mapping void* to longs. This is used by the pickler for</font></i>
<a name='L390'><i><font color='green'> memoization. Using a custom hashtable rather than PyDict allows us to skip</font></i>
<a name='L391'><i><font color='green'> a bunch of unnecessary object creation. This makes a huge performance</font></i>
<a name='L392'><i><font color='green'> difference. */</font></i>
<a name='L393'>
<a name='L394'><font color='darkred'>#define</font> <a href='../R/1986.html' title='Multiple refered from 5 places.'>MT_MINSIZE</a> 8
<a name='L395'><font color='darkred'>#define</font> <a href='../R/2252.html' title='Multiple refered from 7 places.'>PERTURB_SHIFT</a> 5
<a name='L396'>
<a name='L397'>
<a name='L398'><b>static</b> <a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a> *
<a name='L399'><a href='../R/3174.html' title='Multiple refered from 4 places.'>PyMemoTable_New</a>(<b>void</b>)
<a name='L400'><font color='red'>{</font>
<a name='L401'>    <a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a> *memo = PyMem_MALLOC(<b>sizeof</b>(<a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a>));
<a name='L402'>    <b>if</b> (memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L403'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L404'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L405'>    <font color='red'>}</font>
<a name='L406'>
<a name='L407'>    memo-&gt;mt_used = 0;
<a name='L408'>    memo-&gt;mt_allocated = <a href='../D/2189.html' title='Multiple defined in 2 places.'>MT_MINSIZE</a>;
<a name='L409'>    memo-&gt;mt_mask = <a href='../D/2189.html' title='Multiple defined in 2 places.'>MT_MINSIZE</a> - 1;
<a name='L410'>    memo-&gt;mt_table = PyMem_MALLOC(<a href='../D/2189.html' title='Multiple defined in 2 places.'>MT_MINSIZE</a> * <b>sizeof</b>(<a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a>));
<a name='L411'>    <b>if</b> (memo-&gt;mt_table == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L412'>        PyMem_FREE(memo);
<a name='L413'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L414'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L415'>    <font color='red'>}</font>
<a name='L416'>    memset(memo-&gt;mt_table, 0, <a href='../D/2189.html' title='Multiple defined in 2 places.'>MT_MINSIZE</a> * <b>sizeof</b>(<a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a>));
<a name='L417'>
<a name='L418'>    <b>return</b> memo;
<a name='L419'><font color='red'>}</font>
<a name='L420'>
<a name='L421'><b>static</b> <a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a> *
<a name='L422'><a href='../S/2588.html#L3634' title='Refered from 3634 in Modules/_pickle.c.'>PyMemoTable_Copy</a>(PyMemoTable *self)
<a name='L423'><font color='red'>{</font>
<a name='L424'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L425'>    <a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a> *new = <a href='../S/2588.html#L399' title='Defined at 399 in Modules/_pickle.c.'>PyMemoTable_New</a>();
<a name='L426'>    <b>if</b> (new == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L427'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L428'>
<a name='L429'>    new-&gt;mt_used = self-&gt;mt_used;
<a name='L430'>    new-&gt;mt_allocated = self-&gt;mt_allocated;
<a name='L431'>    new-&gt;mt_mask = self-&gt;mt_mask;
<a name='L432'>    <i><font color='green'>/* The table we get from _New() is probably smaller than we wanted.</font></i>
<a name='L433'><i><font color='green'>       Free it and allocate one that's the right size. */</font></i>
<a name='L434'>    PyMem_FREE(new-&gt;mt_table);
<a name='L435'>    new-&gt;mt_table = PyMem_MALLOC(self-&gt;mt_allocated * <b>sizeof</b>(<a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a>));
<a name='L436'>    <b>if</b> (new-&gt;mt_table == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L437'>        PyMem_FREE(new);
<a name='L438'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L439'>    <font color='red'>}</font>
<a name='L440'>    <b>for</b> (i = 0; i &lt; self-&gt;mt_allocated; i++) <font color='red'>{</font>
<a name='L441'>        <a href='../S/544.html#L766' title='Defined at 766 in Include/object.h.'>Py_XINCREF</a>(self-&gt;mt_table[i].me_key);
<a name='L442'>    <font color='red'>}</font>
<a name='L443'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(new-&gt;mt_table, self-&gt;mt_table,
<a name='L444'>           <b>sizeof</b>(<a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a>) * self-&gt;mt_allocated);
<a name='L445'>
<a name='L446'>    <b>return</b> new;
<a name='L447'><font color='red'>}</font>
<a name='L448'>
<a name='L449'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L450'><a href='../S/2588.html#L1283' title='Refered from 1283 in Modules/_pickle.c.'>PyMemoTable_Size</a>(PyMemoTable *self)
<a name='L451'><font color='red'>{</font>
<a name='L452'>    <b>return</b> self-&gt;mt_used;
<a name='L453'><font color='red'>}</font>
<a name='L454'>
<a name='L455'><b>static</b> <b>int</b>
<a name='L456'><a href='../R/3170.html' title='Multiple refered from 3 places.'>PyMemoTable_Clear</a>(PyMemoTable *self)
<a name='L457'><font color='red'>{</font>
<a name='L458'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = self-&gt;mt_allocated;
<a name='L459'>
<a name='L460'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L461'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;mt_table[i].me_key);
<a name='L462'>    <font color='red'>}</font>
<a name='L463'>    self-&gt;mt_used = 0;
<a name='L464'>    memset(self-&gt;mt_table, 0, self-&gt;mt_allocated * <b>sizeof</b>(<a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a>));
<a name='L465'>    <b>return</b> 0;
<a name='L466'><font color='red'>}</font>
<a name='L467'>
<a name='L468'><b>static</b> <b>void</b>
<a name='L469'><a href='../R/3172.html' title='Multiple refered from 4 places.'>PyMemoTable_Del</a>(PyMemoTable *self)
<a name='L470'><font color='red'>{</font>
<a name='L471'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L472'>        <b>return</b>;
<a name='L473'>    <a href='../S/2588.html#L456' title='Defined at 456 in Modules/_pickle.c.'>PyMemoTable_Clear</a>(self);
<a name='L474'>
<a name='L475'>    PyMem_FREE(self-&gt;mt_table);
<a name='L476'>    PyMem_FREE(self);
<a name='L477'><font color='red'>}</font>
<a name='L478'>
<a name='L479'><i><font color='green'>/* Since entries cannot be deleted from this hashtable, _PyMemoTable_Lookup()</font></i>
<a name='L480'><i><font color='green'>   can be considerably simpler than dictobject.c's lookdict(). */</font></i>
<a name='L481'><b>static</b> <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> *
<a name='L482'><a href='../R/5449.html' title='Multiple refered from 3 places.'>_PyMemoTable_Lookup</a>(PyMemoTable *self, PyObject *key)
<a name='L483'><font color='red'>{</font>
<a name='L484'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> i;
<a name='L485'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> perturb;
<a name='L486'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> mask = (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)self-&gt;mt_mask;
<a name='L487'>    <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> *table = self-&gt;mt_table;
<a name='L488'>    <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> *entry;
<a name='L489'>    <a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a> <a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> = (<a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>)<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> &gt;&gt; 3;
<a name='L490'>
<a name='L491'>    i = <a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> &amp; mask;
<a name='L492'>    entry = &amp;table[i];
<a name='L493'>    <b>if</b> (entry-&gt;me_key == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || entry-&gt;me_key == <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)
<a name='L494'>        <b>return</b> entry;
<a name='L495'>
<a name='L496'>    <b>for</b> (perturb = <a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a>; ; perturb &gt;&gt;= <a href='../D/2486.html' title='Multiple defined in 4 places.'>PERTURB_SHIFT</a>) <font color='red'>{</font>
<a name='L497'>        i = (i &lt;&lt; 2) + i + perturb + 1;
<a name='L498'>        entry = &amp;table[i &amp; mask];
<a name='L499'>        <b>if</b> (entry-&gt;me_key == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || entry-&gt;me_key == <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)
<a name='L500'>            <b>return</b> entry;
<a name='L501'>    <font color='red'>}</font>
<a name='L502'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0);  <i><font color='green'>/* Never reached */</font></i>
<a name='L503'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L504'><font color='red'>}</font>
<a name='L505'>
<a name='L506'><i><font color='green'>/* Returns -1 on failure, 0 on success. */</font></i>
<a name='L507'><b>static</b> <b>int</b>
<a name='L508'><a href='../S/2588.html#L598' title='Refered from 598 in Modules/_pickle.c.'>_PyMemoTable_ResizeTable</a>(PyMemoTable *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> min_size)
<a name='L509'><font color='red'>{</font>
<a name='L510'>    <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> *oldtable = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L511'>    <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> *oldentry, *newentry;
<a name='L512'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> new_size = <a href='../D/2189.html' title='Multiple defined in 2 places.'>MT_MINSIZE</a>;
<a name='L513'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> to_process;
<a name='L514'>
<a name='L515'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(min_size &gt; 0);
<a name='L516'>
<a name='L517'>    <i><font color='green'>/* Find the smallest valid table size &gt;= min_size. */</font></i>
<a name='L518'>    <b>while</b> (new_size &lt; min_size &amp;&amp; new_size &gt; 0)
<a name='L519'>        new_size &lt;&lt;= 1;
<a name='L520'>    <b>if</b> (new_size &lt;= 0) <font color='red'>{</font>
<a name='L521'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L522'>        <b>return</b> -1;
<a name='L523'>    <font color='red'>}</font>
<a name='L524'>    <i><font color='green'>/* new_size needs to be a power of two. */</font></i>
<a name='L525'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>((new_size &amp; (new_size - 1)) == 0);
<a name='L526'>
<a name='L527'>    <i><font color='green'>/* Allocate new table. */</font></i>
<a name='L528'>    oldtable = self-&gt;mt_table;
<a name='L529'>    self-&gt;mt_table = PyMem_MALLOC(new_size * <b>sizeof</b>(<a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a>));
<a name='L530'>    <b>if</b> (self-&gt;mt_table == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L531'>        PyMem_FREE(oldtable);
<a name='L532'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L533'>        <b>return</b> -1;
<a name='L534'>    <font color='red'>}</font>
<a name='L535'>    self-&gt;mt_allocated = new_size;
<a name='L536'>    self-&gt;mt_mask = new_size - 1;
<a name='L537'>    memset(self-&gt;mt_table, 0, <b>sizeof</b>(<a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a>) * new_size);
<a name='L538'>
<a name='L539'>    <i><font color='green'>/* Copy entries from the old table. */</font></i>
<a name='L540'>    to_process = self-&gt;mt_used;
<a name='L541'>    <b>for</b> (oldentry = oldtable; to_process &gt; 0; oldentry++) <font color='red'>{</font>
<a name='L542'>        <b>if</b> (oldentry-&gt;me_key != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L543'>            to_process--;
<a name='L544'>            <i><font color='green'>/* newentry is a pointer to a chunk of the new</font></i>
<a name='L545'><i><font color='green'>               mt_table, so we're setting the key:value pair</font></i>
<a name='L546'><i><font color='green'>               in-place. */</font></i>
<a name='L547'>            newentry = <a href='../S/2588.html#L482' title='Defined at 482 in Modules/_pickle.c.'>_PyMemoTable_Lookup</a>(self, oldentry-&gt;me_key);
<a name='L548'>            newentry-&gt;me_key = oldentry-&gt;me_key;
<a name='L549'>            newentry-&gt;me_value = oldentry-&gt;me_value;
<a name='L550'>        <font color='red'>}</font>
<a name='L551'>    <font color='red'>}</font>
<a name='L552'>
<a name='L553'>    <i><font color='green'>/* Deallocate the old table. */</font></i>
<a name='L554'>    PyMem_FREE(oldtable);
<a name='L555'>    <b>return</b> 0;
<a name='L556'><font color='red'>}</font>
<a name='L557'>
<a name='L558'><i><font color='green'>/* Returns NULL on failure, a pointer to the value otherwise. */</font></i>
<a name='L559'><b>static</b> <b>long</b> *
<a name='L560'><a href='../R/3173.html' title='Multiple refered from 4 places.'>PyMemoTable_Get</a>(PyMemoTable *self, PyObject *key)
<a name='L561'><font color='red'>{</font>
<a name='L562'>    <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> *entry = <a href='../S/2588.html#L482' title='Defined at 482 in Modules/_pickle.c.'>_PyMemoTable_Lookup</a>(self, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L563'>    <b>if</b> (entry-&gt;me_key == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L564'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L565'>    <b>return</b> &amp;entry-&gt;me_value;
<a name='L566'><font color='red'>}</font>
<a name='L567'>
<a name='L568'><i><font color='green'>/* Returns -1 on failure, 0 on success. */</font></i>
<a name='L569'><b>static</b> <b>int</b>
<a name='L570'><a href='../R/3175.html' title='Multiple refered from 2 places.'>PyMemoTable_Set</a>(PyMemoTable *self, PyObject *key, <b>long</b> value)
<a name='L571'><font color='red'>{</font>
<a name='L572'>    <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> *entry;
<a name='L573'>
<a name='L574'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L575'>
<a name='L576'>    entry = <a href='../S/2588.html#L482' title='Defined at 482 in Modules/_pickle.c.'>_PyMemoTable_Lookup</a>(self, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L577'>    <b>if</b> (entry-&gt;me_key != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L578'>        entry-&gt;me_value = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L579'>        <b>return</b> 0;
<a name='L580'>    <font color='red'>}</font>
<a name='L581'>    Py_INCREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L582'>    entry-&gt;me_key = <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>;
<a name='L583'>    entry-&gt;me_value = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L584'>    self-&gt;mt_used++;
<a name='L585'>
<a name='L586'>    <i><font color='green'>/* If we added a key, we can safely resize. Otherwise just return!</font></i>
<a name='L587'><i><font color='green'>     * If used &gt;= 2/3 size, adjust size. Normally, this quaduples the size.</font></i>
<a name='L588'><i><font color='green'>     *</font></i>
<a name='L589'><i><font color='green'>     * Quadrupling the size improves average table sparseness</font></i>
<a name='L590'><i><font color='green'>     * (reducing collisions) at the cost of some memory. It also halves</font></i>
<a name='L591'><i><font color='green'>     * the number of expensive resize operations in a growing memo table.</font></i>
<a name='L592'><i><font color='green'>     *</font></i>
<a name='L593'><i><font color='green'>     * Very large memo tables (over 50K items) use doubling instead.</font></i>
<a name='L594'><i><font color='green'>     * This may help applications with severe memory constraints.</font></i>
<a name='L595'><i><font color='green'>     */</font></i>
<a name='L596'>    <b>if</b> (!(self-&gt;mt_used * 3 &gt;= (self-&gt;mt_mask + 1) * 2))
<a name='L597'>        <b>return</b> 0;
<a name='L598'>    <b>return</b> <a href='../S/2588.html#L508' title='Defined at 508 in Modules/_pickle.c.'>_PyMemoTable_ResizeTable</a>(self,
<a name='L599'>        (self-&gt;mt_used &gt; 50000 ? 2 : 4) * self-&gt;mt_used);
<a name='L600'><font color='red'>}</font>
<a name='L601'>
<a name='L602'><font color='darkred'>#undef</font> <a href='../R/1986.html' title='Multiple refered from 5 places.'>MT_MINSIZE</a>
<a name='L603'><font color='darkred'>#undef</font> <a href='../R/2252.html' title='Multiple refered from 7 places.'>PERTURB_SHIFT</a>
<a name='L604'>
<a name='L605'><i><font color='green'>/*************************************************************************/</font></i>
<a name='L606'>
<a name='L607'><i><font color='green'>/* Helpers for creating the argument tuple passed to functions. This has the</font></i>
<a name='L608'><i><font color='green'>   performance advantage of calling PyTuple_New() only once. </font></i>
<a name='L609'><i><font color='green'></font></i>
<a name='L610'><i><font color='green'>   XXX(avassalotti): Inline directly in _Pickler_FastCall() and</font></i>
<a name='L611'><i><font color='green'>   _Unpickler_FastCall(). */</font></i>
<a name='L612'><font color='darkred'>#define</font> <a href='../R/66.html' title='Multiple refered from 2 places.'>ARG_TUP</a>(self, obj) <b>do</b> <font color='red'>{</font>                             \
<a name='L613'>        <b>if</b> ((self)-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> || ((self)-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>=<a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(1))) <font color='red'>{</font>  \
<a name='L614'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(PyTuple_GET_ITEM((self)-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, 0));   \
<a name='L615'>            PyTuple_SET_ITEM((self)-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, 0, (obj));        \
<a name='L616'>        <font color='red'>}</font>                                                   \
<a name='L617'>        <b>else</b> <font color='red'>{</font>                                              \
<a name='L618'>            Py_DECREF((obj));                               \
<a name='L619'>        <font color='red'>}</font>                                                   \
<a name='L620'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L621'>
<a name='L622'><font color='darkred'>#define</font> <a href='../R/1161.html' title='Multiple refered from 2 places.'>FREE_ARG_TUP</a>(self) <b>do</b> <font color='red'>{</font>                 \
<a name='L623'>        <b>if</b> ((self)-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;ob_refcnt &gt; 1)         \
<a name='L624'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>((self)-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);              \
<a name='L625'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L626'>
<a name='L627'><i><font color='green'>/* A temporary cleaner API for fast single argument function call.</font></i>
<a name='L628'><i><font color='green'></font></i>
<a name='L629'><i><font color='green'>   XXX: Does caching the argument tuple provides any real performance benefits?</font></i>
<a name='L630'><i><font color='green'></font></i>
<a name='L631'><i><font color='green'>   A quick benchmark, on a 2.0GHz Athlon64 3200+ running Linux 2.6.24 with</font></i>
<a name='L632'><i><font color='green'>   glibc 2.7, tells me that it takes roughly 20,000,000 PyTuple_New(1) calls</font></i>
<a name='L633'><i><font color='green'>   when the tuple is retrieved from the freelist (i.e, call PyTuple_New() then</font></i>
<a name='L634'><i><font color='green'>   immediately DECREF it) and 1,200,000 calls when allocating brand new tuples</font></i>
<a name='L635'><i><font color='green'>   (i.e, call PyTuple_New() and store the returned value in an array), to save</font></i>
<a name='L636'><i><font color='green'>   one second (wall clock time). Either ways, the loading time a pickle stream</font></i>
<a name='L637'><i><font color='green'>   large enough to generate this number of calls would be massively</font></i>
<a name='L638'><i><font color='green'>   overwhelmed by other factors, like I/O throughput, the GC traversal and</font></i>
<a name='L639'><i><font color='green'>   object allocation overhead. So, I really doubt these functions provide any</font></i>
<a name='L640'><i><font color='green'>   real benefits.</font></i>
<a name='L641'><i><font color='green'></font></i>
<a name='L642'><i><font color='green'>   On the other hand, oprofile reports that pickle spends a lot of time in</font></i>
<a name='L643'><i><font color='green'>   these functions. But, that is probably more related to the function call</font></i>
<a name='L644'><i><font color='green'>   overhead, than the argument tuple allocation.</font></i>
<a name='L645'><i><font color='green'></font></i>
<a name='L646'><i><font color='green'>   XXX: And, what is the reference behavior of these? Steal, borrow? At first</font></i>
<a name='L647'><i><font color='green'>   glance, it seems to steal the reference of 'arg' and borrow the reference</font></i>
<a name='L648'><i><font color='green'>   of 'func'. */</font></i>
<a name='L649'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L650'><a href='../R/5349.html' title='Multiple refered from 5 places.'>_Pickler_FastCall</a>(PicklerObject *self, PyObject *func, PyObject *arg)
<a name='L651'><font color='red'>{</font>
<a name='L652'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L653'>
<a name='L654'>    <a href='../S/2588.html#L612' title='Defined at 612 in Modules/_pickle.c.'>ARG_TUP</a>(self, <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L655'>    <b>if</b> (self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) <font color='red'>{</font>
<a name='L656'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L2141' title='Defined at 2141 in Objects/abstract.c.'>PyObject_Call</a>(func, self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L657'>        <a href='../S/2588.html#L622' title='Defined at 622 in Modules/_pickle.c.'>FREE_ARG_TUP</a>(self);
<a name='L658'>    <font color='red'>}</font>
<a name='L659'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L660'><font color='red'>}</font>
<a name='L661'>
<a name='L662'><b>static</b> <b>int</b>
<a name='L663'><a href='../R/5348.html' title='Multiple refered from 2 places.'>_Pickler_ClearBuffer</a>(PicklerObject *self)
<a name='L664'><font color='red'>{</font>
<a name='L665'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;output_buffer);
<a name='L666'>    self-&gt;output_buffer =
<a name='L667'>        <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, self-&gt;max_output_len);
<a name='L668'>    <b>if</b> (self-&gt;output_buffer == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L669'>        <b>return</b> -1;
<a name='L670'>    self-&gt;output_len = 0;
<a name='L671'>    <b>return</b> 0;
<a name='L672'><font color='red'>}</font>
<a name='L673'>
<a name='L674'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L675'><a href='../R/5351.html' title='Multiple refered from 2 places.'>_Pickler_GetString</a>(PicklerObject *self)
<a name='L676'><font color='red'>{</font>
<a name='L677'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *output_buffer = self-&gt;output_buffer;
<a name='L678'>
<a name='L679'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;output_buffer != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L680'>    self-&gt;output_buffer = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L681'>    <i><font color='green'>/* Resize down to exact size */</font></i>
<a name='L682'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;output_buffer, self-&gt;output_len) &lt; 0)
<a name='L683'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L684'>    <b>return</b> output_buffer;
<a name='L685'><font color='red'>}</font>
<a name='L686'>
<a name='L687'><b>static</b> <b>int</b>
<a name='L688'><a href='../R/5350.html' title='Multiple refered from 3 places.'>_Pickler_FlushToFile</a>(PicklerObject *self)
<a name='L689'><font color='red'>{</font>
<a name='L690'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *output, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L691'>
<a name='L692'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;write != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L693'>
<a name='L694'>    output = <a href='../S/2588.html#L675' title='Defined at 675 in Modules/_pickle.c.'>_Pickler_GetString</a>(self);
<a name='L695'>    <b>if</b> (output == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L696'>        <b>return</b> -1;
<a name='L697'>
<a name='L698'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2588.html#L650' title='Defined at 650 in Modules/_pickle.c.'>_Pickler_FastCall</a>(self, self-&gt;write, output);
<a name='L699'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L700'>    <b>return</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) ? -1 : 0;
<a name='L701'><font color='red'>}</font>
<a name='L702'>
<a name='L703'><b>static</b> <b>int</b>
<a name='L704'><a href='../R/5355.html' title='Multiple refered from 62 places.'>_Pickler_Write</a>(PicklerObject *self, <b>const</b> <b>char</b> *s, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n)
<a name='L705'><font color='red'>{</font>
<a name='L706'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, required;
<a name='L707'>    <b>char</b> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L708'>
<a name='L709'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(s != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L710'>
<a name='L711'>    required = self-&gt;output_len + n;
<a name='L712'>    <b>if</b> (required &gt; self-&gt;max_output_len) <font color='red'>{</font>
<a name='L713'>        <b>if</b> (self-&gt;write != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; required &gt; <a href='../S/2588.html#L103' title='Defined at 103 in Modules/_pickle.c.'>MAX_WRITE_BUF_SIZE</a>) <font color='red'>{</font>
<a name='L714'>            <i><font color='green'>/* XXX This reallocates a new buffer every time, which is a bit</font></i>
<a name='L715'><i><font color='green'>               wasteful. */</font></i>
<a name='L716'>            <b>if</b> (<a href='../S/2588.html#L688' title='Defined at 688 in Modules/_pickle.c.'>_Pickler_FlushToFile</a>(self) &lt; 0)
<a name='L717'>                <b>return</b> -1;
<a name='L718'>            <b>if</b> (<a href='../S/2588.html#L663' title='Defined at 663 in Modules/_pickle.c.'>_Pickler_ClearBuffer</a>(self) &lt; 0)
<a name='L719'>                <b>return</b> -1;
<a name='L720'>        <font color='red'>}</font>
<a name='L721'>        <b>if</b> (self-&gt;write != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; n &gt; <a href='../S/2588.html#L103' title='Defined at 103 in Modules/_pickle.c.'>MAX_WRITE_BUF_SIZE</a>) <font color='red'>{</font>
<a name='L722'>            <i><font color='green'>/* we already flushed above, so the buffer is empty */</font></i>
<a name='L723'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L724'>            <i><font color='green'>/* XXX we could spare an intermediate copy and pass</font></i>
<a name='L725'><i><font color='green'>               a memoryview instead */</font></i>
<a name='L726'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *output = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(s, n);
<a name='L727'>            <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L728'>                <b>return</b> -1;
<a name='L729'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2588.html#L650' title='Defined at 650 in Modules/_pickle.c.'>_Pickler_FastCall</a>(self, self-&gt;write, output);
<a name='L730'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L731'>            <b>return</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) ? -1 : 0;
<a name='L732'>        <font color='red'>}</font>
<a name='L733'>        <b>else</b> <font color='red'>{</font>
<a name='L734'>            <b>if</b> (self-&gt;output_len &gt;= <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / 2 - n) <font color='red'>{</font>
<a name='L735'>                <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L736'>                <b>return</b> -1;
<a name='L737'>            <font color='red'>}</font>
<a name='L738'>            self-&gt;max_output_len = (self-&gt;output_len + n) * 2;
<a name='L739'>            <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;self-&gt;output_buffer, self-&gt;max_output_len) &lt; 0)
<a name='L740'>                <b>return</b> -1;
<a name='L741'>        <font color='red'>}</font>
<a name='L742'>    <font color='red'>}</font>
<a name='L743'>    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = PyBytes_AS_STRING(self-&gt;output_buffer);
<a name='L744'>    <b>if</b> (n &lt; 8) <font color='red'>{</font>
<a name='L745'>        <i><font color='green'>/* This is faster than memcpy when the string is short. */</font></i>
<a name='L746'>        <b>for</b> (i = 0; i &lt; n; i++) <font color='red'>{</font>
<a name='L747'>            <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[self-&gt;output_len + i] = s[i];
<a name='L748'>        <font color='red'>}</font>
<a name='L749'>    <font color='red'>}</font>
<a name='L750'>    <b>else</b> <font color='red'>{</font>
<a name='L751'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + self-&gt;output_len, s, n);
<a name='L752'>    <font color='red'>}</font>
<a name='L753'>    self-&gt;output_len += n;
<a name='L754'>    <b>return</b> n;
<a name='L755'><font color='red'>}</font>
<a name='L756'>
<a name='L757'><b>static</b> <a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a> *
<a name='L758'><a href='../R/5352.html' title='Multiple refered from 2 places.'>_Pickler_New</a>(<b>void</b>)
<a name='L759'><font color='red'>{</font>
<a name='L760'>    <a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a> *self;
<a name='L761'>
<a name='L762'>    self = PyObject_GC_New(<a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a>, &amp;Pickler_Type);
<a name='L763'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L764'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L765'>
<a name='L766'>    self-&gt;pers_func = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L767'>    self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L768'>    self-&gt;write = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L769'>    self-&gt;proto = 0;
<a name='L770'>    self-&gt;bin = 0;
<a name='L771'>    self-&gt;fast = 0;
<a name='L772'>    self-&gt;fast_nesting = 0;
<a name='L773'>    self-&gt;fix_imports = 0;
<a name='L774'>    self-&gt;fast_memo = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L775'>
<a name='L776'>    self-&gt;memo = <a href='../S/2588.html#L399' title='Defined at 399 in Modules/_pickle.c.'>PyMemoTable_New</a>();
<a name='L777'>    <b>if</b> (self-&gt;memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L778'>        Py_DECREF(self);
<a name='L779'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L780'>    <font color='red'>}</font>
<a name='L781'>    self-&gt;max_output_len = <a href='../S/2588.html#L99' title='Defined at 99 in Modules/_pickle.c.'>WRITE_BUF_SIZE</a>;
<a name='L782'>    self-&gt;output_len = 0;
<a name='L783'>    self-&gt;output_buffer = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L784'>                                                    self-&gt;max_output_len);
<a name='L785'>    <b>if</b> (self-&gt;output_buffer == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L786'>        Py_DECREF(self);
<a name='L787'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L788'>    <font color='red'>}</font>
<a name='L789'>    <b>return</b> self;
<a name='L790'><font color='red'>}</font>
<a name='L791'>
<a name='L792'><b>static</b> <b>int</b>
<a name='L793'><a href='../R/5354.html' title='Multiple refered from 3 places.'>_Pickler_SetProtocol</a>(PicklerObject *self, PyObject *proto_obj,
<a name='L794'>                     PyObject *fix_imports_obj)
<a name='L795'><font color='red'>{</font>
<a name='L796'>    <b>long</b> proto = 0;
<a name='L797'>    <b>int</b> fix_imports;
<a name='L798'>
<a name='L799'>    <b>if</b> (proto_obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || proto_obj == Py_None)
<a name='L800'>        proto = <a href='../S/2588.html#L10' title='Defined at 10 in Modules/_pickle.c.'>DEFAULT_PROTOCOL</a>;
<a name='L801'>    <b>else</b> <font color='red'>{</font>
<a name='L802'>        proto = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(proto_obj);
<a name='L803'>        <b>if</b> (proto == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L804'>            <b>return</b> -1;
<a name='L805'>    <font color='red'>}</font>
<a name='L806'>    <b>if</b> (proto &lt; 0)
<a name='L807'>        proto = <a href='../S/2588.html#L9' title='Defined at 9 in Modules/_pickle.c.'>HIGHEST_PROTOCOL</a>;
<a name='L808'>    <b>if</b> (proto &gt; <a href='../S/2588.html#L9' title='Defined at 9 in Modules/_pickle.c.'>HIGHEST_PROTOCOL</a>) <font color='red'>{</font>
<a name='L809'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError, "pickle protocol must be &lt;= %d",
<a name='L810'>                     <a href='../S/2588.html#L9' title='Defined at 9 in Modules/_pickle.c.'>HIGHEST_PROTOCOL</a>);
<a name='L811'>        <b>return</b> -1;
<a name='L812'>    <font color='red'>}</font>
<a name='L813'>    fix_imports = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(fix_imports_obj);
<a name='L814'>    <b>if</b> (fix_imports == -1)
<a name='L815'>        <b>return</b> -1;
<a name='L816'>    
<a name='L817'>    self-&gt;proto = proto;
<a name='L818'>    self-&gt;bin = proto &gt; 0;
<a name='L819'>    self-&gt;fix_imports = fix_imports &amp;&amp; proto &lt; 3;
<a name='L820'>
<a name='L821'>    <b>return</b> 0;
<a name='L822'><font color='red'>}</font>
<a name='L823'>
<a name='L824'><i><font color='green'>/* Returns -1 (with an exception set) on failure, 0 on success. This may</font></i>
<a name='L825'><i><font color='green'>   be called once on a freshly created Pickler. */</font></i>
<a name='L826'><b>static</b> <b>int</b>
<a name='L827'><a href='../R/5353.html' title='Multiple refered from 2 places.'>_Pickler_SetOutputStream</a>(PicklerObject *self, PyObject *file)
<a name='L828'><font color='red'>{</font>
<a name='L829'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(file != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L830'>    self-&gt;write = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(file, "write");
<a name='L831'>    <b>if</b> (self-&gt;write == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L832'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L833'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L834'>                            "file must have a 'write' attribute");
<a name='L835'>        <b>return</b> -1;
<a name='L836'>    <font color='red'>}</font>
<a name='L837'>
<a name='L838'>    <b>return</b> 0;
<a name='L839'><font color='red'>}</font>
<a name='L840'>
<a name='L841'><i><font color='green'>/* See documentation for _Pickler_FastCall(). */</font></i>
<a name='L842'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L843'><a href='../R/5660.html' title='Multiple refered from 6 places.'>_Unpickler_FastCall</a>(UnpicklerObject *self, PyObject *func, PyObject *arg)
<a name='L844'><font color='red'>{</font>
<a name='L845'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L846'>
<a name='L847'>    <a href='../S/2588.html#L612' title='Defined at 612 in Modules/_pickle.c.'>ARG_TUP</a>(self, <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L848'>    <b>if</b> (self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) <font color='red'>{</font>
<a name='L849'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L2141' title='Defined at 2141 in Objects/abstract.c.'>PyObject_Call</a>(func, self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L850'>        <a href='../S/2588.html#L622' title='Defined at 622 in Modules/_pickle.c.'>FREE_ARG_TUP</a>(self);
<a name='L851'>    <font color='red'>}</font>
<a name='L852'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L853'><font color='red'>}</font>
<a name='L854'>
<a name='L855'><i><font color='green'>/* Returns the size of the input on success, -1 on failure. This takes its</font></i>
<a name='L856'><i><font color='green'>   own reference to `input`. */</font></i>
<a name='L857'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L858'><a href='../R/5672.html' title='Multiple refered from 2 places.'>_Unpickler_SetStringInput</a>(UnpicklerObject *self, PyObject *input)
<a name='L859'><font color='red'>{</font>
<a name='L860'>    <b>if</b> (self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.buf != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L861'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L862'>    <b>if</b> (<a href='../S/2775.html#L330' title='Defined at 330 in Objects/abstract.c.'>PyObject_GetBuffer</a>(input, &amp;self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, <a href='../S/544.html#L182' title='Defined at 182 in Include/object.h.'>PyBUF_CONTIG_RO</a>) &lt; 0)
<a name='L863'>        <b>return</b> -1;
<a name='L864'>    self-&gt;input_buffer = self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.buf;
<a name='L865'>    self-&gt;input_len = self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.len;
<a name='L866'>    self-&gt;next_read_idx = 0;
<a name='L867'>    self-&gt;prefetched_idx = self-&gt;input_len;
<a name='L868'>    <b>return</b> self-&gt;input_len;
<a name='L869'><font color='red'>}</font>
<a name='L870'>
<a name='L871'><b>static</b> <b>int</b>
<a name='L872'><a href='../R/5673.html' title='Multiple refered from 2 places.'>_Unpickler_SkipConsumed</a>(UnpicklerObject *self)
<a name='L873'><font color='red'>{</font>
<a name='L874'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> consumed = self-&gt;next_read_idx - self-&gt;prefetched_idx;
<a name='L875'>
<a name='L876'>    <b>if</b> (consumed &gt; 0) <font color='red'>{</font>
<a name='L877'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *r;
<a name='L878'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;peek);  <i><font color='green'>/* otherwise we did something wrong */</font></i>
<a name='L879'>        <i><font color='green'>/* This makes an useless copy... */</font></i>
<a name='L880'>        r = <a href='../D/3601.html' title='Multiple defined in 2 places.'>PyObject_CallFunction</a>(self-&gt;read, "n", consumed);
<a name='L881'>        <b>if</b> (r == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L882'>            <b>return</b> -1;
<a name='L883'>        Py_DECREF(r);
<a name='L884'>        self-&gt;prefetched_idx = self-&gt;next_read_idx;
<a name='L885'>    <font color='red'>}</font>
<a name='L886'>    <b>return</b> 0;
<a name='L887'><font color='red'>}</font>
<a name='L888'>
<a name='L889'><b>static</b> <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> READ_WHOLE_LINE = -1;
<a name='L890'>
<a name='L891'><i><font color='green'>/* If reading from a file, we need to only pull the bytes we need, since there</font></i>
<a name='L892'><i><font color='green'>   may be multiple pickle objects arranged contiguously in the same input</font></i>
<a name='L893'><i><font color='green'>   buffer.</font></i>
<a name='L894'><i><font color='green'></font></i>
<a name='L895'><i><font color='green'>   If `n` is READ_WHOLE_LINE, read a whole line. Otherwise, read up to `n`</font></i>
<a name='L896'><i><font color='green'>   bytes from the input stream/buffer.</font></i>
<a name='L897'><i><font color='green'></font></i>
<a name='L898'><i><font color='green'>   Update the unpickler's input buffer with the newly-read data. Returns -1 on</font></i>
<a name='L899'><i><font color='green'>   failure; on success, returns the number of bytes read from the file.</font></i>
<a name='L900'><i><font color='green'></font></i>
<a name='L901'><i><font color='green'>   On success, self-&gt;input_len will be 0; this is intentional so that when</font></i>
<a name='L902'><i><font color='green'>   unpickling from a file, the "we've run out of data" code paths will trigger,</font></i>
<a name='L903'><i><font color='green'>   causing the Unpickler to go back to the file for more data. Use the returned</font></i>
<a name='L904'><i><font color='green'>   size to tell you how much data you can process. */</font></i>
<a name='L905'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L906'><a href='../R/5667.html' title='Multiple refered from 2 places.'>_Unpickler_ReadFromFile</a>(UnpicklerObject *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n)
<a name='L907'><font color='red'>{</font>
<a name='L908'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *data;
<a name='L909'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> read_size, prefetched_size = 0;
<a name='L910'>
<a name='L911'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;read != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L912'>    
<a name='L913'>    <b>if</b> (<a href='../S/2588.html#L872' title='Defined at 872 in Modules/_pickle.c.'>_Unpickler_SkipConsumed</a>(self) &lt; 0)
<a name='L914'>        <b>return</b> -1;
<a name='L915'>
<a name='L916'>    <b>if</b> (n == READ_WHOLE_LINE)
<a name='L917'>        data = <a href='../S/2775.html#L2141' title='Defined at 2141 in Objects/abstract.c.'>PyObject_Call</a>(self-&gt;readline, empty_tuple, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L918'>    <b>else</b> <font color='red'>{</font>
<a name='L919'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *len = <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(n);
<a name='L920'>        <b>if</b> (len == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L921'>            <b>return</b> -1;
<a name='L922'>        data = <a href='../S/2588.html#L843' title='Defined at 843 in Modules/_pickle.c.'>_Unpickler_FastCall</a>(self, self-&gt;read, len);
<a name='L923'>    <font color='red'>}</font>
<a name='L924'>    <b>if</b> (data == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L925'>        <b>return</b> -1;
<a name='L926'>
<a name='L927'>    <i><font color='green'>/* Prefetch some data without advancing the file pointer, if possible */</font></i>
<a name='L928'>    <b>if</b> (self-&gt;peek) <font color='red'>{</font>
<a name='L929'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *len, *prefetched;
<a name='L930'>        len = <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(<a href='../S/2588.html#L106' title='Defined at 106 in Modules/_pickle.c.'>PREFETCH</a>);
<a name='L931'>        <b>if</b> (len == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L932'>            Py_DECREF(data);
<a name='L933'>            <b>return</b> -1;
<a name='L934'>        <font color='red'>}</font>
<a name='L935'>        prefetched = <a href='../S/2588.html#L843' title='Defined at 843 in Modules/_pickle.c.'>_Unpickler_FastCall</a>(self, self-&gt;peek, len);
<a name='L936'>        <b>if</b> (prefetched == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L937'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_NotImplementedError)) <font color='red'>{</font>
<a name='L938'>                <i><font color='green'>/* peek() is probably not supported by the given file object */</font></i>
<a name='L939'>                <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L940'>                <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;peek);
<a name='L941'>            <font color='red'>}</font>
<a name='L942'>            <b>else</b> <font color='red'>{</font>
<a name='L943'>                Py_DECREF(data);
<a name='L944'>                <b>return</b> -1;
<a name='L945'>            <font color='red'>}</font>
<a name='L946'>        <font color='red'>}</font>
<a name='L947'>        <b>else</b> <font color='red'>{</font>
<a name='L948'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyBytes_Check(prefetched));
<a name='L949'>            prefetched_size = PyBytes_GET_SIZE(prefetched);
<a name='L950'>            <a href='../S/2779.html#L2800' title='Defined at 2800 in Objects/bytesobject.c.'>PyBytes_ConcatAndDel</a>(&amp;data, prefetched);
<a name='L951'>            <b>if</b> (data == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L952'>                <b>return</b> -1;
<a name='L953'>        <font color='red'>}</font>
<a name='L954'>    <font color='red'>}</font>
<a name='L955'>
<a name='L956'>    read_size = <a href='../S/2588.html#L858' title='Defined at 858 in Modules/_pickle.c.'>_Unpickler_SetStringInput</a>(self, data) - prefetched_size;
<a name='L957'>    Py_DECREF(data);
<a name='L958'>    self-&gt;prefetched_idx = read_size;
<a name='L959'>    <b>return</b> read_size;
<a name='L960'><font color='red'>}</font>
<a name='L961'>
<a name='L962'><i><font color='green'>/* Read `n` bytes from the unpickler's data source, storing the result in `*s`.</font></i>
<a name='L963'><i><font color='green'></font></i>
<a name='L964'><i><font color='green'>   This should be used for all data reads, rather than accessing the unpickler's</font></i>
<a name='L965'><i><font color='green'>   input buffer directly. This method deals correctly with reading from input</font></i>
<a name='L966'><i><font color='green'>   streams, which the input buffer doesn't deal with.</font></i>
<a name='L967'><i><font color='green'></font></i>
<a name='L968'><i><font color='green'>   Note that when reading from a file-like object, self-&gt;next_read_idx won't</font></i>
<a name='L969'><i><font color='green'>   be updated (it should remain at 0 for the entire unpickling process). You</font></i>
<a name='L970'><i><font color='green'>   should use this function's return value to know how many bytes you can</font></i>
<a name='L971'><i><font color='green'>   consume.</font></i>
<a name='L972'><i><font color='green'></font></i>
<a name='L973'><i><font color='green'>   Returns -1 (with an exception set) on failure. On success, return the</font></i>
<a name='L974'><i><font color='green'>   number of chars read. */</font></i>
<a name='L975'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L976'><a href='../R/5666.html' title='Multiple refered from 23 places.'>_Unpickler_Read</a>(UnpicklerObject *self, <b>char</b> **s, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n)
<a name='L977'><font color='red'>{</font>
<a name='L978'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> num_read;
<a name='L979'>
<a name='L980'>    <b>if</b> (n == 0) <font color='red'>{</font>
<a name='L981'>        *s = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L982'>        <b>return</b> 0;
<a name='L983'>    <font color='red'>}</font>
<a name='L984'>
<a name='L985'>    <b>if</b> (self-&gt;next_read_idx + n &lt;= self-&gt;input_len) <font color='red'>{</font>
<a name='L986'>        *s = self-&gt;input_buffer + self-&gt;next_read_idx;
<a name='L987'>        self-&gt;next_read_idx += n;
<a name='L988'>        <b>return</b> n;
<a name='L989'>    <font color='red'>}</font>
<a name='L990'>    <b>if</b> (!self-&gt;read) <font color='red'>{</font>
<a name='L991'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_EOFError, "Ran out of input");
<a name='L992'>        <b>return</b> -1;
<a name='L993'>    <font color='red'>}</font>
<a name='L994'>    num_read = <a href='../S/2588.html#L906' title='Defined at 906 in Modules/_pickle.c.'>_Unpickler_ReadFromFile</a>(self, n);
<a name='L995'>    <b>if</b> (num_read &lt; 0)
<a name='L996'>        <b>return</b> -1;
<a name='L997'>    <b>if</b> (num_read &lt; n) <font color='red'>{</font>
<a name='L998'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_EOFError, "Ran out of input");
<a name='L999'>        <b>return</b> -1;
<a name='L1000'>    <font color='red'>}</font>
<a name='L1001'>    *s = self-&gt;input_buffer;
<a name='L1002'>    self-&gt;next_read_idx = n;
<a name='L1003'>    <b>return</b> n;
<a name='L1004'><font color='red'>}</font>
<a name='L1005'>
<a name='L1006'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L1007'><a href='../S/2588.html#L1035' title='Refered from 1035 in Modules/_pickle.c.'>_Unpickler_CopyLine</a>(UnpicklerObject *self, <b>char</b> *line, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len,
<a name='L1008'>                    <b>char</b> **result)
<a name='L1009'><font color='red'>{</font>
<a name='L1010'>    <b>char</b> *input_line = <a href='../S/2803.html#L1775' title='Defined at 1775 in Objects/object.c.'>PyMem_Realloc</a>(self-&gt;input_line, len + 1);
<a name='L1011'>    <b>if</b> (input_line == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1012'>        <b>return</b> -1;
<a name='L1013'>
<a name='L1014'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(input_line, line, len);
<a name='L1015'>    input_line[len] = '\0';
<a name='L1016'>    self-&gt;input_line = input_line;
<a name='L1017'>    *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = self-&gt;input_line;
<a name='L1018'>    <b>return</b> len;
<a name='L1019'><font color='red'>}</font>
<a name='L1020'>
<a name='L1021'><i><font color='green'>/* Read a line from the input stream/buffer. If we run off the end of the input</font></i>
<a name='L1022'><i><font color='green'>   before hitting \n, return the data we found.</font></i>
<a name='L1023'><i><font color='green'></font></i>
<a name='L1024'><i><font color='green'>   Returns the number of chars read, or -1 on failure. */</font></i>
<a name='L1025'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L1026'><a href='../R/5668.html' title='Multiple refered from 12 places.'>_Unpickler_Readline</a>(UnpicklerObject *self, <b>char</b> **result)
<a name='L1027'><font color='red'>{</font>
<a name='L1028'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, num_read;
<a name='L1029'>
<a name='L1030'>    <b>for</b> (i = self-&gt;next_read_idx; i &lt; self-&gt;input_len; i++) <font color='red'>{</font>
<a name='L1031'>        <b>if</b> (self-&gt;input_buffer[i] == '\n') <font color='red'>{</font>
<a name='L1032'>            <b>char</b> *line_start = self-&gt;input_buffer + self-&gt;next_read_idx;
<a name='L1033'>            num_read = i - self-&gt;next_read_idx + 1;
<a name='L1034'>            self-&gt;next_read_idx = i + 1;
<a name='L1035'>            <b>return</b> <a href='../S/2588.html#L1007' title='Defined at 1007 in Modules/_pickle.c.'>_Unpickler_CopyLine</a>(self, line_start, num_read, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1036'>        <font color='red'>}</font>
<a name='L1037'>    <font color='red'>}</font>
<a name='L1038'>    <b>if</b> (self-&gt;read) <font color='red'>{</font>
<a name='L1039'>        num_read = <a href='../S/2588.html#L906' title='Defined at 906 in Modules/_pickle.c.'>_Unpickler_ReadFromFile</a>(self, READ_WHOLE_LINE);
<a name='L1040'>        <b>if</b> (num_read &lt; 0)
<a name='L1041'>            <b>return</b> -1;
<a name='L1042'>        *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = self-&gt;input_buffer;
<a name='L1043'>        self-&gt;next_read_idx = num_read;
<a name='L1044'>        <b>return</b> num_read;
<a name='L1045'>    <font color='red'>}</font>
<a name='L1046'> 
<a name='L1047'>    <i><font color='green'>/* If we get here, we've run off the end of the input string. Return the</font></i>
<a name='L1048'><i><font color='green'>       remaining string and let the caller figure it out. */</font></i>
<a name='L1049'>    *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = self-&gt;input_buffer + self-&gt;next_read_idx;
<a name='L1050'>    num_read = i - self-&gt;next_read_idx;
<a name='L1051'>    self-&gt;next_read_idx = i;
<a name='L1052'>    <b>return</b> num_read;
<a name='L1053'><font color='red'>}</font>
<a name='L1054'>
<a name='L1055'><i><font color='green'>/* Returns -1 (with an exception set) on failure, 0 on success. The memo array</font></i>
<a name='L1056'><i><font color='green'>   will be modified in place. */</font></i>
<a name='L1057'><b>static</b> <b>int</b>
<a name='L1058'><a href='../S/2588.html#L1095' title='Refered from 1095 in Modules/_pickle.c.'>_Unpickler_ResizeMemoList</a>(UnpicklerObject *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> new_size)
<a name='L1059'><font color='red'>{</font>
<a name='L1060'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1061'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **memo;
<a name='L1062'>
<a name='L1063'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(new_size &gt; self-&gt;memo_size);
<a name='L1064'>
<a name='L1065'>    memo = PyMem_REALLOC(self-&gt;memo, new_size * <b>sizeof</b>(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *));
<a name='L1066'>    <b>if</b> (memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1067'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1068'>        <b>return</b> -1;
<a name='L1069'>    <font color='red'>}</font>
<a name='L1070'>    self-&gt;memo = memo;
<a name='L1071'>    <b>for</b> (i = self-&gt;memo_size; i &lt; new_size; i++)
<a name='L1072'>        self-&gt;memo[i] = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1073'>    self-&gt;memo_size = new_size;
<a name='L1074'>    <b>return</b> 0;
<a name='L1075'><font color='red'>}</font>
<a name='L1076'>
<a name='L1077'><i><font color='green'>/* Returns NULL if idx is out of bounds. */</font></i>
<a name='L1078'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1079'><a href='../R/5662.html' title='Multiple refered from 3 places.'>_Unpickler_MemoGet</a>(UnpicklerObject *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx)
<a name='L1080'><font color='red'>{</font>
<a name='L1081'>    <b>if</b> (idx &lt; 0 || idx &gt;= self-&gt;memo_size)
<a name='L1082'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1083'>
<a name='L1084'>    <b>return</b> self-&gt;memo[idx];
<a name='L1085'><font color='red'>}</font>
<a name='L1086'>
<a name='L1087'><i><font color='green'>/* Returns -1 (with an exception set) on failure, 0 on success.</font></i>
<a name='L1088'><i><font color='green'>   This takes its own reference to `value`. */</font></i>
<a name='L1089'><b>static</b> <b>int</b>
<a name='L1090'><a href='../R/5663.html' title='Multiple refered from 4 places.'>_Unpickler_MemoPut</a>(UnpicklerObject *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx, PyObject *value)
<a name='L1091'><font color='red'>{</font>
<a name='L1092'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *old_item;
<a name='L1093'>
<a name='L1094'>    <b>if</b> (idx &gt;= self-&gt;memo_size) <font color='red'>{</font>
<a name='L1095'>        <b>if</b> (<a href='../S/2588.html#L1058' title='Defined at 1058 in Modules/_pickle.c.'>_Unpickler_ResizeMemoList</a>(self, idx * 2) &lt; 0)
<a name='L1096'>            <b>return</b> -1;
<a name='L1097'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(idx &lt; self-&gt;memo_size);
<a name='L1098'>    <font color='red'>}</font>
<a name='L1099'>    Py_INCREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L1100'>    old_item = self-&gt;memo[idx];
<a name='L1101'>    self-&gt;memo[idx] = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L1102'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(old_item);
<a name='L1103'>    <b>return</b> 0;
<a name='L1104'><font color='red'>}</font>
<a name='L1105'>
<a name='L1106'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **
<a name='L1107'><a href='../R/5665.html' title='Multiple refered from 5 places.'>_Unpickler_NewMemo</a>(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> new_size)
<a name='L1108'><font color='red'>{</font>
<a name='L1109'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **memo = PyMem_MALLOC(new_size * <b>sizeof</b>(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *));
<a name='L1110'>    <b>if</b> (memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1111'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1112'>    memset(memo, 0, new_size * <b>sizeof</b>(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *));
<a name='L1113'>    <b>return</b> memo;
<a name='L1114'><font color='red'>}</font>
<a name='L1115'>
<a name='L1116'><i><font color='green'>/* Free the unpickler's memo, taking care to decref any items left in it. */</font></i>
<a name='L1117'><b>static</b> <b>void</b>
<a name='L1118'><a href='../R/5661.html' title='Multiple refered from 4 places.'>_Unpickler_MemoCleanup</a>(UnpicklerObject *self)
<a name='L1119'><font color='red'>{</font>
<a name='L1120'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1121'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **memo = self-&gt;memo;
<a name='L1122'>
<a name='L1123'>    <b>if</b> (self-&gt;memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1124'>        <b>return</b>;
<a name='L1125'>    self-&gt;memo = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1126'>    i = self-&gt;memo_size;
<a name='L1127'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L1128'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(memo[i]);
<a name='L1129'>    <font color='red'>}</font>
<a name='L1130'>    PyMem_FREE(memo);
<a name='L1131'><font color='red'>}</font>
<a name='L1132'>
<a name='L1133'><b>static</b> <a href='../D/5447.html' title='Multiple defined in 2 places.'>UnpicklerObject</a> *
<a name='L1134'><a href='../R/5664.html' title='Multiple refered from 2 places.'>_Unpickler_New</a>(<b>void</b>)
<a name='L1135'><font color='red'>{</font>
<a name='L1136'>    <a href='../D/5447.html' title='Multiple defined in 2 places.'>UnpicklerObject</a> *self;
<a name='L1137'>
<a name='L1138'>    self = PyObject_GC_New(<a href='../D/5447.html' title='Multiple defined in 2 places.'>UnpicklerObject</a>, &amp;Unpickler_Type);
<a name='L1139'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1140'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1141'>
<a name='L1142'>    self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a> = (<a href='../S/2588.html#L151' title='Defined at 151 in Modules/_pickle.c.'>Pdata</a> *)<a href='../S/2588.html#L173' title='Defined at 173 in Modules/_pickle.c.'>Pdata_New</a>();
<a name='L1143'>    <b>if</b> (self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1144'>        Py_DECREF(self);
<a name='L1145'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1146'>    <font color='red'>}</font>
<a name='L1147'>    memset(&amp;self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, 0, <b>sizeof</b>(<a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a>));
<a name='L1148'>
<a name='L1149'>    self-&gt;memo_size = 32;
<a name='L1150'>    self-&gt;memo = <a href='../S/2588.html#L1107' title='Defined at 1107 in Modules/_pickle.c.'>_Unpickler_NewMemo</a>(self-&gt;memo_size);
<a name='L1151'>    <b>if</b> (self-&gt;memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1152'>        Py_DECREF(self);
<a name='L1153'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1154'>    <font color='red'>}</font>
<a name='L1155'>
<a name='L1156'>    self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1157'>    self-&gt;pers_func = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1158'>    self-&gt;input_buffer = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1159'>    self-&gt;input_line = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1160'>    self-&gt;input_len = 0;
<a name='L1161'>    self-&gt;next_read_idx = 0;
<a name='L1162'>    self-&gt;prefetched_idx = 0;
<a name='L1163'>    self-&gt;read = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1164'>    self-&gt;readline = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1165'>    self-&gt;peek = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1166'>    self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1167'>    self-&gt;errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1168'>    self-&gt;marks = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1169'>    self-&gt;num_marks = 0;
<a name='L1170'>    self-&gt;marks_size = 0;
<a name='L1171'>    self-&gt;proto = 0;
<a name='L1172'>    self-&gt;fix_imports = 0;
<a name='L1173'>
<a name='L1174'>    <b>return</b> self;
<a name='L1175'><font color='red'>}</font>
<a name='L1176'>
<a name='L1177'><i><font color='green'>/* Returns -1 (with an exception set) on failure, 0 on success. This may</font></i>
<a name='L1178'><i><font color='green'>   be called once on a freshly created Pickler. */</font></i>
<a name='L1179'><b>static</b> <b>int</b>
<a name='L1180'><a href='../R/5671.html' title='Multiple refered from 2 places.'>_Unpickler_SetInputStream</a>(UnpicklerObject *self, PyObject *file)
<a name='L1181'><font color='red'>{</font>
<a name='L1182'>    self-&gt;peek = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(file, "peek");
<a name='L1183'>    <b>if</b> (self-&gt;peek == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1184'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L1185'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1186'>        <b>else</b>
<a name='L1187'>            <b>return</b> -1;
<a name='L1188'>    <font color='red'>}</font>
<a name='L1189'>    self-&gt;read = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(file, "read");
<a name='L1190'>    self-&gt;readline = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(file, "readline");
<a name='L1191'>    <b>if</b> (self-&gt;readline == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || self-&gt;read == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1192'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L1193'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1194'>                            "file must have 'read' and 'readline' attributes");
<a name='L1195'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;read);
<a name='L1196'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;readline);
<a name='L1197'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;peek);
<a name='L1198'>        <b>return</b> -1;
<a name='L1199'>    <font color='red'>}</font>
<a name='L1200'>    <b>return</b> 0;
<a name='L1201'><font color='red'>}</font>
<a name='L1202'>
<a name='L1203'><i><font color='green'>/* Returns -1 (with an exception set) on failure, 0 on success. This may</font></i>
<a name='L1204'><i><font color='green'>   be called once on a freshly created Pickler. */</font></i>
<a name='L1205'><b>static</b> <b>int</b>
<a name='L1206'><a href='../R/5670.html' title='Multiple refered from 3 places.'>_Unpickler_SetInputEncoding</a>(UnpicklerObject *self,
<a name='L1207'>                            <b>const</b> <b>char</b> *encoding,
<a name='L1208'>                            <b>const</b> <b>char</b> *errors)
<a name='L1209'><font color='red'>{</font>
<a name='L1210'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1211'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = "ASCII";
<a name='L1212'>    <b>if</b> (errors == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1213'>        errors = "strict";
<a name='L1214'>
<a name='L1215'>    self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/11408.html' title='Multiple defined in 2 places.'>strdup</a>(<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L1216'>    self-&gt;errors = <a href='../D/11408.html' title='Multiple defined in 2 places.'>strdup</a>(errors);
<a name='L1217'>    <b>if</b> (self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || self-&gt;errors == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1218'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1219'>        <b>return</b> -1;
<a name='L1220'>    <font color='red'>}</font>
<a name='L1221'>    <b>return</b> 0;
<a name='L1222'><font color='red'>}</font>
<a name='L1223'>
<a name='L1224'><i><font color='green'>/* Generate a GET opcode for an object stored in the memo. */</font></i>
<a name='L1225'><b>static</b> <b>int</b>
<a name='L1226'><a href='../R/8976.html' title='Multiple refered from 3 places.'>memo_get</a>(PicklerObject *self, PyObject *key)
<a name='L1227'><font color='red'>{</font>
<a name='L1228'>    <b>long</b> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L1229'>    <b>char</b> pdata[30];
<a name='L1230'>    <b>int</b> len;
<a name='L1231'>
<a name='L1232'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2588.html#L560' title='Defined at 560 in Modules/_pickle.c.'>PyMemoTable_Get</a>(self-&gt;memo, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1233'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)  <font color='red'>{</font>
<a name='L1234'>        <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(PyExc_KeyError, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1235'>        <b>return</b> -1;
<a name='L1236'>    <font color='red'>}</font>
<a name='L1237'>
<a name='L1238'>    <b>if</b> (!self-&gt;bin) <font color='red'>{</font>
<a name='L1239'>        pdata[0] = <a href='../D/1373.html' title='Multiple defined in 2 places.'>GET</a>;
<a name='L1240'>        <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(pdata + 1, <b>sizeof</b>(pdata) - 1, "%ld\n", *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L1241'>        len = (<b>int</b>)strlen(pdata);
<a name='L1242'>    <font color='red'>}</font>
<a name='L1243'>    <b>else</b> <font color='red'>{</font>
<a name='L1244'>        <b>if</b> (*<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &lt; 256) <font color='red'>{</font>
<a name='L1245'>            pdata[0] = <a href='../S/2588.html#L43' title='Defined at 43 in Modules/_pickle.c.'>BINGET</a>;
<a name='L1246'>            pdata[1] = (<b>unsigned</b> <b>char</b>)(*<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &amp; 0xff);
<a name='L1247'>            len = 2;
<a name='L1248'>        <font color='red'>}</font>
<a name='L1249'>        <b>else</b> <b>if</b> (*<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &lt;= 0xffffffffL) <font color='red'>{</font>
<a name='L1250'>            pdata[0] = <a href='../S/2588.html#L45' title='Defined at 45 in Modules/_pickle.c.'>LONG_BINGET</a>;
<a name='L1251'>            pdata[1] = (<b>unsigned</b> <b>char</b>)(*<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &amp; 0xff);
<a name='L1252'>            pdata[2] = (<b>unsigned</b> <b>char</b>)((*<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &gt;&gt; 8) &amp; 0xff);
<a name='L1253'>            pdata[3] = (<b>unsigned</b> <b>char</b>)((*<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &gt;&gt; 16) &amp; 0xff);
<a name='L1254'>            pdata[4] = (<b>unsigned</b> <b>char</b>)((*<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &gt;&gt; 24) &amp; 0xff);
<a name='L1255'>            len = 5;
<a name='L1256'>        <font color='red'>}</font>
<a name='L1257'>        <b>else</b> <font color='red'>{</font> <i><font color='green'>/* unlikely */</font></i>
<a name='L1258'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError,
<a name='L1259'>                            "memo id too large for LONG_BINGET");
<a name='L1260'>            <b>return</b> -1;
<a name='L1261'>        <font color='red'>}</font>
<a name='L1262'>    <font color='red'>}</font>
<a name='L1263'>
<a name='L1264'>    <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pdata, len) &lt; 0)
<a name='L1265'>        <b>return</b> -1;
<a name='L1266'>
<a name='L1267'>    <b>return</b> 0;
<a name='L1268'><font color='red'>}</font>
<a name='L1269'>
<a name='L1270'><i><font color='green'>/* Store an object in the memo, assign it a new unique ID based on the number</font></i>
<a name='L1271'><i><font color='green'>   of objects currently stored in the memo and generate a PUT opcode. */</font></i>
<a name='L1272'><b>static</b> <b>int</b>
<a name='L1273'><a href='../R/8977.html' title='Multiple refered from 7 places.'>memo_put</a>(PicklerObject *self, PyObject *obj)
<a name='L1274'><font color='red'>{</font>
<a name='L1275'>    <b>long</b> x;
<a name='L1276'>    <b>char</b> pdata[30];
<a name='L1277'>    <b>int</b> len;
<a name='L1278'>    <b>int</b> status = 0;
<a name='L1279'>
<a name='L1280'>    <b>if</b> (self-&gt;fast)
<a name='L1281'>        <b>return</b> 0;
<a name='L1282'>
<a name='L1283'>    x = <a href='../S/2588.html#L450' title='Defined at 450 in Modules/_pickle.c.'>PyMemoTable_Size</a>(self-&gt;memo);
<a name='L1284'>    <b>if</b> (<a href='../S/2588.html#L570' title='Defined at 570 in Modules/_pickle.c.'>PyMemoTable_Set</a>(self-&gt;memo, obj, x) &lt; 0)
<a name='L1285'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1286'>
<a name='L1287'>    <b>if</b> (!self-&gt;bin) <font color='red'>{</font>
<a name='L1288'>        pdata[0] = <a href='../D/2558.html' title='Multiple defined in 2 places.'>PUT</a>;
<a name='L1289'>        <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(pdata + 1, <b>sizeof</b>(pdata) - 1, "%ld\n", x);
<a name='L1290'>        len = strlen(pdata);
<a name='L1291'>    <font color='red'>}</font>
<a name='L1292'>    <b>else</b> <font color='red'>{</font>
<a name='L1293'>        <b>if</b> (x &lt; 256) <font color='red'>{</font>
<a name='L1294'>            pdata[0] = <a href='../S/2588.html#L50' title='Defined at 50 in Modules/_pickle.c.'>BINPUT</a>;
<a name='L1295'>            pdata[1] = (<b>unsigned</b> <b>char</b>)x;
<a name='L1296'>            len = 2;
<a name='L1297'>        <font color='red'>}</font>
<a name='L1298'>        <b>else</b> <b>if</b> (x &lt;= 0xffffffffL) <font color='red'>{</font>
<a name='L1299'>            pdata[0] = <a href='../S/2588.html#L51' title='Defined at 51 in Modules/_pickle.c.'>LONG_BINPUT</a>;
<a name='L1300'>            pdata[1] = (<b>unsigned</b> <b>char</b>)(x &amp; 0xff);
<a name='L1301'>            pdata[2] = (<b>unsigned</b> <b>char</b>)((x &gt;&gt; 8) &amp; 0xff);
<a name='L1302'>            pdata[3] = (<b>unsigned</b> <b>char</b>)((x &gt;&gt; 16) &amp; 0xff);
<a name='L1303'>            pdata[4] = (<b>unsigned</b> <b>char</b>)((x &gt;&gt; 24) &amp; 0xff);
<a name='L1304'>            len = 5;
<a name='L1305'>        <font color='red'>}</font>
<a name='L1306'>        <b>else</b> <font color='red'>{</font> <i><font color='green'>/* unlikely */</font></i>
<a name='L1307'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError,
<a name='L1308'>                            "memo id too large for LONG_BINPUT");
<a name='L1309'>            <b>return</b> -1;
<a name='L1310'>        <font color='red'>}</font>
<a name='L1311'>    <font color='red'>}</font>
<a name='L1312'>
<a name='L1313'>    <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pdata, len) &lt; 0)
<a name='L1314'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1315'>
<a name='L1316'>    <b>if</b> (0) <font color='red'>{</font>
<a name='L1317'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1318'>        status = -1;
<a name='L1319'>    <font color='red'>}</font>
<a name='L1320'>
<a name='L1321'>    <b>return</b> status;
<a name='L1322'><font color='red'>}</font>
<a name='L1323'>
<a name='L1324'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1325'><a href='../S/2588.html#L2570' title='Refered from 2570 in Modules/_pickle.c.'>whichmodule</a>(PyObject *global, PyObject *global_name)
<a name='L1326'><font color='red'>{</font>
<a name='L1327'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, j;
<a name='L1328'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1329'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *main_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1330'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_name;
<a name='L1331'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *modules_dict;
<a name='L1332'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module;
<a name='L1333'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;
<a name='L1334'>
<a name='L1335'>    <b>if</b> (module_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1336'>        module_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("__module__");
<a name='L1337'>        <b>if</b> (module_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1338'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1339'>        main_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("__main__");
<a name='L1340'>        <b>if</b> (main_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1341'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1342'>    <font color='red'>}</font>
<a name='L1343'>
<a name='L1344'>    module_name = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(global, module_str);
<a name='L1345'>
<a name='L1346'>    <i><font color='green'>/* In some rare cases (e.g., bound methods of extension types),</font></i>
<a name='L1347'><i><font color='green'>       __module__ can be None. If it is so, then search sys.modules</font></i>
<a name='L1348'><i><font color='green'>       for the module of global.  */</font></i>
<a name='L1349'>    <b>if</b> (module_name == Py_None) <font color='red'>{</font>
<a name='L1350'>        Py_DECREF(module_name);
<a name='L1351'>        <b>goto</b> <a href='../S/2624.html#L56' title='Defined at 56 in Modules/audioop.c.'>search</a>;
<a name='L1352'>    <font color='red'>}</font>
<a name='L1353'>
<a name='L1354'>    <b>if</b> (module_name) <font color='red'>{</font>
<a name='L1355'>        <b>return</b> module_name;
<a name='L1356'>    <font color='red'>}</font>
<a name='L1357'>    <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L1358'>        <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1359'>    <b>else</b>
<a name='L1360'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1361'>
<a name='L1362'>  <a href='../S/2624.html#L56' title='Defined at 56 in Modules/audioop.c.'>search</a>:
<a name='L1363'>    modules_dict = <a href='../S/3144.html#L44' title='Defined at 44 in Python/sysmodule.c.'>PySys_GetObject</a>("modules");
<a name='L1364'>    <b>if</b> (modules_dict == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1365'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1366'>
<a name='L1367'>    i = 0;
<a name='L1368'>    module_name = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1369'>    <b>while</b> ((j = <a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(modules_dict, &amp;i, &amp;module_name, &amp;module))) <font color='red'>{</font>
<a name='L1370'>        <b>if</b> (<a href='../S/2803.html#L607' title='Defined at 607 in Objects/object.c.'>PyObject_RichCompareBool</a>(module_name, main_str, <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>) == 1)
<a name='L1371'>            <b>continue</b>;
<a name='L1372'>
<a name='L1373'>        obj = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(module, global_name);
<a name='L1374'>        <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1375'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L1376'>                <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1377'>            <b>else</b>
<a name='L1378'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1379'>            <b>continue</b>;
<a name='L1380'>        <font color='red'>}</font>
<a name='L1381'>
<a name='L1382'>        <b>if</b> (obj != global) <font color='red'>{</font>
<a name='L1383'>            Py_DECREF(obj);
<a name='L1384'>            <b>continue</b>;
<a name='L1385'>        <font color='red'>}</font>
<a name='L1386'>
<a name='L1387'>        Py_DECREF(obj);
<a name='L1388'>        <b>break</b>;
<a name='L1389'>    <font color='red'>}</font>
<a name='L1390'>
<a name='L1391'>    <i><font color='green'>/* If no module is found, use __main__. */</font></i>
<a name='L1392'>    <b>if</b> (!j) <font color='red'>{</font>
<a name='L1393'>        module_name = main_str;
<a name='L1394'>    <font color='red'>}</font>
<a name='L1395'>
<a name='L1396'>    Py_INCREF(module_name);
<a name='L1397'>    <b>return</b> module_name;
<a name='L1398'><font color='red'>}</font>
<a name='L1399'>
<a name='L1400'><i><font color='green'>/* fast_save_enter() and fast_save_leave() are guards against recursive</font></i>
<a name='L1401'><i><font color='green'>   objects when Pickler is used with the "fast mode" (i.e., with object</font></i>
<a name='L1402'><i><font color='green'>   memoization disabled). If the nesting of a list or dict object exceed</font></i>
<a name='L1403'><i><font color='green'>   FAST_NESTING_LIMIT, these guards will start keeping an internal</font></i>
<a name='L1404'><i><font color='green'>   reference to the seen list or dict objects and check whether these objects</font></i>
<a name='L1405'><i><font color='green'>   are recursive. These are not strictly necessary, since save() has a</font></i>
<a name='L1406'><i><font color='green'>   hard-coded recursion limit, but they give a nicer error message than the</font></i>
<a name='L1407'><i><font color='green'>   typical RuntimeError. */</font></i>
<a name='L1408'><b>static</b> <b>int</b>
<a name='L1409'><a href='../R/7665.html' title='Multiple refered from 2 places.'>fast_save_enter</a>(PicklerObject *self, PyObject *obj)
<a name='L1410'><font color='red'>{</font>
<a name='L1411'>    <i><font color='green'>/* if fast_nesting &lt; 0, we're doing an error exit. */</font></i>
<a name='L1412'>    <b>if</b> (++self-&gt;fast_nesting &gt;= <a href='../S/2588.html#L96' title='Defined at 96 in Modules/_pickle.c.'>FAST_NESTING_LIMIT</a>) <font color='red'>{</font>
<a name='L1413'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1414'>        <b>if</b> (self-&gt;fast_memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1415'>            self-&gt;fast_memo = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L1416'>            <b>if</b> (self-&gt;fast_memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1417'>                self-&gt;fast_nesting = -1;
<a name='L1418'>                <b>return</b> 0;
<a name='L1419'>            <font color='red'>}</font>
<a name='L1420'>        <font color='red'>}</font>
<a name='L1421'>        <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L929' title='Defined at 929 in Objects/longobject.c.'>PyLong_FromVoidPtr</a>(obj);
<a name='L1422'>        <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1423'>            <b>return</b> 0;
<a name='L1424'>        <b>if</b> (<a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(self-&gt;fast_memo, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)) <font color='red'>{</font>
<a name='L1425'>            Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1426'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L1427'>                         "fast mode: can't pickle cyclic objects "
<a name='L1428'>                         "including object type %.200s at %p",
<a name='L1429'>                         obj-&gt;ob_type-&gt;tp_name, obj);
<a name='L1430'>            self-&gt;fast_nesting = -1;
<a name='L1431'>            <b>return</b> 0;
<a name='L1432'>        <font color='red'>}</font>
<a name='L1433'>        <b>if</b> (<a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(self-&gt;fast_memo, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, Py_None) &lt; 0) <font color='red'>{</font>
<a name='L1434'>            Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1435'>            self-&gt;fast_nesting = -1;
<a name='L1436'>            <b>return</b> 0;
<a name='L1437'>        <font color='red'>}</font>
<a name='L1438'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1439'>    <font color='red'>}</font>
<a name='L1440'>    <b>return</b> 1;
<a name='L1441'><font color='red'>}</font>
<a name='L1442'>
<a name='L1443'><b>static</b> <b>int</b>
<a name='L1444'><a href='../R/7666.html' title='Multiple refered from 2 places.'>fast_save_leave</a>(PicklerObject *self, PyObject *obj)
<a name='L1445'><font color='red'>{</font>
<a name='L1446'>    <b>if</b> (self-&gt;fast_nesting-- &gt;= <a href='../S/2588.html#L96' title='Defined at 96 in Modules/_pickle.c.'>FAST_NESTING_LIMIT</a>) <font color='red'>{</font>
<a name='L1447'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L929' title='Defined at 929 in Objects/longobject.c.'>PyLong_FromVoidPtr</a>(obj);
<a name='L1448'>        <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1449'>            <b>return</b> 0;
<a name='L1450'>        <b>if</b> (<a href='../S/2787.html#L832' title='Defined at 832 in Objects/dictobject.c.'>PyDict_DelItem</a>(self-&gt;fast_memo, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>) &lt; 0) <font color='red'>{</font>
<a name='L1451'>            Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1452'>            <b>return</b> 0;
<a name='L1453'>        <font color='red'>}</font>
<a name='L1454'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1455'>    <font color='red'>}</font>
<a name='L1456'>    <b>return</b> 1;
<a name='L1457'><font color='red'>}</font>
<a name='L1458'>
<a name='L1459'><b>static</b> <b>int</b>
<a name='L1460'><a href='../S/2588.html#L3079' title='Refered from 3079 in Modules/_pickle.c.'>save_none</a>(PicklerObject *self, PyObject *obj)
<a name='L1461'><font color='red'>{</font>
<a name='L1462'>    <b>const</b> <b>char</b> none_op = <a href='../D/2318.html' title='Multiple defined in 5 places.'>NONE</a>;
<a name='L1463'>    <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;none_op, 1) &lt; 0)
<a name='L1464'>        <b>return</b> -1;
<a name='L1465'>
<a name='L1466'>    <b>return</b> 0;
<a name='L1467'><font color='red'>}</font>
<a name='L1468'>
<a name='L1469'><b>static</b> <b>int</b>
<a name='L1470'><a href='../S/2588.html#L3083' title='Refered from 3083 in Modules/_pickle.c.'>save_bool</a>(PicklerObject *self, PyObject *obj)
<a name='L1471'><font color='red'>{</font>
<a name='L1472'>    <b>static</b> <b>const</b> <b>char</b> *buf[2] = <font color='red'>{</font> <a href='../D/1087.html' title='Multiple defined in 3 places.'>FALSE</a>, <a href='../D/5177.html' title='Multiple defined in 3 places.'>TRUE</a> <font color='red'>}</font>;
<a name='L1473'>    <b>const</b> <b>char</b> len[2] = <font color='red'>{</font><b>sizeof</b>(<a href='../D/1087.html' title='Multiple defined in 3 places.'>FALSE</a>) - 1, <b>sizeof</b>(<a href='../D/5177.html' title='Multiple defined in 3 places.'>TRUE</a>) - 1<font color='red'>}</font>;
<a name='L1474'>    <b>int</b> p = (obj == Py_True);
<a name='L1475'>
<a name='L1476'>    <b>if</b> (self-&gt;proto &gt;= 2) <font color='red'>{</font>
<a name='L1477'>        <b>const</b> <b>char</b> bool_op = p ? <a href='../S/2588.html#L67' title='Defined at 67 in Modules/_pickle.c.'>NEWTRUE</a> : <a href='../S/2588.html#L68' title='Defined at 68 in Modules/_pickle.c.'>NEWFALSE</a>;
<a name='L1478'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;bool_op, 1) &lt; 0)
<a name='L1479'>            <b>return</b> -1;
<a name='L1480'>    <font color='red'>}</font>
<a name='L1481'>    <b>else</b> <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, buf[p], len[p]) &lt; 0)
<a name='L1482'>        <b>return</b> -1;
<a name='L1483'>
<a name='L1484'>    <b>return</b> 0;
<a name='L1485'><font color='red'>}</font>
<a name='L1486'>
<a name='L1487'><b>static</b> <b>int</b>
<a name='L1488'><a href='../S/2588.html#L1550' title='Refered from 1550 in Modules/_pickle.c.'>save_int</a>(PicklerObject *self, <b>long</b> x)
<a name='L1489'><font color='red'>{</font>
<a name='L1490'>    <b>char</b> pdata[32];
<a name='L1491'>    <b>int</b> len = 0;
<a name='L1492'>
<a name='L1493'>    <b>if</b> (!self-&gt;bin
<a name='L1494'><font color='darkred'>#if</font> <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; 4
<a name='L1495'>        || x &gt; 0x7fffffffL || x &lt; -0x80000000L
<a name='L1496'><font color='darkred'>#endif</font>
<a name='L1497'>        ) <font color='red'>{</font>
<a name='L1498'>        <i><font color='green'>/* Text-mode pickle, or long too big to fit in the 4-byte</font></i>
<a name='L1499'><i><font color='green'>         * signed BININT format:  store as a string.</font></i>
<a name='L1500'><i><font color='green'>         */</font></i>
<a name='L1501'>        pdata[0] = <a href='../S/2588.html#L25' title='Defined at 25 in Modules/_pickle.c.'>LONG</a>;        <i><font color='green'>/* use LONG for consistency with pickle.py */</font></i>
<a name='L1502'>        <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(pdata + 1, <b>sizeof</b>(pdata) - 1, "%ldL\n", x);
<a name='L1503'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pdata, strlen(pdata)) &lt; 0)
<a name='L1504'>            <b>return</b> -1;
<a name='L1505'>    <font color='red'>}</font>
<a name='L1506'>    <b>else</b> <font color='red'>{</font>
<a name='L1507'>        <i><font color='green'>/* Binary pickle and x fits in a signed 4-byte int. */</font></i>
<a name='L1508'>        pdata[1] = (<b>unsigned</b> <b>char</b>)(x &amp; 0xff);
<a name='L1509'>        pdata[2] = (<b>unsigned</b> <b>char</b>)((x &gt;&gt; 8) &amp; 0xff);
<a name='L1510'>        pdata[3] = (<b>unsigned</b> <b>char</b>)((x &gt;&gt; 16) &amp; 0xff);
<a name='L1511'>        pdata[4] = (<b>unsigned</b> <b>char</b>)((x &gt;&gt; 24) &amp; 0xff);
<a name='L1512'>
<a name='L1513'>        <b>if</b> ((pdata[4] == 0) &amp;&amp; (pdata[3] == 0)) <font color='red'>{</font>
<a name='L1514'>            <b>if</b> (pdata[2] == 0) <font color='red'>{</font>
<a name='L1515'>                pdata[0] = <a href='../S/2588.html#L24' title='Defined at 24 in Modules/_pickle.c.'>BININT1</a>;
<a name='L1516'>                len = 2;
<a name='L1517'>            <font color='red'>}</font>
<a name='L1518'>            <b>else</b> <font color='red'>{</font>
<a name='L1519'>                pdata[0] = <a href='../S/2588.html#L26' title='Defined at 26 in Modules/_pickle.c.'>BININT2</a>;
<a name='L1520'>                len = 3;
<a name='L1521'>            <font color='red'>}</font>
<a name='L1522'>        <font color='red'>}</font>
<a name='L1523'>        <b>else</b> <font color='red'>{</font>
<a name='L1524'>            pdata[0] = <a href='../S/2588.html#L23' title='Defined at 23 in Modules/_pickle.c.'>BININT</a>;
<a name='L1525'>            len = 5;
<a name='L1526'>        <font color='red'>}</font>
<a name='L1527'>
<a name='L1528'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pdata, len) &lt; 0)
<a name='L1529'>            <b>return</b> -1;
<a name='L1530'>    <font color='red'>}</font>
<a name='L1531'>
<a name='L1532'>    <b>return</b> 0;
<a name='L1533'><font color='red'>}</font>
<a name='L1534'>
<a name='L1535'><b>static</b> <b>int</b>
<a name='L1536'><a href='../S/2588.html#L3087' title='Refered from 3087 in Modules/_pickle.c.'>save_long</a>(PicklerObject *self, PyObject *obj)
<a name='L1537'><font color='red'>{</font>
<a name='L1538'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repr = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1539'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L1540'>    <b>long</b> val = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(obj);
<a name='L1541'>    <b>int</b> status = 0;
<a name='L1542'>
<a name='L1543'>    <b>const</b> <b>char</b> long_op = <a href='../S/2588.html#L25' title='Defined at 25 in Modules/_pickle.c.'>LONG</a>;
<a name='L1544'>
<a name='L1545'>    <b>if</b> (val == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L1546'>        <i><font color='green'>/* out of range for int pickling */</font></i>
<a name='L1547'>        <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1548'>    <font color='red'>}</font>
<a name='L1549'>    <b>else</b>
<a name='L1550'>        <b>return</b> <a href='../S/2588.html#L1488' title='Defined at 1488 in Modules/_pickle.c.'>save_int</a>(self, val);
<a name='L1551'>
<a name='L1552'>    <b>if</b> (self-&gt;proto &gt;= 2) <font color='red'>{</font>
<a name='L1553'>        <i><font color='green'>/* Linear-time pickling. */</font></i>
<a name='L1554'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> nbits;
<a name='L1555'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> nbytes;
<a name='L1556'>        <b>unsigned</b> <b>char</b> *pdata;
<a name='L1557'>        <b>char</b> header[5];
<a name='L1558'>        <b>int</b> i;
<a name='L1559'>        <b>int</b> sign = <a href='../S/2799.html#L640' title='Defined at 640 in Objects/longobject.c.'>_PyLong_Sign</a>(obj);
<a name='L1560'>
<a name='L1561'>        <b>if</b> (sign == 0) <font color='red'>{</font>
<a name='L1562'>            header[0] = <a href='../S/2588.html#L69' title='Defined at 69 in Modules/_pickle.c.'>LONG1</a>;
<a name='L1563'>            header[1] = 0;      <i><font color='green'>/* It's 0 -- an empty bytestring. */</font></i>
<a name='L1564'>            <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, header, 2) &lt; 0)
<a name='L1565'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1566'>            <b>return</b> 0;
<a name='L1567'>        <font color='red'>}</font>
<a name='L1568'>        nbits = <a href='../S/2799.html#L651' title='Defined at 651 in Objects/longobject.c.'>_PyLong_NumBits</a>(obj);
<a name='L1569'>        <b>if</b> (nbits == (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1570'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1571'>        <i><font color='green'>/* How many bytes do we need?  There are nbits &gt;&gt; 3 full</font></i>
<a name='L1572'><i><font color='green'>         * bytes of data, and nbits &amp; 7 leftover bits.  If there</font></i>
<a name='L1573'><i><font color='green'>         * are any leftover bits, then we clearly need another</font></i>
<a name='L1574'><i><font color='green'>         * byte.  Wnat's not so obvious is that we *probably*</font></i>
<a name='L1575'><i><font color='green'>         * need another byte even if there aren't any leftovers:</font></i>
<a name='L1576'><i><font color='green'>         * the most-significant bit of the most-significant byte</font></i>
<a name='L1577'><i><font color='green'>         * acts like a sign bit, and it's usually got a sense</font></i>
<a name='L1578'><i><font color='green'>         * opposite of the one we need.  The exception is longs</font></i>
<a name='L1579'><i><font color='green'>         * of the form -(2**(8*j-1)) for j &gt; 0.  Such a long is</font></i>
<a name='L1580'><i><font color='green'>         * its own 256's-complement, so has the right sign bit</font></i>
<a name='L1581'><i><font color='green'>         * even without the extra byte.  That's a pain to check</font></i>
<a name='L1582'><i><font color='green'>         * for in advance, though, so we always grab an extra</font></i>
<a name='L1583'><i><font color='green'>         * byte at the start, and cut it back later if possible.</font></i>
<a name='L1584'><i><font color='green'>         */</font></i>
<a name='L1585'>        nbytes = (nbits &gt;&gt; 3) + 1;
<a name='L1586'>        <b>if</b> (nbytes &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>) <font color='red'>{</font>
<a name='L1587'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L1588'>                            "long too large to pickle");
<a name='L1589'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1590'>        <font color='red'>}</font>
<a name='L1591'>        repr = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)nbytes);
<a name='L1592'>        <b>if</b> (repr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1593'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1594'>        pdata = (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(repr);
<a name='L1595'>        i = <a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)obj,
<a name='L1596'>                                pdata, nbytes,
<a name='L1597'>                                1 <i><font color='green'>/* little endian */</font></i> , 1 <i><font color='green'>/* signed */</font></i> );
<a name='L1598'>        <b>if</b> (i &lt; 0)
<a name='L1599'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1600'>        <i><font color='green'>/* If the long is negative, this may be a byte more than</font></i>
<a name='L1601'><i><font color='green'>         * needed.  This is so iff the MSB is all redundant sign</font></i>
<a name='L1602'><i><font color='green'>         * bits.</font></i>
<a name='L1603'><i><font color='green'>         */</font></i>
<a name='L1604'>        <b>if</b> (sign &lt; 0 &amp;&amp;
<a name='L1605'>            nbytes &gt; 1 &amp;&amp; 
<a name='L1606'>            pdata[nbytes - 1] == 0xff &amp;&amp;
<a name='L1607'>            (pdata[nbytes - 2] &amp; 0x80) != 0) <font color='red'>{</font>
<a name='L1608'>            nbytes--;
<a name='L1609'>        <font color='red'>}</font>
<a name='L1610'>
<a name='L1611'>        <b>if</b> (nbytes &lt; 256) <font color='red'>{</font>
<a name='L1612'>            header[0] = <a href='../S/2588.html#L69' title='Defined at 69 in Modules/_pickle.c.'>LONG1</a>;
<a name='L1613'>            header[1] = (<b>unsigned</b> <b>char</b>)nbytes;
<a name='L1614'>            size = 2;
<a name='L1615'>        <font color='red'>}</font>
<a name='L1616'>        <b>else</b> <font color='red'>{</font>
<a name='L1617'>            header[0] = <a href='../S/2588.html#L70' title='Defined at 70 in Modules/_pickle.c.'>LONG4</a>;
<a name='L1618'>            size = (<b>int</b>)nbytes;
<a name='L1619'>            <b>for</b> (i = 1; i &lt; 5; i++) <font color='red'>{</font>
<a name='L1620'>                header[i] = (<b>unsigned</b> <b>char</b>)(size &amp; 0xff);
<a name='L1621'>                size &gt;&gt;= 8;
<a name='L1622'>            <font color='red'>}</font>
<a name='L1623'>            size = 5;
<a name='L1624'>        <font color='red'>}</font>
<a name='L1625'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, header, size) &lt; 0 ||
<a name='L1626'>            <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, (<b>char</b> *)pdata, (<b>int</b>)nbytes) &lt; 0)
<a name='L1627'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1628'>    <font color='red'>}</font>
<a name='L1629'>    <b>else</b> <font color='red'>{</font>
<a name='L1630'>        <b>char</b> *<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>;
<a name='L1631'>
<a name='L1632'>        <i><font color='green'>/* proto &lt; 2: write the repr and newline.  This is quadratic-time (in</font></i>
<a name='L1633'><i><font color='green'>           the number of digits), in both directions.  We add a trailing 'L'</font></i>
<a name='L1634'><i><font color='green'>           to the repr, for compatibility with Python 2.x. */</font></i>
<a name='L1635'>
<a name='L1636'>        repr = <a href='../S/2803.html#L368' title='Defined at 368 in Objects/object.c.'>PyObject_Repr</a>(obj);
<a name='L1637'>        <b>if</b> (repr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1638'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1639'>
<a name='L1640'>        <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a> = <a href='../S/2828.html#L1903' title='Defined at 1903 in Objects/unicodeobject.c.'>_PyUnicode_AsStringAndSize</a>(repr, &amp;size);
<a name='L1641'>        <b>if</b> (<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1642'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1643'>
<a name='L1644'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;long_op, 1) &lt; 0 ||
<a name='L1645'>            <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>, size) &lt; 0 ||
<a name='L1646'>            <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, "L\n", 2) &lt; 0)
<a name='L1647'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1648'>    <font color='red'>}</font>
<a name='L1649'>
<a name='L1650'>    <b>if</b> (0) <font color='red'>{</font>
<a name='L1651'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1652'>      status = -1;
<a name='L1653'>    <font color='red'>}</font>
<a name='L1654'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(repr);
<a name='L1655'>
<a name='L1656'>    <b>return</b> status;
<a name='L1657'><font color='red'>}</font>
<a name='L1658'>
<a name='L1659'><b>static</b> <b>int</b>
<a name='L1660'><a href='../S/2588.html#L3091' title='Refered from 3091 in Modules/_pickle.c.'>save_float</a>(PicklerObject *self, PyObject *obj)
<a name='L1661'><font color='red'>{</font>
<a name='L1662'>    <b>double</b> x = PyFloat_AS_DOUBLE((<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *)obj);
<a name='L1663'>
<a name='L1664'>    <b>if</b> (self-&gt;bin) <font color='red'>{</font>
<a name='L1665'>        <b>char</b> pdata[9];
<a name='L1666'>        pdata[0] = <a href='../S/2588.html#L56' title='Defined at 56 in Modules/_pickle.c.'>BINFLOAT</a>;
<a name='L1667'>        <b>if</b> (<a href='../S/2791.html#L2149' title='Defined at 2149 in Objects/floatobject.c.'>_PyFloat_Pack8</a>(x, (<b>unsigned</b> <b>char</b> *)&amp;pdata[1], 0) &lt; 0)
<a name='L1668'>            <b>return</b> -1;
<a name='L1669'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pdata, 9) &lt; 0)
<a name='L1670'>            <b>return</b> -1;
<a name='L1671'>   <font color='red'>}</font> 
<a name='L1672'>    <b>else</b> <font color='red'>{</font>
<a name='L1673'>        <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = -1;
<a name='L1674'>        <b>char</b> *buf = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1675'>        <b>char</b> op = <a href='../S/2588.html#L21' title='Defined at 21 in Modules/_pickle.c.'>FLOAT</a>;
<a name='L1676'>
<a name='L1677'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;op, 1) &lt; 0)
<a name='L1678'>            <b>goto</b> done;
<a name='L1679'>
<a name='L1680'>        buf = PyOS_double_to_string(x, 'g', 17, 0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1681'>        <b>if</b> (!buf) <font color='red'>{</font>
<a name='L1682'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1683'>            <b>goto</b> done;
<a name='L1684'>        <font color='red'>}</font>
<a name='L1685'>
<a name='L1686'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, buf, strlen(buf)) &lt; 0)
<a name='L1687'>            <b>goto</b> done;
<a name='L1688'>
<a name='L1689'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, "\n", 1) &lt; 0)
<a name='L1690'>            <b>goto</b> done;
<a name='L1691'>
<a name='L1692'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 0;
<a name='L1693'>done:
<a name='L1694'>        <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(buf);
<a name='L1695'>        <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1696'>    <font color='red'>}</font>
<a name='L1697'>
<a name='L1698'>    <b>return</b> 0;
<a name='L1699'><font color='red'>}</font>
<a name='L1700'>
<a name='L1701'><b>static</b> <b>int</b>
<a name='L1702'><a href='../S/2588.html#L3105' title='Refered from 3105 in Modules/_pickle.c.'>save_bytes</a>(PicklerObject *self, PyObject *obj)
<a name='L1703'><font color='red'>{</font>
<a name='L1704'>    <b>if</b> (self-&gt;proto &lt; 3) <font color='red'>{</font>
<a name='L1705'>        <i><font color='green'>/* Older pickle protocols do not have an opcode for pickling bytes</font></i>
<a name='L1706'><i><font color='green'>           objects. Therefore, we need to fake the copy protocol (i.e.,</font></i>
<a name='L1707'><i><font color='green'>           the __reduce__ method) to permit bytes object unpickling. */</font></i>
<a name='L1708'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *reduce_value = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1709'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *bytelist = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1710'>        <b>int</b> status;
<a name='L1711'>
<a name='L1712'>        bytelist = <a href='../S/2775.html#L1814' title='Defined at 1814 in Objects/abstract.c.'>PySequence_List</a>(obj);
<a name='L1713'>        <b>if</b> (bytelist == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1714'>            <b>return</b> -1;
<a name='L1715'>
<a name='L1716'>        reduce_value = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(O(O))", (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;PyBytes_Type,
<a name='L1717'>                                     bytelist);
<a name='L1718'>        <b>if</b> (reduce_value == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1719'>            Py_DECREF(bytelist);
<a name='L1720'>            <b>return</b> -1;
<a name='L1721'>        <font color='red'>}</font>
<a name='L1722'>
<a name='L1723'>        <i><font color='green'>/* save_reduce() will memoize the object automatically. */</font></i>
<a name='L1724'>        status = <a href='../S/2588.html#L2854' title='Defined at 2854 in Modules/_pickle.c.'>save_reduce</a>(self, reduce_value, obj);
<a name='L1725'>        Py_DECREF(reduce_value);
<a name='L1726'>        Py_DECREF(bytelist);
<a name='L1727'>        <b>return</b> status;
<a name='L1728'>    <font color='red'>}</font>
<a name='L1729'>    <b>else</b> <font color='red'>{</font>
<a name='L1730'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L1731'>        <b>char</b> header[5];
<a name='L1732'>        <b>int</b> len;
<a name='L1733'>
<a name='L1734'>        size = <a href='../S/2779.html#L506' title='Defined at 506 in Objects/bytesobject.c.'>PyBytes_Size</a>(obj);
<a name='L1735'>        <b>if</b> (size &lt; 0)
<a name='L1736'>            <b>return</b> -1;
<a name='L1737'>
<a name='L1738'>        <b>if</b> (size &lt; 256) <font color='red'>{</font>
<a name='L1739'>            header[0] = <a href='../S/2588.html#L74' title='Defined at 74 in Modules/_pickle.c.'>SHORT_BINBYTES</a>;
<a name='L1740'>            header[1] = (<b>unsigned</b> <b>char</b>)size;
<a name='L1741'>            len = 2;
<a name='L1742'>        <font color='red'>}</font>
<a name='L1743'>        <b>else</b> <b>if</b> (size &lt;= 0xffffffffL) <font color='red'>{</font>
<a name='L1744'>            header[0] = <a href='../S/2588.html#L73' title='Defined at 73 in Modules/_pickle.c.'>BINBYTES</a>;
<a name='L1745'>            header[1] = (<b>unsigned</b> <b>char</b>)(size &amp; 0xff);
<a name='L1746'>            header[2] = (<b>unsigned</b> <b>char</b>)((size &gt;&gt; 8) &amp; 0xff);
<a name='L1747'>            header[3] = (<b>unsigned</b> <b>char</b>)((size &gt;&gt; 16) &amp; 0xff);
<a name='L1748'>            header[4] = (<b>unsigned</b> <b>char</b>)((size &gt;&gt; 24) &amp; 0xff);
<a name='L1749'>            len = 5;
<a name='L1750'>        <font color='red'>}</font>
<a name='L1751'>        <b>else</b> <font color='red'>{</font>
<a name='L1752'>            <b>return</b> -1;          <i><font color='green'>/* string too large */</font></i>
<a name='L1753'>        <font color='red'>}</font>
<a name='L1754'>
<a name='L1755'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, header, len) &lt; 0)
<a name='L1756'>            <b>return</b> -1;
<a name='L1757'>
<a name='L1758'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, PyBytes_AS_STRING(obj), size) &lt; 0)
<a name='L1759'>            <b>return</b> -1;
<a name='L1760'>
<a name='L1761'>        <b>if</b> (<a href='../S/2588.html#L1273' title='Defined at 1273 in Modules/_pickle.c.'>memo_put</a>(self, obj) &lt; 0)
<a name='L1762'>            <b>return</b> -1;
<a name='L1763'>
<a name='L1764'>        <b>return</b> 0;
<a name='L1765'>    <font color='red'>}</font>
<a name='L1766'><font color='red'>}</font>
<a name='L1767'>
<a name='L1768'><i><font color='green'>/* A copy of PyUnicode_EncodeRawUnicodeEscape() that also translates</font></i>
<a name='L1769'><i><font color='green'>   backslash and newline characters to \uXXXX escapes. */</font></i>
<a name='L1770'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1771'><a href='../S/2588.html#L1894' title='Refered from 1894 in Modules/_pickle.c.'>raw_unicode_escape</a>(<b>const</b> Py_UNICODE *s, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L1772'><font color='red'>{</font>
<a name='L1773'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repr, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1774'>    <b>char</b> *p;
<a name='L1775'>    <b>char</b> *q;
<a name='L1776'>
<a name='L1777'>    <b>static</b> <b>const</b> <b>char</b> *hexdigits = "0123456789abcdef";
<a name='L1778'>
<a name='L1779'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L1780'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> expandsize = 10;
<a name='L1781'><font color='darkred'>#else</font>
<a name='L1782'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> expandsize = 6;
<a name='L1783'><font color='darkred'>#endif</font>
<a name='L1784'>    
<a name='L1785'>    <b>if</b> (size &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / expandsize)
<a name='L1786'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1787'>    
<a name='L1788'>    repr = <a href='../S/2777.html#L116' title='Defined at 116 in Objects/bytearrayobject.c.'>PyByteArray_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, expandsize * size);
<a name='L1789'>    <b>if</b> (repr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1790'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1791'>    <b>if</b> (size == 0)
<a name='L1792'>        <b>goto</b> done;
<a name='L1793'>
<a name='L1794'>    p = q = PyByteArray_AS_STRING(repr);
<a name='L1795'>    <b>while</b> (size-- &gt; 0) <font color='red'>{</font>
<a name='L1796'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *s++;
<a name='L1797'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L1798'>        <i><font color='green'>/* Map 32-bit characters to '\Uxxxxxxxx' */</font></i>
<a name='L1799'>        <b>if</b> (ch &gt;= 0x10000) <font color='red'>{</font>
<a name='L1800'>            *p++ = '\\';
<a name='L1801'>            *p++ = 'U';
<a name='L1802'>            *p++ = hexdigits[(ch &gt;&gt; 28) &amp; 0xf];
<a name='L1803'>            *p++ = hexdigits[(ch &gt;&gt; 24) &amp; 0xf];
<a name='L1804'>            *p++ = hexdigits[(ch &gt;&gt; 20) &amp; 0xf];
<a name='L1805'>            *p++ = hexdigits[(ch &gt;&gt; 16) &amp; 0xf];
<a name='L1806'>            *p++ = hexdigits[(ch &gt;&gt; 12) &amp; 0xf];
<a name='L1807'>            *p++ = hexdigits[(ch &gt;&gt; 8) &amp; 0xf];
<a name='L1808'>            *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0xf];
<a name='L1809'>            *p++ = hexdigits[ch &amp; 15];
<a name='L1810'>        <font color='red'>}</font>
<a name='L1811'>        <b>else</b>
<a name='L1812'><font color='darkred'>#else</font>
<a name='L1813'>            <i><font color='green'>/* Map UTF-16 surrogate pairs to '\U00xxxxxx' */</font></i>
<a name='L1814'>            <b>if</b> (ch &gt;= 0xD800 &amp;&amp; ch &lt; 0xDC00) <font color='red'>{</font>
<a name='L1815'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch2;
<a name='L1816'>                <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ucs;
<a name='L1817'>
<a name='L1818'>                ch2 = *s++;
<a name='L1819'>                size--;
<a name='L1820'>                <b>if</b> (ch2 &gt;= 0xDC00 &amp;&amp; ch2 &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L1821'>                    ucs = (((ch &amp; 0x03FF) &lt;&lt; 10) | (ch2 &amp; 0x03FF)) + 0x00010000;
<a name='L1822'>                    *p++ = '\\';
<a name='L1823'>                    *p++ = 'U';
<a name='L1824'>                    *p++ = hexdigits[(ucs &gt;&gt; 28) &amp; 0xf];
<a name='L1825'>                    *p++ = hexdigits[(ucs &gt;&gt; 24) &amp; 0xf];
<a name='L1826'>                    *p++ = hexdigits[(ucs &gt;&gt; 20) &amp; 0xf];
<a name='L1827'>                    *p++ = hexdigits[(ucs &gt;&gt; 16) &amp; 0xf];
<a name='L1828'>                    *p++ = hexdigits[(ucs &gt;&gt; 12) &amp; 0xf];
<a name='L1829'>                    *p++ = hexdigits[(ucs &gt;&gt; 8) &amp; 0xf];
<a name='L1830'>                    *p++ = hexdigits[(ucs &gt;&gt; 4) &amp; 0xf];
<a name='L1831'>                    *p++ = hexdigits[ucs &amp; 0xf];
<a name='L1832'>                    <b>continue</b>;
<a name='L1833'>                <font color='red'>}</font>
<a name='L1834'>                <i><font color='green'>/* Fall through: isolated surrogates are copied as-is */</font></i>
<a name='L1835'>                s--;
<a name='L1836'>                size++;
<a name='L1837'>            <font color='red'>}</font>
<a name='L1838'><font color='darkred'>#endif</font>
<a name='L1839'>        <i><font color='green'>/* Map 16-bit characters to '\uxxxx' */</font></i>
<a name='L1840'>        <b>if</b> (ch &gt;= 256 || ch == '\\' || ch == '\n') <font color='red'>{</font>
<a name='L1841'>            *p++ = '\\';
<a name='L1842'>            *p++ = 'u';
<a name='L1843'>            *p++ = hexdigits[(ch &gt;&gt; 12) &amp; 0xf];
<a name='L1844'>            *p++ = hexdigits[(ch &gt;&gt; 8) &amp; 0xf];
<a name='L1845'>            *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0xf];
<a name='L1846'>            *p++ = hexdigits[ch &amp; 15];
<a name='L1847'>        <font color='red'>}</font>
<a name='L1848'>        <i><font color='green'>/* Copy everything else as-is */</font></i>
<a name='L1849'>        <b>else</b>
<a name='L1850'>            *p++ = (<b>char</b>) ch;
<a name='L1851'>    <font color='red'>}</font>
<a name='L1852'>    size = p - q;
<a name='L1853'>
<a name='L1854'>  done:
<a name='L1855'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(PyByteArray_AS_STRING(repr), size);
<a name='L1856'>    Py_DECREF(repr);
<a name='L1857'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1858'><font color='red'>}</font>
<a name='L1859'>
<a name='L1860'><b>static</b> <b>int</b>
<a name='L1861'><a href='../S/2588.html#L3109' title='Refered from 3109 in Modules/_pickle.c.'>save_unicode</a>(PicklerObject *self, PyObject *obj)
<a name='L1862'><font color='red'>{</font>
<a name='L1863'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L1864'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *encoded = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1865'>
<a name='L1866'>    <b>if</b> (self-&gt;bin) <font color='red'>{</font>
<a name='L1867'>        <b>char</b> pdata[5];
<a name='L1868'>
<a name='L1869'>        encoded = <a href='../D/4001.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF8</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(obj),
<a name='L1870'>                                    <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(obj),
<a name='L1871'>                                    "surrogatepass");
<a name='L1872'>        <b>if</b> (encoded == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1873'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1874'>
<a name='L1875'>        size = PyBytes_GET_SIZE(encoded);
<a name='L1876'>        <b>if</b> (size &lt; 0 || size &gt; 0xffffffffL)
<a name='L1877'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;          <i><font color='green'>/* string too large */</font></i>
<a name='L1878'>
<a name='L1879'>        pdata[0] = <a href='../S/2588.html#L35' title='Defined at 35 in Modules/_pickle.c.'>BINUNICODE</a>;
<a name='L1880'>        pdata[1] = (<b>unsigned</b> <b>char</b>)(size &amp; 0xff);
<a name='L1881'>        pdata[2] = (<b>unsigned</b> <b>char</b>)((size &gt;&gt; 8) &amp; 0xff);
<a name='L1882'>        pdata[3] = (<b>unsigned</b> <b>char</b>)((size &gt;&gt; 16) &amp; 0xff);
<a name='L1883'>        pdata[4] = (<b>unsigned</b> <b>char</b>)((size &gt;&gt; 24) &amp; 0xff);
<a name='L1884'>
<a name='L1885'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pdata, 5) &lt; 0)
<a name='L1886'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1887'>
<a name='L1888'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, PyBytes_AS_STRING(encoded), size) &lt; 0)
<a name='L1889'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1890'>    <font color='red'>}</font>
<a name='L1891'>    <b>else</b> <font color='red'>{</font>
<a name='L1892'>        <b>const</b> <b>char</b> unicode_op = <a href='../S/2588.html#L34' title='Defined at 34 in Modules/_pickle.c.'>UNICODE</a>;
<a name='L1893'>
<a name='L1894'>        encoded = <a href='../S/2588.html#L1771' title='Defined at 1771 in Modules/_pickle.c.'>raw_unicode_escape</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(obj),
<a name='L1895'>                                     <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(obj));
<a name='L1896'>        <b>if</b> (encoded == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1897'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1898'>
<a name='L1899'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;unicode_op, 1) &lt; 0)
<a name='L1900'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1901'>
<a name='L1902'>        size = PyBytes_GET_SIZE(encoded);
<a name='L1903'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, PyBytes_AS_STRING(encoded), size) &lt; 0)
<a name='L1904'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1905'>
<a name='L1906'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, "\n", 1) &lt; 0)
<a name='L1907'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1908'>    <font color='red'>}</font>
<a name='L1909'>    <b>if</b> (<a href='../S/2588.html#L1273' title='Defined at 1273 in Modules/_pickle.c.'>memo_put</a>(self, obj) &lt; 0)
<a name='L1910'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1911'>
<a name='L1912'>    Py_DECREF(encoded);
<a name='L1913'>    <b>return</b> 0;
<a name='L1914'>
<a name='L1915'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1916'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(encoded);
<a name='L1917'>    <b>return</b> -1;
<a name='L1918'><font color='red'>}</font>
<a name='L1919'>
<a name='L1920'><i><font color='green'>/* A helper for save_tuple.  Push the len elements in tuple t on the stack. */</font></i>
<a name='L1921'><b>static</b> <b>int</b>
<a name='L1922'><a href='../R/10533.html' title='Multiple refered from 2 places.'>store_tuple_elements</a>(PicklerObject *self, PyObject *t, <b>int</b> len)
<a name='L1923'><font color='red'>{</font>
<a name='L1924'>    <b>int</b> i;
<a name='L1925'>
<a name='L1926'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(t) == len);
<a name='L1927'>
<a name='L1928'>    <b>for</b> (i = 0; i &lt; len; i++) <font color='red'>{</font>
<a name='L1929'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> = PyTuple_GET_ITEM(t, i);
<a name='L1930'>
<a name='L1931'>        <b>if</b> (<a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1932'>            <b>return</b> -1;
<a name='L1933'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a>, 0) &lt; 0)
<a name='L1934'>            <b>return</b> -1;
<a name='L1935'>    <font color='red'>}</font>
<a name='L1936'>
<a name='L1937'>    <b>return</b> 0;
<a name='L1938'><font color='red'>}</font>
<a name='L1939'>
<a name='L1940'><i><font color='green'>/* Tuples are ubiquitous in the pickle protocols, so many techniques are</font></i>
<a name='L1941'><i><font color='green'> * used across protocols to minimize the space needed to pickle them.</font></i>
<a name='L1942'><i><font color='green'> * Tuples are also the only builtin immutable type that can be recursive</font></i>
<a name='L1943'><i><font color='green'> * (a tuple can be reached from itself), and that requires some subtle</font></i>
<a name='L1944'><i><font color='green'> * magic so that it works in all cases.  IOW, this is a long routine.</font></i>
<a name='L1945'><i><font color='green'> */</font></i>
<a name='L1946'><b>static</b> <b>int</b>
<a name='L1947'><a href='../S/2588.html#L3121' title='Refered from 3121 in Modules/_pickle.c.'>save_tuple</a>(PicklerObject *self, PyObject *obj)
<a name='L1948'><font color='red'>{</font>
<a name='L1949'>    <b>int</b> len, i;
<a name='L1950'>
<a name='L1951'>    <b>const</b> <b>char</b> mark_op = <a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>;
<a name='L1952'>    <b>const</b> <b>char</b> tuple_op = <a href='../S/2588.html#L53' title='Defined at 53 in Modules/_pickle.c.'>TUPLE</a>;
<a name='L1953'>    <b>const</b> <b>char</b> pop_op = <a href='../D/2506.html' title='Multiple defined in 3 places.'>POP</a>;
<a name='L1954'>    <b>const</b> <b>char</b> pop_mark_op = <a href='../S/2588.html#L19' title='Defined at 19 in Modules/_pickle.c.'>POP_MARK</a>;
<a name='L1955'>    <b>const</b> <b>char</b> len2opcode[] = <font color='red'>{</font><a href='../S/2588.html#L54' title='Defined at 54 in Modules/_pickle.c.'>EMPTY_TUPLE</a>, <a href='../S/2588.html#L64' title='Defined at 64 in Modules/_pickle.c.'>TUPLE1</a>, <a href='../S/2588.html#L65' title='Defined at 65 in Modules/_pickle.c.'>TUPLE2</a>, <a href='../S/2588.html#L66' title='Defined at 66 in Modules/_pickle.c.'>TUPLE3</a><font color='red'>}</font>;
<a name='L1956'>
<a name='L1957'>    <b>if</b> ((len = <a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(obj)) &lt; 0)
<a name='L1958'>        <b>return</b> -1;
<a name='L1959'>
<a name='L1960'>    <b>if</b> (len == 0) <font color='red'>{</font>
<a name='L1961'>        <b>char</b> pdata[2];
<a name='L1962'>
<a name='L1963'>        <b>if</b> (self-&gt;proto) <font color='red'>{</font>
<a name='L1964'>            pdata[0] = <a href='../S/2588.html#L54' title='Defined at 54 in Modules/_pickle.c.'>EMPTY_TUPLE</a>;
<a name='L1965'>            len = 1;
<a name='L1966'>        <font color='red'>}</font>
<a name='L1967'>        <b>else</b> <font color='red'>{</font>
<a name='L1968'>            pdata[0] = <a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>;
<a name='L1969'>            pdata[1] = <a href='../S/2588.html#L53' title='Defined at 53 in Modules/_pickle.c.'>TUPLE</a>;
<a name='L1970'>            len = 2;
<a name='L1971'>        <font color='red'>}</font>
<a name='L1972'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pdata, len) &lt; 0)
<a name='L1973'>            <b>return</b> -1;
<a name='L1974'>        <b>return</b> 0;
<a name='L1975'>    <font color='red'>}</font>
<a name='L1976'>
<a name='L1977'>    <i><font color='green'>/* The tuple isn't in the memo now.  If it shows up there after</font></i>
<a name='L1978'><i><font color='green'>     * saving the tuple elements, the tuple must be recursive, in</font></i>
<a name='L1979'><i><font color='green'>     * which case we'll pop everything we put on the stack, and fetch</font></i>
<a name='L1980'><i><font color='green'>     * its value from the memo.</font></i>
<a name='L1981'><i><font color='green'>     */</font></i>
<a name='L1982'>    <b>if</b> (len &lt;= 3 &amp;&amp; self-&gt;proto &gt;= 2) <font color='red'>{</font>
<a name='L1983'>        <i><font color='green'>/* Use TUPLE{1,2,3} opcodes. */</font></i>
<a name='L1984'>        <b>if</b> (<a href='../S/2588.html#L1922' title='Defined at 1922 in Modules/_pickle.c.'>store_tuple_elements</a>(self, obj, len) &lt; 0)
<a name='L1985'>            <b>return</b> -1;
<a name='L1986'>
<a name='L1987'>        <b>if</b> (<a href='../S/2588.html#L560' title='Defined at 560 in Modules/_pickle.c.'>PyMemoTable_Get</a>(self-&gt;memo, obj)) <font color='red'>{</font>
<a name='L1988'>            <i><font color='green'>/* pop the len elements */</font></i>
<a name='L1989'>            <b>for</b> (i = 0; i &lt; len; i++)
<a name='L1990'>                <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;pop_op, 1) &lt; 0)
<a name='L1991'>                    <b>return</b> -1;
<a name='L1992'>            <i><font color='green'>/* fetch from memo */</font></i>
<a name='L1993'>            <b>if</b> (<a href='../S/2588.html#L1226' title='Defined at 1226 in Modules/_pickle.c.'>memo_get</a>(self, obj) &lt; 0)
<a name='L1994'>                <b>return</b> -1;
<a name='L1995'>
<a name='L1996'>            <b>return</b> 0;
<a name='L1997'>        <font color='red'>}</font>
<a name='L1998'>        <b>else</b> <font color='red'>{</font> <i><font color='green'>/* Not recursive. */</font></i>
<a name='L1999'>            <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, len2opcode + len, 1) &lt; 0)
<a name='L2000'>                <b>return</b> -1;
<a name='L2001'>        <font color='red'>}</font>
<a name='L2002'>        <b>goto</b> memoize;
<a name='L2003'>    <font color='red'>}</font>
<a name='L2004'>
<a name='L2005'>    <i><font color='green'>/* proto &lt; 2 and len &gt; 0, or proto &gt;= 2 and len &gt; 3.</font></i>
<a name='L2006'><i><font color='green'>     * Generate MARK e1 e2 ... TUPLE</font></i>
<a name='L2007'><i><font color='green'>     */</font></i>
<a name='L2008'>    <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;mark_op, 1) &lt; 0)
<a name='L2009'>        <b>return</b> -1;
<a name='L2010'>
<a name='L2011'>    <b>if</b> (<a href='../S/2588.html#L1922' title='Defined at 1922 in Modules/_pickle.c.'>store_tuple_elements</a>(self, obj, len) &lt; 0)
<a name='L2012'>        <b>return</b> -1;
<a name='L2013'>
<a name='L2014'>    <b>if</b> (<a href='../S/2588.html#L560' title='Defined at 560 in Modules/_pickle.c.'>PyMemoTable_Get</a>(self-&gt;memo, obj)) <font color='red'>{</font>
<a name='L2015'>        <i><font color='green'>/* pop the stack stuff we pushed */</font></i>
<a name='L2016'>        <b>if</b> (self-&gt;bin) <font color='red'>{</font>
<a name='L2017'>            <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;pop_mark_op, 1) &lt; 0)
<a name='L2018'>                <b>return</b> -1;
<a name='L2019'>        <font color='red'>}</font>
<a name='L2020'>        <b>else</b> <font color='red'>{</font>
<a name='L2021'>            <i><font color='green'>/* Note that we pop one more than len, to remove</font></i>
<a name='L2022'><i><font color='green'>             * the MARK too.</font></i>
<a name='L2023'><i><font color='green'>             */</font></i>
<a name='L2024'>            <b>for</b> (i = 0; i &lt;= len; i++)
<a name='L2025'>                <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;pop_op, 1) &lt; 0)
<a name='L2026'>                    <b>return</b> -1;
<a name='L2027'>        <font color='red'>}</font>
<a name='L2028'>        <i><font color='green'>/* fetch from memo */</font></i>
<a name='L2029'>        <b>if</b> (<a href='../S/2588.html#L1226' title='Defined at 1226 in Modules/_pickle.c.'>memo_get</a>(self, obj) &lt; 0)
<a name='L2030'>            <b>return</b> -1;
<a name='L2031'>
<a name='L2032'>        <b>return</b> 0;
<a name='L2033'>    <font color='red'>}</font>
<a name='L2034'>    <b>else</b> <font color='red'>{</font> <i><font color='green'>/* Not recursive. */</font></i>
<a name='L2035'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;tuple_op, 1) &lt; 0)
<a name='L2036'>            <b>return</b> -1;
<a name='L2037'>    <font color='red'>}</font>
<a name='L2038'>
<a name='L2039'>  memoize:
<a name='L2040'>    <b>if</b> (<a href='../S/2588.html#L1273' title='Defined at 1273 in Modules/_pickle.c.'>memo_put</a>(self, obj) &lt; 0)
<a name='L2041'>        <b>return</b> -1;
<a name='L2042'>
<a name='L2043'>    <b>return</b> 0;
<a name='L2044'><font color='red'>}</font>
<a name='L2045'>
<a name='L2046'><i><font color='green'>/* iter is an iterator giving items, and we batch up chunks of</font></i>
<a name='L2047'><i><font color='green'> *     MARK item item ... item APPENDS</font></i>
<a name='L2048'><i><font color='green'> * opcode sequences.  Calling code should have arranged to first create an</font></i>
<a name='L2049'><i><font color='green'> * empty list, or list-like object, for the APPENDS to operate on.</font></i>
<a name='L2050'><i><font color='green'> * Returns 0 on success, &lt;0 on error.</font></i>
<a name='L2051'><i><font color='green'> */</font></i>
<a name='L2052'><b>static</b> <b>int</b>
<a name='L2053'><a href='../R/6207.html' title='Multiple refered from 2 places.'>batch_list</a>(PicklerObject *self, PyObject *iter)
<a name='L2054'><font color='red'>{</font>
<a name='L2055'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2056'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *firstitem = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2057'>    <b>int</b> i, n;
<a name='L2058'>
<a name='L2059'>    <b>const</b> <b>char</b> mark_op = <a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>;
<a name='L2060'>    <b>const</b> <b>char</b> append_op = <a href='../D/71.html' title='Multiple defined in 3 places.'>APPEND</a>;
<a name='L2061'>    <b>const</b> <b>char</b> appends_op = <a href='../S/2588.html#L41' title='Defined at 41 in Modules/_pickle.c.'>APPENDS</a>;
<a name='L2062'>
<a name='L2063'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(iter != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2064'>
<a name='L2065'>    <i><font color='green'>/* XXX: I think this function could be made faster by avoiding the</font></i>
<a name='L2066'><i><font color='green'>       iterator interface and fetching objects directly from list using</font></i>
<a name='L2067'><i><font color='green'>       PyList_GET_ITEM.</font></i>
<a name='L2068'><i><font color='green'>    */</font></i>
<a name='L2069'>
<a name='L2070'>    <b>if</b> (self-&gt;proto == 0) <font color='red'>{</font>
<a name='L2071'>        <i><font color='green'>/* APPENDS isn't available; do one at a time. */</font></i>
<a name='L2072'>        <b>for</b> (;;) <font color='red'>{</font>
<a name='L2073'>            obj = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L2074'>            <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2075'>                <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2076'>                    <b>return</b> -1;
<a name='L2077'>                <b>break</b>;
<a name='L2078'>            <font color='red'>}</font>
<a name='L2079'>            i = <a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, obj, 0);
<a name='L2080'>            Py_DECREF(obj);
<a name='L2081'>            <b>if</b> (i &lt; 0)
<a name='L2082'>                <b>return</b> -1;
<a name='L2083'>            <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;append_op, 1) &lt; 0)
<a name='L2084'>                <b>return</b> -1;
<a name='L2085'>        <font color='red'>}</font>
<a name='L2086'>        <b>return</b> 0;
<a name='L2087'>    <font color='red'>}</font>
<a name='L2088'>
<a name='L2089'>    <i><font color='green'>/* proto &gt; 0:  write in batches of BATCHSIZE. */</font></i>
<a name='L2090'>    <b>do</b> <font color='red'>{</font>
<a name='L2091'>        <i><font color='green'>/* Get first item */</font></i>
<a name='L2092'>        firstitem = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L2093'>        <b>if</b> (firstitem == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2094'>            <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2095'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2096'>
<a name='L2097'>            <i><font color='green'>/* nothing more to add */</font></i>
<a name='L2098'>            <b>break</b>;
<a name='L2099'>        <font color='red'>}</font>
<a name='L2100'>
<a name='L2101'>        <i><font color='green'>/* Try to get a second item */</font></i>
<a name='L2102'>        obj = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L2103'>        <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2104'>            <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2105'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2106'>
<a name='L2107'>            <i><font color='green'>/* Only one item to write */</font></i>
<a name='L2108'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, firstitem, 0) &lt; 0)
<a name='L2109'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2110'>            <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;append_op, 1) &lt; 0)
<a name='L2111'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2112'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(firstitem);
<a name='L2113'>            <b>break</b>;
<a name='L2114'>        <font color='red'>}</font>
<a name='L2115'>
<a name='L2116'>        <i><font color='green'>/* More than one item to write */</font></i>
<a name='L2117'>
<a name='L2118'>        <i><font color='green'>/* Pump out MARK, items, APPENDS. */</font></i>
<a name='L2119'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;mark_op, 1) &lt; 0)
<a name='L2120'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2121'>
<a name='L2122'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, firstitem, 0) &lt; 0)
<a name='L2123'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2124'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(firstitem);
<a name='L2125'>        n = 1;
<a name='L2126'>
<a name='L2127'>        <i><font color='green'>/* Fetch and save up to BATCHSIZE items */</font></i>
<a name='L2128'>        <b>while</b> (obj) <font color='red'>{</font>
<a name='L2129'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, obj, 0) &lt; 0)
<a name='L2130'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2131'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(obj);
<a name='L2132'>            n += 1;
<a name='L2133'>
<a name='L2134'>            <b>if</b> (n == <a href='../S/2588.html#L92' title='Defined at 92 in Modules/_pickle.c.'>BATCHSIZE</a>)
<a name='L2135'>                <b>break</b>;
<a name='L2136'>
<a name='L2137'>            obj = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L2138'>            <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2139'>                <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2140'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2141'>                <b>break</b>;
<a name='L2142'>            <font color='red'>}</font>
<a name='L2143'>        <font color='red'>}</font>
<a name='L2144'>
<a name='L2145'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;appends_op, 1) &lt; 0)
<a name='L2146'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2147'>
<a name='L2148'>    <font color='red'>}</font> <b>while</b> (n == <a href='../S/2588.html#L92' title='Defined at 92 in Modules/_pickle.c.'>BATCHSIZE</a>);
<a name='L2149'>    <b>return</b> 0;
<a name='L2150'>
<a name='L2151'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L2152'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(firstitem);
<a name='L2153'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(obj);
<a name='L2154'>    <b>return</b> -1;
<a name='L2155'><font color='red'>}</font>
<a name='L2156'>
<a name='L2157'><i><font color='green'>/* This is a variant of batch_list() above, specialized for lists (with no</font></i>
<a name='L2158'><i><font color='green'> * support for list subclasses). Like batch_list(), we batch up chunks of</font></i>
<a name='L2159'><i><font color='green'> *     MARK item item ... item APPENDS</font></i>
<a name='L2160'><i><font color='green'> * opcode sequences.  Calling code should have arranged to first create an</font></i>
<a name='L2161'><i><font color='green'> * empty list, or list-like object, for the APPENDS to operate on.</font></i>
<a name='L2162'><i><font color='green'> * Returns 0 on success, -1 on error.</font></i>
<a name='L2163'><i><font color='green'> *</font></i>
<a name='L2164'><i><font color='green'> * This version is considerably faster than batch_list(), if less general.</font></i>
<a name='L2165'><i><font color='green'> *</font></i>
<a name='L2166'><i><font color='green'> * Note that this only works for protocols &gt; 0.</font></i>
<a name='L2167'><i><font color='green'> */</font></i>
<a name='L2168'><b>static</b> <b>int</b>
<a name='L2169'><a href='../S/2588.html#L2249' title='Refered from 2249 in Modules/_pickle.c.'>batch_list_exact</a>(PicklerObject *self, PyObject *obj)
<a name='L2170'><font color='red'>{</font>
<a name='L2171'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2172'>    <b>int</b> this_batch, total;
<a name='L2173'>
<a name='L2174'>    <b>const</b> <b>char</b> append_op = <a href='../D/71.html' title='Multiple defined in 3 places.'>APPEND</a>;
<a name='L2175'>    <b>const</b> <b>char</b> appends_op = <a href='../S/2588.html#L41' title='Defined at 41 in Modules/_pickle.c.'>APPENDS</a>;
<a name='L2176'>    <b>const</b> <b>char</b> mark_op = <a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>;
<a name='L2177'>
<a name='L2178'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(obj != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2179'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;proto &gt; 0);
<a name='L2180'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyList_CheckExact(obj));
<a name='L2181'>
<a name='L2182'>    <b>if</b> (<a href='../S/534.html#L71' title='Defined at 71 in Include/listobject.h.'>PyList_GET_SIZE</a>(obj) == 1) <font color='red'>{</font>
<a name='L2183'>        item = PyList_GET_ITEM(obj, 0);
<a name='L2184'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, item, 0) &lt; 0)
<a name='L2185'>            <b>return</b> -1;
<a name='L2186'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;append_op, 1) &lt; 0)
<a name='L2187'>            <b>return</b> -1;
<a name='L2188'>        <b>return</b> 0;
<a name='L2189'>    <font color='red'>}</font>
<a name='L2190'>
<a name='L2191'>    <i><font color='green'>/* Write in batches of BATCHSIZE. */</font></i>
<a name='L2192'>    total = 0;
<a name='L2193'>    <b>do</b> <font color='red'>{</font>
<a name='L2194'>        this_batch = 0;
<a name='L2195'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;mark_op, 1) &lt; 0)
<a name='L2196'>            <b>return</b> -1;
<a name='L2197'>        <b>while</b> (total &lt; <a href='../S/534.html#L71' title='Defined at 71 in Include/listobject.h.'>PyList_GET_SIZE</a>(obj)) <font color='red'>{</font>
<a name='L2198'>            item = PyList_GET_ITEM(obj, total);
<a name='L2199'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, item, 0) &lt; 0)
<a name='L2200'>                <b>return</b> -1;
<a name='L2201'>            total++;
<a name='L2202'>            <b>if</b> (++this_batch == <a href='../S/2588.html#L92' title='Defined at 92 in Modules/_pickle.c.'>BATCHSIZE</a>)
<a name='L2203'>                <b>break</b>;
<a name='L2204'>        <font color='red'>}</font>
<a name='L2205'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;appends_op, 1) &lt; 0)
<a name='L2206'>            <b>return</b> -1;
<a name='L2207'>
<a name='L2208'>    <font color='red'>}</font> <b>while</b> (total &lt; <a href='../S/534.html#L71' title='Defined at 71 in Include/listobject.h.'>PyList_GET_SIZE</a>(obj));
<a name='L2209'>
<a name='L2210'>    <b>return</b> 0;
<a name='L2211'><font color='red'>}</font>
<a name='L2212'>
<a name='L2213'><b>static</b> <b>int</b>
<a name='L2214'><a href='../S/2588.html#L3117' title='Refered from 3117 in Modules/_pickle.c.'>save_list</a>(PicklerObject *self, PyObject *obj)
<a name='L2215'><font color='red'>{</font>
<a name='L2216'>    <b>char</b> header[3];
<a name='L2217'>    <b>int</b> len;
<a name='L2218'>    <b>int</b> status = 0;
<a name='L2219'>
<a name='L2220'>    <b>if</b> (self-&gt;fast &amp;&amp; !<a href='../S/2588.html#L1409' title='Defined at 1409 in Modules/_pickle.c.'>fast_save_enter</a>(self, obj))
<a name='L2221'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2222'>
<a name='L2223'>    <i><font color='green'>/* Create an empty list. */</font></i>
<a name='L2224'>    <b>if</b> (self-&gt;bin) <font color='red'>{</font>
<a name='L2225'>        header[0] = <a href='../S/2588.html#L47' title='Defined at 47 in Modules/_pickle.c.'>EMPTY_LIST</a>;
<a name='L2226'>        len = 1;
<a name='L2227'>    <font color='red'>}</font>
<a name='L2228'>    <b>else</b> <font color='red'>{</font>
<a name='L2229'>        header[0] = <a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>;
<a name='L2230'>        header[1] = <a href='../S/2588.html#L46' title='Defined at 46 in Modules/_pickle.c.'>LIST</a>;
<a name='L2231'>        len = 2;
<a name='L2232'>    <font color='red'>}</font>
<a name='L2233'>
<a name='L2234'>    <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, header, len) &lt; 0)
<a name='L2235'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2236'>
<a name='L2237'>    <i><font color='green'>/* Get list length, and bow out early if empty. */</font></i>
<a name='L2238'>    <b>if</b> ((len = <a href='../S/2796.html#L166' title='Defined at 166 in Objects/listobject.c.'>PyList_Size</a>(obj)) &lt; 0)
<a name='L2239'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2240'>
<a name='L2241'>    <b>if</b> (<a href='../S/2588.html#L1273' title='Defined at 1273 in Modules/_pickle.c.'>memo_put</a>(self, obj) &lt; 0)
<a name='L2242'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2243'>
<a name='L2244'>    <b>if</b> (len != 0) <font color='red'>{</font>
<a name='L2245'>        <i><font color='green'>/* Materialize the list elements. */</font></i>
<a name='L2246'>        <b>if</b> (PyList_CheckExact(obj) &amp;&amp; self-&gt;proto &gt; 0) <font color='red'>{</font>
<a name='L2247'>            <b>if</b> (Py_EnterRecursiveCall(" while pickling an object"))
<a name='L2248'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2249'>            status = <a href='../S/2588.html#L2169' title='Defined at 2169 in Modules/_pickle.c.'>batch_list_exact</a>(self, obj);
<a name='L2250'>            Py_LeaveRecursiveCall();
<a name='L2251'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L2252'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *iter = <a href='../S/2775.html#L2668' title='Defined at 2668 in Objects/abstract.c.'>PyObject_GetIter</a>(obj);
<a name='L2253'>            <b>if</b> (iter == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2254'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2255'>
<a name='L2256'>            <b>if</b> (Py_EnterRecursiveCall(" while pickling an object")) <font color='red'>{</font>
<a name='L2257'>                Py_DECREF(iter);
<a name='L2258'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2259'>            <font color='red'>}</font>
<a name='L2260'>            status = <a href='../S/2588.html#L2053' title='Defined at 2053 in Modules/_pickle.c.'>batch_list</a>(self, iter);
<a name='L2261'>            Py_LeaveRecursiveCall();
<a name='L2262'>            Py_DECREF(iter);
<a name='L2263'>        <font color='red'>}</font>
<a name='L2264'>    <font color='red'>}</font>
<a name='L2265'>    <b>if</b> (0) <font color='red'>{</font>
<a name='L2266'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L2267'>        status = -1;
<a name='L2268'>    <font color='red'>}</font>
<a name='L2269'>
<a name='L2270'>    <b>if</b> (self-&gt;fast &amp;&amp; !<a href='../S/2588.html#L1444' title='Defined at 1444 in Modules/_pickle.c.'>fast_save_leave</a>(self, obj))
<a name='L2271'>        status = -1;
<a name='L2272'>
<a name='L2273'>    <b>return</b> status;
<a name='L2274'><font color='red'>}</font>
<a name='L2275'>
<a name='L2276'><i><font color='green'>/* iter is an iterator giving (key, value) pairs, and we batch up chunks of</font></i>
<a name='L2277'><i><font color='green'> *     MARK key value ... key value SETITEMS</font></i>
<a name='L2278'><i><font color='green'> * opcode sequences.  Calling code should have arranged to first create an</font></i>
<a name='L2279'><i><font color='green'> * empty dict, or dict-like object, for the SETITEMS to operate on.</font></i>
<a name='L2280'><i><font color='green'> * Returns 0 on success, &lt;0 on error.</font></i>
<a name='L2281'><i><font color='green'> *</font></i>
<a name='L2282'><i><font color='green'> * This is very much like batch_list().  The difference between saving</font></i>
<a name='L2283'><i><font color='green'> * elements directly, and picking apart two-tuples, is so long-winded at</font></i>
<a name='L2284'><i><font color='green'> * the C level, though, that attempts to combine these routines were too</font></i>
<a name='L2285'><i><font color='green'> * ugly to bear.</font></i>
<a name='L2286'><i><font color='green'> */</font></i>
<a name='L2287'><b>static</b> <b>int</b>
<a name='L2288'><a href='../R/6205.html' title='Multiple refered from 2 places.'>batch_dict</a>(PicklerObject *self, PyObject *iter)
<a name='L2289'><font color='red'>{</font>
<a name='L2290'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2291'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *firstitem = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2292'>    <b>int</b> i, n;
<a name='L2293'>
<a name='L2294'>    <b>const</b> <b>char</b> mark_op = <a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>;
<a name='L2295'>    <b>const</b> <b>char</b> setitem_op = <a href='../S/2588.html#L52' title='Defined at 52 in Modules/_pickle.c.'>SETITEM</a>;
<a name='L2296'>    <b>const</b> <b>char</b> setitems_op = <a href='../S/2588.html#L55' title='Defined at 55 in Modules/_pickle.c.'>SETITEMS</a>;
<a name='L2297'>
<a name='L2298'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(iter != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2299'>
<a name='L2300'>    <b>if</b> (self-&gt;proto == 0) <font color='red'>{</font>
<a name='L2301'>        <i><font color='green'>/* SETITEMS isn't available; do one at a time. */</font></i>
<a name='L2302'>        <b>for</b> (;;) <font color='red'>{</font>
<a name='L2303'>            obj = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L2304'>            <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2305'>                <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2306'>                    <b>return</b> -1;
<a name='L2307'>                <b>break</b>;
<a name='L2308'>            <font color='red'>}</font>
<a name='L2309'>            <b>if</b> (!PyTuple_Check(obj) || <a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(obj) != 2) <font color='red'>{</font>
<a name='L2310'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "dict items "
<a name='L2311'>                                "iterator must return 2-tuples");
<a name='L2312'>                <b>return</b> -1;
<a name='L2313'>            <font color='red'>}</font>
<a name='L2314'>            i = <a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, PyTuple_GET_ITEM(obj, 0), 0);
<a name='L2315'>            <b>if</b> (i &gt;= 0)
<a name='L2316'>                i = <a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, PyTuple_GET_ITEM(obj, 1), 0);
<a name='L2317'>            Py_DECREF(obj);
<a name='L2318'>            <b>if</b> (i &lt; 0)
<a name='L2319'>                <b>return</b> -1;
<a name='L2320'>            <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;setitem_op, 1) &lt; 0)
<a name='L2321'>                <b>return</b> -1;
<a name='L2322'>        <font color='red'>}</font>
<a name='L2323'>        <b>return</b> 0;
<a name='L2324'>    <font color='red'>}</font>
<a name='L2325'>
<a name='L2326'>    <i><font color='green'>/* proto &gt; 0:  write in batches of BATCHSIZE. */</font></i>
<a name='L2327'>    <b>do</b> <font color='red'>{</font>
<a name='L2328'>        <i><font color='green'>/* Get first item */</font></i>
<a name='L2329'>        firstitem = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L2330'>        <b>if</b> (firstitem == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2331'>            <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2332'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2333'>
<a name='L2334'>            <i><font color='green'>/* nothing more to add */</font></i>
<a name='L2335'>            <b>break</b>;
<a name='L2336'>        <font color='red'>}</font>
<a name='L2337'>        <b>if</b> (!PyTuple_Check(firstitem) || <a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(firstitem) != 2) <font color='red'>{</font>
<a name='L2338'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "dict items "
<a name='L2339'>                                "iterator must return 2-tuples");
<a name='L2340'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2341'>        <font color='red'>}</font>
<a name='L2342'>
<a name='L2343'>        <i><font color='green'>/* Try to get a second item */</font></i>
<a name='L2344'>        obj = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L2345'>        <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2346'>            <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2347'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2348'>
<a name='L2349'>            <i><font color='green'>/* Only one item to write */</font></i>
<a name='L2350'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, PyTuple_GET_ITEM(firstitem, 0), 0) &lt; 0)
<a name='L2351'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2352'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, PyTuple_GET_ITEM(firstitem, 1), 0) &lt; 0)
<a name='L2353'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2354'>            <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;setitem_op, 1) &lt; 0)
<a name='L2355'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2356'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(firstitem);
<a name='L2357'>            <b>break</b>;
<a name='L2358'>        <font color='red'>}</font>
<a name='L2359'>
<a name='L2360'>        <i><font color='green'>/* More than one item to write */</font></i>
<a name='L2361'>
<a name='L2362'>        <i><font color='green'>/* Pump out MARK, items, SETITEMS. */</font></i>
<a name='L2363'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;mark_op, 1) &lt; 0)
<a name='L2364'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2365'>
<a name='L2366'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, PyTuple_GET_ITEM(firstitem, 0), 0) &lt; 0)
<a name='L2367'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2368'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, PyTuple_GET_ITEM(firstitem, 1), 0) &lt; 0)
<a name='L2369'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2370'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(firstitem);
<a name='L2371'>        n = 1;
<a name='L2372'>
<a name='L2373'>        <i><font color='green'>/* Fetch and save up to BATCHSIZE items */</font></i>
<a name='L2374'>        <b>while</b> (obj) <font color='red'>{</font>
<a name='L2375'>            <b>if</b> (!PyTuple_Check(obj) || <a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(obj) != 2) <font color='red'>{</font>
<a name='L2376'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "dict items "
<a name='L2377'>                    "iterator must return 2-tuples");
<a name='L2378'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2379'>            <font color='red'>}</font>
<a name='L2380'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, PyTuple_GET_ITEM(obj, 0), 0) &lt; 0 ||
<a name='L2381'>                <a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, PyTuple_GET_ITEM(obj, 1), 0) &lt; 0)
<a name='L2382'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2383'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(obj);
<a name='L2384'>            n += 1;
<a name='L2385'>
<a name='L2386'>            <b>if</b> (n == <a href='../S/2588.html#L92' title='Defined at 92 in Modules/_pickle.c.'>BATCHSIZE</a>)
<a name='L2387'>                <b>break</b>;
<a name='L2388'>
<a name='L2389'>            obj = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L2390'>            <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2391'>                <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L2392'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2393'>                <b>break</b>;
<a name='L2394'>            <font color='red'>}</font>
<a name='L2395'>        <font color='red'>}</font>
<a name='L2396'>
<a name='L2397'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;setitems_op, 1) &lt; 0)
<a name='L2398'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2399'>
<a name='L2400'>    <font color='red'>}</font> <b>while</b> (n == <a href='../S/2588.html#L92' title='Defined at 92 in Modules/_pickle.c.'>BATCHSIZE</a>);
<a name='L2401'>    <b>return</b> 0;
<a name='L2402'>
<a name='L2403'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L2404'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(firstitem);
<a name='L2405'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(obj);
<a name='L2406'>    <b>return</b> -1;
<a name='L2407'><font color='red'>}</font>
<a name='L2408'>
<a name='L2409'><i><font color='green'>/* This is a variant of batch_dict() above that specializes for dicts, with no</font></i>
<a name='L2410'><i><font color='green'> * support for dict subclasses. Like batch_dict(), we batch up chunks of</font></i>
<a name='L2411'><i><font color='green'> *     MARK key value ... key value SETITEMS</font></i>
<a name='L2412'><i><font color='green'> * opcode sequences.  Calling code should have arranged to first create an</font></i>
<a name='L2413'><i><font color='green'> * empty dict, or dict-like object, for the SETITEMS to operate on.</font></i>
<a name='L2414'><i><font color='green'> * Returns 0 on success, -1 on error.</font></i>
<a name='L2415'><i><font color='green'> *</font></i>
<a name='L2416'><i><font color='green'> * Note that this currently doesn't work for protocol 0.</font></i>
<a name='L2417'><i><font color='green'> */</font></i>
<a name='L2418'><b>static</b> <b>int</b>
<a name='L2419'><a href='../S/2588.html#L2511' title='Refered from 2511 in Modules/_pickle.c.'>batch_dict_exact</a>(PicklerObject *self, PyObject *obj)
<a name='L2420'><font color='red'>{</font>
<a name='L2421'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2422'>    <b>int</b> i;
<a name='L2423'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> dict_size, ppos = 0;
<a name='L2424'>
<a name='L2425'>    <b>const</b> <b>char</b> mark_op = <a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>;
<a name='L2426'>    <b>const</b> <b>char</b> setitem_op = <a href='../S/2588.html#L52' title='Defined at 52 in Modules/_pickle.c.'>SETITEM</a>;
<a name='L2427'>    <b>const</b> <b>char</b> setitems_op = <a href='../S/2588.html#L55' title='Defined at 55 in Modules/_pickle.c.'>SETITEMS</a>;
<a name='L2428'>
<a name='L2429'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(obj != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2430'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;proto &gt; 0);
<a name='L2431'>
<a name='L2432'>    dict_size = <a href='../S/2787.html#L1620' title='Defined at 1620 in Objects/dictobject.c.'>PyDict_Size</a>(obj);
<a name='L2433'>
<a name='L2434'>    <i><font color='green'>/* Special-case len(d) == 1 to save space. */</font></i>
<a name='L2435'>    <b>if</b> (dict_size == 1) <font color='red'>{</font>
<a name='L2436'>        <a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(obj, &amp;ppos, &amp;<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, &amp;<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L2437'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, 0) &lt; 0)
<a name='L2438'>            <b>return</b> -1;
<a name='L2439'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, 0) &lt; 0)
<a name='L2440'>            <b>return</b> -1;
<a name='L2441'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;setitem_op, 1) &lt; 0)
<a name='L2442'>            <b>return</b> -1;
<a name='L2443'>        <b>return</b> 0;
<a name='L2444'>    <font color='red'>}</font>
<a name='L2445'>
<a name='L2446'>    <i><font color='green'>/* Write in batches of BATCHSIZE. */</font></i>
<a name='L2447'>    <b>do</b> <font color='red'>{</font>
<a name='L2448'>        i = 0;
<a name='L2449'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;mark_op, 1) &lt; 0)
<a name='L2450'>            <b>return</b> -1;
<a name='L2451'>        <b>while</b> (<a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(obj, &amp;ppos, &amp;<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, &amp;<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) <font color='red'>{</font>
<a name='L2452'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, 0) &lt; 0)
<a name='L2453'>                <b>return</b> -1;
<a name='L2454'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, 0) &lt; 0)
<a name='L2455'>                <b>return</b> -1;
<a name='L2456'>            <b>if</b> (++i == <a href='../S/2588.html#L92' title='Defined at 92 in Modules/_pickle.c.'>BATCHSIZE</a>)
<a name='L2457'>                <b>break</b>;
<a name='L2458'>        <font color='red'>}</font>
<a name='L2459'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;setitems_op, 1) &lt; 0)
<a name='L2460'>            <b>return</b> -1;
<a name='L2461'>        <b>if</b> (<a href='../S/2787.html#L1620' title='Defined at 1620 in Objects/dictobject.c.'>PyDict_Size</a>(obj) != dict_size) <font color='red'>{</font>
<a name='L2462'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L2463'>                PyExc_RuntimeError,
<a name='L2464'>                "dictionary changed size during iteration");
<a name='L2465'>            <b>return</b> -1;
<a name='L2466'>        <font color='red'>}</font>
<a name='L2467'>
<a name='L2468'>    <font color='red'>}</font> <b>while</b> (i == <a href='../S/2588.html#L92' title='Defined at 92 in Modules/_pickle.c.'>BATCHSIZE</a>);
<a name='L2469'>    <b>return</b> 0;
<a name='L2470'><font color='red'>}</font>
<a name='L2471'>
<a name='L2472'><b>static</b> <b>int</b>
<a name='L2473'><a href='../S/2588.html#L3113' title='Refered from 3113 in Modules/_pickle.c.'>save_dict</a>(PicklerObject *self, PyObject *obj)
<a name='L2474'><font color='red'>{</font>
<a name='L2475'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *items, *iter;
<a name='L2476'>    <b>char</b> header[3];
<a name='L2477'>    <b>int</b> len;
<a name='L2478'>    <b>int</b> status = 0;
<a name='L2479'>
<a name='L2480'>    <b>if</b> (self-&gt;fast &amp;&amp; !<a href='../S/2588.html#L1409' title='Defined at 1409 in Modules/_pickle.c.'>fast_save_enter</a>(self, obj))
<a name='L2481'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2482'>
<a name='L2483'>    <i><font color='green'>/* Create an empty dict. */</font></i>
<a name='L2484'>    <b>if</b> (self-&gt;bin) <font color='red'>{</font>
<a name='L2485'>        header[0] = <a href='../S/2588.html#L40' title='Defined at 40 in Modules/_pickle.c.'>EMPTY_DICT</a>;
<a name='L2486'>        len = 1;
<a name='L2487'>    <font color='red'>}</font>
<a name='L2488'>    <b>else</b> <font color='red'>{</font>
<a name='L2489'>        header[0] = <a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>;
<a name='L2490'>        header[1] = <a href='../D/783.html' title='Multiple defined in 2 places.'>DICT</a>;
<a name='L2491'>        len = 2;
<a name='L2492'>    <font color='red'>}</font>
<a name='L2493'>
<a name='L2494'>    <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, header, len) &lt; 0)
<a name='L2495'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2496'>
<a name='L2497'>    <i><font color='green'>/* Get dict size, and bow out early if empty. */</font></i>
<a name='L2498'>    <b>if</b> ((len = <a href='../S/2787.html#L1620' title='Defined at 1620 in Objects/dictobject.c.'>PyDict_Size</a>(obj)) &lt; 0)
<a name='L2499'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2500'>
<a name='L2501'>    <b>if</b> (<a href='../S/2588.html#L1273' title='Defined at 1273 in Modules/_pickle.c.'>memo_put</a>(self, obj) &lt; 0)
<a name='L2502'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2503'>
<a name='L2504'>    <b>if</b> (len != 0) <font color='red'>{</font>
<a name='L2505'>        <i><font color='green'>/* Save the dict items. */</font></i>
<a name='L2506'>        <b>if</b> (<a href='../D/3104.html' title='Multiple defined in 2 places.'>PyDict_CheckExact</a>(obj) &amp;&amp; self-&gt;proto &gt; 0) <font color='red'>{</font>
<a name='L2507'>            <i><font color='green'>/* We can take certain shortcuts if we know this is a dict and</font></i>
<a name='L2508'><i><font color='green'>               not a dict subclass. */</font></i>
<a name='L2509'>            <b>if</b> (Py_EnterRecursiveCall(" while pickling an object"))
<a name='L2510'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2511'>            status = <a href='../S/2588.html#L2419' title='Defined at 2419 in Modules/_pickle.c.'>batch_dict_exact</a>(self, obj);
<a name='L2512'>            Py_LeaveRecursiveCall();
<a name='L2513'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L2514'>            items = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(obj, "items", "()");
<a name='L2515'>            <b>if</b> (items == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2516'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2517'>            iter = <a href='../S/2775.html#L2668' title='Defined at 2668 in Objects/abstract.c.'>PyObject_GetIter</a>(items);
<a name='L2518'>            Py_DECREF(items);
<a name='L2519'>            <b>if</b> (iter == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2520'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2521'>            <b>if</b> (Py_EnterRecursiveCall(" while pickling an object")) <font color='red'>{</font>
<a name='L2522'>                Py_DECREF(iter);
<a name='L2523'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2524'>            <font color='red'>}</font>
<a name='L2525'>            status = <a href='../S/2588.html#L2288' title='Defined at 2288 in Modules/_pickle.c.'>batch_dict</a>(self, iter);
<a name='L2526'>            Py_LeaveRecursiveCall();
<a name='L2527'>            Py_DECREF(iter);
<a name='L2528'>        <font color='red'>}</font>
<a name='L2529'>    <font color='red'>}</font>
<a name='L2530'>
<a name='L2531'>    <b>if</b> (0) <font color='red'>{</font>
<a name='L2532'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L2533'>        status = -1;
<a name='L2534'>    <font color='red'>}</font>
<a name='L2535'>
<a name='L2536'>    <b>if</b> (self-&gt;fast &amp;&amp; !<a href='../S/2588.html#L1444' title='Defined at 1444 in Modules/_pickle.c.'>fast_save_leave</a>(self, obj))
<a name='L2537'>        status = -1;
<a name='L2538'>
<a name='L2539'>    <b>return</b> status;
<a name='L2540'><font color='red'>}</font>
<a name='L2541'>
<a name='L2542'><b>static</b> <b>int</b>
<a name='L2543'><a href='../R/10109.html' title='Multiple refered from 5 places.'>save_global</a>(PicklerObject *self, PyObject *obj, PyObject *name)
<a name='L2544'><font color='red'>{</font>
<a name='L2545'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *name_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2546'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *global_name = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2547'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_name = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2548'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2549'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cls;
<a name='L2550'>    <b>int</b> status = 0;
<a name='L2551'>
<a name='L2552'>    <b>const</b> <b>char</b> global_op = <a href='../S/2588.html#L38' title='Defined at 38 in Modules/_pickle.c.'>GLOBAL</a>;
<a name='L2553'>
<a name='L2554'>    <b>if</b> (name_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2555'>        name_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("__name__");
<a name='L2556'>        <b>if</b> (name_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2557'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2558'>    <font color='red'>}</font>
<a name='L2559'>
<a name='L2560'>    <b>if</b> (name) <font color='red'>{</font>
<a name='L2561'>        global_name = name;
<a name='L2562'>        Py_INCREF(global_name);
<a name='L2563'>    <font color='red'>}</font>
<a name='L2564'>    <b>else</b> <font color='red'>{</font>
<a name='L2565'>        global_name = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(obj, name_str);
<a name='L2566'>        <b>if</b> (global_name == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2567'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2568'>    <font color='red'>}</font>
<a name='L2569'>
<a name='L2570'>    module_name = <a href='../S/2588.html#L1325' title='Defined at 1325 in Modules/_pickle.c.'>whichmodule</a>(obj, global_name);
<a name='L2571'>    <b>if</b> (module_name == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2572'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2573'>
<a name='L2574'>    <i><font color='green'>/* XXX: Change to use the import C API directly with level=0 to disallow</font></i>
<a name='L2575'><i><font color='green'>       relative imports.</font></i>
<a name='L2576'><i><font color='green'></font></i>
<a name='L2577'><i><font color='green'>       XXX: PyImport_ImportModuleLevel could be used. However, this bypasses</font></i>
<a name='L2578'><i><font color='green'>       builtins.__import__. Therefore, _pickle, unlike pickle.py, will ignore</font></i>
<a name='L2579'><i><font color='green'>       custom import functions (IMHO, this would be a nice security</font></i>
<a name='L2580'><i><font color='green'>       feature). The import C API would need to be extended to support the</font></i>
<a name='L2581'><i><font color='green'>       extra parameters of __import__ to fix that. */</font></i>
<a name='L2582'>    module = <a href='../S/3120.html#L3017' title='Defined at 3017 in Python/import.c.'>PyImport_Import</a>(module_name);
<a name='L2583'>    <b>if</b> (module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2584'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError,
<a name='L2585'>                     "Can't pickle %R: import of module %R failed",
<a name='L2586'>                     obj, module_name);
<a name='L2587'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2588'>    <font color='red'>}</font>
<a name='L2589'>    cls = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(module, global_name);
<a name='L2590'>    <b>if</b> (cls == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2591'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError,
<a name='L2592'>                     "Can't pickle %R: attribute lookup %S.%S failed",
<a name='L2593'>                     obj, module_name, global_name);
<a name='L2594'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2595'>    <font color='red'>}</font>
<a name='L2596'>    <b>if</b> (cls != obj) <font color='red'>{</font>
<a name='L2597'>        Py_DECREF(cls);
<a name='L2598'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError,
<a name='L2599'>                     "Can't pickle %R: it's not the same object as %S.%S",
<a name='L2600'>                     obj, module_name, global_name);
<a name='L2601'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2602'>    <font color='red'>}</font>
<a name='L2603'>    Py_DECREF(cls);
<a name='L2604'>
<a name='L2605'>    <b>if</b> (self-&gt;proto &gt;= 2) <font color='red'>{</font>
<a name='L2606'>        <i><font color='green'>/* See whether this is in the extension registry, and if</font></i>
<a name='L2607'><i><font color='green'>         * so generate an EXT opcode.</font></i>
<a name='L2608'><i><font color='green'>         */</font></i>
<a name='L2609'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *code_obj;      <i><font color='green'>/* extension code as Python object */</font></i>
<a name='L2610'>        <b>long</b> <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>;               <i><font color='green'>/* extension code as C value */</font></i>
<a name='L2611'>        <b>char</b> pdata[5];
<a name='L2612'>        <b>int</b> n;
<a name='L2613'>
<a name='L2614'>        PyTuple_SET_ITEM(two_tuple, 0, module_name);
<a name='L2615'>        PyTuple_SET_ITEM(two_tuple, 1, global_name);
<a name='L2616'>        code_obj = <a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(extension_registry, two_tuple);
<a name='L2617'>        <i><font color='green'>/* The object is not registered in the extension registry.</font></i>
<a name='L2618'><i><font color='green'>           This is the most likely code path. */</font></i>
<a name='L2619'>        <b>if</b> (code_obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2620'>            <b>goto</b> gen_global;
<a name='L2621'>
<a name='L2622'>        <i><font color='green'>/* XXX: pickle.py doesn't check neither the type, nor the range</font></i>
<a name='L2623'><i><font color='green'>           of the value returned by the extension_registry. It should for</font></i>
<a name='L2624'><i><font color='green'>           consistency. */</font></i>
<a name='L2625'>
<a name='L2626'>        <i><font color='green'>/* Verify code_obj has the right type and value. */</font></i>
<a name='L2627'>        <b>if</b> (!PyLong_Check(code_obj)) <font color='red'>{</font>
<a name='L2628'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError,
<a name='L2629'>                         "Can't pickle %R: extension code %R isn't an integer",
<a name='L2630'>                         obj, code_obj);
<a name='L2631'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2632'>        <font color='red'>}</font>
<a name='L2633'>        <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> = PyLong_AS_LONG(code_obj);
<a name='L2634'>        <b>if</b> (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &lt;= 0 || <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &gt; 0x7fffffffL) <font color='red'>{</font>
<a name='L2635'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError,
<a name='L2636'>                         "Can't pickle %R: extension code %ld is out of range",
<a name='L2637'>                         obj, <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>);
<a name='L2638'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2639'>        <font color='red'>}</font>
<a name='L2640'>
<a name='L2641'>        <i><font color='green'>/* Generate an EXT opcode. */</font></i>
<a name='L2642'>        <b>if</b> (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &lt;= 0xff) <font color='red'>{</font>
<a name='L2643'>            pdata[0] = <a href='../S/2588.html#L61' title='Defined at 61 in Modules/_pickle.c.'>EXT1</a>;
<a name='L2644'>            pdata[1] = (<b>unsigned</b> <b>char</b>)<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>;
<a name='L2645'>            n = 2;
<a name='L2646'>        <font color='red'>}</font>
<a name='L2647'>        <b>else</b> <b>if</b> (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &lt;= 0xffff) <font color='red'>{</font>
<a name='L2648'>            pdata[0] = <a href='../S/2588.html#L62' title='Defined at 62 in Modules/_pickle.c.'>EXT2</a>;
<a name='L2649'>            pdata[1] = (<b>unsigned</b> <b>char</b>)(<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &amp; 0xff);
<a name='L2650'>            pdata[2] = (<b>unsigned</b> <b>char</b>)((<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &gt;&gt; 8) &amp; 0xff);
<a name='L2651'>            n = 3;
<a name='L2652'>        <font color='red'>}</font>
<a name='L2653'>        <b>else</b> <font color='red'>{</font>
<a name='L2654'>            pdata[0] = <a href='../S/2588.html#L63' title='Defined at 63 in Modules/_pickle.c.'>EXT4</a>;
<a name='L2655'>            pdata[1] = (<b>unsigned</b> <b>char</b>)(<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &amp; 0xff);
<a name='L2656'>            pdata[2] = (<b>unsigned</b> <b>char</b>)((<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &gt;&gt; 8) &amp; 0xff);
<a name='L2657'>            pdata[3] = (<b>unsigned</b> <b>char</b>)((<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &gt;&gt; 16) &amp; 0xff);
<a name='L2658'>            pdata[4] = (<b>unsigned</b> <b>char</b>)((<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &gt;&gt; 24) &amp; 0xff);
<a name='L2659'>            n = 5;
<a name='L2660'>        <font color='red'>}</font>
<a name='L2661'>
<a name='L2662'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pdata, n) &lt; 0)
<a name='L2663'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2664'>    <font color='red'>}</font>
<a name='L2665'>    <b>else</b> <font color='red'>{</font>
<a name='L2666'>        <i><font color='green'>/* Generate a normal global opcode if we are using a pickle</font></i>
<a name='L2667'><i><font color='green'>           protocol &lt;= 2, or if the object is not registered in the</font></i>
<a name='L2668'><i><font color='green'>           extension registry. */</font></i>
<a name='L2669'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *encoded;
<a name='L2670'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*unicode_encoder)(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L2671'>
<a name='L2672'>  gen_global:
<a name='L2673'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;global_op, 1) &lt; 0)
<a name='L2674'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2675'>
<a name='L2676'>        <i><font color='green'>/* Since Python 3.0 now supports non-ASCII identifiers, we encode both</font></i>
<a name='L2677'><i><font color='green'>           the module name and the global name using UTF-8. We do so only when</font></i>
<a name='L2678'><i><font color='green'>           we are using the pickle protocol newer than version 3. This is to</font></i>
<a name='L2679'><i><font color='green'>           ensure compatibility with older Unpickler running on Python 2.x. */</font></i>
<a name='L2680'>        <b>if</b> (self-&gt;proto &gt;= 3) <font color='red'>{</font>
<a name='L2681'>            unicode_encoder = <a href='../D/3959.html' title='Multiple defined in 3 places.'>PyUnicode_AsUTF8String</a>;
<a name='L2682'>        <font color='red'>}</font>
<a name='L2683'>        <b>else</b> <font color='red'>{</font>
<a name='L2684'>            unicode_encoder = <a href='../D/3947.html' title='Multiple defined in 3 places.'>PyUnicode_AsASCIIString</a>;
<a name='L2685'>        <font color='red'>}</font>
<a name='L2686'>
<a name='L2687'>        <i><font color='green'>/* For protocol &lt; 3 and if the user didn't request against doing so,</font></i>
<a name='L2688'><i><font color='green'>           we convert module names to the old 2.x module names. */</font></i>
<a name='L2689'>        <b>if</b> (self-&gt;fix_imports) <font color='red'>{</font>
<a name='L2690'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>;
<a name='L2691'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item;
<a name='L2692'>
<a name='L2693'>            <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(2, module_name, global_name);
<a name='L2694'>            <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2695'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2696'>            item = <a href='../S/2787.html#L754' title='Defined at 754 in Objects/dictobject.c.'>PyDict_GetItemWithError</a>(name_mapping_3to2, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L2697'>            Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L2698'>            <b>if</b> (item) <font color='red'>{</font>
<a name='L2699'>                <b>if</b> (!PyTuple_Check(item) || PyTuple_GET_SIZE(item) != 2) <font color='red'>{</font>
<a name='L2700'>                    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L2701'>                                 "_compat_pickle.REVERSE_NAME_MAPPING values "
<a name='L2702'>                                 "should be 2-tuples, not %.200s",
<a name='L2703'>                                 <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(item)-&gt;tp_name);
<a name='L2704'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2705'>                <font color='red'>}</font>
<a name='L2706'>                <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(module_name);
<a name='L2707'>                <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(global_name);
<a name='L2708'>                module_name = PyTuple_GET_ITEM(item, 0);
<a name='L2709'>                global_name = PyTuple_GET_ITEM(item, 1);
<a name='L2710'>                <b>if</b> (!PyUnicode_Check(module_name) ||
<a name='L2711'>                    !PyUnicode_Check(global_name)) <font color='red'>{</font>
<a name='L2712'>                    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L2713'>                                 "_compat_pickle.REVERSE_NAME_MAPPING values "
<a name='L2714'>                                 "should be pairs of str, not (%.200s, %.200s)",
<a name='L2715'>                                 <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(module_name)-&gt;tp_name,
<a name='L2716'>                                 <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(global_name)-&gt;tp_name);
<a name='L2717'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2718'>                <font color='red'>}</font>
<a name='L2719'>                Py_INCREF(module_name);
<a name='L2720'>                Py_INCREF(global_name);
<a name='L2721'>            <font color='red'>}</font>
<a name='L2722'>            <b>else</b> <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L2723'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2724'>            <font color='red'>}</font>
<a name='L2725'>
<a name='L2726'>            item = <a href='../S/2787.html#L754' title='Defined at 754 in Objects/dictobject.c.'>PyDict_GetItemWithError</a>(import_mapping_3to2, module_name);
<a name='L2727'>            <b>if</b> (item) <font color='red'>{</font>
<a name='L2728'>                <b>if</b> (!PyUnicode_Check(item)) <font color='red'>{</font>
<a name='L2729'>                    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L2730'>                                 "_compat_pickle.REVERSE_IMPORT_MAPPING values "
<a name='L2731'>                                 "should be strings, not %.200s",
<a name='L2732'>                                 <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(item)-&gt;tp_name);
<a name='L2733'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2734'>                <font color='red'>}</font>
<a name='L2735'>                <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(module_name);
<a name='L2736'>                module_name = item;
<a name='L2737'>                Py_INCREF(module_name);
<a name='L2738'>            <font color='red'>}</font>
<a name='L2739'>            <b>else</b> <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L2740'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2741'>            <font color='red'>}</font>
<a name='L2742'>        <font color='red'>}</font>
<a name='L2743'>
<a name='L2744'>        <i><font color='green'>/* Save the name of the module. */</font></i>
<a name='L2745'>        encoded = unicode_encoder(module_name);
<a name='L2746'>        <b>if</b> (encoded == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2747'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_UnicodeEncodeError))
<a name='L2748'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError,
<a name='L2749'>                             "can't pickle module identifier '%S' using "
<a name='L2750'>                             "pickle protocol %i", module_name, self-&gt;proto);
<a name='L2751'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2752'>        <font color='red'>}</font>
<a name='L2753'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, PyBytes_AS_STRING(encoded),
<a name='L2754'>                          PyBytes_GET_SIZE(encoded)) &lt; 0) <font color='red'>{</font>
<a name='L2755'>            Py_DECREF(encoded);
<a name='L2756'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2757'>        <font color='red'>}</font>
<a name='L2758'>        Py_DECREF(encoded);
<a name='L2759'>        <b>if</b>(<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, "\n", 1) &lt; 0)
<a name='L2760'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2761'>
<a name='L2762'>        <i><font color='green'>/* Save the name of the module. */</font></i>
<a name='L2763'>        encoded = unicode_encoder(global_name);
<a name='L2764'>        <b>if</b> (encoded == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2765'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_UnicodeEncodeError))
<a name='L2766'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError,
<a name='L2767'>                             "can't pickle global identifier '%S' using "
<a name='L2768'>                             "pickle protocol %i", global_name, self-&gt;proto);
<a name='L2769'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2770'>        <font color='red'>}</font>
<a name='L2771'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, PyBytes_AS_STRING(encoded),
<a name='L2772'>                          PyBytes_GET_SIZE(encoded)) &lt; 0) <font color='red'>{</font>
<a name='L2773'>            Py_DECREF(encoded);
<a name='L2774'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2775'>        <font color='red'>}</font>
<a name='L2776'>        Py_DECREF(encoded);
<a name='L2777'>        <b>if</b>(<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, "\n", 1) &lt; 0)
<a name='L2778'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2779'>
<a name='L2780'>        <i><font color='green'>/* Memoize the object. */</font></i>
<a name='L2781'>        <b>if</b> (<a href='../S/2588.html#L1273' title='Defined at 1273 in Modules/_pickle.c.'>memo_put</a>(self, obj) &lt; 0)
<a name='L2782'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2783'>    <font color='red'>}</font>
<a name='L2784'>
<a name='L2785'>    <b>if</b> (0) <font color='red'>{</font>
<a name='L2786'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L2787'>        status = -1;
<a name='L2788'>    <font color='red'>}</font>
<a name='L2789'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(module_name);
<a name='L2790'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(global_name);
<a name='L2791'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(module);
<a name='L2792'>
<a name='L2793'>    <b>return</b> status;
<a name='L2794'><font color='red'>}</font>
<a name='L2795'>
<a name='L2796'><b>static</b> <b>int</b>
<a name='L2797'><a href='../S/2588.html#L3065' title='Refered from 3065 in Modules/_pickle.c.'>save_pers</a>(PicklerObject *self, PyObject *obj, PyObject *func)
<a name='L2798'><font color='red'>{</font>
<a name='L2799'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pid = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2800'>    <b>int</b> status = 0;
<a name='L2801'>
<a name='L2802'>    <b>const</b> <b>char</b> persid_op = <a href='../S/2588.html#L28' title='Defined at 28 in Modules/_pickle.c.'>PERSID</a>;
<a name='L2803'>    <b>const</b> <b>char</b> binpersid_op = <a href='../S/2588.html#L29' title='Defined at 29 in Modules/_pickle.c.'>BINPERSID</a>;
<a name='L2804'>
<a name='L2805'>    Py_INCREF(obj);
<a name='L2806'>    pid = <a href='../S/2588.html#L650' title='Defined at 650 in Modules/_pickle.c.'>_Pickler_FastCall</a>(self, func, obj);
<a name='L2807'>    <b>if</b> (pid == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2808'>        <b>return</b> -1;
<a name='L2809'>
<a name='L2810'>    <b>if</b> (pid != Py_None) <font color='red'>{</font>
<a name='L2811'>        <b>if</b> (self-&gt;bin) <font color='red'>{</font>
<a name='L2812'>            <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, pid, 1) &lt; 0 ||
<a name='L2813'>                <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;binpersid_op, 1) &lt; 0)
<a name='L2814'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2815'>        <font color='red'>}</font>
<a name='L2816'>        <b>else</b> <font color='red'>{</font>
<a name='L2817'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pid_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2818'>            <b>char</b> *pid_ascii_bytes;
<a name='L2819'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L2820'>
<a name='L2821'>            pid_str = <a href='../S/2803.html#L396' title='Defined at 396 in Objects/object.c.'>PyObject_Str</a>(pid);
<a name='L2822'>            <b>if</b> (pid_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2823'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2824'>
<a name='L2825'>            <i><font color='green'>/* XXX: Should it check whether the persistent id only contains</font></i>
<a name='L2826'><i><font color='green'>               ASCII characters? And what if the pid contains embedded</font></i>
<a name='L2827'><i><font color='green'>               newlines? */</font></i>
<a name='L2828'>            pid_ascii_bytes = <a href='../S/2828.html#L1903' title='Defined at 1903 in Objects/unicodeobject.c.'>_PyUnicode_AsStringAndSize</a>(pid_str, &amp;size);
<a name='L2829'>            Py_DECREF(pid_str);
<a name='L2830'>            <b>if</b> (pid_ascii_bytes == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2831'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2832'>
<a name='L2833'>            <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;persid_op, 1) &lt; 0 ||
<a name='L2834'>                <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, pid_ascii_bytes, size) &lt; 0 ||
<a name='L2835'>                <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, "\n", 1) &lt; 0)
<a name='L2836'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2837'>        <font color='red'>}</font>
<a name='L2838'>        status = 1;
<a name='L2839'>    <font color='red'>}</font>
<a name='L2840'>
<a name='L2841'>    <b>if</b> (0) <font color='red'>{</font>
<a name='L2842'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L2843'>        status = -1;
<a name='L2844'>    <font color='red'>}</font>
<a name='L2845'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(pid);
<a name='L2846'>
<a name='L2847'>    <b>return</b> status;
<a name='L2848'><font color='red'>}</font>
<a name='L2849'>
<a name='L2850'><i><font color='green'>/* We're saving obj, and args is the 2-thru-5 tuple returned by the</font></i>
<a name='L2851'><i><font color='green'> * appropriate __reduce__ method for obj.</font></i>
<a name='L2852'><i><font color='green'> */</font></i>
<a name='L2853'><b>static</b> <b>int</b>
<a name='L2854'><a href='../R/10115.html' title='Multiple refered from 3 places.'>save_reduce</a>(PicklerObject *self, PyObject *args, PyObject *obj)
<a name='L2855'><font color='red'>{</font>
<a name='L2856'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *callable;
<a name='L2857'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *argtup;
<a name='L2858'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2859'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *listitems = Py_None;
<a name='L2860'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dictitems = Py_None;
<a name='L2861'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L2862'>
<a name='L2863'>    <b>int</b> use_newobj = self-&gt;proto &gt;= 2;
<a name='L2864'>
<a name='L2865'>    <b>const</b> <b>char</b> reduce_op = <a href='../D/4440.html' title='Multiple defined in 2 places.'>REDUCE</a>;
<a name='L2866'>    <b>const</b> <b>char</b> build_op = <a href='../S/2588.html#L37' title='Defined at 37 in Modules/_pickle.c.'>BUILD</a>;
<a name='L2867'>    <b>const</b> <b>char</b> newobj_op = <a href='../S/2588.html#L60' title='Defined at 60 in Modules/_pickle.c.'>NEWOBJ</a>;
<a name='L2868'>
<a name='L2869'>    size = <a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L2870'>    <b>if</b> (size &lt; 2 || size &gt; 5) <font color='red'>{</font>
<a name='L2871'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError, "tuple returned by "
<a name='L2872'>                        "__reduce__ must contain 2 through 5 elements");
<a name='L2873'>        <b>return</b> -1;
<a name='L2874'>    <font color='red'>}</font>
<a name='L2875'>
<a name='L2876'>    <b>if</b> (!<a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "save_reduce", 2, 5,
<a name='L2877'>                           &amp;callable, &amp;argtup, &amp;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, &amp;listitems, &amp;dictitems))
<a name='L2878'>        <b>return</b> -1;
<a name='L2879'>
<a name='L2880'>    <b>if</b> (!<a href='../S/2803.html#L1180' title='Defined at 1180 in Objects/object.c.'>PyCallable_Check</a>(callable)) <font color='red'>{</font>
<a name='L2881'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError, "first item of the tuple "
<a name='L2882'>                        "returned by __reduce__ must be callable");
<a name='L2883'>        <b>return</b> -1;
<a name='L2884'>    <font color='red'>}</font>
<a name='L2885'>    <b>if</b> (!PyTuple_Check(argtup)) <font color='red'>{</font>
<a name='L2886'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError, "second item of the tuple "
<a name='L2887'>                        "returned by __reduce__ must be a tuple");
<a name='L2888'>        <b>return</b> -1;
<a name='L2889'>    <font color='red'>}</font>
<a name='L2890'>
<a name='L2891'>    <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == Py_None)
<a name='L2892'>        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2893'>
<a name='L2894'>    <b>if</b> (listitems == Py_None)
<a name='L2895'>        listitems = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2896'>    <b>else</b> <b>if</b> (!PyIter_Check(listitems)) <font color='red'>{</font>
<a name='L2897'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError, "Fourth element of tuple"
<a name='L2898'>                     "returned by __reduce__ must be an iterator, not %s",
<a name='L2899'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(listitems)-&gt;tp_name);
<a name='L2900'>        <b>return</b> -1;
<a name='L2901'>    <font color='red'>}</font>
<a name='L2902'>
<a name='L2903'>    <b>if</b> (dictitems == Py_None)
<a name='L2904'>        dictitems = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2905'>    <b>else</b> <b>if</b> (!PyIter_Check(dictitems)) <font color='red'>{</font>
<a name='L2906'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError, "Fifth element of tuple"
<a name='L2907'>                     "returned by __reduce__ must be an iterator, not %s",
<a name='L2908'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(dictitems)-&gt;tp_name);
<a name='L2909'>        <b>return</b> -1;
<a name='L2910'>    <font color='red'>}</font>
<a name='L2911'>
<a name='L2912'>    <i><font color='green'>/* Protocol 2 special case: if callable's name is __newobj__, use</font></i>
<a name='L2913'><i><font color='green'>       NEWOBJ. */</font></i>
<a name='L2914'>    <b>if</b> (use_newobj) <font color='red'>{</font>
<a name='L2915'>        <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *newobj_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2916'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *name_str;
<a name='L2917'>
<a name='L2918'>        <b>if</b> (newobj_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2919'>            newobj_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("__newobj__");
<a name='L2920'>            <b>if</b> (newobj_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2921'>                <b>return</b> -1;
<a name='L2922'>        <font color='red'>}</font>
<a name='L2923'>
<a name='L2924'>        name_str = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(callable, "__name__");
<a name='L2925'>        <b>if</b> (name_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2926'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L2927'>                <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L2928'>            <b>else</b>
<a name='L2929'>                <b>return</b> -1;
<a name='L2930'>            use_newobj = 0;
<a name='L2931'>        <font color='red'>}</font>
<a name='L2932'>        <b>else</b> <font color='red'>{</font>
<a name='L2933'>            use_newobj = PyUnicode_Check(name_str) &amp;&amp; 
<a name='L2934'>                <a href='../D/3967.html' title='Multiple defined in 3 places.'>PyUnicode_Compare</a>(name_str, newobj_str) == 0;
<a name='L2935'>            Py_DECREF(name_str);
<a name='L2936'>        <font color='red'>}</font>
<a name='L2937'>    <font color='red'>}</font>
<a name='L2938'>    <b>if</b> (use_newobj) <font color='red'>{</font>
<a name='L2939'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cls;
<a name='L2940'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *newargtup;
<a name='L2941'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj_class;
<a name='L2942'>        <b>int</b> p;
<a name='L2943'>
<a name='L2944'>        <i><font color='green'>/* Sanity checks. */</font></i>
<a name='L2945'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(argtup) &lt; 1) <font color='red'>{</font>
<a name='L2946'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError, "__newobj__ arglist is empty");
<a name='L2947'>            <b>return</b> -1;
<a name='L2948'>        <font color='red'>}</font>
<a name='L2949'>
<a name='L2950'>        cls = PyTuple_GET_ITEM(argtup, 0);
<a name='L2951'>        <b>if</b> (!<a href='../S/2803.html#L794' title='Defined at 794 in Objects/object.c.'>PyObject_HasAttrString</a>(cls, "__new__")) <font color='red'>{</font>
<a name='L2952'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError, "args[0] from "
<a name='L2953'>                            "__newobj__ args has no __new__");
<a name='L2954'>            <b>return</b> -1;
<a name='L2955'>        <font color='red'>}</font>
<a name='L2956'>
<a name='L2957'>        <b>if</b> (obj != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2958'>            obj_class = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(obj, "__class__");
<a name='L2959'>            <b>if</b> (obj_class == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2960'>                <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L2961'>                    <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L2962'>                <b>else</b>
<a name='L2963'>                    <b>return</b> -1;
<a name='L2964'>            <font color='red'>}</font>
<a name='L2965'>            p = obj_class != cls;    <i><font color='green'>/* true iff a problem */</font></i>
<a name='L2966'>            Py_DECREF(obj_class);
<a name='L2967'>            <b>if</b> (p) <font color='red'>{</font>
<a name='L2968'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError, "args[0] from "
<a name='L2969'>                                "__newobj__ args has the wrong class");
<a name='L2970'>                <b>return</b> -1;
<a name='L2971'>            <font color='red'>}</font>
<a name='L2972'>        <font color='red'>}</font>
<a name='L2973'>        <i><font color='green'>/* XXX: These calls save() are prone to infinite recursion. Imagine</font></i>
<a name='L2974'><i><font color='green'>           what happen if the value returned by the __reduce__() method of</font></i>
<a name='L2975'><i><font color='green'>           some extension type contains another object of the same type. Ouch!</font></i>
<a name='L2976'><i><font color='green'></font></i>
<a name='L2977'><i><font color='green'>           Here is a quick example, that I ran into, to illustrate what I</font></i>
<a name='L2978'><i><font color='green'>           mean:</font></i>
<a name='L2979'><i><font color='green'></font></i>
<a name='L2980'><i><font color='green'>             &gt;&gt;&gt; import pickle, copyreg</font></i>
<a name='L2981'><i><font color='green'>             &gt;&gt;&gt; copyreg.dispatch_table.pop(complex)</font></i>
<a name='L2982'><i><font color='green'>             &gt;&gt;&gt; pickle.dumps(1+2j)</font></i>
<a name='L2983'><i><font color='green'>             Traceback (most recent call last):</font></i>
<a name='L2984'><i><font color='green'>               ...</font></i>
<a name='L2985'><i><font color='green'>             RuntimeError: maximum recursion depth exceeded</font></i>
<a name='L2986'><i><font color='green'></font></i>
<a name='L2987'><i><font color='green'>           Removing the complex class from copyreg.dispatch_table made the</font></i>
<a name='L2988'><i><font color='green'>           __reduce_ex__() method emit another complex object:</font></i>
<a name='L2989'><i><font color='green'></font></i>
<a name='L2990'><i><font color='green'>             &gt;&gt;&gt; (1+1j).__reduce_ex__(2)</font></i>
<a name='L2991'><i><font color='green'>             (&lt;function __newobj__ at 0xb7b71c3c&gt;,</font></i>
<a name='L2992'><i><font color='green'>               (&lt;class 'complex'&gt;, (1+1j)), None, None, None)</font></i>
<a name='L2993'><i><font color='green'></font></i>
<a name='L2994'><i><font color='green'>           Thus when save() was called on newargstup (the 2nd item) recursion</font></i>
<a name='L2995'><i><font color='green'>           ensued. Of course, the bug was in the complex class which had a</font></i>
<a name='L2996'><i><font color='green'>           broken __getnewargs__() that emitted another complex object. But,</font></i>
<a name='L2997'><i><font color='green'>           the point, here, is it is quite easy to end up with a broken reduce</font></i>
<a name='L2998'><i><font color='green'>           function. */</font></i>
<a name='L2999'>
<a name='L3000'>        <i><font color='green'>/* Save the class and its __new__ arguments. */</font></i>
<a name='L3001'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, cls, 0) &lt; 0)
<a name='L3002'>            <b>return</b> -1;
<a name='L3003'>
<a name='L3004'>        newargtup = <a href='../S/2823.html#L400' title='Defined at 400 in Objects/tupleobject.c.'>PyTuple_GetSlice</a>(argtup, 1, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(argtup));
<a name='L3005'>        <b>if</b> (newargtup == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3006'>            <b>return</b> -1;
<a name='L3007'>
<a name='L3008'>        p = <a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, newargtup, 0);
<a name='L3009'>        Py_DECREF(newargtup);
<a name='L3010'>        <b>if</b> (p &lt; 0)
<a name='L3011'>            <b>return</b> -1;
<a name='L3012'>
<a name='L3013'>        <i><font color='green'>/* Add NEWOBJ opcode. */</font></i>
<a name='L3014'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;newobj_op, 1) &lt; 0)
<a name='L3015'>            <b>return</b> -1;
<a name='L3016'>    <font color='red'>}</font>
<a name='L3017'>    <b>else</b> <font color='red'>{</font> <i><font color='green'>/* Not using NEWOBJ. */</font></i>
<a name='L3018'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, callable, 0) &lt; 0 ||
<a name='L3019'>            <a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, argtup, 0) &lt; 0 ||
<a name='L3020'>            <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;reduce_op, 1) &lt; 0)
<a name='L3021'>            <b>return</b> -1;
<a name='L3022'>    <font color='red'>}</font>
<a name='L3023'>
<a name='L3024'>    <i><font color='green'>/* obj can be NULL when save_reduce() is used directly. A NULL obj means</font></i>
<a name='L3025'><i><font color='green'>       the caller do not want to memoize the object. Not particularly useful,</font></i>
<a name='L3026'><i><font color='green'>       but that is to mimic the behavior save_reduce() in pickle.py when</font></i>
<a name='L3027'><i><font color='green'>       obj is None. */</font></i>
<a name='L3028'>    <b>if</b> (obj &amp;&amp; <a href='../S/2588.html#L1273' title='Defined at 1273 in Modules/_pickle.c.'>memo_put</a>(self, obj) &lt; 0)
<a name='L3029'>        <b>return</b> -1;
<a name='L3030'>
<a name='L3031'>    <b>if</b> (listitems &amp;&amp; <a href='../S/2588.html#L2053' title='Defined at 2053 in Modules/_pickle.c.'>batch_list</a>(self, listitems) &lt; 0)
<a name='L3032'>        <b>return</b> -1;
<a name='L3033'>
<a name='L3034'>    <b>if</b> (dictitems &amp;&amp; <a href='../S/2588.html#L2288' title='Defined at 2288 in Modules/_pickle.c.'>batch_dict</a>(self, dictitems) &lt; 0)
<a name='L3035'>        <b>return</b> -1;
<a name='L3036'>
<a name='L3037'>    <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>) <font color='red'>{</font>
<a name='L3038'>        <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, 0) &lt; 0 || 
<a name='L3039'>            <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;build_op, 1) &lt; 0)
<a name='L3040'>            <b>return</b> -1;
<a name='L3041'>    <font color='red'>}</font>
<a name='L3042'>
<a name='L3043'>    <b>return</b> 0;
<a name='L3044'><font color='red'>}</font>
<a name='L3045'>
<a name='L3046'><b>static</b> <b>int</b>
<a name='L3047'><a href='../R/10104.html' title='Multiple refered from 30 places.'>save</a>(PicklerObject *self, PyObject *obj, <b>int</b> pers_save)
<a name='L3048'><font color='red'>{</font>
<a name='L3049'>    <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> *type;
<a name='L3050'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *reduce_func = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3051'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *reduce_value = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3052'>    <b>int</b> status = 0;
<a name='L3053'>
<a name='L3054'>    <b>if</b> (Py_EnterRecursiveCall(" while pickling an object"))
<a name='L3055'>        <b>return</b> -1;
<a name='L3056'>
<a name='L3057'>    <i><font color='green'>/* The extra pers_save argument is necessary to avoid calling save_pers()</font></i>
<a name='L3058'><i><font color='green'>       on its returned object. */</font></i>
<a name='L3059'>    <b>if</b> (!pers_save &amp;&amp; self-&gt;pers_func) <font color='red'>{</font>
<a name='L3060'>        <i><font color='green'>/* save_pers() returns:</font></i>
<a name='L3061'><i><font color='green'>            -1   to signal an error;</font></i>
<a name='L3062'><i><font color='green'>             0   if it did nothing successfully;</font></i>
<a name='L3063'><i><font color='green'>             1   if a persistent id was saved.</font></i>
<a name='L3064'><i><font color='green'>         */</font></i>
<a name='L3065'>        <b>if</b> ((status = <a href='../S/2588.html#L2797' title='Defined at 2797 in Modules/_pickle.c.'>save_pers</a>(self, obj, self-&gt;pers_func)) != 0)
<a name='L3066'>            <b>goto</b> done;
<a name='L3067'>    <font color='red'>}</font>
<a name='L3068'>
<a name='L3069'>    type = <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(obj);
<a name='L3070'>
<a name='L3071'>    <i><font color='green'>/* The old cPickle had an optimization that used switch-case statement</font></i>
<a name='L3072'><i><font color='green'>       dispatching on the first letter of the type name.  This has was removed</font></i>
<a name='L3073'><i><font color='green'>       since benchmarks shown that this optimization was actually slowing</font></i>
<a name='L3074'><i><font color='green'>       things down. */</font></i>
<a name='L3075'>
<a name='L3076'>    <i><font color='green'>/* Atom types; these aren't memoized, so don't check the memo. */</font></i>
<a name='L3077'>
<a name='L3078'>    <b>if</b> (obj == Py_None) <font color='red'>{</font>
<a name='L3079'>        status = <a href='../S/2588.html#L1460' title='Defined at 1460 in Modules/_pickle.c.'>save_none</a>(self, obj);
<a name='L3080'>        <b>goto</b> done;
<a name='L3081'>    <font color='red'>}</font>
<a name='L3082'>    <b>else</b> <b>if</b> (obj == Py_False || obj == Py_True) <font color='red'>{</font>
<a name='L3083'>        status = <a href='../S/2588.html#L1470' title='Defined at 1470 in Modules/_pickle.c.'>save_bool</a>(self, obj);
<a name='L3084'>        <b>goto</b> done;
<a name='L3085'>    <font color='red'>}</font>
<a name='L3086'>    <b>else</b> <b>if</b> (type == &amp;PyLong_Type) <font color='red'>{</font>
<a name='L3087'>        status = <a href='../S/2588.html#L1536' title='Defined at 1536 in Modules/_pickle.c.'>save_long</a>(self, obj);
<a name='L3088'>        <b>goto</b> done;
<a name='L3089'>    <font color='red'>}</font>
<a name='L3090'>    <b>else</b> <b>if</b> (type == &amp;PyFloat_Type) <font color='red'>{</font>
<a name='L3091'>        status = <a href='../S/2588.html#L1660' title='Defined at 1660 in Modules/_pickle.c.'>save_float</a>(self, obj);
<a name='L3092'>        <b>goto</b> done;
<a name='L3093'>    <font color='red'>}</font>
<a name='L3094'>
<a name='L3095'>    <i><font color='green'>/* Check the memo to see if it has the object. If so, generate</font></i>
<a name='L3096'><i><font color='green'>       a GET (or BINGET) opcode, instead of pickling the object</font></i>
<a name='L3097'><i><font color='green'>       once again. */</font></i>
<a name='L3098'>    <b>if</b> (<a href='../S/2588.html#L560' title='Defined at 560 in Modules/_pickle.c.'>PyMemoTable_Get</a>(self-&gt;memo, obj)) <font color='red'>{</font>
<a name='L3099'>        <b>if</b> (<a href='../S/2588.html#L1226' title='Defined at 1226 in Modules/_pickle.c.'>memo_get</a>(self, obj) &lt; 0)
<a name='L3100'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3101'>        <b>goto</b> done;
<a name='L3102'>    <font color='red'>}</font>
<a name='L3103'>
<a name='L3104'>    <b>if</b> (type == &amp;PyBytes_Type) <font color='red'>{</font>
<a name='L3105'>        status = <a href='../S/2588.html#L1702' title='Defined at 1702 in Modules/_pickle.c.'>save_bytes</a>(self, obj);
<a name='L3106'>        <b>goto</b> done;
<a name='L3107'>    <font color='red'>}</font>
<a name='L3108'>    <b>else</b> <b>if</b> (type == &amp;PyUnicode_Type) <font color='red'>{</font>
<a name='L3109'>        status = <a href='../S/2588.html#L1861' title='Defined at 1861 in Modules/_pickle.c.'>save_unicode</a>(self, obj);
<a name='L3110'>        <b>goto</b> done;
<a name='L3111'>    <font color='red'>}</font>
<a name='L3112'>    <b>else</b> <b>if</b> (type == &amp;PyDict_Type) <font color='red'>{</font>
<a name='L3113'>        status = <a href='../S/2588.html#L2473' title='Defined at 2473 in Modules/_pickle.c.'>save_dict</a>(self, obj);
<a name='L3114'>        <b>goto</b> done;
<a name='L3115'>    <font color='red'>}</font>
<a name='L3116'>    <b>else</b> <b>if</b> (type == &amp;PyList_Type) <font color='red'>{</font>
<a name='L3117'>        status = <a href='../S/2588.html#L2214' title='Defined at 2214 in Modules/_pickle.c.'>save_list</a>(self, obj);
<a name='L3118'>        <b>goto</b> done;
<a name='L3119'>    <font color='red'>}</font>
<a name='L3120'>    <b>else</b> <b>if</b> (type == &amp;PyTuple_Type) <font color='red'>{</font>
<a name='L3121'>        status = <a href='../S/2588.html#L1947' title='Defined at 1947 in Modules/_pickle.c.'>save_tuple</a>(self, obj);
<a name='L3122'>        <b>goto</b> done;
<a name='L3123'>    <font color='red'>}</font>
<a name='L3124'>    <b>else</b> <b>if</b> (type == &amp;PyType_Type) <font color='red'>{</font>
<a name='L3125'>        status = <a href='../S/2588.html#L2543' title='Defined at 2543 in Modules/_pickle.c.'>save_global</a>(self, obj, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L3126'>        <b>goto</b> done;
<a name='L3127'>    <font color='red'>}</font>
<a name='L3128'>    <b>else</b> <b>if</b> (type == &amp;PyFunction_Type) <font color='red'>{</font>
<a name='L3129'>        status = <a href='../S/2588.html#L2543' title='Defined at 2543 in Modules/_pickle.c.'>save_global</a>(self, obj, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L3130'>        <b>if</b> (status &lt; 0 &amp;&amp; <a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PickleError)) <font color='red'>{</font>
<a name='L3131'>            <i><font color='green'>/* fall back to reduce */</font></i>
<a name='L3132'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L3133'>        <font color='red'>}</font>
<a name='L3134'>        <b>else</b> <font color='red'>{</font>
<a name='L3135'>            <b>goto</b> done;
<a name='L3136'>        <font color='red'>}</font>
<a name='L3137'>    <font color='red'>}</font>
<a name='L3138'>    <b>else</b> <b>if</b> (type == &amp;PyCFunction_Type) <font color='red'>{</font>
<a name='L3139'>        status = <a href='../S/2588.html#L2543' title='Defined at 2543 in Modules/_pickle.c.'>save_global</a>(self, obj, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L3140'>        <b>goto</b> done;
<a name='L3141'>    <font color='red'>}</font>
<a name='L3142'>    <b>else</b> <b>if</b> (<a href='../S/2824.html#L1082' title='Defined at 1082 in Objects/typeobject.c.'>PyType_IsSubtype</a>(type, &amp;PyType_Type)) <font color='red'>{</font>
<a name='L3143'>        status = <a href='../S/2588.html#L2543' title='Defined at 2543 in Modules/_pickle.c.'>save_global</a>(self, obj, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L3144'>        <b>goto</b> done;
<a name='L3145'>    <font color='red'>}</font>
<a name='L3146'>
<a name='L3147'>    <i><font color='green'>/* XXX: This part needs some unit tests. */</font></i>
<a name='L3148'>
<a name='L3149'>    <i><font color='green'>/* Get a reduction callable, and call it.  This may come from</font></i>
<a name='L3150'><i><font color='green'>     * copyreg.dispatch_table, the object's __reduce_ex__ method,</font></i>
<a name='L3151'><i><font color='green'>     * or the object's __reduce__ method.</font></i>
<a name='L3152'><i><font color='green'>     */</font></i>
<a name='L3153'>    reduce_func = <a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(dispatch_table, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)type);
<a name='L3154'>    <b>if</b> (reduce_func != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3155'>        <i><font color='green'>/* Here, the reference count of the reduce_func object returned by</font></i>
<a name='L3156'><i><font color='green'>           PyDict_GetItem needs to be increased to be consistent with the one</font></i>
<a name='L3157'><i><font color='green'>           returned by PyObject_GetAttr. This is allow us to blindly DECREF</font></i>
<a name='L3158'><i><font color='green'>           reduce_func at the end of the save() routine.</font></i>
<a name='L3159'><i><font color='green'>        */</font></i>
<a name='L3160'>        Py_INCREF(reduce_func);
<a name='L3161'>        Py_INCREF(obj);
<a name='L3162'>        reduce_value = <a href='../S/2588.html#L650' title='Defined at 650 in Modules/_pickle.c.'>_Pickler_FastCall</a>(self, reduce_func, obj);
<a name='L3163'>    <font color='red'>}</font>
<a name='L3164'>    <b>else</b> <font color='red'>{</font>
<a name='L3165'>        <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *reduce_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3166'>        <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *reduce_ex_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3167'>
<a name='L3168'>        <i><font color='green'>/* Cache the name of the reduce methods. */</font></i>
<a name='L3169'>        <b>if</b> (reduce_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3170'>            reduce_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("__reduce__");
<a name='L3171'>            <b>if</b> (reduce_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3172'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3173'>            reduce_ex_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("__reduce_ex__");
<a name='L3174'>            <b>if</b> (reduce_ex_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3175'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3176'>        <font color='red'>}</font>
<a name='L3177'>
<a name='L3178'>        <i><font color='green'>/* XXX: If the __reduce__ method is defined, __reduce_ex__ is</font></i>
<a name='L3179'><i><font color='green'>           automatically defined as __reduce__. While this is convenient, this</font></i>
<a name='L3180'><i><font color='green'>           make it impossible to know which method was actually called. Of</font></i>
<a name='L3181'><i><font color='green'>           course, this is not a big deal. But still, it would be nice to let</font></i>
<a name='L3182'><i><font color='green'>           the user know which method was called when something go</font></i>
<a name='L3183'><i><font color='green'>           wrong. Incidentally, this means if __reduce_ex__ is not defined, we</font></i>
<a name='L3184'><i><font color='green'>           don't actually have to check for a __reduce__ method. */</font></i>
<a name='L3185'>
<a name='L3186'>        <i><font color='green'>/* Check for a __reduce_ex__ method. */</font></i>
<a name='L3187'>        reduce_func = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(obj, reduce_ex_str);
<a name='L3188'>        <b>if</b> (reduce_func != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3189'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *proto;
<a name='L3190'>            proto = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(self-&gt;proto);
<a name='L3191'>            <b>if</b> (proto != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3192'>                reduce_value = <a href='../S/2588.html#L650' title='Defined at 650 in Modules/_pickle.c.'>_Pickler_FastCall</a>(self, reduce_func, proto);
<a name='L3193'>            <font color='red'>}</font>
<a name='L3194'>        <font color='red'>}</font>
<a name='L3195'>        <b>else</b> <font color='red'>{</font>
<a name='L3196'>            <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L3197'>                <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L3198'>            <b>else</b>
<a name='L3199'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3200'>            <i><font color='green'>/* Check for a __reduce__ method. */</font></i>
<a name='L3201'>            reduce_func = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(obj, reduce_str);
<a name='L3202'>            <b>if</b> (reduce_func != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3203'>                reduce_value = <a href='../S/2775.html#L2141' title='Defined at 2141 in Objects/abstract.c.'>PyObject_Call</a>(reduce_func, empty_tuple, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L3204'>            <font color='red'>}</font>
<a name='L3205'>            <b>else</b> <font color='red'>{</font>
<a name='L3206'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError, "can't pickle '%.200s' object: %R",
<a name='L3207'>                             type-&gt;tp_name, obj);
<a name='L3208'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3209'>            <font color='red'>}</font>
<a name='L3210'>        <font color='red'>}</font>
<a name='L3211'>    <font color='red'>}</font>
<a name='L3212'>
<a name='L3213'>    <b>if</b> (reduce_value == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3214'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3215'>
<a name='L3216'>    <b>if</b> (PyUnicode_Check(reduce_value)) <font color='red'>{</font>
<a name='L3217'>        status = <a href='../S/2588.html#L2543' title='Defined at 2543 in Modules/_pickle.c.'>save_global</a>(self, obj, reduce_value);
<a name='L3218'>        <b>goto</b> done;
<a name='L3219'>    <font color='red'>}</font>
<a name='L3220'>
<a name='L3221'>    <b>if</b> (!PyTuple_Check(reduce_value)) <font color='red'>{</font>
<a name='L3222'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PicklingError,
<a name='L3223'>                        "__reduce__ must return a string or tuple");
<a name='L3224'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3225'>    <font color='red'>}</font>
<a name='L3226'>
<a name='L3227'>    status = <a href='../S/2588.html#L2854' title='Defined at 2854 in Modules/_pickle.c.'>save_reduce</a>(self, reduce_value, obj);
<a name='L3228'>
<a name='L3229'>    <b>if</b> (0) <font color='red'>{</font>
<a name='L3230'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L3231'>        status = -1;
<a name='L3232'>    <font color='red'>}</font>
<a name='L3233'>  done:
<a name='L3234'>    Py_LeaveRecursiveCall();
<a name='L3235'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(reduce_func);
<a name='L3236'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(reduce_value);
<a name='L3237'>
<a name='L3238'>    <b>return</b> status;
<a name='L3239'><font color='red'>}</font>
<a name='L3240'>
<a name='L3241'><b>static</b> <b>int</b>
<a name='L3242'><a href='../R/7486.html' title='Multiple refered from 3 places.'>dump</a>(PicklerObject *self, PyObject *obj)
<a name='L3243'><font color='red'>{</font>
<a name='L3244'>    <b>const</b> <b>char</b> stop_op = <a href='../S/2588.html#L17' title='Defined at 17 in Modules/_pickle.c.'>STOP</a>;
<a name='L3245'>
<a name='L3246'>    <b>if</b> (self-&gt;proto &gt;= 2) <font color='red'>{</font>
<a name='L3247'>        <b>char</b> header[2];
<a name='L3248'>
<a name='L3249'>        header[0] = <a href='../S/2588.html#L59' title='Defined at 59 in Modules/_pickle.c.'>PROTO</a>;
<a name='L3250'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;proto &gt;= 0 &amp;&amp; self-&gt;proto &lt; 256);
<a name='L3251'>        header[1] = (<b>unsigned</b> <b>char</b>)self-&gt;proto;
<a name='L3252'>        <b>if</b> (<a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, header, 2) &lt; 0)
<a name='L3253'>            <b>return</b> -1;
<a name='L3254'>    <font color='red'>}</font>
<a name='L3255'>
<a name='L3256'>    <b>if</b> (<a href='../S/2588.html#L3047' title='Defined at 3047 in Modules/_pickle.c.'>save</a>(self, obj, 0) &lt; 0 ||
<a name='L3257'>        <a href='../S/2588.html#L704' title='Defined at 704 in Modules/_pickle.c.'>_Pickler_Write</a>(self, &amp;stop_op, 1) &lt; 0)
<a name='L3258'>        <b>return</b> -1;
<a name='L3259'>
<a name='L3260'>    <b>return</b> 0;
<a name='L3261'><font color='red'>}</font>
<a name='L3262'>
<a name='L3263'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(Pickler_clear_memo_doc,
<a name='L3264'>"clear_memo() -&gt; None. Clears the pickler's \"memo\"."
<a name='L3265'>"\n"
<a name='L3266'>"The memo is the data structure that remembers which objects the\n"
<a name='L3267'>"pickler has already seen, so that shared or recursive objects are\n"
<a name='L3268'>"pickled by reference and not by value.  This method is useful when\n"
<a name='L3269'>"re-using picklers.");
<a name='L3270'>
<a name='L3271'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3272'><a href='../S/2588.html#L3316' title='Refered from 3316 in Modules/_pickle.c.'>Pickler_clear_memo</a>(PicklerObject *self)
<a name='L3273'><font color='red'>{</font>
<a name='L3274'>    <b>if</b> (self-&gt;memo)
<a name='L3275'>        <a href='../S/2588.html#L456' title='Defined at 456 in Modules/_pickle.c.'>PyMemoTable_Clear</a>(self-&gt;memo);
<a name='L3276'>
<a name='L3277'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L3278'><font color='red'>}</font>
<a name='L3279'>
<a name='L3280'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(Pickler_dump_doc,
<a name='L3281'>"dump(obj) -&gt; None. Write a pickled representation of obj to the open file.");
<a name='L3282'>
<a name='L3283'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3284'><a href='../S/2588.html#L3314' title='Refered from 3314 in Modules/_pickle.c.'>Pickler_dump</a>(PicklerObject *self, PyObject *args)
<a name='L3285'><font color='red'>{</font>
<a name='L3286'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;
<a name='L3287'>
<a name='L3288'>    <i><font color='green'>/* Check whether the Pickler was initialized correctly (issue3664).</font></i>
<a name='L3289'><i><font color='green'>       Developers often forget to call __init__() in their subclasses, which</font></i>
<a name='L3290'><i><font color='green'>       would trigger a segfault without this check. */</font></i>
<a name='L3291'>    <b>if</b> (self-&gt;write == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3292'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PicklingError, 
<a name='L3293'>                     "Pickler.__init__() was not called by %s.__init__()",
<a name='L3294'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_name);
<a name='L3295'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3296'>    <font color='red'>}</font>
<a name='L3297'>
<a name='L3298'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "O:dump", &amp;obj))
<a name='L3299'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3300'>
<a name='L3301'>    <b>if</b> (<a href='../S/2588.html#L663' title='Defined at 663 in Modules/_pickle.c.'>_Pickler_ClearBuffer</a>(self) &lt; 0)
<a name='L3302'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3303'>
<a name='L3304'>    <b>if</b> (<a href='../S/2588.html#L3242' title='Defined at 3242 in Modules/_pickle.c.'>dump</a>(self, obj) &lt; 0)
<a name='L3305'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3306'>
<a name='L3307'>    <b>if</b> (<a href='../S/2588.html#L688' title='Defined at 688 in Modules/_pickle.c.'>_Pickler_FlushToFile</a>(self) &lt; 0)
<a name='L3308'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3309'>
<a name='L3310'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L3311'><font color='red'>}</font>
<a name='L3312'>
<a name='L3313'><b>static</b> <b>struct</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> Pickler_methods[] = <font color='red'>{</font>
<a name='L3314'>    <font color='red'>{</font>"dump", (PyCFunction)<a href='../S/2588.html#L3284' title='Defined at 3284 in Modules/_pickle.c.'>Pickler_dump</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L3315'>     Pickler_dump_doc<font color='red'>}</font>,
<a name='L3316'>    <font color='red'>{</font>"clear_memo", (PyCFunction)<a href='../S/2588.html#L3272' title='Defined at 3272 in Modules/_pickle.c.'>Pickler_clear_memo</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L3317'>     Pickler_clear_memo_doc<font color='red'>}</font>,
<a name='L3318'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>                <i><font color='green'>/* sentinel */</font></i>
<a name='L3319'><font color='red'>}</font>;
<a name='L3320'>
<a name='L3321'><b>static</b> <b>void</b>
<a name='L3322'><a href='../S/2588.html#L3734' title='Refered from 3734 in Modules/_pickle.c.'>Pickler_dealloc</a>(PicklerObject *self)
<a name='L3323'><font color='red'>{</font>
<a name='L3324'>    <a href='../D/3619.html' title='Multiple defined in 2 places.'>PyObject_GC_UnTrack</a>(self);
<a name='L3325'>
<a name='L3326'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;output_buffer);
<a name='L3327'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;write);
<a name='L3328'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;pers_func);
<a name='L3329'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L3330'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;fast_memo);
<a name='L3331'>
<a name='L3332'>    <a href='../S/2588.html#L469' title='Defined at 469 in Modules/_pickle.c.'>PyMemoTable_Del</a>(self-&gt;memo);
<a name='L3333'>
<a name='L3334'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_free((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self);
<a name='L3335'><font color='red'>}</font>
<a name='L3336'>
<a name='L3337'><b>static</b> <b>int</b>
<a name='L3338'><a href='../S/2588.html#L3751' title='Refered from 3751 in Modules/_pickle.c.'>Pickler_traverse</a>(PicklerObject *self, visitproc visit, <b>void</b> *arg)
<a name='L3339'><font color='red'>{</font>
<a name='L3340'>    Py_VISIT(self-&gt;write);
<a name='L3341'>    Py_VISIT(self-&gt;pers_func);
<a name='L3342'>    Py_VISIT(self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L3343'>    Py_VISIT(self-&gt;fast_memo);
<a name='L3344'>    <b>return</b> 0;
<a name='L3345'><font color='red'>}</font>
<a name='L3346'>
<a name='L3347'><b>static</b> <b>int</b>
<a name='L3348'><a href='../R/2441.html' title='Multiple refered from 2 places.'>Pickler_clear</a>(PicklerObject *self)
<a name='L3349'><font color='red'>{</font>
<a name='L3350'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;output_buffer);
<a name='L3351'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;write);
<a name='L3352'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;pers_func);
<a name='L3353'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L3354'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;fast_memo);
<a name='L3355'>
<a name='L3356'>    <b>if</b> (self-&gt;memo != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3357'>        <a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a> *memo = self-&gt;memo;
<a name='L3358'>        self-&gt;memo = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3359'>        <a href='../S/2588.html#L469' title='Defined at 469 in Modules/_pickle.c.'>PyMemoTable_Del</a>(memo);
<a name='L3360'>    <font color='red'>}</font>
<a name='L3361'>    <b>return</b> 0;
<a name='L3362'><font color='red'>}</font>
<a name='L3363'>
<a name='L3364'>
<a name='L3365'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(Pickler_doc,
<a name='L3366'>"Pickler(file, protocol=None)"
<a name='L3367'>"\n"
<a name='L3368'>"This takes a binary file for writing a pickle data stream.\n"
<a name='L3369'>"\n"
<a name='L3370'>"The optional protocol argument tells the pickler to use the\n"
<a name='L3371'>"given protocol; supported protocols are 0, 1, 2, 3.  The default\n"
<a name='L3372'>"protocol is 3; a backward-incompatible protocol designed for\n"
<a name='L3373'>"Python 3.0.\n"
<a name='L3374'>"\n"
<a name='L3375'>"Specifying a negative protocol version selects the highest\n"
<a name='L3376'>"protocol version supported.  The higher the protocol used, the\n"
<a name='L3377'>"more recent the version of Python needed to read the pickle\n"
<a name='L3378'>"produced.\n"
<a name='L3379'>"\n"
<a name='L3380'>"The file argument must have a write() method that accepts a single\n"
<a name='L3381'>"bytes argument. It can thus be a file object opened for binary\n"
<a name='L3382'>"writing, a io.BytesIO instance, or any other custom object that\n"
<a name='L3383'>"meets this interface.\n"
<a name='L3384'>"\n"
<a name='L3385'>"If fix_imports is True and protocol is less than 3, pickle will try to\n"
<a name='L3386'>"map the new Python 3.x names to the old module names used in Python\n"
<a name='L3387'>"2.x, so that the pickle data stream is readable with Python 2.x.\n");
<a name='L3388'>
<a name='L3389'><b>static</b> <b>int</b>
<a name='L3390'><a href='../S/2588.html#L3765' title='Refered from 3765 in Modules/_pickle.c.'>Pickler_init</a>(PicklerObject *self, PyObject *args, PyObject *kwds)
<a name='L3391'><font color='red'>{</font>
<a name='L3392'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"file", "protocol", "fix_imports", 0<font color='red'>}</font>;
<a name='L3393'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *file;
<a name='L3394'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *proto_obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3395'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fix_imports = Py_True;
<a name='L3396'>
<a name='L3397'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|OO:Pickler",
<a name='L3398'>                                     kwlist, &amp;file, &amp;proto_obj, &amp;fix_imports))
<a name='L3399'>        <b>return</b> -1;
<a name='L3400'>
<a name='L3401'>    <i><font color='green'>/* In case of multiple __init__() calls, clear previous content. */</font></i>
<a name='L3402'>    <b>if</b> (self-&gt;write != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3403'>        (<b>void</b>)<a href='../S/2588.html#L3348' title='Defined at 3348 in Modules/_pickle.c.'>Pickler_clear</a>(self);
<a name='L3404'>
<a name='L3405'>    <b>if</b> (<a href='../S/2588.html#L793' title='Defined at 793 in Modules/_pickle.c.'>_Pickler_SetProtocol</a>(self, proto_obj, fix_imports) &lt; 0)
<a name='L3406'>        <b>return</b> -1;
<a name='L3407'>
<a name='L3408'>    <b>if</b> (<a href='../S/2588.html#L827' title='Defined at 827 in Modules/_pickle.c.'>_Pickler_SetOutputStream</a>(self, file) &lt; 0)
<a name='L3409'>        <b>return</b> -1;
<a name='L3410'>
<a name='L3411'>    <i><font color='green'>/* memo and output_buffer may have already been created in _Pickler_New */</font></i>
<a name='L3412'>    <b>if</b> (self-&gt;memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3413'>        self-&gt;memo = <a href='../S/2588.html#L399' title='Defined at 399 in Modules/_pickle.c.'>PyMemoTable_New</a>();
<a name='L3414'>        <b>if</b> (self-&gt;memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3415'>            <b>return</b> -1;
<a name='L3416'>    <font color='red'>}</font>
<a name='L3417'>    self-&gt;output_len = 0;
<a name='L3418'>    <b>if</b> (self-&gt;output_buffer == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3419'>        self-&gt;max_output_len = <a href='../S/2588.html#L99' title='Defined at 99 in Modules/_pickle.c.'>WRITE_BUF_SIZE</a>;
<a name='L3420'>        self-&gt;output_buffer = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L3421'>                                                        self-&gt;max_output_len);
<a name='L3422'>        <b>if</b> (self-&gt;output_buffer == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3423'>            <b>return</b> -1;
<a name='L3424'>    <font color='red'>}</font>
<a name='L3425'>
<a name='L3426'>    self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3427'>    self-&gt;fast = 0;
<a name='L3428'>    self-&gt;fast_nesting = 0;
<a name='L3429'>    self-&gt;fast_memo = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3430'>    self-&gt;pers_func = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3431'>    <b>if</b> (<a href='../S/2803.html#L794' title='Defined at 794 in Objects/object.c.'>PyObject_HasAttrString</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, "persistent_id")) <font color='red'>{</font>
<a name='L3432'>        self-&gt;pers_func = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self,
<a name='L3433'>                                                 "persistent_id");
<a name='L3434'>        <b>if</b> (self-&gt;pers_func == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3435'>            <b>return</b> -1;
<a name='L3436'>    <font color='red'>}</font>
<a name='L3437'>    <b>return</b> 0;
<a name='L3438'><font color='red'>}</font>
<a name='L3439'>
<a name='L3440'><i><font color='green'>/* Define a proxy object for the Pickler's internal memo object. This is to</font></i>
<a name='L3441'><i><font color='green'> * avoid breaking code like:</font></i>
<a name='L3442'><i><font color='green'> *  pickler.memo.clear()</font></i>
<a name='L3443'><i><font color='green'> * and</font></i>
<a name='L3444'><i><font color='green'> *  pickler.memo = saved_memo</font></i>
<a name='L3445'><i><font color='green'> * Is this a good idea? Not really, but we don't want to break code that uses</font></i>
<a name='L3446'><i><font color='green'> * it. Note that we don't implement the entire mapping API here. This is</font></i>
<a name='L3447'><i><font color='green'> * intentional, as these should be treated as black-box implementation details.</font></i>
<a name='L3448'><i><font color='green'> */</font></i>
<a name='L3449'>
<a name='L3450'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L3451'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L3452'>    <a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a> *pickler; <i><font color='green'>/* Pickler whose memo table we're proxying. */</font></i>
<a name='L3453'><font color='red'>}</font> <a href='../R/2435.html' title='Multiple refered from 4 places.'>PicklerMemoProxyObject</a>;
<a name='L3454'>
<a name='L3455'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pmp_clear_doc,
<a name='L3456'>"memo.clear() -&gt; None.  Remove all items from memo.");
<a name='L3457'>
<a name='L3458'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3459'><a href='../S/2588.html#L3537' title='Refered from 3537 in Modules/_pickle.c.'>pmp_clear</a>(PicklerMemoProxyObject *self)
<a name='L3460'><font color='red'>{</font>
<a name='L3461'>    <b>if</b> (self-&gt;pickler-&gt;memo)
<a name='L3462'>        <a href='../S/2588.html#L456' title='Defined at 456 in Modules/_pickle.c.'>PyMemoTable_Clear</a>(self-&gt;pickler-&gt;memo);
<a name='L3463'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L3464'><font color='red'>}</font>
<a name='L3465'>
<a name='L3466'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pmp_copy_doc,
<a name='L3467'>"memo.copy() -&gt; new_memo.  Copy the memo to a new object.");
<a name='L3468'>
<a name='L3469'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3470'><a href='../R/9535.html' title='Multiple refered from 2 places.'>pmp_copy</a>(PicklerMemoProxyObject *self)
<a name='L3471'><font color='red'>{</font>
<a name='L3472'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L3473'>    <a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a> *memo;
<a name='L3474'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *new_memo = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L3475'>    <b>if</b> (new_memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3476'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3477'>
<a name='L3478'>    memo = self-&gt;pickler-&gt;memo;
<a name='L3479'>    <b>for</b> (i = 0; i &lt; memo-&gt;mt_allocated; ++i) <font color='red'>{</font>
<a name='L3480'>        <a href='../S/2588.html#L307' title='Defined at 307 in Modules/_pickle.c.'>PyMemoEntry</a> entry = memo-&gt;mt_table[i];
<a name='L3481'>        <b>if</b> (entry.me_key != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3482'>            <b>int</b> status;
<a name='L3483'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L3484'>
<a name='L3485'>            <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L929' title='Defined at 929 in Objects/longobject.c.'>PyLong_FromVoidPtr</a>(entry.me_key);
<a name='L3486'>            <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("lO", entry.me_value, entry.me_key);
<a name='L3487'>
<a name='L3488'>            <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3489'>                <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L3490'>                <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L3491'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3492'>            <font color='red'>}</font>
<a name='L3493'>            status = <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(new_memo, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L3494'>            Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L3495'>            Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L3496'>            <b>if</b> (status &lt; 0)
<a name='L3497'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3498'>        <font color='red'>}</font>
<a name='L3499'>    <font color='red'>}</font>
<a name='L3500'>    <b>return</b> new_memo;
<a name='L3501'>
<a name='L3502'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L3503'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(new_memo);
<a name='L3504'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3505'><font color='red'>}</font>
<a name='L3506'>
<a name='L3507'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pmp_reduce_doc,
<a name='L3508'>"memo.__reduce__(). Pickling support.");
<a name='L3509'>
<a name='L3510'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3511'><a href='../S/2588.html#L3539' title='Refered from 3539 in Modules/_pickle.c.'>pmp_reduce</a>(PicklerMemoProxyObject *self, PyObject *args)
<a name='L3512'><font color='red'>{</font>
<a name='L3513'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *reduce_value, *dict_args;
<a name='L3514'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *contents = <a href='../S/2588.html#L3470' title='Defined at 3470 in Modules/_pickle.c.'>pmp_copy</a>(self);
<a name='L3515'>    <b>if</b> (contents == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3516'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3517'>
<a name='L3518'>    reduce_value = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(2);
<a name='L3519'>    <b>if</b> (reduce_value == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3520'>        Py_DECREF(contents);
<a name='L3521'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3522'>    <font color='red'>}</font>
<a name='L3523'>    dict_args = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(1);
<a name='L3524'>    <b>if</b> (dict_args == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3525'>        Py_DECREF(contents);
<a name='L3526'>        Py_DECREF(reduce_value);
<a name='L3527'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3528'>    <font color='red'>}</font>
<a name='L3529'>    PyTuple_SET_ITEM(dict_args, 0, contents);
<a name='L3530'>    Py_INCREF((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;PyDict_Type);
<a name='L3531'>    PyTuple_SET_ITEM(reduce_value, 0, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;PyDict_Type);
<a name='L3532'>    PyTuple_SET_ITEM(reduce_value, 1, dict_args);
<a name='L3533'>    <b>return</b> reduce_value;
<a name='L3534'><font color='red'>}</font>
<a name='L3535'>
<a name='L3536'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> picklerproxy_methods[] = <font color='red'>{</font>
<a name='L3537'>    <font color='red'>{</font>"clear",      (PyCFunction)<a href='../S/2588.html#L3459' title='Defined at 3459 in Modules/_pickle.c.'>pmp_clear</a>,  <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,  pmp_clear_doc<font color='red'>}</font>,
<a name='L3538'>    <font color='red'>{</font>"copy",       (PyCFunction)<a href='../S/2588.html#L3470' title='Defined at 3470 in Modules/_pickle.c.'>pmp_copy</a>,   <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,  pmp_copy_doc<font color='red'>}</font>,
<a name='L3539'>    <font color='red'>{</font>"__reduce__", (PyCFunction)<a href='../S/2588.html#L3511' title='Defined at 3511 in Modules/_pickle.c.'>pmp_reduce</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, pmp_reduce_doc<font color='red'>}</font>,
<a name='L3540'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font> <i><font color='green'>/* sentinel */</font></i>
<a name='L3541'><font color='red'>}</font>;
<a name='L3542'>
<a name='L3543'><b>static</b> <b>void</b>
<a name='L3544'><a href='../S/2588.html#L3571' title='Refered from 3571 in Modules/_pickle.c.'>PicklerMemoProxy_dealloc</a>(PicklerMemoProxyObject *self)
<a name='L3545'><font color='red'>{</font>
<a name='L3546'>    <a href='../D/3619.html' title='Multiple defined in 2 places.'>PyObject_GC_UnTrack</a>(self);
<a name='L3547'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;pickler);
<a name='L3548'>    <a href='../D/3617.html' title='Multiple defined in 2 places.'>PyObject_GC_Del</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self);
<a name='L3549'><font color='red'>}</font>
<a name='L3550'>
<a name='L3551'><b>static</b> <b>int</b>
<a name='L3552'><a href='../S/2588.html#L3588' title='Refered from 3588 in Modules/_pickle.c.'>PicklerMemoProxy_traverse</a>(PicklerMemoProxyObject *self,
<a name='L3553'>                          visitproc visit, <b>void</b> *arg)
<a name='L3554'><font color='red'>{</font>
<a name='L3555'>    Py_VISIT(self-&gt;pickler);
<a name='L3556'>    <b>return</b> 0;
<a name='L3557'><font color='red'>}</font>
<a name='L3558'>
<a name='L3559'><b>static</b> <b>int</b>
<a name='L3560'><a href='../S/2588.html#L3589' title='Refered from 3589 in Modules/_pickle.c.'>PicklerMemoProxy_clear</a>(PicklerMemoProxyObject *self)
<a name='L3561'><font color='red'>{</font>
<a name='L3562'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;pickler);
<a name='L3563'>    <b>return</b> 0;
<a name='L3564'><font color='red'>}</font>
<a name='L3565'>
<a name='L3566'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PicklerMemoProxyType = <font color='red'>{</font>
<a name='L3567'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L3568'>    "_pickle.PicklerMemoProxy",                 <i><font color='green'>/*tp_name*/</font></i>
<a name='L3569'>    <b>sizeof</b>(<a href='../S/2588.html#L3453' title='Defined at 3453 in Modules/_pickle.c.'>PicklerMemoProxyObject</a>),             <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L3570'>    0,
<a name='L3571'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2588.html#L3544' title='Defined at 3544 in Modules/_pickle.c.'>PicklerMemoProxy_dealloc</a>,       <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L3572'>    0,                                          <i><font color='green'>/* tp_print */</font></i>
<a name='L3573'>    0,                                          <i><font color='green'>/* tp_getattr */</font></i>
<a name='L3574'>    0,                                          <i><font color='green'>/* tp_setattr */</font></i>
<a name='L3575'>    0,                                          <i><font color='green'>/* tp_compare */</font></i>
<a name='L3576'>    0,                                          <i><font color='green'>/* tp_repr */</font></i>
<a name='L3577'>    0,                                          <i><font color='green'>/* tp_as_number */</font></i>
<a name='L3578'>    0,                                          <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L3579'>    0,                                          <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L3580'>    <a href='../S/2803.html#L750' title='Defined at 750 in Objects/object.c.'>PyObject_HashNotImplemented</a>,                <i><font color='green'>/* tp_hash */</font></i>
<a name='L3581'>    0,                                          <i><font color='green'>/* tp_call */</font></i>
<a name='L3582'>    0,                                          <i><font color='green'>/* tp_str */</font></i>
<a name='L3583'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,                    <i><font color='green'>/* tp_getattro */</font></i>
<a name='L3584'>    <a href='../S/2803.html#L1130' title='Defined at 1130 in Objects/object.c.'>PyObject_GenericSetAttr</a>,                    <i><font color='green'>/* tp_setattro */</font></i>
<a name='L3585'>    0,                                          <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L3586'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE | Py_TPFLAGS_HAVE_GC,
<a name='L3587'>    0,                                          <i><font color='green'>/* tp_doc */</font></i>
<a name='L3588'>    (traverseproc)<a href='../S/2588.html#L3552' title='Defined at 3552 in Modules/_pickle.c.'>PicklerMemoProxy_traverse</a>,    <i><font color='green'>/* tp_traverse */</font></i>
<a name='L3589'>    (inquiry)<a href='../S/2588.html#L3560' title='Defined at 3560 in Modules/_pickle.c.'>PicklerMemoProxy_clear</a>,            <i><font color='green'>/* tp_clear */</font></i>
<a name='L3590'>    0,                                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L3591'>    0,                                          <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L3592'>    0,                                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L3593'>    0,                                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L3594'>    picklerproxy_methods,                       <i><font color='green'>/* tp_methods */</font></i>
<a name='L3595'><font color='red'>}</font>;
<a name='L3596'>
<a name='L3597'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3598'><a href='../S/2588.html#L3616' title='Refered from 3616 in Modules/_pickle.c.'>PicklerMemoProxy_New</a>(PicklerObject *pickler)
<a name='L3599'><font color='red'>{</font>
<a name='L3600'>    <a href='../S/2588.html#L3453' title='Defined at 3453 in Modules/_pickle.c.'>PicklerMemoProxyObject</a> *self;
<a name='L3601'>
<a name='L3602'>    self = PyObject_GC_New(<a href='../S/2588.html#L3453' title='Defined at 3453 in Modules/_pickle.c.'>PicklerMemoProxyObject</a>, &amp;PicklerMemoProxyType);
<a name='L3603'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3604'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3605'>    Py_INCREF(pickler);
<a name='L3606'>    self-&gt;pickler = pickler;
<a name='L3607'>    <a href='../D/3618.html' title='Multiple defined in 2 places.'>PyObject_GC_Track</a>(self);
<a name='L3608'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self;
<a name='L3609'><font color='red'>}</font>
<a name='L3610'>
<a name='L3611'><i><font color='green'>/*****************************************************************************/</font></i>
<a name='L3612'>
<a name='L3613'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3614'><a href='../S/2588.html#L3722' title='Refered from 3722 in Modules/_pickle.c.'>Pickler_get_memo</a>(PicklerObject *self)
<a name='L3615'><font color='red'>{</font>
<a name='L3616'>    <b>return</b> <a href='../S/2588.html#L3598' title='Defined at 3598 in Modules/_pickle.c.'>PicklerMemoProxy_New</a>(self);
<a name='L3617'><font color='red'>}</font>
<a name='L3618'>
<a name='L3619'><b>static</b> <b>int</b>
<a name='L3620'><a href='../S/2588.html#L3723' title='Refered from 3723 in Modules/_pickle.c.'>Pickler_set_memo</a>(PicklerObject *self, PyObject *obj)
<a name='L3621'><font color='red'>{</font>
<a name='L3622'>    <a href='../S/2588.html#L314' title='Defined at 314 in Modules/_pickle.c.'>PyMemoTable</a> *new_memo = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3623'>
<a name='L3624'>    <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3625'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L3626'>                        "attribute deletion is not supported");
<a name='L3627'>        <b>return</b> -1;
<a name='L3628'>    <font color='red'>}</font>
<a name='L3629'>
<a name='L3630'>    <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(obj) == &amp;PicklerMemoProxyType) <font color='red'>{</font>
<a name='L3631'>        <a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a> *pickler =
<a name='L3632'>            ((<a href='../S/2588.html#L3453' title='Defined at 3453 in Modules/_pickle.c.'>PicklerMemoProxyObject</a> *)obj)-&gt;pickler;
<a name='L3633'>
<a name='L3634'>        new_memo = <a href='../S/2588.html#L422' title='Defined at 422 in Modules/_pickle.c.'>PyMemoTable_Copy</a>(pickler-&gt;memo);
<a name='L3635'>        <b>if</b> (new_memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3636'>            <b>return</b> -1;
<a name='L3637'>    <font color='red'>}</font>
<a name='L3638'>    <b>else</b> <b>if</b> (PyDict_Check(obj)) <font color='red'>{</font>
<a name='L3639'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = 0;
<a name='L3640'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L3641'>
<a name='L3642'>        new_memo = <a href='../S/2588.html#L399' title='Defined at 399 in Modules/_pickle.c.'>PyMemoTable_New</a>();
<a name='L3643'>        <b>if</b> (new_memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3644'>            <b>return</b> -1;
<a name='L3645'>
<a name='L3646'>        <b>while</b> (<a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(obj, &amp;i, &amp;<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, &amp;<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) <font color='red'>{</font>
<a name='L3647'>            <b>long</b> memo_id;
<a name='L3648'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *memo_obj;
<a name='L3649'>
<a name='L3650'>            <b>if</b> (!PyTuple_Check(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>) || <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>) != 2) <font color='red'>{</font>
<a name='L3651'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L3652'>                                "'memo' values must be 2-item tuples");
<a name='L3653'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3654'>            <font color='red'>}</font>
<a name='L3655'>            memo_id = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(PyTuple_GET_ITEM(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, 0));
<a name='L3656'>            <b>if</b> (memo_id == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3657'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3658'>            memo_obj = PyTuple_GET_ITEM(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, 1);
<a name='L3659'>            <b>if</b> (<a href='../S/2588.html#L570' title='Defined at 570 in Modules/_pickle.c.'>PyMemoTable_Set</a>(new_memo, memo_obj, memo_id) &lt; 0)
<a name='L3660'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3661'>        <font color='red'>}</font>
<a name='L3662'>    <font color='red'>}</font>
<a name='L3663'>    <b>else</b> <font color='red'>{</font>
<a name='L3664'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L3665'>                     "'memo' attribute must be an PicklerMemoProxy object"
<a name='L3666'>                     "or dict, not %.200s", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(obj)-&gt;tp_name);
<a name='L3667'>        <b>return</b> -1;
<a name='L3668'>    <font color='red'>}</font>
<a name='L3669'>
<a name='L3670'>    <a href='../S/2588.html#L469' title='Defined at 469 in Modules/_pickle.c.'>PyMemoTable_Del</a>(self-&gt;memo);
<a name='L3671'>    self-&gt;memo = new_memo;
<a name='L3672'>
<a name='L3673'>    <b>return</b> 0;
<a name='L3674'>
<a name='L3675'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L3676'>    <b>if</b> (new_memo)
<a name='L3677'>        <a href='../S/2588.html#L469' title='Defined at 469 in Modules/_pickle.c.'>PyMemoTable_Del</a>(new_memo);
<a name='L3678'>    <b>return</b> -1;
<a name='L3679'><font color='red'>}</font>
<a name='L3680'>
<a name='L3681'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3682'><a href='../S/2588.html#L3724' title='Refered from 3724 in Modules/_pickle.c.'>Pickler_get_persid</a>(PicklerObject *self)
<a name='L3683'><font color='red'>{</font>
<a name='L3684'>    <b>if</b> (self-&gt;pers_func == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3685'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_AttributeError, "persistent_id");
<a name='L3686'>    <b>else</b>
<a name='L3687'>        Py_INCREF(self-&gt;pers_func);
<a name='L3688'>    <b>return</b> self-&gt;pers_func;
<a name='L3689'><font color='red'>}</font>
<a name='L3690'>
<a name='L3691'><b>static</b> <b>int</b>
<a name='L3692'><a href='../S/2588.html#L3725' title='Refered from 3725 in Modules/_pickle.c.'>Pickler_set_persid</a>(PicklerObject *self, PyObject *value)
<a name='L3693'><font color='red'>{</font>
<a name='L3694'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tmp;
<a name='L3695'>
<a name='L3696'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3697'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L3698'>                        "attribute deletion is not supported");
<a name='L3699'>        <b>return</b> -1;
<a name='L3700'>    <font color='red'>}</font>
<a name='L3701'>    <b>if</b> (!<a href='../S/2803.html#L1180' title='Defined at 1180 in Objects/object.c.'>PyCallable_Check</a>(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) <font color='red'>{</font>
<a name='L3702'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L3703'>                        "persistent_id must be a callable taking one argument");
<a name='L3704'>        <b>return</b> -1;
<a name='L3705'>    <font color='red'>}</font>
<a name='L3706'>
<a name='L3707'>    tmp = self-&gt;pers_func;
<a name='L3708'>    Py_INCREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L3709'>    self-&gt;pers_func = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L3710'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(tmp);      <i><font color='green'>/* self-&gt;pers_func can be NULL, so be careful. */</font></i>
<a name='L3711'>
<a name='L3712'>    <b>return</b> 0;
<a name='L3713'><font color='red'>}</font>
<a name='L3714'>
<a name='L3715'><b>static</b> <a href='../D/3506.html' title='Multiple defined in 2 places.'>PyMemberDef</a> Pickler_members[] = <font color='red'>{</font>
<a name='L3716'>    <font color='red'>{</font>"bin", <a href='../S/577.html#L39' title='Defined at 39 in Include/structmember.h.'>T_INT</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a>, bin)<font color='red'>}</font>,
<a name='L3717'>    <font color='red'>{</font>"fast", <a href='../S/577.html#L39' title='Defined at 39 in Include/structmember.h.'>T_INT</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a>, fast)<font color='red'>}</font>,
<a name='L3718'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L3719'><font color='red'>}</font>;
<a name='L3720'>
<a name='L3721'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> Pickler_getsets[] = <font color='red'>{</font>
<a name='L3722'>    <font color='red'>{</font>"memo",          (getter)<a href='../S/2588.html#L3614' title='Defined at 3614 in Modules/_pickle.c.'>Pickler_get_memo</a>,
<a name='L3723'>                      (setter)<a href='../S/2588.html#L3620' title='Defined at 3620 in Modules/_pickle.c.'>Pickler_set_memo</a><font color='red'>}</font>,
<a name='L3724'>    <font color='red'>{</font>"persistent_id", (getter)<a href='../S/2588.html#L3682' title='Defined at 3682 in Modules/_pickle.c.'>Pickler_get_persid</a>,
<a name='L3725'>                      (setter)<a href='../S/2588.html#L3692' title='Defined at 3692 in Modules/_pickle.c.'>Pickler_set_persid</a><font color='red'>}</font>,
<a name='L3726'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L3727'><font color='red'>}</font>;
<a name='L3728'>
<a name='L3729'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Pickler_Type = <font color='red'>{</font>
<a name='L3730'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L3731'>    "_pickle.Pickler"  ,                <i><font color='green'>/*tp_name*/</font></i>
<a name='L3732'>    <b>sizeof</b>(<a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a>),              <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L3733'>    0,                                  <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L3734'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2588.html#L3322' title='Defined at 3322 in Modules/_pickle.c.'>Pickler_dealloc</a>,        <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L3735'>    0,                                  <i><font color='green'>/*tp_print*/</font></i>
<a name='L3736'>    0,                                  <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L3737'>    0,                                  <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L3738'>    0,                                  <i><font color='green'>/*tp_reserved*/</font></i>
<a name='L3739'>    0,                                  <i><font color='green'>/*tp_repr*/</font></i>
<a name='L3740'>    0,                                  <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L3741'>    0,                                  <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L3742'>    0,                                  <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L3743'>    0,                                  <i><font color='green'>/*tp_hash*/</font></i>
<a name='L3744'>    0,                                  <i><font color='green'>/*tp_call*/</font></i>
<a name='L3745'>    0,                                  <i><font color='green'>/*tp_str*/</font></i>
<a name='L3746'>    0,                                  <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L3747'>    0,                                  <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L3748'>    0,                                  <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L3749'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE | Py_TPFLAGS_HAVE_GC,
<a name='L3750'>    Pickler_doc,                        <i><font color='green'>/*tp_doc*/</font></i>
<a name='L3751'>    (traverseproc)<a href='../S/2588.html#L3338' title='Defined at 3338 in Modules/_pickle.c.'>Pickler_traverse</a>,     <i><font color='green'>/*tp_traverse*/</font></i>
<a name='L3752'>    (inquiry)<a href='../S/2588.html#L3348' title='Defined at 3348 in Modules/_pickle.c.'>Pickler_clear</a>,             <i><font color='green'>/*tp_clear*/</font></i>
<a name='L3753'>    0,                                  <i><font color='green'>/*tp_richcompare*/</font></i>
<a name='L3754'>    0,                                  <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L3755'>    0,                                  <i><font color='green'>/*tp_iter*/</font></i>
<a name='L3756'>    0,                                  <i><font color='green'>/*tp_iternext*/</font></i>
<a name='L3757'>    Pickler_methods,                    <i><font color='green'>/*tp_methods*/</font></i>
<a name='L3758'>    Pickler_members,                    <i><font color='green'>/*tp_members*/</font></i>
<a name='L3759'>    Pickler_getsets,                    <i><font color='green'>/*tp_getset*/</font></i>
<a name='L3760'>    0,                                  <i><font color='green'>/*tp_base*/</font></i>
<a name='L3761'>    0,                                  <i><font color='green'>/*tp_dict*/</font></i>
<a name='L3762'>    0,                                  <i><font color='green'>/*tp_descr_get*/</font></i>
<a name='L3763'>    0,                                  <i><font color='green'>/*tp_descr_set*/</font></i>
<a name='L3764'>    0,                                  <i><font color='green'>/*tp_dictoffset*/</font></i>
<a name='L3765'>    (initproc)<a href='../S/2588.html#L3390' title='Defined at 3390 in Modules/_pickle.c.'>Pickler_init</a>,             <i><font color='green'>/*tp_init*/</font></i>
<a name='L3766'>    <a href='../S/2824.html#L700' title='Defined at 700 in Objects/typeobject.c.'>PyType_GenericAlloc</a>,                <i><font color='green'>/*tp_alloc*/</font></i>
<a name='L3767'>    <a href='../S/2824.html#L730' title='Defined at 730 in Objects/typeobject.c.'>PyType_GenericNew</a>,                  <i><font color='green'>/*tp_new*/</font></i>
<a name='L3768'>    <a href='../D/3617.html' title='Multiple defined in 2 places.'>PyObject_GC_Del</a>,                    <i><font color='green'>/*tp_free*/</font></i>
<a name='L3769'>    0,                                  <i><font color='green'>/*tp_is_gc*/</font></i>
<a name='L3770'><font color='red'>}</font>;
<a name='L3771'>
<a name='L3772'><i><font color='green'>/* Temporary helper for calling self.find_class(). </font></i>
<a name='L3773'><i><font color='green'></font></i>
<a name='L3774'><i><font color='green'>   XXX: It would be nice to able to avoid Python function call overhead, by</font></i>
<a name='L3775'><i><font color='green'>   using directly the C version of find_class(), when find_class() is not</font></i>
<a name='L3776'><i><font color='green'>   overridden by a subclass. Although, this could become rather hackish. A</font></i>
<a name='L3777'><i><font color='green'>   simpler optimization would be to call the C function when self is not a</font></i>
<a name='L3778'><i><font color='green'>   subclass instance. */</font></i>
<a name='L3779'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3780'><a href='../R/7797.html' title='Multiple refered from 3 places.'>find_class</a>(UnpicklerObject *self, PyObject *module_name, PyObject *global_name)
<a name='L3781'><font color='red'>{</font>
<a name='L3782'>    <b>return</b> <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, "find_class", "OO",
<a name='L3783'>                               module_name, global_name);
<a name='L3784'><font color='red'>}</font>
<a name='L3785'>
<a name='L3786'><b>static</b> <b>int</b>
<a name='L3787'><a href='../R/8882.html' title='Multiple refered from 18 places.'>marker</a>(UnpicklerObject *self)
<a name='L3788'><font color='red'>{</font>
<a name='L3789'>    <b>if</b> (self-&gt;num_marks &lt; 1) <font color='red'>{</font>
<a name='L3790'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "could not find MARK");
<a name='L3791'>        <b>return</b> -1;
<a name='L3792'>    <font color='red'>}</font>
<a name='L3793'>
<a name='L3794'>    <b>return</b> self-&gt;marks[--self-&gt;num_marks];
<a name='L3795'><font color='red'>}</font>
<a name='L3796'>
<a name='L3797'><b>static</b> <b>int</b>
<a name='L3798'><a href='../S/2588.html#L5209' title='Refered from 5209 in Modules/_pickle.c.'>load_none</a>(UnpicklerObject *self)
<a name='L3799'><font color='red'>{</font>
<a name='L3800'>    <a href='../S/2588.html#L266' title='Defined at 266 in Modules/_pickle.c.'>PDATA_APPEND</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, Py_None, -1);
<a name='L3801'>    <b>return</b> 0;
<a name='L3802'><font color='red'>}</font>
<a name='L3803'>
<a name='L3804'><b>static</b> <b>int</b>
<a name='L3805'><a href='../R/6202.html' title='Multiple refered from 12 places.'>bad_readline</a>(<b>void</b>)
<a name='L3806'><font color='red'>{</font>
<a name='L3807'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "pickle data was truncated");
<a name='L3808'>    <b>return</b> -1;
<a name='L3809'><font color='red'>}</font>
<a name='L3810'>
<a name='L3811'><b>static</b> <b>int</b>
<a name='L3812'><a href='../S/2588.html#L5213' title='Refered from 5213 in Modules/_pickle.c.'>load_int</a>(UnpicklerObject *self)
<a name='L3813'><font color='red'>{</font>
<a name='L3814'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L3815'>    <b>char</b> *endptr, *s;
<a name='L3816'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L3817'>    <b>long</b> x;
<a name='L3818'>
<a name='L3819'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L3820'>        <b>return</b> -1;
<a name='L3821'>    <b>if</b> (len &lt; 2)
<a name='L3822'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L3823'>
<a name='L3824'>    errno = 0;
<a name='L3825'>    <i><font color='green'>/* XXX: Should the base argument of strtol() be explicitly set to 10? </font></i>
<a name='L3826'><i><font color='green'>       XXX(avassalotti): Should this uses PyOS_strtol()? */</font></i>
<a name='L3827'>    x = strtol(s, &amp;endptr, 0);
<a name='L3828'>
<a name='L3829'>    <b>if</b> (errno || (*endptr != '\n' &amp;&amp; *endptr != '\0')) <font color='red'>{</font>
<a name='L3830'>        <i><font color='green'>/* Hm, maybe we've got something long.  Let's try reading</font></i>
<a name='L3831'><i><font color='green'>         * it as a Python long object. */</font></i>
<a name='L3832'>        errno = 0;
<a name='L3833'>        <i><font color='green'>/* XXX: Same thing about the base here. */</font></i>
<a name='L3834'>        <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L1853' title='Defined at 1853 in Objects/longobject.c.'>PyLong_FromString</a>(s, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L3835'>        <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3836'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L3837'>                            "could not convert string to int");
<a name='L3838'>            <b>return</b> -1;
<a name='L3839'>        <font color='red'>}</font>
<a name='L3840'>    <font color='red'>}</font>
<a name='L3841'>    <b>else</b> <font color='red'>{</font>
<a name='L3842'>        <b>if</b> (len == 3 &amp;&amp; (x == 0 || x == 1)) <font color='red'>{</font>
<a name='L3843'>            <b>if</b> ((<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(x)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3844'>                <b>return</b> -1;
<a name='L3845'>        <font color='red'>}</font>
<a name='L3846'>        <b>else</b> <font color='red'>{</font>
<a name='L3847'>            <b>if</b> ((<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(x)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3848'>                <b>return</b> -1;
<a name='L3849'>        <font color='red'>}</font>
<a name='L3850'>    <font color='red'>}</font>
<a name='L3851'>
<a name='L3852'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L3853'>    <b>return</b> 0;
<a name='L3854'><font color='red'>}</font>
<a name='L3855'>
<a name='L3856'><b>static</b> <b>int</b>
<a name='L3857'><a href='../R/8693.html' title='Multiple refered from 2 places.'>load_bool</a>(UnpicklerObject *self, PyObject *boolean)
<a name='L3858'><font color='red'>{</font>
<a name='L3859'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(boolean == Py_True || boolean == Py_False);
<a name='L3860'>    <a href='../S/2588.html#L266' title='Defined at 266 in Modules/_pickle.c.'>PDATA_APPEND</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, boolean, -1);
<a name='L3861'>    <b>return</b> 0;
<a name='L3862'><font color='red'>}</font>
<a name='L3863'>
<a name='L3864'><i><font color='green'>/* s contains x bytes of a little-endian integer.  Return its value as a</font></i>
<a name='L3865'><i><font color='green'> * C int.  Obscure:  when x is 1 or 2, this is an unsigned little-endian</font></i>
<a name='L3866'><i><font color='green'> * int, but when x is 4 it's a signed one.  This is an historical source</font></i>
<a name='L3867'><i><font color='green'> * of x-platform bugs.</font></i>
<a name='L3868'><i><font color='green'> */</font></i>
<a name='L3869'><b>static</b> <b>long</b>
<a name='L3870'><a href='../R/6538.html' title='Multiple refered from 6 places.'>calc_binint</a>(<b>char</b> *bytes, <b>int</b> size)
<a name='L3871'><font color='red'>{</font>
<a name='L3872'>    <b>unsigned</b> <b>char</b> *s = (<b>unsigned</b> <b>char</b> *)<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L3873'>    <b>int</b> i = size;
<a name='L3874'>    <b>long</b> x = 0;
<a name='L3875'>
<a name='L3876'>    <b>for</b> (i = 0; i &lt; size; i++) <font color='red'>{</font>
<a name='L3877'>        x |= (<b>long</b>)s[i] &lt;&lt; (i * 8);
<a name='L3878'>    <font color='red'>}</font>
<a name='L3879'>
<a name='L3880'>    <i><font color='green'>/* Unlike BININT1 and BININT2, BININT (more accurately BININT4)</font></i>
<a name='L3881'><i><font color='green'>     * is signed, so on a box with longs bigger than 4 bytes we need</font></i>
<a name='L3882'><i><font color='green'>     * to extend a BININT's sign bit to the full width.</font></i>
<a name='L3883'><i><font color='green'>     */</font></i>
<a name='L3884'>    <b>if</b> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; 4 &amp;&amp; size == 4) <font color='red'>{</font>
<a name='L3885'>        x |= -(x &amp; (1L &lt;&lt; 31));
<a name='L3886'>    <font color='red'>}</font>
<a name='L3887'>
<a name='L3888'>    <b>return</b> x;
<a name='L3889'><font color='red'>}</font>
<a name='L3890'>
<a name='L3891'><b>static</b> <b>int</b>
<a name='L3892'><a href='../R/8688.html' title='Multiple refered from 3 places.'>load_binintx</a>(UnpicklerObject *self, <b>char</b> *s, <b>int</b> size)
<a name='L3893'><font color='red'>{</font>
<a name='L3894'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L3895'>    <b>long</b> x;
<a name='L3896'>
<a name='L3897'>    x = <a href='../S/2588.html#L3870' title='Defined at 3870 in Modules/_pickle.c.'>calc_binint</a>(s, size);
<a name='L3898'>
<a name='L3899'>    <b>if</b> ((<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(x)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3900'>        <b>return</b> -1;
<a name='L3901'>
<a name='L3902'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L3903'>    <b>return</b> 0;
<a name='L3904'><font color='red'>}</font>
<a name='L3905'>
<a name='L3906'><b>static</b> <b>int</b>
<a name='L3907'><a href='../S/2588.html#L5210' title='Refered from 5210 in Modules/_pickle.c.'>load_binint</a>(UnpicklerObject *self)
<a name='L3908'><font color='red'>{</font>
<a name='L3909'>    <b>char</b> *s;
<a name='L3910'>
<a name='L3911'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 4) &lt; 0)
<a name='L3912'>        <b>return</b> -1;
<a name='L3913'>
<a name='L3914'>    <b>return</b> <a href='../S/2588.html#L3892' title='Defined at 3892 in Modules/_pickle.c.'>load_binintx</a>(self, s, 4);
<a name='L3915'><font color='red'>}</font>
<a name='L3916'>
<a name='L3917'><b>static</b> <b>int</b>
<a name='L3918'><a href='../S/2588.html#L5211' title='Refered from 5211 in Modules/_pickle.c.'>load_binint1</a>(UnpicklerObject *self)
<a name='L3919'><font color='red'>{</font>
<a name='L3920'>    <b>char</b> *s;
<a name='L3921'>
<a name='L3922'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 1) &lt; 0)
<a name='L3923'>        <b>return</b> -1;
<a name='L3924'>
<a name='L3925'>    <b>return</b> <a href='../S/2588.html#L3892' title='Defined at 3892 in Modules/_pickle.c.'>load_binintx</a>(self, s, 1);
<a name='L3926'><font color='red'>}</font>
<a name='L3927'>
<a name='L3928'><b>static</b> <b>int</b>
<a name='L3929'><a href='../S/2588.html#L5212' title='Refered from 5212 in Modules/_pickle.c.'>load_binint2</a>(UnpicklerObject *self)
<a name='L3930'><font color='red'>{</font>
<a name='L3931'>    <b>char</b> *s;
<a name='L3932'>
<a name='L3933'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 2) &lt; 0)
<a name='L3934'>        <b>return</b> -1;
<a name='L3935'>
<a name='L3936'>    <b>return</b> <a href='../S/2588.html#L3892' title='Defined at 3892 in Modules/_pickle.c.'>load_binintx</a>(self, s, 2);
<a name='L3937'><font color='red'>}</font>
<a name='L3938'>
<a name='L3939'><b>static</b> <b>int</b>
<a name='L3940'><a href='../S/2588.html#L5214' title='Refered from 5214 in Modules/_pickle.c.'>load_long</a>(UnpicklerObject *self)
<a name='L3941'><font color='red'>{</font>
<a name='L3942'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L3943'>    <b>char</b> *s;
<a name='L3944'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L3945'>
<a name='L3946'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L3947'>        <b>return</b> -1;
<a name='L3948'>    <b>if</b> (len &lt; 2)
<a name='L3949'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L3950'>
<a name='L3951'>    <i><font color='green'>/* s[len-2] will usually be 'L' (and s[len-1] is '\n'); we need to remove</font></i>
<a name='L3952'><i><font color='green'>       the 'L' before calling PyLong_FromString.  In order to maintain</font></i>
<a name='L3953'><i><font color='green'>       compatibility with Python 3.0.0, we don't actually *require*</font></i>
<a name='L3954'><i><font color='green'>       the 'L' to be present. */</font></i>
<a name='L3955'>    <b>if</b> (s[len-2] == 'L')
<a name='L3956'>        s[len-2] = '\0';
<a name='L3957'>    <i><font color='green'>/* XXX: Should the base argument explicitly set to 10? */</font></i>
<a name='L3958'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L1853' title='Defined at 1853 in Objects/longobject.c.'>PyLong_FromString</a>(s, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L3959'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3960'>        <b>return</b> -1;
<a name='L3961'>
<a name='L3962'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L3963'>    <b>return</b> 0;
<a name='L3964'><font color='red'>}</font>
<a name='L3965'>
<a name='L3966'><i><font color='green'>/* 'size' bytes contain the # of bytes of little-endian 256's-complement</font></i>
<a name='L3967'><i><font color='green'> * data following.</font></i>
<a name='L3968'><i><font color='green'> */</font></i>
<a name='L3969'><b>static</b> <b>int</b>
<a name='L3970'><a href='../R/8698.html' title='Multiple refered from 2 places.'>load_counted_long</a>(UnpicklerObject *self, <b>int</b> size)
<a name='L3971'><font color='red'>{</font>
<a name='L3972'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L3973'>    <b>char</b> *nbytes;
<a name='L3974'>    <b>char</b> *pdata;
<a name='L3975'>
<a name='L3976'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(size == 1 || size == 4);
<a name='L3977'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;nbytes, size) &lt; 0)
<a name='L3978'>        <b>return</b> -1;
<a name='L3979'>
<a name='L3980'>    size = <a href='../S/2588.html#L3870' title='Defined at 3870 in Modules/_pickle.c.'>calc_binint</a>(nbytes, size);
<a name='L3981'>    <b>if</b> (size &lt; 0) <font color='red'>{</font>
<a name='L3982'>        <i><font color='green'>/* Corrupt or hostile pickle -- we never write one like this */</font></i>
<a name='L3983'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError,
<a name='L3984'>                        "LONG pickle has negative byte count");
<a name='L3985'>        <b>return</b> -1;
<a name='L3986'>    <font color='red'>}</font>
<a name='L3987'>
<a name='L3988'>    <b>if</b> (size == 0)
<a name='L3989'>        <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0L);
<a name='L3990'>    <b>else</b> <font color='red'>{</font>
<a name='L3991'>        <i><font color='green'>/* Read the raw little-endian bytes and convert. */</font></i>
<a name='L3992'>        <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;pdata, size) &lt; 0)
<a name='L3993'>            <b>return</b> -1;
<a name='L3994'>        <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L683' title='Defined at 683 in Objects/longobject.c.'>_PyLong_FromByteArray</a>((<b>unsigned</b> <b>char</b> *)pdata, (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)size,
<a name='L3995'>                                      1 <i><font color='green'>/* little endian */</font></i> , 1 <i><font color='green'>/* signed */</font></i> );
<a name='L3996'>    <font color='red'>}</font>
<a name='L3997'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3998'>        <b>return</b> -1;
<a name='L3999'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L4000'>    <b>return</b> 0;
<a name='L4001'><font color='red'>}</font>
<a name='L4002'>
<a name='L4003'><b>static</b> <b>int</b>
<a name='L4004'><a href='../S/2588.html#L5217' title='Refered from 5217 in Modules/_pickle.c.'>load_float</a>(UnpicklerObject *self)
<a name='L4005'><font color='red'>{</font>
<a name='L4006'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4007'>    <b>char</b> *endptr, *s;
<a name='L4008'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L4009'>    <b>double</b> d;
<a name='L4010'>
<a name='L4011'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L4012'>        <b>return</b> -1;
<a name='L4013'>    <b>if</b> (len &lt; 2)
<a name='L4014'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4015'>
<a name='L4016'>    errno = 0;
<a name='L4017'>    d = <a href='../S/3136.html#L298' title='Defined at 298 in Python/pystrtod.c.'>PyOS_string_to_double</a>(s, &amp;endptr, PyExc_OverflowError);
<a name='L4018'>    <b>if</b> (d == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4019'>        <b>return</b> -1;
<a name='L4020'>    <b>if</b> ((endptr[0] != '\n') &amp;&amp; (endptr[0] != '\0')) <font color='red'>{</font>
<a name='L4021'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "could not convert string to float");
<a name='L4022'>        <b>return</b> -1;
<a name='L4023'>    <font color='red'>}</font>
<a name='L4024'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(d);
<a name='L4025'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4026'>        <b>return</b> -1;
<a name='L4027'>
<a name='L4028'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L4029'>    <b>return</b> 0;
<a name='L4030'><font color='red'>}</font>
<a name='L4031'>
<a name='L4032'><b>static</b> <b>int</b>
<a name='L4033'><a href='../S/2588.html#L5218' title='Refered from 5218 in Modules/_pickle.c.'>load_binfloat</a>(UnpicklerObject *self)
<a name='L4034'><font color='red'>{</font>
<a name='L4035'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4036'>    <b>double</b> x;
<a name='L4037'>    <b>char</b> *s;
<a name='L4038'>
<a name='L4039'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 8) &lt; 0)
<a name='L4040'>        <b>return</b> -1;
<a name='L4041'>
<a name='L4042'>    x = <a href='../S/2791.html#L2356' title='Defined at 2356 in Objects/floatobject.c.'>_PyFloat_Unpack8</a>((<b>unsigned</b> <b>char</b> *)s, 0);
<a name='L4043'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4044'>        <b>return</b> -1;
<a name='L4045'>
<a name='L4046'>    <b>if</b> ((<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4047'>        <b>return</b> -1;
<a name='L4048'>
<a name='L4049'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L4050'>    <b>return</b> 0;
<a name='L4051'><font color='red'>}</font>
<a name='L4052'>
<a name='L4053'><b>static</b> <b>int</b>
<a name='L4054'><a href='../S/2588.html#L5223' title='Refered from 5223 in Modules/_pickle.c.'>load_string</a>(UnpicklerObject *self)
<a name='L4055'><font color='red'>{</font>
<a name='L4056'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L4057'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4058'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L4059'>    <b>char</b> *s, *p;
<a name='L4060'>
<a name='L4061'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L4062'>        <b>return</b> -1;
<a name='L4063'>    <b>if</b> (len &lt; 3)
<a name='L4064'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4065'>    <b>if</b> ((s = <a href='../D/11408.html' title='Multiple defined in 2 places.'>strdup</a>(s)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4066'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L4067'>        <b>return</b> -1;
<a name='L4068'>    <font color='red'>}</font>
<a name='L4069'>
<a name='L4070'>    <i><font color='green'>/* Strip outermost quotes */</font></i>
<a name='L4071'>    <b>while</b> (s[len - 1] &lt;= ' ')
<a name='L4072'>        len--;
<a name='L4073'>    <b>if</b> (s[0] == '"' &amp;&amp; s[len - 1] == '"') <font color='red'>{</font>
<a name='L4074'>        s[len - 1] = '\0';
<a name='L4075'>        p = s + 1;
<a name='L4076'>        len -= 2;
<a name='L4077'>    <font color='red'>}</font>
<a name='L4078'>    <b>else</b> <b>if</b> (s[0] == '\'' &amp;&amp; s[len - 1] == '\'') <font color='red'>{</font>
<a name='L4079'>        s[len - 1] = '\0';
<a name='L4080'>        p = s + 1;
<a name='L4081'>        len -= 2;
<a name='L4082'>    <font color='red'>}</font>
<a name='L4083'>    <b>else</b> <font color='red'>{</font>
<a name='L4084'>        free(s);
<a name='L4085'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "insecure string pickle");
<a name='L4086'>        <b>return</b> -1;
<a name='L4087'>    <font color='red'>}</font>
<a name='L4088'>
<a name='L4089'>    <i><font color='green'>/* Use the PyBytes API to decode the string, since that is what is used</font></i>
<a name='L4090'><i><font color='green'>       to encode, and then coerce the result to Unicode. */</font></i>
<a name='L4091'>    <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../S/2779.html#L370' title='Defined at 370 in Objects/bytesobject.c.'>PyBytes_DecodeEscape</a>(p, len, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4092'>    free(s);
<a name='L4093'>    <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4094'>        <b>return</b> -1;
<a name='L4095'>    str = <a href='../D/4007.html' title='Multiple defined in 3 places.'>PyUnicode_FromEncodedObject</a>(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>, self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, self-&gt;errors);
<a name='L4096'>    Py_DECREF(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L4097'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4098'>        <b>return</b> -1;
<a name='L4099'>
<a name='L4100'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, str, -1);
<a name='L4101'>    <b>return</b> 0;
<a name='L4102'><font color='red'>}</font>
<a name='L4103'>
<a name='L4104'><b>static</b> <b>int</b>
<a name='L4105'><a href='../S/2588.html#L5219' title='Refered from 5219 in Modules/_pickle.c.'>load_binbytes</a>(UnpicklerObject *self)
<a name='L4106'><font color='red'>{</font>
<a name='L4107'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L4108'>    <b>long</b> x;
<a name='L4109'>    <b>char</b> *s;
<a name='L4110'>
<a name='L4111'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 4) &lt; 0)
<a name='L4112'>        <b>return</b> -1;
<a name='L4113'>
<a name='L4114'>    x = <a href='../S/2588.html#L3870' title='Defined at 3870 in Modules/_pickle.c.'>calc_binint</a>(s, 4);
<a name='L4115'>    <b>if</b> (x &lt; 0) <font color='red'>{</font>
<a name='L4116'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, 
<a name='L4117'>                        "BINBYTES pickle has negative byte count");
<a name='L4118'>        <b>return</b> -1;
<a name='L4119'>    <font color='red'>}</font>
<a name='L4120'>
<a name='L4121'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, x) &lt; 0)
<a name='L4122'>        <b>return</b> -1;
<a name='L4123'>    <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(s, x);
<a name='L4124'>    <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4125'>        <b>return</b> -1;
<a name='L4126'>
<a name='L4127'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>, -1);
<a name='L4128'>    <b>return</b> 0;
<a name='L4129'><font color='red'>}</font>
<a name='L4130'>
<a name='L4131'><b>static</b> <b>int</b>
<a name='L4132'><a href='../S/2588.html#L5220' title='Refered from 5220 in Modules/_pickle.c.'>load_short_binbytes</a>(UnpicklerObject *self)
<a name='L4133'><font color='red'>{</font>
<a name='L4134'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L4135'>    <b>unsigned</b> <b>char</b> x;
<a name='L4136'>    <b>char</b> *s;
<a name='L4137'>
<a name='L4138'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 1) &lt; 0)
<a name='L4139'>        <b>return</b> -1;
<a name='L4140'>
<a name='L4141'>    x = (<b>unsigned</b> <b>char</b>)s[0];
<a name='L4142'>
<a name='L4143'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, x) &lt; 0)
<a name='L4144'>        <b>return</b> -1;
<a name='L4145'>
<a name='L4146'>    <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(s, x);
<a name='L4147'>    <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4148'>        <b>return</b> -1;
<a name='L4149'>
<a name='L4150'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>, -1);
<a name='L4151'>    <b>return</b> 0;
<a name='L4152'><font color='red'>}</font>
<a name='L4153'>
<a name='L4154'><b>static</b> <b>int</b>
<a name='L4155'><a href='../S/2588.html#L5221' title='Refered from 5221 in Modules/_pickle.c.'>load_binstring</a>(UnpicklerObject *self)
<a name='L4156'><font color='red'>{</font>
<a name='L4157'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str;
<a name='L4158'>    <b>long</b> x;
<a name='L4159'>    <b>char</b> *s;
<a name='L4160'>
<a name='L4161'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 4) &lt; 0)
<a name='L4162'>        <b>return</b> -1;
<a name='L4163'>
<a name='L4164'>    x = <a href='../S/2588.html#L3870' title='Defined at 3870 in Modules/_pickle.c.'>calc_binint</a>(s, 4);
<a name='L4165'>    <b>if</b> (x &lt; 0) <font color='red'>{</font>
<a name='L4166'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, 
<a name='L4167'>                        "BINSTRING pickle has negative byte count");
<a name='L4168'>        <b>return</b> -1;
<a name='L4169'>    <font color='red'>}</font>
<a name='L4170'>
<a name='L4171'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, x) &lt; 0)
<a name='L4172'>        <b>return</b> -1;
<a name='L4173'>
<a name='L4174'>    <i><font color='green'>/* Convert Python 2.x strings to unicode. */</font></i>
<a name='L4175'>    str = <a href='../D/3972.html' title='Multiple defined in 3 places.'>PyUnicode_Decode</a>(s, x, self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, self-&gt;errors);
<a name='L4176'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4177'>        <b>return</b> -1;
<a name='L4178'>
<a name='L4179'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, str, -1);
<a name='L4180'>    <b>return</b> 0;
<a name='L4181'><font color='red'>}</font>
<a name='L4182'>
<a name='L4183'><b>static</b> <b>int</b>
<a name='L4184'><a href='../S/2588.html#L5222' title='Refered from 5222 in Modules/_pickle.c.'>load_short_binstring</a>(UnpicklerObject *self)
<a name='L4185'><font color='red'>{</font>
<a name='L4186'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str;
<a name='L4187'>    <b>unsigned</b> <b>char</b> x;
<a name='L4188'>    <b>char</b> *s;
<a name='L4189'>
<a name='L4190'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 1) &lt; 0)
<a name='L4191'>        <b>return</b> -1;
<a name='L4192'>
<a name='L4193'>    x = (<b>unsigned</b> <b>char</b>)s[0];
<a name='L4194'>
<a name='L4195'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, x) &lt; 0)
<a name='L4196'>        <b>return</b> -1;
<a name='L4197'>
<a name='L4198'>    <i><font color='green'>/* Convert Python 2.x strings to unicode. */</font></i>
<a name='L4199'>    str = <a href='../D/3972.html' title='Multiple defined in 3 places.'>PyUnicode_Decode</a>(s, x, self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, self-&gt;errors);
<a name='L4200'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4201'>        <b>return</b> -1;
<a name='L4202'>
<a name='L4203'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, str, -1);
<a name='L4204'>    <b>return</b> 0;
<a name='L4205'><font color='red'>}</font>
<a name='L4206'>
<a name='L4207'><b>static</b> <b>int</b>
<a name='L4208'><a href='../S/2588.html#L5224' title='Refered from 5224 in Modules/_pickle.c.'>load_unicode</a>(UnpicklerObject *self)
<a name='L4209'><font color='red'>{</font>
<a name='L4210'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str;
<a name='L4211'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L4212'>    <b>char</b> *s;
<a name='L4213'>
<a name='L4214'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L4215'>        <b>return</b> -1;
<a name='L4216'>    <b>if</b> (len &lt; 1)
<a name='L4217'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4218'>
<a name='L4219'>    str = <a href='../D/3980.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeRawUnicodeEscape</a>(s, len - 1, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4220'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4221'>        <b>return</b> -1;
<a name='L4222'>
<a name='L4223'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, str, -1);
<a name='L4224'>    <b>return</b> 0;
<a name='L4225'><font color='red'>}</font>
<a name='L4226'>
<a name='L4227'><b>static</b> <b>int</b>
<a name='L4228'><a href='../S/2588.html#L5225' title='Refered from 5225 in Modules/_pickle.c.'>load_binunicode</a>(UnpicklerObject *self)
<a name='L4229'><font color='red'>{</font>
<a name='L4230'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str;
<a name='L4231'>    <b>long</b> size;
<a name='L4232'>    <b>char</b> *s;
<a name='L4233'>
<a name='L4234'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 4) &lt; 0)
<a name='L4235'>        <b>return</b> -1;
<a name='L4236'>
<a name='L4237'>    size = <a href='../S/2588.html#L3870' title='Defined at 3870 in Modules/_pickle.c.'>calc_binint</a>(s, 4);
<a name='L4238'>    <b>if</b> (size &lt; 0) <font color='red'>{</font>
<a name='L4239'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, 
<a name='L4240'>                        "BINUNICODE pickle has negative byte count");
<a name='L4241'>        <b>return</b> -1;
<a name='L4242'>    <font color='red'>}</font>
<a name='L4243'>
<a name='L4244'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, size) &lt; 0)
<a name='L4245'>        <b>return</b> -1;
<a name='L4246'>
<a name='L4247'>    str = <a href='../D/3987.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF8</a>(s, size, "surrogatepass");
<a name='L4248'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4249'>        <b>return</b> -1;
<a name='L4250'>
<a name='L4251'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, str, -1);
<a name='L4252'>    <b>return</b> 0;
<a name='L4253'><font color='red'>}</font>
<a name='L4254'>
<a name='L4255'><b>static</b> <b>int</b>
<a name='L4256'><a href='../S/2588.html#L5230' title='Refered from 5230 in Modules/_pickle.c.'>load_tuple</a>(UnpicklerObject *self)
<a name='L4257'><font color='red'>{</font>
<a name='L4258'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tuple;
<a name='L4259'>    <b>int</b> i;
<a name='L4260'>
<a name='L4261'>    <b>if</b> ((i = <a href='../S/2588.html#L3787' title='Defined at 3787 in Modules/_pickle.c.'>marker</a>(self)) &lt; 0)
<a name='L4262'>        <b>return</b> -1;
<a name='L4263'>
<a name='L4264'>    tuple = <a href='../S/2588.html#L271' title='Defined at 271 in Modules/_pickle.c.'>Pdata_poptuple</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, i);
<a name='L4265'>    <b>if</b> (tuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4266'>        <b>return</b> -1;
<a name='L4267'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, tuple, -1);
<a name='L4268'>    <b>return</b> 0;
<a name='L4269'><font color='red'>}</font>
<a name='L4270'>
<a name='L4271'><b>static</b> <b>int</b>
<a name='L4272'><a href='../R/8699.html' title='Multiple refered from 4 places.'>load_counted_tuple</a>(UnpicklerObject *self, <b>int</b> len)
<a name='L4273'><font color='red'>{</font>
<a name='L4274'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tuple;
<a name='L4275'>
<a name='L4276'>    tuple = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(len);
<a name='L4277'>    <b>if</b> (tuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4278'>        <b>return</b> -1;
<a name='L4279'>
<a name='L4280'>    <b>while</b> (--len &gt;= 0) <font color='red'>{</font>
<a name='L4281'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item;
<a name='L4282'>
<a name='L4283'>        <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, item);
<a name='L4284'>        <b>if</b> (item == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4285'>            <b>return</b> -1;
<a name='L4286'>        PyTuple_SET_ITEM(tuple, len, item);
<a name='L4287'>    <font color='red'>}</font>
<a name='L4288'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, tuple, -1);
<a name='L4289'>    <b>return</b> 0;
<a name='L4290'><font color='red'>}</font>
<a name='L4291'>
<a name='L4292'><b>static</b> <b>int</b>
<a name='L4293'><a href='../S/2588.html#L5231' title='Refered from 5231 in Modules/_pickle.c.'>load_empty_list</a>(UnpicklerObject *self)
<a name='L4294'><font color='red'>{</font>
<a name='L4295'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *list;
<a name='L4296'>
<a name='L4297'>    <b>if</b> ((list = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4298'>        <b>return</b> -1;
<a name='L4299'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, list, -1);
<a name='L4300'>    <b>return</b> 0;
<a name='L4301'><font color='red'>}</font>
<a name='L4302'>
<a name='L4303'><b>static</b> <b>int</b>
<a name='L4304'><a href='../S/2588.html#L5233' title='Refered from 5233 in Modules/_pickle.c.'>load_empty_dict</a>(UnpicklerObject *self)
<a name='L4305'><font color='red'>{</font>
<a name='L4306'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dict;
<a name='L4307'>
<a name='L4308'>    <b>if</b> ((dict = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>()) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4309'>        <b>return</b> -1;
<a name='L4310'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, dict, -1);
<a name='L4311'>    <b>return</b> 0;
<a name='L4312'><font color='red'>}</font>
<a name='L4313'>
<a name='L4314'><b>static</b> <b>int</b>
<a name='L4315'><a href='../S/2588.html#L5232' title='Refered from 5232 in Modules/_pickle.c.'>load_list</a>(UnpicklerObject *self)
<a name='L4316'><font color='red'>{</font>
<a name='L4317'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *list;
<a name='L4318'>    <b>int</b> i;
<a name='L4319'>
<a name='L4320'>    <b>if</b> ((i = <a href='../S/2588.html#L3787' title='Defined at 3787 in Modules/_pickle.c.'>marker</a>(self)) &lt; 0)
<a name='L4321'>        <b>return</b> -1;
<a name='L4322'>
<a name='L4323'>    list = <a href='../S/2588.html#L288' title='Defined at 288 in Modules/_pickle.c.'>Pdata_poplist</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, i);
<a name='L4324'>    <b>if</b> (list == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4325'>        <b>return</b> -1;
<a name='L4326'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, list, -1);
<a name='L4327'>    <b>return</b> 0;
<a name='L4328'><font color='red'>}</font>
<a name='L4329'>
<a name='L4330'><b>static</b> <b>int</b>
<a name='L4331'><a href='../S/2588.html#L5234' title='Refered from 5234 in Modules/_pickle.c.'>load_dict</a>(UnpicklerObject *self)
<a name='L4332'><font color='red'>{</font>
<a name='L4333'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dict, *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4334'>    <b>int</b> i, j, k;
<a name='L4335'>
<a name='L4336'>    <b>if</b> ((i = <a href='../S/2588.html#L3787' title='Defined at 3787 in Modules/_pickle.c.'>marker</a>(self)) &lt; 0)
<a name='L4337'>        <b>return</b> -1;
<a name='L4338'>    j = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>);
<a name='L4339'>
<a name='L4340'>    <b>if</b> ((dict = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>()) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4341'>        <b>return</b> -1;
<a name='L4342'>
<a name='L4343'>    <b>for</b> (k = i + 1; k &lt; j; k += 2) <font color='red'>{</font>
<a name='L4344'>        <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[k - 1];
<a name='L4345'>        <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[k];
<a name='L4346'>        <b>if</b> (<a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(dict, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>) &lt; 0) <font color='red'>{</font>
<a name='L4347'>            Py_DECREF(dict);
<a name='L4348'>            <b>return</b> -1;
<a name='L4349'>        <font color='red'>}</font>
<a name='L4350'>    <font color='red'>}</font>
<a name='L4351'>    <a href='../S/2588.html#L193' title='Defined at 193 in Modules/_pickle.c.'>Pdata_clear</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, i);
<a name='L4352'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, dict, -1);
<a name='L4353'>    <b>return</b> 0;
<a name='L4354'><font color='red'>}</font>
<a name='L4355'>
<a name='L4356'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4357'><a href='../R/8434.html' title='Multiple refered from 2 places.'>instantiate</a>(PyObject *cls, PyObject *args)
<a name='L4358'><font color='red'>{</font>
<a name='L4359'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4360'>    <i><font color='green'>/* Caller must assure args are a tuple.  Normally, args come from</font></i>
<a name='L4361'><i><font color='green'>       Pdata_poptuple which packs objects from the top of the stack</font></i>
<a name='L4362'><i><font color='green'>       into a newly created tuple. */</font></i>
<a name='L4363'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>));
<a name='L4364'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) &gt; 0 || !PyType_Check(cls) ||
<a name='L4365'>        <a href='../S/2803.html#L794' title='Defined at 794 in Objects/object.c.'>PyObject_HasAttrString</a>(cls, "__getinitargs__")) <font color='red'>{</font>
<a name='L4366'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L2135' title='Defined at 2135 in Objects/abstract.c.'>PyObject_CallObject</a>(cls, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L4367'>    <font color='red'>}</font>
<a name='L4368'>    <b>else</b> <font color='red'>{</font>
<a name='L4369'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(cls, "__new__", "O", cls);
<a name='L4370'>    <font color='red'>}</font>
<a name='L4371'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L4372'><font color='red'>}</font>
<a name='L4373'>
<a name='L4374'><b>static</b> <b>int</b>
<a name='L4375'><a href='../S/2588.html#L5235' title='Refered from 5235 in Modules/_pickle.c.'>load_obj</a>(UnpicklerObject *self)
<a name='L4376'><font color='red'>{</font>
<a name='L4377'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cls, *<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, *obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4378'>    <b>int</b> i;
<a name='L4379'>
<a name='L4380'>    <b>if</b> ((i = <a href='../S/2588.html#L3787' title='Defined at 3787 in Modules/_pickle.c.'>marker</a>(self)) &lt; 0)
<a name='L4381'>        <b>return</b> -1;
<a name='L4382'>
<a name='L4383'>    <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> = <a href='../S/2588.html#L271' title='Defined at 271 in Modules/_pickle.c.'>Pdata_poptuple</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, i + 1);
<a name='L4384'>    <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4385'>        <b>return</b> -1;
<a name='L4386'>
<a name='L4387'>    <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, cls);
<a name='L4388'>    <b>if</b> (cls) <font color='red'>{</font>
<a name='L4389'>        obj = <a href='../S/2588.html#L4357' title='Defined at 4357 in Modules/_pickle.c.'>instantiate</a>(cls, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L4390'>        Py_DECREF(cls);
<a name='L4391'>    <font color='red'>}</font>
<a name='L4392'>    Py_DECREF(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L4393'>    <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4394'>        <b>return</b> -1;
<a name='L4395'>
<a name='L4396'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, obj, -1);
<a name='L4397'>    <b>return</b> 0;
<a name='L4398'><font color='red'>}</font>
<a name='L4399'>
<a name='L4400'><b>static</b> <b>int</b>
<a name='L4401'><a href='../S/2588.html#L5236' title='Refered from 5236 in Modules/_pickle.c.'>load_inst</a>(UnpicklerObject *self)
<a name='L4402'><font color='red'>{</font>
<a name='L4403'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cls = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4404'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4405'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4406'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_name;
<a name='L4407'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2824.html#L1280' title='Defined at 1280 in Objects/typeobject.c.'>class_name</a>;
<a name='L4408'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L4409'>    <b>int</b> i;
<a name='L4410'>    <b>char</b> *s;
<a name='L4411'>
<a name='L4412'>    <b>if</b> ((i = <a href='../S/2588.html#L3787' title='Defined at 3787 in Modules/_pickle.c.'>marker</a>(self)) &lt; 0)
<a name='L4413'>        <b>return</b> -1;
<a name='L4414'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L4415'>        <b>return</b> -1;
<a name='L4416'>    <b>if</b> (len &lt; 2)
<a name='L4417'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4418'>
<a name='L4419'>    <i><font color='green'>/* Here it is safe to use PyUnicode_DecodeASCII(), even though non-ASCII</font></i>
<a name='L4420'><i><font color='green'>       identifiers are permitted in Python 3.0, since the INST opcode is only</font></i>
<a name='L4421'><i><font color='green'>       supported by older protocols on Python 2.x. */</font></i>
<a name='L4422'>    module_name = <a href='../D/3973.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeASCII</a>(s, len - 1, "strict");
<a name='L4423'>    <b>if</b> (module_name == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4424'>        <b>return</b> -1;
<a name='L4425'>
<a name='L4426'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &gt;= 0) <font color='red'>{</font>
<a name='L4427'>        <b>if</b> (len &lt; 2)
<a name='L4428'>            <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4429'>        <a href='../S/2824.html#L1280' title='Defined at 1280 in Objects/typeobject.c.'>class_name</a> = <a href='../D/3973.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeASCII</a>(s, len - 1, "strict");
<a name='L4430'>        <b>if</b> (<a href='../S/2824.html#L1280' title='Defined at 1280 in Objects/typeobject.c.'>class_name</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4431'>            cls = <a href='../S/2588.html#L3780' title='Defined at 3780 in Modules/_pickle.c.'>find_class</a>(self, module_name, <a href='../S/2824.html#L1280' title='Defined at 1280 in Objects/typeobject.c.'>class_name</a>);
<a name='L4432'>            Py_DECREF(<a href='../S/2824.html#L1280' title='Defined at 1280 in Objects/typeobject.c.'>class_name</a>);
<a name='L4433'>        <font color='red'>}</font>
<a name='L4434'>    <font color='red'>}</font>
<a name='L4435'>    Py_DECREF(module_name);
<a name='L4436'>
<a name='L4437'>    <b>if</b> (cls == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4438'>        <b>return</b> -1;
<a name='L4439'>
<a name='L4440'>    <b>if</b> ((<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> = <a href='../S/2588.html#L271' title='Defined at 271 in Modules/_pickle.c.'>Pdata_poptuple</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, i)) != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4441'>        obj = <a href='../S/2588.html#L4357' title='Defined at 4357 in Modules/_pickle.c.'>instantiate</a>(cls, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L4442'>        Py_DECREF(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L4443'>    <font color='red'>}</font>
<a name='L4444'>    Py_DECREF(cls);
<a name='L4445'>
<a name='L4446'>    <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4447'>        <b>return</b> -1;
<a name='L4448'>
<a name='L4449'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, obj, -1);
<a name='L4450'>    <b>return</b> 0;
<a name='L4451'><font color='red'>}</font>
<a name='L4452'>
<a name='L4453'><b>static</b> <b>int</b>
<a name='L4454'><a href='../S/2588.html#L5237' title='Refered from 5237 in Modules/_pickle.c.'>load_newobj</a>(UnpicklerObject *self)
<a name='L4455'><font color='red'>{</font>
<a name='L4456'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4457'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *clsraw = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4458'>    <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> *cls;          <i><font color='green'>/* clsraw cast to its true type */</font></i>
<a name='L4459'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;
<a name='L4460'>
<a name='L4461'>    <i><font color='green'>/* Stack is ... cls argtuple, and we want to call</font></i>
<a name='L4462'><i><font color='green'>     * cls.__new__(cls, *argtuple).</font></i>
<a name='L4463'><i><font color='green'>     */</font></i>
<a name='L4464'>    <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L4465'>    <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4466'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4467'>    <b>if</b> (!PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L4468'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "NEWOBJ expected an arg " "tuple.");
<a name='L4469'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4470'>    <font color='red'>}</font>
<a name='L4471'>
<a name='L4472'>    <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, clsraw);
<a name='L4473'>    cls = (<a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> *)clsraw;
<a name='L4474'>    <b>if</b> (cls == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4475'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4476'>    <b>if</b> (!PyType_Check(cls)) <font color='red'>{</font>
<a name='L4477'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "NEWOBJ class argument "
<a name='L4478'>                        "isn't a type object");
<a name='L4479'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4480'>    <font color='red'>}</font>
<a name='L4481'>    <b>if</b> (cls-&gt;tp_new == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4482'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "NEWOBJ class argument "
<a name='L4483'>                        "has NULL tp_new");
<a name='L4484'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4485'>    <font color='red'>}</font>
<a name='L4486'>
<a name='L4487'>    <i><font color='green'>/* Call __new__. */</font></i>
<a name='L4488'>    obj = cls-&gt;tp_new(cls, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4489'>    <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4490'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4491'>
<a name='L4492'>    Py_DECREF(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L4493'>    Py_DECREF(clsraw);
<a name='L4494'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, obj, -1);
<a name='L4495'>    <b>return</b> 0;
<a name='L4496'>
<a name='L4497'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L4498'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L4499'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(clsraw);
<a name='L4500'>    <b>return</b> -1;
<a name='L4501'><font color='red'>}</font>
<a name='L4502'>
<a name='L4503'><b>static</b> <b>int</b>
<a name='L4504'><a href='../R/8707.html' title='Multiple refered from 2 places.'>load_global</a>(UnpicklerObject *self)
<a name='L4505'><font color='red'>{</font>
<a name='L4506'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *global = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4507'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_name;
<a name='L4508'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *global_name;
<a name='L4509'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L4510'>    <b>char</b> *s;
<a name='L4511'>
<a name='L4512'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L4513'>        <b>return</b> -1;
<a name='L4514'>    <b>if</b> (len &lt; 2)
<a name='L4515'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4516'>    module_name = <a href='../D/3987.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF8</a>(s, len - 1, "strict");
<a name='L4517'>    <b>if</b> (!module_name)
<a name='L4518'>        <b>return</b> -1;
<a name='L4519'>
<a name='L4520'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &gt;= 0) <font color='red'>{</font>
<a name='L4521'>        <b>if</b> (len &lt; 2) <font color='red'>{</font>
<a name='L4522'>            Py_DECREF(module_name);
<a name='L4523'>            <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4524'>        <font color='red'>}</font>
<a name='L4525'>        global_name = <a href='../D/3987.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF8</a>(s, len - 1, "strict");
<a name='L4526'>        <b>if</b> (global_name) <font color='red'>{</font>
<a name='L4527'>            global = <a href='../S/2588.html#L3780' title='Defined at 3780 in Modules/_pickle.c.'>find_class</a>(self, module_name, global_name);
<a name='L4528'>            Py_DECREF(global_name);
<a name='L4529'>        <font color='red'>}</font>
<a name='L4530'>    <font color='red'>}</font>
<a name='L4531'>    Py_DECREF(module_name);
<a name='L4532'>
<a name='L4533'>    <b>if</b> (global == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4534'>        <b>return</b> -1;
<a name='L4535'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, global, -1);
<a name='L4536'>    <b>return</b> 0;
<a name='L4537'><font color='red'>}</font>
<a name='L4538'>
<a name='L4539'><b>static</b> <b>int</b>
<a name='L4540'><a href='../S/2588.html#L5254' title='Refered from 5254 in Modules/_pickle.c.'>load_persid</a>(UnpicklerObject *self)
<a name='L4541'><font color='red'>{</font>
<a name='L4542'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pid;
<a name='L4543'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L4544'>    <b>char</b> *s;
<a name='L4545'>
<a name='L4546'>    <b>if</b> (self-&gt;pers_func) <font color='red'>{</font>
<a name='L4547'>        <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L4548'>            <b>return</b> -1;
<a name='L4549'>        <b>if</b> (len &lt; 2)
<a name='L4550'>            <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4551'>
<a name='L4552'>        pid = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(s, len - 1);
<a name='L4553'>        <b>if</b> (pid == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4554'>            <b>return</b> -1;
<a name='L4555'>
<a name='L4556'>        <i><font color='green'>/* Ugh... this does not leak since _Unpickler_FastCall() steals the</font></i>
<a name='L4557'><i><font color='green'>           reference to pid first. */</font></i>
<a name='L4558'>        pid = <a href='../S/2588.html#L843' title='Defined at 843 in Modules/_pickle.c.'>_Unpickler_FastCall</a>(self, self-&gt;pers_func, pid);
<a name='L4559'>        <b>if</b> (pid == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4560'>            <b>return</b> -1;
<a name='L4561'>
<a name='L4562'>        <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, pid, -1);
<a name='L4563'>        <b>return</b> 0;
<a name='L4564'>    <font color='red'>}</font>
<a name='L4565'>    <b>else</b> <font color='red'>{</font>
<a name='L4566'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError,
<a name='L4567'>                        "A load persistent id instruction was encountered,\n"
<a name='L4568'>                        "but no persistent_load function was specified.");
<a name='L4569'>        <b>return</b> -1;
<a name='L4570'>    <font color='red'>}</font>
<a name='L4571'><font color='red'>}</font>
<a name='L4572'>
<a name='L4573'><b>static</b> <b>int</b>
<a name='L4574'><a href='../S/2588.html#L5255' title='Refered from 5255 in Modules/_pickle.c.'>load_binpersid</a>(UnpicklerObject *self)
<a name='L4575'><font color='red'>{</font>
<a name='L4576'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pid;
<a name='L4577'>
<a name='L4578'>    <b>if</b> (self-&gt;pers_func) <font color='red'>{</font>
<a name='L4579'>        <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, pid);
<a name='L4580'>        <b>if</b> (pid == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4581'>            <b>return</b> -1;
<a name='L4582'>
<a name='L4583'>        <i><font color='green'>/* Ugh... this does not leak since _Unpickler_FastCall() steals the</font></i>
<a name='L4584'><i><font color='green'>           reference to pid first. */</font></i>
<a name='L4585'>        pid = <a href='../S/2588.html#L843' title='Defined at 843 in Modules/_pickle.c.'>_Unpickler_FastCall</a>(self, self-&gt;pers_func, pid);
<a name='L4586'>        <b>if</b> (pid == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4587'>            <b>return</b> -1;
<a name='L4588'>
<a name='L4589'>        <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, pid, -1);
<a name='L4590'>        <b>return</b> 0;
<a name='L4591'>    <font color='red'>}</font>
<a name='L4592'>    <b>else</b> <font color='red'>{</font>
<a name='L4593'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError,
<a name='L4594'>                        "A load persistent id instruction was encountered,\n"
<a name='L4595'>                        "but no persistent_load function was specified.");
<a name='L4596'>        <b>return</b> -1;
<a name='L4597'>    <font color='red'>}</font>
<a name='L4598'><font color='red'>}</font>
<a name='L4599'>
<a name='L4600'><b>static</b> <b>int</b>
<a name='L4601'><a href='../S/2588.html#L5250' title='Refered from 5250 in Modules/_pickle.c.'>load_pop</a>(UnpicklerObject *self)
<a name='L4602'><font color='red'>{</font>
<a name='L4603'>    <b>int</b> len = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>);
<a name='L4604'>
<a name='L4605'>    <i><font color='green'>/* Note that we split the (pickle.py) stack into two stacks,</font></i>
<a name='L4606'><i><font color='green'>     * an object stack and a mark stack. We have to be clever and</font></i>
<a name='L4607'><i><font color='green'>     * pop the right one. We do this by looking at the top of the</font></i>
<a name='L4608'><i><font color='green'>     * mark stack first, and only signalling a stack underflow if</font></i>
<a name='L4609'><i><font color='green'>     * the object stack is empty and the mark stack doesn't match</font></i>
<a name='L4610'><i><font color='green'>     * our expectations.</font></i>
<a name='L4611'><i><font color='green'>     */</font></i>
<a name='L4612'>    <b>if</b> (self-&gt;num_marks &gt; 0 &amp;&amp; self-&gt;marks[self-&gt;num_marks - 1] == len) <font color='red'>{</font>
<a name='L4613'>        self-&gt;num_marks--;
<a name='L4614'>    <font color='red'>}</font> <b>else</b> <b>if</b> (len &gt; 0) <font color='red'>{</font>
<a name='L4615'>        len--;
<a name='L4616'>        Py_DECREF(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[len]);
<a name='L4617'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) = len;
<a name='L4618'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L4619'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L4620'>    <font color='red'>}</font>
<a name='L4621'>    <b>return</b> 0;
<a name='L4622'><font color='red'>}</font>
<a name='L4623'>
<a name='L4624'><b>static</b> <b>int</b>
<a name='L4625'><a href='../S/2588.html#L5251' title='Refered from 5251 in Modules/_pickle.c.'>load_pop_mark</a>(UnpicklerObject *self)
<a name='L4626'><font color='red'>{</font>
<a name='L4627'>    <b>int</b> i;
<a name='L4628'>
<a name='L4629'>    <b>if</b> ((i = <a href='../S/2588.html#L3787' title='Defined at 3787 in Modules/_pickle.c.'>marker</a>(self)) &lt; 0)
<a name='L4630'>        <b>return</b> -1;
<a name='L4631'>
<a name='L4632'>    <a href='../S/2588.html#L193' title='Defined at 193 in Modules/_pickle.c.'>Pdata_clear</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, i);
<a name='L4633'>
<a name='L4634'>    <b>return</b> 0;
<a name='L4635'><font color='red'>}</font>
<a name='L4636'>
<a name='L4637'><b>static</b> <b>int</b>
<a name='L4638'><a href='../S/2588.html#L5242' title='Refered from 5242 in Modules/_pickle.c.'>load_dup</a>(UnpicklerObject *self)
<a name='L4639'><font color='red'>{</font>
<a name='L4640'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *last;
<a name='L4641'>    <b>int</b> len;
<a name='L4642'>
<a name='L4643'>    <b>if</b> ((len = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>)) &lt;= 0)
<a name='L4644'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L4645'>    last = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[len - 1];
<a name='L4646'>    <a href='../S/2588.html#L266' title='Defined at 266 in Modules/_pickle.c.'>PDATA_APPEND</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, last, -1);
<a name='L4647'>    <b>return</b> 0;
<a name='L4648'><font color='red'>}</font>
<a name='L4649'>
<a name='L4650'><b>static</b> <b>int</b>
<a name='L4651'><a href='../S/2588.html#L5245' title='Refered from 5245 in Modules/_pickle.c.'>load_get</a>(UnpicklerObject *self)
<a name='L4652'><font color='red'>{</font>
<a name='L4653'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4654'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx;
<a name='L4655'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L4656'>    <b>char</b> *s;
<a name='L4657'>
<a name='L4658'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L4659'>        <b>return</b> -1;
<a name='L4660'>    <b>if</b> (len &lt; 2)
<a name='L4661'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4662'>
<a name='L4663'>    <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L1853' title='Defined at 1853 in Objects/longobject.c.'>PyLong_FromString</a>(s, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 10);
<a name='L4664'>    <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4665'>        <b>return</b> -1;
<a name='L4666'>    idx = <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4667'>    <b>if</b> (idx == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L4668'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4669'>        <b>return</b> -1;
<a name='L4670'>    <font color='red'>}</font>
<a name='L4671'>
<a name='L4672'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2588.html#L1079' title='Defined at 1079 in Modules/_pickle.c.'>_Unpickler_MemoGet</a>(self, idx);
<a name='L4673'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4674'>        <b>if</b> (!<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4675'>            <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(PyExc_KeyError, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4676'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4677'>        <b>return</b> -1;
<a name='L4678'>    <font color='red'>}</font>
<a name='L4679'>    Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4680'>
<a name='L4681'>    <a href='../S/2588.html#L266' title='Defined at 266 in Modules/_pickle.c.'>PDATA_APPEND</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L4682'>    <b>return</b> 0;
<a name='L4683'><font color='red'>}</font>
<a name='L4684'>
<a name='L4685'><b>static</b> <b>int</b>
<a name='L4686'><a href='../S/2588.html#L5243' title='Refered from 5243 in Modules/_pickle.c.'>load_binget</a>(UnpicklerObject *self)
<a name='L4687'><font color='red'>{</font>
<a name='L4688'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4689'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx;
<a name='L4690'>    <b>char</b> *s;
<a name='L4691'>
<a name='L4692'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 1) &lt; 0)
<a name='L4693'>        <b>return</b> -1;
<a name='L4694'>
<a name='L4695'>    idx = <a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[0]);
<a name='L4696'>
<a name='L4697'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2588.html#L1079' title='Defined at 1079 in Modules/_pickle.c.'>_Unpickler_MemoGet</a>(self, idx);
<a name='L4698'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4699'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(idx);
<a name='L4700'>        <b>if</b> (!<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4701'>            <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(PyExc_KeyError, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4702'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4703'>        <b>return</b> -1;
<a name='L4704'>    <font color='red'>}</font>
<a name='L4705'>
<a name='L4706'>    <a href='../S/2588.html#L266' title='Defined at 266 in Modules/_pickle.c.'>PDATA_APPEND</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L4707'>    <b>return</b> 0;
<a name='L4708'><font color='red'>}</font>
<a name='L4709'>
<a name='L4710'><b>static</b> <b>int</b>
<a name='L4711'><a href='../S/2588.html#L5244' title='Refered from 5244 in Modules/_pickle.c.'>load_long_binget</a>(UnpicklerObject *self)
<a name='L4712'><font color='red'>{</font>
<a name='L4713'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4714'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx;
<a name='L4715'>    <b>char</b> *s;
<a name='L4716'>
<a name='L4717'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 4) &lt; 0)
<a name='L4718'>        <b>return</b> -1;
<a name='L4719'>
<a name='L4720'>    idx =  (<b>long</b>)<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[0]);
<a name='L4721'>    idx |= (<b>long</b>)<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[1]) &lt;&lt; 8;
<a name='L4722'>    idx |= (<b>long</b>)<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[2]) &lt;&lt; 16;
<a name='L4723'>    idx |= (<b>long</b>)<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[3]) &lt;&lt; 24;
<a name='L4724'>
<a name='L4725'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2588.html#L1079' title='Defined at 1079 in Modules/_pickle.c.'>_Unpickler_MemoGet</a>(self, idx);
<a name='L4726'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4727'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(idx);
<a name='L4728'>        <b>if</b> (!<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4729'>            <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(PyExc_KeyError, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4730'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4731'>        <b>return</b> -1;
<a name='L4732'>    <font color='red'>}</font>
<a name='L4733'>
<a name='L4734'>    <a href='../S/2588.html#L266' title='Defined at 266 in Modules/_pickle.c.'>PDATA_APPEND</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, -1);
<a name='L4735'>    <b>return</b> 0;
<a name='L4736'><font color='red'>}</font>
<a name='L4737'>
<a name='L4738'><i><font color='green'>/* Push an object from the extension registry (EXT[124]).  nbytes is</font></i>
<a name='L4739'><i><font color='green'> * the number of bytes following the opcode, holding the index (code) value.</font></i>
<a name='L4740'><i><font color='green'> */</font></i>
<a name='L4741'><b>static</b> <b>int</b>
<a name='L4742'><a href='../R/8704.html' title='Multiple refered from 3 places.'>load_extension</a>(UnpicklerObject *self, <b>int</b> nbytes)
<a name='L4743'><font color='red'>{</font>
<a name='L4744'>    <b>char</b> *codebytes;            <i><font color='green'>/* the nbytes bytes after the opcode */</font></i>
<a name='L4745'>    <b>long</b> <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>;                  <i><font color='green'>/* calc_binint returns long */</font></i>
<a name='L4746'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *py_code;          <i><font color='green'>/* code as a Python int */</font></i>
<a name='L4747'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;              <i><font color='green'>/* the object to push */</font></i>
<a name='L4748'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pair;             <i><font color='green'>/* (module_name, class_name) */</font></i>
<a name='L4749'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_name, *<a href='../S/2824.html#L1280' title='Defined at 1280 in Objects/typeobject.c.'>class_name</a>;
<a name='L4750'>
<a name='L4751'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(nbytes == 1 || nbytes == 2 || nbytes == 4);
<a name='L4752'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;codebytes, nbytes) &lt; 0)
<a name='L4753'>        <b>return</b> -1;
<a name='L4754'>    <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> = <a href='../S/2588.html#L3870' title='Defined at 3870 in Modules/_pickle.c.'>calc_binint</a>(codebytes, nbytes);
<a name='L4755'>    <b>if</b> (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &lt;= 0) <font color='red'>{</font>            <i><font color='green'>/* note that 0 is forbidden */</font></i>
<a name='L4756'>        <i><font color='green'>/* Corrupt or hostile pickle. */</font></i>
<a name='L4757'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "EXT specifies code &lt;= 0");
<a name='L4758'>        <b>return</b> -1;
<a name='L4759'>    <font color='red'>}</font>
<a name='L4760'>
<a name='L4761'>    <i><font color='green'>/* Look for the code in the cache. */</font></i>
<a name='L4762'>    py_code = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>);
<a name='L4763'>    <b>if</b> (py_code == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4764'>        <b>return</b> -1;
<a name='L4765'>    obj = <a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(extension_cache, py_code);
<a name='L4766'>    <b>if</b> (obj != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4767'>        <i><font color='green'>/* Bingo. */</font></i>
<a name='L4768'>        Py_DECREF(py_code);
<a name='L4769'>        <a href='../S/2588.html#L266' title='Defined at 266 in Modules/_pickle.c.'>PDATA_APPEND</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, obj, -1);
<a name='L4770'>        <b>return</b> 0;
<a name='L4771'>    <font color='red'>}</font>
<a name='L4772'>
<a name='L4773'>    <i><font color='green'>/* Look up the (module_name, class_name) pair. */</font></i>
<a name='L4774'>    pair = <a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(inverted_registry, py_code);
<a name='L4775'>    <b>if</b> (pair == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4776'>        Py_DECREF(py_code);
<a name='L4777'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError, "unregistered extension "
<a name='L4778'>                     "code %ld", <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>);
<a name='L4779'>        <b>return</b> -1;
<a name='L4780'>    <font color='red'>}</font>
<a name='L4781'>    <i><font color='green'>/* Since the extension registry is manipulable via Python code,</font></i>
<a name='L4782'><i><font color='green'>     * confirm that pair is really a 2-tuple of strings.</font></i>
<a name='L4783'><i><font color='green'>     */</font></i>
<a name='L4784'>    <b>if</b> (!PyTuple_Check(pair) || <a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(pair) != 2 ||
<a name='L4785'>        !PyUnicode_Check(module_name = PyTuple_GET_ITEM(pair, 0)) ||
<a name='L4786'>        !PyUnicode_Check(<a href='../S/2824.html#L1280' title='Defined at 1280 in Objects/typeobject.c.'>class_name</a> = PyTuple_GET_ITEM(pair, 1))) <font color='red'>{</font>
<a name='L4787'>        Py_DECREF(py_code);
<a name='L4788'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError, "_inverted_registry[%ld] "
<a name='L4789'>                     "isn't a 2-tuple of strings", <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>);
<a name='L4790'>        <b>return</b> -1;
<a name='L4791'>    <font color='red'>}</font>
<a name='L4792'>    <i><font color='green'>/* Load the object. */</font></i>
<a name='L4793'>    obj = <a href='../S/2588.html#L3780' title='Defined at 3780 in Modules/_pickle.c.'>find_class</a>(self, module_name, <a href='../S/2824.html#L1280' title='Defined at 1280 in Objects/typeobject.c.'>class_name</a>);
<a name='L4794'>    <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4795'>        Py_DECREF(py_code);
<a name='L4796'>        <b>return</b> -1;
<a name='L4797'>    <font color='red'>}</font>
<a name='L4798'>    <i><font color='green'>/* Cache code -&gt; obj. */</font></i>
<a name='L4799'>    <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> = <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(extension_cache, py_code, obj);
<a name='L4800'>    Py_DECREF(py_code);
<a name='L4801'>    <b>if</b> (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> &lt; 0) <font color='red'>{</font>
<a name='L4802'>        Py_DECREF(obj);
<a name='L4803'>        <b>return</b> -1;
<a name='L4804'>    <font color='red'>}</font>
<a name='L4805'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, obj, -1);
<a name='L4806'>    <b>return</b> 0;
<a name='L4807'><font color='red'>}</font>
<a name='L4808'>
<a name='L4809'><b>static</b> <b>int</b>
<a name='L4810'><a href='../S/2588.html#L5249' title='Refered from 5249 in Modules/_pickle.c.'>load_put</a>(UnpicklerObject *self)
<a name='L4811'><font color='red'>{</font>
<a name='L4812'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4813'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx;
<a name='L4814'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L4815'>    <b>char</b> *s;
<a name='L4816'>
<a name='L4817'>    <b>if</b> ((len = <a href='../S/2588.html#L1026' title='Defined at 1026 in Modules/_pickle.c.'>_Unpickler_Readline</a>(self, &amp;s)) &lt; 0)
<a name='L4818'>        <b>return</b> -1;
<a name='L4819'>    <b>if</b> (len &lt; 2)
<a name='L4820'>        <b>return</b> <a href='../S/2588.html#L3805' title='Defined at 3805 in Modules/_pickle.c.'>bad_readline</a>();
<a name='L4821'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) &lt;= 0)
<a name='L4822'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L4823'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) - 1];
<a name='L4824'>
<a name='L4825'>    <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L1853' title='Defined at 1853 in Objects/longobject.c.'>PyLong_FromString</a>(s, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 10);
<a name='L4826'>    <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4827'>        <b>return</b> -1;
<a name='L4828'>    idx = <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4829'>    Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L4830'>    <b>if</b> (idx == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4831'>        <b>return</b> -1;
<a name='L4832'>
<a name='L4833'>    <b>return</b> <a href='../S/2588.html#L1090' title='Defined at 1090 in Modules/_pickle.c.'>_Unpickler_MemoPut</a>(self, idx, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L4834'><font color='red'>}</font>
<a name='L4835'>
<a name='L4836'><b>static</b> <b>int</b>
<a name='L4837'><a href='../S/2588.html#L5247' title='Refered from 5247 in Modules/_pickle.c.'>load_binput</a>(UnpicklerObject *self)
<a name='L4838'><font color='red'>{</font>
<a name='L4839'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4840'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx;
<a name='L4841'>    <b>char</b> *s;
<a name='L4842'>
<a name='L4843'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 1) &lt; 0)
<a name='L4844'>        <b>return</b> -1;
<a name='L4845'>
<a name='L4846'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) &lt;= 0)
<a name='L4847'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L4848'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) - 1];
<a name='L4849'>
<a name='L4850'>    idx = <a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[0]);
<a name='L4851'>
<a name='L4852'>    <b>return</b> <a href='../S/2588.html#L1090' title='Defined at 1090 in Modules/_pickle.c.'>_Unpickler_MemoPut</a>(self, idx, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L4853'><font color='red'>}</font>
<a name='L4854'>
<a name='L4855'><b>static</b> <b>int</b>
<a name='L4856'><a href='../S/2588.html#L5248' title='Refered from 5248 in Modules/_pickle.c.'>load_long_binput</a>(UnpicklerObject *self)
<a name='L4857'><font color='red'>{</font>
<a name='L4858'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4859'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx;
<a name='L4860'>    <b>char</b> *s;
<a name='L4861'>
<a name='L4862'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 4) &lt; 0)
<a name='L4863'>        <b>return</b> -1;
<a name='L4864'>
<a name='L4865'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) &lt;= 0)
<a name='L4866'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L4867'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) - 1];
<a name='L4868'>
<a name='L4869'>    idx =  (<b>long</b>)<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[0]);
<a name='L4870'>    idx |= (<b>long</b>)<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[1]) &lt;&lt; 8;
<a name='L4871'>    idx |= (<b>long</b>)<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[2]) &lt;&lt; 16;
<a name='L4872'>    idx |= (<b>long</b>)<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(s[3]) &lt;&lt; 24;
<a name='L4873'>
<a name='L4874'>    <b>return</b> <a href='../S/2588.html#L1090' title='Defined at 1090 in Modules/_pickle.c.'>_Unpickler_MemoPut</a>(self, idx, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L4875'><font color='red'>}</font>
<a name='L4876'>
<a name='L4877'><b>static</b> <b>int</b>
<a name='L4878'><a href='../R/7423.html' title='Multiple refered from 2 places.'>do_append</a>(UnpicklerObject *self, <b>int</b> x)
<a name='L4879'><font color='red'>{</font>
<a name='L4880'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L4881'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *list;
<a name='L4882'>    <b>int</b> len, i;
<a name='L4883'>
<a name='L4884'>    len = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>);
<a name='L4885'>    <b>if</b> (x &gt; len || x &lt;= 0)
<a name='L4886'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L4887'>    <b>if</b> (len == x)  <i><font color='green'>/* nothing to do */</font></i>
<a name='L4888'>        <b>return</b> 0;
<a name='L4889'>
<a name='L4890'>    list = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[x - 1];
<a name='L4891'>
<a name='L4892'>    <b>if</b> (PyList_Check(list)) <font color='red'>{</font>
<a name='L4893'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *slice;
<a name='L4894'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> list_len;
<a name='L4895'>
<a name='L4896'>        slice = <a href='../S/2588.html#L288' title='Defined at 288 in Modules/_pickle.c.'>Pdata_poplist</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, x);
<a name='L4897'>        <b>if</b> (!slice)
<a name='L4898'>            <b>return</b> -1;
<a name='L4899'>        list_len = <a href='../S/534.html#L71' title='Defined at 71 in Include/listobject.h.'>PyList_GET_SIZE</a>(list);
<a name='L4900'>        i = <a href='../S/2796.html#L671' title='Defined at 671 in Objects/listobject.c.'>PyList_SetSlice</a>(list, list_len, list_len, slice);
<a name='L4901'>        Py_DECREF(slice);
<a name='L4902'>        <b>return</b> i;
<a name='L4903'>    <font color='red'>}</font>
<a name='L4904'>    <b>else</b> <font color='red'>{</font>
<a name='L4905'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *append_func;
<a name='L4906'>
<a name='L4907'>        append_func = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(list, "append");
<a name='L4908'>        <b>if</b> (append_func == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4909'>            <b>return</b> -1;
<a name='L4910'>        <b>for</b> (i = x; i &lt; len; i++) <font color='red'>{</font>
<a name='L4911'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L4912'>
<a name='L4913'>            <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[i];
<a name='L4914'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2588.html#L843' title='Defined at 843 in Modules/_pickle.c.'>_Unpickler_FastCall</a>(self, append_func, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L4915'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4916'>                <a href='../S/2588.html#L193' title='Defined at 193 in Modules/_pickle.c.'>Pdata_clear</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, i + 1);
<a name='L4917'>                <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) = x;
<a name='L4918'>                <b>return</b> -1;
<a name='L4919'>            <font color='red'>}</font>
<a name='L4920'>            Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4921'>        <font color='red'>}</font>
<a name='L4922'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) = x;
<a name='L4923'>    <font color='red'>}</font>
<a name='L4924'>
<a name='L4925'>    <b>return</b> 0;
<a name='L4926'><font color='red'>}</font>
<a name='L4927'>
<a name='L4928'><b>static</b> <b>int</b>
<a name='L4929'><a href='../S/2588.html#L5239' title='Refered from 5239 in Modules/_pickle.c.'>load_append</a>(UnpicklerObject *self)
<a name='L4930'><font color='red'>{</font>
<a name='L4931'>    <b>return</b> <a href='../S/2588.html#L4878' title='Defined at 4878 in Modules/_pickle.c.'>do_append</a>(self, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) - 1);
<a name='L4932'><font color='red'>}</font>
<a name='L4933'>
<a name='L4934'><b>static</b> <b>int</b>
<a name='L4935'><a href='../S/2588.html#L5240' title='Refered from 5240 in Modules/_pickle.c.'>load_appends</a>(UnpicklerObject *self)
<a name='L4936'><font color='red'>{</font>
<a name='L4937'>    <b>return</b> <a href='../S/2588.html#L4878' title='Defined at 4878 in Modules/_pickle.c.'>do_append</a>(self, <a href='../S/2588.html#L3787' title='Defined at 3787 in Modules/_pickle.c.'>marker</a>(self));
<a name='L4938'><font color='red'>}</font>
<a name='L4939'>
<a name='L4940'><b>static</b> <b>int</b>
<a name='L4941'><a href='../R/7449.html' title='Multiple refered from 2 places.'>do_setitems</a>(UnpicklerObject *self, <b>int</b> x)
<a name='L4942'><font color='red'>{</font>
<a name='L4943'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>;
<a name='L4944'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dict;
<a name='L4945'>    <b>int</b> len, i;
<a name='L4946'>    <b>int</b> status = 0;
<a name='L4947'>
<a name='L4948'>    len = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>);
<a name='L4949'>    <b>if</b> (x &gt; len || x &lt;= 0)
<a name='L4950'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L4951'>    <b>if</b> (len == x)  <i><font color='green'>/* nothing to do */</font></i>
<a name='L4952'>        <b>return</b> 0;
<a name='L4953'>    <b>if</b> ((len - x) % 2 != 0) <font color='red'>{</font> 
<a name='L4954'>        <i><font color='green'>/* Currupt or hostile pickle -- we never write one like this. */</font></i>
<a name='L4955'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "odd number of items for SETITEMS");
<a name='L4956'>        <b>return</b> -1;
<a name='L4957'>    <font color='red'>}</font>
<a name='L4958'>
<a name='L4959'>    <i><font color='green'>/* Here, dict does not actually need to be a PyDict; it could be anything</font></i>
<a name='L4960'><i><font color='green'>       that supports the __setitem__ attribute. */</font></i>
<a name='L4961'>    dict = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[x - 1];
<a name='L4962'>
<a name='L4963'>    <b>for</b> (i = x + 1; i &lt; len; i += 2) <font color='red'>{</font>
<a name='L4964'>        <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[i - 1];
<a name='L4965'>        <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[i];
<a name='L4966'>        <b>if</b> (<a href='../S/2775.html#L141' title='Defined at 141 in Objects/abstract.c.'>PyObject_SetItem</a>(dict, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>) &lt; 0) <font color='red'>{</font>
<a name='L4967'>            status = -1;
<a name='L4968'>            <b>break</b>;
<a name='L4969'>        <font color='red'>}</font>
<a name='L4970'>    <font color='red'>}</font>
<a name='L4971'>
<a name='L4972'>    <a href='../S/2588.html#L193' title='Defined at 193 in Modules/_pickle.c.'>Pdata_clear</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, x);
<a name='L4973'>    <b>return</b> status;
<a name='L4974'><font color='red'>}</font>
<a name='L4975'>
<a name='L4976'><b>static</b> <b>int</b>
<a name='L4977'><a href='../S/2588.html#L5252' title='Refered from 5252 in Modules/_pickle.c.'>load_setitem</a>(UnpicklerObject *self)
<a name='L4978'><font color='red'>{</font>
<a name='L4979'>    <b>return</b> <a href='../S/2588.html#L4941' title='Defined at 4941 in Modules/_pickle.c.'>do_setitems</a>(self, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) - 2);
<a name='L4980'><font color='red'>}</font>
<a name='L4981'>
<a name='L4982'><b>static</b> <b>int</b>
<a name='L4983'><a href='../S/2588.html#L5253' title='Refered from 5253 in Modules/_pickle.c.'>load_setitems</a>(UnpicklerObject *self)
<a name='L4984'><font color='red'>{</font>
<a name='L4985'>    <b>return</b> <a href='../S/2588.html#L4941' title='Defined at 4941 in Modules/_pickle.c.'>do_setitems</a>(self, <a href='../S/2588.html#L3787' title='Defined at 3787 in Modules/_pickle.c.'>marker</a>(self));
<a name='L4986'><font color='red'>}</font>
<a name='L4987'>
<a name='L4988'><b>static</b> <b>int</b>
<a name='L4989'><a href='../S/2588.html#L5241' title='Refered from 5241 in Modules/_pickle.c.'>load_build</a>(UnpicklerObject *self)
<a name='L4990'><font color='red'>{</font>
<a name='L4991'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, *inst, *slotstate;
<a name='L4992'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *setstate;
<a name='L4993'>    <b>int</b> status = 0;
<a name='L4994'>
<a name='L4995'>    <i><font color='green'>/* Stack is ... instance, state.  We want to leave instance at</font></i>
<a name='L4996'><i><font color='green'>     * the stack top, possibly mutated via instance.__setstate__(state).</font></i>
<a name='L4997'><i><font color='green'>     */</font></i>
<a name='L4998'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) &lt; 2)
<a name='L4999'>        <b>return</b> <a href='../S/2588.html#L140' title='Defined at 140 in Modules/_pickle.c.'>stack_underflow</a>();
<a name='L5000'>
<a name='L5001'>    <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L5002'>    <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5003'>        <b>return</b> -1;
<a name='L5004'>
<a name='L5005'>    inst = self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>-&gt;data[<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>) - 1];
<a name='L5006'>
<a name='L5007'>    setstate = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(inst, "__setstate__");
<a name='L5008'>    <b>if</b> (setstate == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5009'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_AttributeError))
<a name='L5010'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L5011'>        <b>else</b> <font color='red'>{</font>
<a name='L5012'>            Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L5013'>            <b>return</b> -1;
<a name='L5014'>        <font color='red'>}</font>
<a name='L5015'>    <font color='red'>}</font>
<a name='L5016'>    <b>else</b> <font color='red'>{</font>
<a name='L5017'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L5018'>
<a name='L5019'>        <i><font color='green'>/* The explicit __setstate__ is responsible for everything. */</font></i>
<a name='L5020'>        <i><font color='green'>/* Ugh... this does not leak since _Unpickler_FastCall() steals the</font></i>
<a name='L5021'><i><font color='green'>           reference to state first. */</font></i>
<a name='L5022'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2588.html#L843' title='Defined at 843 in Modules/_pickle.c.'>_Unpickler_FastCall</a>(self, setstate, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L5023'>        Py_DECREF(setstate);
<a name='L5024'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5025'>            <b>return</b> -1;
<a name='L5026'>        Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L5027'>        <b>return</b> 0;
<a name='L5028'>    <font color='red'>}</font>
<a name='L5029'>
<a name='L5030'>    <i><font color='green'>/* A default __setstate__.  First see whether state embeds a</font></i>
<a name='L5031'><i><font color='green'>     * slot state dict too (a proto 2 addition).</font></i>
<a name='L5032'><i><font color='green'>     */</font></i>
<a name='L5033'>    <b>if</b> (PyTuple_Check(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>) &amp;&amp; <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>) == 2) <font color='red'>{</font>
<a name='L5034'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tmp = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L5035'>
<a name='L5036'>        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = PyTuple_GET_ITEM(tmp, 0);
<a name='L5037'>        slotstate = PyTuple_GET_ITEM(tmp, 1);
<a name='L5038'>        Py_INCREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L5039'>        Py_INCREF(slotstate);
<a name='L5040'>        Py_DECREF(tmp);
<a name='L5041'>    <font color='red'>}</font>
<a name='L5042'>    <b>else</b>
<a name='L5043'>        slotstate = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5044'>
<a name='L5045'>    <i><font color='green'>/* Set inst.__dict__ from the state dict (if any). */</font></i>
<a name='L5046'>    <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> != Py_None) <font color='red'>{</font>
<a name='L5047'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dict;
<a name='L5048'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *d_key, *d_value;
<a name='L5049'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L5050'>
<a name='L5051'>        <b>if</b> (!PyDict_Check(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>)) <font color='red'>{</font>
<a name='L5052'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError, "state is not a dictionary");
<a name='L5053'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5054'>        <font color='red'>}</font>
<a name='L5055'>        dict = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(inst, "__dict__");
<a name='L5056'>        <b>if</b> (dict == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5057'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5058'>
<a name='L5059'>        i = 0;
<a name='L5060'>        <b>while</b> (<a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, &amp;i, &amp;d_key, &amp;d_value)) <font color='red'>{</font>
<a name='L5061'>            <i><font color='green'>/* normally the keys for instance attributes are</font></i>
<a name='L5062'><i><font color='green'>               interned.  we should try to do that here. */</font></i>
<a name='L5063'>            Py_INCREF(d_key);
<a name='L5064'>            <b>if</b> (PyUnicode_CheckExact(d_key))
<a name='L5065'>                <a href='../S/2828.html#L10002' title='Defined at 10002 in Objects/unicodeobject.c.'>PyUnicode_InternInPlace</a>(&amp;d_key);
<a name='L5066'>            <b>if</b> (<a href='../S/2775.html#L141' title='Defined at 141 in Objects/abstract.c.'>PyObject_SetItem</a>(dict, d_key, d_value) &lt; 0) <font color='red'>{</font>
<a name='L5067'>                Py_DECREF(d_key);
<a name='L5068'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5069'>            <font color='red'>}</font>
<a name='L5070'>            Py_DECREF(d_key);
<a name='L5071'>        <font color='red'>}</font>
<a name='L5072'>        Py_DECREF(dict);
<a name='L5073'>    <font color='red'>}</font>
<a name='L5074'>
<a name='L5075'>    <i><font color='green'>/* Also set instance attributes from the slotstate dict (if any). */</font></i>
<a name='L5076'>    <b>if</b> (slotstate != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5077'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *d_key, *d_value;
<a name='L5078'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L5079'>
<a name='L5080'>        <b>if</b> (!PyDict_Check(slotstate)) <font color='red'>{</font>
<a name='L5081'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(UnpicklingError,
<a name='L5082'>                            "slot state is not a dictionary");
<a name='L5083'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5084'>        <font color='red'>}</font>
<a name='L5085'>        i = 0;
<a name='L5086'>        <b>while</b> (<a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(slotstate, &amp;i, &amp;d_key, &amp;d_value)) <font color='red'>{</font>
<a name='L5087'>            <b>if</b> (<a href='../S/2803.html#L859' title='Defined at 859 in Objects/object.c.'>PyObject_SetAttr</a>(inst, d_key, d_value) &lt; 0)
<a name='L5088'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5089'>        <font color='red'>}</font>
<a name='L5090'>    <font color='red'>}</font>
<a name='L5091'>
<a name='L5092'>    <b>if</b> (0) <font color='red'>{</font>
<a name='L5093'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L5094'>        status = -1;
<a name='L5095'>    <font color='red'>}</font>
<a name='L5096'>
<a name='L5097'>    Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L5098'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(slotstate);
<a name='L5099'>    <b>return</b> status;
<a name='L5100'><font color='red'>}</font>
<a name='L5101'>
<a name='L5102'><b>static</b> <b>int</b>
<a name='L5103'><a href='../S/2588.html#L5246' title='Refered from 5246 in Modules/_pickle.c.'>load_mark</a>(UnpicklerObject *self)
<a name='L5104'><font color='red'>{</font>
<a name='L5105'>
<a name='L5106'>    <i><font color='green'>/* Note that we split the (pickle.py) stack into two stacks, an</font></i>
<a name='L5107'><i><font color='green'>     * object stack and a mark stack. Here we push a mark onto the</font></i>
<a name='L5108'><i><font color='green'>     * mark stack.</font></i>
<a name='L5109'><i><font color='green'>     */</font></i>
<a name='L5110'>
<a name='L5111'>    <b>if</b> ((self-&gt;num_marks + 1) &gt;= self-&gt;marks_size) <font color='red'>{</font>
<a name='L5112'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> alloc;
<a name='L5113'>        <b>int</b> *marks;
<a name='L5114'>
<a name='L5115'>        <i><font color='green'>/* Use the size_t type to check for overflow. */</font></i>
<a name='L5116'>        alloc = ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)self-&gt;num_marks &lt;&lt; 1) + 20;
<a name='L5117'>        <b>if</b> (alloc &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> || 
<a name='L5118'>            alloc &lt;= ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)self-&gt;num_marks + 1)) <font color='red'>{</font>
<a name='L5119'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L5120'>            <b>return</b> -1;
<a name='L5121'>        <font color='red'>}</font>
<a name='L5122'>
<a name='L5123'>        <b>if</b> (self-&gt;marks == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5124'>            marks = (<b>int</b> *)<a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>(alloc * <b>sizeof</b>(<b>int</b>));
<a name='L5125'>        <b>else</b>
<a name='L5126'>            marks = (<b>int</b> *)<a href='../S/2803.html#L1775' title='Defined at 1775 in Objects/object.c.'>PyMem_Realloc</a>(self-&gt;marks, alloc * <b>sizeof</b>(<b>int</b>));
<a name='L5127'>        <b>if</b> (marks == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5128'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L5129'>            <b>return</b> -1;
<a name='L5130'>        <font color='red'>}</font>
<a name='L5131'>        self-&gt;marks = marks;
<a name='L5132'>        self-&gt;marks_size = (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)alloc;
<a name='L5133'>    <font color='red'>}</font>
<a name='L5134'>
<a name='L5135'>    self-&gt;marks[self-&gt;num_marks++] = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>);
<a name='L5136'>
<a name='L5137'>    <b>return</b> 0;
<a name='L5138'><font color='red'>}</font>
<a name='L5139'>
<a name='L5140'><b>static</b> <b>int</b>
<a name='L5141'><a href='../S/2588.html#L5256' title='Refered from 5256 in Modules/_pickle.c.'>load_reduce</a>(UnpicklerObject *self)
<a name='L5142'><font color='red'>{</font>
<a name='L5143'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *callable = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5144'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *argtup = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5145'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5146'>
<a name='L5147'>    <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, argtup);
<a name='L5148'>    <b>if</b> (argtup == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5149'>        <b>return</b> -1;
<a name='L5150'>    <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, callable);
<a name='L5151'>    <b>if</b> (callable) <font color='red'>{</font>
<a name='L5152'>        obj = <a href='../S/2775.html#L2135' title='Defined at 2135 in Objects/abstract.c.'>PyObject_CallObject</a>(callable, argtup);
<a name='L5153'>        Py_DECREF(callable);
<a name='L5154'>    <font color='red'>}</font>
<a name='L5155'>    Py_DECREF(argtup);
<a name='L5156'>
<a name='L5157'>    <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5158'>        <b>return</b> -1;
<a name='L5159'>
<a name='L5160'>    <a href='../S/2588.html#L262' title='Defined at 262 in Modules/_pickle.c.'>PDATA_PUSH</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, obj, -1);
<a name='L5161'>    <b>return</b> 0;
<a name='L5162'><font color='red'>}</font>
<a name='L5163'>
<a name='L5164'><i><font color='green'>/* Just raises an error if we don't know the protocol specified.  PROTO</font></i>
<a name='L5165'><i><font color='green'> * is the first opcode for protocols &gt;= 2.</font></i>
<a name='L5166'><i><font color='green'> */</font></i>
<a name='L5167'><b>static</b> <b>int</b>
<a name='L5168'><a href='../S/2588.html#L5257' title='Refered from 5257 in Modules/_pickle.c.'>load_proto</a>(UnpicklerObject *self)
<a name='L5169'><font color='red'>{</font>
<a name='L5170'>    <b>char</b> *s;
<a name='L5171'>    <b>int</b> i;
<a name='L5172'>
<a name='L5173'>    <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 1) &lt; 0)
<a name='L5174'>        <b>return</b> -1;
<a name='L5175'>
<a name='L5176'>    i = (<b>unsigned</b> <b>char</b>)s[0];
<a name='L5177'>    <b>if</b> (i &lt;= <a href='../S/2588.html#L9' title='Defined at 9 in Modules/_pickle.c.'>HIGHEST_PROTOCOL</a>) <font color='red'>{</font>
<a name='L5178'>        self-&gt;proto = i;
<a name='L5179'>        <b>return</b> 0;
<a name='L5180'>    <font color='red'>}</font>
<a name='L5181'>
<a name='L5182'>    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError, "unsupported pickle protocol: %d", i);
<a name='L5183'>    <b>return</b> -1;
<a name='L5184'><font color='red'>}</font>
<a name='L5185'>
<a name='L5186'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5187'><a href='../R/8678.html' title='Multiple refered from 4 places.'>load</a>(UnpicklerObject *self)
<a name='L5188'><font color='red'>{</font>
<a name='L5189'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *err;
<a name='L5190'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5191'>    <b>char</b> *s;
<a name='L5192'>
<a name='L5193'>    self-&gt;num_marks = 0;
<a name='L5194'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>))
<a name='L5195'>        <a href='../S/2588.html#L193' title='Defined at 193 in Modules/_pickle.c.'>Pdata_clear</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, 0);
<a name='L5196'>
<a name='L5197'>    <i><font color='green'>/* Convenient macros for the dispatch while-switch loop just below. */</font></i>
<a name='L5198'><font color='darkred'>#define</font> <a href='../R/2189.html' title='Multiple refered from 93 places.'>OP</a>(opcode, load_func) \
<a name='L5199'>    <b>case</b> <a href='../S/2588.html#L15' title='Defined at 15 in Modules/_pickle.c.'>opcode</a>: <b>if</b> (load_func(self) &lt; 0) <b>break</b>; <b>continue</b>;
<a name='L5200'>
<a name='L5201'><font color='darkred'>#define</font> <a href='../R/2191.html' title='Multiple refered from 11 places.'>OP_ARG</a>(opcode, load_func, arg) \
<a name='L5202'>    <b>case</b> <a href='../S/2588.html#L15' title='Defined at 15 in Modules/_pickle.c.'>opcode</a>: <b>if</b> (load_func(self, (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) &lt; 0) <b>break</b>; <b>continue</b>;
<a name='L5203'>
<a name='L5204'>    <b>while</b> (1) <font color='red'>{</font>
<a name='L5205'>        <b>if</b> (<a href='../S/2588.html#L976' title='Defined at 976 in Modules/_pickle.c.'>_Unpickler_Read</a>(self, &amp;s, 1) &lt; 0)
<a name='L5206'>            <b>break</b>;
<a name='L5207'>
<a name='L5208'>        <b>switch</b> ((<b>enum</b> <a href='../S/2588.html#L15' title='Defined at 15 in Modules/_pickle.c.'>opcode</a>)s[0]) <font color='red'>{</font>
<a name='L5209'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/2318.html' title='Multiple defined in 5 places.'>NONE</a>, <a href='../S/2588.html#L3798' title='Defined at 3798 in Modules/_pickle.c.'>load_none</a>)
<a name='L5210'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L23' title='Defined at 23 in Modules/_pickle.c.'>BININT</a>, <a href='../S/2588.html#L3907' title='Defined at 3907 in Modules/_pickle.c.'>load_binint</a>)
<a name='L5211'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L24' title='Defined at 24 in Modules/_pickle.c.'>BININT1</a>, <a href='../S/2588.html#L3918' title='Defined at 3918 in Modules/_pickle.c.'>load_binint1</a>)
<a name='L5212'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L26' title='Defined at 26 in Modules/_pickle.c.'>BININT2</a>, <a href='../S/2588.html#L3929' title='Defined at 3929 in Modules/_pickle.c.'>load_binint2</a>)
<a name='L5213'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/1741.html' title='Multiple defined in 2 places.'>INT</a>, <a href='../S/2588.html#L3812' title='Defined at 3812 in Modules/_pickle.c.'>load_int</a>)
<a name='L5214'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L25' title='Defined at 25 in Modules/_pickle.c.'>LONG</a>, <a href='../S/2588.html#L3940' title='Defined at 3940 in Modules/_pickle.c.'>load_long</a>)
<a name='L5215'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L69' title='Defined at 69 in Modules/_pickle.c.'>LONG1</a>, <a href='../S/2588.html#L3970' title='Defined at 3970 in Modules/_pickle.c.'>load_counted_long</a>, 1)
<a name='L5216'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L70' title='Defined at 70 in Modules/_pickle.c.'>LONG4</a>, <a href='../S/2588.html#L3970' title='Defined at 3970 in Modules/_pickle.c.'>load_counted_long</a>, 4)
<a name='L5217'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L21' title='Defined at 21 in Modules/_pickle.c.'>FLOAT</a>, <a href='../S/2588.html#L4004' title='Defined at 4004 in Modules/_pickle.c.'>load_float</a>)
<a name='L5218'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L56' title='Defined at 56 in Modules/_pickle.c.'>BINFLOAT</a>, <a href='../S/2588.html#L4033' title='Defined at 4033 in Modules/_pickle.c.'>load_binfloat</a>)
<a name='L5219'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L73' title='Defined at 73 in Modules/_pickle.c.'>BINBYTES</a>, <a href='../S/2588.html#L4105' title='Defined at 4105 in Modules/_pickle.c.'>load_binbytes</a>)
<a name='L5220'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L74' title='Defined at 74 in Modules/_pickle.c.'>SHORT_BINBYTES</a>, <a href='../S/2588.html#L4132' title='Defined at 4132 in Modules/_pickle.c.'>load_short_binbytes</a>)
<a name='L5221'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L32' title='Defined at 32 in Modules/_pickle.c.'>BINSTRING</a>, <a href='../S/2588.html#L4155' title='Defined at 4155 in Modules/_pickle.c.'>load_binstring</a>)
<a name='L5222'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L33' title='Defined at 33 in Modules/_pickle.c.'>SHORT_BINSTRING</a>, <a href='../S/2588.html#L4184' title='Defined at 4184 in Modules/_pickle.c.'>load_short_binstring</a>)
<a name='L5223'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/4973.html' title='Multiple defined in 2 places.'>STRING</a>, <a href='../S/2588.html#L4054' title='Defined at 4054 in Modules/_pickle.c.'>load_string</a>)
<a name='L5224'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L34' title='Defined at 34 in Modules/_pickle.c.'>UNICODE</a>, <a href='../S/2588.html#L4208' title='Defined at 4208 in Modules/_pickle.c.'>load_unicode</a>)
<a name='L5225'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L35' title='Defined at 35 in Modules/_pickle.c.'>BINUNICODE</a>, <a href='../S/2588.html#L4228' title='Defined at 4228 in Modules/_pickle.c.'>load_binunicode</a>)
<a name='L5226'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L54' title='Defined at 54 in Modules/_pickle.c.'>EMPTY_TUPLE</a>, <a href='../S/2588.html#L4272' title='Defined at 4272 in Modules/_pickle.c.'>load_counted_tuple</a>, 0)
<a name='L5227'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L64' title='Defined at 64 in Modules/_pickle.c.'>TUPLE1</a>, <a href='../S/2588.html#L4272' title='Defined at 4272 in Modules/_pickle.c.'>load_counted_tuple</a>, 1)
<a name='L5228'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L65' title='Defined at 65 in Modules/_pickle.c.'>TUPLE2</a>, <a href='../S/2588.html#L4272' title='Defined at 4272 in Modules/_pickle.c.'>load_counted_tuple</a>, 2)
<a name='L5229'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L66' title='Defined at 66 in Modules/_pickle.c.'>TUPLE3</a>, <a href='../S/2588.html#L4272' title='Defined at 4272 in Modules/_pickle.c.'>load_counted_tuple</a>, 3)
<a name='L5230'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L53' title='Defined at 53 in Modules/_pickle.c.'>TUPLE</a>, <a href='../S/2588.html#L4256' title='Defined at 4256 in Modules/_pickle.c.'>load_tuple</a>)
<a name='L5231'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L47' title='Defined at 47 in Modules/_pickle.c.'>EMPTY_LIST</a>, <a href='../S/2588.html#L4293' title='Defined at 4293 in Modules/_pickle.c.'>load_empty_list</a>)
<a name='L5232'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L46' title='Defined at 46 in Modules/_pickle.c.'>LIST</a>, <a href='../S/2588.html#L4315' title='Defined at 4315 in Modules/_pickle.c.'>load_list</a>)
<a name='L5233'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L40' title='Defined at 40 in Modules/_pickle.c.'>EMPTY_DICT</a>, <a href='../S/2588.html#L4304' title='Defined at 4304 in Modules/_pickle.c.'>load_empty_dict</a>)
<a name='L5234'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/783.html' title='Multiple defined in 2 places.'>DICT</a>, <a href='../S/2588.html#L4331' title='Defined at 4331 in Modules/_pickle.c.'>load_dict</a>)
<a name='L5235'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L48' title='Defined at 48 in Modules/_pickle.c.'>OBJ</a>, <a href='../S/2588.html#L4375' title='Defined at 4375 in Modules/_pickle.c.'>load_obj</a>)
<a name='L5236'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L44' title='Defined at 44 in Modules/_pickle.c.'>INST</a>, <a href='../S/2588.html#L4401' title='Defined at 4401 in Modules/_pickle.c.'>load_inst</a>)
<a name='L5237'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L60' title='Defined at 60 in Modules/_pickle.c.'>NEWOBJ</a>, <a href='../S/2588.html#L4454' title='Defined at 4454 in Modules/_pickle.c.'>load_newobj</a>)
<a name='L5238'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L38' title='Defined at 38 in Modules/_pickle.c.'>GLOBAL</a>, <a href='../D/9528.html' title='Multiple defined in 2 places.'>load_global</a>)
<a name='L5239'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/71.html' title='Multiple defined in 3 places.'>APPEND</a>, <a href='../S/2588.html#L4929' title='Defined at 4929 in Modules/_pickle.c.'>load_append</a>)
<a name='L5240'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L41' title='Defined at 41 in Modules/_pickle.c.'>APPENDS</a>, <a href='../S/2588.html#L4935' title='Defined at 4935 in Modules/_pickle.c.'>load_appends</a>)
<a name='L5241'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L37' title='Defined at 37 in Modules/_pickle.c.'>BUILD</a>, <a href='../S/2588.html#L4989' title='Defined at 4989 in Modules/_pickle.c.'>load_build</a>)
<a name='L5242'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L20' title='Defined at 20 in Modules/_pickle.c.'>DUP</a>, <a href='../S/2588.html#L4638' title='Defined at 4638 in Modules/_pickle.c.'>load_dup</a>)
<a name='L5243'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L43' title='Defined at 43 in Modules/_pickle.c.'>BINGET</a>, <a href='../S/2588.html#L4686' title='Defined at 4686 in Modules/_pickle.c.'>load_binget</a>)
<a name='L5244'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L45' title='Defined at 45 in Modules/_pickle.c.'>LONG_BINGET</a>, <a href='../S/2588.html#L4711' title='Defined at 4711 in Modules/_pickle.c.'>load_long_binget</a>)
<a name='L5245'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/1373.html' title='Multiple defined in 2 places.'>GET</a>, <a href='../S/2588.html#L4651' title='Defined at 4651 in Modules/_pickle.c.'>load_get</a>)
<a name='L5246'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L16' title='Defined at 16 in Modules/_pickle.c.'>MARK</a>, <a href='../S/2588.html#L5103' title='Defined at 5103 in Modules/_pickle.c.'>load_mark</a>)
<a name='L5247'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L50' title='Defined at 50 in Modules/_pickle.c.'>BINPUT</a>, <a href='../S/2588.html#L4837' title='Defined at 4837 in Modules/_pickle.c.'>load_binput</a>)
<a name='L5248'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L51' title='Defined at 51 in Modules/_pickle.c.'>LONG_BINPUT</a>, <a href='../S/2588.html#L4856' title='Defined at 4856 in Modules/_pickle.c.'>load_long_binput</a>)
<a name='L5249'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/2558.html' title='Multiple defined in 2 places.'>PUT</a>, <a href='../S/2588.html#L4810' title='Defined at 4810 in Modules/_pickle.c.'>load_put</a>)
<a name='L5250'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/2506.html' title='Multiple defined in 3 places.'>POP</a>, <a href='../S/2588.html#L4601' title='Defined at 4601 in Modules/_pickle.c.'>load_pop</a>)
<a name='L5251'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L19' title='Defined at 19 in Modules/_pickle.c.'>POP_MARK</a>, <a href='../S/2588.html#L4625' title='Defined at 4625 in Modules/_pickle.c.'>load_pop_mark</a>)
<a name='L5252'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L52' title='Defined at 52 in Modules/_pickle.c.'>SETITEM</a>, <a href='../S/2588.html#L4977' title='Defined at 4977 in Modules/_pickle.c.'>load_setitem</a>)
<a name='L5253'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L55' title='Defined at 55 in Modules/_pickle.c.'>SETITEMS</a>, <a href='../S/2588.html#L4983' title='Defined at 4983 in Modules/_pickle.c.'>load_setitems</a>)
<a name='L5254'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L28' title='Defined at 28 in Modules/_pickle.c.'>PERSID</a>, <a href='../S/2588.html#L4540' title='Defined at 4540 in Modules/_pickle.c.'>load_persid</a>)
<a name='L5255'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L29' title='Defined at 29 in Modules/_pickle.c.'>BINPERSID</a>, <a href='../S/2588.html#L4574' title='Defined at 4574 in Modules/_pickle.c.'>load_binpersid</a>)
<a name='L5256'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../D/4440.html' title='Multiple defined in 2 places.'>REDUCE</a>, <a href='../S/2588.html#L5141' title='Defined at 5141 in Modules/_pickle.c.'>load_reduce</a>)
<a name='L5257'>        <a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>(<a href='../S/2588.html#L59' title='Defined at 59 in Modules/_pickle.c.'>PROTO</a>, <a href='../S/2588.html#L5168' title='Defined at 5168 in Modules/_pickle.c.'>load_proto</a>)
<a name='L5258'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L61' title='Defined at 61 in Modules/_pickle.c.'>EXT1</a>, <a href='../S/2588.html#L4742' title='Defined at 4742 in Modules/_pickle.c.'>load_extension</a>, 1)
<a name='L5259'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L62' title='Defined at 62 in Modules/_pickle.c.'>EXT2</a>, <a href='../S/2588.html#L4742' title='Defined at 4742 in Modules/_pickle.c.'>load_extension</a>, 2)
<a name='L5260'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L63' title='Defined at 63 in Modules/_pickle.c.'>EXT4</a>, <a href='../S/2588.html#L4742' title='Defined at 4742 in Modules/_pickle.c.'>load_extension</a>, 4)
<a name='L5261'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L67' title='Defined at 67 in Modules/_pickle.c.'>NEWTRUE</a>, <a href='../S/2588.html#L3857' title='Defined at 3857 in Modules/_pickle.c.'>load_bool</a>, Py_True)
<a name='L5262'>        <a href='../S/2588.html#L5201' title='Defined at 5201 in Modules/_pickle.c.'>OP_ARG</a>(<a href='../S/2588.html#L68' title='Defined at 68 in Modules/_pickle.c.'>NEWFALSE</a>, <a href='../S/2588.html#L3857' title='Defined at 3857 in Modules/_pickle.c.'>load_bool</a>, Py_False)
<a name='L5263'>
<a name='L5264'>        <b>case</b> <a href='../S/2588.html#L17' title='Defined at 17 in Modules/_pickle.c.'>STOP</a>:
<a name='L5265'>            <b>break</b>;
<a name='L5266'>
<a name='L5267'>        <b>case</b> '\0':
<a name='L5268'>            <a href='../S/3106.html#L116' title='Defined at 116 in Python/errors.c.'>PyErr_SetNone</a>(PyExc_EOFError);
<a name='L5269'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5270'>
<a name='L5271'>        <b>default</b>:
<a name='L5272'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(UnpicklingError,
<a name='L5273'>                         "invalid load key, '%c'.", s[0]);
<a name='L5274'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5275'>        <font color='red'>}</font>
<a name='L5276'>
<a name='L5277'>        <b>break</b>;                  <i><font color='green'>/* and we are done! */</font></i>
<a name='L5278'>    <font color='red'>}</font>
<a name='L5279'>
<a name='L5280'>    <b>if</b> (<a href='../S/2588.html#L872' title='Defined at 872 in Modules/_pickle.c.'>_Unpickler_SkipConsumed</a>(self) &lt; 0)
<a name='L5281'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5282'>
<a name='L5283'>    <i><font color='green'>/* XXX: It is not clear what this is actually for. */</font></i>
<a name='L5284'>    <b>if</b> ((err = <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())) <font color='red'>{</font>
<a name='L5285'>        <b>if</b> (err == PyExc_EOFError) <font color='red'>{</font>
<a name='L5286'>            <a href='../S/3106.html#L116' title='Defined at 116 in Python/errors.c.'>PyErr_SetNone</a>(PyExc_EOFError);
<a name='L5287'>        <font color='red'>}</font>
<a name='L5288'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5289'>    <font color='red'>}</font>
<a name='L5290'>
<a name='L5291'>    <a href='../S/2588.html#L249' title='Defined at 249 in Modules/_pickle.c.'>PDATA_POP</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L5292'>    <b>return</b> <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L5293'><font color='red'>}</font>
<a name='L5294'>
<a name='L5295'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(Unpickler_load_doc,
<a name='L5296'>"load() -&gt; object. Load a pickle."
<a name='L5297'>"\n"
<a name='L5298'>"Read a pickled object representation from the open file object given in\n"
<a name='L5299'>"the constructor, and return the reconstituted object hierarchy specified\n"
<a name='L5300'>"therein.\n");
<a name='L5301'>
<a name='L5302'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5303'><a href='../S/2588.html#L5419' title='Refered from 5419 in Modules/_pickle.c.'>Unpickler_load</a>(UnpicklerObject *self)
<a name='L5304'><font color='red'>{</font>
<a name='L5305'>    <i><font color='green'>/* Check whether the Unpickler was initialized correctly. This prevents</font></i>
<a name='L5306'><i><font color='green'>       segfaulting if a subclass overridden __init__ with a function that does</font></i>
<a name='L5307'><i><font color='green'>       not call Unpickler.__init__(). Here, we simply ensure that self-&gt;read</font></i>
<a name='L5308'><i><font color='green'>       is not NULL. */</font></i>
<a name='L5309'>    <b>if</b> (self-&gt;read == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5310'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(UnpicklingError, 
<a name='L5311'>                     "Unpickler.__init__() was not called by %s.__init__()",
<a name='L5312'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_name);
<a name='L5313'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5314'>    <font color='red'>}</font>
<a name='L5315'>
<a name='L5316'>    <b>return</b> <a href='../S/2588.html#L5187' title='Defined at 5187 in Modules/_pickle.c.'>load</a>(self);
<a name='L5317'><font color='red'>}</font>
<a name='L5318'>
<a name='L5319'><i><font color='green'>/* The name of find_class() is misleading. In newer pickle protocols, this</font></i>
<a name='L5320'><i><font color='green'>   function is used for loading any global (i.e., functions), not just</font></i>
<a name='L5321'><i><font color='green'>   classes. The name is kept only for backward compatibility. */</font></i>
<a name='L5322'>
<a name='L5323'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(Unpickler_find_class_doc,
<a name='L5324'>"find_class(module_name, global_name) -&gt; object.\n"
<a name='L5325'>"\n"
<a name='L5326'>"Return an object from a specified module, importing the module if\n"
<a name='L5327'>"necessary.  Subclasses may override this method (e.g. to restrict\n"
<a name='L5328'>"unpickling of arbitrary classes and functions).\n"
<a name='L5329'>"\n"
<a name='L5330'>"This method is called whenever a class or a function object is\n"
<a name='L5331'>"needed.  Both arguments passed are str objects.\n");
<a name='L5332'>
<a name='L5333'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5334'><a href='../S/2588.html#L5421' title='Refered from 5421 in Modules/_pickle.c.'>Unpickler_find_class</a>(UnpicklerObject *self, PyObject *args)
<a name='L5335'><font color='red'>{</font>
<a name='L5336'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *global;
<a name='L5337'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *modules_dict;
<a name='L5338'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module;
<a name='L5339'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_name, *global_name;
<a name='L5340'>
<a name='L5341'>    <b>if</b> (!<a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "find_class", 2, 2,
<a name='L5342'>                           &amp;module_name, &amp;global_name))
<a name='L5343'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5344'>
<a name='L5345'>    <i><font color='green'>/* Try to map the old names used in Python 2.x to the new ones used in</font></i>
<a name='L5346'><i><font color='green'>       Python 3.x.  We do this only with old pickle protocols and when the</font></i>
<a name='L5347'><i><font color='green'>       user has not disabled the feature. */</font></i>
<a name='L5348'>    <b>if</b> (self-&gt;proto &lt; 3 &amp;&amp; self-&gt;fix_imports) <font color='red'>{</font>
<a name='L5349'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>;
<a name='L5350'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item;
<a name='L5351'>
<a name='L5352'>        <i><font color='green'>/* Check if the global (i.e., a function or a class) was renamed</font></i>
<a name='L5353'><i><font color='green'>           or moved to another module. */</font></i>
<a name='L5354'>        <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(2, module_name, global_name);
<a name='L5355'>        <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5356'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5357'>        item = <a href='../S/2787.html#L754' title='Defined at 754 in Objects/dictobject.c.'>PyDict_GetItemWithError</a>(name_mapping_2to3, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L5358'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L5359'>        <b>if</b> (item) <font color='red'>{</font>
<a name='L5360'>            <b>if</b> (!PyTuple_Check(item) || PyTuple_GET_SIZE(item) != 2) <font color='red'>{</font>
<a name='L5361'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L5362'>                             "_compat_pickle.NAME_MAPPING values should be "
<a name='L5363'>                             "2-tuples, not %.200s", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(item)-&gt;tp_name);
<a name='L5364'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5365'>            <font color='red'>}</font>
<a name='L5366'>            module_name = PyTuple_GET_ITEM(item, 0);
<a name='L5367'>            global_name = PyTuple_GET_ITEM(item, 1);
<a name='L5368'>            <b>if</b> (!PyUnicode_Check(module_name) ||
<a name='L5369'>                !PyUnicode_Check(global_name)) <font color='red'>{</font>
<a name='L5370'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L5371'>                             "_compat_pickle.NAME_MAPPING values should be "
<a name='L5372'>                             "pairs of str, not (%.200s, %.200s)",
<a name='L5373'>                             <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(module_name)-&gt;tp_name,
<a name='L5374'>                             <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(global_name)-&gt;tp_name);
<a name='L5375'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5376'>            <font color='red'>}</font>
<a name='L5377'>        <font color='red'>}</font>
<a name='L5378'>        <b>else</b> <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L5379'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5380'>        <font color='red'>}</font>
<a name='L5381'>
<a name='L5382'>        <i><font color='green'>/* Check if the module was renamed. */</font></i>
<a name='L5383'>        item = <a href='../S/2787.html#L754' title='Defined at 754 in Objects/dictobject.c.'>PyDict_GetItemWithError</a>(import_mapping_2to3, module_name);
<a name='L5384'>        <b>if</b> (item) <font color='red'>{</font>
<a name='L5385'>            <b>if</b> (!PyUnicode_Check(item)) <font color='red'>{</font>
<a name='L5386'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L5387'>                             "_compat_pickle.IMPORT_MAPPING values should be "
<a name='L5388'>                             "strings, not %.200s", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(item)-&gt;tp_name);
<a name='L5389'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5390'>            <font color='red'>}</font>
<a name='L5391'>            module_name = item;
<a name='L5392'>        <font color='red'>}</font>
<a name='L5393'>        <b>else</b> <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L5394'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5395'>        <font color='red'>}</font>
<a name='L5396'>    <font color='red'>}</font>
<a name='L5397'>
<a name='L5398'>    modules_dict = <a href='../S/3144.html#L44' title='Defined at 44 in Python/sysmodule.c.'>PySys_GetObject</a>("modules");
<a name='L5399'>    <b>if</b> (modules_dict == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5400'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5401'>
<a name='L5402'>    module = <a href='../S/2787.html#L754' title='Defined at 754 in Objects/dictobject.c.'>PyDict_GetItemWithError</a>(modules_dict, module_name);
<a name='L5403'>    <b>if</b> (module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5404'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L5405'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5406'>        module = <a href='../S/3120.html#L3017' title='Defined at 3017 in Python/import.c.'>PyImport_Import</a>(module_name);
<a name='L5407'>        <b>if</b> (module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5408'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5409'>        global = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(module, global_name);
<a name='L5410'>        Py_DECREF(module);
<a name='L5411'>    <font color='red'>}</font>
<a name='L5412'>    <b>else</b> <font color='red'>{</font> 
<a name='L5413'>        global = <a href='../S/2803.html#L822' title='Defined at 822 in Objects/object.c.'>PyObject_GetAttr</a>(module, global_name);
<a name='L5414'>    <font color='red'>}</font>
<a name='L5415'>    <b>return</b> global;
<a name='L5416'><font color='red'>}</font>
<a name='L5417'>
<a name='L5418'><b>static</b> <b>struct</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> Unpickler_methods[] = <font color='red'>{</font>
<a name='L5419'>    <font color='red'>{</font>"load", (PyCFunction)<a href='../S/2588.html#L5303' title='Defined at 5303 in Modules/_pickle.c.'>Unpickler_load</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L5420'>     Unpickler_load_doc<font color='red'>}</font>,
<a name='L5421'>    <font color='red'>{</font>"find_class", (PyCFunction)<a href='../S/2588.html#L5334' title='Defined at 5334 in Modules/_pickle.c.'>Unpickler_find_class</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L5422'>     Unpickler_find_class_doc<font color='red'>}</font>,
<a name='L5423'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>                <i><font color='green'>/* sentinel */</font></i>
<a name='L5424'><font color='red'>}</font>;
<a name='L5425'>
<a name='L5426'><b>static</b> <b>void</b>
<a name='L5427'><a href='../S/2588.html#L5880' title='Refered from 5880 in Modules/_pickle.c.'>Unpickler_dealloc</a>(UnpicklerObject *self)
<a name='L5428'><font color='red'>{</font>
<a name='L5429'>    <a href='../D/3619.html' title='Multiple defined in 2 places.'>PyObject_GC_UnTrack</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self);
<a name='L5430'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;readline);
<a name='L5431'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;read);
<a name='L5432'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;peek);
<a name='L5433'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>);
<a name='L5434'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;pers_func);
<a name='L5435'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L5436'>    <b>if</b> (self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.buf != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5437'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L5438'>        self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.buf = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5439'>    <font color='red'>}</font>
<a name='L5440'>
<a name='L5441'>    <a href='../S/2588.html#L1118' title='Defined at 1118 in Modules/_pickle.c.'>_Unpickler_MemoCleanup</a>(self);
<a name='L5442'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(self-&gt;marks);
<a name='L5443'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(self-&gt;input_line);
<a name='L5444'>    free(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L5445'>    free(self-&gt;errors);
<a name='L5446'>
<a name='L5447'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_free((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self);
<a name='L5448'><font color='red'>}</font>
<a name='L5449'>
<a name='L5450'><b>static</b> <b>int</b>
<a name='L5451'><a href='../S/2588.html#L5897' title='Refered from 5897 in Modules/_pickle.c.'>Unpickler_traverse</a>(UnpicklerObject *self, visitproc visit, <b>void</b> *arg)
<a name='L5452'><font color='red'>{</font>
<a name='L5453'>    Py_VISIT(self-&gt;readline);
<a name='L5454'>    Py_VISIT(self-&gt;read);
<a name='L5455'>    Py_VISIT(self-&gt;peek);
<a name='L5456'>    Py_VISIT(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>);
<a name='L5457'>    Py_VISIT(self-&gt;pers_func);
<a name='L5458'>    Py_VISIT(self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L5459'>    <b>return</b> 0;
<a name='L5460'><font color='red'>}</font>
<a name='L5461'>
<a name='L5462'><b>static</b> <b>int</b>
<a name='L5463'><a href='../R/4823.html' title='Multiple refered from 2 places.'>Unpickler_clear</a>(UnpicklerObject *self)
<a name='L5464'><font color='red'>{</font>
<a name='L5465'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;readline);
<a name='L5466'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;read);
<a name='L5467'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;peek);
<a name='L5468'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>);
<a name='L5469'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;pers_func);
<a name='L5470'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L5471'>    <b>if</b> (self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.buf != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5472'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L5473'>        self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.buf = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5474'>    <font color='red'>}</font>
<a name='L5475'>
<a name='L5476'>    <a href='../S/2588.html#L1118' title='Defined at 1118 in Modules/_pickle.c.'>_Unpickler_MemoCleanup</a>(self);
<a name='L5477'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(self-&gt;marks);
<a name='L5478'>    self-&gt;marks = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5479'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(self-&gt;input_line);
<a name='L5480'>    self-&gt;input_line = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5481'>    free(self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L5482'>    self-&gt;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5483'>    free(self-&gt;errors);
<a name='L5484'>    self-&gt;errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5485'>
<a name='L5486'>    <b>return</b> 0;
<a name='L5487'><font color='red'>}</font>
<a name='L5488'>
<a name='L5489'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(Unpickler_doc,
<a name='L5490'>"Unpickler(file, *, encoding='ASCII', errors='strict')"
<a name='L5491'>"\n"
<a name='L5492'>"This takes a binary file for reading a pickle data stream.\n"
<a name='L5493'>"\n"
<a name='L5494'>"The protocol version of the pickle is detected automatically, so no\n"
<a name='L5495'>"proto argument is needed.\n"
<a name='L5496'>"\n"
<a name='L5497'>"The file-like object must have two methods, a read() method\n"
<a name='L5498'>"that takes an integer argument, and a readline() method that\n"
<a name='L5499'>"requires no arguments.  Both methods should return bytes.\n"
<a name='L5500'>"Thus file-like object can be a binary file object opened for\n"
<a name='L5501'>"reading, a BytesIO object, or any other custom object that\n"
<a name='L5502'>"meets this interface.\n"
<a name='L5503'>"\n"
<a name='L5504'>"Optional keyword arguments are *fix_imports*, *encoding* and *errors*,\n"
<a name='L5505'>"which are used to control compatiblity support for pickle stream\n"
<a name='L5506'>"generated by Python 2.x.  If *fix_imports* is True, pickle will try to\n"
<a name='L5507'>"map the old Python 2.x names to the new names used in Python 3.x.  The\n"
<a name='L5508'>"*encoding* and *errors* tell pickle how to decode 8-bit string\n"
<a name='L5509'>"instances pickled by Python 2.x; these default to 'ASCII' and\n"
<a name='L5510'>"'strict', respectively.\n");
<a name='L5511'>
<a name='L5512'><b>static</b> <b>int</b>
<a name='L5513'><a href='../S/2588.html#L5911' title='Refered from 5911 in Modules/_pickle.c.'>Unpickler_init</a>(UnpicklerObject *self, PyObject *args, PyObject *kwds)
<a name='L5514'><font color='red'>{</font>
<a name='L5515'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"file", "fix_imports", "encoding", "errors", 0<font color='red'>}</font>;
<a name='L5516'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *file;
<a name='L5517'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fix_imports = Py_True;
<a name='L5518'>    <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5519'>    <b>char</b> *errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5520'>
<a name='L5521'>    <i><font color='green'>/* XXX: That is an horrible error message. But, I don't know how to do</font></i>
<a name='L5522'><i><font color='green'>       better... */</font></i>
<a name='L5523'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) != 1) <font color='red'>{</font>
<a name='L5524'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L5525'>                     "%s takes exactly one positional argument (%zd given)",
<a name='L5526'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_name, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>));
<a name='L5527'>        <b>return</b> -1;
<a name='L5528'>    <font color='red'>}</font>
<a name='L5529'>
<a name='L5530'>    <i><font color='green'>/* Arguments parsing needs to be done in the __init__() method to allow</font></i>
<a name='L5531'><i><font color='green'>       subclasses to define their own __init__() method, which may (or may</font></i>
<a name='L5532'><i><font color='green'>       not) support Unpickler arguments. However, this means we need to be</font></i>
<a name='L5533'><i><font color='green'>       extra careful in the other Unpickler methods, since a subclass could</font></i>
<a name='L5534'><i><font color='green'>       forget to call Unpickler.__init__() thus breaking our internal</font></i>
<a name='L5535'><i><font color='green'>       invariants. */</font></i>
<a name='L5536'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|Oss:Unpickler", kwlist,
<a name='L5537'>                                     &amp;file, &amp;fix_imports, &amp;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, &amp;errors))
<a name='L5538'>        <b>return</b> -1;
<a name='L5539'>
<a name='L5540'>    <i><font color='green'>/* In case of multiple __init__() calls, clear previous content. */</font></i>
<a name='L5541'>    <b>if</b> (self-&gt;read != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5542'>        (<b>void</b>)<a href='../S/2588.html#L5463' title='Defined at 5463 in Modules/_pickle.c.'>Unpickler_clear</a>(self);
<a name='L5543'>
<a name='L5544'>    <b>if</b> (<a href='../S/2588.html#L1180' title='Defined at 1180 in Modules/_pickle.c.'>_Unpickler_SetInputStream</a>(self, file) &lt; 0)
<a name='L5545'>        <b>return</b> -1;
<a name='L5546'>
<a name='L5547'>    <b>if</b> (<a href='../S/2588.html#L1206' title='Defined at 1206 in Modules/_pickle.c.'>_Unpickler_SetInputEncoding</a>(self, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors) &lt; 0)
<a name='L5548'>        <b>return</b> -1;
<a name='L5549'>
<a name='L5550'>    self-&gt;fix_imports = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(fix_imports);
<a name='L5551'>    <b>if</b> (self-&gt;fix_imports == -1)
<a name='L5552'>        <b>return</b> -1;
<a name='L5553'>
<a name='L5554'>    <b>if</b> (<a href='../S/2803.html#L794' title='Defined at 794 in Objects/object.c.'>PyObject_HasAttrString</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, "persistent_load")) <font color='red'>{</font>
<a name='L5555'>        self-&gt;pers_func = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self,
<a name='L5556'>                                                 "persistent_load");
<a name='L5557'>        <b>if</b> (self-&gt;pers_func == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5558'>            <b>return</b> -1;
<a name='L5559'>    <font color='red'>}</font>
<a name='L5560'>    <b>else</b> <font color='red'>{</font>
<a name='L5561'>        self-&gt;pers_func = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5562'>    <font color='red'>}</font>
<a name='L5563'>
<a name='L5564'>    self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a> = (<a href='../S/2588.html#L151' title='Defined at 151 in Modules/_pickle.c.'>Pdata</a> *)<a href='../S/2588.html#L173' title='Defined at 173 in Modules/_pickle.c.'>Pdata_New</a>();
<a name='L5565'>    <b>if</b> (self-&gt;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5566'>        <b>return</b> -1;
<a name='L5567'>
<a name='L5568'>    self-&gt;memo_size = 32;
<a name='L5569'>    self-&gt;memo = <a href='../S/2588.html#L1107' title='Defined at 1107 in Modules/_pickle.c.'>_Unpickler_NewMemo</a>(self-&gt;memo_size);
<a name='L5570'>    <b>if</b> (self-&gt;memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5571'>        <b>return</b> -1;
<a name='L5572'>
<a name='L5573'>    self-&gt;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5574'>    self-&gt;proto = 0;
<a name='L5575'>
<a name='L5576'>    <b>return</b> 0;
<a name='L5577'><font color='red'>}</font>
<a name='L5578'>
<a name='L5579'><i><font color='green'>/* Define a proxy object for the Unpickler's internal memo object. This is to</font></i>
<a name='L5580'><i><font color='green'> * avoid breaking code like:</font></i>
<a name='L5581'><i><font color='green'> *  unpickler.memo.clear()</font></i>
<a name='L5582'><i><font color='green'> * and</font></i>
<a name='L5583'><i><font color='green'> *  unpickler.memo = saved_memo</font></i>
<a name='L5584'><i><font color='green'> * Is this a good idea? Not really, but we don't want to break code that uses</font></i>
<a name='L5585'><i><font color='green'> * it. Note that we don't implement the entire mapping API here. This is</font></i>
<a name='L5586'><i><font color='green'> * intentional, as these should be treated as black-box implementation details.</font></i>
<a name='L5587'><i><font color='green'> *</font></i>
<a name='L5588'><i><font color='green'> * We do, however, have to implement pickling/unpickling support because of</font></i>
<a name='L5589'><i><font color='green'> * real-world code like cvs2svn. </font></i>
<a name='L5590'><i><font color='green'> */</font></i>
<a name='L5591'>
<a name='L5592'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L5593'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L5594'>    <a href='../D/5447.html' title='Multiple defined in 2 places.'>UnpicklerObject</a> *unpickler;
<a name='L5595'><font color='red'>}</font> <a href='../R/4817.html' title='Multiple refered from 4 places.'>UnpicklerMemoProxyObject</a>;
<a name='L5596'>
<a name='L5597'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(ump_clear_doc,
<a name='L5598'>"memo.clear() -&gt; None.  Remove all items from memo.");
<a name='L5599'>
<a name='L5600'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5601'><a href='../S/2588.html#L5675' title='Refered from 5675 in Modules/_pickle.c.'>ump_clear</a>(UnpicklerMemoProxyObject *self)
<a name='L5602'><font color='red'>{</font>
<a name='L5603'>    <a href='../S/2588.html#L1118' title='Defined at 1118 in Modules/_pickle.c.'>_Unpickler_MemoCleanup</a>(self-&gt;unpickler);
<a name='L5604'>    self-&gt;unpickler-&gt;memo = <a href='../S/2588.html#L1107' title='Defined at 1107 in Modules/_pickle.c.'>_Unpickler_NewMemo</a>(self-&gt;unpickler-&gt;memo_size);
<a name='L5605'>    <b>if</b> (self-&gt;unpickler-&gt;memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5606'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5607'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L5608'><font color='red'>}</font>
<a name='L5609'>
<a name='L5610'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(ump_copy_doc,
<a name='L5611'>"memo.copy() -&gt; new_memo.  Copy the memo to a new object.");
<a name='L5612'>
<a name='L5613'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5614'><a href='../R/11055.html' title='Multiple refered from 2 places.'>ump_copy</a>(UnpicklerMemoProxyObject *self)
<a name='L5615'><font color='red'>{</font>
<a name='L5616'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L5617'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *new_memo = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L5618'>    <b>if</b> (new_memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5619'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5620'>
<a name='L5621'>    <b>for</b> (i = 0; i &lt; self-&gt;unpickler-&gt;memo_size; i++) <font color='red'>{</font>
<a name='L5622'>        <b>int</b> status;
<a name='L5623'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L5624'>
<a name='L5625'>        <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = self-&gt;unpickler-&gt;memo[i];
<a name='L5626'>        <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5627'>            <b>continue</b>;
<a name='L5628'>
<a name='L5629'>        <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(i);
<a name='L5630'>        <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5631'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5632'>        status = <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(new_memo, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L5633'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L5634'>        <b>if</b> (status &lt; 0)
<a name='L5635'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5636'>    <font color='red'>}</font>
<a name='L5637'>    <b>return</b> new_memo;
<a name='L5638'>
<a name='L5639'><a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L5640'>    Py_DECREF(new_memo);
<a name='L5641'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5642'><font color='red'>}</font>
<a name='L5643'>
<a name='L5644'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(ump_reduce_doc,
<a name='L5645'>"memo.__reduce__(). Pickling support.");
<a name='L5646'>
<a name='L5647'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5648'><a href='../S/2588.html#L5677' title='Refered from 5677 in Modules/_pickle.c.'>ump_reduce</a>(UnpicklerMemoProxyObject *self, PyObject *args)
<a name='L5649'><font color='red'>{</font>
<a name='L5650'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *reduce_value;
<a name='L5651'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *constructor_args;
<a name='L5652'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *contents = <a href='../S/2588.html#L5614' title='Defined at 5614 in Modules/_pickle.c.'>ump_copy</a>(self);
<a name='L5653'>    <b>if</b> (contents == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5654'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5655'>
<a name='L5656'>    reduce_value = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(2);
<a name='L5657'>    <b>if</b> (reduce_value == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5658'>        Py_DECREF(contents);
<a name='L5659'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5660'>    <font color='red'>}</font>
<a name='L5661'>    constructor_args = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(1);
<a name='L5662'>    <b>if</b> (constructor_args == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5663'>        Py_DECREF(contents);
<a name='L5664'>        Py_DECREF(reduce_value);
<a name='L5665'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5666'>    <font color='red'>}</font>
<a name='L5667'>    PyTuple_SET_ITEM(constructor_args, 0, contents);
<a name='L5668'>    Py_INCREF((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;PyDict_Type);
<a name='L5669'>    PyTuple_SET_ITEM(reduce_value, 0, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;PyDict_Type);
<a name='L5670'>    PyTuple_SET_ITEM(reduce_value, 1, constructor_args);
<a name='L5671'>    <b>return</b> reduce_value;
<a name='L5672'><font color='red'>}</font>
<a name='L5673'>
<a name='L5674'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> unpicklerproxy_methods[] = <font color='red'>{</font>
<a name='L5675'>    <font color='red'>{</font>"clear",       (PyCFunction)<a href='../S/2588.html#L5601' title='Defined at 5601 in Modules/_pickle.c.'>ump_clear</a>,  <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,  ump_clear_doc<font color='red'>}</font>,
<a name='L5676'>    <font color='red'>{</font>"copy",        (PyCFunction)<a href='../S/2588.html#L5614' title='Defined at 5614 in Modules/_pickle.c.'>ump_copy</a>,   <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,  ump_copy_doc<font color='red'>}</font>,
<a name='L5677'>    <font color='red'>{</font>"__reduce__",  (PyCFunction)<a href='../S/2588.html#L5648' title='Defined at 5648 in Modules/_pickle.c.'>ump_reduce</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, ump_reduce_doc<font color='red'>}</font>,
<a name='L5678'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>    <i><font color='green'>/* sentinel */</font></i>
<a name='L5679'><font color='red'>}</font>;
<a name='L5680'>
<a name='L5681'><b>static</b> <b>void</b>
<a name='L5682'><a href='../S/2588.html#L5709' title='Refered from 5709 in Modules/_pickle.c.'>UnpicklerMemoProxy_dealloc</a>(UnpicklerMemoProxyObject *self)
<a name='L5683'><font color='red'>{</font>
<a name='L5684'>    <a href='../D/3619.html' title='Multiple defined in 2 places.'>PyObject_GC_UnTrack</a>(self);
<a name='L5685'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;unpickler);
<a name='L5686'>    <a href='../D/3617.html' title='Multiple defined in 2 places.'>PyObject_GC_Del</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self);
<a name='L5687'><font color='red'>}</font>
<a name='L5688'>
<a name='L5689'><b>static</b> <b>int</b>
<a name='L5690'><a href='../S/2588.html#L5726' title='Refered from 5726 in Modules/_pickle.c.'>UnpicklerMemoProxy_traverse</a>(UnpicklerMemoProxyObject *self,
<a name='L5691'>                            visitproc visit, <b>void</b> *arg)
<a name='L5692'><font color='red'>{</font>
<a name='L5693'>    Py_VISIT(self-&gt;unpickler);
<a name='L5694'>    <b>return</b> 0;
<a name='L5695'><font color='red'>}</font>
<a name='L5696'>
<a name='L5697'><b>static</b> <b>int</b>
<a name='L5698'><a href='../S/2588.html#L5727' title='Refered from 5727 in Modules/_pickle.c.'>UnpicklerMemoProxy_clear</a>(UnpicklerMemoProxyObject *self)
<a name='L5699'><font color='red'>{</font>
<a name='L5700'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(self-&gt;unpickler);
<a name='L5701'>    <b>return</b> 0;
<a name='L5702'><font color='red'>}</font>
<a name='L5703'>
<a name='L5704'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> UnpicklerMemoProxyType = <font color='red'>{</font>
<a name='L5705'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L5706'>    "_pickle.UnpicklerMemoProxy",               <i><font color='green'>/*tp_name*/</font></i>
<a name='L5707'>    <b>sizeof</b>(<a href='../S/2588.html#L5595' title='Defined at 5595 in Modules/_pickle.c.'>UnpicklerMemoProxyObject</a>),           <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L5708'>    0,
<a name='L5709'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2588.html#L5682' title='Defined at 5682 in Modules/_pickle.c.'>UnpicklerMemoProxy_dealloc</a>,     <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L5710'>    0,                                          <i><font color='green'>/* tp_print */</font></i>
<a name='L5711'>    0,                                          <i><font color='green'>/* tp_getattr */</font></i>
<a name='L5712'>    0,                                          <i><font color='green'>/* tp_setattr */</font></i>
<a name='L5713'>    0,                                          <i><font color='green'>/* tp_compare */</font></i>
<a name='L5714'>    0,                                          <i><font color='green'>/* tp_repr */</font></i>
<a name='L5715'>    0,                                          <i><font color='green'>/* tp_as_number */</font></i>
<a name='L5716'>    0,                                          <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L5717'>    0,                                          <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L5718'>    <a href='../S/2803.html#L750' title='Defined at 750 in Objects/object.c.'>PyObject_HashNotImplemented</a>,                <i><font color='green'>/* tp_hash */</font></i>
<a name='L5719'>    0,                                          <i><font color='green'>/* tp_call */</font></i>
<a name='L5720'>    0,                                          <i><font color='green'>/* tp_str */</font></i>
<a name='L5721'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,                    <i><font color='green'>/* tp_getattro */</font></i>
<a name='L5722'>    <a href='../S/2803.html#L1130' title='Defined at 1130 in Objects/object.c.'>PyObject_GenericSetAttr</a>,                    <i><font color='green'>/* tp_setattro */</font></i>
<a name='L5723'>    0,                                          <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L5724'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE | Py_TPFLAGS_HAVE_GC,
<a name='L5725'>    0,                                          <i><font color='green'>/* tp_doc */</font></i>
<a name='L5726'>    (traverseproc)<a href='../S/2588.html#L5690' title='Defined at 5690 in Modules/_pickle.c.'>UnpicklerMemoProxy_traverse</a>,  <i><font color='green'>/* tp_traverse */</font></i>
<a name='L5727'>    (inquiry)<a href='../S/2588.html#L5698' title='Defined at 5698 in Modules/_pickle.c.'>UnpicklerMemoProxy_clear</a>,          <i><font color='green'>/* tp_clear */</font></i>
<a name='L5728'>    0,                                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L5729'>    0,                                          <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L5730'>    0,                                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L5731'>    0,                                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L5732'>    unpicklerproxy_methods,                     <i><font color='green'>/* tp_methods */</font></i>
<a name='L5733'><font color='red'>}</font>;
<a name='L5734'>
<a name='L5735'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5736'><a href='../S/2588.html#L5756' title='Refered from 5756 in Modules/_pickle.c.'>UnpicklerMemoProxy_New</a>(UnpicklerObject *unpickler)
<a name='L5737'><font color='red'>{</font>
<a name='L5738'>    <a href='../S/2588.html#L5595' title='Defined at 5595 in Modules/_pickle.c.'>UnpicklerMemoProxyObject</a> *self;
<a name='L5739'>
<a name='L5740'>    self = PyObject_GC_New(<a href='../S/2588.html#L5595' title='Defined at 5595 in Modules/_pickle.c.'>UnpicklerMemoProxyObject</a>,
<a name='L5741'>                           &amp;UnpicklerMemoProxyType);
<a name='L5742'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5743'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5744'>    Py_INCREF(unpickler);
<a name='L5745'>    self-&gt;unpickler = unpickler;
<a name='L5746'>    <a href='../D/3618.html' title='Multiple defined in 2 places.'>PyObject_GC_Track</a>(self);
<a name='L5747'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self;
<a name='L5748'><font color='red'>}</font>
<a name='L5749'>
<a name='L5750'><i><font color='green'>/*****************************************************************************/</font></i>
<a name='L5751'>
<a name='L5752'>
<a name='L5753'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5754'><a href='../S/2588.html#L5869' title='Refered from 5869 in Modules/_pickle.c.'>Unpickler_get_memo</a>(UnpicklerObject *self)
<a name='L5755'><font color='red'>{</font>
<a name='L5756'>    <b>return</b> <a href='../S/2588.html#L5736' title='Defined at 5736 in Modules/_pickle.c.'>UnpicklerMemoProxy_New</a>(self);
<a name='L5757'><font color='red'>}</font>
<a name='L5758'>
<a name='L5759'><b>static</b> <b>int</b>
<a name='L5760'><a href='../S/2588.html#L5869' title='Refered from 5869 in Modules/_pickle.c.'>Unpickler_set_memo</a>(UnpicklerObject *self, PyObject *obj)
<a name='L5761'><font color='red'>{</font>
<a name='L5762'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **new_memo;
<a name='L5763'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> new_memo_size = 0;
<a name='L5764'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L5765'>
<a name='L5766'>    <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5767'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L5768'>                        "attribute deletion is not supported");
<a name='L5769'>        <b>return</b> -1;
<a name='L5770'>    <font color='red'>}</font>
<a name='L5771'>
<a name='L5772'>    <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(obj) == &amp;UnpicklerMemoProxyType) <font color='red'>{</font>
<a name='L5773'>        <a href='../D/5447.html' title='Multiple defined in 2 places.'>UnpicklerObject</a> *unpickler =
<a name='L5774'>            ((<a href='../S/2588.html#L5595' title='Defined at 5595 in Modules/_pickle.c.'>UnpicklerMemoProxyObject</a> *)obj)-&gt;unpickler;
<a name='L5775'>
<a name='L5776'>        new_memo_size = unpickler-&gt;memo_size;
<a name='L5777'>        new_memo = <a href='../S/2588.html#L1107' title='Defined at 1107 in Modules/_pickle.c.'>_Unpickler_NewMemo</a>(new_memo_size);
<a name='L5778'>        <b>if</b> (new_memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5779'>            <b>return</b> -1;
<a name='L5780'>
<a name='L5781'>        <b>for</b> (i = 0; i &lt; new_memo_size; i++) <font color='red'>{</font>
<a name='L5782'>            <a href='../S/544.html#L766' title='Defined at 766 in Include/object.h.'>Py_XINCREF</a>(unpickler-&gt;memo[i]);
<a name='L5783'>            new_memo[i] = unpickler-&gt;memo[i];
<a name='L5784'>        <font color='red'>}</font>
<a name='L5785'>    <font color='red'>}</font>
<a name='L5786'>    <b>else</b> <b>if</b> (PyDict_Check(obj)) <font color='red'>{</font>
<a name='L5787'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = 0;
<a name='L5788'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L5789'>
<a name='L5790'>        new_memo_size = <a href='../S/2787.html#L1620' title='Defined at 1620 in Objects/dictobject.c.'>PyDict_Size</a>(obj);
<a name='L5791'>        new_memo = <a href='../S/2588.html#L1107' title='Defined at 1107 in Modules/_pickle.c.'>_Unpickler_NewMemo</a>(new_memo_size);
<a name='L5792'>        <b>if</b> (new_memo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5793'>            <b>return</b> -1;
<a name='L5794'>
<a name='L5795'>        <b>while</b> (<a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(obj, &amp;i, &amp;<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, &amp;<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) <font color='red'>{</font>
<a name='L5796'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idx;
<a name='L5797'>            <b>if</b> (!PyLong_Check(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)) <font color='red'>{</font>
<a name='L5798'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L5799'>                                "memo key must be integers");
<a name='L5800'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5801'>            <font color='red'>}</font>
<a name='L5802'>            idx = <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L5803'>            <b>if</b> (idx == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L5804'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5805'>            <b>if</b> (<a href='../S/2588.html#L1090' title='Defined at 1090 in Modules/_pickle.c.'>_Unpickler_MemoPut</a>(self, idx, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>) &lt; 0)
<a name='L5806'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5807'>        <font color='red'>}</font>
<a name='L5808'>    <font color='red'>}</font>
<a name='L5809'>    <b>else</b> <font color='red'>{</font>
<a name='L5810'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L5811'>                     "'memo' attribute must be an UnpicklerMemoProxy object"
<a name='L5812'>                     "or dict, not %.200s", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(obj)-&gt;tp_name);
<a name='L5813'>        <b>return</b> -1;
<a name='L5814'>    <font color='red'>}</font>
<a name='L5815'>
<a name='L5816'>    <a href='../S/2588.html#L1118' title='Defined at 1118 in Modules/_pickle.c.'>_Unpickler_MemoCleanup</a>(self);
<a name='L5817'>    self-&gt;memo_size = new_memo_size;
<a name='L5818'>    self-&gt;memo = new_memo;
<a name='L5819'>
<a name='L5820'>    <b>return</b> 0;
<a name='L5821'>
<a name='L5822'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L5823'>    <b>if</b> (new_memo_size) <font color='red'>{</font>
<a name='L5824'>        i = new_memo_size;
<a name='L5825'>        <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L5826'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(new_memo[i]);
<a name='L5827'>        <font color='red'>}</font>
<a name='L5828'>        PyMem_FREE(new_memo);
<a name='L5829'>    <font color='red'>}</font>
<a name='L5830'>    <b>return</b> -1;
<a name='L5831'><font color='red'>}</font>
<a name='L5832'>
<a name='L5833'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5834'><a href='../S/2588.html#L5870' title='Refered from 5870 in Modules/_pickle.c.'>Unpickler_get_persload</a>(UnpicklerObject *self)
<a name='L5835'><font color='red'>{</font>
<a name='L5836'>    <b>if</b> (self-&gt;pers_func == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5837'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_AttributeError, "persistent_load");
<a name='L5838'>    <b>else</b>
<a name='L5839'>        Py_INCREF(self-&gt;pers_func);
<a name='L5840'>    <b>return</b> self-&gt;pers_func;
<a name='L5841'><font color='red'>}</font>
<a name='L5842'>
<a name='L5843'><b>static</b> <b>int</b>
<a name='L5844'><a href='../S/2588.html#L5871' title='Refered from 5871 in Modules/_pickle.c.'>Unpickler_set_persload</a>(UnpicklerObject *self, PyObject *value)
<a name='L5845'><font color='red'>{</font>
<a name='L5846'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tmp;
<a name='L5847'>
<a name='L5848'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5849'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L5850'>                        "attribute deletion is not supported");
<a name='L5851'>        <b>return</b> -1;
<a name='L5852'>    <font color='red'>}</font>
<a name='L5853'>    <b>if</b> (!<a href='../S/2803.html#L1180' title='Defined at 1180 in Objects/object.c.'>PyCallable_Check</a>(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) <font color='red'>{</font>
<a name='L5854'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L5855'>                        "persistent_load must be a callable taking "
<a name='L5856'>                        "one argument");
<a name='L5857'>        <b>return</b> -1;
<a name='L5858'>    <font color='red'>}</font>
<a name='L5859'>
<a name='L5860'>    tmp = self-&gt;pers_func;
<a name='L5861'>    Py_INCREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L5862'>    self-&gt;pers_func = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L5863'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(tmp);      <i><font color='green'>/* self-&gt;pers_func can be NULL, so be careful. */</font></i>
<a name='L5864'>
<a name='L5865'>    <b>return</b> 0;
<a name='L5866'><font color='red'>}</font>
<a name='L5867'>
<a name='L5868'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> Unpickler_getsets[] = <font color='red'>{</font>
<a name='L5869'>    <font color='red'>{</font>"memo", (getter)<a href='../S/2588.html#L5754' title='Defined at 5754 in Modules/_pickle.c.'>Unpickler_get_memo</a>, (setter)<a href='../S/2588.html#L5760' title='Defined at 5760 in Modules/_pickle.c.'>Unpickler_set_memo</a><font color='red'>}</font>,
<a name='L5870'>    <font color='red'>{</font>"persistent_load", (getter)<a href='../S/2588.html#L5834' title='Defined at 5834 in Modules/_pickle.c.'>Unpickler_get_persload</a>,
<a name='L5871'>                        (setter)<a href='../S/2588.html#L5844' title='Defined at 5844 in Modules/_pickle.c.'>Unpickler_set_persload</a><font color='red'>}</font>,
<a name='L5872'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L5873'><font color='red'>}</font>;
<a name='L5874'>
<a name='L5875'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Unpickler_Type = <font color='red'>{</font>
<a name='L5876'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L5877'>    "_pickle.Unpickler",                <i><font color='green'>/*tp_name*/</font></i>
<a name='L5878'>    <b>sizeof</b>(<a href='../D/5447.html' title='Multiple defined in 2 places.'>UnpicklerObject</a>),            <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L5879'>    0,                                  <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L5880'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2588.html#L5427' title='Defined at 5427 in Modules/_pickle.c.'>Unpickler_dealloc</a>,      <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L5881'>    0,                                  <i><font color='green'>/*tp_print*/</font></i>
<a name='L5882'>    0,                                  <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L5883'>    0,                                  <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L5884'>    0,                                  <i><font color='green'>/*tp_reserved*/</font></i>
<a name='L5885'>    0,                                  <i><font color='green'>/*tp_repr*/</font></i>
<a name='L5886'>    0,                                  <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L5887'>    0,                                  <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L5888'>    0,                                  <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L5889'>    0,                                  <i><font color='green'>/*tp_hash*/</font></i>
<a name='L5890'>    0,                                  <i><font color='green'>/*tp_call*/</font></i>
<a name='L5891'>    0,                                  <i><font color='green'>/*tp_str*/</font></i>
<a name='L5892'>    0,                                  <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L5893'>    0,                                  <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L5894'>    0,                                  <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L5895'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE | Py_TPFLAGS_HAVE_GC,
<a name='L5896'>    Unpickler_doc,                      <i><font color='green'>/*tp_doc*/</font></i>
<a name='L5897'>    (traverseproc)<a href='../S/2588.html#L5451' title='Defined at 5451 in Modules/_pickle.c.'>Unpickler_traverse</a>,   <i><font color='green'>/*tp_traverse*/</font></i>
<a name='L5898'>    (inquiry)<a href='../S/2588.html#L5463' title='Defined at 5463 in Modules/_pickle.c.'>Unpickler_clear</a>,           <i><font color='green'>/*tp_clear*/</font></i>
<a name='L5899'>    0,                                  <i><font color='green'>/*tp_richcompare*/</font></i>
<a name='L5900'>    0,                                  <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L5901'>    0,                                  <i><font color='green'>/*tp_iter*/</font></i>
<a name='L5902'>    0,                                  <i><font color='green'>/*tp_iternext*/</font></i>
<a name='L5903'>    Unpickler_methods,                  <i><font color='green'>/*tp_methods*/</font></i>
<a name='L5904'>    0,                                  <i><font color='green'>/*tp_members*/</font></i>
<a name='L5905'>    Unpickler_getsets,                  <i><font color='green'>/*tp_getset*/</font></i>
<a name='L5906'>    0,                                  <i><font color='green'>/*tp_base*/</font></i>
<a name='L5907'>    0,                                  <i><font color='green'>/*tp_dict*/</font></i>
<a name='L5908'>    0,                                  <i><font color='green'>/*tp_descr_get*/</font></i>
<a name='L5909'>    0,                                  <i><font color='green'>/*tp_descr_set*/</font></i>
<a name='L5910'>    0,                                  <i><font color='green'>/*tp_dictoffset*/</font></i>
<a name='L5911'>    (initproc)<a href='../S/2588.html#L5513' title='Defined at 5513 in Modules/_pickle.c.'>Unpickler_init</a>,           <i><font color='green'>/*tp_init*/</font></i>
<a name='L5912'>    <a href='../S/2824.html#L700' title='Defined at 700 in Objects/typeobject.c.'>PyType_GenericAlloc</a>,                <i><font color='green'>/*tp_alloc*/</font></i>
<a name='L5913'>    <a href='../S/2824.html#L730' title='Defined at 730 in Objects/typeobject.c.'>PyType_GenericNew</a>,                  <i><font color='green'>/*tp_new*/</font></i>
<a name='L5914'>    <a href='../D/3617.html' title='Multiple defined in 2 places.'>PyObject_GC_Del</a>,                    <i><font color='green'>/*tp_free*/</font></i>
<a name='L5915'>    0,                                  <i><font color='green'>/*tp_is_gc*/</font></i>
<a name='L5916'><font color='red'>}</font>;
<a name='L5917'>
<a name='L5918'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pickle_dump_doc,
<a name='L5919'>"dump(obj, file, protocol=None, *, fix_imports=True) -&gt; None\n"
<a name='L5920'>"\n"
<a name='L5921'>"Write a pickled representation of obj to the open file object file.  This\n"
<a name='L5922'>"is equivalent to ``Pickler(file, protocol).dump(obj)``, but may be more\n"
<a name='L5923'>"efficient.\n"
<a name='L5924'>"\n"
<a name='L5925'>"The optional protocol argument tells the pickler to use the given protocol;\n"
<a name='L5926'>"supported protocols are 0, 1, 2, 3.  The default protocol is 3; a\n"
<a name='L5927'>"backward-incompatible protocol designed for Python 3.0.\n"
<a name='L5928'>"\n"
<a name='L5929'>"Specifying a negative protocol version selects the highest protocol version\n"
<a name='L5930'>"supported.  The higher the protocol used, the more recent the version of\n"
<a name='L5931'>"Python needed to read the pickle produced.\n"
<a name='L5932'>"\n"
<a name='L5933'>"The file argument must have a write() method that accepts a single bytes\n"
<a name='L5934'>"argument.  It can thus be a file object opened for binary writing, a\n"
<a name='L5935'>"io.BytesIO instance, or any other custom object that meets this interface.\n"
<a name='L5936'>"\n"
<a name='L5937'>"If fix_imports is True and protocol is less than 3, pickle will try to\n"
<a name='L5938'>"map the new Python 3.x names to the old module names used in Python 2.x,\n"
<a name='L5939'>"so that the pickle data stream is readable with Python 2.x.\n");
<a name='L5940'>
<a name='L5941'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L5942'><a href='../S/2588.html#L6181' title='Refered from 6181 in Modules/_pickle.c.'>pickle_dump</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L5943'><font color='red'>{</font>
<a name='L5944'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"obj", "file", "protocol", "fix_imports", 0<font color='red'>}</font>;
<a name='L5945'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;
<a name='L5946'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *file;
<a name='L5947'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *proto = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5948'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fix_imports = Py_True;
<a name='L5949'>    <a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a> *pickler;
<a name='L5950'>
<a name='L5951'>    <i><font color='green'>/* fix_imports is a keyword-only argument.  */</font></i>
<a name='L5952'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) &gt; 3) <font color='red'>{</font>
<a name='L5953'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L5954'>                     "pickle.dump() takes at most 3 positional "
<a name='L5955'>                     "argument (%zd given)", <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>));
<a name='L5956'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5957'>    <font color='red'>}</font>
<a name='L5958'>
<a name='L5959'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "OO|OO:dump", kwlist,
<a name='L5960'>                                     &amp;obj, &amp;file, &amp;proto, &amp;fix_imports))
<a name='L5961'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5962'>
<a name='L5963'>    pickler = <a href='../S/2588.html#L758' title='Defined at 758 in Modules/_pickle.c.'>_Pickler_New</a>();
<a name='L5964'>    <b>if</b> (pickler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5965'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5966'>
<a name='L5967'>    <b>if</b> (<a href='../S/2588.html#L793' title='Defined at 793 in Modules/_pickle.c.'>_Pickler_SetProtocol</a>(pickler, proto, fix_imports) &lt; 0)
<a name='L5968'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5969'>
<a name='L5970'>    <b>if</b> (<a href='../S/2588.html#L827' title='Defined at 827 in Modules/_pickle.c.'>_Pickler_SetOutputStream</a>(pickler, file) &lt; 0)
<a name='L5971'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5972'>
<a name='L5973'>    <b>if</b> (<a href='../S/2588.html#L3242' title='Defined at 3242 in Modules/_pickle.c.'>dump</a>(pickler, obj) &lt; 0)
<a name='L5974'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5975'>
<a name='L5976'>    <b>if</b> (<a href='../S/2588.html#L688' title='Defined at 688 in Modules/_pickle.c.'>_Pickler_FlushToFile</a>(pickler) &lt; 0)
<a name='L5977'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L5978'>
<a name='L5979'>    Py_DECREF(pickler);
<a name='L5980'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L5981'>
<a name='L5982'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L5983'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(pickler);
<a name='L5984'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5985'><font color='red'>}</font>
<a name='L5986'>
<a name='L5987'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pickle_dumps_doc,
<a name='L5988'>"dumps(obj, protocol=None, *, fix_imports=True) -&gt; bytes\n"
<a name='L5989'>"\n"
<a name='L5990'>"Return the pickled representation of the object as a bytes\n"
<a name='L5991'>"object, instead of writing it to a file.\n"
<a name='L5992'>"\n"
<a name='L5993'>"The optional protocol argument tells the pickler to use the given protocol;\n"
<a name='L5994'>"supported protocols are 0, 1, 2, 3.  The default protocol is 3; a\n"
<a name='L5995'>"backward-incompatible protocol designed for Python 3.0.\n"
<a name='L5996'>"\n"
<a name='L5997'>"Specifying a negative protocol version selects the highest protocol version\n"
<a name='L5998'>"supported.  The higher the protocol used, the more recent the version of\n"
<a name='L5999'>"Python needed to read the pickle produced.\n"
<a name='L6000'>"\n"
<a name='L6001'>"If fix_imports is True and *protocol* is less than 3, pickle will try to\n"
<a name='L6002'>"map the new Python 3.x names to the old module names used in Python 2.x,\n"
<a name='L6003'>"so that the pickle data stream is readable with Python 2.x.\n");
<a name='L6004'>
<a name='L6005'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L6006'><a href='../R/9527.html' title='Multiple refered from 5 places.'>pickle_dumps</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L6007'><font color='red'>{</font>
<a name='L6008'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"obj", "protocol", "fix_imports", 0<font color='red'>}</font>;
<a name='L6009'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;
<a name='L6010'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *proto = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6011'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6012'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fix_imports = Py_True;
<a name='L6013'>    <a href='../D/2680.html' title='Multiple defined in 2 places.'>PicklerObject</a> *pickler;
<a name='L6014'>
<a name='L6015'>    <i><font color='green'>/* fix_imports is a keyword-only argument.  */</font></i>
<a name='L6016'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) &gt; 2) <font color='red'>{</font>
<a name='L6017'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L6018'>                     "pickle.dumps() takes at most 2 positional "
<a name='L6019'>                     "argument (%zd given)", <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>));
<a name='L6020'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6021'>    <font color='red'>}</font>
<a name='L6022'>
<a name='L6023'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|OO:dumps", kwlist,
<a name='L6024'>                                     &amp;obj, &amp;proto, &amp;fix_imports))
<a name='L6025'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6026'>
<a name='L6027'>    pickler = <a href='../S/2588.html#L758' title='Defined at 758 in Modules/_pickle.c.'>_Pickler_New</a>();
<a name='L6028'>    <b>if</b> (pickler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6029'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6030'>
<a name='L6031'>    <b>if</b> (<a href='../S/2588.html#L793' title='Defined at 793 in Modules/_pickle.c.'>_Pickler_SetProtocol</a>(pickler, proto, fix_imports) &lt; 0)
<a name='L6032'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6033'>
<a name='L6034'>    <b>if</b> (<a href='../S/2588.html#L3242' title='Defined at 3242 in Modules/_pickle.c.'>dump</a>(pickler, obj) &lt; 0)
<a name='L6035'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6036'>
<a name='L6037'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2588.html#L675' title='Defined at 675 in Modules/_pickle.c.'>_Pickler_GetString</a>(pickler);
<a name='L6038'>    Py_DECREF(pickler);
<a name='L6039'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6040'>
<a name='L6041'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L6042'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(pickler);
<a name='L6043'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6044'><font color='red'>}</font>
<a name='L6045'>
<a name='L6046'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pickle_load_doc,
<a name='L6047'>"load(file, *, fix_imports=True, encoding='ASCII', errors='strict') -&gt; object\n"
<a name='L6048'>"\n"
<a name='L6049'>"Read a pickled object representation from the open file object file and\n"
<a name='L6050'>"return the reconstituted object hierarchy specified therein.  This is\n"
<a name='L6051'>"equivalent to ``Unpickler(file).load()``, but may be more efficient.\n"
<a name='L6052'>"\n"
<a name='L6053'>"The protocol version of the pickle is detected automatically, so no protocol\n"
<a name='L6054'>"argument is needed.  Bytes past the pickled object's representation are\n"
<a name='L6055'>"ignored.\n"
<a name='L6056'>"\n"
<a name='L6057'>"The argument file must have two methods, a read() method that takes an\n"
<a name='L6058'>"integer argument, and a readline() method that requires no arguments.  Both\n"
<a name='L6059'>"methods should return bytes.  Thus *file* can be a binary file object opened\n"
<a name='L6060'>"for reading, a BytesIO object, or any other custom object that meets this\n"
<a name='L6061'>"interface.\n"
<a name='L6062'>"\n"
<a name='L6063'>"Optional keyword arguments are fix_imports, encoding and errors,\n"
<a name='L6064'>"which are used to control compatiblity support for pickle stream generated\n"
<a name='L6065'>"by Python 2.x.  If fix_imports is True, pickle will try to map the old\n"
<a name='L6066'>"Python 2.x names to the new names used in Python 3.x.  The encoding and\n"
<a name='L6067'>"errors tell pickle how to decode 8-bit string instances pickled by Python\n"
<a name='L6068'>"2.x; these default to 'ASCII' and 'strict', respectively.\n");
<a name='L6069'>
<a name='L6070'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L6071'><a href='../S/2588.html#L6185' title='Refered from 6185 in Modules/_pickle.c.'>pickle_load</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L6072'><font color='red'>{</font>
<a name='L6073'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"file", "fix_imports", "encoding", "errors", 0<font color='red'>}</font>;
<a name='L6074'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *file;
<a name='L6075'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fix_imports = Py_True;
<a name='L6076'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6077'>    <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6078'>    <b>char</b> *errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6079'>    <a href='../D/5447.html' title='Multiple defined in 2 places.'>UnpicklerObject</a> *unpickler;
<a name='L6080'>
<a name='L6081'>    <i><font color='green'>/* fix_imports, encoding and errors are a keyword-only argument.  */</font></i>
<a name='L6082'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) != 1) <font color='red'>{</font>
<a name='L6083'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L6084'>                     "pickle.load() takes exactly one positional "
<a name='L6085'>                     "argument (%zd given)", <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>));
<a name='L6086'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6087'>    <font color='red'>}</font>
<a name='L6088'>
<a name='L6089'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|Oss:load", kwlist,
<a name='L6090'>                                     &amp;file, &amp;fix_imports, &amp;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, &amp;errors))
<a name='L6091'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6092'>
<a name='L6093'>    unpickler = <a href='../S/2588.html#L1134' title='Defined at 1134 in Modules/_pickle.c.'>_Unpickler_New</a>();
<a name='L6094'>    <b>if</b> (unpickler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6095'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6096'>
<a name='L6097'>    <b>if</b> (<a href='../S/2588.html#L1180' title='Defined at 1180 in Modules/_pickle.c.'>_Unpickler_SetInputStream</a>(unpickler, file) &lt; 0)
<a name='L6098'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6099'>
<a name='L6100'>    <b>if</b> (<a href='../S/2588.html#L1206' title='Defined at 1206 in Modules/_pickle.c.'>_Unpickler_SetInputEncoding</a>(unpickler, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors) &lt; 0)
<a name='L6101'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6102'>
<a name='L6103'>    unpickler-&gt;fix_imports = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(fix_imports);
<a name='L6104'>    <b>if</b> (unpickler-&gt;fix_imports == -1)
<a name='L6105'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6106'>
<a name='L6107'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2588.html#L5187' title='Defined at 5187 in Modules/_pickle.c.'>load</a>(unpickler);
<a name='L6108'>    Py_DECREF(unpickler);
<a name='L6109'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6110'>
<a name='L6111'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L6112'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(unpickler);
<a name='L6113'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6114'><font color='red'>}</font>
<a name='L6115'>
<a name='L6116'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pickle_loads_doc,
<a name='L6117'>"loads(input, *, fix_imports=True, encoding='ASCII', errors='strict') -&gt; object\n"
<a name='L6118'>"\n"
<a name='L6119'>"Read a pickled object hierarchy from a bytes object and return the\n"
<a name='L6120'>"reconstituted object hierarchy specified therein\n"
<a name='L6121'>"\n"
<a name='L6122'>"The protocol version of the pickle is detected automatically, so no protocol\n"
<a name='L6123'>"argument is needed.  Bytes past the pickled object's representation are\n"
<a name='L6124'>"ignored.\n"
<a name='L6125'>"\n"
<a name='L6126'>"Optional keyword arguments are fix_imports, encoding and errors, which\n"
<a name='L6127'>"are used to control compatiblity support for pickle stream generated\n"
<a name='L6128'>"by Python 2.x.  If fix_imports is True, pickle will try to map the old\n"
<a name='L6129'>"Python 2.x names to the new names used in Python 3.x.  The encoding and\n"
<a name='L6130'>"errors tell pickle how to decode 8-bit string instances pickled by Python\n"
<a name='L6131'>"2.x; these default to 'ASCII' and 'strict', respectively.\n");
<a name='L6132'>
<a name='L6133'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L6134'><a href='../R/9529.html' title='Multiple refered from 5 places.'>pickle_loads</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L6135'><font color='red'>{</font>
<a name='L6136'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"input", "fix_imports", "encoding", "errors", 0<font color='red'>}</font>;
<a name='L6137'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *input;
<a name='L6138'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fix_imports = Py_True;
<a name='L6139'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6140'>    <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6141'>    <b>char</b> *errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6142'>    <a href='../D/5447.html' title='Multiple defined in 2 places.'>UnpicklerObject</a> *unpickler;
<a name='L6143'>
<a name='L6144'>    <i><font color='green'>/* fix_imports, encoding and errors are a keyword-only argument.  */</font></i>
<a name='L6145'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) != 1) <font color='red'>{</font>
<a name='L6146'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L6147'>                     "pickle.loads() takes exactly one positional "
<a name='L6148'>                     "argument (%zd given)", <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>));
<a name='L6149'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6150'>    <font color='red'>}</font>
<a name='L6151'>
<a name='L6152'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|Oss:loads", kwlist,
<a name='L6153'>                                     &amp;input, &amp;fix_imports, &amp;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, &amp;errors))
<a name='L6154'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6155'>
<a name='L6156'>    unpickler = <a href='../S/2588.html#L1134' title='Defined at 1134 in Modules/_pickle.c.'>_Unpickler_New</a>();
<a name='L6157'>    <b>if</b> (unpickler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6158'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6159'>
<a name='L6160'>    <b>if</b> (<a href='../S/2588.html#L858' title='Defined at 858 in Modules/_pickle.c.'>_Unpickler_SetStringInput</a>(unpickler, input) &lt; 0)
<a name='L6161'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6162'>
<a name='L6163'>    <b>if</b> (<a href='../S/2588.html#L1206' title='Defined at 1206 in Modules/_pickle.c.'>_Unpickler_SetInputEncoding</a>(unpickler, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors) &lt; 0)
<a name='L6164'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6165'>
<a name='L6166'>    unpickler-&gt;fix_imports = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(fix_imports);
<a name='L6167'>    <b>if</b> (unpickler-&gt;fix_imports == -1)
<a name='L6168'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6169'>
<a name='L6170'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2588.html#L5187' title='Defined at 5187 in Modules/_pickle.c.'>load</a>(unpickler);
<a name='L6171'>    Py_DECREF(unpickler);
<a name='L6172'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6173'>
<a name='L6174'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L6175'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(unpickler);
<a name='L6176'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6177'><font color='red'>}</font>
<a name='L6178'>
<a name='L6179'>
<a name='L6180'><b>static</b> <b>struct</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> pickle_methods[] = <font color='red'>{</font>
<a name='L6181'>    <font color='red'>{</font>"dump",  (PyCFunction)<a href='../S/2588.html#L5942' title='Defined at 5942 in Modules/_pickle.c.'>pickle_dump</a>,  <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS,
<a name='L6182'>     pickle_dump_doc<font color='red'>}</font>,
<a name='L6183'>    <font color='red'>{</font>"dumps", (PyCFunction)<a href='../S/2588.html#L6006' title='Defined at 6006 in Modules/_pickle.c.'>pickle_dumps</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS,
<a name='L6184'>     pickle_dumps_doc<font color='red'>}</font>,
<a name='L6185'>    <font color='red'>{</font>"load",  (PyCFunction)<a href='../S/2588.html#L6071' title='Defined at 6071 in Modules/_pickle.c.'>pickle_load</a>,  <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS,
<a name='L6186'>     pickle_load_doc<font color='red'>}</font>,
<a name='L6187'>    <font color='red'>{</font>"loads", (PyCFunction)<a href='../S/2588.html#L6134' title='Defined at 6134 in Modules/_pickle.c.'>pickle_loads</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS,
<a name='L6188'>     pickle_loads_doc<font color='red'>}</font>,
<a name='L6189'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font> <i><font color='green'>/* sentinel */</font></i>
<a name='L6190'><font color='red'>}</font>;
<a name='L6191'>
<a name='L6192'><b>static</b> <b>int</b>
<a name='L6193'><a href='../S/2588.html#L6354' title='Refered from 6354 in Modules/_pickle.c.'>initmodule</a>(<b>void</b>)
<a name='L6194'><font color='red'>{</font>
<a name='L6195'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *copyreg = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6196'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *compat_pickle = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6197'>
<a name='L6198'>    <i><font color='green'>/* XXX: We should ensure that the types of the dictionaries imported are</font></i>
<a name='L6199'><i><font color='green'>       exactly PyDict objects. Otherwise, it is possible to crash the pickle</font></i>
<a name='L6200'><i><font color='green'>       since we use the PyDict API directly to access these dictionaries. */</font></i>
<a name='L6201'>
<a name='L6202'>    copyreg = <a href='../S/3120.html#L2325' title='Defined at 2325 in Python/import.c.'>PyImport_ImportModule</a>("copyreg");
<a name='L6203'>    <b>if</b> (!copyreg)
<a name='L6204'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6205'>    dispatch_table = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(copyreg, "dispatch_table");
<a name='L6206'>    <b>if</b> (!dispatch_table)
<a name='L6207'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6208'>    extension_registry = \
<a name='L6209'>        <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(copyreg, "_extension_registry");
<a name='L6210'>    <b>if</b> (!extension_registry)
<a name='L6211'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6212'>    inverted_registry = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(copyreg, "_inverted_registry");
<a name='L6213'>    <b>if</b> (!inverted_registry)
<a name='L6214'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6215'>    extension_cache = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(copyreg, "_extension_cache");
<a name='L6216'>    <b>if</b> (!extension_cache)
<a name='L6217'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6218'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(copyreg);
<a name='L6219'>
<a name='L6220'>    <i><font color='green'>/* Load the 2.x -&gt; 3.x stdlib module mapping tables */</font></i>
<a name='L6221'>    compat_pickle = <a href='../S/3120.html#L2325' title='Defined at 2325 in Python/import.c.'>PyImport_ImportModule</a>("_compat_pickle");
<a name='L6222'>    <b>if</b> (!compat_pickle)
<a name='L6223'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6224'>    name_mapping_2to3 = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(compat_pickle, "NAME_MAPPING");
<a name='L6225'>    <b>if</b> (!name_mapping_2to3)
<a name='L6226'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6227'>    <b>if</b> (!<a href='../D/3104.html' title='Multiple defined in 2 places.'>PyDict_CheckExact</a>(name_mapping_2to3)) <font color='red'>{</font>
<a name='L6228'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L6229'>                     "_compat_pickle.NAME_MAPPING should be a dict, not %.200s",
<a name='L6230'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(name_mapping_2to3)-&gt;tp_name);
<a name='L6231'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6232'>    <font color='red'>}</font>
<a name='L6233'>    import_mapping_2to3 = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(compat_pickle,
<a name='L6234'>                                                 "IMPORT_MAPPING");
<a name='L6235'>    <b>if</b> (!import_mapping_2to3)
<a name='L6236'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6237'>    <b>if</b> (!<a href='../D/3104.html' title='Multiple defined in 2 places.'>PyDict_CheckExact</a>(import_mapping_2to3)) <font color='red'>{</font>
<a name='L6238'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L6239'>                     "_compat_pickle.IMPORT_MAPPING should be a dict, "
<a name='L6240'>                     "not %.200s", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(import_mapping_2to3)-&gt;tp_name);
<a name='L6241'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6242'>    <font color='red'>}</font>
<a name='L6243'>    <i><font color='green'>/* ... and the 3.x -&gt; 2.x mapping tables */</font></i>
<a name='L6244'>    name_mapping_3to2 = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(compat_pickle,
<a name='L6245'>                                               "REVERSE_NAME_MAPPING");
<a name='L6246'>    <b>if</b> (!name_mapping_3to2)
<a name='L6247'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6248'>    <b>if</b> (!<a href='../D/3104.html' title='Multiple defined in 2 places.'>PyDict_CheckExact</a>(name_mapping_3to2)) <font color='red'>{</font>
<a name='L6249'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L6250'>                     "_compat_pickle.REVERSE_NAME_MAPPING shouldbe a dict, "
<a name='L6251'>                     "not %.200s", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(name_mapping_3to2)-&gt;tp_name);
<a name='L6252'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6253'>    <font color='red'>}</font>
<a name='L6254'>    import_mapping_3to2 = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(compat_pickle,
<a name='L6255'>                                                 "REVERSE_IMPORT_MAPPING");
<a name='L6256'>    <b>if</b> (!import_mapping_3to2)
<a name='L6257'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6258'>    <b>if</b> (!<a href='../D/3104.html' title='Multiple defined in 2 places.'>PyDict_CheckExact</a>(import_mapping_3to2)) <font color='red'>{</font>
<a name='L6259'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L6260'>                     "_compat_pickle.REVERSE_IMPORT_MAPPING should be a dict, "
<a name='L6261'>                     "not %.200s", <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(import_mapping_3to2)-&gt;tp_name);
<a name='L6262'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6263'>    <font color='red'>}</font>
<a name='L6264'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(compat_pickle);
<a name='L6265'>
<a name='L6266'>    empty_tuple = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(0);
<a name='L6267'>    <b>if</b> (empty_tuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6268'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6269'>    two_tuple = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(2);
<a name='L6270'>    <b>if</b> (two_tuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6271'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L6272'>    <i><font color='green'>/* We use this temp container with no regard to refcounts, or to</font></i>
<a name='L6273'><i><font color='green'>     * keeping containees alive.  Exempt from GC, because we don't</font></i>
<a name='L6274'><i><font color='green'>     * want anything looking at two_tuple() by magic.</font></i>
<a name='L6275'><i><font color='green'>     */</font></i>
<a name='L6276'>    <a href='../D/3619.html' title='Multiple defined in 2 places.'>PyObject_GC_UnTrack</a>(two_tuple);
<a name='L6277'>
<a name='L6278'>    <b>return</b> 0;
<a name='L6279'>
<a name='L6280'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L6281'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(copyreg);
<a name='L6282'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(dispatch_table);
<a name='L6283'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(extension_registry);
<a name='L6284'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(inverted_registry);
<a name='L6285'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(extension_cache);
<a name='L6286'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(compat_pickle);
<a name='L6287'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(name_mapping_2to3);
<a name='L6288'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(import_mapping_2to3);
<a name='L6289'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(name_mapping_3to2);
<a name='L6290'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(import_mapping_3to2);
<a name='L6291'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(empty_tuple);
<a name='L6292'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(two_tuple);
<a name='L6293'>    <b>return</b> -1;
<a name='L6294'><font color='red'>}</font>
<a name='L6295'>
<a name='L6296'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> _picklemodule = <font color='red'>{</font>
<a name='L6297'>    <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L6298'>    "_pickle",
<a name='L6299'>    pickle_module_doc,
<a name='L6300'>    -1,
<a name='L6301'>    pickle_methods,
<a name='L6302'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L6303'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L6304'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L6305'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L6306'><font color='red'>}</font>;
<a name='L6307'>
<a name='L6308'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L6309'><a href='../R/3033.html' title='Multiple refered from 2 places.'>PyInit__pickle</a>(<b>void</b>)
<a name='L6310'><font color='red'>{</font>
<a name='L6311'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *m;
<a name='L6312'>
<a name='L6313'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;Unpickler_Type) &lt; 0)
<a name='L6314'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6315'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;Pickler_Type) &lt; 0)
<a name='L6316'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6317'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;Pdata_Type) &lt; 0)
<a name='L6318'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6319'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;PicklerMemoProxyType) &lt; 0)
<a name='L6320'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6321'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;UnpicklerMemoProxyType) &lt; 0)
<a name='L6322'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6323'>
<a name='L6324'>    <i><font color='green'>/* Create the module and add the functions. */</font></i>
<a name='L6325'>    m = PyModule_Create(&amp;_picklemodule);
<a name='L6326'>    <b>if</b> (m == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6327'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6328'>
<a name='L6329'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "Pickler", (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;Pickler_Type) &lt; 0)
<a name='L6330'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6331'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "Unpickler", (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;Unpickler_Type) &lt; 0)
<a name='L6332'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6333'>
<a name='L6334'>    <i><font color='green'>/* Initialize the exceptions. */</font></i>
<a name='L6335'>    PickleError = <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("_pickle.PickleError", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L6336'>    <b>if</b> (PickleError == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6337'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6338'>    PicklingError = \
<a name='L6339'>        <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("_pickle.PicklingError", PickleError, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L6340'>    <b>if</b> (PicklingError == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6341'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6342'>    UnpicklingError = \
<a name='L6343'>        <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("_pickle.UnpicklingError", PickleError, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L6344'>    <b>if</b> (UnpicklingError == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6345'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6346'>
<a name='L6347'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "PickleError", PickleError) &lt; 0)
<a name='L6348'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6349'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "PicklingError", PicklingError) &lt; 0)
<a name='L6350'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6351'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "UnpicklingError", UnpicklingError) &lt; 0)
<a name='L6352'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6353'>
<a name='L6354'>    <b>if</b> (<a href='../S/2588.html#L6193' title='Defined at 6193 in Modules/_pickle.c.'>initmodule</a>() &lt; 0)
<a name='L6355'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6356'>
<a name='L6357'>    <b>return</b> m;
<a name='L6358'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L140'>[^]</a><a href='#L6309'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
