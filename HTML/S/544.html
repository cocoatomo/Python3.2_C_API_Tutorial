<html>
<head>
<title>Include/object.h</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3349.html'>Include</a>/object.h</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L405'>[^]</a><a href='#L773'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2><a href='../J/55.html' title='Multiple included from 2 places.'>INCLUDED FROM</a></h2>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L405' title='Defined at 405.'>PyAPI_FUNC</a>
<li><a href='#L645' title='Defined at 645.'>PyAPI_DATA</a>
<li><a href='#L701' title='Defined at 701.'>PyAPI_FUNC</a>
<li><a href='#L773' title='Defined at 773.'>PyAPI_FUNC</a>
</ol>
<hr>
<pre>
<a name='L1'><font color='darkred'>#ifndef</font> <a href='../S/544.html#L2' title='Defined at 2 in Include/object.h.'>Py_OBJECT_H</a>
<a name='L2'><font color='darkred'>#define</font> <a href='../S/544.html#L1' title='Refered from 1 in Include/object.h.'>Py_OBJECT_H</a>
<a name='L3'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L4'><b>extern</b> "C" <font color='red'>{</font>
<a name='L5'><font color='darkred'>#endif</font>
<a name='L6'>
<a name='L7'>
<a name='L8'><i><font color='green'>/* Object and type object interface */</font></i>
<a name='L9'>
<a name='L10'><i><font color='green'>/*</font></i>
<a name='L11'><i><font color='green'>Objects are structures allocated on the heap.  Special rules apply to</font></i>
<a name='L12'><i><font color='green'>the use of objects to ensure they are properly garbage-collected.</font></i>
<a name='L13'><i><font color='green'>Objects are never allocated statically or on the stack; they must be</font></i>
<a name='L14'><i><font color='green'>accessed through special macros and functions only.  (Type objects are</font></i>
<a name='L15'><i><font color='green'>exceptions to the first rule; the standard types are represented by</font></i>
<a name='L16'><i><font color='green'>statically initialized type objects, although work on type/class unification</font></i>
<a name='L17'><i><font color='green'>for Python 2.2 made it possible to have heap-allocated type objects too).</font></i>
<a name='L18'><i><font color='green'></font></i>
<a name='L19'><i><font color='green'>An object has a 'reference count' that is increased or decreased when a</font></i>
<a name='L20'><i><font color='green'>pointer to the object is copied or deleted; when the reference count</font></i>
<a name='L21'><i><font color='green'>reaches zero there are no references to the object left and it can be</font></i>
<a name='L22'><i><font color='green'>removed from the heap.</font></i>
<a name='L23'><i><font color='green'></font></i>
<a name='L24'><i><font color='green'>An object has a 'type' that determines what it represents and what kind</font></i>
<a name='L25'><i><font color='green'>of data it contains.  An object's type is fixed when it is created.</font></i>
<a name='L26'><i><font color='green'>Types themselves are represented as objects; an object contains a</font></i>
<a name='L27'><i><font color='green'>pointer to the corresponding type object.  The type itself has a type</font></i>
<a name='L28'><i><font color='green'>pointer pointing to the object representing the type 'type', which</font></i>
<a name='L29'><i><font color='green'>contains a pointer to itself!).</font></i>
<a name='L30'><i><font color='green'></font></i>
<a name='L31'><i><font color='green'>Objects do not float around in memory; once allocated an object keeps</font></i>
<a name='L32'><i><font color='green'>the same size and address.  Objects that must hold variable-size data</font></i>
<a name='L33'><i><font color='green'>can contain pointers to variable-size parts of the object.  Not all</font></i>
<a name='L34'><i><font color='green'>objects of the same type have the same size; but the size cannot change</font></i>
<a name='L35'><i><font color='green'>after allocation.  (These restrictions are made so a reference to an</font></i>
<a name='L36'><i><font color='green'>object can be simply a pointer -- moving an object would require</font></i>
<a name='L37'><i><font color='green'>updating all the pointers, and changing an object's size would require</font></i>
<a name='L38'><i><font color='green'>moving it if there was another object right next to it.)</font></i>
<a name='L39'><i><font color='green'></font></i>
<a name='L40'><i><font color='green'>Objects are always accessed through pointers of the type 'PyObject *'.</font></i>
<a name='L41'><i><font color='green'>The type 'PyObject' is a structure that only contains the reference count</font></i>
<a name='L42'><i><font color='green'>and the type pointer.  The actual memory allocated for an object</font></i>
<a name='L43'><i><font color='green'>contains other data that can only be accessed after casting the pointer</font></i>
<a name='L44'><i><font color='green'>to a pointer to a longer structure type.  This longer type must start</font></i>
<a name='L45'><i><font color='green'>with the reference count and type fields; the macro PyObject_HEAD should be</font></i>
<a name='L46'><i><font color='green'>used for this (to accommodate for future changes).  The implementation</font></i>
<a name='L47'><i><font color='green'>of a particular object type can cast the object pointer to the proper</font></i>
<a name='L48'><i><font color='green'>type and back.</font></i>
<a name='L49'><i><font color='green'></font></i>
<a name='L50'><i><font color='green'>A standard interface exists for objects that contain an array of items</font></i>
<a name='L51'><i><font color='green'>whose size is determined when the object is allocated.</font></i>
<a name='L52'><i><font color='green'>*/</font></i>
<a name='L53'>
<a name='L54'><i><font color='green'>/* Py_DEBUG implies Py_TRACE_REFS. */</font></i>
<a name='L55'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L366' title='Defined at 366 in PC/pyconfig.h.'>Py_DEBUG</a>) &amp;&amp; !<b>defined</b>(<a href='../S/544.html#L56' title='Defined at 56 in Include/object.h.'>Py_TRACE_REFS</a>)
<a name='L56'><font color='darkred'>#define</font> <a href='../R/3807.html' title='Multiple refered from 17 places.'>Py_TRACE_REFS</a>
<a name='L57'><font color='darkred'>#endif</font>
<a name='L58'>
<a name='L59'><i><font color='green'>/* Py_TRACE_REFS implies Py_REF_DEBUG. */</font></i>
<a name='L60'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/544.html#L56' title='Defined at 56 in Include/object.h.'>Py_TRACE_REFS</a>) &amp;&amp; !<b>defined</b>(<a href='../S/544.html#L61' title='Defined at 61 in Include/object.h.'>Py_REF_DEBUG</a>)
<a name='L61'><font color='darkred'>#define</font> <a href='../R/3780.html' title='Multiple refered from 10 places.'>Py_REF_DEBUG</a>
<a name='L62'><font color='darkred'>#endif</font>
<a name='L63'>
<a name='L64'><font color='darkred'>#if</font> <b>defined</b>(Py_LIMITED_API) &amp;&amp; <b>defined</b>(<a href='../S/544.html#L61' title='Defined at 61 in Include/object.h.'>Py_REF_DEBUG</a>)
<a name='L65'><font color='darkred'>#error</font> Py_LIMITED_API is incompatible with Py_DEBUG, Py_TRACE_REFS, and Py_REF_DEBUG
<a name='L66'><font color='darkred'>#endif</font>
<a name='L67'>
<a name='L68'><font color='darkred'>#ifdef</font> <a href='../S/544.html#L56' title='Defined at 56 in Include/object.h.'>Py_TRACE_REFS</a>
<a name='L69'><i><font color='green'>/* Define pointers to support a doubly-linked list of all live heap objects. */</font></i>
<a name='L70'><font color='darkred'>#define</font> <a href='../S/544.html#L106' title='Refered from 106 in Include/object.h.'>_PyObject_HEAD_EXTRA</a>            \
<a name='L71'>    <b>struct</b> <a href='../S/544.html#L105' title='Defined at 105 in Include/object.h.'>_object</a> *_ob_next;           \
<a name='L72'>    <b>struct</b> <a href='../S/544.html#L105' title='Defined at 105 in Include/object.h.'>_object</a> *_ob_prev;
<a name='L73'>
<a name='L74'><font color='darkred'>#define</font> <a href='../R/5466.html' title='Multiple refered from 4 places.'>_PyObject_EXTRA_INIT</a> 0, 0,
<a name='L75'>
<a name='L76'><font color='darkred'>#else</font>
<a name='L77'><font color='darkred'>#define</font> <a href='../S/544.html#L106' title='Refered from 106 in Include/object.h.'>_PyObject_HEAD_EXTRA</a>
<a name='L78'><font color='darkred'>#define</font> <a href='../R/5466.html' title='Multiple refered from 4 places.'>_PyObject_EXTRA_INIT</a>
<a name='L79'><font color='darkred'>#endif</font>
<a name='L80'>
<a name='L81'><i><font color='green'>/* PyObject_HEAD defines the initial segment of every PyObject. */</font></i>
<a name='L82'><font color='darkred'>#define</font> <a href='../R/3273.html' title='Multiple refered from 167 places.'>PyObject_HEAD</a>                   <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> ob_base;
<a name='L83'>
<a name='L84'><font color='darkred'>#define</font> <a href='../R/3274.html' title='Multiple refered from 5 places.'>PyObject_HEAD_INIT</a>(type)        \
<a name='L85'>    <font color='red'>{</font> <a href='../D/6153.html' title='Multiple defined in 2 places.'>_PyObject_EXTRA_INIT</a>              \
<a name='L86'>    1, type <font color='red'>}</font>,
<a name='L87'>
<a name='L88'><font color='darkred'>#define</font> <a href='../R/3614.html' title='Multiple refered from 247 places.'>PyVarObject_HEAD_INIT</a>(type, size)       \
<a name='L89'>    <font color='red'>{</font> <a href='../S/544.html#L84' title='Defined at 84 in Include/object.h.'>PyObject_HEAD_INIT</a>(type) size <font color='red'>}</font>,
<a name='L90'>
<a name='L91'><i><font color='green'>/* PyObject_VAR_HEAD defines the initial segment of all variable-size</font></i>
<a name='L92'><i><font color='green'> * container objects.  These end with a declaration of an array with 1</font></i>
<a name='L93'><i><font color='green'> * element, but enough space is malloc'ed so that the array actually</font></i>
<a name='L94'><i><font color='green'> * has room for ob_size elements.  Note that ob_size is an element count,</font></i>
<a name='L95'><i><font color='green'> * not necessarily a byte count.</font></i>
<a name='L96'><i><font color='green'> */</font></i>
<a name='L97'><font color='darkred'>#define</font> <a href='../R/3302.html' title='Multiple refered from 14 places.'>PyObject_VAR_HEAD</a>      <a href='../S/544.html#L114' title='Defined at 114 in Include/object.h.'>PyVarObject</a> ob_base;
<a name='L98'><font color='darkred'>#define</font> Py_INVALID_SIZE (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)-1
<a name='L99'>
<a name='L100'><i><font color='green'>/* Nothing is actually declared to be a PyObject, but every pointer to</font></i>
<a name='L101'><i><font color='green'> * a Python object can be cast to a PyObject*.  This is inheritance built</font></i>
<a name='L102'><i><font color='green'> * by hand.  Similarly every pointer to a variable-size Python object can,</font></i>
<a name='L103'><i><font color='green'> * in addition, be cast to PyVarObject*.</font></i>
<a name='L104'><i><font color='green'> */</font></i>
<a name='L105'><b>typedef</b> <b>struct</b> <a href='../R/5805.html' title='Multiple refered from 2 places.'>_object</a> <font color='red'>{</font>
<a name='L106'>    <a href='../D/6167.html' title='Multiple defined in 2 places.'>_PyObject_HEAD_EXTRA</a>
<a name='L107'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ob_refcnt;
<a name='L108'>    <b>struct</b> <a href='../D/6629.html' title='Multiple defined in 2 places.'>_typeobject</a> *ob_type;
<a name='L109'><font color='red'>}</font> <a href='../R/3241.html' title='Multiple refered from 10003 places.'>PyObject</a>;
<a name='L110'>
<a name='L111'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L112'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> ob_base;
<a name='L113'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ob_size; <i><font color='green'>/* Number of items in variable part */</font></i>
<a name='L114'><font color='red'>}</font> <a href='../R/3613.html' title='Multiple refered from 18 places.'>PyVarObject</a>;
<a name='L115'>
<a name='L116'><font color='darkred'>#define</font> <a href='../R/3779.html' title='Multiple refered from 45 places.'>Py_REFCNT</a>(ob)           (((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)(ob))-&gt;ob_refcnt)
<a name='L117'><font color='darkred'>#define</font> <a href='../R/3810.html' title='Multiple refered from 598 places.'>Py_TYPE</a>(ob)             (((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)(ob))-&gt;ob_type)
<a name='L118'><font color='darkred'>#define</font> <a href='../R/3787.html' title='Multiple refered from 533 places.'>Py_SIZE</a>(ob)             (((<a href='../S/544.html#L114' title='Defined at 114 in Include/object.h.'>PyVarObject</a>*)(ob))-&gt;ob_size)
<a name='L119'>
<a name='L120'><i><font color='green'>/*</font></i>
<a name='L121'><i><font color='green'>Type objects contain a string containing the type name (to help somewhat</font></i>
<a name='L122'><i><font color='green'>in debugging), the allocation parameters (see PyObject_New() and</font></i>
<a name='L123'><i><font color='green'>PyObject_NewVar()),</font></i>
<a name='L124'><i><font color='green'>and methods for accessing objects of the type.  Methods are optional, a</font></i>
<a name='L125'><i><font color='green'>nil pointer meaning that particular kind of access is not available for</font></i>
<a name='L126'><i><font color='green'>this type.  The Py_DECREF() macro uses the tp_dealloc method without</font></i>
<a name='L127'><i><font color='green'>checking for a nil pointer; it should always be implemented except if</font></i>
<a name='L128'><i><font color='green'>the implementation can guarantee that the reference count will never</font></i>
<a name='L129'><i><font color='green'>reach zero (e.g., for statically allocated type objects).</font></i>
<a name='L130'><i><font color='green'></font></i>
<a name='L131'><i><font color='green'>NB: the methods for certain type groups are now contained in separate</font></i>
<a name='L132'><i><font color='green'>method blocks.</font></i>
<a name='L133'><i><font color='green'>*/</font></i>
<a name='L134'>
<a name='L135'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> * (*unaryfunc)(PyObject *);
<a name='L136'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> * (*binaryfunc)(PyObject *, PyObject *);
<a name='L137'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> * (*ternaryfunc)(PyObject *, PyObject *, PyObject *);
<a name='L138'><b>typedef</b> <b>int</b> (*inquiry)(PyObject *);
<a name='L139'><b>typedef</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> (*lenfunc)(PyObject *);
<a name='L140'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*ssizeargfunc)(PyObject *, Py_ssize_t);
<a name='L141'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*ssizessizeargfunc)(PyObject *, Py_ssize_t, Py_ssize_t);
<a name='L142'><b>typedef</b> <b>int</b>(*ssizeobjargproc)(PyObject *, Py_ssize_t, PyObject *);
<a name='L143'><b>typedef</b> <b>int</b>(*ssizessizeobjargproc)(PyObject *, Py_ssize_t, Py_ssize_t, PyObject *);
<a name='L144'><b>typedef</b> <b>int</b>(*objobjargproc)(PyObject *, PyObject *, PyObject *);
<a name='L145'>
<a name='L146'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L147'><i><font color='green'>/* buffer interface */</font></i>
<a name='L148'><b>typedef</b> <b>struct</b> bufferinfo <font color='red'>{</font>
<a name='L149'>    <b>void</b> *buf;
<a name='L150'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;        <i><font color='green'>/* owned reference */</font></i>
<a name='L151'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L152'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> itemsize;  <i><font color='green'>/* This is Py_ssize_t so it can be</font></i>
<a name='L153'><i><font color='green'>                             pointed to by strides in simple case.*/</font></i>
<a name='L154'>    <b>int</b> readonly;
<a name='L155'>    <b>int</b> ndim;
<a name='L156'>    <b>char</b> *format;
<a name='L157'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *shape;
<a name='L158'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *strides;
<a name='L159'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *suboffsets;
<a name='L160'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> smalltable[2];  <i><font color='green'>/* static store for shape and strides of</font></i>
<a name='L161'><i><font color='green'>                                  mono-dimensional buffers. */</font></i>
<a name='L162'>    <b>void</b> *internal;
<a name='L163'><font color='red'>}</font> <a href='../R/3856.html' title='Multiple refered from 142 places.'>Py_buffer</a>;
<a name='L164'>
<a name='L165'><b>typedef</b> <b>int</b> (*getbufferproc)(PyObject *, Py_buffer *, <b>int</b>);
<a name='L166'><b>typedef</b> <b>void</b> (*releasebufferproc)(PyObject *, Py_buffer *);
<a name='L167'>
<a name='L168'>    <i><font color='green'>/* Flags for getting buffers */</font></i>
<a name='L169'><font color='darkred'>#define</font> <a href='../R/2504.html' title='Multiple refered from 16 places.'>PyBUF_SIMPLE</a> 0
<a name='L170'><font color='darkred'>#define</font> <a href='../R/2506.html' title='Multiple refered from 8 places.'>PyBUF_WRITABLE</a> 0x0001
<a name='L171'><i><font color='green'>/*  we used to include an E, backwards compatible alias  */</font></i>
<a name='L172'><font color='darkred'>#define</font> PyBUF_WRITEABLE <a href='../S/544.html#L170' title='Defined at 170 in Include/object.h.'>PyBUF_WRITABLE</a>
<a name='L173'><font color='darkred'>#define</font> <a href='../R/2499.html' title='Multiple refered from 6 places.'>PyBUF_FORMAT</a> 0x0004
<a name='L174'><font color='darkred'>#define</font> <a href='../R/2503.html' title='Multiple refered from 5 places.'>PyBUF_ND</a> 0x0008
<a name='L175'><font color='darkred'>#define</font> <a href='../R/2505.html' title='Multiple refered from 10 places.'>PyBUF_STRIDES</a> (0x0010 | <a href='../S/544.html#L174' title='Defined at 174 in Include/object.h.'>PyBUF_ND</a>)
<a name='L176'><font color='darkred'>#define</font> PyBUF_C_CONTIGUOUS (0x0020 | <a href='../S/544.html#L175' title='Defined at 175 in Include/object.h.'>PyBUF_STRIDES</a>)
<a name='L177'><font color='darkred'>#define</font> PyBUF_F_CONTIGUOUS (0x0040 | <a href='../S/544.html#L175' title='Defined at 175 in Include/object.h.'>PyBUF_STRIDES</a>)
<a name='L178'><font color='darkred'>#define</font> PyBUF_ANY_CONTIGUOUS (0x0080 | <a href='../S/544.html#L175' title='Defined at 175 in Include/object.h.'>PyBUF_STRIDES</a>)
<a name='L179'><font color='darkred'>#define</font> <a href='../R/2502.html' title='Multiple refered from 2 places.'>PyBUF_INDIRECT</a> (0x0100 | <a href='../S/544.html#L175' title='Defined at 175 in Include/object.h.'>PyBUF_STRIDES</a>)
<a name='L180'>
<a name='L181'><font color='darkred'>#define</font> <a href='../R/2497.html' title='Multiple refered from 2 places.'>PyBUF_CONTIG</a> (<a href='../S/544.html#L174' title='Defined at 174 in Include/object.h.'>PyBUF_ND</a> | <a href='../S/544.html#L170' title='Defined at 170 in Include/object.h.'>PyBUF_WRITABLE</a>)
<a name='L182'><font color='darkred'>#define</font> <a href='../R/2498.html' title='Multiple refered from 7 places.'>PyBUF_CONTIG_RO</a> (<a href='../S/544.html#L174' title='Defined at 174 in Include/object.h.'>PyBUF_ND</a>)
<a name='L183'>
<a name='L184'><font color='darkred'>#define</font> PyBUF_STRIDED (<a href='../S/544.html#L175' title='Defined at 175 in Include/object.h.'>PyBUF_STRIDES</a> | <a href='../S/544.html#L170' title='Defined at 170 in Include/object.h.'>PyBUF_WRITABLE</a>)
<a name='L185'><font color='darkred'>#define</font> PyBUF_STRIDED_RO (<a href='../S/544.html#L175' title='Defined at 175 in Include/object.h.'>PyBUF_STRIDES</a>)
<a name='L186'>
<a name='L187'><font color='darkred'>#define</font> PyBUF_RECORDS (<a href='../S/544.html#L175' title='Defined at 175 in Include/object.h.'>PyBUF_STRIDES</a> | <a href='../S/544.html#L170' title='Defined at 170 in Include/object.h.'>PyBUF_WRITABLE</a> | <a href='../S/544.html#L173' title='Defined at 173 in Include/object.h.'>PyBUF_FORMAT</a>)
<a name='L188'><font color='darkred'>#define</font> PyBUF_RECORDS_RO (<a href='../S/544.html#L175' title='Defined at 175 in Include/object.h.'>PyBUF_STRIDES</a> | <a href='../S/544.html#L173' title='Defined at 173 in Include/object.h.'>PyBUF_FORMAT</a>)
<a name='L189'>
<a name='L190'><font color='darkred'>#define</font> <a href='../R/2500.html' title='Multiple refered from 2 places.'>PyBUF_FULL</a> (<a href='../S/544.html#L179' title='Defined at 179 in Include/object.h.'>PyBUF_INDIRECT</a> | <a href='../S/544.html#L170' title='Defined at 170 in Include/object.h.'>PyBUF_WRITABLE</a> | <a href='../S/544.html#L173' title='Defined at 173 in Include/object.h.'>PyBUF_FORMAT</a>)
<a name='L191'><font color='darkred'>#define</font> <a href='../R/2501.html' title='Multiple refered from 6 places.'>PyBUF_FULL_RO</a> (<a href='../S/544.html#L179' title='Defined at 179 in Include/object.h.'>PyBUF_INDIRECT</a> | <a href='../S/544.html#L173' title='Defined at 173 in Include/object.h.'>PyBUF_FORMAT</a>)
<a name='L192'>
<a name='L193'>
<a name='L194'><font color='darkred'>#define</font> PyBUF_READ  0x100
<a name='L195'><font color='darkred'>#define</font> <a href='../R/2507.html' title='Multiple refered from 2 places.'>PyBUF_WRITE</a> 0x200
<a name='L196'>
<a name='L197'><i><font color='green'>/* End buffer interface */</font></i>
<a name='L198'><font color='darkred'>#endif</font> <i><font color='green'>/* Py_LIMITED_API */</font></i>
<a name='L199'>
<a name='L200'><b>typedef</b> <b>int</b> (*objobjproc)(PyObject *, PyObject *);
<a name='L201'><b>typedef</b> <b>int</b> (*visitproc)(PyObject *, <b>void</b> *);
<a name='L202'><b>typedef</b> <b>int</b> (*traverseproc)(PyObject *, visitproc, <b>void</b> *);
<a name='L203'>
<a name='L204'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L205'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L206'>    <i><font color='green'>/* Number implementations must check *both*</font></i>
<a name='L207'><i><font color='green'>       arguments for proper type and implement the necessary conversions</font></i>
<a name='L208'><i><font color='green'>       in the slot functions themselves. */</font></i>
<a name='L209'>
<a name='L210'>    binaryfunc nb_add;
<a name='L211'>    binaryfunc nb_subtract;
<a name='L212'>    binaryfunc nb_multiply;
<a name='L213'>    binaryfunc nb_remainder;
<a name='L214'>    binaryfunc nb_divmod;
<a name='L215'>    ternaryfunc nb_power;
<a name='L216'>    unaryfunc nb_negative;
<a name='L217'>    unaryfunc nb_positive;
<a name='L218'>    unaryfunc nb_absolute;
<a name='L219'>    inquiry nb_bool;
<a name='L220'>    unaryfunc nb_invert;
<a name='L221'>    binaryfunc nb_lshift;
<a name='L222'>    binaryfunc nb_rshift;
<a name='L223'>    binaryfunc nb_and;
<a name='L224'>    binaryfunc nb_xor;
<a name='L225'>    binaryfunc nb_or;
<a name='L226'>    unaryfunc nb_int;
<a name='L227'>    <b>void</b> *nb_reserved;  <i><font color='green'>/* the slot formerly known as nb_long */</font></i>
<a name='L228'>    unaryfunc nb_float;
<a name='L229'>
<a name='L230'>    binaryfunc nb_inplace_add;
<a name='L231'>    binaryfunc nb_inplace_subtract;
<a name='L232'>    binaryfunc nb_inplace_multiply;
<a name='L233'>    binaryfunc nb_inplace_remainder;
<a name='L234'>    ternaryfunc nb_inplace_power;
<a name='L235'>    binaryfunc nb_inplace_lshift;
<a name='L236'>    binaryfunc nb_inplace_rshift;
<a name='L237'>    binaryfunc nb_inplace_and;
<a name='L238'>    binaryfunc nb_inplace_xor;
<a name='L239'>    binaryfunc nb_inplace_or;
<a name='L240'>
<a name='L241'>    binaryfunc nb_floor_divide;
<a name='L242'>    binaryfunc nb_true_divide;
<a name='L243'>    binaryfunc nb_inplace_floor_divide;
<a name='L244'>    binaryfunc nb_inplace_true_divide;
<a name='L245'>
<a name='L246'>    unaryfunc nb_index;
<a name='L247'><font color='red'>}</font> <a href='../R/3205.html' title='Multiple refered from 38 places.'>PyNumberMethods</a>;
<a name='L248'>
<a name='L249'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L250'>    <a href='../S/2562.html#L105' title='Defined at 105 in Modules/_elementtree.c.'>lenfunc</a> sq_length;
<a name='L251'>    binaryfunc sq_concat;
<a name='L252'>    ssizeargfunc sq_repeat;
<a name='L253'>    ssizeargfunc sq_item;
<a name='L254'>    <b>void</b> *was_sq_slice;
<a name='L255'>    ssizeobjargproc sq_ass_item;
<a name='L256'>    <b>void</b> *was_sq_ass_slice;
<a name='L257'>    objobjproc sq_contains;
<a name='L258'>
<a name='L259'>    binaryfunc sq_inplace_concat;
<a name='L260'>    ssizeargfunc sq_inplace_repeat;
<a name='L261'><font color='red'>}</font> <a href='../R/3367.html' title='Multiple refered from 43 places.'>PySequenceMethods</a>;
<a name='L262'>
<a name='L263'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L264'>    <a href='../S/2562.html#L105' title='Defined at 105 in Modules/_elementtree.c.'>lenfunc</a> mp_length;
<a name='L265'>    binaryfunc mp_subscript;
<a name='L266'>    objobjargproc mp_ass_subscript;
<a name='L267'><font color='red'>}</font> <a href='../R/3144.html' title='Multiple refered from 28 places.'>PyMappingMethods</a>;
<a name='L268'>
<a name='L269'>
<a name='L270'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L271'>     getbufferproc bf_getbuffer;
<a name='L272'>     releasebufferproc bf_releasebuffer;
<a name='L273'><font color='red'>}</font> <a href='../R/2512.html' title='Multiple refered from 21 places.'>PyBufferProcs</a>;
<a name='L274'><font color='darkred'>#endif</font> <i><font color='green'>/* Py_LIMITED_API */</font></i>
<a name='L275'>
<a name='L276'><b>typedef</b> <b>void</b> (*freefunc)(<b>void</b> *);
<a name='L277'><b>typedef</b> <b>void</b> (*destructor)(PyObject *);
<a name='L278'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L279'><i><font color='green'>/* We can't provide a full compile-time check that limited-API</font></i>
<a name='L280'><i><font color='green'>   users won't implement tp_print. However, not defining printfunc</font></i>
<a name='L281'><i><font color='green'>   and making tp_print of a different function pointer type</font></i>
<a name='L282'><i><font color='green'>   should at least cause a warning in most cases. */</font></i>
<a name='L283'><b>typedef</b> <b>int</b> (*printfunc)(PyObject *, FILE *, <b>int</b>);
<a name='L284'><font color='darkred'>#endif</font>
<a name='L285'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*getattrfunc)(PyObject *, <b>char</b> *);
<a name='L286'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*getattrofunc)(PyObject *, PyObject *);
<a name='L287'><b>typedef</b> <b>int</b> (*setattrfunc)(PyObject *, <b>char</b> *, PyObject *);
<a name='L288'><b>typedef</b> <b>int</b> (*setattrofunc)(PyObject *, PyObject *, PyObject *);
<a name='L289'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*reprfunc)(PyObject *);
<a name='L290'><b>typedef</b> <a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a> (*hashfunc)(PyObject *);
<a name='L291'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*richcmpfunc) (PyObject *, PyObject *, <b>int</b>);
<a name='L292'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*getiterfunc) (PyObject *);
<a name='L293'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*iternextfunc) (PyObject *);
<a name='L294'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*descrgetfunc) (PyObject *, PyObject *, PyObject *);
<a name='L295'><b>typedef</b> <b>int</b> (*descrsetfunc) (PyObject *, PyObject *, PyObject *);
<a name='L296'><b>typedef</b> <b>int</b> (*initproc)(PyObject *, PyObject *, PyObject *);
<a name='L297'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*newfunc)(<b>struct</b> _typeobject *, PyObject *, PyObject *);
<a name='L298'><b>typedef</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *(*allocfunc)(<b>struct</b> _typeobject *, Py_ssize_t);
<a name='L299'>
<a name='L300'><font color='darkred'>#ifdef</font> Py_LIMITED_API
<a name='L301'><b>typedef</b> <b>struct</b> <a href='../D/6629.html' title='Multiple defined in 2 places.'>_typeobject</a> <a href='../R/3500.html' title='Multiple refered from 662 places.'>PyTypeObject</a>; <i><font color='green'>/* opaque */</font></i>
<a name='L302'><font color='darkred'>#else</font>
<a name='L303'><b>typedef</b> <b>struct</b> <a href='../R/5880.html' title='Multiple refered from 9 places.'>_typeobject</a> <font color='red'>{</font>
<a name='L304'>    <a href='../S/544.html#L97' title='Defined at 97 in Include/object.h.'>PyObject_VAR_HEAD</a>
<a name='L305'>    <b>const</b> <b>char</b> *tp_name; <i><font color='green'>/* For printing, in format "&lt;module&gt;.&lt;name&gt;" */</font></i>
<a name='L306'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> tp_basicsize, tp_itemsize; <i><font color='green'>/* For allocation */</font></i>
<a name='L307'>
<a name='L308'>    <i><font color='green'>/* Methods to implement standard operations */</font></i>
<a name='L309'>
<a name='L310'>    <a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a> tp_dealloc;
<a name='L311'>    printfunc tp_print;
<a name='L312'>    getattrfunc tp_getattr;
<a name='L313'>    setattrfunc tp_setattr;
<a name='L314'>    <b>void</b> *tp_reserved; <i><font color='green'>/* formerly known as tp_compare */</font></i>
<a name='L315'>    reprfunc tp_repr;
<a name='L316'>
<a name='L317'>    <i><font color='green'>/* Method suites for standard classes */</font></i>
<a name='L318'>
<a name='L319'>    <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *tp_as_number;
<a name='L320'>    <a href='../S/544.html#L261' title='Defined at 261 in Include/object.h.'>PySequenceMethods</a> *tp_as_sequence;
<a name='L321'>    <a href='../S/544.html#L267' title='Defined at 267 in Include/object.h.'>PyMappingMethods</a> *tp_as_mapping;
<a name='L322'>
<a name='L323'>    <i><font color='green'>/* More standard operations (here for binary compatibility) */</font></i>
<a name='L324'>
<a name='L325'>    hashfunc tp_hash;
<a name='L326'>    ternaryfunc tp_call;
<a name='L327'>    reprfunc tp_str;
<a name='L328'>    getattrofunc tp_getattro;
<a name='L329'>    setattrofunc tp_setattro;
<a name='L330'>
<a name='L331'>    <i><font color='green'>/* Functions to access object as input/output buffer */</font></i>
<a name='L332'>    <a href='../S/544.html#L273' title='Defined at 273 in Include/object.h.'>PyBufferProcs</a> *tp_as_buffer;
<a name='L333'>
<a name='L334'>    <i><font color='green'>/* Flags to define presence of optional/expanded features */</font></i>
<a name='L335'>    <b>long</b> tp_flags;
<a name='L336'>
<a name='L337'>    <b>const</b> <b>char</b> *tp_doc; <i><font color='green'>/* Documentation string */</font></i>
<a name='L338'>
<a name='L339'>    <i><font color='green'>/* Assigned meaning in release 2.0 */</font></i>
<a name='L340'>    <i><font color='green'>/* call function for all accessible objects */</font></i>
<a name='L341'>    traverseproc tp_traverse;
<a name='L342'>
<a name='L343'>    <i><font color='green'>/* delete references to contained objects */</font></i>
<a name='L344'>    inquiry tp_clear;
<a name='L345'>
<a name='L346'>    <i><font color='green'>/* Assigned meaning in release 2.1 */</font></i>
<a name='L347'>    <i><font color='green'>/* rich comparisons */</font></i>
<a name='L348'>    richcmpfunc tp_richcompare;
<a name='L349'>
<a name='L350'>    <i><font color='green'>/* weak reference enabler */</font></i>
<a name='L351'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> tp_weaklistoffset;
<a name='L352'>
<a name='L353'>    <i><font color='green'>/* Iterators */</font></i>
<a name='L354'>    getiterfunc tp_iter;
<a name='L355'>    iternextfunc tp_iternext;
<a name='L356'>
<a name='L357'>    <i><font color='green'>/* Attribute descriptor and subclassing stuff */</font></i>
<a name='L358'>    <b>struct</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> *tp_methods;
<a name='L359'>    <b>struct</b> <a href='../D/3506.html' title='Multiple defined in 2 places.'>PyMemberDef</a> *tp_members;
<a name='L360'>    <b>struct</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> *tp_getset;
<a name='L361'>    <b>struct</b> <a href='../D/6629.html' title='Multiple defined in 2 places.'>_typeobject</a> *tp_base;
<a name='L362'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tp_dict;
<a name='L363'>    descrgetfunc tp_descr_get;
<a name='L364'>    descrsetfunc tp_descr_set;
<a name='L365'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> tp_dictoffset;
<a name='L366'>    initproc tp_init;
<a name='L367'>    allocfunc tp_alloc;
<a name='L368'>    newfunc tp_new;
<a name='L369'>    freefunc tp_free; <i><font color='green'>/* Low-level free-memory routine */</font></i>
<a name='L370'>    inquiry tp_is_gc; <i><font color='green'>/* For PyObject_IS_GC */</font></i>
<a name='L371'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tp_bases;
<a name='L372'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tp_mro; <i><font color='green'>/* method resolution order */</font></i>
<a name='L373'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tp_cache;
<a name='L374'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tp_subclasses;
<a name='L375'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tp_weaklist;
<a name='L376'>    <a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a> tp_del;
<a name='L377'>
<a name='L378'>    <i><font color='green'>/* Type attribute cache version tag. Added in version 2.6 */</font></i>
<a name='L379'>    <b>unsigned</b> <b>int</b> tp_version_tag;
<a name='L380'>
<a name='L381'><font color='darkred'>#ifdef</font> COUNT_ALLOCS
<a name='L382'>    <i><font color='green'>/* these must be last and never explicitly initialized */</font></i>
<a name='L383'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> tp_allocs;
<a name='L384'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> tp_frees;
<a name='L385'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> tp_maxalloc;
<a name='L386'>    <b>struct</b> <a href='../D/6629.html' title='Multiple defined in 2 places.'>_typeobject</a> *tp_prev;
<a name='L387'>    <b>struct</b> <a href='../D/6629.html' title='Multiple defined in 2 places.'>_typeobject</a> *tp_next;
<a name='L388'><font color='darkred'>#endif</font>
<a name='L389'><font color='red'>}</font> <a href='../R/3500.html' title='Multiple refered from 662 places.'>PyTypeObject</a>;
<a name='L390'><font color='darkred'>#endif</font>
<a name='L391'>
<a name='L392'><b>typedef</b> <b>struct</b><font color='red'>{</font>
<a name='L393'>    <b>int</b> slot;    <i><font color='green'>/* slot id, see below */</font></i>
<a name='L394'>    <b>void</b> *pfunc; <i><font color='green'>/* function pointer */</font></i>
<a name='L395'><font color='red'>}</font> <a href='../R/3510.html' title='Multiple refered from 5 places.'>PyType_Slot</a>;
<a name='L396'>
<a name='L397'><b>typedef</b> <b>struct</b><font color='red'>{</font>
<a name='L398'>    <b>const</b> <b>char</b>* name;
<a name='L399'>    <b>int</b> basicsize;
<a name='L400'>    <b>int</b> itemsize;
<a name='L401'>    <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>;
<a name='L402'>    <a href='../S/544.html#L395' title='Defined at 395 in Include/object.h.'>PyType_Slot</a> *slots; <i><font color='green'>/* terminated by slot==0. */</font></i>
<a name='L403'><font color='red'>}</font> <a href='../R/3511.html' title='Multiple refered from 3 places.'>PyType_Spec</a>;
<a name='L404'>
<a name='L405'><a href='../R/2475.html' title='Multiple refered from 87 places.'>PyAPI_FUNC</a>(PyObject*) PyType_FromSpec(PyType_Spec*);
<a name='L406'>
<a name='L407'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L408'><i><font color='green'>/* The *real* layout of a type object when allocated on the heap */</font></i>
<a name='L409'><b>typedef</b> <b>struct</b> _heaptypeobject <font color='red'>{</font>
<a name='L410'>    <i><font color='green'>/* Note: there's a dependency on the order of these members</font></i>
<a name='L411'><i><font color='green'>       in slotptr() in typeobject.c . */</font></i>
<a name='L412'>    <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> ht_type;
<a name='L413'>    <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> as_number;
<a name='L414'>    <a href='../S/544.html#L267' title='Defined at 267 in Include/object.h.'>PyMappingMethods</a> as_mapping;
<a name='L415'>    <a href='../S/544.html#L261' title='Defined at 261 in Include/object.h.'>PySequenceMethods</a> as_sequence; <i><font color='green'>/* as_sequence comes after as_mapping,</font></i>
<a name='L416'><i><font color='green'>                                      so that the mapping wins when both</font></i>
<a name='L417'><i><font color='green'>                                      the mapping and the sequence define</font></i>
<a name='L418'><i><font color='green'>                                      a given operator (e.g. __getitem__).</font></i>
<a name='L419'><i><font color='green'>                                      see add_operators() in typeobject.c . */</font></i>
<a name='L420'>    <a href='../S/544.html#L273' title='Defined at 273 in Include/object.h.'>PyBufferProcs</a> as_buffer;
<a name='L421'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ht_name, *ht_slots;
<a name='L422'>    <i><font color='green'>/* here are optional user slots, followed by the members. */</font></i>
<a name='L423'><font color='red'>}</font> PyHeapTypeObject;
<a name='L424'>
<a name='L425'><i><font color='green'>/* access macro to the members which are floating "behind" the object */</font></i>
<a name='L426'><font color='darkred'>#define</font> <a href='../R/3005.html' title='Multiple refered from 4 places.'>PyHeapType_GET_MEMBERS</a>(etype) \
<a name='L427'>    ((<a href='../D/3506.html' title='Multiple defined in 2 places.'>PyMemberDef</a> *)(((<b>char</b> *)etype) + <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(etype)-&gt;tp_basicsize))
<a name='L428'><font color='darkred'>#endif</font>
<a name='L429'>
<a name='L430'><i><font color='green'>/* Generic type check */</font></i>
<a name='L431'><a href='../D/2716.html' title='Multiple defined in 45 places.'>PyAPI_FUNC</a>(<b>int</b>) PyType_IsSubtype(PyTypeObject *, PyTypeObject *);
<a name='L432'><font color='darkred'>#define</font> PyObject_TypeCheck(ob, tp) \
<a name='L433'>    (Py_TYPE(ob) == (tp) || <a href='../S/2824.html#L1082' title='Defined at 1082 in Objects/typeobject.c.'>PyType_IsSubtype</a>(Py_TYPE(ob), (tp)))
<a name='L434'>
<a name='L435'>PyAPI_DATA(PyTypeObject) PyType_Type; <i><font color='green'>/* built-in 'type' */</font></i>
<a name='L436'>PyAPI_DATA(PyTypeObject) PyBaseObject_Type; <i><font color='green'>/* built-in 'object' */</font></i>
<a name='L437'>PyAPI_DATA(PyTypeObject) PySuper_Type; <i><font color='green'>/* built-in 'super' */</font></i>
<a name='L438'>
<a name='L439'>PyAPI_FUNC(<b>long</b>) PyType_GetFlags(PyTypeObject*);
<a name='L440'>
<a name='L441'><font color='darkred'>#define</font> PyType_Check(op) \
<a name='L442'>    PyType_FastSubclass(Py_TYPE(op), Py_TPFLAGS_TYPE_SUBCLASS)
<a name='L443'><font color='darkred'>#define</font> PyType_CheckExact(op) (Py_TYPE(op) == &amp;PyType_Type)
<a name='L444'>
<a name='L445'><a href='../D/2716.html' title='Multiple defined in 45 places.'>PyAPI_FUNC</a>(<b>int</b>) PyType_Ready(PyTypeObject *);
<a name='L446'>PyAPI_FUNC(PyObject *) PyType_GenericAlloc(PyTypeObject *, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>);
<a name='L447'>PyAPI_FUNC(PyObject *) PyType_GenericNew(PyTypeObject *,
<a name='L448'>                                               PyObject *, PyObject *);
<a name='L449'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L450'>PyAPI_FUNC(PyObject *) _PyType_Lookup(PyTypeObject *, PyObject *);
<a name='L451'>PyAPI_FUNC(PyObject *) _PyObject_LookupSpecial(PyObject *, <b>char</b> *, PyObject **);
<a name='L452'><font color='darkred'>#endif</font>
<a name='L453'>PyAPI_FUNC(<b>unsigned</b> <b>int</b>) PyType_ClearCache(<b>void</b>);
<a name='L454'>PyAPI_FUNC(<b>void</b>) PyType_Modified(PyTypeObject *);
<a name='L455'>
<a name='L456'><i><font color='green'>/* Generic operations on objects */</font></i>
<a name='L457'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L458'>PyAPI_FUNC(<b>int</b>) PyObject_Print(PyObject *, FILE *, <b>int</b>);
<a name='L459'>PyAPI_FUNC(<b>void</b>) _Py_BreakPoint(<b>void</b>);
<a name='L460'>PyAPI_FUNC(<b>void</b>) _PyObject_Dump(PyObject *);
<a name='L461'><font color='darkred'>#endif</font>
<a name='L462'>PyAPI_FUNC(PyObject *) PyObject_Repr(PyObject *);
<a name='L463'>PyAPI_FUNC(PyObject *) PyObject_Str(PyObject *);
<a name='L464'>PyAPI_FUNC(PyObject *) PyObject_ASCII(PyObject *);
<a name='L465'>PyAPI_FUNC(PyObject *) PyObject_Bytes(PyObject *);
<a name='L466'>PyAPI_FUNC(PyObject *) PyObject_RichCompare(PyObject *, PyObject *, <b>int</b>);
<a name='L467'>PyAPI_FUNC(<b>int</b>) PyObject_RichCompareBool(PyObject *, PyObject *, <b>int</b>);
<a name='L468'>PyAPI_FUNC(PyObject *) PyObject_GetAttrString(PyObject *, <b>const</b> <b>char</b> *);
<a name='L469'>PyAPI_FUNC(<b>int</b>) PyObject_SetAttrString(PyObject *, <b>const</b> <b>char</b> *, PyObject *);
<a name='L470'>PyAPI_FUNC(<b>int</b>) PyObject_HasAttrString(PyObject *, <b>const</b> <b>char</b> *);
<a name='L471'>PyAPI_FUNC(PyObject *) PyObject_GetAttr(PyObject *, PyObject *);
<a name='L472'>PyAPI_FUNC(<b>int</b>) PyObject_SetAttr(PyObject *, PyObject *, PyObject *);
<a name='L473'>PyAPI_FUNC(<b>int</b>) PyObject_HasAttr(PyObject *, PyObject *);
<a name='L474'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L475'>PyAPI_FUNC(PyObject **) _PyObject_GetDictPtr(PyObject *);
<a name='L476'><font color='darkred'>#endif</font>
<a name='L477'>PyAPI_FUNC(PyObject *) PyObject_SelfIter(PyObject *);
<a name='L478'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L479'>PyAPI_FUNC(PyObject *) _PyObject_NextNotImplemented(PyObject *);
<a name='L480'><font color='darkred'>#endif</font>
<a name='L481'>PyAPI_FUNC(PyObject *) PyObject_GenericGetAttr(PyObject *, PyObject *);
<a name='L482'>PyAPI_FUNC(<b>int</b>) PyObject_GenericSetAttr(PyObject *,
<a name='L483'>                                              PyObject *, PyObject *);
<a name='L484'>PyAPI_FUNC(<a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>) PyObject_Hash(PyObject *);
<a name='L485'>PyAPI_FUNC(<a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>) PyObject_HashNotImplemented(PyObject *);
<a name='L486'>PyAPI_FUNC(<b>int</b>) PyObject_IsTrue(PyObject *);
<a name='L487'>PyAPI_FUNC(<b>int</b>) PyObject_Not(PyObject *);
<a name='L488'>PyAPI_FUNC(<b>int</b>) PyCallable_Check(PyObject *);
<a name='L489'>
<a name='L490'>PyAPI_FUNC(<b>void</b>) PyObject_ClearWeakRefs(PyObject *);
<a name='L491'>
<a name='L492'><i><font color='green'>/* Same as PyObject_Generic{Get,Set}Attr, but passing the attributes</font></i>
<a name='L493'><i><font color='green'>   dict as the last parameter. */</font></i>
<a name='L494'>PyAPI_FUNC(PyObject *)
<a name='L495'>_PyObject_GenericGetAttrWithDict(PyObject *, PyObject *, PyObject *);
<a name='L496'>PyAPI_FUNC(<b>int</b>)
<a name='L497'>_PyObject_GenericSetAttrWithDict(PyObject *, PyObject *,
<a name='L498'>                                 PyObject *, PyObject *);
<a name='L499'>
<a name='L500'>
<a name='L501'><i><font color='green'>/* PyObject_Dir(obj) acts like Python builtins.dir(obj), returning a</font></i>
<a name='L502'><i><font color='green'>   list of strings.  PyObject_Dir(NULL) is like builtins.dir(),</font></i>
<a name='L503'><i><font color='green'>   returning the names of the current locals.  In this case, if there are</font></i>
<a name='L504'><i><font color='green'>   no current locals, NULL is returned, and PyErr_Occurred() is false.</font></i>
<a name='L505'><i><font color='green'>*/</font></i>
<a name='L506'>PyAPI_FUNC(PyObject *) PyObject_Dir(PyObject *);
<a name='L507'>
<a name='L508'>
<a name='L509'><i><font color='green'>/* Helpers for printing recursive container types */</font></i>
<a name='L510'>PyAPI_FUNC(<b>int</b>) Py_ReprEnter(PyObject *);
<a name='L511'>PyAPI_FUNC(<b>void</b>) Py_ReprLeave(PyObject *);
<a name='L512'>
<a name='L513'><i><font color='green'>/* Helpers for hash functions */</font></i>
<a name='L514'><font color='darkred'>#ifndef</font> Py_LIMITED_API
<a name='L515'>PyAPI_FUNC(<a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>) _Py_HashDouble(<b>double</b>);
<a name='L516'>PyAPI_FUNC(<a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>) _Py_HashPointer(<b>void</b>*);
<a name='L517'><font color='darkred'>#endif</font>
<a name='L518'>
<a name='L519'><i><font color='green'>/* Helper for passing objects to printf and the like */</font></i>
<a name='L520'><font color='darkred'>#define</font> PyObject_REPR(obj) _PyUnicode_AsString(PyObject_Repr(obj))
<a name='L521'>
<a name='L522'><i><font color='green'>/* Flag bits for printing: */</font></i>
<a name='L523'><font color='darkred'>#define</font> Py_PRINT_RAW    1       <i><font color='green'>/* No string quotes etc. */</font></i>
<a name='L524'>
<a name='L525'><i><font color='green'>/*</font></i>
<a name='L526'><i><font color='green'>`Type flags (tp_flags)</font></i>
<a name='L527'><i><font color='green'></font></i>
<a name='L528'><i><font color='green'>These flags are used to extend the type structure in a backwards-compatible</font></i>
<a name='L529'><i><font color='green'>fashion. Extensions can use the flags to indicate (and test) when a given</font></i>
<a name='L530'><i><font color='green'>type structure contains a new feature. The Python core will use these when</font></i>
<a name='L531'><i><font color='green'>introducing new functionality between major revisions (to avoid mid-version</font></i>
<a name='L532'><i><font color='green'>changes in the PYTHON_API_VERSION).</font></i>
<a name='L533'><i><font color='green'></font></i>
<a name='L534'><i><font color='green'>Arbitration of the flag bit positions will need to be coordinated among</font></i>
<a name='L535'><i><font color='green'>all extension writers who publically release their extensions (this will</font></i>
<a name='L536'><i><font color='green'>be fewer than you might expect!)..</font></i>
<a name='L537'><i><font color='green'></font></i>
<a name='L538'><i><font color='green'>Most flags were removed as of Python 3.0 to make room for new flags.  (Some</font></i>
<a name='L539'><i><font color='green'>flags are not for backwards compatibility but to indicate the presence of an</font></i>
<a name='L540'><i><font color='green'>optional feature; these flags remain of course.)</font></i>
<a name='L541'><i><font color='green'></font></i>
<a name='L542'><i><font color='green'>Type definitions should use Py_TPFLAGS_DEFAULT for their tp_flags value.</font></i>
<a name='L543'><i><font color='green'></font></i>
<a name='L544'><i><font color='green'>Code can use PyType_HasFeature(type_ob, flag_value) to test whether the</font></i>
<a name='L545'><i><font color='green'>given type object has a specified feature.</font></i>
<a name='L546'><i><font color='green'>*/</font></i>
<a name='L547'>
<a name='L548'><i><font color='green'>/* Set if the type object is dynamically allocated */</font></i>
<a name='L549'><font color='darkred'>#define</font> Py_TPFLAGS_HEAPTYPE (1L&lt;&lt;9)
<a name='L550'>
<a name='L551'><i><font color='green'>/* Set if the type allows subclassing */</font></i>
<a name='L552'><font color='darkred'>#define</font> Py_TPFLAGS_BASETYPE (1L&lt;&lt;10)
<a name='L553'>
<a name='L554'><i><font color='green'>/* Set if the type is 'ready' -- fully initialized */</font></i>
<a name='L555'><font color='darkred'>#define</font> Py_TPFLAGS_READY (1L&lt;&lt;12)
<a name='L556'>
<a name='L557'><i><font color='green'>/* Set while the type is being 'readied', to prevent recursive ready calls */</font></i>
<a name='L558'><font color='darkred'>#define</font> Py_TPFLAGS_READYING (1L&lt;&lt;13)
<a name='L559'>
<a name='L560'><i><font color='green'>/* Objects support garbage collection (see objimp.h) */</font></i>
<a name='L561'><font color='darkred'>#define</font> Py_TPFLAGS_HAVE_GC (1L&lt;&lt;14)
<a name='L562'>
<a name='L563'><i><font color='green'>/* These two bits are preserved for Stackless Python, next after this is 17 */</font></i>
<a name='L564'><font color='darkred'>#ifdef</font> STACKLESS
<a name='L565'><font color='darkred'>#define</font> Py_TPFLAGS_HAVE_STACKLESS_EXTENSION (3L&lt;&lt;15)
<a name='L566'><font color='darkred'>#else</font>
<a name='L567'><font color='darkred'>#define</font> Py_TPFLAGS_HAVE_STACKLESS_EXTENSION 0
<a name='L568'><font color='darkred'>#endif</font>
<a name='L569'>
<a name='L570'><i><font color='green'>/* Objects support type attribute cache */</font></i>
<a name='L571'><font color='darkred'>#define</font> Py_TPFLAGS_HAVE_VERSION_TAG   (1L&lt;&lt;18)
<a name='L572'><font color='darkred'>#define</font> Py_TPFLAGS_VALID_VERSION_TAG  (1L&lt;&lt;19)
<a name='L573'>
<a name='L574'><i><font color='green'>/* Type is abstract and cannot be instantiated */</font></i>
<a name='L575'><font color='darkred'>#define</font> Py_TPFLAGS_IS_ABSTRACT (1L&lt;&lt;20)
<a name='L576'>
<a name='L577'><i><font color='green'>/* These flags are used to determine if a type is a subclass. */</font></i>
<a name='L578'><font color='darkred'>#define</font> Py_TPFLAGS_INT_SUBCLASS         (1L&lt;&lt;23)
<a name='L579'><font color='darkred'>#define</font> Py_TPFLAGS_LONG_SUBCLASS        (1L&lt;&lt;24)
<a name='L580'><font color='darkred'>#define</font> Py_TPFLAGS_LIST_SUBCLASS        (1L&lt;&lt;25)
<a name='L581'><font color='darkred'>#define</font> Py_TPFLAGS_TUPLE_SUBCLASS       (1L&lt;&lt;26)
<a name='L582'><font color='darkred'>#define</font> Py_TPFLAGS_BYTES_SUBCLASS       (1L&lt;&lt;27)
<a name='L583'><font color='darkred'>#define</font> Py_TPFLAGS_UNICODE_SUBCLASS     (1L&lt;&lt;28)
<a name='L584'><font color='darkred'>#define</font> Py_TPFLAGS_DICT_SUBCLASS        (1L&lt;&lt;29)
<a name='L585'><font color='darkred'>#define</font> Py_TPFLAGS_BASE_EXC_SUBCLASS    (1L&lt;&lt;30)
<a name='L586'><font color='darkred'>#define</font> Py_TPFLAGS_TYPE_SUBCLASS        (1L&lt;&lt;31)
<a name='L587'>
<a name='L588'><font color='darkred'>#define</font> Py_TPFLAGS_DEFAULT  ( \
<a name='L589'>                 Py_TPFLAGS_HAVE_STACKLESS_EXTENSION | \
<a name='L590'>                 Py_TPFLAGS_HAVE_VERSION_TAG | \
<a name='L591'>                0)
<a name='L592'>
<a name='L593'><font color='darkred'>#ifdef</font> Py_LIMITED_API
<a name='L594'><font color='darkred'>#define</font> PyType_HasFeature(t,f)  ((PyType_GetFlags(t) &amp; (f)) != 0)
<a name='L595'><font color='darkred'>#else</font>
<a name='L596'><font color='darkred'>#define</font> <a href='../R/3505.html' title='Multiple refered from 10 places.'>PyType_HasFeature</a>(t,f)  (((t)-&gt;tp_flags &amp; (f)) != 0)
<a name='L597'><font color='darkred'>#endif</font>
<a name='L598'><font color='darkred'>#define</font> PyType_FastSubclass(t,f)  <a href='../S/544.html#L596' title='Defined at 596 in Include/object.h.'>PyType_HasFeature</a>(t,f)
<a name='L599'>
<a name='L600'>
<a name='L601'><i><font color='green'>/*</font></i>
<a name='L602'><i><font color='green'>The macros Py_INCREF(op) and Py_DECREF(op) are used to increment or decrement</font></i>
<a name='L603'><i><font color='green'>reference counts.  Py_DECREF calls the object's deallocator function when</font></i>
<a name='L604'><i><font color='green'>the refcount falls to 0; for</font></i>
<a name='L605'><i><font color='green'>objects that don't contain references to other objects or heap memory</font></i>
<a name='L606'><i><font color='green'>this can be the standard function free().  Both macros can be used</font></i>
<a name='L607'><i><font color='green'>wherever a void expression is allowed.  The argument must not be a</font></i>
<a name='L608'><i><font color='green'>NULL pointer.  If it may be NULL, use Py_XINCREF/Py_XDECREF instead.</font></i>
<a name='L609'><i><font color='green'>The macro _Py_NewReference(op) initialize reference counts to 1, and</font></i>
<a name='L610'><i><font color='green'>in special builds (Py_REF_DEBUG, Py_TRACE_REFS) performs additional</font></i>
<a name='L611'><i><font color='green'>bookkeeping appropriate to the special build.</font></i>
<a name='L612'><i><font color='green'></font></i>
<a name='L613'><i><font color='green'>We assume that the reference count field can never overflow; this can</font></i>
<a name='L614'><i><font color='green'>be proven when the size of the field is the same as the pointer size, so</font></i>
<a name='L615'><i><font color='green'>we ignore the possibility.  Provided a C int is at least 32 bits (which</font></i>
<a name='L616'><i><font color='green'>is implicitly assumed in many parts of this code), that's enough for</font></i>
<a name='L617'><i><font color='green'>about 2**31 references to an object.</font></i>
<a name='L618'><i><font color='green'></font></i>
<a name='L619'><i><font color='green'>XXX The following became out of date in Python 2.2, but I'm not sure</font></i>
<a name='L620'><i><font color='green'>XXX what the full truth is now.  Certainly, heap-allocated type objects</font></i>
<a name='L621'><i><font color='green'>XXX can and should be deallocated.</font></i>
<a name='L622'><i><font color='green'>Type objects should never be deallocated; the type pointer in an object</font></i>
<a name='L623'><i><font color='green'>is not considered to be a reference to the type object, to save</font></i>
<a name='L624'><i><font color='green'>complications in the deallocation function.  (This is actually a</font></i>
<a name='L625'><i><font color='green'>decision that's up to the implementer of each new type so if you want,</font></i>
<a name='L626'><i><font color='green'>you can count such references to the type object.)</font></i>
<a name='L627'><i><font color='green'></font></i>
<a name='L628'><i><font color='green'>*** WARNING*** The Py_DECREF macro must have a side-effect-free argument</font></i>
<a name='L629'><i><font color='green'>since it may evaluate its argument multiple times.  (The alternative</font></i>
<a name='L630'><i><font color='green'>would be to mace it a proper function or assign it to a global temporary</font></i>
<a name='L631'><i><font color='green'>variable first, both of which are slower; and in a multi-threaded</font></i>
<a name='L632'><i><font color='green'>environment the global variable trick is not safe.)</font></i>
<a name='L633'><i><font color='green'>*/</font></i>
<a name='L634'>
<a name='L635'><i><font color='green'>/* First define a pile of simple helper macros, one set per special</font></i>
<a name='L636'><i><font color='green'> * build symbol.  These either expand to the obvious things, or to</font></i>
<a name='L637'><i><font color='green'> * nothing at all when the special mode isn't in effect.  The main</font></i>
<a name='L638'><i><font color='green'> * macros can later be defined just once then, yet expand to different</font></i>
<a name='L639'><i><font color='green'> * things depending on which special build options are and aren't in effect.</font></i>
<a name='L640'><i><font color='green'> * Trust me &lt;wink&gt;:  while painful, this is 20x easier to understand than,</font></i>
<a name='L641'><i><font color='green'> * e.g, defining _Py_NewReference five different times in a maze of nested</font></i>
<a name='L642'><i><font color='green'> * #ifdefs (we used to do that -- it was impenetrable).</font></i>
<a name='L643'><i><font color='green'> */</font></i>
<a name='L644'><font color='darkred'>#ifdef</font> <a href='../S/544.html#L61' title='Defined at 61 in Include/object.h.'>Py_REF_DEBUG</a>
<a name='L645'><a href='../R/2474.html' title='Multiple refered from 37 places.'>PyAPI_DATA</a>(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>) _Py_RefTotal;
<a name='L646'>PyAPI_FUNC(<b>void</b>) _Py_NegativeRefcount(<b>const</b> <b>char</b> *fname,
<a name='L647'>                                            <b>int</b> lineno, PyObject *op);
<a name='L648'>PyAPI_FUNC(PyObject *) _PyDict_Dummy(<b>void</b>);
<a name='L649'>PyAPI_FUNC(PyObject *) _PySet_Dummy(<b>void</b>);
<a name='L650'>PyAPI_FUNC(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>) _Py_GetRefTotal(<b>void</b>);
<a name='L651'><font color='darkred'>#define</font> _Py_INC_REFTOTAL        _Py_RefTotal++
<a name='L652'><font color='darkred'>#define</font> _Py_DEC_REFTOTAL        _Py_RefTotal--
<a name='L653'><font color='darkred'>#define</font> _Py_REF_DEBUG_COMMA     ,
<a name='L654'><font color='darkred'>#define</font> _Py_CHECK_REFCNT(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)                                    \
<a name='L655'><font color='red'>{</font>       <b>if</b> (((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)-&gt;ob_refcnt &lt; 0)                             \
<a name='L656'>                <a href='../S/2803.html#L191' title='Defined at 191 in Objects/object.c.'>_Py_NegativeRefcount</a>(__FILE__, __LINE__,        \
<a name='L657'>                                     (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>));         \
<a name='L658'><font color='red'>}</font>
<a name='L659'><font color='darkred'>#else</font>
<a name='L660'><font color='darkred'>#define</font> <a href='../S/2803.html#L1652' title='Refered from 1652 in Objects/object.c.'>_Py_INC_REFTOTAL</a>
<a name='L661'><font color='darkred'>#define</font> <a href='../R/5561.html' title='Multiple refered from 8 places.'>_Py_DEC_REFTOTAL</a>
<a name='L662'><font color='darkred'>#define</font> <a href='../S/544.html#L715' title='Refered from 715 in Include/object.h.'>_Py_REF_DEBUG_COMMA</a>
<a name='L663'><font color='darkred'>#define</font> <a href='../S/544.html#L717' title='Refered from 717 in Include/object.h.'>_Py_CHECK_REFCNT</a>(OP)    <i><font color='green'>/* a semicolon */</font></i>;
<a name='L664'><font color='darkred'>#endif</font> <i><font color='green'>/* Py_REF_DEBUG */</font></i>
<a name='L665'>
<a name='L666'><font color='darkred'>#ifdef</font> COUNT_ALLOCS
<a name='L667'><a href='../D/2716.html' title='Multiple defined in 45 places.'>PyAPI_FUNC</a>(<b>void</b>) inc_count(PyTypeObject *);
<a name='L668'>PyAPI_FUNC(<b>void</b>) dec_count(PyTypeObject *);
<a name='L669'><font color='darkred'>#define</font> _Py_INC_TPALLOCS(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)    inc_count(Py_TYPE(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>))
<a name='L670'><font color='darkred'>#define</font> _Py_INC_TPFREES(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)     dec_count(Py_TYPE(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>))
<a name='L671'><font color='darkred'>#define</font> _Py_DEC_TPFREES(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)     Py_TYPE(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)-&gt;tp_frees--
<a name='L672'><font color='darkred'>#define</font> _Py_COUNT_ALLOCS_COMMA  ,
<a name='L673'><font color='darkred'>#else</font>
<a name='L674'><font color='darkred'>#define</font> _Py_INC_TPALLOCS(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)
<a name='L675'><font color='darkred'>#define</font> _Py_INC_TPFREES(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)
<a name='L676'><font color='darkred'>#define</font> _Py_DEC_TPFREES(<a href='../D/2417.html' title='Multiple defined in 2 places.'>OP</a>)
<a name='L677'><font color='darkred'>#define</font> _Py_COUNT_ALLOCS_COMMA
<a name='L678'><font color='darkred'>#endif</font> <i><font color='green'>/* COUNT_ALLOCS */</font></i>
<a name='L679'>
<a name='L680'><font color='darkred'>#ifdef</font> <a href='../S/544.html#L56' title='Defined at 56 in Include/object.h.'>Py_TRACE_REFS</a>
<a name='L681'><i><font color='green'>/* Py_TRACE_REFS is such major surgery that we call external routines. */</font></i>
<a name='L682'>PyAPI_FUNC(<b>void</b>) _Py_NewReference(PyObject *);
<a name='L683'>PyAPI_FUNC(<b>void</b>) _Py_ForgetReference(PyObject *);
<a name='L684'>PyAPI_FUNC(<b>void</b>) _Py_Dealloc(PyObject *);
<a name='L685'>PyAPI_FUNC(<b>void</b>) _Py_PrintReferences(FILE *);
<a name='L686'>PyAPI_FUNC(<b>void</b>) _Py_PrintReferenceAddresses(FILE *);
<a name='L687'>PyAPI_FUNC(<b>void</b>) _Py_AddToAllObjects(PyObject *, <b>int</b> force);
<a name='L688'>
<a name='L689'><font color='darkred'>#else</font>
<a name='L690'><i><font color='green'>/* Without Py_TRACE_REFS, there's little enough to do that we expand code</font></i>
<a name='L691'><i><font color='green'> * inline.</font></i>
<a name='L692'><i><font color='green'> */</font></i>
<a name='L693'><font color='darkred'>#define</font> _Py_NewReference(op) (                          \
<a name='L694'>    _Py_INC_TPALLOCS(op) _Py_COUNT_ALLOCS_COMMA         \
<a name='L695'>    _Py_INC_REFTOTAL  _Py_REF_DEBUG_COMMA               \
<a name='L696'>    Py_REFCNT(op) = 1)
<a name='L697'>
<a name='L698'><font color='darkred'>#define</font> <a href='../R/5567.html' title='Multiple refered from 7 places.'>_Py_ForgetReference</a>(op) _Py_INC_TPFREES(op)
<a name='L699'>
<a name='L700'><font color='darkred'>#ifdef</font> Py_LIMITED_API
<a name='L701'><a href='../R/2475.html' title='Multiple refered from 87 places.'>PyAPI_FUNC</a>(<b>void</b>) _Py_Dealloc(PyObject *);
<a name='L702'><font color='darkred'>#else</font>
<a name='L703'><font color='darkred'>#define</font> _Py_Dealloc(op) (                               \
<a name='L704'>    _Py_INC_TPFREES(op) _Py_COUNT_ALLOCS_COMMA          \
<a name='L705'>    (*Py_TYPE(op)-&gt;tp_dealloc)((PyObject *)(op)))
<a name='L706'><font color='darkred'>#endif</font>
<a name='L707'><font color='darkred'>#endif</font> <i><font color='green'>/* !Py_TRACE_REFS */</font></i>
<a name='L708'>
<a name='L709'><font color='darkred'>#define</font> Py_INCREF(op) (                         \
<a name='L710'>    _Py_INC_REFTOTAL  _Py_REF_DEBUG_COMMA       \
<a name='L711'>    ((PyObject*)(op))-&gt;ob_refcnt++)
<a name='L712'>
<a name='L713'><font color='darkred'>#define</font> Py_DECREF(op)                                   \
<a name='L714'>    <b>do</b> <font color='red'>{</font>                                                \
<a name='L715'>        <b>if</b> (<a href='../S/544.html#L661' title='Defined at 661 in Include/object.h.'>_Py_DEC_REFTOTAL</a>  <a href='../S/544.html#L662' title='Defined at 662 in Include/object.h.'>_Py_REF_DEBUG_COMMA</a>       \
<a name='L716'>        --((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)(op))-&gt;ob_refcnt != 0)            \
<a name='L717'>            <a href='../S/544.html#L663' title='Defined at 663 in Include/object.h.'>_Py_CHECK_REFCNT</a>(op)                        \
<a name='L718'>        <b>else</b>                                            \
<a name='L719'>        <a href='../D/6288.html' title='Multiple defined in 2 places.'>_Py_Dealloc</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)(op));                  \
<a name='L720'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L721'>
<a name='L722'><i><font color='green'>/* Safely decref `op` and set `op` to NULL, especially useful in tp_clear</font></i>
<a name='L723'><i><font color='green'> * and tp_dealloc implementatons.</font></i>
<a name='L724'><i><font color='green'> *</font></i>
<a name='L725'><i><font color='green'> * Note that "the obvious" code can be deadly:</font></i>
<a name='L726'><i><font color='green'> *</font></i>
<a name='L727'><i><font color='green'> *     Py_XDECREF(op);</font></i>
<a name='L728'><i><font color='green'> *     op = NULL;</font></i>
<a name='L729'><i><font color='green'> *</font></i>
<a name='L730'><i><font color='green'> * Typically, `op` is something like self-&gt;containee, and `self` is done</font></i>
<a name='L731'><i><font color='green'> * using its `containee` member.  In the code sequence above, suppose</font></i>
<a name='L732'><i><font color='green'> * `containee` is non-NULL with a refcount of 1.  Its refcount falls to</font></i>
<a name='L733'><i><font color='green'> * 0 on the first line, which can trigger an arbitrary amount of code,</font></i>
<a name='L734'><i><font color='green'> * possibly including finalizers (like __del__ methods or weakref callbacks)</font></i>
<a name='L735'><i><font color='green'> * coded in Python, which in turn can release the GIL and allow other threads</font></i>
<a name='L736'><i><font color='green'> * to run, etc.  Such code may even invoke methods of `self` again, or cause</font></i>
<a name='L737'><i><font color='green'> * cyclic gc to trigger, but-- oops! --self-&gt;containee still points to the</font></i>
<a name='L738'><i><font color='green'> * object being torn down, and it may be in an insane state while being torn</font></i>
<a name='L739'><i><font color='green'> * down.  This has in fact been a rich historic source of miserable (rare &amp;</font></i>
<a name='L740'><i><font color='green'> * hard-to-diagnose) segfaulting (and other) bugs.</font></i>
<a name='L741'><i><font color='green'> *</font></i>
<a name='L742'><i><font color='green'> * The safe way is:</font></i>
<a name='L743'><i><font color='green'> *</font></i>
<a name='L744'><i><font color='green'> *      Py_CLEAR(op);</font></i>
<a name='L745'><i><font color='green'> *</font></i>
<a name='L746'><i><font color='green'> * That arranges to set `op` to NULL _before_ decref'ing, so that any code</font></i>
<a name='L747'><i><font color='green'> * triggered as a side-effect of `op` getting torn down no longer believes</font></i>
<a name='L748'><i><font color='green'> * `op` points to a valid object.</font></i>
<a name='L749'><i><font color='green'> *</font></i>
<a name='L750'><i><font color='green'> * There are cases where it's safe to use the naive code, but they're brittle.</font></i>
<a name='L751'><i><font color='green'> * For example, if `op` points to a Python integer, you know that destroying</font></i>
<a name='L752'><i><font color='green'> * one of those can't cause problems -- but in part that relies on that</font></i>
<a name='L753'><i><font color='green'> * Python integers aren't currently weakly referencable.  Best practice is</font></i>
<a name='L754'><i><font color='green'> * to use Py_CLEAR() even if you can't think of a reason for why you need to.</font></i>
<a name='L755'><i><font color='green'> */</font></i>
<a name='L756'><font color='darkred'>#define</font> <a href='../R/3666.html' title='Multiple refered from 369 places.'>Py_CLEAR</a>(op)                            \
<a name='L757'>    <b>do</b> <font color='red'>{</font>                                        \
<a name='L758'>        <b>if</b> (op) <font color='red'>{</font>                               \
<a name='L759'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_py_tmp = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)(op);               \
<a name='L760'>            (op) = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;                        \
<a name='L761'>            Py_DECREF(_py_tmp);                 \
<a name='L762'>        <font color='red'>}</font>                                       \
<a name='L763'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L764'>
<a name='L765'><i><font color='green'>/* Macros to use in case the object pointer may be NULL: */</font></i>
<a name='L766'><font color='darkred'>#define</font> <a href='../R/3854.html' title='Multiple refered from 114 places.'>Py_XINCREF</a>(op) <b>do</b> <font color='red'>{</font> <b>if</b> ((op) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) ; <b>else</b> Py_INCREF(op); <font color='red'>}</font> <b>while</b> (0)
<a name='L767'><font color='darkred'>#define</font> <a href='../R/3853.html' title='Multiple refered from 1387 places.'>Py_XDECREF</a>(op) <b>do</b> <font color='red'>{</font> <b>if</b> ((op) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) ; <b>else</b> Py_DECREF(op); <font color='red'>}</font> <b>while</b> (0)
<a name='L768'>
<a name='L769'><i><font color='green'>/*</font></i>
<a name='L770'><i><font color='green'>These are provided as conveniences to Python runtime embedders, so that</font></i>
<a name='L771'><i><font color='green'>they can have object code that is not dependent on Python compilation flags.</font></i>
<a name='L772'><i><font color='green'>*/</font></i>
<a name='L773'><a href='../R/2475.html' title='Multiple refered from 87 places.'>PyAPI_FUNC</a>(<b>void</b>) Py_IncRef(PyObject *);
<a name='L774'>PyAPI_FUNC(<b>void</b>) Py_DecRef(PyObject *);
<a name='L775'>
<a name='L776'><i><font color='green'>/*</font></i>
<a name='L777'><i><font color='green'>_Py_NoneStruct is an object of undefined type which can be used in contexts</font></i>
<a name='L778'><i><font color='green'>where NULL (nil) is not suitable (since NULL often means 'error').</font></i>
<a name='L779'><i><font color='green'></font></i>
<a name='L780'><i><font color='green'>Don't forget to apply Py_INCREF() when returning this value!!!</font></i>
<a name='L781'><i><font color='green'>*/</font></i>
<a name='L782'>PyAPI_DATA(PyObject) _Py_NoneStruct; <i><font color='green'>/* Don't use this directly */</font></i>
<a name='L783'><font color='darkred'>#define</font> Py_None (&amp;_Py_NoneStruct)
<a name='L784'>
<a name='L785'><i><font color='green'>/* Macro for returning Py_None from a function */</font></i>
<a name='L786'><font color='darkred'>#define</font> Py_RETURN_NONE <b>return</b> Py_INCREF(Py_None), Py_None
<a name='L787'>
<a name='L788'><i><font color='green'>/*</font></i>
<a name='L789'><i><font color='green'>Py_NotImplemented is a singleton used to signal that an operation is</font></i>
<a name='L790'><i><font color='green'>not implemented for a given type combination.</font></i>
<a name='L791'><i><font color='green'>*/</font></i>
<a name='L792'>PyAPI_DATA(PyObject) _Py_NotImplementedStruct; <i><font color='green'>/* Don't use this directly */</font></i>
<a name='L793'><font color='darkred'>#define</font> Py_NotImplemented (&amp;_Py_NotImplementedStruct)
<a name='L794'>
<a name='L795'><i><font color='green'>/* Rich comparison opcodes */</font></i>
<a name='L796'><font color='darkred'>#define</font> Py_LT 0
<a name='L797'><font color='darkred'>#define</font> Py_LE 1
<a name='L798'><font color='darkred'>#define</font> Py_EQ 2
<a name='L799'><font color='darkred'>#define</font> Py_NE 3
<a name='L800'><font color='darkred'>#define</font> Py_GT 4
<a name='L801'><font color='darkred'>#define</font> Py_GE 5
<a name='L802'>
<a name='L803'><i><font color='green'>/* Maps Py_LT to Py_GT, ..., Py_GE to Py_LE.</font></i>
<a name='L804'><i><font color='green'> * Defined in object.c.</font></i>
<a name='L805'><i><font color='green'> */</font></i>
<a name='L806'>PyAPI_DATA(<b>int</b>) _Py_SwappedOp[];
<a name='L807'>
<a name='L808'>
<a name='L809'><i><font color='green'>/*</font></i>
<a name='L810'><i><font color='green'>More conventions</font></i>
<a name='L811'><i><font color='green'>================</font></i>
<a name='L812'><i><font color='green'></font></i>
<a name='L813'><i><font color='green'>Argument Checking</font></i>
<a name='L814'><i><font color='green'>-----------------</font></i>
<a name='L815'><i><font color='green'></font></i>
<a name='L816'><i><font color='green'>Functions that take objects as arguments normally don't check for nil</font></i>
<a name='L817'><i><font color='green'>arguments, but they do check the type of the argument, and return an</font></i>
<a name='L818'><i><font color='green'>error if the function doesn't apply to the type.</font></i>
<a name='L819'><i><font color='green'></font></i>
<a name='L820'><i><font color='green'>Failure Modes</font></i>
<a name='L821'><i><font color='green'>-------------</font></i>
<a name='L822'><i><font color='green'></font></i>
<a name='L823'><i><font color='green'>Functions may fail for a variety of reasons, including running out of</font></i>
<a name='L824'><i><font color='green'>memory.  This is communicated to the caller in two ways: an error string</font></i>
<a name='L825'><i><font color='green'>is set (see errors.h), and the function result differs: functions that</font></i>
<a name='L826'><i><font color='green'>normally return a pointer return NULL for failure, functions returning</font></i>
<a name='L827'><i><font color='green'>an integer return -1 (which could be a legal return value too!), and</font></i>
<a name='L828'><i><font color='green'>other functions return 0 for success and -1 for failure.</font></i>
<a name='L829'><i><font color='green'>Callers should always check for errors before using the result.  If</font></i>
<a name='L830'><i><font color='green'>an error was set, the caller must either explicitly clear it, or pass</font></i>
<a name='L831'><i><font color='green'>the error on to its caller.</font></i>
<a name='L832'><i><font color='green'></font></i>
<a name='L833'><i><font color='green'>Reference Counts</font></i>
<a name='L834'><i><font color='green'>----------------</font></i>
<a name='L835'><i><font color='green'></font></i>
<a name='L836'><i><font color='green'>It takes a while to get used to the proper usage of reference counts.</font></i>
<a name='L837'><i><font color='green'></font></i>
<a name='L838'><i><font color='green'>Functions that create an object set the reference count to 1; such new</font></i>
<a name='L839'><i><font color='green'>objects must be stored somewhere or destroyed again with Py_DECREF().</font></i>
<a name='L840'><i><font color='green'>Some functions that 'store' objects, such as PyTuple_SetItem() and</font></i>
<a name='L841'><i><font color='green'>PyList_SetItem(),</font></i>
<a name='L842'><i><font color='green'>don't increment the reference count of the object, since the most</font></i>
<a name='L843'><i><font color='green'>frequent use is to store a fresh object.  Functions that 'retrieve'</font></i>
<a name='L844'><i><font color='green'>objects, such as PyTuple_GetItem() and PyDict_GetItemString(), also</font></i>
<a name='L845'><i><font color='green'>don't increment</font></i>
<a name='L846'><i><font color='green'>the reference count, since most frequently the object is only looked at</font></i>
<a name='L847'><i><font color='green'>quickly.  Thus, to retrieve an object and store it again, the caller</font></i>
<a name='L848'><i><font color='green'>must call Py_INCREF() explicitly.</font></i>
<a name='L849'><i><font color='green'></font></i>
<a name='L850'><i><font color='green'>NOTE: functions that 'consume' a reference count, like</font></i>
<a name='L851'><i><font color='green'>PyList_SetItem(), consume the reference even if the object wasn't</font></i>
<a name='L852'><i><font color='green'>successfully stored, to simplify error handling.</font></i>
<a name='L853'><i><font color='green'></font></i>
<a name='L854'><i><font color='green'>It seems attractive to make other functions that take an object as</font></i>
<a name='L855'><i><font color='green'>argument consume a reference count; however, this may quickly get</font></i>
<a name='L856'><i><font color='green'>confusing (even the current practice is already confusing).  Consider</font></i>
<a name='L857'><i><font color='green'>it carefully, it may save lots of calls to Py_INCREF() and Py_DECREF() at</font></i>
<a name='L858'><i><font color='green'>times.</font></i>
<a name='L859'><i><font color='green'>*/</font></i>
<a name='L860'>
<a name='L861'>
<a name='L862'><i><font color='green'>/* Trashcan mechanism, thanks to Christian Tismer.</font></i>
<a name='L863'><i><font color='green'></font></i>
<a name='L864'><i><font color='green'>When deallocating a container object, it's possible to trigger an unbounded</font></i>
<a name='L865'><i><font color='green'>chain of deallocations, as each Py_DECREF in turn drops the refcount on "the</font></i>
<a name='L866'><i><font color='green'>next" object in the chain to 0.  This can easily lead to stack faults, and</font></i>
<a name='L867'><i><font color='green'>especially in threads (which typically have less stack space to work with).</font></i>
<a name='L868'><i><font color='green'></font></i>
<a name='L869'><i><font color='green'>A container object that participates in cyclic gc can avoid this by</font></i>
<a name='L870'><i><font color='green'>bracketing the body of its tp_dealloc function with a pair of macros:</font></i>
<a name='L871'><i><font color='green'></font></i>
<a name='L872'><i><font color='green'>static void</font></i>
<a name='L873'><i><font color='green'>mytype_dealloc(mytype *p)</font></i>
<a name='L874'><i><font color='green'>{</font></i>
<a name='L875'><i><font color='green'>    ... declarations go here ...</font></i>
<a name='L876'><i><font color='green'></font></i>
<a name='L877'><i><font color='green'>    PyObject_GC_UnTrack(p);        // must untrack first</font></i>
<a name='L878'><i><font color='green'>    Py_TRASHCAN_SAFE_BEGIN(p)</font></i>
<a name='L879'><i><font color='green'>    ... The body of the deallocator goes here, including all calls ...</font></i>
<a name='L880'><i><font color='green'>    ... to Py_DECREF on contained objects.                         ...</font></i>
<a name='L881'><i><font color='green'>    Py_TRASHCAN_SAFE_END(p)</font></i>
<a name='L882'><i><font color='green'>}</font></i>
<a name='L883'><i><font color='green'></font></i>
<a name='L884'><i><font color='green'>CAUTION:  Never return from the middle of the body!  If the body needs to</font></i>
<a name='L885'><i><font color='green'>"get out early", put a label immediately before the Py_TRASHCAN_SAFE_END</font></i>
<a name='L886'><i><font color='green'>call, and goto it.  Else the call-depth counter (see below) will stay</font></i>
<a name='L887'><i><font color='green'>above 0 forever, and the trashcan will never get emptied.</font></i>
<a name='L888'><i><font color='green'></font></i>
<a name='L889'><i><font color='green'>How it works:  The BEGIN macro increments a call-depth counter.  So long</font></i>
<a name='L890'><i><font color='green'>as this counter is small, the body of the deallocator is run directly without</font></i>
<a name='L891'><i><font color='green'>further ado.  But if the counter gets large, it instead adds p to a list of</font></i>
<a name='L892'><i><font color='green'>objects to be deallocated later, skips the body of the deallocator, and</font></i>
<a name='L893'><i><font color='green'>resumes execution after the END macro.  The tp_dealloc routine then returns</font></i>
<a name='L894'><i><font color='green'>without deallocating anything (and so unbounded call-stack depth is avoided).</font></i>
<a name='L895'><i><font color='green'></font></i>
<a name='L896'><i><font color='green'>When the call stack finishes unwinding again, code generated by the END macro</font></i>
<a name='L897'><i><font color='green'>notices this, and calls another routine to deallocate all the objects that</font></i>
<a name='L898'><i><font color='green'>may have been added to the list of deferred deallocations.  In effect, a</font></i>
<a name='L899'><i><font color='green'>chain of N deallocations is broken into N / PyTrash_UNWIND_LEVEL pieces,</font></i>
<a name='L900'><i><font color='green'>with the call stack never exceeding a depth of PyTrash_UNWIND_LEVEL.</font></i>
<a name='L901'><i><font color='green'>*/</font></i>
<a name='L902'>
<a name='L903'>PyAPI_FUNC(<b>void</b>) _PyTrash_deposit_object(PyObject*);
<a name='L904'>PyAPI_FUNC(<b>void</b>) _PyTrash_destroy_chain(<b>void</b>);
<a name='L905'>PyAPI_DATA(<b>int</b>) _PyTrash_delete_nesting;
<a name='L906'>PyAPI_DATA(PyObject *) _PyTrash_delete_later;
<a name='L907'>
<a name='L908'><font color='darkred'>#define</font> PyTrash_UNWIND_LEVEL 50
<a name='L909'>
<a name='L910'><font color='darkred'>#define</font> Py_TRASHCAN_SAFE_BEGIN(op) \
<a name='L911'>    <b>if</b> (_PyTrash_delete_nesting &lt; PyTrash_UNWIND_LEVEL) <font color='red'>{</font> \
<a name='L912'>        ++_PyTrash_delete_nesting;
<a name='L913'>        <i><font color='green'>/* The body of the deallocator is here. */</font></i>
<a name='L914'><font color='darkred'>#define</font> <a href='../R/3808.html' title='Multiple refered from 8 places.'>Py_TRASHCAN_SAFE_END</a>(op) \
<a name='L915'>        --_PyTrash_delete_nesting; \
<a name='L916'>        <b>if</b> (_PyTrash_delete_later &amp;&amp; _PyTrash_delete_nesting &lt;= 0) \
<a name='L917'>            <a href='../S/2803.html#L1880' title='Defined at 1880 in Objects/object.c.'>_PyTrash_destroy_chain</a>(); \
<a name='L918'>    <font color='red'>}</font> \
<a name='L919'>    <b>else</b> \
<a name='L920'>        <a href='../S/2803.html#L1867' title='Defined at 1867 in Objects/object.c.'>_PyTrash_deposit_object</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)op);
<a name='L921'>
<a name='L922'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L923'><font color='red'>}</font>
<a name='L924'><font color='darkred'>#endif</font>
<a name='L925'><font color='darkred'>#endif</font> <i><font color='green'>/* !Py_OBJECT_H */</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L405'>[^]</a><a href='#L773'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
