<html>
<head>
<title>Objects/complexobject.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3391.html'>Objects</a>/complexobject.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L16'>[^]</a><a href='#L913'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L16' title='Defined at 16.'>c_sum</a>
<li><a href='#L25' title='Defined at 25.'>c_diff</a>
<li><a href='#L34' title='Defined at 34.'>c_neg</a>
<li><a href='#L43' title='Defined at 43.'>c_prod</a>
<li><a href='#L52' title='Defined at 52.'>c_quot</a>
<li><a href='#L106' title='Defined at 106.'>c_pow</a>
<li><a href='#L136' title='Defined at 136.'>c_powu</a>
<li><a href='#L152' title='Defined at 152.'>c_powi</a>
<li><a href='#L169' title='Defined at 169.'>c_abs</a>
<li><a href='#L201' title='Defined at 201.'>complex_subtype_from_c_complex</a>
<li><a href='#L212' title='Defined at 212.'>PyComplex_FromCComplex</a>
<li><a href='#L226' title='Defined at 226.'>complex_subtype_from_doubles</a>
<li><a href='#L235' title='Defined at 235.'>PyComplex_FromDoubles</a>
<li><a href='#L244' title='Defined at 244.'>PyComplex_RealAsDouble</a>
<li><a href='#L255' title='Defined at 255.'>PyComplex_ImagAsDouble</a>
<li><a href='#L266' title='Defined at 266.'>try_complex_special_method</a>
<li><a href='#L280' title='Defined at 280.'>PyComplex_AsCComplex</a>
<li><a href='#L322' title='Defined at 322.'>complex_dealloc</a>
<li><a href='#L328' title='Defined at 328.'>complex_repr</a>
<li><a href='#L396' title='Defined at 396.'>complex_hash</a>
<li><a href='#L425' title='Defined at 425.'>to_complex</a>
<li><a href='#L449' title='Defined at 449.'>complex_add</a>
<li><a href='#L462' title='Defined at 462.'>complex_sub</a>
<li><a href='#L475' title='Defined at 475.'>complex_mul</a>
<li><a href='#L488' title='Defined at 488.'>complex_div</a>
<li><a href='#L506' title='Defined at 506.'>complex_remainder</a>
<li><a href='#L515' title='Defined at 515.'>complex_divmod</a>
<li><a href='#L523' title='Defined at 523.'>complex_pow</a>
<li><a href='#L561' title='Defined at 561.'>complex_int_div</a>
<li><a href='#L569' title='Defined at 569.'>complex_neg</a>
<li><a href='#L578' title='Defined at 578.'>complex_pos</a>
<li><a href='#L589' title='Defined at 589.'>complex_abs</a>
<li><a href='#L606' title='Defined at 606.'>complex_bool</a>
<li><a href='#L612' title='Defined at 612.'>complex_richcompare</a>
<li><a href='#L670' title='Defined at 670.'>complex_int</a>
<li><a href='#L678' title='Defined at 678.'>complex_float</a>
<li><a href='#L686' title='Defined at 686.'>complex_conjugate</a>
<li><a href='#L700' title='Defined at 700.'>complex_getnewargs</a>
<li><a href='#L712' title='Defined at 712.'>complex__format__</a>
<li><a href='#L725' title='Defined at 725.'>complex_is_finite</a>
<li><a href='#L761' title='Defined at 761.'>complex_subtype_from_string</a>
<li><a href='#L913' title='Defined at 913.'>complex_new</a>
</ol>
<hr>
<pre>
<a name='L1'>
<a name='L2'><i><font color='green'>/* Complex object implementation */</font></i>
<a name='L3'>
<a name='L4'><i><font color='green'>/* Borrows heavily from floatobject.c */</font></i>
<a name='L5'>
<a name='L6'><i><font color='green'>/* Submitted by Jim Hugunin */</font></i>
<a name='L7'>
<a name='L8'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L9'><font color='darkred'>#include</font> "<a href='577.html'>structmember.h</a>"
<a name='L10'>
<a name='L11'><i><font color='green'>/* elementary operations on complex numbers */</font></i>
<a name='L12'>
<a name='L13'><b>static</b> <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> c_1 = <font color='red'>{</font>1., 0.<font color='red'>}</font>;
<a name='L14'>
<a name='L15'><a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L16'><a href='../S/2784.html#L456' title='Refered from 456 in Objects/complexobject.c.'>c_sum</a>(Py_complex a, Py_complex b)
<a name='L17'><font color='red'>{</font>
<a name='L18'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> r;
<a name='L19'>    r.real = a.real + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real;
<a name='L20'>    r.imag = a.imag + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag;
<a name='L21'>    <b>return</b> r;
<a name='L22'><font color='red'>}</font>
<a name='L23'>
<a name='L24'><a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L25'><a href='../S/2784.html#L469' title='Refered from 469 in Objects/complexobject.c.'>c_diff</a>(Py_complex a, Py_complex b)
<a name='L26'><font color='red'>{</font>
<a name='L27'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> r;
<a name='L28'>    r.real = a.real - <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real;
<a name='L29'>    r.imag = a.imag - <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag;
<a name='L30'>    <b>return</b> r;
<a name='L31'><font color='red'>}</font>
<a name='L32'>
<a name='L33'><a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L34'><a href='../S/2645.html#L316' title='Refered from 316 in Modules/cmathmodule.c.'>c_neg</a>(Py_complex a)
<a name='L35'><font color='red'>{</font>
<a name='L36'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> r;
<a name='L37'>    r.real = -a.real;
<a name='L38'>    r.imag = -a.imag;
<a name='L39'>    <b>return</b> r;
<a name='L40'><font color='red'>}</font>
<a name='L41'>
<a name='L42'><a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L43'><a href='../R/6528.html' title='Multiple refered from 3 places.'>c_prod</a>(Py_complex a, Py_complex b)
<a name='L44'><font color='red'>{</font>
<a name='L45'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> r;
<a name='L46'>    r.real = a.real*<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real - a.imag*<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag;
<a name='L47'>    r.imag = a.real*<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag + a.imag*<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real;
<a name='L48'>    <b>return</b> r;
<a name='L49'><font color='red'>}</font>
<a name='L50'>
<a name='L51'><a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L52'><a href='../R/6529.html' title='Multiple refered from 3 places.'>c_quot</a>(Py_complex a, Py_complex b)
<a name='L53'><font color='red'>{</font>
<a name='L54'>    <i><font color='green'>/******************************************************************</font></i>
<a name='L55'><i><font color='green'>    This was the original algorithm.  It's grossly prone to spurious</font></i>
<a name='L56'><i><font color='green'>    overflow and underflow errors.  It also merrily divides by 0 despite</font></i>
<a name='L57'><i><font color='green'>    checking for that(!).  The code still serves a doc purpose here, as</font></i>
<a name='L58'><i><font color='green'>    the algorithm following is a simple by-cases transformation of this</font></i>
<a name='L59'><i><font color='green'>    one:</font></i>
<a name='L60'><i><font color='green'></font></i>
<a name='L61'><i><font color='green'>    Py_complex r;</font></i>
<a name='L62'><i><font color='green'>    double d = b.real*b.real + b.imag*b.imag;</font></i>
<a name='L63'><i><font color='green'>    if (d == 0.)</font></i>
<a name='L64'><i><font color='green'>        errno = EDOM;</font></i>
<a name='L65'><i><font color='green'>    r.real = (a.real*b.real + a.imag*b.imag)/d;</font></i>
<a name='L66'><i><font color='green'>    r.imag = (a.imag*b.real - a.real*b.imag)/d;</font></i>
<a name='L67'><i><font color='green'>    return r;</font></i>
<a name='L68'><i><font color='green'>    ******************************************************************/</font></i>
<a name='L69'>
<a name='L70'>    <i><font color='green'>/* This algorithm is better, and is pretty obvious:  first divide the</font></i>
<a name='L71'><i><font color='green'>     * numerators and denominator by whichever of {b.real, b.imag} has</font></i>
<a name='L72'><i><font color='green'>     * larger magnitude.  The earliest reference I found was to CACM</font></i>
<a name='L73'><i><font color='green'>     * Algorithm 116 (Complex Division, Robert L. Smith, Stanford</font></i>
<a name='L74'><i><font color='green'>     * University).  As usual, though, we're still ignoring all IEEE</font></i>
<a name='L75'><i><font color='green'>     * endcases.</font></i>
<a name='L76'><i><font color='green'>     */</font></i>
<a name='L77'>     <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> r;      <i><font color='green'>/* the result */</font></i>
<a name='L78'>     <b>const</b> <b>double</b> abs_breal = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real &lt; 0 ? -<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real : <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real;
<a name='L79'>     <b>const</b> <b>double</b> abs_bimag = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag &lt; 0 ? -<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag : <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag;
<a name='L80'>
<a name='L81'>     <b>if</b> (abs_breal &gt;= abs_bimag) <font color='red'>{</font>
<a name='L82'>        <i><font color='green'>/* divide tops and bottom by b.real */</font></i>
<a name='L83'>        <b>if</b> (abs_breal == 0.0) <font color='red'>{</font>
<a name='L84'>            errno = EDOM;
<a name='L85'>            r.real = r.imag = 0.0;
<a name='L86'>        <font color='red'>}</font>
<a name='L87'>        <b>else</b> <font color='red'>{</font>
<a name='L88'>            <b>const</b> <b>double</b> <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a> = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag / <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real;
<a name='L89'>            <b>const</b> <b>double</b> denom = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag * <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a>;
<a name='L90'>            r.real = (a.real + a.imag * <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a>) / denom;
<a name='L91'>            r.imag = (a.imag - a.real * <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a>) / denom;
<a name='L92'>        <font color='red'>}</font>
<a name='L93'>    <font color='red'>}</font>
<a name='L94'>    <b>else</b> <font color='red'>{</font>
<a name='L95'>        <i><font color='green'>/* divide tops and bottom by b.imag */</font></i>
<a name='L96'>        <b>const</b> <b>double</b> <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a> = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real / <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag;
<a name='L97'>        <b>const</b> <b>double</b> denom = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real * <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a> + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag;
<a name='L98'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag != 0.0);
<a name='L99'>        r.real = (a.real * <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a> + a.imag) / denom;
<a name='L100'>        r.imag = (a.imag * <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a> - a.real) / denom;
<a name='L101'>    <font color='red'>}</font>
<a name='L102'>    <b>return</b> r;
<a name='L103'><font color='red'>}</font>
<a name='L104'>
<a name='L105'><a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L106'><a href='../R/6525.html' title='Multiple refered from 2 places.'>c_pow</a>(Py_complex a, Py_complex b)
<a name='L107'><font color='red'>{</font>
<a name='L108'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> r;
<a name='L109'>    <b>double</b> vabs,len,at,phase;
<a name='L110'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real == 0. &amp;&amp; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag == 0.) <font color='red'>{</font>
<a name='L111'>        r.real = 1.;
<a name='L112'>        r.imag = 0.;
<a name='L113'>    <font color='red'>}</font>
<a name='L114'>    <b>else</b> <b>if</b> (a.real == 0. &amp;&amp; a.imag == 0.) <font color='red'>{</font>
<a name='L115'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag != 0. || <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real &lt; 0.)
<a name='L116'>            errno = EDOM;
<a name='L117'>        r.real = 0.;
<a name='L118'>        r.imag = 0.;
<a name='L119'>    <font color='red'>}</font>
<a name='L120'>    <b>else</b> <font color='red'>{</font>
<a name='L121'>        vabs = <a href='../D/9086.html' title='Multiple defined in 3 places.'>hypot</a>(a.real,a.imag);
<a name='L122'>        len = pow(vabs,<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real);
<a name='L123'>        at = atan2(a.imag, a.real);
<a name='L124'>        phase = at*<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.real;
<a name='L125'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag != 0.0) <font color='red'>{</font>
<a name='L126'>            len /= exp(at*<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag);
<a name='L127'>            phase += <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>.imag*log(vabs);
<a name='L128'>        <font color='red'>}</font>
<a name='L129'>        r.real = len*cos(phase);
<a name='L130'>        r.imag = len*sin(phase);
<a name='L131'>    <font color='red'>}</font>
<a name='L132'>    <b>return</b> r;
<a name='L133'><font color='red'>}</font>
<a name='L134'>
<a name='L135'><b>static</b> <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L136'><a href='../R/6527.html' title='Multiple refered from 2 places.'>c_powu</a>(Py_complex x, <b>long</b> n)
<a name='L137'><font color='red'>{</font>
<a name='L138'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> r, p;
<a name='L139'>    <b>long</b> mask = 1;
<a name='L140'>    r = c_1;
<a name='L141'>    p = x;
<a name='L142'>    <b>while</b> (mask &gt; 0 &amp;&amp; n &gt;= mask) <font color='red'>{</font>
<a name='L143'>        <b>if</b> (n &amp; mask)
<a name='L144'>            r = <a href='../D/7297.html' title='Multiple defined in 2 places.'>c_prod</a>(r,p);
<a name='L145'>        mask &lt;&lt;= 1;
<a name='L146'>        p = <a href='../D/7297.html' title='Multiple defined in 2 places.'>c_prod</a>(p,p);
<a name='L147'>    <font color='red'>}</font>
<a name='L148'>    <b>return</b> r;
<a name='L149'><font color='red'>}</font>
<a name='L150'>
<a name='L151'><b>static</b> <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L152'><a href='../S/2784.html#L541' title='Refered from 541 in Objects/complexobject.c.'>c_powi</a>(Py_complex x, <b>long</b> n)
<a name='L153'><font color='red'>{</font>
<a name='L154'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> cn;
<a name='L155'>
<a name='L156'>    <b>if</b> (n &gt; 100 || n &lt; -100) <font color='red'>{</font>
<a name='L157'>        cn.real = (<b>double</b>) n;
<a name='L158'>        cn.imag = 0.;
<a name='L159'>        <b>return</b> <a href='../D/7294.html' title='Multiple defined in 2 places.'>c_pow</a>(x,cn);
<a name='L160'>    <font color='red'>}</font>
<a name='L161'>    <b>else</b> <b>if</b> (n &gt; 0)
<a name='L162'>        <b>return</b> <a href='../S/2784.html#L136' title='Defined at 136 in Objects/complexobject.c.'>c_powu</a>(x,n);
<a name='L163'>    <b>else</b>
<a name='L164'>        <b>return</b> <a href='../D/7298.html' title='Multiple defined in 2 places.'>c_quot</a>(c_1,<a href='../S/2784.html#L136' title='Defined at 136 in Objects/complexobject.c.'>c_powu</a>(x,-n));
<a name='L165'>
<a name='L166'><font color='red'>}</font>
<a name='L167'>
<a name='L168'><b>double</b>
<a name='L169'><a href='../R/6515.html' title='Multiple refered from 2 places.'>c_abs</a>(Py_complex z)
<a name='L170'><font color='red'>{</font>
<a name='L171'>    <i><font color='green'>/* sets errno = ERANGE on overflow;  otherwise errno = 0 */</font></i>
<a name='L172'>    <b>double</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L173'>
<a name='L174'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(z.real) || !<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(z.imag)) <font color='red'>{</font>
<a name='L175'>        <i><font color='green'>/* C99 rules: if either the real or the imaginary part is an</font></i>
<a name='L176'><i><font color='green'>           infinity, return infinity, even if the other part is a</font></i>
<a name='L177'><i><font color='green'>           NaN. */</font></i>
<a name='L178'>        <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(z.real)) <font color='red'>{</font>
<a name='L179'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = fabs(z.real);
<a name='L180'>            errno = 0;
<a name='L181'>            <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L182'>        <font color='red'>}</font>
<a name='L183'>        <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(z.imag)) <font color='red'>{</font>
<a name='L184'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = fabs(z.imag);
<a name='L185'>            errno = 0;
<a name='L186'>            <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L187'>        <font color='red'>}</font>
<a name='L188'>        <i><font color='green'>/* either the real or imaginary part is a NaN,</font></i>
<a name='L189'><i><font color='green'>           and neither is infinite. Result should be NaN. */</font></i>
<a name='L190'>        <b>return</b> <a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>;
<a name='L191'>    <font color='red'>}</font>
<a name='L192'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/9086.html' title='Multiple defined in 3 places.'>hypot</a>(z.real, z.imag);
<a name='L193'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>))
<a name='L194'>        errno = ERANGE;
<a name='L195'>    <b>else</b>
<a name='L196'>        errno = 0;
<a name='L197'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L198'><font color='red'>}</font>
<a name='L199'>
<a name='L200'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L201'><a href='../S/2784.html#L231' title='Refered from 231 in Objects/complexobject.c.'>complex_subtype_from_c_complex</a>(PyTypeObject *type, Py_complex cval)
<a name='L202'><font color='red'>{</font>
<a name='L203'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *op;
<a name='L204'>
<a name='L205'>    op = type-&gt;tp_alloc(type, 0);
<a name='L206'>    <b>if</b> (op != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L207'>        ((PyComplexObject *)op)-&gt;cval = cval;
<a name='L208'>    <b>return</b> op;
<a name='L209'><font color='red'>}</font>
<a name='L210'>
<a name='L211'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L212'><a href='../R/2680.html' title='Multiple refered from 16 places.'>PyComplex_FromCComplex</a>(Py_complex cval)
<a name='L213'><font color='red'>{</font>
<a name='L214'>    <b>register</b> PyComplexObject *op;
<a name='L215'>
<a name='L216'>    <i><font color='green'>/* Inline PyObject_New */</font></i>
<a name='L217'>    op = (PyComplexObject *) PyObject_MALLOC(<b>sizeof</b>(PyComplexObject));
<a name='L218'>    <b>if</b> (op == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L219'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L220'>    PyObject_INIT(op, &amp;PyComplex_Type);
<a name='L221'>    op-&gt;cval = cval;
<a name='L222'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) op;
<a name='L223'><font color='red'>}</font>
<a name='L224'>
<a name='L225'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L226'><a href='../R/6937.html' title='Multiple refered from 2 places.'>complex_subtype_from_doubles</a>(PyTypeObject *type, <b>double</b> real, <b>double</b> imag)
<a name='L227'><font color='red'>{</font>
<a name='L228'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> c;
<a name='L229'>    c.real = real;
<a name='L230'>    c.imag = imag;
<a name='L231'>    <b>return</b> <a href='../S/2784.html#L201' title='Defined at 201 in Objects/complexobject.c.'>complex_subtype_from_c_complex</a>(type, c);
<a name='L232'><font color='red'>}</font>
<a name='L233'>
<a name='L234'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L235'>PyComplex_FromDoubles(<b>double</b> real, <b>double</b> imag)
<a name='L236'><font color='red'>{</font>
<a name='L237'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> c;
<a name='L238'>    c.real = real;
<a name='L239'>    c.imag = imag;
<a name='L240'>    <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(c);
<a name='L241'><font color='red'>}</font>
<a name='L242'>
<a name='L243'><b>double</b>
<a name='L244'><a href='../R/2682.html' title='Multiple refered from 3 places.'>PyComplex_RealAsDouble</a>(PyObject *op)
<a name='L245'><font color='red'>{</font>
<a name='L246'>    <b>if</b> (PyComplex_Check(op)) <font color='red'>{</font>
<a name='L247'>        <b>return</b> ((PyComplexObject *)op)-&gt;cval.real;
<a name='L248'>    <font color='red'>}</font>
<a name='L249'>    <b>else</b> <font color='red'>{</font>
<a name='L250'>        <b>return</b> <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(op);
<a name='L251'>    <font color='red'>}</font>
<a name='L252'><font color='red'>}</font>
<a name='L253'>
<a name='L254'><b>double</b>
<a name='L255'><a href='../R/2681.html' title='Multiple refered from 3 places.'>PyComplex_ImagAsDouble</a>(PyObject *op)
<a name='L256'><font color='red'>{</font>
<a name='L257'>    <b>if</b> (PyComplex_Check(op)) <font color='red'>{</font>
<a name='L258'>        <b>return</b> ((PyComplexObject *)op)-&gt;cval.imag;
<a name='L259'>    <font color='red'>}</font>
<a name='L260'>    <b>else</b> <font color='red'>{</font>
<a name='L261'>        <b>return</b> 0.0;
<a name='L262'>    <font color='red'>}</font>
<a name='L263'><font color='red'>}</font>
<a name='L264'>
<a name='L265'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L266'><a href='../R/10968.html' title='Multiple refered from 2 places.'>try_complex_special_method</a>(PyObject *op) <font color='red'>{</font>
<a name='L267'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *f;
<a name='L268'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *complexstr;
<a name='L269'>
<a name='L270'>    f = <a href='../S/2824.html#L1158' title='Defined at 1158 in Objects/typeobject.c.'>_PyObject_LookupSpecial</a>(op, "__complex__", &amp;complexstr);
<a name='L271'>    <b>if</b> (f) <font color='red'>{</font>
<a name='L272'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(f, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L273'>        Py_DECREF(f);
<a name='L274'>        <b>return</b> res;
<a name='L275'>    <font color='red'>}</font>
<a name='L276'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L277'><font color='red'>}</font>
<a name='L278'>
<a name='L279'><a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a>
<a name='L280'><a href='../R/2679.html' title='Multiple refered from 2 places.'>PyComplex_AsCComplex</a>(PyObject *op)
<a name='L281'><font color='red'>{</font>
<a name='L282'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> cv;
<a name='L283'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *newop = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L284'>
<a name='L285'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(op);
<a name='L286'>    <i><font color='green'>/* If op is already of type PyComplex_Type, return its value */</font></i>
<a name='L287'>    <b>if</b> (PyComplex_Check(op)) <font color='red'>{</font>
<a name='L288'>        <b>return</b> ((PyComplexObject *)op)-&gt;cval;
<a name='L289'>    <font color='red'>}</font>
<a name='L290'>    <i><font color='green'>/* If not, use op's __complex__  method, if it exists */</font></i>
<a name='L291'>
<a name='L292'>    <i><font color='green'>/* return -1 on failure */</font></i>
<a name='L293'>    cv.real = -1.;
<a name='L294'>    cv.imag = 0.;
<a name='L295'>
<a name='L296'>    newop = <a href='../S/2784.html#L266' title='Defined at 266 in Objects/complexobject.c.'>try_complex_special_method</a>(op);
<a name='L297'>
<a name='L298'>    <b>if</b> (newop) <font color='red'>{</font>
<a name='L299'>        <b>if</b> (!PyComplex_Check(newop)) <font color='red'>{</font>
<a name='L300'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L301'>                "__complex__ should return a complex object");
<a name='L302'>            Py_DECREF(newop);
<a name='L303'>            <b>return</b> cv;
<a name='L304'>        <font color='red'>}</font>
<a name='L305'>        cv = ((PyComplexObject *)newop)-&gt;cval;
<a name='L306'>        Py_DECREF(newop);
<a name='L307'>        <b>return</b> cv;
<a name='L308'>    <font color='red'>}</font>
<a name='L309'>    <b>else</b> <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L310'>        <b>return</b> cv;
<a name='L311'>    <font color='red'>}</font>
<a name='L312'>    <i><font color='green'>/* If neither of the above works, interpret op as a float giving the</font></i>
<a name='L313'><i><font color='green'>       real part of the result, and fill in the imaginary part as 0. */</font></i>
<a name='L314'>    <b>else</b> <font color='red'>{</font>
<a name='L315'>        <i><font color='green'>/* PyFloat_AsDouble will return -1 on failure */</font></i>
<a name='L316'>        cv.real = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(op);
<a name='L317'>        <b>return</b> cv;
<a name='L318'>    <font color='red'>}</font>
<a name='L319'><font color='red'>}</font>
<a name='L320'>
<a name='L321'><b>static</b> <b>void</b>
<a name='L322'><a href='../S/2784.html#L1092' title='Refered from 1092 in Objects/complexobject.c.'>complex_dealloc</a>(PyObject *op)
<a name='L323'><font color='red'>{</font>
<a name='L324'>    op-&gt;ob_type-&gt;tp_free(op);
<a name='L325'><font color='red'>}</font>
<a name='L326'>
<a name='L327'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L328'><a href='../R/6933.html' title='Multiple refered from 2 places.'>complex_repr</a>(PyComplexObject *v)
<a name='L329'><font color='red'>{</font>
<a name='L330'>    <b>int</b> precision = 0;
<a name='L331'>    <b>char</b> format_code = 'r';
<a name='L332'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L333'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L334'>
<a name='L335'>    <i><font color='green'>/* If these are non-NULL, they'll need to be freed. */</font></i>
<a name='L336'>    <b>char</b> *pre = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L337'>    <b>char</b> *im = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L338'>    <b>char</b> *buf = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L339'>
<a name='L340'>    <i><font color='green'>/* These do not need to be freed. re is either an alias</font></i>
<a name='L341'><i><font color='green'>       for pre or a pointer to a constant.  lead and tail</font></i>
<a name='L342'><i><font color='green'>       are pointers to constants. */</font></i>
<a name='L343'>    <b>char</b> *re = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L344'>    <b>char</b> *lead = "";
<a name='L345'>    <b>char</b> *tail = "";
<a name='L346'>
<a name='L347'>    <b>if</b> (v-&gt;cval.real == 0. &amp;&amp; <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(1.0, v-&gt;cval.real)==1.0) <font color='red'>{</font>
<a name='L348'>        <i><font color='green'>/* Real part is +0: just output the imaginary part and do not</font></i>
<a name='L349'><i><font color='green'>           include parens. */</font></i>
<a name='L350'>        re = "";
<a name='L351'>        im = PyOS_double_to_string(v-&gt;cval.imag, format_code,
<a name='L352'>                                   precision, 0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L353'>        <b>if</b> (!im) <font color='red'>{</font>
<a name='L354'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L355'>            <b>goto</b> done;
<a name='L356'>        <font color='red'>}</font>
<a name='L357'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L358'>        <i><font color='green'>/* Format imaginary part with sign, real part without. Include</font></i>
<a name='L359'><i><font color='green'>           parens in the result. */</font></i>
<a name='L360'>        pre = PyOS_double_to_string(v-&gt;cval.real, format_code,
<a name='L361'>                                    precision, 0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L362'>        <b>if</b> (!pre) <font color='red'>{</font>
<a name='L363'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L364'>            <b>goto</b> done;
<a name='L365'>        <font color='red'>}</font>
<a name='L366'>        re = pre;
<a name='L367'>
<a name='L368'>        im = PyOS_double_to_string(v-&gt;cval.imag, format_code,
<a name='L369'>                                   precision, Py_DTSF_SIGN, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L370'>        <b>if</b> (!im) <font color='red'>{</font>
<a name='L371'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L372'>            <b>goto</b> done;
<a name='L373'>        <font color='red'>}</font>
<a name='L374'>        lead = "(";
<a name='L375'>        tail = ")";
<a name='L376'>    <font color='red'>}</font>
<a name='L377'>    <i><font color='green'>/* Alloc the final buffer. Add one for the "j" in the format string,</font></i>
<a name='L378'><i><font color='green'>       and one for the trailing zero byte. */</font></i>
<a name='L379'>    len = strlen(lead) + strlen(re) + strlen(im) + strlen(tail) + 2;
<a name='L380'>    buf = <a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>(len);
<a name='L381'>    <b>if</b> (!buf) <font color='red'>{</font>
<a name='L382'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L383'>        <b>goto</b> done;
<a name='L384'>    <font color='red'>}</font>
<a name='L385'>    <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(buf, len, "%s%s%sj%s", lead, re, im, tail);
<a name='L386'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(buf);
<a name='L387'>  done:
<a name='L388'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(im);
<a name='L389'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(pre);
<a name='L390'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(buf);
<a name='L391'>
<a name='L392'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L393'><font color='red'>}</font>
<a name='L394'>
<a name='L395'><b>static</b> <a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>
<a name='L396'><a href='../S/2784.html#L1101' title='Refered from 1101 in Objects/complexobject.c.'>complex_hash</a>(PyComplexObject *v)
<a name='L397'><font color='red'>{</font>
<a name='L398'>    <a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a> hashreal, hashimag, combined;
<a name='L399'>    hashreal = (<a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a>)<a href='../S/2803.html#L690' title='Defined at 690 in Objects/object.c.'>_Py_HashDouble</a>(v-&gt;cval.real);
<a name='L400'>    <b>if</b> (hashreal == (<a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a>)-1)
<a name='L401'>        <b>return</b> -1;
<a name='L402'>    hashimag = (<a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a>)<a href='../S/2803.html#L690' title='Defined at 690 in Objects/object.c.'>_Py_HashDouble</a>(v-&gt;cval.imag);
<a name='L403'>    <b>if</b> (hashimag == (<a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a>)-1)
<a name='L404'>        <b>return</b> -1;
<a name='L405'>    <i><font color='green'>/* Note:  if the imaginary part is 0, hashimag is 0 now,</font></i>
<a name='L406'><i><font color='green'>     * so the following returns hashreal unchanged.  This is</font></i>
<a name='L407'><i><font color='green'>     * important because numbers of different types that</font></i>
<a name='L408'><i><font color='green'>     * compare equal must have the same hash value, so that</font></i>
<a name='L409'><i><font color='green'>     * hash(x + 0*j) must equal hash(x).</font></i>
<a name='L410'><i><font color='green'>     */</font></i>
<a name='L411'>    combined = hashreal + <a href='../S/565.html#L146' title='Defined at 146 in Include/pyport.h.'>_PyHASH_IMAG</a> * hashimag;
<a name='L412'>    <b>if</b> (combined == (<a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a>)-1)
<a name='L413'>        combined = (<a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a>)-2;
<a name='L414'>    <b>return</b> (<a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>)combined;
<a name='L415'><font color='red'>}</font>
<a name='L416'>
<a name='L417'><i><font color='green'>/* This macro may return! */</font></i>
<a name='L418'><font color='darkred'>#define</font> <a href='../R/4561.html' title='Multiple refered from 12 places.'>TO_COMPLEX</a>(obj, c) \
<a name='L419'>    <b>if</b> (PyComplex_Check(obj)) \
<a name='L420'>        c = ((PyComplexObject *)(obj))-&gt;cval; \
<a name='L421'>    <b>else</b> <b>if</b> (<a href='../S/2784.html#L425' title='Defined at 425 in Objects/complexobject.c.'>to_complex</a>(&amp;(obj), &amp;(c)) &lt; 0) \
<a name='L422'>        <b>return</b> (obj)
<a name='L423'>
<a name='L424'><b>static</b> <b>int</b>
<a name='L425'><a href='../S/2784.html#L421' title='Refered from 421 in Objects/complexobject.c.'>to_complex</a>(PyObject **pobj, Py_complex *pc)
<a name='L426'><font color='red'>{</font>
<a name='L427'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = *pobj;
<a name='L428'>
<a name='L429'>    pc-&gt;real = pc-&gt;imag = 0.0;
<a name='L430'>    <b>if</b> (PyLong_Check(obj)) <font color='red'>{</font>
<a name='L431'>        pc-&gt;real = <a href='../S/2799.html#L2481' title='Defined at 2481 in Objects/longobject.c.'>PyLong_AsDouble</a>(obj);
<a name='L432'>        <b>if</b> (pc-&gt;real == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L433'>            *pobj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L434'>            <b>return</b> -1;
<a name='L435'>        <font color='red'>}</font>
<a name='L436'>        <b>return</b> 0;
<a name='L437'>    <font color='red'>}</font>
<a name='L438'>    <b>if</b> (PyFloat_Check(obj)) <font color='red'>{</font>
<a name='L439'>        pc-&gt;real = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(obj);
<a name='L440'>        <b>return</b> 0;
<a name='L441'>    <font color='red'>}</font>
<a name='L442'>    Py_INCREF(Py_NotImplemented);
<a name='L443'>    *pobj = Py_NotImplemented;
<a name='L444'>    <b>return</b> -1;
<a name='L445'><font color='red'>}</font>
<a name='L446'>
<a name='L447'>
<a name='L448'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L449'><a href='../S/2784.html#L1052' title='Refered from 1052 in Objects/complexobject.c.'>complex_add</a>(PyObject *v, PyObject *w)
<a name='L450'><font color='red'>{</font>
<a name='L451'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L452'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L453'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(v, a);
<a name='L454'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L455'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("complex_add", <b>return</b> 0)
<a name='L456'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/7303.html' title='Multiple defined in 2 places.'>c_sum</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L457'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)
<a name='L458'>    <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L459'><font color='red'>}</font>
<a name='L460'>
<a name='L461'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L462'><a href='../S/2784.html#L1053' title='Refered from 1053 in Objects/complexobject.c.'>complex_sub</a>(PyObject *v, PyObject *w)
<a name='L463'><font color='red'>{</font>
<a name='L464'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L465'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L466'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(v, a);
<a name='L467'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L468'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("complex_sub", <b>return</b> 0)
<a name='L469'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/7288.html' title='Multiple defined in 2 places.'>c_diff</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L470'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)
<a name='L471'>    <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L472'><font color='red'>}</font>
<a name='L473'>
<a name='L474'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L475'><a href='../S/2784.html#L1054' title='Refered from 1054 in Objects/complexobject.c.'>complex_mul</a>(PyObject *v, PyObject *w)
<a name='L476'><font color='red'>{</font>
<a name='L477'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L478'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L479'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(v, a);
<a name='L480'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L481'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("complex_mul", <b>return</b> 0)
<a name='L482'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/7297.html' title='Multiple defined in 2 places.'>c_prod</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L483'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)
<a name='L484'>    <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L485'><font color='red'>}</font>
<a name='L486'>
<a name='L487'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L488'><a href='../S/2784.html#L1082' title='Refered from 1082 in Objects/complexobject.c.'>complex_div</a>(PyObject *v, PyObject *w)
<a name='L489'><font color='red'>{</font>
<a name='L490'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> quot;
<a name='L491'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L492'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(v, a);
<a name='L493'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L494'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("complex_div", <b>return</b> 0)
<a name='L495'>    errno = 0;
<a name='L496'>    quot = <a href='../D/7298.html' title='Multiple defined in 2 places.'>c_quot</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L497'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(quot)
<a name='L498'>    <b>if</b> (errno == EDOM) <font color='red'>{</font>
<a name='L499'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ZeroDivisionError, "complex division by zero");
<a name='L500'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L501'>    <font color='red'>}</font>
<a name='L502'>    <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(quot);
<a name='L503'><font color='red'>}</font>
<a name='L504'>
<a name='L505'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L506'><a href='../S/2784.html#L1055' title='Refered from 1055 in Objects/complexobject.c.'>complex_remainder</a>(PyObject *v, PyObject *w)
<a name='L507'><font color='red'>{</font>
<a name='L508'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L509'>                    "can't mod complex numbers.");
<a name='L510'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L511'><font color='red'>}</font>
<a name='L512'>
<a name='L513'>
<a name='L514'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L515'><a href='../S/2784.html#L1056' title='Refered from 1056 in Objects/complexobject.c.'>complex_divmod</a>(PyObject *v, PyObject *w)
<a name='L516'><font color='red'>{</font>
<a name='L517'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L518'>                    "can't take floor or mod of complex number.");
<a name='L519'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L520'><font color='red'>}</font>
<a name='L521'>
<a name='L522'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L523'><a href='../S/2784.html#L1057' title='Refered from 1057 in Objects/complexobject.c.'>complex_pow</a>(PyObject *v, PyObject *w, PyObject *z)
<a name='L524'><font color='red'>{</font>
<a name='L525'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> p;
<a name='L526'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> exponent;
<a name='L527'>    <b>long</b> int_exponent;
<a name='L528'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L529'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(v, a);
<a name='L530'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L531'>
<a name='L532'>    <b>if</b> (z != Py_None) <font color='red'>{</font>
<a name='L533'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "complex modulo");
<a name='L534'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L535'>    <font color='red'>}</font>
<a name='L536'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("complex_pow", <b>return</b> 0)
<a name='L537'>    errno = 0;
<a name='L538'>    exponent = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L539'>    int_exponent = (<b>long</b>)exponent.real;
<a name='L540'>    <b>if</b> (exponent.imag == 0. &amp;&amp; exponent.real == int_exponent)
<a name='L541'>        p = <a href='../S/2784.html#L152' title='Defined at 152 in Objects/complexobject.c.'>c_powi</a>(a, int_exponent);
<a name='L542'>    <b>else</b>
<a name='L543'>        p = <a href='../D/7294.html' title='Multiple defined in 2 places.'>c_pow</a>(a, exponent);
<a name='L544'>
<a name='L545'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(p)
<a name='L546'>    <a href='../S/565.html#L505' title='Defined at 505 in Include/pyport.h.'>Py_ADJUST_ERANGE2</a>(p.real, p.imag);
<a name='L547'>    <b>if</b> (errno == EDOM) <font color='red'>{</font>
<a name='L548'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ZeroDivisionError,
<a name='L549'>                        "0.0 to a negative or complex power");
<a name='L550'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L551'>    <font color='red'>}</font>
<a name='L552'>    <b>else</b> <b>if</b> (errno == ERANGE) <font color='red'>{</font>
<a name='L553'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L554'>                        "complex exponentiation");
<a name='L555'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L556'>    <font color='red'>}</font>
<a name='L557'>    <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(p);
<a name='L558'><font color='red'>}</font>
<a name='L559'>
<a name='L560'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L561'><a href='../S/2784.html#L1081' title='Refered from 1081 in Objects/complexobject.c.'>complex_int_div</a>(PyObject *v, PyObject *w)
<a name='L562'><font color='red'>{</font>
<a name='L563'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L564'>                    "can't take floor of complex number.");
<a name='L565'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L566'><font color='red'>}</font>
<a name='L567'>
<a name='L568'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L569'><a href='../S/2784.html#L1058' title='Refered from 1058 in Objects/complexobject.c.'>complex_neg</a>(PyComplexObject *v)
<a name='L570'><font color='red'>{</font>
<a name='L571'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> neg;
<a name='L572'>    neg.real = -v-&gt;cval.real;
<a name='L573'>    neg.imag = -v-&gt;cval.imag;
<a name='L574'>    <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(neg);
<a name='L575'><font color='red'>}</font>
<a name='L576'>
<a name='L577'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L578'><a href='../S/2784.html#L1059' title='Refered from 1059 in Objects/complexobject.c.'>complex_pos</a>(PyComplexObject *v)
<a name='L579'><font color='red'>{</font>
<a name='L580'>    <b>if</b> (PyComplex_CheckExact(v)) <font color='red'>{</font>
<a name='L581'>        Py_INCREF(v);
<a name='L582'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L583'>    <font color='red'>}</font>
<a name='L584'>    <b>else</b>
<a name='L585'>        <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(v-&gt;cval);
<a name='L586'><font color='red'>}</font>
<a name='L587'>
<a name='L588'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L589'><a href='../S/2784.html#L1060' title='Refered from 1060 in Objects/complexobject.c.'>complex_abs</a>(PyComplexObject *v)
<a name='L590'><font color='red'>{</font>
<a name='L591'>    <b>double</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L592'>
<a name='L593'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("complex_abs", <b>return</b> 0)
<a name='L594'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/7277.html' title='Multiple defined in 2 places.'>c_abs</a>(v-&gt;cval);
<a name='L595'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)
<a name='L596'>
<a name='L597'>    <b>if</b> (errno == ERANGE) <font color='red'>{</font>
<a name='L598'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L599'>                        "absolute value too large");
<a name='L600'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L601'>    <font color='red'>}</font>
<a name='L602'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L603'><font color='red'>}</font>
<a name='L604'>
<a name='L605'><b>static</b> <b>int</b>
<a name='L606'><a href='../S/2784.html#L1061' title='Refered from 1061 in Objects/complexobject.c.'>complex_bool</a>(PyComplexObject *v)
<a name='L607'><font color='red'>{</font>
<a name='L608'>    <b>return</b> v-&gt;cval.real != 0.0 || v-&gt;cval.imag != 0.0;
<a name='L609'><font color='red'>}</font>
<a name='L610'>
<a name='L611'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L612'><a href='../S/2784.html#L1111' title='Refered from 1111 in Objects/complexobject.c.'>complex_richcompare</a>(PyObject *v, PyObject *w, <b>int</b> op)
<a name='L613'><font color='red'>{</font>
<a name='L614'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L615'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> i;
<a name='L616'>    <b>int</b> equal;
<a name='L617'>
<a name='L618'>    <b>if</b> (op != <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a> &amp;&amp; op != <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_NE</a>) <font color='red'>{</font>
<a name='L619'>        <b>goto</b> Unimplemented;
<a name='L620'>    <font color='red'>}</font>
<a name='L621'>
<a name='L622'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyComplex_Check(v));
<a name='L623'>    <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(v, i);
<a name='L624'>
<a name='L625'>    <b>if</b> (PyLong_Check(w)) <font color='red'>{</font>
<a name='L626'>        <i><font color='green'>/* Check for 0.0 imaginary part first to avoid the rich</font></i>
<a name='L627'><i><font color='green'>         * comparison when possible.</font></i>
<a name='L628'><i><font color='green'>         */</font></i>
<a name='L629'>        <b>if</b> (i.imag == 0.0) <font color='red'>{</font>
<a name='L630'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *j, *sub_res;
<a name='L631'>            j = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(i.real);
<a name='L632'>            <b>if</b> (j == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L633'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L634'>
<a name='L635'>            sub_res = <a href='../S/2803.html#L587' title='Defined at 587 in Objects/object.c.'>PyObject_RichCompare</a>(j, w, op);
<a name='L636'>            Py_DECREF(j);
<a name='L637'>            <b>return</b> sub_res;
<a name='L638'>        <font color='red'>}</font>
<a name='L639'>        <b>else</b> <font color='red'>{</font>
<a name='L640'>            equal = 0;
<a name='L641'>        <font color='red'>}</font>
<a name='L642'>    <font color='red'>}</font>
<a name='L643'>    <b>else</b> <b>if</b> (PyFloat_Check(w)) <font color='red'>{</font>
<a name='L644'>        equal = (i.real == <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(w) &amp;&amp; i.imag == 0.0);
<a name='L645'>    <font color='red'>}</font>
<a name='L646'>    <b>else</b> <b>if</b> (PyComplex_Check(w)) <font color='red'>{</font>
<a name='L647'>        <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> j;
<a name='L648'>
<a name='L649'>        <a href='../S/2784.html#L418' title='Defined at 418 in Objects/complexobject.c.'>TO_COMPLEX</a>(w, j);
<a name='L650'>        equal = (i.real == j.real &amp;&amp; i.imag == j.imag);
<a name='L651'>    <font color='red'>}</font>
<a name='L652'>    <b>else</b> <font color='red'>{</font>
<a name='L653'>        <b>goto</b> Unimplemented;
<a name='L654'>    <font color='red'>}</font>
<a name='L655'>
<a name='L656'>    <b>if</b> (equal == (op == <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>))
<a name='L657'>         res = Py_True;
<a name='L658'>    <b>else</b>
<a name='L659'>         res = Py_False;
<a name='L660'>
<a name='L661'>    Py_INCREF(res);
<a name='L662'>    <b>return</b> res;
<a name='L663'>
<a name='L664'>Unimplemented:
<a name='L665'>    Py_INCREF(Py_NotImplemented);
<a name='L666'>    <b>return</b> Py_NotImplemented;
<a name='L667'><font color='red'>}</font>
<a name='L668'>
<a name='L669'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L670'><a href='../S/2784.html#L1068' title='Refered from 1068 in Objects/complexobject.c.'>complex_int</a>(PyObject *v)
<a name='L671'><font color='red'>{</font>
<a name='L672'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L673'>               "can't convert complex to int");
<a name='L674'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L675'><font color='red'>}</font>
<a name='L676'>
<a name='L677'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L678'><a href='../S/2784.html#L1070' title='Refered from 1070 in Objects/complexobject.c.'>complex_float</a>(PyObject *v)
<a name='L679'><font color='red'>{</font>
<a name='L680'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L681'>               "can't convert complex to float");
<a name='L682'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L683'><font color='red'>}</font>
<a name='L684'>
<a name='L685'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L686'><a href='../S/2784.html#L740' title='Refered from 740 in Objects/complexobject.c.'>complex_conjugate</a>(PyObject *self)
<a name='L687'><font color='red'>{</font>
<a name='L688'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> c;
<a name='L689'>    c = ((PyComplexObject *)self)-&gt;cval;
<a name='L690'>    c.imag = -c.imag;
<a name='L691'>    <b>return</b> <a href='../S/2784.html#L212' title='Defined at 212 in Objects/complexobject.c.'>PyComplex_FromCComplex</a>(c);
<a name='L692'><font color='red'>}</font>
<a name='L693'>
<a name='L694'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(complex_conjugate_doc,
<a name='L695'>"complex.conjugate() -&gt; complex\n"
<a name='L696'>"\n"
<a name='L697'>"Returns the complex conjugate of its argument. (3-4j).conjugate() == 3+4j.");
<a name='L698'>
<a name='L699'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L700'><a href='../S/2784.html#L746' title='Refered from 746 in Objects/complexobject.c.'>complex_getnewargs</a>(PyComplexObject *v)
<a name='L701'><font color='red'>{</font>
<a name='L702'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> c = v-&gt;cval;
<a name='L703'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(dd)", c.real, c.imag);
<a name='L704'><font color='red'>}</font>
<a name='L705'>
<a name='L706'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(complex__format__doc,
<a name='L707'>"complex.__format__() -&gt; str\n"
<a name='L708'>"\n"
<a name='L709'>"Converts to a string according to format_spec.");
<a name='L710'>
<a name='L711'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L712'><a href='../S/2784.html#L747' title='Refered from 747 in Objects/complexobject.c.'>complex__format__</a>(PyObject* self, PyObject* args)
<a name='L713'><font color='red'>{</font>
<a name='L714'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *format_spec;
<a name='L715'>
<a name='L716'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "U:__format__", &amp;format_spec))
<a name='L717'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L718'>    <b>return</b> _PyComplex_FormatAdvanced(self,
<a name='L719'>                                     <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(format_spec),
<a name='L720'>                                     <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(format_spec));
<a name='L721'><font color='red'>}</font>
<a name='L722'>
<a name='L723'><font color='darkred'>#if</font> 0
<a name='L724'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L725'><a href='../S/2784.html#L743' title='Refered from 743 in Objects/complexobject.c.'>complex_is_finite</a>(PyObject *self)
<a name='L726'><font color='red'>{</font>
<a name='L727'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> c;
<a name='L728'>    c = ((PyComplexObject *)self)-&gt;cval;
<a name='L729'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)(<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(c.real) &amp;&amp;
<a name='L730'>                                  <a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(c.imag)));
<a name='L731'><font color='red'>}</font>
<a name='L732'>
<a name='L733'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(complex_is_finite_doc,
<a name='L734'>"complex.is_finite() -&gt; bool\n"
<a name='L735'>"\n"
<a name='L736'>"Returns True if the real and the imaginary part is finite.");
<a name='L737'><font color='darkred'>#endif</font>
<a name='L738'>
<a name='L739'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> complex_methods[] = <font color='red'>{</font>
<a name='L740'>    <font color='red'>{</font>"conjugate",       (PyCFunction)<a href='../S/2784.html#L686' title='Defined at 686 in Objects/complexobject.c.'>complex_conjugate</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L741'>     complex_conjugate_doc<font color='red'>}</font>,
<a name='L742'><font color='darkred'>#if</font> 0
<a name='L743'>    <font color='red'>{</font>"is_finite",       (PyCFunction)<a href='../S/2784.html#L725' title='Defined at 725 in Objects/complexobject.c.'>complex_is_finite</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L744'>     complex_is_finite_doc<font color='red'>}</font>,
<a name='L745'><font color='darkred'>#endif</font>
<a name='L746'>    <font color='red'>{</font>"__getnewargs__",          (PyCFunction)<a href='../S/2784.html#L700' title='Defined at 700 in Objects/complexobject.c.'>complex_getnewargs</a>,        <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L747'>    <font color='red'>{</font>"__format__",          (PyCFunction)<a href='../S/2784.html#L712' title='Defined at 712 in Objects/complexobject.c.'>complex__format__</a>,
<a name='L748'>                                       <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, complex__format__doc<font color='red'>}</font>,
<a name='L749'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>           <i><font color='green'>/* sentinel */</font></i>
<a name='L750'><font color='red'>}</font>;
<a name='L751'>
<a name='L752'><b>static</b> <a href='../D/3506.html' title='Multiple defined in 2 places.'>PyMemberDef</a> complex_members[] = <font color='red'>{</font>
<a name='L753'>    <font color='red'>{</font>"real", <a href='../S/577.html#L42' title='Defined at 42 in Include/structmember.h.'>T_DOUBLE</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(PyComplexObject, cval.real), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a>,
<a name='L754'>     "the real part of a complex number"<font color='red'>}</font>,
<a name='L755'>    <font color='red'>{</font>"imag", <a href='../S/577.html#L42' title='Defined at 42 in Include/structmember.h.'>T_DOUBLE</a>, <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(PyComplexObject, cval.imag), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a>,
<a name='L756'>     "the imaginary part of a complex number"<font color='red'>}</font>,
<a name='L757'>    <font color='red'>{</font>0<font color='red'>}</font>,
<a name='L758'><font color='red'>}</font>;
<a name='L759'>
<a name='L760'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L761'><a href='../S/2784.html#L947' title='Refered from 947 in Objects/complexobject.c.'>complex_subtype_from_string</a>(PyTypeObject *type, PyObject *v)
<a name='L762'><font color='red'>{</font>
<a name='L763'>    <b>const</b> <b>char</b> *s, *start;
<a name='L764'>    <b>char</b> *end;
<a name='L765'>    <b>double</b> x=0.0, y=0.0, z;
<a name='L766'>    <b>int</b> got_bracket=0;
<a name='L767'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s_buffer = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L768'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L769'>
<a name='L770'>    <b>if</b> (PyUnicode_Check(v)) <font color='red'>{</font>
<a name='L771'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, buflen = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(v);
<a name='L772'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *bufptr;
<a name='L773'>        s_buffer = <a href='../S/2828.html#L6208' title='Defined at 6208 in Objects/unicodeobject.c.'>PyUnicode_TransformDecimalToASCII</a>(
<a name='L774'>            <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v), buflen);
<a name='L775'>        <b>if</b> (s_buffer == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L776'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L777'>        <i><font color='green'>/* Replace non-ASCII whitespace with ' ' */</font></i>
<a name='L778'>        bufptr = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(s_buffer);
<a name='L779'>        <b>for</b> (i = 0; i &lt; buflen; i++) <font color='red'>{</font>
<a name='L780'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = bufptr[i];
<a name='L781'>            <b>if</b> (ch &gt; 127 &amp;&amp; <a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(ch))
<a name='L782'>                bufptr[i] = ' ';
<a name='L783'>        <font color='red'>}</font>
<a name='L784'>        s = <a href='../S/2828.html#L1903' title='Defined at 1903 in Objects/unicodeobject.c.'>_PyUnicode_AsStringAndSize</a>(s_buffer, &amp;len);
<a name='L785'>        <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L786'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L787'>    <font color='red'>}</font>
<a name='L788'>    <b>else</b> <b>if</b> (<a href='../S/2775.html#L226' title='Defined at 226 in Objects/abstract.c.'>PyObject_AsCharBuffer</a>(v, &amp;s, &amp;len)) <font color='red'>{</font>
<a name='L789'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L790'>                        "complex() argument must be a string or a number");
<a name='L791'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L792'>    <font color='red'>}</font>
<a name='L793'>
<a name='L794'>    <i><font color='green'>/* position on first nonblank */</font></i>
<a name='L795'>    start = s;
<a name='L796'>    <b>while</b> (<a href='../S/556.html#L24' title='Defined at 24 in Include/pyctype.h.'>Py_ISSPACE</a>(*s))
<a name='L797'>        s++;
<a name='L798'>    <b>if</b> (*s == '(') <font color='red'>{</font>
<a name='L799'>        <i><font color='green'>/* Skip over possible bracket from repr(). */</font></i>
<a name='L800'>        got_bracket = 1;
<a name='L801'>        s++;
<a name='L802'>        <b>while</b> (<a href='../S/556.html#L24' title='Defined at 24 in Include/pyctype.h.'>Py_ISSPACE</a>(*s))
<a name='L803'>            s++;
<a name='L804'>    <font color='red'>}</font>
<a name='L805'>
<a name='L806'>    <i><font color='green'>/* a valid complex string usually takes one of the three forms:</font></i>
<a name='L807'><i><font color='green'></font></i>
<a name='L808'><i><font color='green'>         &lt;float&gt;                  - real part only</font></i>
<a name='L809'><i><font color='green'>         &lt;float&gt;j                 - imaginary part only</font></i>
<a name='L810'><i><font color='green'>         &lt;float&gt;&lt;signed-float&gt;j   - real and imaginary parts</font></i>
<a name='L811'><i><font color='green'></font></i>
<a name='L812'><i><font color='green'>       where &lt;float&gt; represents any numeric string that's accepted by the</font></i>
<a name='L813'><i><font color='green'>       float constructor (including 'nan', 'inf', 'infinity', etc.), and</font></i>
<a name='L814'><i><font color='green'>       &lt;signed-float&gt; is any string of the form &lt;float&gt; whose first</font></i>
<a name='L815'><i><font color='green'>       character is '+' or '-'.</font></i>
<a name='L816'><i><font color='green'></font></i>
<a name='L817'><i><font color='green'>       For backwards compatibility, the extra forms</font></i>
<a name='L818'><i><font color='green'></font></i>
<a name='L819'><i><font color='green'>         &lt;float&gt;&lt;sign&gt;j</font></i>
<a name='L820'><i><font color='green'>         &lt;sign&gt;j</font></i>
<a name='L821'><i><font color='green'>         j</font></i>
<a name='L822'><i><font color='green'></font></i>
<a name='L823'><i><font color='green'>       are also accepted, though support for these forms may be removed from</font></i>
<a name='L824'><i><font color='green'>       a future version of Python.</font></i>
<a name='L825'><i><font color='green'>    */</font></i>
<a name='L826'>
<a name='L827'>    <i><font color='green'>/* first look for forms starting with &lt;float&gt; */</font></i>
<a name='L828'>    z = <a href='../S/3136.html#L298' title='Defined at 298 in Python/pystrtod.c.'>PyOS_string_to_double</a>(s, &amp;end, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L829'>    <b>if</b> (z == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L830'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_ValueError))
<a name='L831'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L832'>        <b>else</b>
<a name='L833'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L834'>    <font color='red'>}</font>
<a name='L835'>    <b>if</b> (end != s) <font color='red'>{</font>
<a name='L836'>        <i><font color='green'>/* all 4 forms starting with &lt;float&gt; land here */</font></i>
<a name='L837'>        s = end;
<a name='L838'>        <b>if</b> (*s == '+' || *s == '-') <font color='red'>{</font>
<a name='L839'>            <i><font color='green'>/* &lt;float&gt;&lt;signed-float&gt;j | &lt;float&gt;&lt;sign&gt;j */</font></i>
<a name='L840'>            x = z;
<a name='L841'>            y = <a href='../S/3136.html#L298' title='Defined at 298 in Python/pystrtod.c.'>PyOS_string_to_double</a>(s, &amp;end, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L842'>            <b>if</b> (y == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L843'>                <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_ValueError))
<a name='L844'>                    <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L845'>                <b>else</b>
<a name='L846'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L847'>            <font color='red'>}</font>
<a name='L848'>            <b>if</b> (end != s)
<a name='L849'>                <i><font color='green'>/* &lt;float&gt;&lt;signed-float&gt;j */</font></i>
<a name='L850'>                s = end;
<a name='L851'>            <b>else</b> <font color='red'>{</font>
<a name='L852'>                <i><font color='green'>/* &lt;float&gt;&lt;sign&gt;j */</font></i>
<a name='L853'>                y = *s == '+' ? 1.0 : -1.0;
<a name='L854'>                s++;
<a name='L855'>            <font color='red'>}</font>
<a name='L856'>            <b>if</b> (!(*s == 'j' || *s == 'J'))
<a name='L857'>                <b>goto</b> parse_error;
<a name='L858'>            s++;
<a name='L859'>        <font color='red'>}</font>
<a name='L860'>        <b>else</b> <b>if</b> (*s == 'j' || *s == 'J') <font color='red'>{</font>
<a name='L861'>            <i><font color='green'>/* &lt;float&gt;j */</font></i>
<a name='L862'>            s++;
<a name='L863'>            y = z;
<a name='L864'>        <font color='red'>}</font>
<a name='L865'>        <b>else</b>
<a name='L866'>            <i><font color='green'>/* &lt;float&gt; */</font></i>
<a name='L867'>            x = z;
<a name='L868'>    <font color='red'>}</font>
<a name='L869'>    <b>else</b> <font color='red'>{</font>
<a name='L870'>        <i><font color='green'>/* not starting with &lt;float&gt;; must be &lt;sign&gt;j or j */</font></i>
<a name='L871'>        <b>if</b> (*s == '+' || *s == '-') <font color='red'>{</font>
<a name='L872'>            <i><font color='green'>/* &lt;sign&gt;j */</font></i>
<a name='L873'>            y = *s == '+' ? 1.0 : -1.0;
<a name='L874'>            s++;
<a name='L875'>        <font color='red'>}</font>
<a name='L876'>        <b>else</b>
<a name='L877'>            <i><font color='green'>/* j */</font></i>
<a name='L878'>            y = 1.0;
<a name='L879'>        <b>if</b> (!(*s == 'j' || *s == 'J'))
<a name='L880'>            <b>goto</b> parse_error;
<a name='L881'>        s++;
<a name='L882'>    <font color='red'>}</font>
<a name='L883'>
<a name='L884'>    <i><font color='green'>/* trailing whitespace and closing bracket */</font></i>
<a name='L885'>    <b>while</b> (<a href='../S/556.html#L24' title='Defined at 24 in Include/pyctype.h.'>Py_ISSPACE</a>(*s))
<a name='L886'>        s++;
<a name='L887'>    <b>if</b> (got_bracket) <font color='red'>{</font>
<a name='L888'>        <i><font color='green'>/* if there was an opening parenthesis, then the corresponding</font></i>
<a name='L889'><i><font color='green'>           closing parenthesis should be right here */</font></i>
<a name='L890'>        <b>if</b> (*s != ')')
<a name='L891'>            <b>goto</b> parse_error;
<a name='L892'>        s++;
<a name='L893'>        <b>while</b> (<a href='../S/556.html#L24' title='Defined at 24 in Include/pyctype.h.'>Py_ISSPACE</a>(*s))
<a name='L894'>            s++;
<a name='L895'>    <font color='red'>}</font>
<a name='L896'>
<a name='L897'>    <i><font color='green'>/* we should now be at the end of the string */</font></i>
<a name='L898'>    <b>if</b> (s-start != len)
<a name='L899'>        <b>goto</b> parse_error;
<a name='L900'>
<a name='L901'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(s_buffer);
<a name='L902'>    <b>return</b> <a href='../S/2784.html#L226' title='Defined at 226 in Objects/complexobject.c.'>complex_subtype_from_doubles</a>(type, x, y);
<a name='L903'>
<a name='L904'>  parse_error:
<a name='L905'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L906'>                    "complex() arg is a malformed string");
<a name='L907'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L908'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(s_buffer);
<a name='L909'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L910'><font color='red'>}</font>
<a name='L911'>
<a name='L912'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L913'><a href='../S/2784.html#L1125' title='Refered from 1125 in Objects/complexobject.c.'>complex_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L914'><font color='red'>{</font>
<a name='L915'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *r, *i, *tmp;
<a name='L916'>    <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *nbr, *nbi = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L917'>    <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> cr, ci;
<a name='L918'>    <b>int</b> own_r = 0;
<a name='L919'>    <b>int</b> cr_is_complex = 0;
<a name='L920'>    <b>int</b> ci_is_complex = 0;
<a name='L921'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"real", "imag", 0<font color='red'>}</font>;
<a name='L922'>
<a name='L923'>    r = Py_False;
<a name='L924'>    i = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L925'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "|OO:complex", kwlist,
<a name='L926'>                                     &amp;r, &amp;i))
<a name='L927'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L928'>
<a name='L929'>    <i><font color='green'>/* Special-case for a single argument when type(arg) is complex. */</font></i>
<a name='L930'>    <b>if</b> (PyComplex_CheckExact(r) &amp;&amp; i == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp;
<a name='L931'>        type == &amp;PyComplex_Type) <font color='red'>{</font>
<a name='L932'>        <i><font color='green'>/* Note that we can't know whether it's safe to return</font></i>
<a name='L933'><i><font color='green'>           a complex *subclass* instance as-is, hence the restriction</font></i>
<a name='L934'><i><font color='green'>           to exact complexes here.  If either the input or the</font></i>
<a name='L935'><i><font color='green'>           output is a complex subclass, it will be handled below</font></i>
<a name='L936'><i><font color='green'>           as a non-orthogonal vector.  */</font></i>
<a name='L937'>        Py_INCREF(r);
<a name='L938'>        <b>return</b> r;
<a name='L939'>    <font color='red'>}</font>
<a name='L940'>    <b>if</b> (PyUnicode_Check(r)) <font color='red'>{</font>
<a name='L941'>        <b>if</b> (i != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L942'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L943'>                            "complex() can't take second arg"
<a name='L944'>                            " if first is a string");
<a name='L945'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L946'>        <font color='red'>}</font>
<a name='L947'>        <b>return</b> <a href='../S/2784.html#L761' title='Defined at 761 in Objects/complexobject.c.'>complex_subtype_from_string</a>(type, r);
<a name='L948'>    <font color='red'>}</font>
<a name='L949'>    <b>if</b> (i != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; PyUnicode_Check(i)) <font color='red'>{</font>
<a name='L950'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L951'>                        "complex() second arg can't be a string");
<a name='L952'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L953'>    <font color='red'>}</font>
<a name='L954'>
<a name='L955'>    tmp = <a href='../S/2784.html#L266' title='Defined at 266 in Objects/complexobject.c.'>try_complex_special_method</a>(r);
<a name='L956'>    <b>if</b> (tmp) <font color='red'>{</font>
<a name='L957'>        r = tmp;
<a name='L958'>        own_r = 1;
<a name='L959'>    <font color='red'>}</font>
<a name='L960'>    <b>else</b> <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L961'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L962'>    <font color='red'>}</font>
<a name='L963'>
<a name='L964'>    nbr = r-&gt;ob_type-&gt;tp_as_number;
<a name='L965'>    <b>if</b> (i != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L966'>        nbi = i-&gt;ob_type-&gt;tp_as_number;
<a name='L967'>    <b>if</b> (nbr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || nbr-&gt;nb_float == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L968'>        ((i != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) &amp;&amp; (nbi == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || nbi-&gt;nb_float == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>))) <font color='red'>{</font>
<a name='L969'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L970'>                   "complex() argument must be a string or a number");
<a name='L971'>        <b>if</b> (own_r) <font color='red'>{</font>
<a name='L972'>            Py_DECREF(r);
<a name='L973'>        <font color='red'>}</font>
<a name='L974'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L975'>    <font color='red'>}</font>
<a name='L976'>
<a name='L977'>    <i><font color='green'>/* If we get this far, then the "real" and "imag" parts should</font></i>
<a name='L978'><i><font color='green'>       both be treated as numbers, and the constructor should return a</font></i>
<a name='L979'><i><font color='green'>       complex number equal to (real + imag*1j).</font></i>
<a name='L980'><i><font color='green'></font></i>
<a name='L981'><i><font color='green'>       Note that we do NOT assume the input to already be in canonical</font></i>
<a name='L982'><i><font color='green'>       form; the "real" and "imag" parts might themselves be complex</font></i>
<a name='L983'><i><font color='green'>       numbers, which slightly complicates the code below. */</font></i>
<a name='L984'>    <b>if</b> (PyComplex_Check(r)) <font color='red'>{</font>
<a name='L985'>        <i><font color='green'>/* Note that if r is of a complex subtype, we're only</font></i>
<a name='L986'><i><font color='green'>           retaining its real &amp; imag parts here, and the return</font></i>
<a name='L987'><i><font color='green'>           value is (properly) of the builtin complex type. */</font></i>
<a name='L988'>        cr = ((PyComplexObject*)r)-&gt;cval;
<a name='L989'>        cr_is_complex = 1;
<a name='L990'>        <b>if</b> (own_r) <font color='red'>{</font>
<a name='L991'>            Py_DECREF(r);
<a name='L992'>        <font color='red'>}</font>
<a name='L993'>    <font color='red'>}</font>
<a name='L994'>    <b>else</b> <font color='red'>{</font>
<a name='L995'>        <i><font color='green'>/* The "real" part really is entirely real, and contributes</font></i>
<a name='L996'><i><font color='green'>           nothing in the imaginary direction.</font></i>
<a name='L997'><i><font color='green'>           Just treat it as a double. */</font></i>
<a name='L998'>        tmp = <a href='../S/2775.html#L1393' title='Defined at 1393 in Objects/abstract.c.'>PyNumber_Float</a>(r);
<a name='L999'>        <b>if</b> (own_r) <font color='red'>{</font>
<a name='L1000'>            <i><font color='green'>/* r was a newly created complex number, rather</font></i>
<a name='L1001'><i><font color='green'>               than the original "real" argument. */</font></i>
<a name='L1002'>            Py_DECREF(r);
<a name='L1003'>        <font color='red'>}</font>
<a name='L1004'>        <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1005'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1006'>        <b>if</b> (!PyFloat_Check(tmp)) <font color='red'>{</font>
<a name='L1007'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1008'>                            "float(r) didn't return a float");
<a name='L1009'>            Py_DECREF(tmp);
<a name='L1010'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1011'>        <font color='red'>}</font>
<a name='L1012'>        cr.real = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(tmp);
<a name='L1013'>        cr.imag = 0.0; <i><font color='green'>/* Shut up compiler warning */</font></i>
<a name='L1014'>        Py_DECREF(tmp);
<a name='L1015'>    <font color='red'>}</font>
<a name='L1016'>    <b>if</b> (i == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1017'>        ci.real = 0.0;
<a name='L1018'>    <font color='red'>}</font>
<a name='L1019'>    <b>else</b> <b>if</b> (PyComplex_Check(i)) <font color='red'>{</font>
<a name='L1020'>        ci = ((PyComplexObject*)i)-&gt;cval;
<a name='L1021'>        ci_is_complex = 1;
<a name='L1022'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1023'>        <i><font color='green'>/* The "imag" part really is entirely imaginary, and</font></i>
<a name='L1024'><i><font color='green'>           contributes nothing in the real direction.</font></i>
<a name='L1025'><i><font color='green'>           Just treat it as a double. */</font></i>
<a name='L1026'>        tmp = (*nbi-&gt;nb_float)(i);
<a name='L1027'>        <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1028'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1029'>        ci.real = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(tmp);
<a name='L1030'>        Py_DECREF(tmp);
<a name='L1031'>    <font color='red'>}</font>
<a name='L1032'>    <i><font color='green'>/*  If the input was in canonical form, then the "real" and "imag"</font></i>
<a name='L1033'><i><font color='green'>        parts are real numbers, so that ci.imag and cr.imag are zero.</font></i>
<a name='L1034'><i><font color='green'>        We need this correction in case they were not real numbers. */</font></i>
<a name='L1035'>
<a name='L1036'>    <b>if</b> (ci_is_complex) <font color='red'>{</font>
<a name='L1037'>        cr.real -= ci.imag;
<a name='L1038'>    <font color='red'>}</font>
<a name='L1039'>    <b>if</b> (cr_is_complex) <font color='red'>{</font>
<a name='L1040'>        ci.real += cr.imag;
<a name='L1041'>    <font color='red'>}</font>
<a name='L1042'>    <b>return</b> <a href='../S/2784.html#L226' title='Defined at 226 in Objects/complexobject.c.'>complex_subtype_from_doubles</a>(type, cr.real, ci.real);
<a name='L1043'><font color='red'>}</font>
<a name='L1044'>
<a name='L1045'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(complex_doc,
<a name='L1046'>"complex(real[, imag]) -&gt; complex number\n"
<a name='L1047'>"\n"
<a name='L1048'>"Create a complex number from a real part and an optional imaginary part.\n"
<a name='L1049'>"This is equivalent to (real + imag*1j) where imag defaults to 0.");
<a name='L1050'>
<a name='L1051'><b>static</b> <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> complex_as_number = <font color='red'>{</font>
<a name='L1052'>    (binaryfunc)<a href='../S/2784.html#L449' title='Defined at 449 in Objects/complexobject.c.'>complex_add</a>,                    <i><font color='green'>/* nb_add */</font></i>
<a name='L1053'>    (binaryfunc)<a href='../S/2784.html#L462' title='Defined at 462 in Objects/complexobject.c.'>complex_sub</a>,                    <i><font color='green'>/* nb_subtract */</font></i>
<a name='L1054'>    (binaryfunc)<a href='../S/2784.html#L475' title='Defined at 475 in Objects/complexobject.c.'>complex_mul</a>,                    <i><font color='green'>/* nb_multiply */</font></i>
<a name='L1055'>    (binaryfunc)<a href='../S/2784.html#L506' title='Defined at 506 in Objects/complexobject.c.'>complex_remainder</a>,              <i><font color='green'>/* nb_remainder */</font></i>
<a name='L1056'>    (binaryfunc)<a href='../S/2784.html#L515' title='Defined at 515 in Objects/complexobject.c.'>complex_divmod</a>,                 <i><font color='green'>/* nb_divmod */</font></i>
<a name='L1057'>    (ternaryfunc)<a href='../S/2784.html#L523' title='Defined at 523 in Objects/complexobject.c.'>complex_pow</a>,                   <i><font color='green'>/* nb_power */</font></i>
<a name='L1058'>    (unaryfunc)<a href='../S/2784.html#L569' title='Defined at 569 in Objects/complexobject.c.'>complex_neg</a>,                     <i><font color='green'>/* nb_negative */</font></i>
<a name='L1059'>    (unaryfunc)<a href='../S/2784.html#L578' title='Defined at 578 in Objects/complexobject.c.'>complex_pos</a>,                     <i><font color='green'>/* nb_positive */</font></i>
<a name='L1060'>    (unaryfunc)<a href='../S/2784.html#L589' title='Defined at 589 in Objects/complexobject.c.'>complex_abs</a>,                     <i><font color='green'>/* nb_absolute */</font></i>
<a name='L1061'>    (inquiry)<a href='../S/2784.html#L606' title='Defined at 606 in Objects/complexobject.c.'>complex_bool</a>,                      <i><font color='green'>/* nb_bool */</font></i>
<a name='L1062'>    0,                                          <i><font color='green'>/* nb_invert */</font></i>
<a name='L1063'>    0,                                          <i><font color='green'>/* nb_lshift */</font></i>
<a name='L1064'>    0,                                          <i><font color='green'>/* nb_rshift */</font></i>
<a name='L1065'>    0,                                          <i><font color='green'>/* nb_and */</font></i>
<a name='L1066'>    0,                                          <i><font color='green'>/* nb_xor */</font></i>
<a name='L1067'>    0,                                          <i><font color='green'>/* nb_or */</font></i>
<a name='L1068'>    <a href='../S/2784.html#L670' title='Defined at 670 in Objects/complexobject.c.'>complex_int</a>,                                <i><font color='green'>/* nb_int */</font></i>
<a name='L1069'>    0,                                          <i><font color='green'>/* nb_reserved */</font></i>
<a name='L1070'>    <a href='../S/2784.html#L678' title='Defined at 678 in Objects/complexobject.c.'>complex_float</a>,                              <i><font color='green'>/* nb_float */</font></i>
<a name='L1071'>    0,                                          <i><font color='green'>/* nb_inplace_add */</font></i>
<a name='L1072'>    0,                                          <i><font color='green'>/* nb_inplace_subtract */</font></i>
<a name='L1073'>    0,                                          <i><font color='green'>/* nb_inplace_multiply*/</font></i>
<a name='L1074'>    0,                                          <i><font color='green'>/* nb_inplace_remainder */</font></i>
<a name='L1075'>    0,                                          <i><font color='green'>/* nb_inplace_power */</font></i>
<a name='L1076'>    0,                                          <i><font color='green'>/* nb_inplace_lshift */</font></i>
<a name='L1077'>    0,                                          <i><font color='green'>/* nb_inplace_rshift */</font></i>
<a name='L1078'>    0,                                          <i><font color='green'>/* nb_inplace_and */</font></i>
<a name='L1079'>    0,                                          <i><font color='green'>/* nb_inplace_xor */</font></i>
<a name='L1080'>    0,                                          <i><font color='green'>/* nb_inplace_or */</font></i>
<a name='L1081'>    (binaryfunc)<a href='../S/2784.html#L561' title='Defined at 561 in Objects/complexobject.c.'>complex_int_div</a>,                <i><font color='green'>/* nb_floor_divide */</font></i>
<a name='L1082'>    (binaryfunc)<a href='../S/2784.html#L488' title='Defined at 488 in Objects/complexobject.c.'>complex_div</a>,                    <i><font color='green'>/* nb_true_divide */</font></i>
<a name='L1083'>    0,                                          <i><font color='green'>/* nb_inplace_floor_divide */</font></i>
<a name='L1084'>    0,                                          <i><font color='green'>/* nb_inplace_true_divide */</font></i>
<a name='L1085'><font color='red'>}</font>;
<a name='L1086'>
<a name='L1087'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyComplex_Type = <font color='red'>{</font>
<a name='L1088'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(&amp;PyType_Type, 0)
<a name='L1089'>    "complex",
<a name='L1090'>    <b>sizeof</b>(PyComplexObject),
<a name='L1091'>    0,
<a name='L1092'>    <a href='../S/2784.html#L322' title='Defined at 322 in Objects/complexobject.c.'>complex_dealloc</a>,                            <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L1093'>    0,                                          <i><font color='green'>/* tp_print */</font></i>
<a name='L1094'>    0,                                          <i><font color='green'>/* tp_getattr */</font></i>
<a name='L1095'>    0,                                          <i><font color='green'>/* tp_setattr */</font></i>
<a name='L1096'>    0,                                          <i><font color='green'>/* tp_reserved */</font></i>
<a name='L1097'>    (reprfunc)<a href='../S/2784.html#L328' title='Defined at 328 in Objects/complexobject.c.'>complex_repr</a>,                     <i><font color='green'>/* tp_repr */</font></i>
<a name='L1098'>    &amp;complex_as_number,                         <i><font color='green'>/* tp_as_number */</font></i>
<a name='L1099'>    0,                                          <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L1100'>    0,                                          <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L1101'>    (hashfunc)<a href='../S/2784.html#L396' title='Defined at 396 in Objects/complexobject.c.'>complex_hash</a>,                     <i><font color='green'>/* tp_hash */</font></i>
<a name='L1102'>    0,                                          <i><font color='green'>/* tp_call */</font></i>
<a name='L1103'>    (reprfunc)<a href='../S/2784.html#L328' title='Defined at 328 in Objects/complexobject.c.'>complex_repr</a>,                     <i><font color='green'>/* tp_str */</font></i>
<a name='L1104'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,                    <i><font color='green'>/* tp_getattro */</font></i>
<a name='L1105'>    0,                                          <i><font color='green'>/* tp_setattro */</font></i>
<a name='L1106'>    0,                                          <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L1107'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE, <i><font color='green'>/* tp_flags */</font></i>
<a name='L1108'>    complex_doc,                                <i><font color='green'>/* tp_doc */</font></i>
<a name='L1109'>    0,                                          <i><font color='green'>/* tp_traverse */</font></i>
<a name='L1110'>    0,                                          <i><font color='green'>/* tp_clear */</font></i>
<a name='L1111'>    <a href='../S/2784.html#L612' title='Defined at 612 in Objects/complexobject.c.'>complex_richcompare</a>,                        <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L1112'>    0,                                          <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L1113'>    0,                                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L1114'>    0,                                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L1115'>    complex_methods,                            <i><font color='green'>/* tp_methods */</font></i>
<a name='L1116'>    complex_members,                            <i><font color='green'>/* tp_members */</font></i>
<a name='L1117'>    0,                                          <i><font color='green'>/* tp_getset */</font></i>
<a name='L1118'>    0,                                          <i><font color='green'>/* tp_base */</font></i>
<a name='L1119'>    0,                                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L1120'>    0,                                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L1121'>    0,                                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L1122'>    0,                                          <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L1123'>    0,                                          <i><font color='green'>/* tp_init */</font></i>
<a name='L1124'>    <a href='../S/2824.html#L700' title='Defined at 700 in Objects/typeobject.c.'>PyType_GenericAlloc</a>,                        <i><font color='green'>/* tp_alloc */</font></i>
<a name='L1125'>    <a href='../S/2784.html#L913' title='Defined at 913 in Objects/complexobject.c.'>complex_new</a>,                                <i><font color='green'>/* tp_new */</font></i>
<a name='L1126'>    PyObject_Del,                               <i><font color='green'>/* tp_free */</font></i>
<a name='L1127'><font color='red'>}</font>;
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L16'>[^]</a><a href='#L913'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
