<html>
<head>
<title>Python/_warnings.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3402.html'>Python</a>/_warnings.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L18'>[^]</a><a href='#L945'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L18' title='Defined at 18.'>check_matched</a>
<li><a href='#L39' title='Defined at 39.'>get_warnings_attr</a>
<li><a href='#L65' title='Defined at 65.'>get_once_registry</a>
<li><a href='#L82' title='Defined at 82.'>get_default_action</a>
<li><a href='#L102' title='Defined at 102.'>get_filter</a>
<li><a href='#L169' title='Defined at 169.'>already_warned</a>
<li><a href='#L191' title='Defined at 191.'>normalize_module</a>
<li><a href='#L221' title='Defined at 221.'>update_registry</a>
<li><a href='#L243' title='Defined at 243.'>show_warning</a>
<li><a href='#L291' title='Defined at 291.'>warn_explicit</a>
<li><a href='#L448' title='Defined at 448.'>setup_context</a>
<li><a href='#L565' title='Defined at 565.'>get_category</a>
<li><a href='#L593' title='Defined at 593.'>do_warn</a>
<li><a href='#L610' title='Defined at 610.'>warnings_warn</a>
<li><a href='#L627' title='Defined at 627.'>warnings_warn_explicit</a>
<li><a href='#L715' title='Defined at 715.'>warn_unicode</a>
<li><a href='#L732' title='Defined at 732.'>PyErr_WarnFormat</a>
<li><a href='#L756' title='Defined at 756.'>PyErr_WarnEx</a>
<li><a href='#L772' title='Defined at 772.'>PyAPI_FUNC</a>
<li><a href='#L780' title='Defined at 780.'>PyErr_WarnExplicit</a>
<li><a href='#L833' title='Defined at 833.'>create_filter</a>
<li><a href='#L888' title='Defined at 888.'>init_filters</a>
<li><a href='#L945' title='Defined at 945.'>_PyWarnings_Init</a>
</ol>
<hr>
<pre>
<a name='L1'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L2'><font color='darkred'>#include</font> "<a href='526.html'>frameobject.h</a>"
<a name='L3'>
<a name='L4'><font color='darkred'>#define</font> <a href='../R/1960.html' title='Multiple refered from 30 places.'>MODULE_NAME</a> "_warnings"
<a name='L5'>
<a name='L6'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(warnings__doc__,
<a name='L7'><a href='../D/2163.html' title='Multiple defined in 2 places.'>MODULE_NAME</a> " provides basic warning filtering support.\n"
<a name='L8'>"It is a helper module to speed up interpreter start-up.");
<a name='L9'>
<a name='L10'><i><font color='green'>/* Both 'filters' and 'onceregistry' can be set in warnings.py;</font></i>
<a name='L11'><i><font color='green'>   get_warnings_attr() will reset these variables accordingly. */</font></i>
<a name='L12'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_filters;  <i><font color='green'>/* List */</font></i>
<a name='L13'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_once_registry;  <i><font color='green'>/* Dict */</font></i>
<a name='L14'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_default_action; <i><font color='green'>/* String */</font></i>
<a name='L15'>
<a name='L16'>
<a name='L17'><b>static</b> <b>int</b>
<a name='L18'><a href='../R/6638.html' title='Multiple refered from 2 places.'>check_matched</a>(PyObject *obj, PyObject *arg)
<a name='L19'><font color='red'>{</font>
<a name='L20'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L21'>    <b>int</b> rc;
<a name='L22'>
<a name='L23'>    <b>if</b> (obj == Py_None)
<a name='L24'>        <b>return</b> 1;
<a name='L25'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(obj, "match", "O", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L26'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L27'>        <b>return</b> -1;
<a name='L28'>
<a name='L29'>    rc = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L30'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L31'>    <b>return</b> rc;
<a name='L32'><font color='red'>}</font>
<a name='L33'>
<a name='L34'><i><font color='green'>/*</font></i>
<a name='L35'><i><font color='green'>   Returns a new reference.</font></i>
<a name='L36'><i><font color='green'>   A NULL return value can mean false or an error.</font></i>
<a name='L37'><i><font color='green'>*/</font></i>
<a name='L38'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L39'><a href='../R/8107.html' title='Multiple refered from 4 places.'>get_warnings_attr</a>(<b>const</b> <b>char</b> *attr)
<a name='L40'><font color='red'>{</font>
<a name='L41'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *warnings_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L42'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *all_modules;
<a name='L43'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *warnings_module;
<a name='L44'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L45'>
<a name='L46'>    <b>if</b> (warnings_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L47'>        warnings_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("warnings");
<a name='L48'>        <b>if</b> (warnings_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L49'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L50'>    <font color='red'>}</font>
<a name='L51'>
<a name='L52'>    all_modules = <a href='../S/3120.html#L388' title='Defined at 388 in Python/import.c.'>PyImport_GetModuleDict</a>();
<a name='L53'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2787.html#L2029' title='Defined at 2029 in Objects/dictobject.c.'>PyDict_Contains</a>(all_modules, warnings_str);
<a name='L54'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == -1 || <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == 0)
<a name='L55'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L56'>
<a name='L57'>    warnings_module = <a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(all_modules, warnings_str);
<a name='L58'>    <b>if</b> (!<a href='../S/2803.html#L794' title='Defined at 794 in Objects/object.c.'>PyObject_HasAttrString</a>(warnings_module, attr))
<a name='L59'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L60'>    <b>return</b> <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(warnings_module, attr);
<a name='L61'><font color='red'>}</font>
<a name='L62'>
<a name='L63'>
<a name='L64'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L65'><a href='../S/3087.html#L371' title='Refered from 371 in Python/_warnings.c.'>get_once_registry</a>(<b>void</b>)
<a name='L66'><font color='red'>{</font>
<a name='L67'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *registry;
<a name='L68'>
<a name='L69'>    registry = <a href='../S/3087.html#L39' title='Defined at 39 in Python/_warnings.c.'>get_warnings_attr</a>("onceregistry");
<a name='L70'>    <b>if</b> (registry == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L71'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L72'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L73'>        <b>return</b> _once_registry;
<a name='L74'>    <font color='red'>}</font>
<a name='L75'>    Py_DECREF(_once_registry);
<a name='L76'>    _once_registry = registry;
<a name='L77'>    <b>return</b> registry;
<a name='L78'><font color='red'>}</font>
<a name='L79'>
<a name='L80'>
<a name='L81'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L82'><a href='../S/3087.html#L157' title='Refered from 157 in Python/_warnings.c.'>get_default_action</a>(<b>void</b>)
<a name='L83'><font color='red'>{</font>
<a name='L84'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *default_action;
<a name='L85'>
<a name='L86'>    default_action = <a href='../S/3087.html#L39' title='Defined at 39 in Python/_warnings.c.'>get_warnings_attr</a>("defaultaction");
<a name='L87'>    <b>if</b> (default_action == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L88'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L89'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L90'>        <font color='red'>}</font>
<a name='L91'>        <b>return</b> _default_action;
<a name='L92'>    <font color='red'>}</font>
<a name='L93'>
<a name='L94'>    Py_DECREF(_default_action);
<a name='L95'>    _default_action = default_action;
<a name='L96'>    <b>return</b> default_action;
<a name='L97'><font color='red'>}</font>
<a name='L98'>
<a name='L99'>
<a name='L100'><i><font color='green'>/* The item is a borrowed reference. */</font></i>
<a name='L101'><b>static</b> <b>const</b> <b>char</b> *
<a name='L102'><a href='../S/3087.html#L351' title='Refered from 351 in Python/_warnings.c.'>get_filter</a>(PyObject *category, PyObject *text, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> lineno,
<a name='L103'>           PyObject *module, PyObject **item)
<a name='L104'><font color='red'>{</font>
<a name='L105'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *action;
<a name='L106'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L107'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *warnings_filters;
<a name='L108'>
<a name='L109'>    warnings_filters = <a href='../S/3087.html#L39' title='Defined at 39 in Python/_warnings.c.'>get_warnings_attr</a>("filters");
<a name='L110'>    <b>if</b> (warnings_filters == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L111'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L112'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L113'>    <font color='red'>}</font>
<a name='L114'>    <b>else</b> <font color='red'>{</font>
<a name='L115'>        Py_DECREF(_filters);
<a name='L116'>        _filters = warnings_filters;
<a name='L117'>    <font color='red'>}</font>
<a name='L118'>
<a name='L119'>    <b>if</b> (_filters == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyList_Check(_filters)) <font color='red'>{</font>
<a name='L120'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L121'>                        <a href='../D/2163.html' title='Multiple defined in 2 places.'>MODULE_NAME</a> ".filters must be a list");
<a name='L122'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L123'>    <font color='red'>}</font>
<a name='L124'>
<a name='L125'>    <i><font color='green'>/* _filters could change while we are iterating over it. */</font></i>
<a name='L126'>    <b>for</b> (i = 0; i &lt; <a href='../S/534.html#L71' title='Defined at 71 in Include/listobject.h.'>PyList_GET_SIZE</a>(_filters); i++) <font color='red'>{</font>
<a name='L127'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tmp_item, *action, *msg, *cat, *mod, *ln_obj;
<a name='L128'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ln;
<a name='L129'>        <b>int</b> is_subclass, good_msg, good_mod;
<a name='L130'>
<a name='L131'>        tmp_item = *item = PyList_GET_ITEM(_filters, i);
<a name='L132'>        <b>if</b> (<a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(tmp_item) != 5) <font color='red'>{</font>
<a name='L133'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L134'>                         <a href='../D/2163.html' title='Multiple defined in 2 places.'>MODULE_NAME</a> ".filters item %zd isn't a 5-tuple", i);
<a name='L135'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L136'>        <font color='red'>}</font>
<a name='L137'>
<a name='L138'>        <i><font color='green'>/* Python code: action, msg, cat, mod, ln = item */</font></i>
<a name='L139'>        action = PyTuple_GET_ITEM(tmp_item, 0);
<a name='L140'>        msg = PyTuple_GET_ITEM(tmp_item, 1);
<a name='L141'>        cat = PyTuple_GET_ITEM(tmp_item, 2);
<a name='L142'>        mod = PyTuple_GET_ITEM(tmp_item, 3);
<a name='L143'>        ln_obj = PyTuple_GET_ITEM(tmp_item, 4);
<a name='L144'>
<a name='L145'>        good_msg = <a href='../S/3087.html#L18' title='Defined at 18 in Python/_warnings.c.'>check_matched</a>(msg, text);
<a name='L146'>        good_mod = <a href='../S/3087.html#L18' title='Defined at 18 in Python/_warnings.c.'>check_matched</a>(mod, module);
<a name='L147'>        is_subclass = <a href='../S/2775.html#L2608' title='Defined at 2608 in Objects/abstract.c.'>PyObject_IsSubclass</a>(category, cat);
<a name='L148'>        ln = <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>(ln_obj);
<a name='L149'>        <b>if</b> (good_msg == -1 || good_mod == -1 || is_subclass == -1 ||
<a name='L150'>            (ln == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()))
<a name='L151'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L152'>
<a name='L153'>        <b>if</b> (good_msg &amp;&amp; is_subclass &amp;&amp; good_mod &amp;&amp; (ln == 0 || lineno == ln))
<a name='L154'>            <b>return</b> <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(action);
<a name='L155'>    <font color='red'>}</font>
<a name='L156'>
<a name='L157'>    action = <a href='../S/3087.html#L82' title='Defined at 82 in Python/_warnings.c.'>get_default_action</a>();
<a name='L158'>    <b>if</b> (action != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L159'>        <b>return</b> <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(action);
<a name='L160'>    <font color='red'>}</font>
<a name='L161'>
<a name='L162'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L163'>                    <a href='../D/2163.html' title='Multiple defined in 2 places.'>MODULE_NAME</a> ".defaultaction not found");
<a name='L164'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L165'><font color='red'>}</font>
<a name='L166'>
<a name='L167'>
<a name='L168'><b>static</b> <b>int</b>
<a name='L169'><a href='../R/5963.html' title='Multiple refered from 6 places.'>already_warned</a>(PyObject *registry, PyObject *key, <b>int</b> should_set)
<a name='L170'><font color='red'>{</font>
<a name='L171'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3087.html#L169' title='Defined at 169 in Python/_warnings.c.'>already_warned</a>;
<a name='L172'>
<a name='L173'>    <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L174'>        <b>return</b> -1;
<a name='L175'>
<a name='L176'>    <a href='../S/3087.html#L169' title='Defined at 169 in Python/_warnings.c.'>already_warned</a> = <a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(registry, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L177'>    <b>if</b> (<a href='../S/3087.html#L169' title='Defined at 169 in Python/_warnings.c.'>already_warned</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L178'>        <b>int</b> rc = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(<a href='../S/3087.html#L169' title='Defined at 169 in Python/_warnings.c.'>already_warned</a>);
<a name='L179'>        <b>if</b> (rc != 0)
<a name='L180'>            <b>return</b> rc;
<a name='L181'>    <font color='red'>}</font>
<a name='L182'>
<a name='L183'>    <i><font color='green'>/* This warning wasn't found in the registry, set it. */</font></i>
<a name='L184'>    <b>if</b> (should_set)
<a name='L185'>        <b>return</b> <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(registry, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, Py_True);
<a name='L186'>    <b>return</b> 0;
<a name='L187'><font color='red'>}</font>
<a name='L188'>
<a name='L189'><i><font color='green'>/* New reference. */</font></i>
<a name='L190'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L191'><a href='../S/3087.html#L307' title='Refered from 307 in Python/_warnings.c.'>normalize_module</a>(PyObject *filename)
<a name='L192'><font color='red'>{</font>
<a name='L193'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module;
<a name='L194'>    <b>const</b> <b>char</b> *mod_str;
<a name='L195'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L196'>
<a name='L197'>    <b>int</b> rc = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(filename);
<a name='L198'>    <b>if</b> (rc == -1)
<a name='L199'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L200'>    <b>else</b> <b>if</b> (rc == 0)
<a name='L201'>        <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("&lt;unknown&gt;");
<a name='L202'>
<a name='L203'>    mod_str = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(filename);
<a name='L204'>    <b>if</b> (mod_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L205'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L206'>    len = <a href='../D/4020.html' title='Multiple defined in 3 places.'>PyUnicode_GetSize</a>(filename);
<a name='L207'>    <b>if</b> (len &lt; 0)
<a name='L208'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L209'>    <b>if</b> (len &gt;= 3 &amp;&amp;
<a name='L210'>        strncmp(mod_str + (len - 3), ".py", 3) == 0) <font color='red'>{</font>
<a name='L211'>        module = <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(mod_str, len-3);
<a name='L212'>    <font color='red'>}</font>
<a name='L213'>    <b>else</b> <font color='red'>{</font>
<a name='L214'>        module = filename;
<a name='L215'>        Py_INCREF(module);
<a name='L216'>    <font color='red'>}</font>
<a name='L217'>    <b>return</b> module;
<a name='L218'><font color='red'>}</font>
<a name='L219'>
<a name='L220'><b>static</b> <b>int</b>
<a name='L221'><a href='../R/11187.html' title='Multiple refered from 2 places.'>update_registry</a>(PyObject *registry, PyObject *text, PyObject *category,
<a name='L222'>                <b>int</b> add_zero)
<a name='L223'><font color='red'>{</font>
<a name='L224'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *altkey, *zero = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L225'>    <b>int</b> rc;
<a name='L226'>
<a name='L227'>    <b>if</b> (add_zero) <font color='red'>{</font>
<a name='L228'>        zero = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0);
<a name='L229'>        <b>if</b> (zero == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L230'>            <b>return</b> -1;
<a name='L231'>        altkey = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(3, text, category, zero);
<a name='L232'>    <font color='red'>}</font>
<a name='L233'>    <b>else</b>
<a name='L234'>        altkey = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(2, text, category);
<a name='L235'>
<a name='L236'>    rc = <a href='../S/3087.html#L169' title='Defined at 169 in Python/_warnings.c.'>already_warned</a>(registry, altkey, 1);
<a name='L237'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(zero);
<a name='L238'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(altkey);
<a name='L239'>    <b>return</b> rc;
<a name='L240'><font color='red'>}</font>
<a name='L241'>
<a name='L242'><b>static</b> <b>void</b>
<a name='L243'><a href='../S/3087.html#L407' title='Refered from 407 in Python/_warnings.c.'>show_warning</a>(PyObject *filename, <b>int</b> lineno, PyObject *text, PyObject
<a name='L244'>                *category, PyObject *sourceline)
<a name='L245'><font color='red'>{</font>
<a name='L246'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *f_stderr;
<a name='L247'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *name;
<a name='L248'>    <b>char</b> lineno_str[128];
<a name='L249'>
<a name='L250'>    <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(lineno_str, <b>sizeof</b>(lineno_str), ":%d: ", lineno);
<a name='L251'>
<a name='L252'>    name = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(category, "__name__");
<a name='L253'>    <b>if</b> (name == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)  <i><font color='green'>/* XXX Can an object lack a '__name__' attribute? */</font></i>
<a name='L254'>        <b>return</b>;
<a name='L255'>
<a name='L256'>    f_stderr = <a href='../S/3144.html#L44' title='Defined at 44 in Python/sysmodule.c.'>PySys_GetObject</a>("stderr");
<a name='L257'>    <b>if</b> (f_stderr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L258'>        fprintf(stderr, "lost sys.stderr\n");
<a name='L259'>        Py_DECREF(name);
<a name='L260'>        <b>return</b>;
<a name='L261'>    <font color='red'>}</font>
<a name='L262'>
<a name='L263'>    <i><font color='green'>/* Print "filename:lineno: category: text\n" */</font></i>
<a name='L264'>    <a href='../S/2790.html#L131' title='Defined at 131 in Objects/fileobject.c.'>PyFile_WriteObject</a>(filename, f_stderr, Py_PRINT_RAW);
<a name='L265'>    <a href='../S/2790.html#L167' title='Defined at 167 in Objects/fileobject.c.'>PyFile_WriteString</a>(lineno_str, f_stderr);
<a name='L266'>    <a href='../S/2790.html#L131' title='Defined at 131 in Objects/fileobject.c.'>PyFile_WriteObject</a>(name, f_stderr, Py_PRINT_RAW);
<a name='L267'>    <a href='../S/2790.html#L167' title='Defined at 167 in Objects/fileobject.c.'>PyFile_WriteString</a>(": ", f_stderr);
<a name='L268'>    <a href='../S/2790.html#L131' title='Defined at 131 in Objects/fileobject.c.'>PyFile_WriteObject</a>(text, f_stderr, Py_PRINT_RAW);
<a name='L269'>    <a href='../S/2790.html#L167' title='Defined at 167 in Objects/fileobject.c.'>PyFile_WriteString</a>("\n", f_stderr);
<a name='L270'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(name);
<a name='L271'>
<a name='L272'>    <i><font color='green'>/* Print "  source_line\n" */</font></i>
<a name='L273'>    <b>if</b> (sourceline) <font color='red'>{</font>
<a name='L274'>        <b>char</b> *source_line_str = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(sourceline);
<a name='L275'>        <b>if</b> (source_line_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L276'>                <b>return</b>;
<a name='L277'>        <b>while</b> (*source_line_str == ' ' || *source_line_str == '\t' ||
<a name='L278'>                *source_line_str == '\014')
<a name='L279'>            source_line_str++;
<a name='L280'>
<a name='L281'>        <a href='../S/2790.html#L167' title='Defined at 167 in Objects/fileobject.c.'>PyFile_WriteString</a>(source_line_str, f_stderr);
<a name='L282'>        <a href='../S/2790.html#L167' title='Defined at 167 in Objects/fileobject.c.'>PyFile_WriteString</a>("\n", f_stderr);
<a name='L283'>    <font color='red'>}</font>
<a name='L284'>    <b>else</b>
<a name='L285'>        <b>if</b> (<a href='../S/3156.html#L214' title='Defined at 214 in Python/traceback.c.'>_Py_DisplaySourceLine</a>(f_stderr, filename, lineno, 2) &lt; 0)
<a name='L286'>                <b>return</b>;
<a name='L287'>    <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L288'><font color='red'>}</font>
<a name='L289'>
<a name='L290'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L291'><a href='../R/11383.html' title='Multiple refered from 4 places.'>warn_explicit</a>(PyObject *category, PyObject *message,
<a name='L292'>              PyObject *filename, <b>int</b> lineno,
<a name='L293'>              PyObject *module, PyObject *registry, PyObject *sourceline)
<a name='L294'><font color='red'>{</font>
<a name='L295'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *text = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *lineno_obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L296'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item = Py_None;
<a name='L297'>    <b>const</b> <b>char</b> *action;
<a name='L298'>    <b>int</b> rc;
<a name='L299'>
<a name='L300'>    <b>if</b> (registry &amp;&amp; !PyDict_Check(registry) &amp;&amp; (registry != Py_None)) <font color='red'>{</font>
<a name='L301'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "'registry' must be a dict");
<a name='L302'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L303'>    <font color='red'>}</font>
<a name='L304'>
<a name='L305'>    <i><font color='green'>/* Normalize module. */</font></i>
<a name='L306'>    <b>if</b> (module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L307'>        module = <a href='../S/3087.html#L191' title='Defined at 191 in Python/_warnings.c.'>normalize_module</a>(filename);
<a name='L308'>        <b>if</b> (module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L309'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L310'>    <font color='red'>}</font>
<a name='L311'>    <b>else</b>
<a name='L312'>        Py_INCREF(module);
<a name='L313'>
<a name='L314'>    <i><font color='green'>/* Normalize message. */</font></i>
<a name='L315'>    Py_INCREF(message);  <i><font color='green'>/* DECREF'ed in cleanup. */</font></i>
<a name='L316'>    rc = <a href='../S/2775.html#L2539' title='Defined at 2539 in Objects/abstract.c.'>PyObject_IsInstance</a>(message, PyExc_Warning);
<a name='L317'>    <b>if</b> (rc == -1) <font color='red'>{</font>
<a name='L318'>        <b>goto</b> cleanup;
<a name='L319'>    <font color='red'>}</font>
<a name='L320'>    <b>if</b> (rc == 1) <font color='red'>{</font>
<a name='L321'>        text = <a href='../S/2803.html#L396' title='Defined at 396 in Objects/object.c.'>PyObject_Str</a>(message);
<a name='L322'>        <b>if</b> (text == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L323'>            <b>goto</b> cleanup;
<a name='L324'>        category = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)message-&gt;ob_type;
<a name='L325'>    <font color='red'>}</font>
<a name='L326'>    <b>else</b> <font color='red'>{</font>
<a name='L327'>        text = message;
<a name='L328'>        message = <a href='../D/3601.html' title='Multiple defined in 2 places.'>PyObject_CallFunction</a>(category, "O", message);
<a name='L329'>        <b>if</b> (message == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L330'>            <b>goto</b> cleanup;
<a name='L331'>    <font color='red'>}</font>
<a name='L332'>
<a name='L333'>    lineno_obj = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(lineno);
<a name='L334'>    <b>if</b> (lineno_obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L335'>        <b>goto</b> cleanup;
<a name='L336'>
<a name='L337'>    <i><font color='green'>/* Create key. */</font></i>
<a name='L338'>    <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(3, text, category, lineno_obj);
<a name='L339'>    <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L340'>        <b>goto</b> cleanup;
<a name='L341'>
<a name='L342'>    <b>if</b> ((registry != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) &amp;&amp; (registry != Py_None)) <font color='red'>{</font>
<a name='L343'>        rc = <a href='../S/3087.html#L169' title='Defined at 169 in Python/_warnings.c.'>already_warned</a>(registry, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, 0);
<a name='L344'>        <b>if</b> (rc == -1)
<a name='L345'>            <b>goto</b> cleanup;
<a name='L346'>        <b>else</b> <b>if</b> (rc == 1)
<a name='L347'>            <b>goto</b> return_none;
<a name='L348'>        <i><font color='green'>/* Else this warning hasn't been generated before. */</font></i>
<a name='L349'>    <font color='red'>}</font>
<a name='L350'>
<a name='L351'>    action = <a href='../S/3087.html#L102' title='Defined at 102 in Python/_warnings.c.'>get_filter</a>(category, text, lineno, module, &amp;item);
<a name='L352'>    <b>if</b> (action == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L353'>        <b>goto</b> cleanup;
<a name='L354'>
<a name='L355'>    <b>if</b> (strcmp(action, "error") == 0) <font color='red'>{</font>
<a name='L356'>        <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(category, message);
<a name='L357'>        <b>goto</b> cleanup;
<a name='L358'>    <font color='red'>}</font>
<a name='L359'>
<a name='L360'>    <i><font color='green'>/* Store in the registry that we've been here, *except* when the action</font></i>
<a name='L361'><i><font color='green'>       is "always". */</font></i>
<a name='L362'>    rc = 0;
<a name='L363'>    <b>if</b> (strcmp(action, "always") != 0) <font color='red'>{</font>
<a name='L364'>        <b>if</b> (registry != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; registry != Py_None &amp;&amp;
<a name='L365'>                <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(registry, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, Py_True) &lt; 0)
<a name='L366'>            <b>goto</b> cleanup;
<a name='L367'>        <b>else</b> <b>if</b> (strcmp(action, "ignore") == 0)
<a name='L368'>            <b>goto</b> return_none;
<a name='L369'>        <b>else</b> <b>if</b> (strcmp(action, "once") == 0) <font color='red'>{</font>
<a name='L370'>            <b>if</b> (registry == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || registry == Py_None) <font color='red'>{</font>
<a name='L371'>                registry = <a href='../S/3087.html#L65' title='Defined at 65 in Python/_warnings.c.'>get_once_registry</a>();
<a name='L372'>                <b>if</b> (registry == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L373'>                    <b>goto</b> cleanup;
<a name='L374'>            <font color='red'>}</font>
<a name='L375'>            <i><font color='green'>/* _once_registry[(text, category)] = 1 */</font></i>
<a name='L376'>            rc = <a href='../S/3087.html#L221' title='Defined at 221 in Python/_warnings.c.'>update_registry</a>(registry, text, category, 0);
<a name='L377'>        <font color='red'>}</font>
<a name='L378'>        <b>else</b> <b>if</b> (strcmp(action, "module") == 0) <font color='red'>{</font>
<a name='L379'>            <i><font color='green'>/* registry[(text, category, 0)] = 1 */</font></i>
<a name='L380'>            <b>if</b> (registry != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; registry != Py_None)
<a name='L381'>                rc = <a href='../S/3087.html#L221' title='Defined at 221 in Python/_warnings.c.'>update_registry</a>(registry, text, category, 0);
<a name='L382'>        <font color='red'>}</font>
<a name='L383'>        <b>else</b> <b>if</b> (strcmp(action, "default") != 0) <font color='red'>{</font>
<a name='L384'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *to_str = <a href='../S/2803.html#L396' title='Defined at 396 in Objects/object.c.'>PyObject_Str</a>(item);
<a name='L385'>            <b>const</b> <b>char</b> *err_str = "???";
<a name='L386'>
<a name='L387'>            <b>if</b> (to_str != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L388'>                err_str = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(to_str);
<a name='L389'>                <b>if</b> (err_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L390'>                        <b>goto</b> cleanup;
<a name='L391'>            <font color='red'>}</font>
<a name='L392'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L393'>                        "Unrecognized action (%s) in warnings.filters:\n %s",
<a name='L394'>                        action, err_str);
<a name='L395'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(to_str);
<a name='L396'>            <b>goto</b> cleanup;
<a name='L397'>        <font color='red'>}</font>
<a name='L398'>    <font color='red'>}</font>
<a name='L399'>
<a name='L400'>    <b>if</b> (rc == 1)  <i><font color='green'>/* Already warned for this module. */</font></i>
<a name='L401'>        <b>goto</b> return_none;
<a name='L402'>    <b>if</b> (rc == 0) <font color='red'>{</font>
<a name='L403'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *show_fxn = <a href='../S/3087.html#L39' title='Defined at 39 in Python/_warnings.c.'>get_warnings_attr</a>("showwarning");
<a name='L404'>        <b>if</b> (show_fxn == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L405'>            <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L406'>                <b>goto</b> cleanup;
<a name='L407'>            <a href='../S/3087.html#L243' title='Defined at 243 in Python/_warnings.c.'>show_warning</a>(filename, lineno, text, category, sourceline);
<a name='L408'>        <font color='red'>}</font>
<a name='L409'>        <b>else</b> <font color='red'>{</font>
<a name='L410'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L411'>
<a name='L412'>            <b>if</b> (!PyMethod_Check(show_fxn) &amp;&amp; !PyFunction_Check(show_fxn)) <font color='red'>{</font>
<a name='L413'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L414'>                                "warnings.showwarning() must be set to a "
<a name='L415'>                                "function or method");
<a name='L416'>                Py_DECREF(show_fxn);
<a name='L417'>                <b>goto</b> cleanup;
<a name='L418'>            <font color='red'>}</font>
<a name='L419'>
<a name='L420'>            res = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(show_fxn, message, category,
<a name='L421'>                                                filename, lineno_obj,
<a name='L422'>                                                <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L423'>            Py_DECREF(show_fxn);
<a name='L424'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(res);
<a name='L425'>            <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L426'>                <b>goto</b> cleanup;
<a name='L427'>        <font color='red'>}</font>
<a name='L428'>    <font color='red'>}</font>
<a name='L429'>    <b>else</b> <i><font color='green'>/* if (rc == -1) */</font></i>
<a name='L430'>        <b>goto</b> cleanup;
<a name='L431'>
<a name='L432'> return_none:
<a name='L433'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = Py_None;
<a name='L434'>    Py_INCREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L435'>
<a name='L436'> cleanup:
<a name='L437'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L438'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(text);
<a name='L439'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(lineno_obj);
<a name='L440'>    Py_DECREF(module);
<a name='L441'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(message);
<a name='L442'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;  <i><font color='green'>/* Py_None or NULL. */</font></i>
<a name='L443'><font color='red'>}</font>
<a name='L444'>
<a name='L445'><i><font color='green'>/* filename, module, and registry are new refs, globals is borrowed */</font></i>
<a name='L446'><i><font color='green'>/* Returns 0 on error (no new refs), 1 on success */</font></i>
<a name='L447'><b>static</b> <b>int</b>
<a name='L448'><a href='../S/3087.html#L598' title='Refered from 598 in Python/_warnings.c.'>setup_context</a>(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> stack_level, PyObject **filename, <b>int</b> *lineno,
<a name='L449'>              PyObject **module, PyObject **registry)
<a name='L450'><font color='red'>{</font>
<a name='L451'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *globals;
<a name='L452'>
<a name='L453'>    <i><font color='green'>/* Setup globals and lineno. */</font></i>
<a name='L454'>    <a href='../S/526.html#L51' title='Defined at 51 in Include/frameobject.h.'>PyFrameObject</a> *f = <a href='../S/509.html#L90' title='Defined at 90 in Include/ceval.h.'>PyThreadState_GET</a>()-&gt;frame;
<a name='L455'>    <b>while</b> (--stack_level &gt; 0 &amp;&amp; f != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L456'>        f = f-&gt;f_back;
<a name='L457'>
<a name='L458'>    <b>if</b> (f == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L459'>        globals = <a href='../S/3134.html#L368' title='Defined at 368 in Python/pystate.c.'>PyThreadState_Get</a>()-&gt;interp-&gt;sysdict;
<a name='L460'>        *lineno = 1;
<a name='L461'>    <font color='red'>}</font>
<a name='L462'>    <b>else</b> <font color='red'>{</font>
<a name='L463'>        globals = f-&gt;f_globals;
<a name='L464'>        *lineno = <a href='../S/2792.html#L35' title='Defined at 35 in Objects/frameobject.c.'>PyFrame_GetLineNumber</a>(f);
<a name='L465'>    <font color='red'>}</font>
<a name='L466'>
<a name='L467'>    *module = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L468'>
<a name='L469'>    <i><font color='green'>/* Setup registry. */</font></i>
<a name='L470'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(globals != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L471'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyDict_Check(globals));
<a name='L472'>    *registry = <a href='../S/2787.html#L2168' title='Defined at 2168 in Objects/dictobject.c.'>PyDict_GetItemString</a>(globals, "__warningregistry__");
<a name='L473'>    <b>if</b> (*registry == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L474'>        <b>int</b> rc;
<a name='L475'>
<a name='L476'>        *registry = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L477'>        <b>if</b> (*registry == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L478'>            <b>return</b> 0;
<a name='L479'>
<a name='L480'>         rc = <a href='../S/2787.html#L2180' title='Defined at 2180 in Objects/dictobject.c.'>PyDict_SetItemString</a>(globals, "__warningregistry__", *registry);
<a name='L481'>         <b>if</b> (rc &lt; 0)
<a name='L482'>            <b>goto</b> handle_error;
<a name='L483'>    <font color='red'>}</font>
<a name='L484'>    <b>else</b>
<a name='L485'>        Py_INCREF(*registry);
<a name='L486'>
<a name='L487'>    <i><font color='green'>/* Setup module. */</font></i>
<a name='L488'>    *module = <a href='../S/2787.html#L2168' title='Defined at 2168 in Objects/dictobject.c.'>PyDict_GetItemString</a>(globals, "__name__");
<a name='L489'>    <b>if</b> (*module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L490'>        *module = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("&lt;string&gt;");
<a name='L491'>        <b>if</b> (*module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L492'>            <b>goto</b> handle_error;
<a name='L493'>    <font color='red'>}</font>
<a name='L494'>    <b>else</b>
<a name='L495'>        Py_INCREF(*module);
<a name='L496'>
<a name='L497'>    <i><font color='green'>/* Setup filename. */</font></i>
<a name='L498'>    *filename = <a href='../S/2787.html#L2168' title='Defined at 2168 in Objects/dictobject.c.'>PyDict_GetItemString</a>(globals, "__file__");
<a name='L499'>    <b>if</b> (*filename != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L500'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = <a href='../D/4020.html' title='Multiple defined in 3 places.'>PyUnicode_GetSize</a>(*filename);
<a name='L501'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *unicode = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*filename);
<a name='L502'>
<a name='L503'>        <i><font color='green'>/* if filename.lower().endswith((".pyc", ".pyo")): */</font></i>
<a name='L504'>        <b>if</b> (len &gt;= 4 &amp;&amp;
<a name='L505'>            unicode[len-4] == '.' &amp;&amp;
<a name='L506'>            <a href='../S/587.html#L332' title='Defined at 332 in Include/unicodeobject.h.'>Py_UNICODE_TOLOWER</a>(unicode[len-3]) == 'p' &amp;&amp;
<a name='L507'>            <a href='../S/587.html#L332' title='Defined at 332 in Include/unicodeobject.h.'>Py_UNICODE_TOLOWER</a>(unicode[len-2]) == 'y' &amp;&amp;
<a name='L508'>            (<a href='../S/587.html#L332' title='Defined at 332 in Include/unicodeobject.h.'>Py_UNICODE_TOLOWER</a>(unicode[len-1]) == 'c' ||
<a name='L509'>                <a href='../S/587.html#L332' title='Defined at 332 in Include/unicodeobject.h.'>Py_UNICODE_TOLOWER</a>(unicode[len-1]) == 'o'))
<a name='L510'>        <font color='red'>{</font>
<a name='L511'>            *filename = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(unicode, len-1);
<a name='L512'>            <b>if</b> (*filename == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L513'>                <b>goto</b> handle_error;
<a name='L514'>        <font color='red'>}</font>
<a name='L515'>        <b>else</b>
<a name='L516'>            Py_INCREF(*filename);
<a name='L517'>    <font color='red'>}</font>
<a name='L518'>    <b>else</b> <font color='red'>{</font>
<a name='L519'>        <b>const</b> <b>char</b> *module_str = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(*module);
<a name='L520'>        <b>if</b> (module_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L521'>                <b>goto</b> handle_error;
<a name='L522'>        <b>if</b> (strcmp(module_str, "__main__") == 0) <font color='red'>{</font>
<a name='L523'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *argv = <a href='../S/3144.html#L44' title='Defined at 44 in Python/sysmodule.c.'>PySys_GetObject</a>("argv");
<a name='L524'>            <b>if</b> (argv != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/2796.html#L166' title='Defined at 166 in Objects/listobject.c.'>PyList_Size</a>(argv) &gt; 0) <font color='red'>{</font>
<a name='L525'>                <b>int</b> is_true;
<a name='L526'>                *filename = <a href='../S/2796.html#L179' title='Defined at 179 in Objects/listobject.c.'>PyList_GetItem</a>(argv, 0);
<a name='L527'>                Py_INCREF(*filename);
<a name='L528'>                <i><font color='green'>/* If sys.argv[0] is false, then use '__main__'. */</font></i>
<a name='L529'>                is_true = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(*filename);
<a name='L530'>                <b>if</b> (is_true &lt; 0) <font color='red'>{</font>
<a name='L531'>                    Py_DECREF(*filename);
<a name='L532'>                    <b>goto</b> handle_error;
<a name='L533'>                <font color='red'>}</font>
<a name='L534'>                <b>else</b> <b>if</b> (!is_true) <font color='red'>{</font>
<a name='L535'>                    Py_DECREF(*filename);
<a name='L536'>                    *filename = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("__main__");
<a name='L537'>                    <b>if</b> (*filename == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L538'>                        <b>goto</b> handle_error;
<a name='L539'>                <font color='red'>}</font>
<a name='L540'>            <font color='red'>}</font>
<a name='L541'>            <b>else</b> <font color='red'>{</font>
<a name='L542'>                <i><font color='green'>/* embedded interpreters don't have sys.argv, see bug #839151 */</font></i>
<a name='L543'>                *filename = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("__main__");
<a name='L544'>                    <b>if</b> (*filename == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L545'>                        <b>goto</b> handle_error;
<a name='L546'>            <font color='red'>}</font>
<a name='L547'>        <font color='red'>}</font>
<a name='L548'>        <b>if</b> (*filename == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L549'>            *filename = *module;
<a name='L550'>            Py_INCREF(*filename);
<a name='L551'>        <font color='red'>}</font>
<a name='L552'>    <font color='red'>}</font>
<a name='L553'>
<a name='L554'>    <b>return</b> 1;
<a name='L555'>
<a name='L556'> handle_error:
<a name='L557'>    <i><font color='green'>/* filename not XDECREF'ed here as there is no way to jump here with a</font></i>
<a name='L558'><i><font color='green'>       dangling reference. */</font></i>
<a name='L559'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(*registry);
<a name='L560'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(*module);
<a name='L561'>    <b>return</b> 0;
<a name='L562'><font color='red'>}</font>
<a name='L563'>
<a name='L564'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L565'><a href='../S/3087.html#L620' title='Refered from 620 in Python/_warnings.c.'>get_category</a>(PyObject *message, PyObject *category)
<a name='L566'><font color='red'>{</font>
<a name='L567'>    <b>int</b> rc;
<a name='L568'>
<a name='L569'>    <i><font color='green'>/* Get category. */</font></i>
<a name='L570'>    rc = <a href='../S/2775.html#L2539' title='Defined at 2539 in Objects/abstract.c.'>PyObject_IsInstance</a>(message, PyExc_Warning);
<a name='L571'>    <b>if</b> (rc == -1)
<a name='L572'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L573'>
<a name='L574'>    <b>if</b> (rc == 1)
<a name='L575'>        category = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)message-&gt;ob_type;
<a name='L576'>    <b>else</b> <b>if</b> (category == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L577'>        category = PyExc_UserWarning;
<a name='L578'>
<a name='L579'>    <i><font color='green'>/* Validate category. */</font></i>
<a name='L580'>    rc = <a href='../S/2775.html#L2608' title='Defined at 2608 in Objects/abstract.c.'>PyObject_IsSubclass</a>(category, PyExc_Warning);
<a name='L581'>    <b>if</b> (rc == -1)
<a name='L582'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L583'>    <b>if</b> (rc == 0) <font color='red'>{</font>
<a name='L584'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L585'>                        "category is not a subclass of Warning");
<a name='L586'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L587'>    <font color='red'>}</font>
<a name='L588'>
<a name='L589'>    <b>return</b> category;
<a name='L590'><font color='red'>}</font>
<a name='L591'>
<a name='L592'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L593'><a href='../R/7453.html' title='Multiple refered from 2 places.'>do_warn</a>(PyObject *message, PyObject *category, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> stack_level)
<a name='L594'><font color='red'>{</font>
<a name='L595'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *filename, *module, *registry, *res;
<a name='L596'>    <b>int</b> lineno;
<a name='L597'>
<a name='L598'>    <b>if</b> (!<a href='../S/3087.html#L448' title='Defined at 448 in Python/_warnings.c.'>setup_context</a>(stack_level, &amp;filename, &amp;lineno, &amp;module, &amp;registry))
<a name='L599'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L600'>
<a name='L601'>    res = <a href='../S/3087.html#L291' title='Defined at 291 in Python/_warnings.c.'>warn_explicit</a>(category, message, filename, lineno, module, registry,
<a name='L602'>                        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L603'>    Py_DECREF(filename);
<a name='L604'>    Py_DECREF(registry);
<a name='L605'>    Py_DECREF(module);
<a name='L606'>    <b>return</b> res;
<a name='L607'><font color='red'>}</font>
<a name='L608'>
<a name='L609'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L610'><a href='../S/3087.html#L822' title='Refered from 822 in Python/_warnings.c.'>warnings_warn</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L611'><font color='red'>{</font>
<a name='L612'>    <b>static</b> <b>char</b> *kw_list[] = <font color='red'>{</font> "message", "category", "stacklevel", 0 <font color='red'>}</font>;
<a name='L613'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *message, *category = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L614'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> stack_level = 1;
<a name='L615'>
<a name='L616'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|On:warn", kw_list,
<a name='L617'>                                     &amp;message, &amp;category, &amp;stack_level))
<a name='L618'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L619'>
<a name='L620'>    category = <a href='../S/3087.html#L565' title='Defined at 565 in Python/_warnings.c.'>get_category</a>(message, category);
<a name='L621'>    <b>if</b> (category == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L622'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L623'>    <b>return</b> <a href='../S/3087.html#L593' title='Defined at 593 in Python/_warnings.c.'>do_warn</a>(message, category, stack_level);
<a name='L624'><font color='red'>}</font>
<a name='L625'>
<a name='L626'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L627'><a href='../S/3087.html#L824' title='Refered from 824 in Python/_warnings.c.'>warnings_warn_explicit</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L628'><font color='red'>{</font>
<a name='L629'>    <b>static</b> <b>char</b> *kwd_list[] = <font color='red'>{</font>"message", "category", "filename", "lineno",
<a name='L630'>                                "module", "registry", "module_globals", 0<font color='red'>}</font>;
<a name='L631'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *message;
<a name='L632'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *category;
<a name='L633'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *filename;
<a name='L634'>    <b>int</b> lineno;
<a name='L635'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L636'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *registry = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L637'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_globals = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L638'>
<a name='L639'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "OOOi|OOO:warn_explicit",
<a name='L640'>                kwd_list, &amp;message, &amp;category, &amp;filename, &amp;lineno, &amp;module,
<a name='L641'>                &amp;registry, &amp;module_globals))
<a name='L642'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L643'>
<a name='L644'>    <b>if</b> (module_globals) <font color='red'>{</font>
<a name='L645'>        <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *get_source_name = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L646'>        <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *splitlines_name = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L647'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *loader;
<a name='L648'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module_name;
<a name='L649'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *source;
<a name='L650'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *source_list;
<a name='L651'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *source_line;
<a name='L652'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *returned;
<a name='L653'>
<a name='L654'>        <b>if</b> (get_source_name == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L655'>            get_source_name = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("get_source");
<a name='L656'>            <b>if</b> (!get_source_name)
<a name='L657'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L658'>        <font color='red'>}</font>
<a name='L659'>        <b>if</b> (splitlines_name == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L660'>            splitlines_name = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("splitlines");
<a name='L661'>            <b>if</b> (!splitlines_name)
<a name='L662'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L663'>        <font color='red'>}</font>
<a name='L664'>
<a name='L665'>        <i><font color='green'>/* Check/get the requisite pieces needed for the loader. */</font></i>
<a name='L666'>        loader = <a href='../S/2787.html#L2168' title='Defined at 2168 in Objects/dictobject.c.'>PyDict_GetItemString</a>(module_globals, "__loader__");
<a name='L667'>        module_name = <a href='../S/2787.html#L2168' title='Defined at 2168 in Objects/dictobject.c.'>PyDict_GetItemString</a>(module_globals, "__name__");
<a name='L668'>
<a name='L669'>        <b>if</b> (loader == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || module_name == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L670'>            <b>goto</b> standard_call;
<a name='L671'>
<a name='L672'>        <i><font color='green'>/* Make sure the loader implements the optional get_source() method. */</font></i>
<a name='L673'>        <b>if</b> (!<a href='../S/2803.html#L794' title='Defined at 794 in Objects/object.c.'>PyObject_HasAttrString</a>(loader, "get_source"))
<a name='L674'>                <b>goto</b> standard_call;
<a name='L675'>        <i><font color='green'>/* Call get_source() to get the source code. */</font></i>
<a name='L676'>        source = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(loader, get_source_name,
<a name='L677'>                                                module_name, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L678'>        <b>if</b> (!source)
<a name='L679'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L680'>        <b>else</b> <b>if</b> (source == Py_None) <font color='red'>{</font>
<a name='L681'>            Py_DECREF(Py_None);
<a name='L682'>            <b>goto</b> standard_call;
<a name='L683'>        <font color='red'>}</font>
<a name='L684'>
<a name='L685'>        <i><font color='green'>/* Split the source into lines. */</font></i>
<a name='L686'>        source_list = <a href='../S/2775.html#L2330' title='Defined at 2330 in Objects/abstract.c.'>PyObject_CallMethodObjArgs</a>(source, splitlines_name,
<a name='L687'>                                                    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L688'>        Py_DECREF(source);
<a name='L689'>        <b>if</b> (!source_list)
<a name='L690'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L691'>
<a name='L692'>        <i><font color='green'>/* Get the source line. */</font></i>
<a name='L693'>        source_line = <a href='../S/2796.html#L179' title='Defined at 179 in Objects/listobject.c.'>PyList_GetItem</a>(source_list, lineno-1);
<a name='L694'>        <b>if</b> (!source_line) <font color='red'>{</font>
<a name='L695'>            Py_DECREF(source_list);
<a name='L696'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L697'>        <font color='red'>}</font>
<a name='L698'>
<a name='L699'>        <i><font color='green'>/* Handle the warning. */</font></i>
<a name='L700'>        returned = <a href='../S/3087.html#L291' title='Defined at 291 in Python/_warnings.c.'>warn_explicit</a>(category, message, filename, lineno, module,
<a name='L701'>                            registry, source_line);
<a name='L702'>        Py_DECREF(source_list);
<a name='L703'>        <b>return</b> returned;
<a name='L704'>    <font color='red'>}</font>
<a name='L705'>
<a name='L706'> standard_call:
<a name='L707'>    <b>return</b> <a href='../S/3087.html#L291' title='Defined at 291 in Python/_warnings.c.'>warn_explicit</a>(category, message, filename, lineno, module,
<a name='L708'>                                registry, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L709'><font color='red'>}</font>
<a name='L710'>
<a name='L711'>
<a name='L712'><i><font color='green'>/* Function to issue a warning message; may raise an exception. */</font></i>
<a name='L713'>
<a name='L714'><b>static</b> <b>int</b>
<a name='L715'><a href='../R/11384.html' title='Multiple refered from 2 places.'>warn_unicode</a>(PyObject *category, PyObject *message,
<a name='L716'>             <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> stack_level)
<a name='L717'><font color='red'>{</font>
<a name='L718'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L719'>
<a name='L720'>    <b>if</b> (category == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L721'>        category = PyExc_RuntimeWarning;
<a name='L722'>
<a name='L723'>    res = <a href='../S/3087.html#L593' title='Defined at 593 in Python/_warnings.c.'>do_warn</a>(message, category, stack_level);
<a name='L724'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L725'>        <b>return</b> -1;
<a name='L726'>    Py_DECREF(res);
<a name='L727'>
<a name='L728'>    <b>return</b> 0;
<a name='L729'><font color='red'>}</font>
<a name='L730'>
<a name='L731'><b>int</b>
<a name='L732'><a href='../R/2900.html' title='Multiple refered from 7 places.'>PyErr_WarnFormat</a>(PyObject *category, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> stack_level,
<a name='L733'>                 <b>const</b> <b>char</b> *format, ...)
<a name='L734'><font color='red'>{</font>
<a name='L735'>    <b>int</b> ret;
<a name='L736'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *message;
<a name='L737'>    va_list vargs;
<a name='L738'>
<a name='L739'><font color='darkred'>#ifdef</font> <a href='../D/1566.html' title='Multiple defined in 3 places.'>HAVE_STDARG_PROTOTYPES</a>
<a name='L740'>    va_start(vargs, format);
<a name='L741'><font color='darkred'>#else</font>
<a name='L742'>    va_start(vargs);
<a name='L743'><font color='darkred'>#endif</font>
<a name='L744'>    message = <a href='../D/4009.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormatV</a>(format, vargs);
<a name='L745'>    <b>if</b> (message != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L746'>        ret = <a href='../S/3087.html#L715' title='Defined at 715 in Python/_warnings.c.'>warn_unicode</a>(category, message, stack_level);
<a name='L747'>        Py_DECREF(message);
<a name='L748'>    <font color='red'>}</font>
<a name='L749'>    <b>else</b>
<a name='L750'>        ret = -1;
<a name='L751'>    va_end(vargs);
<a name='L752'>    <b>return</b> ret;
<a name='L753'><font color='red'>}</font>
<a name='L754'>
<a name='L755'><b>int</b>
<a name='L756'><a href='../R/2898.html' title='Multiple refered from 18 places.'>PyErr_WarnEx</a>(PyObject *category, <b>const</b> <b>char</b> *text, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> stack_level)
<a name='L757'><font color='red'>{</font>
<a name='L758'>    <b>int</b> ret;
<a name='L759'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *message = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(text);
<a name='L760'>    <b>if</b> (message == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L761'>        <b>return</b> -1;
<a name='L762'>    ret = <a href='../S/3087.html#L715' title='Defined at 715 in Python/_warnings.c.'>warn_unicode</a>(category, message, stack_level);
<a name='L763'>    Py_DECREF(message);
<a name='L764'>    <b>return</b> ret;
<a name='L765'><font color='red'>}</font>
<a name='L766'>
<a name='L767'><i><font color='green'>/* PyErr_Warn is only for backwards compatability and will be removed.</font></i>
<a name='L768'><i><font color='green'>   Use PyErr_WarnEx instead. */</font></i>
<a name='L769'>
<a name='L770'><font color='darkred'>#undef</font> PyErr_Warn
<a name='L771'>
<a name='L772'><a href='../R/2475.html' title='Multiple refered from 87 places.'>PyAPI_FUNC</a>(<b>int</b>)
<a name='L773'>PyErr_Warn(PyObject *category, <b>char</b> *text)
<a name='L774'><font color='red'>{</font>
<a name='L775'>    <b>return</b> <a href='../S/3087.html#L756' title='Defined at 756 in Python/_warnings.c.'>PyErr_WarnEx</a>(category, text, 1);
<a name='L776'><font color='red'>}</font>
<a name='L777'>
<a name='L778'><i><font color='green'>/* Warning with explicit origin */</font></i>
<a name='L779'><b>int</b>
<a name='L780'><a href='../R/2899.html' title='Multiple refered from 2 places.'>PyErr_WarnExplicit</a>(PyObject *category, <b>const</b> <b>char</b> *text,
<a name='L781'>                   <b>const</b> <b>char</b> *filename_str, <b>int</b> lineno,
<a name='L782'>                   <b>const</b> <b>char</b> *module_str, PyObject *registry)
<a name='L783'><font color='red'>{</font>
<a name='L784'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L785'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *message = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(text);
<a name='L786'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *filename = <a href='../D/3975.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeFSDefault</a>(filename_str);
<a name='L787'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *module = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L788'>    <b>int</b> ret = -1;
<a name='L789'>
<a name='L790'>    <b>if</b> (message == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || filename == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L791'>        <b>goto</b> exit;
<a name='L792'>    <b>if</b> (module_str != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L793'>        module = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(module_str);
<a name='L794'>            <b>if</b> (module == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L795'>                <b>goto</b> exit;
<a name='L796'>    <font color='red'>}</font>
<a name='L797'>
<a name='L798'>    <b>if</b> (category == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L799'>        category = PyExc_RuntimeWarning;
<a name='L800'>    res = <a href='../S/3087.html#L291' title='Defined at 291 in Python/_warnings.c.'>warn_explicit</a>(category, message, filename, lineno, module, registry,
<a name='L801'>                        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L802'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L803'>        <b>goto</b> exit;
<a name='L804'>    Py_DECREF(res);
<a name='L805'>    ret = 0;
<a name='L806'>
<a name='L807'> exit:
<a name='L808'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(message);
<a name='L809'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(module);
<a name='L810'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(filename);
<a name='L811'>    <b>return</b> ret;
<a name='L812'><font color='red'>}</font>
<a name='L813'>
<a name='L814'>
<a name='L815'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(warn_doc,
<a name='L816'>"Issue a warning, or maybe ignore it or raise an exception.");
<a name='L817'>
<a name='L818'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(warn_explicit_doc,
<a name='L819'>"Low-level inferface to warnings functionality.");
<a name='L820'>
<a name='L821'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> warnings_functions[] = <font color='red'>{</font>
<a name='L822'>    <font color='red'>{</font>"warn", (PyCFunction)<a href='../S/3087.html#L610' title='Defined at 610 in Python/_warnings.c.'>warnings_warn</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS,
<a name='L823'>        warn_doc<font color='red'>}</font>,
<a name='L824'>    <font color='red'>{</font>"warn_explicit", (PyCFunction)<a href='../S/3087.html#L627' title='Defined at 627 in Python/_warnings.c.'>warnings_warn_explicit</a>,
<a name='L825'>        <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS, warn_explicit_doc<font color='red'>}</font>,
<a name='L826'>    <i><font color='green'>/* XXX(brett.cannon): add showwarning? */</font></i>
<a name='L827'>    <i><font color='green'>/* XXX(brett.cannon): Reasonable to add formatwarning? */</font></i>
<a name='L828'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>                <i><font color='green'>/* sentinel */</font></i>
<a name='L829'><font color='red'>}</font>;
<a name='L830'>
<a name='L831'>
<a name='L832'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L833'><a href='../R/7043.html' title='Multiple refered from 5 places.'>create_filter</a>(PyObject *category, <b>const</b> <b>char</b> *action)
<a name='L834'><font color='red'>{</font>
<a name='L835'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ignore_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L836'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *error_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L837'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *default_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L838'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *always_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L839'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *action_obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L840'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *lineno, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L841'>
<a name='L842'>    <b>if</b> (!strcmp(action, "ignore")) <font color='red'>{</font>
<a name='L843'>        <b>if</b> (ignore_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L844'>            ignore_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("ignore");
<a name='L845'>            <b>if</b> (ignore_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L846'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L847'>        <font color='red'>}</font>
<a name='L848'>        action_obj = ignore_str;
<a name='L849'>    <font color='red'>}</font>
<a name='L850'>    <b>else</b> <b>if</b> (!strcmp(action, "error")) <font color='red'>{</font>
<a name='L851'>        <b>if</b> (error_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L852'>            error_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("error");
<a name='L853'>            <b>if</b> (error_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L854'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L855'>        <font color='red'>}</font>
<a name='L856'>        action_obj = error_str;
<a name='L857'>    <font color='red'>}</font>
<a name='L858'>    <b>else</b> <b>if</b> (!strcmp(action, "default")) <font color='red'>{</font>
<a name='L859'>        <b>if</b> (default_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L860'>            default_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("default");
<a name='L861'>            <b>if</b> (default_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L862'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L863'>        <font color='red'>}</font>
<a name='L864'>        action_obj = default_str;
<a name='L865'>    <font color='red'>}</font>
<a name='L866'>    <b>else</b> <b>if</b> (!strcmp(action, "always")) <font color='red'>{</font>
<a name='L867'>        <b>if</b> (always_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L868'>            always_str = <a href='../S/2828.html#L10060' title='Defined at 10060 in Objects/unicodeobject.c.'>PyUnicode_InternFromString</a>("always");
<a name='L869'>            <b>if</b> (always_str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L870'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L871'>        <font color='red'>}</font>
<a name='L872'>        action_obj = always_str;
<a name='L873'>    <font color='red'>}</font>
<a name='L874'>    <b>else</b> <font color='red'>{</font>
<a name='L875'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("unknown action");
<a name='L876'>    <font color='red'>}</font>
<a name='L877'>
<a name='L878'>    <i><font color='green'>/* This assumes the line number is zero for now. */</font></i>
<a name='L879'>    lineno = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0);
<a name='L880'>    <b>if</b> (lineno == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L881'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L882'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(5, action_obj, Py_None, category, Py_None, lineno);
<a name='L883'>    Py_DECREF(lineno);
<a name='L884'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L885'><font color='red'>}</font>
<a name='L886'>
<a name='L887'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L888'><a href='../S/3087.html#L953' title='Refered from 953 in Python/_warnings.c.'>init_filters</a>(<b>void</b>)
<a name='L889'><font color='red'>{</font>
<a name='L890'>    <i><font color='green'>/* Don't silence DeprecationWarning if -3 was used. */</font></i>
<a name='L891'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *filters = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(5);
<a name='L892'>    <b>unsigned</b> <b>int</b> pos = 0;  <i><font color='green'>/* Post-incremented in each use. */</font></i>
<a name='L893'>    <b>unsigned</b> <b>int</b> x;
<a name='L894'>    <b>const</b> <b>char</b> *bytes_action, *resource_action;
<a name='L895'>
<a name='L896'>    <b>if</b> (filters == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L897'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L898'>
<a name='L899'>    PyList_SET_ITEM(filters, pos++,
<a name='L900'>                    <a href='../S/3087.html#L833' title='Defined at 833 in Python/_warnings.c.'>create_filter</a>(PyExc_DeprecationWarning, "ignore"));
<a name='L901'>    PyList_SET_ITEM(filters, pos++,
<a name='L902'>                    <a href='../S/3087.html#L833' title='Defined at 833 in Python/_warnings.c.'>create_filter</a>(PyExc_PendingDeprecationWarning, "ignore"));
<a name='L903'>    PyList_SET_ITEM(filters, pos++,
<a name='L904'>                    <a href='../S/3087.html#L833' title='Defined at 833 in Python/_warnings.c.'>create_filter</a>(PyExc_ImportWarning, "ignore"));
<a name='L905'>    <b>if</b> (Py_BytesWarningFlag &gt; 1)
<a name='L906'>        bytes_action = "error";
<a name='L907'>    <b>else</b> <b>if</b> (Py_BytesWarningFlag)
<a name='L908'>        bytes_action = "default";
<a name='L909'>    <b>else</b>
<a name='L910'>        bytes_action = "ignore";
<a name='L911'>    PyList_SET_ITEM(filters, pos++, <a href='../S/3087.html#L833' title='Defined at 833 in Python/_warnings.c.'>create_filter</a>(PyExc_BytesWarning,
<a name='L912'>                    bytes_action));
<a name='L913'>    <i><font color='green'>/* resource usage warnings are enabled by default in pydebug mode */</font></i>
<a name='L914'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L366' title='Defined at 366 in PC/pyconfig.h.'>Py_DEBUG</a>
<a name='L915'>    resource_action = "always";
<a name='L916'><font color='darkred'>#else</font>
<a name='L917'>    resource_action = "ignore";
<a name='L918'><font color='darkred'>#endif</font>
<a name='L919'>    PyList_SET_ITEM(filters, pos++, <a href='../S/3087.html#L833' title='Defined at 833 in Python/_warnings.c.'>create_filter</a>(PyExc_ResourceWarning,
<a name='L920'>                    resource_action));
<a name='L921'>    <b>for</b> (x = 0; x &lt; pos; x += 1) <font color='red'>{</font>
<a name='L922'>        <b>if</b> (PyList_GET_ITEM(filters, x) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L923'>            Py_DECREF(filters);
<a name='L924'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L925'>        <font color='red'>}</font>
<a name='L926'>    <font color='red'>}</font>
<a name='L927'>
<a name='L928'>    <b>return</b> filters;
<a name='L929'><font color='red'>}</font>
<a name='L930'>
<a name='L931'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> warningsmodule = <font color='red'>{</font>
<a name='L932'>        <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L933'>        <a href='../D/2163.html' title='Multiple defined in 2 places.'>MODULE_NAME</a>,
<a name='L934'>        warnings__doc__,
<a name='L935'>        0,
<a name='L936'>        warnings_functions,
<a name='L937'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L938'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L939'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L940'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L941'><font color='red'>}</font>;
<a name='L942'>
<a name='L943'>
<a name='L944'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L945'><a href='../R/5536.html' title='Multiple refered from 3 places.'>_PyWarnings_Init</a>(<b>void</b>)
<a name='L946'><font color='red'>{</font>
<a name='L947'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *m;
<a name='L948'>
<a name='L949'>    m = PyModule_Create(&amp;warningsmodule);
<a name='L950'>    <b>if</b> (m == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L951'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L952'>
<a name='L953'>    _filters = <a href='../S/3087.html#L888' title='Defined at 888 in Python/_warnings.c.'>init_filters</a>();
<a name='L954'>    <b>if</b> (_filters == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L955'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L956'>    Py_INCREF(_filters);
<a name='L957'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "filters", _filters) &lt; 0)
<a name='L958'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L959'>
<a name='L960'>    _once_registry = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L961'>    <b>if</b> (_once_registry == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L962'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L963'>    Py_INCREF(_once_registry);
<a name='L964'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "_onceregistry", _once_registry) &lt; 0)
<a name='L965'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L966'>
<a name='L967'>    _default_action = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("default");
<a name='L968'>    <b>if</b> (_default_action == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L969'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L970'>    <b>if</b> (<a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "_defaultaction", _default_action) &lt; 0)
<a name='L971'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L972'>    <b>return</b> m;
<a name='L973'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L18'>[^]</a><a href='#L945'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
