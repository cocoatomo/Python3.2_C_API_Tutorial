<html>
<head>
<title>Modules/_struct.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/_struct.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L95'>[^]</a><a href='#L1976'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L95' title='Defined at 95.'>get_pylong</a>
<li><a href='#L122' title='Defined at 122.'>get_long</a>
<li><a href='#L146' title='Defined at 146.'>get_ulong</a>
<li><a href='#L171' title='Defined at 171.'>get_longlong</a>
<li><a href='#L194' title='Defined at 194.'>get_ulonglong</a>
<li><a href='#L223' title='Defined at 223.'>unpack_float</a>
<li><a href='#L235' title='Defined at 235.'>unpack_double</a>
<li><a href='#L248' title='Defined at 248.'>_range_error</a>
<li><a href='#L299' title='Defined at 299.'>nu_char</a>
<li><a href='#L305' title='Defined at 305.'>nu_byte</a>
<li><a href='#L311' title='Defined at 311.'>nu_ubyte</a>
<li><a href='#L317' title='Defined at 317.'>nu_short</a>
<li><a href='#L325' title='Defined at 325.'>nu_ushort</a>
<li><a href='#L333' title='Defined at 333.'>nu_int</a>
<li><a href='#L341' title='Defined at 341.'>nu_uint</a>
<li><a href='#L355' title='Defined at 355.'>nu_long</a>
<li><a href='#L363' title='Defined at 363.'>nu_ulong</a>
<li><a href='#L378' title='Defined at 378.'>nu_longlong</a>
<li><a href='#L388' title='Defined at 388.'>nu_ulonglong</a>
<li><a href='#L400' title='Defined at 400.'>nu_bool</a>
<li><a href='#L409' title='Defined at 409.'>nu_float</a>
<li><a href='#L417' title='Defined at 417.'>nu_double</a>
<li><a href='#L425' title='Defined at 425.'>nu_void_p</a>
<li><a href='#L433' title='Defined at 433.'>np_byte</a>
<li><a href='#L448' title='Defined at 448.'>np_ubyte</a>
<li><a href='#L463' title='Defined at 463.'>np_char</a>
<li><a href='#L475' title='Defined at 475.'>np_short</a>
<li><a href='#L493' title='Defined at 493.'>np_ushort</a>
<li><a href='#L510' title='Defined at 510.'>np_int</a>
<li><a href='#L526' title='Defined at 526.'>np_uint</a>
<li><a href='#L542' title='Defined at 542.'>np_long</a>
<li><a href='#L552' title='Defined at 552.'>np_ulong</a>
<li><a href='#L564' title='Defined at 564.'>np_longlong</a>
<li><a href='#L574' title='Defined at 574.'>np_ulonglong</a>
<li><a href='#L586' title='Defined at 586.'>np_bool</a>
<li><a href='#L599' title='Defined at 599.'>np_float</a>
<li><a href='#L612' title='Defined at 612.'>np_double</a>
<li><a href='#L625' title='Defined at 625.'>np_void_p</a>
<li><a href='#L668' title='Defined at 668.'>bu_int</a>
<li><a href='#L683' title='Defined at 683.'>bu_uint</a>
<li><a href='#L697' title='Defined at 697.'>bu_longlong</a>
<li><a href='#L721' title='Defined at 721.'>bu_ulonglong</a>
<li><a href='#L742' title='Defined at 742.'>bu_float</a>
<li><a href='#L748' title='Defined at 748.'>bu_double</a>
<li><a href='#L754' title='Defined at 754.'>bu_bool</a>
<li><a href='#L762' title='Defined at 762.'>bp_int</a>
<li><a href='#L785' title='Defined at 785.'>bp_uint</a>
<li><a href='#L806' title='Defined at 806.'>bp_longlong</a>
<li><a href='#L822' title='Defined at 822.'>bp_ulonglong</a>
<li><a href='#L838' title='Defined at 838.'>bp_float</a>
<li><a href='#L850' title='Defined at 850.'>bp_double</a>
<li><a href='#L862' title='Defined at 862.'>bp_bool</a>
<li><a href='#L896' title='Defined at 896.'>lu_int</a>
<li><a href='#L911' title='Defined at 911.'>lu_uint</a>
<li><a href='#L925' title='Defined at 925.'>lu_longlong</a>
<li><a href='#L949' title='Defined at 949.'>lu_ulonglong</a>
<li><a href='#L970' title='Defined at 970.'>lu_float</a>
<li><a href='#L976' title='Defined at 976.'>lu_double</a>
<li><a href='#L982' title='Defined at 982.'>lp_int</a>
<li><a href='#L1005' title='Defined at 1005.'>lp_uint</a>
<li><a href='#L1026' title='Defined at 1026.'>lp_longlong</a>
<li><a href='#L1042' title='Defined at 1042.'>lp_ulonglong</a>
<li><a href='#L1058' title='Defined at 1058.'>lp_float</a>
<li><a href='#L1070' title='Defined at 1070.'>lp_double</a>
<li><a href='#L1105' title='Defined at 1105.'>whichtable</a>
<li><a href='#L1134' title='Defined at 1134.'>getentry</a>
<li><a href='#L1149' title='Defined at 1149.'>align</a>
<li><a href='#L1168' title='Defined at 1168.'>prepare_s</a>
<li><a href='#L1298' title='Defined at 1298.'>s_new</a>
<li><a href='#L1317' title='Defined at 1317.'>s_init</a>
<li><a href='#L1356' title='Defined at 1356.'>s_dealloc</a>
<li><a href='#L1368' title='Defined at 1368.'>s_unpack_internal</a>
<li><a href='#L1409' title='Defined at 1409.'>s_unpack</a>
<li><a href='#L1439' title='Defined at 1439.'>s_unpack_from</a>
<li><a href='#L1484' title='Defined at 1484.'>s_pack_internal</a>
<li><a href='#L1566' title='Defined at 1566.'>s_pack</a>
<li><a href='#L1605' title='Defined at 1605.'>s_pack_into</a>
<li><a href='#L1656' title='Defined at 1656.'>s_get_format</a>
<li><a href='#L1663' title='Defined at 1663.'>s_get_size</a>
<li><a href='#L1743' title='Defined at 1743.'>cache_struct</a>
<li><a href='#L1774' title='Defined at 1774.'>clearcache</a>
<li><a href='#L1786' title='Defined at 1786.'>calcsize</a>
<li><a href='#L1804' title='Defined at 1804.'>pack</a>
<li><a href='#L1838' title='Defined at 1838.'>pack_into</a>
<li><a href='#L1871' title='Defined at 1871.'>unpack</a>
<li><a href='#L1894' title='Defined at 1894.'>unpack_from</a>
<li><a href='#L1976' title='Defined at 1976.'>PyInit__struct</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* struct module -- pack values into and (out of) bytes objects */</font></i>
<a name='L2'>
<a name='L3'><i><font color='green'>/* New version supporting byte order, alignment and size options,</font></i>
<a name='L4'><i><font color='green'>   character strings, and unsigned numbers */</font></i>
<a name='L5'>
<a name='L6'><font color='darkred'>#define</font> <a href='../R/2388.html' title='Multiple refered from 2 places.'>PY_SSIZE_T_CLEAN</a>
<a name='L7'>
<a name='L8'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L9'><font color='darkred'>#include</font> "<a href='577.html'>structmember.h</a>"
<a name='L10'><font color='darkred'>#include</font> &lt;<a href='2809.html'>ctype.h</a>&gt;
<a name='L11'>
<a name='L12'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyStructType;
<a name='L13'>
<a name='L14'><i><font color='green'>/* The translation function for each format character is table driven */</font></i>
<a name='L15'><b>typedef</b> <b>struct</b> <a href='../R/5764.html' title='Multiple refered from 3 places.'>_formatdef</a> <font color='red'>{</font>
<a name='L16'>    <b>char</b> format;
<a name='L17'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L18'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> alignment;
<a name='L19'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* (*<a href='../S/2613.html#L1871' title='Defined at 1871 in Modules/_struct.c.'>unpack</a>)(<b>const</b> <b>char</b> *,
<a name='L20'>                        <b>const</b> <b>struct</b> <a href='../S/2613.html#L15' title='Defined at 15 in Modules/_struct.c.'>_formatdef</a> *);
<a name='L21'>    <b>int</b> (*<a href='../S/2613.html#L1804' title='Defined at 1804 in Modules/_struct.c.'>pack</a>)(<b>char</b> *, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *,
<a name='L22'>                <b>const</b> <b>struct</b> <a href='../S/2613.html#L15' title='Defined at 15 in Modules/_struct.c.'>_formatdef</a> *);
<a name='L23'><font color='red'>}</font> <a href='../R/7898.html' title='Multiple refered from 11 places.'>formatdef</a>;
<a name='L24'>
<a name='L25'><b>typedef</b> <b>struct</b> _formatcode <font color='red'>{</font>
<a name='L26'>    <b>const</b> <b>struct</b> <a href='../S/2613.html#L15' title='Defined at 15 in Modules/_struct.c.'>_formatdef</a> *fmtdef;
<a name='L27'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> offset;
<a name='L28'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L29'><font color='red'>}</font> <a href='../R/7897.html' title='Multiple refered from 6 places.'>formatcode</a>;
<a name='L30'>
<a name='L31'><i><font color='green'>/* Struct object interface */</font></i>
<a name='L32'>
<a name='L33'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L34'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L35'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> s_size;
<a name='L36'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> s_len;
<a name='L37'>    <a href='../S/2613.html#L29' title='Defined at 29 in Modules/_struct.c.'>formatcode</a> *s_codes;
<a name='L38'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s_format;
<a name='L39'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *weakreflist; <i><font color='green'>/* List of weak references */</font></i>
<a name='L40'><font color='red'>}</font> <a href='../R/3405.html' title='Multiple refered from 12 places.'>PyStructObject</a>;
<a name='L41'>
<a name='L42'>
<a name='L43'><font color='darkred'>#define</font> <a href='../R/3410.html' title='Multiple refered from 5 places.'>PyStruct_Check</a>(op) PyObject_TypeCheck(op, &amp;PyStructType)
<a name='L44'><font color='darkred'>#define</font> PyStruct_CheckExact(op) (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(op) == &amp;PyStructType)
<a name='L45'>
<a name='L46'>
<a name='L47'><i><font color='green'>/* Exception */</font></i>
<a name='L48'>
<a name='L49'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *StructError;
<a name='L50'>
<a name='L51'>
<a name='L52'><i><font color='green'>/* Define various structs to figure out the alignments of types */</font></i>
<a name='L53'>
<a name='L54'>
<a name='L55'><b>typedef</b> <b>struct</b> <font color='red'>{</font> <b>char</b> c; <b>short</b> x; <font color='red'>}</font> <a href='../S/2613.html#L62' title='Refered from 62 in Modules/_struct.c.'>st_short</a>;
<a name='L56'><b>typedef</b> <b>struct</b> <font color='red'>{</font> <b>char</b> c; <b>int</b> x; <font color='red'>}</font> <a href='../S/2613.html#L63' title='Refered from 63 in Modules/_struct.c.'>st_int</a>;
<a name='L57'><b>typedef</b> <b>struct</b> <font color='red'>{</font> <b>char</b> c; <b>long</b> x; <font color='red'>}</font> <a href='../S/2613.html#L64' title='Refered from 64 in Modules/_struct.c.'>st_long</a>;
<a name='L58'><b>typedef</b> <b>struct</b> <font color='red'>{</font> <b>char</b> c; <b>float</b> x; <font color='red'>}</font> <a href='../S/2613.html#L65' title='Refered from 65 in Modules/_struct.c.'>st_float</a>;
<a name='L59'><b>typedef</b> <b>struct</b> <font color='red'>{</font> <b>char</b> c; <b>double</b> x; <font color='red'>}</font> <a href='../S/2613.html#L66' title='Refered from 66 in Modules/_struct.c.'>st_double</a>;
<a name='L60'><b>typedef</b> <b>struct</b> <font color='red'>{</font> <b>char</b> c; <b>void</b> *x; <font color='red'>}</font> <a href='../S/2613.html#L67' title='Refered from 67 in Modules/_struct.c.'>st_void_p</a>;
<a name='L61'>
<a name='L62'><font color='darkred'>#define</font> <a href='../R/4132.html' title='Multiple refered from 2 places.'>SHORT_ALIGN</a> (<b>sizeof</b>(<a href='../S/2613.html#L55' title='Defined at 55 in Modules/_struct.c.'>st_short</a>) - <b>sizeof</b>(<b>short</b>))
<a name='L63'><font color='darkred'>#define</font> <a href='../R/1557.html' title='Multiple refered from 2 places.'>INT_ALIGN</a> (<b>sizeof</b>(<a href='../S/2613.html#L56' title='Defined at 56 in Modules/_struct.c.'>st_int</a>) - <b>sizeof</b>(<b>int</b>))
<a name='L64'><font color='darkred'>#define</font> <a href='../R/1763.html' title='Multiple refered from 2 places.'>LONG_ALIGN</a> (<b>sizeof</b>(<a href='../S/2613.html#L57' title='Defined at 57 in Modules/_struct.c.'>st_long</a>) - <b>sizeof</b>(<b>long</b>))
<a name='L65'><font color='darkred'>#define</font> <a href='../R/1141.html' title='Multiple refered from 2 places.'>FLOAT_ALIGN</a> (<b>sizeof</b>(<a href='../S/2613.html#L58' title='Defined at 58 in Modules/_struct.c.'>st_float</a>) - <b>sizeof</b>(<b>float</b>))
<a name='L66'><font color='darkred'>#define</font> <a href='../R/762.html' title='Multiple refered from 2 places.'>DOUBLE_ALIGN</a> (<b>sizeof</b>(<a href='../S/2613.html#L59' title='Defined at 59 in Modules/_struct.c.'>st_double</a>) - <b>sizeof</b>(<b>double</b>))
<a name='L67'><font color='darkred'>#define</font> <a href='../R/4864.html' title='Multiple refered from 2 places.'>VOID_P_ALIGN</a> (<b>sizeof</b>(<a href='../S/2613.html#L60' title='Defined at 60 in Modules/_struct.c.'>st_void_p</a>) - <b>sizeof</b>(<b>void</b> *))
<a name='L68'>
<a name='L69'><i><font color='green'>/* We can't support q and Q in native mode unless the compiler does;</font></i>
<a name='L70'><i><font color='green'>   in std mode, they're 8 bytes on all platforms. */</font></i>
<a name='L71'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L72'><b>typedef</b> <b>struct</b> <font color='red'>{</font> <b>char</b> c; <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x; <font color='red'>}</font> <a href='../R/10087.html' title='Multiple refered from 2 places.'>s_long_long</a>;
<a name='L73'><font color='darkred'>#define</font> <a href='../R/1767.html' title='Multiple refered from 4 places.'>LONG_LONG_ALIGN</a> (<b>sizeof</b>(<a href='../D/10940.html' title='Multiple defined in 2 places.'>s_long_long</a>) - <b>sizeof</b>(<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>))
<a name='L74'><font color='darkred'>#endif</font>
<a name='L75'>
<a name='L76'><font color='darkred'>#ifdef</font> HAVE_C99_BOOL
<a name='L77'><font color='darkred'>#define</font> <a href='../R/281.html' title='Multiple refered from 7 places.'>BOOL_TYPE</a> <b>_Bool</b>
<a name='L78'><b>typedef</b> <b>struct</b> <font color='red'>{</font> <b>char</b> c; <b>_Bool</b> x; <font color='red'>}</font> <a href='../S/2613.html#L79' title='Refered from 79 in Modules/_struct.c.'>s_bool</a>;
<a name='L79'><font color='darkred'>#define</font> <a href='../S/2613.html#L658' title='Refered from 658 in Modules/_struct.c.'>BOOL_ALIGN</a> (<b>sizeof</b>(<a href='../S/2613.html#L78' title='Defined at 78 in Modules/_struct.c.'>s_bool</a>) - <b>sizeof</b>(<a href='../D/305.html' title='Multiple defined in 4 places.'>BOOL_TYPE</a>))
<a name='L80'><font color='darkred'>#else</font>
<a name='L81'><font color='darkred'>#define</font> <a href='../R/281.html' title='Multiple refered from 7 places.'>BOOL_TYPE</a> <b>char</b>
<a name='L82'><font color='darkred'>#define</font> <a href='../S/2613.html#L658' title='Refered from 658 in Modules/_struct.c.'>BOOL_ALIGN</a> 0
<a name='L83'><font color='darkred'>#endif</font>
<a name='L84'>
<a name='L85'><font color='darkred'>#define</font> <a href='../R/4385.html' title='Multiple refered from 3 places.'>STRINGIFY</a>(x)    #x
<a name='L86'>
<a name='L87'><font color='darkred'>#ifdef</font> __powerc
<a name='L88'><font color='darkred'>#pragma</font> options align=reset
<a name='L89'><font color='darkred'>#endif</font>
<a name='L90'>
<a name='L91'><i><font color='green'>/* Helper for integer format codes: converts an arbitrary Python object to a</font></i>
<a name='L92'><i><font color='green'>   PyLongObject if possible, otherwise fails.  Caller should decref. */</font></i>
<a name='L93'>
<a name='L94'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L95'><a href='../R/8089.html' title='Multiple refered from 9 places.'>get_pylong</a>(PyObject *v)
<a name='L96'><font color='red'>{</font>
<a name='L97'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L98'>    <b>if</b> (!PyLong_Check(v)) <font color='red'>{</font>
<a name='L99'>        <i><font color='green'>/* Not an integer;  try to use __index__ to convert. */</font></i>
<a name='L100'>        <b>if</b> (PyIndex_Check(v)) <font color='red'>{</font>
<a name='L101'>            v = <a href='../S/2775.html#L1196' title='Defined at 1196 in Objects/abstract.c.'>PyNumber_Index</a>(v);
<a name='L102'>            <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L103'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L104'>        <font color='red'>}</font>
<a name='L105'>        <b>else</b> <font color='red'>{</font>
<a name='L106'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L107'>                            "required argument is not an integer");
<a name='L108'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L109'>        <font color='red'>}</font>
<a name='L110'>    <font color='red'>}</font>
<a name='L111'>    <b>else</b>
<a name='L112'>        Py_INCREF(v);
<a name='L113'>
<a name='L114'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L115'>    <b>return</b> v;
<a name='L116'><font color='red'>}</font>
<a name='L117'>
<a name='L118'><i><font color='green'>/* Helper routine to get a C long and raise the appropriate error if it isn't</font></i>
<a name='L119'><i><font color='green'>   one */</font></i>
<a name='L120'>
<a name='L121'><b>static</b> <b>int</b>
<a name='L122'><a href='../R/8069.html' title='Multiple refered from 20 places.'>get_long</a>(PyObject *v, <b>long</b> *p)
<a name='L123'><font color='red'>{</font>
<a name='L124'>    <b>long</b> x;
<a name='L125'>
<a name='L126'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L127'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L128'>        <b>return</b> -1;
<a name='L129'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L130'>    x = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L131'>    Py_DECREF(v);
<a name='L132'>    <b>if</b> (x == (<b>long</b>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L133'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_OverflowError))
<a name='L134'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L135'>                            "argument out of range");
<a name='L136'>        <b>return</b> -1;
<a name='L137'>    <font color='red'>}</font>
<a name='L138'>    *p = x;
<a name='L139'>    <b>return</b> 0;
<a name='L140'><font color='red'>}</font>
<a name='L141'>
<a name='L142'>
<a name='L143'><i><font color='green'>/* Same, but handling unsigned long */</font></i>
<a name='L144'>
<a name='L145'><b>static</b> <b>int</b>
<a name='L146'><a href='../R/8102.html' title='Multiple refered from 11 places.'>get_ulong</a>(PyObject *v, <b>unsigned</b> <b>long</b> *p)
<a name='L147'><font color='red'>{</font>
<a name='L148'>    <b>unsigned</b> <b>long</b> x;
<a name='L149'>
<a name='L150'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L151'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L152'>        <b>return</b> -1;
<a name='L153'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L154'>    x = <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>(v);
<a name='L155'>    Py_DECREF(v);
<a name='L156'>    <b>if</b> (x == (<b>unsigned</b> <b>long</b>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L157'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_OverflowError))
<a name='L158'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L159'>                            "argument out of range");
<a name='L160'>        <b>return</b> -1;
<a name='L161'>    <font color='red'>}</font>
<a name='L162'>    *p = x;
<a name='L163'>    <b>return</b> 0;
<a name='L164'><font color='red'>}</font>
<a name='L165'>
<a name='L166'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L167'>
<a name='L168'><i><font color='green'>/* Same, but handling native long long. */</font></i>
<a name='L169'>
<a name='L170'><b>static</b> <b>int</b>
<a name='L171'><a href='../R/8070.html' title='Multiple refered from 3 places.'>get_longlong</a>(PyObject *v, <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> *p)
<a name='L172'><font color='red'>{</font>
<a name='L173'>    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x;
<a name='L174'>
<a name='L175'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L176'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L177'>        <b>return</b> -1;
<a name='L178'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L179'>    x = <a href='../S/2799.html#L1137' title='Defined at 1137 in Objects/longobject.c.'>PyLong_AsLongLong</a>(v);
<a name='L180'>    Py_DECREF(v);
<a name='L181'>    <b>if</b> (x == (<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L182'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_OverflowError))
<a name='L183'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L184'>                            "argument out of range");
<a name='L185'>        <b>return</b> -1;
<a name='L186'>    <font color='red'>}</font>
<a name='L187'>    *p = x;
<a name='L188'>    <b>return</b> 0;
<a name='L189'><font color='red'>}</font>
<a name='L190'>
<a name='L191'><i><font color='green'>/* Same, but handling native unsigned long long. */</font></i>
<a name='L192'>
<a name='L193'><b>static</b> <b>int</b>
<a name='L194'><a href='../R/8103.html' title='Multiple refered from 3 places.'>get_ulonglong</a>(PyObject *v, <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> *p)
<a name='L195'><font color='red'>{</font>
<a name='L196'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x;
<a name='L197'>
<a name='L198'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L199'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L200'>        <b>return</b> -1;
<a name='L201'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L202'>    x = <a href='../S/2799.html#L1189' title='Defined at 1189 in Objects/longobject.c.'>PyLong_AsUnsignedLongLong</a>(v);
<a name='L203'>    Py_DECREF(v);
<a name='L204'>    <b>if</b> (x == (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L205'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_OverflowError))
<a name='L206'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L207'>                            "argument out of range");
<a name='L208'>        <b>return</b> -1;
<a name='L209'>    <font color='red'>}</font>
<a name='L210'>    *p = x;
<a name='L211'>    <b>return</b> 0;
<a name='L212'><font color='red'>}</font>
<a name='L213'>
<a name='L214'><font color='darkred'>#endif</font>
<a name='L215'>
<a name='L216'>
<a name='L217'><font color='darkred'>#define</font> <a href='../R/3894.html' title='Multiple refered from 8 places.'>RANGE_ERROR</a>(x, f, flag, mask) <b>return</b> <a href='../S/2613.html#L248' title='Defined at 248 in Modules/_struct.c.'>_range_error</a>(f, flag)
<a name='L218'>
<a name='L219'>
<a name='L220'><i><font color='green'>/* Floating point helpers */</font></i>
<a name='L221'>
<a name='L222'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L223'><a href='../R/11174.html' title='Multiple refered from 2 places.'>unpack_float</a>(<b>const</b> <b>char</b> *p,  <i><font color='green'>/* start of 4-byte string */</font></i>
<a name='L224'>         <b>int</b> le)             <i><font color='green'>/* true for little-endian, false for big-endian */</font></i>
<a name='L225'><font color='red'>{</font>
<a name='L226'>    <b>double</b> x;
<a name='L227'>
<a name='L228'>    x = <a href='../S/2791.html#L2278' title='Defined at 2278 in Objects/floatobject.c.'>_PyFloat_Unpack4</a>((<b>unsigned</b> <b>char</b> *)p, le);
<a name='L229'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L230'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L231'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x);
<a name='L232'><font color='red'>}</font>
<a name='L233'>
<a name='L234'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L235'><a href='../R/11173.html' title='Multiple refered from 2 places.'>unpack_double</a>(<b>const</b> <b>char</b> *p,  <i><font color='green'>/* start of 8-byte string */</font></i>
<a name='L236'>          <b>int</b> le)         <i><font color='green'>/* true for little-endian, false for big-endian */</font></i>
<a name='L237'><font color='red'>{</font>
<a name='L238'>    <b>double</b> x;
<a name='L239'>
<a name='L240'>    x = <a href='../S/2791.html#L2356' title='Defined at 2356 in Objects/floatobject.c.'>_PyFloat_Unpack8</a>((<b>unsigned</b> <b>char</b> *)p, le);
<a name='L241'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L242'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L243'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x);
<a name='L244'><font color='red'>}</font>
<a name='L245'>
<a name='L246'><i><font color='green'>/* Helper to format the range error exceptions */</font></i>
<a name='L247'><b>static</b> <b>int</b>
<a name='L248'><a href='../S/2613.html#L217' title='Refered from 217 in Modules/_struct.c.'>_range_error</a>(<b>const</b> formatdef *f, <b>int</b> is_unsigned)
<a name='L249'><font color='red'>{</font>
<a name='L250'>    <i><font color='green'>/* ulargest is the largest unsigned value with f-&gt;size bytes.</font></i>
<a name='L251'><i><font color='green'>     * Note that the simpler:</font></i>
<a name='L252'><i><font color='green'>     *     ((size_t)1 &lt;&lt; (f-&gt;size * 8)) - 1</font></i>
<a name='L253'><i><font color='green'>     * doesn't work when f-&gt;size == sizeof(size_t) because C doesn't</font></i>
<a name='L254'><i><font color='green'>     * define what happens when a left shift count is &gt;= the number of</font></i>
<a name='L255'><i><font color='green'>     * bits in the integer being shifted; e.g., on some boxes it doesn't</font></i>
<a name='L256'><i><font color='green'>     * shift at all when they're equal.</font></i>
<a name='L257'><i><font color='green'>     */</font></i>
<a name='L258'>    <b>const</b> <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> ulargest = (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)-1 &gt;&gt; ((<a href='../D/4740.html' title='Multiple defined in 6 places.'>SIZEOF_SIZE_T</a> - f-&gt;size)*8);
<a name='L259'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(f-&gt;size &gt;= 1 &amp;&amp; f-&gt;size &lt;= <a href='../D/4740.html' title='Multiple defined in 6 places.'>SIZEOF_SIZE_T</a>);
<a name='L260'>    <b>if</b> (is_unsigned)
<a name='L261'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(StructError,
<a name='L262'>            "'%c' format requires 0 &lt;= number &lt;= %zu",
<a name='L263'>            f-&gt;format,
<a name='L264'>            ulargest);
<a name='L265'>    <b>else</b> <font color='red'>{</font>
<a name='L266'>        <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> largest = (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)(ulargest &gt;&gt; 1);
<a name='L267'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(StructError,
<a name='L268'>            "'%c' format requires %zd &lt;= number &lt;= %zd",
<a name='L269'>            f-&gt;format,
<a name='L270'>            ~ largest,
<a name='L271'>            largest);
<a name='L272'>    <font color='red'>}</font>
<a name='L273'>
<a name='L274'>    <b>return</b> -1;
<a name='L275'><font color='red'>}</font>
<a name='L276'>
<a name='L277'>
<a name='L278'>
<a name='L279'><i><font color='green'>/* A large number of small routines follow, with names of the form</font></i>
<a name='L280'><i><font color='green'></font></i>
<a name='L281'><i><font color='green'>   [bln][up]_TYPE</font></i>
<a name='L282'><i><font color='green'></font></i>
<a name='L283'><i><font color='green'>   [bln] distiguishes among big-endian, little-endian and native.</font></i>
<a name='L284'><i><font color='green'>   [pu] distiguishes between pack (to struct) and unpack (from struct).</font></i>
<a name='L285'><i><font color='green'>   TYPE is one of char, byte, ubyte, etc.</font></i>
<a name='L286'><i><font color='green'>*/</font></i>
<a name='L287'>
<a name='L288'><i><font color='green'>/* Native mode routines. ****************************************************/</font></i>
<a name='L289'><i><font color='green'>/* NOTE:</font></i>
<a name='L290'><i><font color='green'>   In all n[up]_&lt;type&gt; routines handling types larger than 1 byte, there is</font></i>
<a name='L291'><i><font color='green'>   *no* guarantee that the p pointer is properly aligned for each type,</font></i>
<a name='L292'><i><font color='green'>   therefore memcpy is called.  An intermediate variable is used to</font></i>
<a name='L293'><i><font color='green'>   compensate for big-endian architectures.</font></i>
<a name='L294'><i><font color='green'>   Normally both the intermediate variable and the memcpy call will be</font></i>
<a name='L295'><i><font color='green'>   skipped by C optimisation in little-endian architectures (gcc &gt;= 2.91</font></i>
<a name='L296'><i><font color='green'>   does this). */</font></i>
<a name='L297'>
<a name='L298'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L299'><a href='../R/9311.html' title='Multiple refered from 3 places.'>nu_char</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L300'><font color='red'>{</font>
<a name='L301'>    <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(p, 1);
<a name='L302'><font color='red'>}</font>
<a name='L303'>
<a name='L304'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L305'><a href='../R/9310.html' title='Multiple refered from 3 places.'>nu_byte</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L306'><font color='red'>{</font>
<a name='L307'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>) *(<b>signed</b> <b>char</b> *)p);
<a name='L308'><font color='red'>}</font>
<a name='L309'>
<a name='L310'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L311'><a href='../R/9318.html' title='Multiple refered from 3 places.'>nu_ubyte</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L312'><font color='red'>{</font>
<a name='L313'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>) *(<b>unsigned</b> <b>char</b> *)p);
<a name='L314'><font color='red'>}</font>
<a name='L315'>
<a name='L316'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L317'><a href='../S/2613.html#L648' title='Refered from 648 in Modules/_struct.c.'>nu_short</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L318'><font color='red'>{</font>
<a name='L319'>    <b>short</b> x;
<a name='L320'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L321'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)x);
<a name='L322'><font color='red'>}</font>
<a name='L323'>
<a name='L324'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L325'><a href='../S/2613.html#L649' title='Refered from 649 in Modules/_struct.c.'>nu_ushort</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L326'><font color='red'>{</font>
<a name='L327'>    <b>unsigned</b> <b>short</b> x;
<a name='L328'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L329'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)x);
<a name='L330'><font color='red'>}</font>
<a name='L331'>
<a name='L332'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L333'><a href='../S/2613.html#L650' title='Refered from 650 in Modules/_struct.c.'>nu_int</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L334'><font color='red'>{</font>
<a name='L335'>    <b>int</b> x;
<a name='L336'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L337'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)x);
<a name='L338'><font color='red'>}</font>
<a name='L339'>
<a name='L340'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L341'><a href='../S/2613.html#L651' title='Refered from 651 in Modules/_struct.c.'>nu_uint</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L342'><font color='red'>{</font>
<a name='L343'>    <b>unsigned</b> <b>int</b> x;
<a name='L344'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L345'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; <a href='../D/4733.html' title='Multiple defined in 3 places.'>SIZEOF_INT</a>)
<a name='L346'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)x);
<a name='L347'><font color='darkred'>#else</font>
<a name='L348'>    <b>if</b> (x &lt;= ((<b>unsigned</b> <b>int</b>)<a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>))
<a name='L349'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)x);
<a name='L350'>    <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>((<b>unsigned</b> <b>long</b>)x);
<a name='L351'><font color='darkred'>#endif</font>
<a name='L352'><font color='red'>}</font>
<a name='L353'>
<a name='L354'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L355'><a href='../S/2613.html#L652' title='Refered from 652 in Modules/_struct.c.'>nu_long</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L356'><font color='red'>{</font>
<a name='L357'>    <b>long</b> x;
<a name='L358'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L359'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(x);
<a name='L360'><font color='red'>}</font>
<a name='L361'>
<a name='L362'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L363'><a href='../S/2613.html#L653' title='Refered from 653 in Modules/_struct.c.'>nu_ulong</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L364'><font color='red'>{</font>
<a name='L365'>    <b>unsigned</b> <b>long</b> x;
<a name='L366'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L367'>    <b>if</b> (x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L368'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)x);
<a name='L369'>    <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(x);
<a name='L370'><font color='red'>}</font>
<a name='L371'>
<a name='L372'><i><font color='green'>/* Native mode doesn't support q or Q unless the platform C supports</font></i>
<a name='L373'><i><font color='green'>   long long (or, on Windows, __int64). */</font></i>
<a name='L374'>
<a name='L375'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L376'>
<a name='L377'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L378'><a href='../S/2613.html#L655' title='Refered from 655 in Modules/_struct.c.'>nu_longlong</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L379'><font color='red'>{</font>
<a name='L380'>    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x;
<a name='L381'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L382'>    <b>if</b> (x &gt;= <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a> &amp;&amp; x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L383'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(x, <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>, <b>long</b>));
<a name='L384'>    <b>return</b> <a href='../S/2799.html#L994' title='Defined at 994 in Objects/longobject.c.'>PyLong_FromLongLong</a>(x);
<a name='L385'><font color='red'>}</font>
<a name='L386'>
<a name='L387'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L388'><a href='../S/2613.html#L656' title='Refered from 656 in Modules/_struct.c.'>nu_ulonglong</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L389'><font color='red'>{</font>
<a name='L390'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x;
<a name='L391'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L392'>    <b>if</b> (x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L393'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(x, <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>, <b>long</b>));
<a name='L394'>    <b>return</b> <a href='../S/2799.html#L1038' title='Defined at 1038 in Objects/longobject.c.'>PyLong_FromUnsignedLongLong</a>(x);
<a name='L395'><font color='red'>}</font>
<a name='L396'>
<a name='L397'><font color='darkred'>#endif</font>
<a name='L398'>
<a name='L399'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L400'><a href='../S/2613.html#L658' title='Refered from 658 in Modules/_struct.c.'>nu_bool</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L401'><font color='red'>{</font>
<a name='L402'>    <a href='../D/305.html' title='Multiple defined in 4 places.'>BOOL_TYPE</a> x;
<a name='L403'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L404'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(x != 0);
<a name='L405'><font color='red'>}</font>
<a name='L406'>
<a name='L407'>
<a name='L408'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L409'><a href='../S/2613.html#L659' title='Refered from 659 in Modules/_struct.c.'>nu_float</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L410'><font color='red'>{</font>
<a name='L411'>    <b>float</b> x;
<a name='L412'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L413'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>((<b>double</b>)x);
<a name='L414'><font color='red'>}</font>
<a name='L415'>
<a name='L416'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L417'><a href='../S/2613.html#L660' title='Refered from 660 in Modules/_struct.c.'>nu_double</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L418'><font color='red'>{</font>
<a name='L419'>    <b>double</b> x;
<a name='L420'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L421'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x);
<a name='L422'><font color='red'>}</font>
<a name='L423'>
<a name='L424'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L425'><a href='../S/2613.html#L661' title='Refered from 661 in Modules/_struct.c.'>nu_void_p</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L426'><font color='red'>{</font>
<a name='L427'>    <b>void</b> *x;
<a name='L428'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L429'>    <b>return</b> <a href='../S/2799.html#L929' title='Defined at 929 in Objects/longobject.c.'>PyLong_FromVoidPtr</a>(x);
<a name='L430'><font color='red'>}</font>
<a name='L431'>
<a name='L432'><b>static</b> <b>int</b>
<a name='L433'><a href='../R/9288.html' title='Multiple refered from 3 places.'>np_byte</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L434'><font color='red'>{</font>
<a name='L435'>    <b>long</b> x;
<a name='L436'>    <b>if</b> (<a href='../D/8871.html' title='Multiple defined in 3 places.'>get_long</a>(v, &amp;x) &lt; 0)
<a name='L437'>        <b>return</b> -1;
<a name='L438'>    <b>if</b> (x &lt; -128 || x &gt; 127)<font color='red'>{</font>
<a name='L439'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L440'>                        "byte format requires -128 &lt;= number &lt;= 127");
<a name='L441'>        <b>return</b> -1;
<a name='L442'>    <font color='red'>}</font>
<a name='L443'>    *p = (<b>char</b>)x;
<a name='L444'>    <b>return</b> 0;
<a name='L445'><font color='red'>}</font>
<a name='L446'>
<a name='L447'><b>static</b> <b>int</b>
<a name='L448'><a href='../R/9296.html' title='Multiple refered from 3 places.'>np_ubyte</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L449'><font color='red'>{</font>
<a name='L450'>    <b>long</b> x;
<a name='L451'>    <b>if</b> (<a href='../D/8871.html' title='Multiple defined in 3 places.'>get_long</a>(v, &amp;x) &lt; 0)
<a name='L452'>        <b>return</b> -1;
<a name='L453'>    <b>if</b> (x &lt; 0 || x &gt; 255)<font color='red'>{</font>
<a name='L454'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L455'>                        "ubyte format requires 0 &lt;= number &lt;= 255");
<a name='L456'>        <b>return</b> -1;
<a name='L457'>    <font color='red'>}</font>
<a name='L458'>    *p = (<b>char</b>)x;
<a name='L459'>    <b>return</b> 0;
<a name='L460'><font color='red'>}</font>
<a name='L461'>
<a name='L462'><b>static</b> <b>int</b>
<a name='L463'><a href='../R/9289.html' title='Multiple refered from 3 places.'>np_char</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L464'><font color='red'>{</font>
<a name='L465'>    <b>if</b> (!PyBytes_Check(v) || <a href='../S/2779.html#L506' title='Defined at 506 in Objects/bytesobject.c.'>PyBytes_Size</a>(v) != 1) <font color='red'>{</font>
<a name='L466'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L467'>                        "char format requires a bytes object of length 1");
<a name='L468'>        <b>return</b> -1;
<a name='L469'>    <font color='red'>}</font>
<a name='L470'>    *p = *<a href='../S/2779.html#L517' title='Defined at 517 in Objects/bytesobject.c.'>PyBytes_AsString</a>(v);
<a name='L471'>    <b>return</b> 0;
<a name='L472'><font color='red'>}</font>
<a name='L473'>
<a name='L474'><b>static</b> <b>int</b>
<a name='L475'><a href='../S/2613.html#L648' title='Refered from 648 in Modules/_struct.c.'>np_short</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L476'><font color='red'>{</font>
<a name='L477'>    <b>long</b> x;
<a name='L478'>    <b>short</b> y;
<a name='L479'>    <b>if</b> (<a href='../D/8871.html' title='Multiple defined in 3 places.'>get_long</a>(v, &amp;x) &lt; 0)
<a name='L480'>        <b>return</b> -1;
<a name='L481'>    <b>if</b> (x &lt; SHRT_MIN || x &gt; SHRT_MAX)<font color='red'>{</font>
<a name='L482'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L483'>                        "short format requires " <a href='../S/2613.html#L85' title='Defined at 85 in Modules/_struct.c.'>STRINGIFY</a>(SHRT_MIN)
<a name='L484'>                        " &lt;= number &lt;= " <a href='../S/2613.html#L85' title='Defined at 85 in Modules/_struct.c.'>STRINGIFY</a>(SHRT_MAX));
<a name='L485'>        <b>return</b> -1;
<a name='L486'>    <font color='red'>}</font>
<a name='L487'>    y = (<b>short</b>)x;
<a name='L488'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;y, <b>sizeof</b> y);
<a name='L489'>    <b>return</b> 0;
<a name='L490'><font color='red'>}</font>
<a name='L491'>
<a name='L492'><b>static</b> <b>int</b>
<a name='L493'><a href='../S/2613.html#L649' title='Refered from 649 in Modules/_struct.c.'>np_ushort</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L494'><font color='red'>{</font>
<a name='L495'>    <b>long</b> x;
<a name='L496'>    <b>unsigned</b> <b>short</b> y;
<a name='L497'>    <b>if</b> (<a href='../D/8871.html' title='Multiple defined in 3 places.'>get_long</a>(v, &amp;x) &lt; 0)
<a name='L498'>        <b>return</b> -1;
<a name='L499'>    <b>if</b> (x &lt; 0 || x &gt; USHRT_MAX)<font color='red'>{</font>
<a name='L500'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L501'>                        "ushort format requires 0 &lt;= number &lt;= " <a href='../S/2613.html#L85' title='Defined at 85 in Modules/_struct.c.'>STRINGIFY</a>(USHRT_MAX));
<a name='L502'>        <b>return</b> -1;
<a name='L503'>    <font color='red'>}</font>
<a name='L504'>    y = (<b>unsigned</b> <b>short</b>)x;
<a name='L505'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;y, <b>sizeof</b> y);
<a name='L506'>    <b>return</b> 0;
<a name='L507'><font color='red'>}</font>
<a name='L508'>
<a name='L509'><b>static</b> <b>int</b>
<a name='L510'><a href='../S/2613.html#L650' title='Refered from 650 in Modules/_struct.c.'>np_int</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L511'><font color='red'>{</font>
<a name='L512'>    <b>long</b> x;
<a name='L513'>    <b>int</b> y;
<a name='L514'>    <b>if</b> (<a href='../D/8871.html' title='Multiple defined in 3 places.'>get_long</a>(v, &amp;x) &lt; 0)
<a name='L515'>        <b>return</b> -1;
<a name='L516'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; <a href='../D/4733.html' title='Multiple defined in 3 places.'>SIZEOF_INT</a>)
<a name='L517'>    <b>if</b> ((x &lt; ((<b>long</b>)INT_MIN)) || (x &gt; ((<b>long</b>)<a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>)))
<a name='L518'>        <a href='../S/2613.html#L217' title='Defined at 217 in Modules/_struct.c.'>RANGE_ERROR</a>(x, f, 0, -1);
<a name='L519'><font color='darkred'>#endif</font>
<a name='L520'>    y = (<b>int</b>)x;
<a name='L521'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;y, <b>sizeof</b> y);
<a name='L522'>    <b>return</b> 0;
<a name='L523'><font color='red'>}</font>
<a name='L524'>
<a name='L525'><b>static</b> <b>int</b>
<a name='L526'><a href='../S/2613.html#L651' title='Refered from 651 in Modules/_struct.c.'>np_uint</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L527'><font color='red'>{</font>
<a name='L528'>    <b>unsigned</b> <b>long</b> x;
<a name='L529'>    <b>unsigned</b> <b>int</b> y;
<a name='L530'>    <b>if</b> (<a href='../D/8904.html' title='Multiple defined in 2 places.'>get_ulong</a>(v, &amp;x) &lt; 0)
<a name='L531'>        <b>return</b> -1;
<a name='L532'>    y = (<b>unsigned</b> <b>int</b>)x;
<a name='L533'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; <a href='../D/4733.html' title='Multiple defined in 3 places.'>SIZEOF_INT</a>)
<a name='L534'>    <b>if</b> (x &gt; ((<b>unsigned</b> <b>long</b>)UINT_MAX))
<a name='L535'>        <a href='../S/2613.html#L217' title='Defined at 217 in Modules/_struct.c.'>RANGE_ERROR</a>(y, f, 1, -1);
<a name='L536'><font color='darkred'>#endif</font>
<a name='L537'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;y, <b>sizeof</b> y);
<a name='L538'>    <b>return</b> 0;
<a name='L539'><font color='red'>}</font>
<a name='L540'>
<a name='L541'><b>static</b> <b>int</b>
<a name='L542'><a href='../S/2613.html#L652' title='Refered from 652 in Modules/_struct.c.'>np_long</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L543'><font color='red'>{</font>
<a name='L544'>    <b>long</b> x;
<a name='L545'>    <b>if</b> (<a href='../D/8871.html' title='Multiple defined in 3 places.'>get_long</a>(v, &amp;x) &lt; 0)
<a name='L546'>        <b>return</b> -1;
<a name='L547'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;x, <b>sizeof</b> x);
<a name='L548'>    <b>return</b> 0;
<a name='L549'><font color='red'>}</font>
<a name='L550'>
<a name='L551'><b>static</b> <b>int</b>
<a name='L552'><a href='../S/2613.html#L653' title='Refered from 653 in Modules/_struct.c.'>np_ulong</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L553'><font color='red'>{</font>
<a name='L554'>    <b>unsigned</b> <b>long</b> x;
<a name='L555'>    <b>if</b> (<a href='../D/8904.html' title='Multiple defined in 2 places.'>get_ulong</a>(v, &amp;x) &lt; 0)
<a name='L556'>        <b>return</b> -1;
<a name='L557'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;x, <b>sizeof</b> x);
<a name='L558'>    <b>return</b> 0;
<a name='L559'><font color='red'>}</font>
<a name='L560'>
<a name='L561'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L562'>
<a name='L563'><b>static</b> <b>int</b>
<a name='L564'><a href='../S/2613.html#L655' title='Refered from 655 in Modules/_struct.c.'>np_longlong</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L565'><font color='red'>{</font>
<a name='L566'>    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x;
<a name='L567'>    <b>if</b> (<a href='../D/8872.html' title='Multiple defined in 2 places.'>get_longlong</a>(v, &amp;x) &lt; 0)
<a name='L568'>        <b>return</b> -1;
<a name='L569'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;x, <b>sizeof</b> x);
<a name='L570'>    <b>return</b> 0;
<a name='L571'><font color='red'>}</font>
<a name='L572'>
<a name='L573'><b>static</b> <b>int</b>
<a name='L574'><a href='../S/2613.html#L656' title='Refered from 656 in Modules/_struct.c.'>np_ulonglong</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L575'><font color='red'>{</font>
<a name='L576'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x;
<a name='L577'>    <b>if</b> (<a href='../D/8905.html' title='Multiple defined in 2 places.'>get_ulonglong</a>(v, &amp;x) &lt; 0)
<a name='L578'>        <b>return</b> -1;
<a name='L579'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;x, <b>sizeof</b> x);
<a name='L580'>    <b>return</b> 0;
<a name='L581'><font color='red'>}</font>
<a name='L582'><font color='darkred'>#endif</font>
<a name='L583'>
<a name='L584'>
<a name='L585'><b>static</b> <b>int</b>
<a name='L586'><a href='../S/2613.html#L658' title='Refered from 658 in Modules/_struct.c.'>np_bool</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L587'><font color='red'>{</font>
<a name='L588'>    <b>int</b> y;
<a name='L589'>    <a href='../D/305.html' title='Multiple defined in 4 places.'>BOOL_TYPE</a> x;
<a name='L590'>    y = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(v);
<a name='L591'>    <b>if</b> (y &lt; 0)
<a name='L592'>        <b>return</b> -1;
<a name='L593'>    x = y;
<a name='L594'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;x, <b>sizeof</b> x);
<a name='L595'>    <b>return</b> 0;
<a name='L596'><font color='red'>}</font>
<a name='L597'>
<a name='L598'><b>static</b> <b>int</b>
<a name='L599'><a href='../S/2613.html#L659' title='Refered from 659 in Modules/_struct.c.'>np_float</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L600'><font color='red'>{</font>
<a name='L601'>    <b>float</b> x = (<b>float</b>)<a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L602'>    <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L603'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L604'>                        "required argument is not a float");
<a name='L605'>        <b>return</b> -1;
<a name='L606'>    <font color='red'>}</font>
<a name='L607'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;x, <b>sizeof</b> x);
<a name='L608'>    <b>return</b> 0;
<a name='L609'><font color='red'>}</font>
<a name='L610'>
<a name='L611'><b>static</b> <b>int</b>
<a name='L612'><a href='../S/2613.html#L660' title='Refered from 660 in Modules/_struct.c.'>np_double</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L613'><font color='red'>{</font>
<a name='L614'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L615'>    <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L616'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L617'>                        "required argument is not a float");
<a name='L618'>        <b>return</b> -1;
<a name='L619'>    <font color='red'>}</font>
<a name='L620'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;x, <b>sizeof</b>(<b>double</b>));
<a name='L621'>    <b>return</b> 0;
<a name='L622'><font color='red'>}</font>
<a name='L623'>
<a name='L624'><b>static</b> <b>int</b>
<a name='L625'><a href='../S/2613.html#L661' title='Refered from 661 in Modules/_struct.c.'>np_void_p</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L626'><font color='red'>{</font>
<a name='L627'>    <b>void</b> *x;
<a name='L628'>
<a name='L629'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L630'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L631'>        <b>return</b> -1;
<a name='L632'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L633'>    x = <a href='../S/2799.html#L947' title='Defined at 947 in Objects/longobject.c.'>PyLong_AsVoidPtr</a>(v);
<a name='L634'>    Py_DECREF(v);
<a name='L635'>    <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L636'>        <b>return</b> -1;
<a name='L637'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, (<b>char</b> *)&amp;x, <b>sizeof</b> x);
<a name='L638'>    <b>return</b> 0;
<a name='L639'><font color='red'>}</font>
<a name='L640'>
<a name='L641'><b>static</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> native_table[] = <font color='red'>{</font>
<a name='L642'>    <font color='red'>{</font>'x',       <b>sizeof</b>(<b>char</b>),   0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L643'>    <font color='red'>{</font>'b',       <b>sizeof</b>(<b>char</b>),   0,              <a href='../S/2613.html#L305' title='Defined at 305 in Modules/_struct.c.'>nu_byte</a>,        <a href='../S/2613.html#L433' title='Defined at 433 in Modules/_struct.c.'>np_byte</a><font color='red'>}</font>,
<a name='L644'>    <font color='red'>{</font>'B',       <b>sizeof</b>(<b>char</b>),   0,              <a href='../S/2613.html#L311' title='Defined at 311 in Modules/_struct.c.'>nu_ubyte</a>,       <a href='../S/2613.html#L448' title='Defined at 448 in Modules/_struct.c.'>np_ubyte</a><font color='red'>}</font>,
<a name='L645'>    <font color='red'>{</font>'c',       <b>sizeof</b>(<b>char</b>),   0,              <a href='../S/2613.html#L299' title='Defined at 299 in Modules/_struct.c.'>nu_char</a>,        <a href='../S/2613.html#L463' title='Defined at 463 in Modules/_struct.c.'>np_char</a><font color='red'>}</font>,
<a name='L646'>    <font color='red'>{</font>'s',       <b>sizeof</b>(<b>char</b>),   0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L647'>    <font color='red'>{</font>'p',       <b>sizeof</b>(<b>char</b>),   0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L648'>    <font color='red'>{</font>'h',       <b>sizeof</b>(<b>short</b>),  <a href='../S/2613.html#L62' title='Defined at 62 in Modules/_struct.c.'>SHORT_ALIGN</a>,    <a href='../S/2613.html#L317' title='Defined at 317 in Modules/_struct.c.'>nu_short</a>,       <a href='../S/2613.html#L475' title='Defined at 475 in Modules/_struct.c.'>np_short</a><font color='red'>}</font>,
<a name='L649'>    <font color='red'>{</font>'H',       <b>sizeof</b>(<b>short</b>),  <a href='../S/2613.html#L62' title='Defined at 62 in Modules/_struct.c.'>SHORT_ALIGN</a>,    <a href='../S/2613.html#L325' title='Defined at 325 in Modules/_struct.c.'>nu_ushort</a>,      <a href='../S/2613.html#L493' title='Defined at 493 in Modules/_struct.c.'>np_ushort</a><font color='red'>}</font>,
<a name='L650'>    <font color='red'>{</font>'i',       <b>sizeof</b>(<b>int</b>),    <a href='../S/2613.html#L63' title='Defined at 63 in Modules/_struct.c.'>INT_ALIGN</a>,      <a href='../S/2613.html#L333' title='Defined at 333 in Modules/_struct.c.'>nu_int</a>,         <a href='../S/2613.html#L510' title='Defined at 510 in Modules/_struct.c.'>np_int</a><font color='red'>}</font>,
<a name='L651'>    <font color='red'>{</font>'I',       <b>sizeof</b>(<b>int</b>),    <a href='../S/2613.html#L63' title='Defined at 63 in Modules/_struct.c.'>INT_ALIGN</a>,      <a href='../S/2613.html#L341' title='Defined at 341 in Modules/_struct.c.'>nu_uint</a>,        <a href='../S/2613.html#L526' title='Defined at 526 in Modules/_struct.c.'>np_uint</a><font color='red'>}</font>,
<a name='L652'>    <font color='red'>{</font>'l',       <b>sizeof</b>(<b>long</b>),   <a href='../S/2613.html#L64' title='Defined at 64 in Modules/_struct.c.'>LONG_ALIGN</a>,     <a href='../S/2613.html#L355' title='Defined at 355 in Modules/_struct.c.'>nu_long</a>,        <a href='../S/2613.html#L542' title='Defined at 542 in Modules/_struct.c.'>np_long</a><font color='red'>}</font>,
<a name='L653'>    <font color='red'>{</font>'L',       <b>sizeof</b>(<b>long</b>),   <a href='../S/2613.html#L64' title='Defined at 64 in Modules/_struct.c.'>LONG_ALIGN</a>,     <a href='../S/2613.html#L363' title='Defined at 363 in Modules/_struct.c.'>nu_ulong</a>,       <a href='../S/2613.html#L552' title='Defined at 552 in Modules/_struct.c.'>np_ulong</a><font color='red'>}</font>,
<a name='L654'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L655'>    <font color='red'>{</font>'q',       <b>sizeof</b>(<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>), <a href='../D/1964.html' title='Multiple defined in 2 places.'>LONG_LONG_ALIGN</a>, <a href='../S/2613.html#L378' title='Defined at 378 in Modules/_struct.c.'>nu_longlong</a>, <a href='../S/2613.html#L564' title='Defined at 564 in Modules/_struct.c.'>np_longlong</a><font color='red'>}</font>,
<a name='L656'>    <font color='red'>{</font>'Q',       <b>sizeof</b>(<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>), <a href='../D/1964.html' title='Multiple defined in 2 places.'>LONG_LONG_ALIGN</a>, <a href='../S/2613.html#L388' title='Defined at 388 in Modules/_struct.c.'>nu_ulonglong</a>,<a href='../S/2613.html#L574' title='Defined at 574 in Modules/_struct.c.'>np_ulonglong</a><font color='red'>}</font>,
<a name='L657'><font color='darkred'>#endif</font>
<a name='L658'>    <font color='red'>{</font>'?',       <b>sizeof</b>(<a href='../D/305.html' title='Multiple defined in 4 places.'>BOOL_TYPE</a>),      <a href='../D/304.html' title='Multiple defined in 2 places.'>BOOL_ALIGN</a>,     <a href='../S/2613.html#L400' title='Defined at 400 in Modules/_struct.c.'>nu_bool</a>,        <a href='../S/2613.html#L586' title='Defined at 586 in Modules/_struct.c.'>np_bool</a><font color='red'>}</font>,
<a name='L659'>    <font color='red'>{</font>'f',       <b>sizeof</b>(<b>float</b>),  <a href='../D/1265.html' title='Multiple defined in 2 places.'>FLOAT_ALIGN</a>,    <a href='../S/2613.html#L409' title='Defined at 409 in Modules/_struct.c.'>nu_float</a>,       <a href='../S/2613.html#L599' title='Defined at 599 in Modules/_struct.c.'>np_float</a><font color='red'>}</font>,
<a name='L660'>    <font color='red'>{</font>'d',       <b>sizeof</b>(<b>double</b>), <a href='../D/819.html' title='Multiple defined in 2 places.'>DOUBLE_ALIGN</a>,   <a href='../S/2613.html#L417' title='Defined at 417 in Modules/_struct.c.'>nu_double</a>,      <a href='../S/2613.html#L612' title='Defined at 612 in Modules/_struct.c.'>np_double</a><font color='red'>}</font>,
<a name='L661'>    <font color='red'>{</font>'P',       <b>sizeof</b>(<b>void</b> *), <a href='../D/5492.html' title='Multiple defined in 2 places.'>VOID_P_ALIGN</a>,   <a href='../S/2613.html#L425' title='Defined at 425 in Modules/_struct.c.'>nu_void_p</a>,      <a href='../S/2613.html#L625' title='Defined at 625 in Modules/_struct.c.'>np_void_p</a><font color='red'>}</font>,
<a name='L662'>    <font color='red'>{</font>0<font color='red'>}</font>
<a name='L663'><font color='red'>}</font>;
<a name='L664'>
<a name='L665'><i><font color='green'>/* Big-endian routines. *****************************************************/</font></i>
<a name='L666'>
<a name='L667'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L668'><a href='../R/6275.html' title='Multiple refered from 3 places.'>bu_int</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L669'><font color='red'>{</font>
<a name='L670'>    <b>long</b> x = 0;
<a name='L671'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = f-&gt;size;
<a name='L672'>    <b>const</b> <b>unsigned</b> <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = (<b>const</b> <b>unsigned</b> <b>char</b> *)p;
<a name='L673'>    <b>do</b> <font color='red'>{</font>
<a name='L674'>        x = (x&lt;&lt;8) | *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>++;
<a name='L675'>    <font color='red'>}</font> <b>while</b> (--i &gt; 0);
<a name='L676'>    <i><font color='green'>/* Extend the sign bit. */</font></i>
<a name='L677'>    <b>if</b> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; f-&gt;size)
<a name='L678'>        x |= -(x &amp; (1L &lt;&lt; ((8 * f-&gt;size) - 1)));
<a name='L679'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(x);
<a name='L680'><font color='red'>}</font>
<a name='L681'>
<a name='L682'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L683'><a href='../R/6277.html' title='Multiple refered from 3 places.'>bu_uint</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L684'><font color='red'>{</font>
<a name='L685'>    <b>unsigned</b> <b>long</b> x = 0;
<a name='L686'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = f-&gt;size;
<a name='L687'>    <b>const</b> <b>unsigned</b> <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = (<b>const</b> <b>unsigned</b> <b>char</b> *)p;
<a name='L688'>    <b>do</b> <font color='red'>{</font>
<a name='L689'>        x = (x&lt;&lt;8) | *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>++;
<a name='L690'>    <font color='red'>}</font> <b>while</b> (--i &gt; 0);
<a name='L691'>    <b>if</b> (x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L692'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)x);
<a name='L693'>    <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(x);
<a name='L694'><font color='red'>}</font>
<a name='L695'>
<a name='L696'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L697'><a href='../S/2613.html#L885' title='Refered from 885 in Modules/_struct.c.'>bu_longlong</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L698'><font color='red'>{</font>
<a name='L699'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L700'>    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x = 0;
<a name='L701'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = f-&gt;size;
<a name='L702'>    <b>const</b> <b>unsigned</b> <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = (<b>const</b> <b>unsigned</b> <b>char</b> *)p;
<a name='L703'>    <b>do</b> <font color='red'>{</font>
<a name='L704'>        x = (x&lt;&lt;8) | *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>++;
<a name='L705'>    <font color='red'>}</font> <b>while</b> (--i &gt; 0);
<a name='L706'>    <i><font color='green'>/* Extend the sign bit. */</font></i>
<a name='L707'>    <b>if</b> (<a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a> &gt; f-&gt;size)
<a name='L708'>        x |= -(x &amp; ((<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)1 &lt;&lt; ((8 * f-&gt;size) - 1)));
<a name='L709'>    <b>if</b> (x &gt;= <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a> &amp;&amp; x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L710'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(x, <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>, <b>long</b>));
<a name='L711'>    <b>return</b> <a href='../S/2799.html#L994' title='Defined at 994 in Objects/longobject.c.'>PyLong_FromLongLong</a>(x);
<a name='L712'><font color='darkred'>#else</font>
<a name='L713'>    <b>return</b> <a href='../S/2799.html#L683' title='Defined at 683 in Objects/longobject.c.'>_PyLong_FromByteArray</a>((<b>const</b> <b>unsigned</b> <b>char</b> *)p,
<a name='L714'>                                  8,
<a name='L715'>                                  0, <i><font color='green'>/* little-endian */</font></i>
<a name='L716'>                      1  <i><font color='green'>/* signed */</font></i>);
<a name='L717'><font color='darkred'>#endif</font>
<a name='L718'><font color='red'>}</font>
<a name='L719'>
<a name='L720'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L721'><a href='../S/2613.html#L886' title='Refered from 886 in Modules/_struct.c.'>bu_ulonglong</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L722'><font color='red'>{</font>
<a name='L723'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L724'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x = 0;
<a name='L725'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = f-&gt;size;
<a name='L726'>    <b>const</b> <b>unsigned</b> <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = (<b>const</b> <b>unsigned</b> <b>char</b> *)p;
<a name='L727'>    <b>do</b> <font color='red'>{</font>
<a name='L728'>        x = (x&lt;&lt;8) | *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>++;
<a name='L729'>    <font color='red'>}</font> <b>while</b> (--i &gt; 0);
<a name='L730'>    <b>if</b> (x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L731'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(x, <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>, <b>long</b>));
<a name='L732'>    <b>return</b> <a href='../S/2799.html#L1038' title='Defined at 1038 in Objects/longobject.c.'>PyLong_FromUnsignedLongLong</a>(x);
<a name='L733'><font color='darkred'>#else</font>
<a name='L734'>    <b>return</b> <a href='../S/2799.html#L683' title='Defined at 683 in Objects/longobject.c.'>_PyLong_FromByteArray</a>((<b>const</b> <b>unsigned</b> <b>char</b> *)p,
<a name='L735'>                                  8,
<a name='L736'>                                  0, <i><font color='green'>/* little-endian */</font></i>
<a name='L737'>                      0  <i><font color='green'>/* signed */</font></i>);
<a name='L738'><font color='darkred'>#endif</font>
<a name='L739'><font color='red'>}</font>
<a name='L740'>
<a name='L741'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L742'><a href='../S/2613.html#L888' title='Refered from 888 in Modules/_struct.c.'>bu_float</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L743'><font color='red'>{</font>
<a name='L744'>    <b>return</b> <a href='../S/2613.html#L223' title='Defined at 223 in Modules/_struct.c.'>unpack_float</a>(p, 0);
<a name='L745'><font color='red'>}</font>
<a name='L746'>
<a name='L747'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L748'><a href='../S/2613.html#L889' title='Refered from 889 in Modules/_struct.c.'>bu_double</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L749'><font color='red'>{</font>
<a name='L750'>    <b>return</b> <a href='../S/2613.html#L235' title='Defined at 235 in Modules/_struct.c.'>unpack_double</a>(p, 0);
<a name='L751'><font color='red'>}</font>
<a name='L752'>
<a name='L753'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L754'><a href='../R/6272.html' title='Multiple refered from 2 places.'>bu_bool</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L755'><font color='red'>{</font>
<a name='L756'>    <b>char</b> x;
<a name='L757'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x, p, <b>sizeof</b> x);
<a name='L758'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(x != 0);
<a name='L759'><font color='red'>}</font>
<a name='L760'>
<a name='L761'><b>static</b> <b>int</b>
<a name='L762'><a href='../R/6266.html' title='Multiple refered from 3 places.'>bp_int</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L763'><font color='red'>{</font>
<a name='L764'>    <b>long</b> x;
<a name='L765'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L766'>    <b>if</b> (<a href='../D/8871.html' title='Multiple defined in 3 places.'>get_long</a>(v, &amp;x) &lt; 0)
<a name='L767'>        <b>return</b> -1;
<a name='L768'>    i = f-&gt;size;
<a name='L769'>    <b>if</b> (i != <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>) <font color='red'>{</font>
<a name='L770'>        <b>if</b> ((i == 2) &amp;&amp; (x &lt; -32768 || x &gt; 32767))
<a name='L771'>            <a href='../S/2613.html#L217' title='Defined at 217 in Modules/_struct.c.'>RANGE_ERROR</a>(x, f, 0, 0xffffL);
<a name='L772'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> != 4)
<a name='L773'>        <b>else</b> <b>if</b> ((i == 4) &amp;&amp; (x &lt; -2147483648L || x &gt; 2147483647L))
<a name='L774'>            <a href='../S/2613.html#L217' title='Defined at 217 in Modules/_struct.c.'>RANGE_ERROR</a>(x, f, 0, 0xffffffffL);
<a name='L775'><font color='darkred'>#endif</font>
<a name='L776'>    <font color='red'>}</font>
<a name='L777'>    <b>do</b> <font color='red'>{</font>
<a name='L778'>        p[--i] = (<b>char</b>)x;
<a name='L779'>        x &gt;&gt;= 8;
<a name='L780'>    <font color='red'>}</font> <b>while</b> (i &gt; 0);
<a name='L781'>    <b>return</b> 0;
<a name='L782'><font color='red'>}</font>
<a name='L783'>
<a name='L784'><b>static</b> <b>int</b>
<a name='L785'><a href='../R/6268.html' title='Multiple refered from 3 places.'>bp_uint</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L786'><font color='red'>{</font>
<a name='L787'>    <b>unsigned</b> <b>long</b> x;
<a name='L788'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L789'>    <b>if</b> (<a href='../D/8904.html' title='Multiple defined in 2 places.'>get_ulong</a>(v, &amp;x) &lt; 0)
<a name='L790'>        <b>return</b> -1;
<a name='L791'>    i = f-&gt;size;
<a name='L792'>    <b>if</b> (i != <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>) <font color='red'>{</font>
<a name='L793'>        <b>unsigned</b> <b>long</b> maxint = 1;
<a name='L794'>        maxint &lt;&lt;= (<b>unsigned</b> <b>long</b>)(i * 8);
<a name='L795'>        <b>if</b> (x &gt;= maxint)
<a name='L796'>            <a href='../S/2613.html#L217' title='Defined at 217 in Modules/_struct.c.'>RANGE_ERROR</a>(x, f, 1, maxint - 1);
<a name='L797'>    <font color='red'>}</font>
<a name='L798'>    <b>do</b> <font color='red'>{</font>
<a name='L799'>        p[--i] = (<b>char</b>)x;
<a name='L800'>        x &gt;&gt;= 8;
<a name='L801'>    <font color='red'>}</font> <b>while</b> (i &gt; 0);
<a name='L802'>    <b>return</b> 0;
<a name='L803'><font color='red'>}</font>
<a name='L804'>
<a name='L805'><b>static</b> <b>int</b>
<a name='L806'><a href='../S/2613.html#L885' title='Refered from 885 in Modules/_struct.c.'>bp_longlong</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L807'><font color='red'>{</font>
<a name='L808'>    <b>int</b> res;
<a name='L809'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L810'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L811'>        <b>return</b> -1;
<a name='L812'>    res = <a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)v,
<a name='L813'>                              (<b>unsigned</b> <b>char</b> *)p,
<a name='L814'>                              8,
<a name='L815'>                              0, <i><font color='green'>/* little_endian */</font></i>
<a name='L816'>                  1  <i><font color='green'>/* signed */</font></i>);
<a name='L817'>    Py_DECREF(v);
<a name='L818'>    <b>return</b> res;
<a name='L819'><font color='red'>}</font>
<a name='L820'>
<a name='L821'><b>static</b> <b>int</b>
<a name='L822'><a href='../S/2613.html#L886' title='Refered from 886 in Modules/_struct.c.'>bp_ulonglong</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L823'><font color='red'>{</font>
<a name='L824'>    <b>int</b> res;
<a name='L825'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L826'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L827'>        <b>return</b> -1;
<a name='L828'>    res = <a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)v,
<a name='L829'>                              (<b>unsigned</b> <b>char</b> *)p,
<a name='L830'>                              8,
<a name='L831'>                              0, <i><font color='green'>/* little_endian */</font></i>
<a name='L832'>                  0  <i><font color='green'>/* signed */</font></i>);
<a name='L833'>    Py_DECREF(v);
<a name='L834'>    <b>return</b> res;
<a name='L835'><font color='red'>}</font>
<a name='L836'>
<a name='L837'><b>static</b> <b>int</b>
<a name='L838'><a href='../S/2613.html#L888' title='Refered from 888 in Modules/_struct.c.'>bp_float</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L839'><font color='red'>{</font>
<a name='L840'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L841'>    <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L842'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L843'>                        "required argument is not a float");
<a name='L844'>        <b>return</b> -1;
<a name='L845'>    <font color='red'>}</font>
<a name='L846'>    <b>return</b> <a href='../S/2791.html#L2044' title='Defined at 2044 in Objects/floatobject.c.'>_PyFloat_Pack4</a>(x, (<b>unsigned</b> <b>char</b> *)p, 0);
<a name='L847'><font color='red'>}</font>
<a name='L848'>
<a name='L849'><b>static</b> <b>int</b>
<a name='L850'><a href='../S/2613.html#L889' title='Refered from 889 in Modules/_struct.c.'>bp_double</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L851'><font color='red'>{</font>
<a name='L852'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L853'>    <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L854'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L855'>                        "required argument is not a float");
<a name='L856'>        <b>return</b> -1;
<a name='L857'>    <font color='red'>}</font>
<a name='L858'>    <b>return</b> <a href='../S/2791.html#L2149' title='Defined at 2149 in Objects/floatobject.c.'>_PyFloat_Pack8</a>(x, (<b>unsigned</b> <b>char</b> *)p, 0);
<a name='L859'><font color='red'>}</font>
<a name='L860'>
<a name='L861'><b>static</b> <b>int</b>
<a name='L862'><a href='../R/6263.html' title='Multiple refered from 2 places.'>bp_bool</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L863'><font color='red'>{</font>
<a name='L864'>    <b>int</b> y;
<a name='L865'>    y = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(v);
<a name='L866'>    <b>if</b> (y &lt; 0)
<a name='L867'>        <b>return</b> -1;
<a name='L868'>    *p = (<b>char</b>)y;
<a name='L869'>    <b>return</b> 0;
<a name='L870'><font color='red'>}</font>
<a name='L871'>
<a name='L872'><b>static</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> bigendian_table[] = <font color='red'>{</font>
<a name='L873'>    <font color='red'>{</font>'x',       1,              0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L874'>    <font color='red'>{</font>'b',       1,              0,              <a href='../S/2613.html#L305' title='Defined at 305 in Modules/_struct.c.'>nu_byte</a>,        <a href='../S/2613.html#L433' title='Defined at 433 in Modules/_struct.c.'>np_byte</a><font color='red'>}</font>,
<a name='L875'>    <font color='red'>{</font>'B',       1,              0,              <a href='../S/2613.html#L311' title='Defined at 311 in Modules/_struct.c.'>nu_ubyte</a>,       <a href='../S/2613.html#L448' title='Defined at 448 in Modules/_struct.c.'>np_ubyte</a><font color='red'>}</font>,
<a name='L876'>    <font color='red'>{</font>'c',       1,              0,              <a href='../S/2613.html#L299' title='Defined at 299 in Modules/_struct.c.'>nu_char</a>,        <a href='../S/2613.html#L463' title='Defined at 463 in Modules/_struct.c.'>np_char</a><font color='red'>}</font>,
<a name='L877'>    <font color='red'>{</font>'s',       1,              0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L878'>    <font color='red'>{</font>'p',       1,              0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L879'>    <font color='red'>{</font>'h',       2,              0,              <a href='../S/2613.html#L668' title='Defined at 668 in Modules/_struct.c.'>bu_int</a>,         <a href='../S/2613.html#L762' title='Defined at 762 in Modules/_struct.c.'>bp_int</a><font color='red'>}</font>,
<a name='L880'>    <font color='red'>{</font>'H',       2,              0,              <a href='../S/2613.html#L683' title='Defined at 683 in Modules/_struct.c.'>bu_uint</a>,        <a href='../S/2613.html#L785' title='Defined at 785 in Modules/_struct.c.'>bp_uint</a><font color='red'>}</font>,
<a name='L881'>    <font color='red'>{</font>'i',       4,              0,              <a href='../S/2613.html#L668' title='Defined at 668 in Modules/_struct.c.'>bu_int</a>,         <a href='../S/2613.html#L762' title='Defined at 762 in Modules/_struct.c.'>bp_int</a><font color='red'>}</font>,
<a name='L882'>    <font color='red'>{</font>'I',       4,              0,              <a href='../S/2613.html#L683' title='Defined at 683 in Modules/_struct.c.'>bu_uint</a>,        <a href='../S/2613.html#L785' title='Defined at 785 in Modules/_struct.c.'>bp_uint</a><font color='red'>}</font>,
<a name='L883'>    <font color='red'>{</font>'l',       4,              0,              <a href='../S/2613.html#L668' title='Defined at 668 in Modules/_struct.c.'>bu_int</a>,         <a href='../S/2613.html#L762' title='Defined at 762 in Modules/_struct.c.'>bp_int</a><font color='red'>}</font>,
<a name='L884'>    <font color='red'>{</font>'L',       4,              0,              <a href='../S/2613.html#L683' title='Defined at 683 in Modules/_struct.c.'>bu_uint</a>,        <a href='../S/2613.html#L785' title='Defined at 785 in Modules/_struct.c.'>bp_uint</a><font color='red'>}</font>,
<a name='L885'>    <font color='red'>{</font>'q',       8,              0,              <a href='../S/2613.html#L697' title='Defined at 697 in Modules/_struct.c.'>bu_longlong</a>,    <a href='../S/2613.html#L806' title='Defined at 806 in Modules/_struct.c.'>bp_longlong</a><font color='red'>}</font>,
<a name='L886'>    <font color='red'>{</font>'Q',       8,              0,              <a href='../S/2613.html#L721' title='Defined at 721 in Modules/_struct.c.'>bu_ulonglong</a>,   <a href='../S/2613.html#L822' title='Defined at 822 in Modules/_struct.c.'>bp_ulonglong</a><font color='red'>}</font>,
<a name='L887'>    <font color='red'>{</font>'?',       1,              0,              <a href='../S/2613.html#L754' title='Defined at 754 in Modules/_struct.c.'>bu_bool</a>,        <a href='../S/2613.html#L862' title='Defined at 862 in Modules/_struct.c.'>bp_bool</a><font color='red'>}</font>,
<a name='L888'>    <font color='red'>{</font>'f',       4,              0,              <a href='../S/2613.html#L742' title='Defined at 742 in Modules/_struct.c.'>bu_float</a>,       <a href='../S/2613.html#L838' title='Defined at 838 in Modules/_struct.c.'>bp_float</a><font color='red'>}</font>,
<a name='L889'>    <font color='red'>{</font>'d',       8,              0,              <a href='../S/2613.html#L748' title='Defined at 748 in Modules/_struct.c.'>bu_double</a>,      <a href='../S/2613.html#L850' title='Defined at 850 in Modules/_struct.c.'>bp_double</a><font color='red'>}</font>,
<a name='L890'>    <font color='red'>{</font>0<font color='red'>}</font>
<a name='L891'><font color='red'>}</font>;
<a name='L892'>
<a name='L893'><i><font color='green'>/* Little-endian routines. *****************************************************/</font></i>
<a name='L894'>
<a name='L895'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L896'><a href='../R/8819.html' title='Multiple refered from 3 places.'>lu_int</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L897'><font color='red'>{</font>
<a name='L898'>    <b>long</b> x = 0;
<a name='L899'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = f-&gt;size;
<a name='L900'>    <b>const</b> <b>unsigned</b> <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = (<b>const</b> <b>unsigned</b> <b>char</b> *)p;
<a name='L901'>    <b>do</b> <font color='red'>{</font>
<a name='L902'>        x = (x&lt;&lt;8) | <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>[--i];
<a name='L903'>    <font color='red'>}</font> <b>while</b> (i &gt; 0);
<a name='L904'>    <i><font color='green'>/* Extend the sign bit. */</font></i>
<a name='L905'>    <b>if</b> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt; f-&gt;size)
<a name='L906'>        x |= -(x &amp; (1L &lt;&lt; ((8 * f-&gt;size) - 1)));
<a name='L907'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(x);
<a name='L908'><font color='red'>}</font>
<a name='L909'>
<a name='L910'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L911'><a href='../R/8821.html' title='Multiple refered from 3 places.'>lu_uint</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L912'><font color='red'>{</font>
<a name='L913'>    <b>unsigned</b> <b>long</b> x = 0;
<a name='L914'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = f-&gt;size;
<a name='L915'>    <b>const</b> <b>unsigned</b> <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = (<b>const</b> <b>unsigned</b> <b>char</b> *)p;
<a name='L916'>    <b>do</b> <font color='red'>{</font>
<a name='L917'>        x = (x&lt;&lt;8) | <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>[--i];
<a name='L918'>    <font color='red'>}</font> <b>while</b> (i &gt; 0);
<a name='L919'>    <b>if</b> (x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L920'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)x);
<a name='L921'>    <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>((<b>long</b>)x);
<a name='L922'><font color='red'>}</font>
<a name='L923'>
<a name='L924'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L925'><a href='../S/2613.html#L1094' title='Refered from 1094 in Modules/_struct.c.'>lu_longlong</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L926'><font color='red'>{</font>
<a name='L927'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L928'>    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x = 0;
<a name='L929'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = f-&gt;size;
<a name='L930'>    <b>const</b> <b>unsigned</b> <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = (<b>const</b> <b>unsigned</b> <b>char</b> *)p;
<a name='L931'>    <b>do</b> <font color='red'>{</font>
<a name='L932'>        x = (x&lt;&lt;8) | <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>[--i];
<a name='L933'>    <font color='red'>}</font> <b>while</b> (i &gt; 0);
<a name='L934'>    <i><font color='green'>/* Extend the sign bit. */</font></i>
<a name='L935'>    <b>if</b> (<a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a> &gt; f-&gt;size)
<a name='L936'>        x |= -(x &amp; ((<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)1 &lt;&lt; ((8 * f-&gt;size) - 1)));
<a name='L937'>    <b>if</b> (x &gt;= <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a> &amp;&amp; x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L938'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(x, <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>, <b>long</b>));
<a name='L939'>    <b>return</b> <a href='../S/2799.html#L994' title='Defined at 994 in Objects/longobject.c.'>PyLong_FromLongLong</a>(x);
<a name='L940'><font color='darkred'>#else</font>
<a name='L941'>    <b>return</b> <a href='../S/2799.html#L683' title='Defined at 683 in Objects/longobject.c.'>_PyLong_FromByteArray</a>((<b>const</b> <b>unsigned</b> <b>char</b> *)p,
<a name='L942'>                                  8,
<a name='L943'>                                  1, <i><font color='green'>/* little-endian */</font></i>
<a name='L944'>                      1  <i><font color='green'>/* signed */</font></i>);
<a name='L945'><font color='darkred'>#endif</font>
<a name='L946'><font color='red'>}</font>
<a name='L947'>
<a name='L948'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L949'><a href='../S/2613.html#L1095' title='Refered from 1095 in Modules/_struct.c.'>lu_ulonglong</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L950'><font color='red'>{</font>
<a name='L951'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L952'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x = 0;
<a name='L953'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = f-&gt;size;
<a name='L954'>    <b>const</b> <b>unsigned</b> <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = (<b>const</b> <b>unsigned</b> <b>char</b> *)p;
<a name='L955'>    <b>do</b> <font color='red'>{</font>
<a name='L956'>        x = (x&lt;&lt;8) | <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>[--i];
<a name='L957'>    <font color='red'>}</font> <b>while</b> (i &gt; 0);
<a name='L958'>    <b>if</b> (x &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L959'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(x, <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>, <b>long</b>));
<a name='L960'>    <b>return</b> <a href='../S/2799.html#L1038' title='Defined at 1038 in Objects/longobject.c.'>PyLong_FromUnsignedLongLong</a>(x);
<a name='L961'><font color='darkred'>#else</font>
<a name='L962'>    <b>return</b> <a href='../S/2799.html#L683' title='Defined at 683 in Objects/longobject.c.'>_PyLong_FromByteArray</a>((<b>const</b> <b>unsigned</b> <b>char</b> *)p,
<a name='L963'>                                  8,
<a name='L964'>                                  1, <i><font color='green'>/* little-endian */</font></i>
<a name='L965'>                      0  <i><font color='green'>/* signed */</font></i>);
<a name='L966'><font color='darkred'>#endif</font>
<a name='L967'><font color='red'>}</font>
<a name='L968'>
<a name='L969'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L970'><a href='../S/2613.html#L1098' title='Refered from 1098 in Modules/_struct.c.'>lu_float</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L971'><font color='red'>{</font>
<a name='L972'>    <b>return</b> <a href='../S/2613.html#L223' title='Defined at 223 in Modules/_struct.c.'>unpack_float</a>(p, 1);
<a name='L973'><font color='red'>}</font>
<a name='L974'>
<a name='L975'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L976'><a href='../S/2613.html#L1099' title='Refered from 1099 in Modules/_struct.c.'>lu_double</a>(<b>const</b> <b>char</b> *p, <b>const</b> formatdef *f)
<a name='L977'><font color='red'>{</font>
<a name='L978'>    <b>return</b> <a href='../S/2613.html#L235' title='Defined at 235 in Modules/_struct.c.'>unpack_double</a>(p, 1);
<a name='L979'><font color='red'>}</font>
<a name='L980'>
<a name='L981'><b>static</b> <b>int</b>
<a name='L982'><a href='../R/8811.html' title='Multiple refered from 3 places.'>lp_int</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L983'><font color='red'>{</font>
<a name='L984'>    <b>long</b> x;
<a name='L985'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L986'>    <b>if</b> (<a href='../D/8871.html' title='Multiple defined in 3 places.'>get_long</a>(v, &amp;x) &lt; 0)
<a name='L987'>        <b>return</b> -1;
<a name='L988'>    i = f-&gt;size;
<a name='L989'>    <b>if</b> (i != <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>) <font color='red'>{</font>
<a name='L990'>        <b>if</b> ((i == 2) &amp;&amp; (x &lt; -32768 || x &gt; 32767))
<a name='L991'>            <a href='../S/2613.html#L217' title='Defined at 217 in Modules/_struct.c.'>RANGE_ERROR</a>(x, f, 0, 0xffffL);
<a name='L992'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> != 4)
<a name='L993'>        <b>else</b> <b>if</b> ((i == 4) &amp;&amp; (x &lt; -2147483648L || x &gt; 2147483647L))
<a name='L994'>            <a href='../S/2613.html#L217' title='Defined at 217 in Modules/_struct.c.'>RANGE_ERROR</a>(x, f, 0, 0xffffffffL);
<a name='L995'><font color='darkred'>#endif</font>
<a name='L996'>    <font color='red'>}</font>
<a name='L997'>    <b>do</b> <font color='red'>{</font>
<a name='L998'>        *p++ = (<b>char</b>)x;
<a name='L999'>        x &gt;&gt;= 8;
<a name='L1000'>    <font color='red'>}</font> <b>while</b> (--i &gt; 0);
<a name='L1001'>    <b>return</b> 0;
<a name='L1002'><font color='red'>}</font>
<a name='L1003'>
<a name='L1004'><b>static</b> <b>int</b>
<a name='L1005'><a href='../R/8813.html' title='Multiple refered from 3 places.'>lp_uint</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L1006'><font color='red'>{</font>
<a name='L1007'>    <b>unsigned</b> <b>long</b> x;
<a name='L1008'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1009'>    <b>if</b> (<a href='../D/8904.html' title='Multiple defined in 2 places.'>get_ulong</a>(v, &amp;x) &lt; 0)
<a name='L1010'>        <b>return</b> -1;
<a name='L1011'>    i = f-&gt;size;
<a name='L1012'>    <b>if</b> (i != <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>) <font color='red'>{</font>
<a name='L1013'>        <b>unsigned</b> <b>long</b> maxint = 1;
<a name='L1014'>        maxint &lt;&lt;= (<b>unsigned</b> <b>long</b>)(i * 8);
<a name='L1015'>        <b>if</b> (x &gt;= maxint)
<a name='L1016'>            <a href='../S/2613.html#L217' title='Defined at 217 in Modules/_struct.c.'>RANGE_ERROR</a>(x, f, 1, maxint - 1);
<a name='L1017'>    <font color='red'>}</font>
<a name='L1018'>    <b>do</b> <font color='red'>{</font>
<a name='L1019'>        *p++ = (<b>char</b>)x;
<a name='L1020'>        x &gt;&gt;= 8;
<a name='L1021'>    <font color='red'>}</font> <b>while</b> (--i &gt; 0);
<a name='L1022'>    <b>return</b> 0;
<a name='L1023'><font color='red'>}</font>
<a name='L1024'>
<a name='L1025'><b>static</b> <b>int</b>
<a name='L1026'><a href='../S/2613.html#L1094' title='Refered from 1094 in Modules/_struct.c.'>lp_longlong</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L1027'><font color='red'>{</font>
<a name='L1028'>    <b>int</b> res;
<a name='L1029'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L1030'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1031'>        <b>return</b> -1;
<a name='L1032'>    res = <a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)v,
<a name='L1033'>                              (<b>unsigned</b> <b>char</b> *)p,
<a name='L1034'>                              8,
<a name='L1035'>                              1, <i><font color='green'>/* little_endian */</font></i>
<a name='L1036'>                  1  <i><font color='green'>/* signed */</font></i>);
<a name='L1037'>    Py_DECREF(v);
<a name='L1038'>    <b>return</b> res;
<a name='L1039'><font color='red'>}</font>
<a name='L1040'>
<a name='L1041'><b>static</b> <b>int</b>
<a name='L1042'><a href='../S/2613.html#L1095' title='Refered from 1095 in Modules/_struct.c.'>lp_ulonglong</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L1043'><font color='red'>{</font>
<a name='L1044'>    <b>int</b> res;
<a name='L1045'>    v = <a href='../S/2613.html#L95' title='Defined at 95 in Modules/_struct.c.'>get_pylong</a>(v);
<a name='L1046'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1047'>        <b>return</b> -1;
<a name='L1048'>    res = <a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)v,
<a name='L1049'>                              (<b>unsigned</b> <b>char</b> *)p,
<a name='L1050'>                              8,
<a name='L1051'>                              1, <i><font color='green'>/* little_endian */</font></i>
<a name='L1052'>                  0  <i><font color='green'>/* signed */</font></i>);
<a name='L1053'>    Py_DECREF(v);
<a name='L1054'>    <b>return</b> res;
<a name='L1055'><font color='red'>}</font>
<a name='L1056'>
<a name='L1057'><b>static</b> <b>int</b>
<a name='L1058'><a href='../S/2613.html#L1098' title='Refered from 1098 in Modules/_struct.c.'>lp_float</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L1059'><font color='red'>{</font>
<a name='L1060'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L1061'>    <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L1062'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L1063'>                        "required argument is not a float");
<a name='L1064'>        <b>return</b> -1;
<a name='L1065'>    <font color='red'>}</font>
<a name='L1066'>    <b>return</b> <a href='../S/2791.html#L2044' title='Defined at 2044 in Objects/floatobject.c.'>_PyFloat_Pack4</a>(x, (<b>unsigned</b> <b>char</b> *)p, 1);
<a name='L1067'><font color='red'>}</font>
<a name='L1068'>
<a name='L1069'><b>static</b> <b>int</b>
<a name='L1070'><a href='../S/2613.html#L1099' title='Refered from 1099 in Modules/_struct.c.'>lp_double</a>(<b>char</b> *p, PyObject *v, <b>const</b> formatdef *f)
<a name='L1071'><font color='red'>{</font>
<a name='L1072'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L1073'>    <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L1074'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L1075'>                        "required argument is not a float");
<a name='L1076'>        <b>return</b> -1;
<a name='L1077'>    <font color='red'>}</font>
<a name='L1078'>    <b>return</b> <a href='../S/2791.html#L2149' title='Defined at 2149 in Objects/floatobject.c.'>_PyFloat_Pack8</a>(x, (<b>unsigned</b> <b>char</b> *)p, 1);
<a name='L1079'><font color='red'>}</font>
<a name='L1080'>
<a name='L1081'><b>static</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> lilendian_table[] = <font color='red'>{</font>
<a name='L1082'>    <font color='red'>{</font>'x',       1,              0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1083'>    <font color='red'>{</font>'b',       1,              0,              <a href='../S/2613.html#L305' title='Defined at 305 in Modules/_struct.c.'>nu_byte</a>,        <a href='../S/2613.html#L433' title='Defined at 433 in Modules/_struct.c.'>np_byte</a><font color='red'>}</font>,
<a name='L1084'>    <font color='red'>{</font>'B',       1,              0,              <a href='../S/2613.html#L311' title='Defined at 311 in Modules/_struct.c.'>nu_ubyte</a>,       <a href='../S/2613.html#L448' title='Defined at 448 in Modules/_struct.c.'>np_ubyte</a><font color='red'>}</font>,
<a name='L1085'>    <font color='red'>{</font>'c',       1,              0,              <a href='../S/2613.html#L299' title='Defined at 299 in Modules/_struct.c.'>nu_char</a>,        <a href='../S/2613.html#L463' title='Defined at 463 in Modules/_struct.c.'>np_char</a><font color='red'>}</font>,
<a name='L1086'>    <font color='red'>{</font>'s',       1,              0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1087'>    <font color='red'>{</font>'p',       1,              0,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1088'>    <font color='red'>{</font>'h',       2,              0,              <a href='../S/2613.html#L896' title='Defined at 896 in Modules/_struct.c.'>lu_int</a>,         <a href='../S/2613.html#L982' title='Defined at 982 in Modules/_struct.c.'>lp_int</a><font color='red'>}</font>,
<a name='L1089'>    <font color='red'>{</font>'H',       2,              0,              <a href='../S/2613.html#L911' title='Defined at 911 in Modules/_struct.c.'>lu_uint</a>,        <a href='../S/2613.html#L1005' title='Defined at 1005 in Modules/_struct.c.'>lp_uint</a><font color='red'>}</font>,
<a name='L1090'>    <font color='red'>{</font>'i',       4,              0,              <a href='../S/2613.html#L896' title='Defined at 896 in Modules/_struct.c.'>lu_int</a>,         <a href='../S/2613.html#L982' title='Defined at 982 in Modules/_struct.c.'>lp_int</a><font color='red'>}</font>,
<a name='L1091'>    <font color='red'>{</font>'I',       4,              0,              <a href='../S/2613.html#L911' title='Defined at 911 in Modules/_struct.c.'>lu_uint</a>,        <a href='../S/2613.html#L1005' title='Defined at 1005 in Modules/_struct.c.'>lp_uint</a><font color='red'>}</font>,
<a name='L1092'>    <font color='red'>{</font>'l',       4,              0,              <a href='../S/2613.html#L896' title='Defined at 896 in Modules/_struct.c.'>lu_int</a>,         <a href='../S/2613.html#L982' title='Defined at 982 in Modules/_struct.c.'>lp_int</a><font color='red'>}</font>,
<a name='L1093'>    <font color='red'>{</font>'L',       4,              0,              <a href='../S/2613.html#L911' title='Defined at 911 in Modules/_struct.c.'>lu_uint</a>,        <a href='../S/2613.html#L1005' title='Defined at 1005 in Modules/_struct.c.'>lp_uint</a><font color='red'>}</font>,
<a name='L1094'>    <font color='red'>{</font>'q',       8,              0,              <a href='../S/2613.html#L925' title='Defined at 925 in Modules/_struct.c.'>lu_longlong</a>,    <a href='../S/2613.html#L1026' title='Defined at 1026 in Modules/_struct.c.'>lp_longlong</a><font color='red'>}</font>,
<a name='L1095'>    <font color='red'>{</font>'Q',       8,              0,              <a href='../S/2613.html#L949' title='Defined at 949 in Modules/_struct.c.'>lu_ulonglong</a>,   <a href='../S/2613.html#L1042' title='Defined at 1042 in Modules/_struct.c.'>lp_ulonglong</a><font color='red'>}</font>,
<a name='L1096'>    <font color='red'>{</font>'?',       1,              0,              <a href='../S/2613.html#L754' title='Defined at 754 in Modules/_struct.c.'>bu_bool</a>,        <a href='../S/2613.html#L862' title='Defined at 862 in Modules/_struct.c.'>bp_bool</a><font color='red'>}</font>, <i><font color='green'>/* Std rep not endian dep,</font></i>
<a name='L1097'><i><font color='green'>        but potentially different from native rep -- reuse bx_bool funcs. */</font></i>
<a name='L1098'>    <font color='red'>{</font>'f',       4,              0,              <a href='../S/2613.html#L970' title='Defined at 970 in Modules/_struct.c.'>lu_float</a>,       <a href='../S/2613.html#L1058' title='Defined at 1058 in Modules/_struct.c.'>lp_float</a><font color='red'>}</font>,
<a name='L1099'>    <font color='red'>{</font>'d',       8,              0,              <a href='../S/2613.html#L976' title='Defined at 976 in Modules/_struct.c.'>lu_double</a>,      <a href='../S/2613.html#L1070' title='Defined at 1070 in Modules/_struct.c.'>lp_double</a><font color='red'>}</font>,
<a name='L1100'>    <font color='red'>{</font>0<font color='red'>}</font>
<a name='L1101'><font color='red'>}</font>;
<a name='L1102'>
<a name='L1103'>
<a name='L1104'><b>static</b> <b>const</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> *
<a name='L1105'><a href='../S/2613.html#L1181' title='Refered from 1181 in Modules/_struct.c.'>whichtable</a>(<b>char</b> **pfmt)
<a name='L1106'><font color='red'>{</font>
<a name='L1107'>    <b>const</b> <b>char</b> *fmt = (*pfmt)++; <i><font color='green'>/* May be backed out of later */</font></i>
<a name='L1108'>    <b>switch</b> (*fmt) <font color='red'>{</font>
<a name='L1109'>    <b>case</b> '&lt;':
<a name='L1110'>        <b>return</b> lilendian_table;
<a name='L1111'>    <b>case</b> '&gt;':
<a name='L1112'>    <b>case</b> '!': <i><font color='green'>/* Network byte order is big-endian */</font></i>
<a name='L1113'>        <b>return</b> bigendian_table;
<a name='L1114'>    <b>case</b> '=': <font color='red'>{</font> <i><font color='green'>/* Host byte order -- different from native in aligment! */</font></i>
<a name='L1115'>        <b>int</b> n = 1;
<a name='L1116'>        <b>char</b> *p = (<b>char</b> *) &amp;n;
<a name='L1117'>        <b>if</b> (*p == 1)
<a name='L1118'>            <b>return</b> lilendian_table;
<a name='L1119'>        <b>else</b>
<a name='L1120'>            <b>return</b> bigendian_table;
<a name='L1121'>    <font color='red'>}</font>
<a name='L1122'>    <b>default</b>:
<a name='L1123'>        --*pfmt; <i><font color='green'>/* Back out of pointer increment */</font></i>
<a name='L1124'>        <i><font color='green'>/* Fall through */</font></i>
<a name='L1125'>    <b>case</b> '@':
<a name='L1126'>        <b>return</b> native_table;
<a name='L1127'>    <font color='red'>}</font>
<a name='L1128'><font color='red'>}</font>
<a name='L1129'>
<a name='L1130'>
<a name='L1131'><i><font color='green'>/* Get the table entry for a format code */</font></i>
<a name='L1132'>
<a name='L1133'><b>static</b> <b>const</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> *
<a name='L1134'><a href='../R/8144.html' title='Multiple refered from 2 places.'>getentry</a>(<b>int</b> c, <b>const</b> formatdef *f)
<a name='L1135'><font color='red'>{</font>
<a name='L1136'>    <b>for</b> (; f-&gt;format != '\0'; f++) <font color='red'>{</font>
<a name='L1137'>        <b>if</b> (f-&gt;format == c) <font color='red'>{</font>
<a name='L1138'>            <b>return</b> f;
<a name='L1139'>        <font color='red'>}</font>
<a name='L1140'>    <font color='red'>}</font>
<a name='L1141'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError, "bad char in struct format");
<a name='L1142'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1143'><font color='red'>}</font>
<a name='L1144'>
<a name='L1145'>
<a name='L1146'><i><font color='green'>/* Align a size according to a format code.  Return -1 on overflow. */</font></i>
<a name='L1147'>
<a name='L1148'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L1149'><a href='../R/5953.html' title='Multiple refered from 100 places.'>align</a>(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, <b>char</b> c, <b>const</b> formatdef *e)
<a name='L1150'><font color='red'>{</font>
<a name='L1151'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> extra;
<a name='L1152'>
<a name='L1153'>    <b>if</b> (e-&gt;format == c) <font color='red'>{</font>
<a name='L1154'>        <b>if</b> (e-&gt;alignment &amp;&amp; size &gt; 0) <font color='red'>{</font>
<a name='L1155'>            extra = (e-&gt;alignment - 1) - (size - 1) % (e-&gt;alignment);
<a name='L1156'>            <b>if</b> (extra &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - size)
<a name='L1157'>                <b>return</b> -1;
<a name='L1158'>            size += extra;
<a name='L1159'>        <font color='red'>}</font>
<a name='L1160'>    <font color='red'>}</font>
<a name='L1161'>    <b>return</b> size;
<a name='L1162'><font color='red'>}</font>
<a name='L1163'>
<a name='L1164'>
<a name='L1165'><i><font color='green'>/* calculate the size of a format string */</font></i>
<a name='L1166'>
<a name='L1167'><b>static</b> <b>int</b>
<a name='L1168'><a href='../S/2613.html#L1351' title='Refered from 1351 in Modules/_struct.c.'>prepare_s</a>(PyStructObject *self)
<a name='L1169'><font color='red'>{</font>
<a name='L1170'>    <b>const</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> *f;
<a name='L1171'>    <b>const</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> *e;
<a name='L1172'>    <a href='../S/2613.html#L29' title='Defined at 29 in Modules/_struct.c.'>formatcode</a> *codes;
<a name='L1173'>
<a name='L1174'>    <b>const</b> <b>char</b> *s;
<a name='L1175'>    <b>const</b> <b>char</b> *fmt;
<a name='L1176'>    <b>char</b> c;
<a name='L1177'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, len, num, itemsize;
<a name='L1178'>
<a name='L1179'>    fmt = PyBytes_AS_STRING(self-&gt;s_format);
<a name='L1180'>
<a name='L1181'>    f = <a href='../S/2613.html#L1105' title='Defined at 1105 in Modules/_struct.c.'>whichtable</a>((<b>char</b> **)&amp;fmt);
<a name='L1182'>
<a name='L1183'>    s = fmt;
<a name='L1184'>    size = 0;
<a name='L1185'>    len = 0;
<a name='L1186'>    <b>while</b> ((c = *s++) != '\0') <font color='red'>{</font>
<a name='L1187'>        <b>if</b> (<a href='../D/9346.html' title='Multiple defined in 2 places.'>isspace</a>(<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(c)))
<a name='L1188'>            <b>continue</b>;
<a name='L1189'>        <b>if</b> ('0' &lt;= c &amp;&amp; c &lt;= '9') <font color='red'>{</font>
<a name='L1190'>            num = c - '0';
<a name='L1191'>            <b>while</b> ('0' &lt;= (c = *s++) &amp;&amp; c &lt;= '9') <font color='red'>{</font>
<a name='L1192'>                <i><font color='green'>/* overflow-safe version of</font></i>
<a name='L1193'><i><font color='green'>                   if (num*10 + (c - '0') &gt; PY_SSIZE_T_MAX) { ... } */</font></i>
<a name='L1194'>                <b>if</b> (num &gt;= <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / 10 &amp;&amp; (
<a name='L1195'>                        num &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / 10 ||
<a name='L1196'>                        (c - '0') &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> % 10))
<a name='L1197'>                    <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L1198'>                num = num*10 + (c - '0');
<a name='L1199'>            <font color='red'>}</font>
<a name='L1200'>            <b>if</b> (c == '\0') <font color='red'>{</font>
<a name='L1201'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L1202'>                                "repeat count given without format specifier");
<a name='L1203'>                <b>return</b> -1;
<a name='L1204'>            <font color='red'>}</font>
<a name='L1205'>        <font color='red'>}</font>
<a name='L1206'>        <b>else</b>
<a name='L1207'>            num = 1;
<a name='L1208'>
<a name='L1209'>        e = <a href='../S/2613.html#L1134' title='Defined at 1134 in Modules/_struct.c.'>getentry</a>(c, f);
<a name='L1210'>        <b>if</b> (e == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1211'>            <b>return</b> -1;
<a name='L1212'>
<a name='L1213'>        <b>switch</b> (c) <font color='red'>{</font>
<a name='L1214'>            <b>case</b> 's': <i><font color='green'>/* fall through */</font></i>
<a name='L1215'>            <b>case</b> 'p': len++; <b>break</b>;
<a name='L1216'>            <b>case</b> 'x': <b>break</b>;
<a name='L1217'>            <b>default</b>: len += num; <b>break</b>;
<a name='L1218'>        <font color='red'>}</font>
<a name='L1219'>
<a name='L1220'>        itemsize = e-&gt;size;
<a name='L1221'>        size = <a href='../S/2613.html#L1149' title='Defined at 1149 in Modules/_struct.c.'>align</a>(size, c, e);
<a name='L1222'>        <b>if</b> (size == -1)
<a name='L1223'>            <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L1224'>
<a name='L1225'>        <i><font color='green'>/* if (size + num * itemsize &gt; PY_SSIZE_T_MAX) { ... } */</font></i>
<a name='L1226'>        <b>if</b> (num &gt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - size) / itemsize)
<a name='L1227'>            <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L1228'>        size += num * itemsize;
<a name='L1229'>    <font color='red'>}</font>
<a name='L1230'>
<a name='L1231'>    <i><font color='green'>/* check for overflow */</font></i>
<a name='L1232'>    <b>if</b> ((len + 1) &gt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / <b>sizeof</b>(<a href='../S/2613.html#L29' title='Defined at 29 in Modules/_struct.c.'>formatcode</a>))) <font color='red'>{</font>
<a name='L1233'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1234'>        <b>return</b> -1;
<a name='L1235'>    <font color='red'>}</font>
<a name='L1236'>
<a name='L1237'>    self-&gt;s_size = size;
<a name='L1238'>    self-&gt;s_len = len;
<a name='L1239'>    codes = PyMem_MALLOC((len + 1) * <b>sizeof</b>(<a href='../S/2613.html#L29' title='Defined at 29 in Modules/_struct.c.'>formatcode</a>));
<a name='L1240'>    <b>if</b> (codes == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1241'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1242'>        <b>return</b> -1;
<a name='L1243'>    <font color='red'>}</font>
<a name='L1244'>    <i><font color='green'>/* Free any s_codes value left over from a previous initialization. */</font></i>
<a name='L1245'>    <b>if</b> (self-&gt;s_codes != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1246'>        PyMem_FREE(self-&gt;s_codes);
<a name='L1247'>    self-&gt;s_codes = codes;
<a name='L1248'>
<a name='L1249'>    s = fmt;
<a name='L1250'>    size = 0;
<a name='L1251'>    <b>while</b> ((c = *s++) != '\0') <font color='red'>{</font>
<a name='L1252'>        <b>if</b> (<a href='../D/9346.html' title='Multiple defined in 2 places.'>isspace</a>(<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(c)))
<a name='L1253'>            <b>continue</b>;
<a name='L1254'>        <b>if</b> ('0' &lt;= c &amp;&amp; c &lt;= '9') <font color='red'>{</font>
<a name='L1255'>            num = c - '0';
<a name='L1256'>            <b>while</b> ('0' &lt;= (c = *s++) &amp;&amp; c &lt;= '9')
<a name='L1257'>                num = num*10 + (c - '0');
<a name='L1258'>            <b>if</b> (c == '\0')
<a name='L1259'>                <b>break</b>;
<a name='L1260'>        <font color='red'>}</font>
<a name='L1261'>        <b>else</b>
<a name='L1262'>            num = 1;
<a name='L1263'>
<a name='L1264'>        e = <a href='../S/2613.html#L1134' title='Defined at 1134 in Modules/_struct.c.'>getentry</a>(c, f);
<a name='L1265'>
<a name='L1266'>        size = <a href='../S/2613.html#L1149' title='Defined at 1149 in Modules/_struct.c.'>align</a>(size, c, e);
<a name='L1267'>        <b>if</b> (c == 's' || c == 'p') <font color='red'>{</font>
<a name='L1268'>            codes-&gt;offset = size;
<a name='L1269'>            codes-&gt;size = num;
<a name='L1270'>            codes-&gt;fmtdef = e;
<a name='L1271'>            codes++;
<a name='L1272'>            size += num;
<a name='L1273'>        <font color='red'>}</font> <b>else</b> <b>if</b> (c == 'x') <font color='red'>{</font>
<a name='L1274'>            size += num;
<a name='L1275'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1276'>            <b>while</b> (--num &gt;= 0) <font color='red'>{</font>
<a name='L1277'>                codes-&gt;offset = size;
<a name='L1278'>                codes-&gt;size = e-&gt;size;
<a name='L1279'>                codes-&gt;fmtdef = e;
<a name='L1280'>                codes++;
<a name='L1281'>                size += e-&gt;size;
<a name='L1282'>            <font color='red'>}</font>
<a name='L1283'>        <font color='red'>}</font>
<a name='L1284'>    <font color='red'>}</font>
<a name='L1285'>    codes-&gt;fmtdef = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1286'>    codes-&gt;offset = size;
<a name='L1287'>    codes-&gt;size = 0;
<a name='L1288'>
<a name='L1289'>    <b>return</b> 0;
<a name='L1290'>
<a name='L1291'>  <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>:
<a name='L1292'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L1293'>                    "total struct size too long");
<a name='L1294'>    <b>return</b> -1;
<a name='L1295'><font color='red'>}</font>
<a name='L1296'>
<a name='L1297'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1298'><a href='../S/2613.html#L1732' title='Refered from 1732 in Modules/_struct.c.'>s_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L1299'><font color='red'>{</font>
<a name='L1300'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *self;
<a name='L1301'>
<a name='L1302'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(type != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; type-&gt;tp_alloc != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1303'>
<a name='L1304'>    self = type-&gt;tp_alloc(type, 0);
<a name='L1305'>    <b>if</b> (self != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1306'>        <a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *s = (<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a>*)self;
<a name='L1307'>        Py_INCREF(Py_None);
<a name='L1308'>        s-&gt;s_format = Py_None;
<a name='L1309'>        s-&gt;s_codes = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1310'>        s-&gt;s_size = -1;
<a name='L1311'>        s-&gt;s_len = -1;
<a name='L1312'>    <font color='red'>}</font>
<a name='L1313'>    <b>return</b> self;
<a name='L1314'><font color='red'>}</font>
<a name='L1315'>
<a name='L1316'><b>static</b> <b>int</b>
<a name='L1317'><a href='../S/2613.html#L1730' title='Refered from 1730 in Modules/_struct.c.'>s_init</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L1318'><font color='red'>{</font>
<a name='L1319'>    <a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *soself = (<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *)self;
<a name='L1320'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *o_format = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1321'>    <b>int</b> ret = 0;
<a name='L1322'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"format", 0<font color='red'>}</font>;
<a name='L1323'>
<a name='L1324'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2613.html#L43' title='Defined at 43 in Modules/_struct.c.'>PyStruct_Check</a>(self));
<a name='L1325'>
<a name='L1326'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O:Struct", kwlist,
<a name='L1327'>                                     &amp;o_format))
<a name='L1328'>        <b>return</b> -1;
<a name='L1329'>
<a name='L1330'>    <b>if</b> (PyUnicode_Check(o_format)) <font color='red'>{</font>
<a name='L1331'>        o_format = <a href='../D/3947.html' title='Multiple defined in 3 places.'>PyUnicode_AsASCIIString</a>(o_format);
<a name='L1332'>        <b>if</b> (o_format == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1333'>            <b>return</b> -1;
<a name='L1334'>    <font color='red'>}</font>
<a name='L1335'>    <i><font color='green'>/* XXX support buffer interface, too */</font></i>
<a name='L1336'>    <b>else</b> <font color='red'>{</font>
<a name='L1337'>        Py_INCREF(o_format);
<a name='L1338'>    <font color='red'>}</font>
<a name='L1339'>
<a name='L1340'>    <b>if</b> (!PyBytes_Check(o_format)) <font color='red'>{</font>
<a name='L1341'>        Py_DECREF(o_format);
<a name='L1342'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1343'>                     "Struct() argument 1 must be a bytes object, not %.200s",
<a name='L1344'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(o_format)-&gt;tp_name);
<a name='L1345'>        <b>return</b> -1;
<a name='L1346'>    <font color='red'>}</font>
<a name='L1347'>
<a name='L1348'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(soself-&gt;s_format);
<a name='L1349'>    soself-&gt;s_format = o_format;
<a name='L1350'>
<a name='L1351'>    ret = <a href='../S/2613.html#L1168' title='Defined at 1168 in Modules/_struct.c.'>prepare_s</a>(soself);
<a name='L1352'>    <b>return</b> ret;
<a name='L1353'><font color='red'>}</font>
<a name='L1354'>
<a name='L1355'><b>static</b> <b>void</b>
<a name='L1356'><a href='../S/2613.html#L1699' title='Refered from 1699 in Modules/_struct.c.'>s_dealloc</a>(PyStructObject *s)
<a name='L1357'><font color='red'>{</font>
<a name='L1358'>    <b>if</b> (s-&gt;weakreflist != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1359'>        <a href='../S/2830.html#L872' title='Defined at 872 in Objects/weakrefobject.c.'>PyObject_ClearWeakRefs</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)s);
<a name='L1360'>    <b>if</b> (s-&gt;s_codes != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1361'>        PyMem_FREE(s-&gt;s_codes);
<a name='L1362'>    <font color='red'>}</font>
<a name='L1363'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(s-&gt;s_format);
<a name='L1364'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(s)-&gt;tp_free((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)s);
<a name='L1365'><font color='red'>}</font>
<a name='L1366'>
<a name='L1367'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1368'><a href='../R/10099.html' title='Multiple refered from 2 places.'>s_unpack_internal</a>(PyStructObject *soself, <b>char</b> *startfrom) <font color='red'>{</font>
<a name='L1369'>    <a href='../S/2613.html#L29' title='Defined at 29 in Modules/_struct.c.'>formatcode</a> *<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>;
<a name='L1370'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = 0;
<a name='L1371'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(soself-&gt;s_len);
<a name='L1372'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1373'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1374'>
<a name='L1375'>    <b>for</b> (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> = soself-&gt;s_codes; <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;fmtdef != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>++) <font color='red'>{</font>
<a name='L1376'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L1377'>        <b>const</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> *e = <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;fmtdef;
<a name='L1378'>        <b>const</b> <b>char</b> *res = startfrom + <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;offset;
<a name='L1379'>        <b>if</b> (e-&gt;format == 's') <font color='red'>{</font>
<a name='L1380'>            v = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(res, <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;size);
<a name='L1381'>        <font color='red'>}</font> <b>else</b> <b>if</b> (e-&gt;format == 'p') <font color='red'>{</font>
<a name='L1382'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = *(<b>unsigned</b> <b>char</b>*)res;
<a name='L1383'>            <b>if</b> (n &gt;= <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;size)
<a name='L1384'>                n = <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;size - 1;
<a name='L1385'>            v = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(res + 1, n);
<a name='L1386'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1387'>            v = e-&gt;<a href='../S/2613.html#L1871' title='Defined at 1871 in Modules/_struct.c.'>unpack</a>(res, e);
<a name='L1388'>        <font color='red'>}</font>
<a name='L1389'>        <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1390'>            <b>goto</b> fail;
<a name='L1391'>        PyTuple_SET_ITEM(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, i++, v);
<a name='L1392'>    <font color='red'>}</font>
<a name='L1393'>
<a name='L1394'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1395'>fail:
<a name='L1396'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1397'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1398'><font color='red'>}</font>
<a name='L1399'>
<a name='L1400'>
<a name='L1401'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(s_unpack__doc__,
<a name='L1402'>"S.unpack(buffer) -&gt; (v1, v2, ...)\n\
<a name='L1403'>\n\
<a name='L1404'>Return a tuple containing values unpacked according to the format\n\
<a name='L1405'>string S.format.  Requires len(buffer) == S.size.  See help(struct)\n\
<a name='L1406'>for more on format strings.");
<a name='L1407'>
<a name='L1408'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1409'><a href='../R/10097.html' title='Multiple refered from 2 places.'>s_unpack</a>(PyObject *self, PyObject *input)
<a name='L1410'><font color='red'>{</font>
<a name='L1411'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> vbuf;
<a name='L1412'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1413'>    <a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *soself = (<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *)self;
<a name='L1414'>
<a name='L1415'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2613.html#L43' title='Defined at 43 in Modules/_struct.c.'>PyStruct_Check</a>(self));
<a name='L1416'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(soself-&gt;s_codes != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1417'>    <b>if</b> (<a href='../S/2775.html#L330' title='Defined at 330 in Objects/abstract.c.'>PyObject_GetBuffer</a>(input, &amp;vbuf, <a href='../S/544.html#L169' title='Defined at 169 in Include/object.h.'>PyBUF_SIMPLE</a>) &lt; 0)
<a name='L1418'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1419'>    <b>if</b> (vbuf.len != soself-&gt;s_size) <font color='red'>{</font>
<a name='L1420'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(StructError,
<a name='L1421'>                     "unpack requires a bytes object of length %zd",
<a name='L1422'>                     soself-&gt;s_size);
<a name='L1423'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;vbuf);
<a name='L1424'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1425'>    <font color='red'>}</font>
<a name='L1426'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2613.html#L1368' title='Defined at 1368 in Modules/_struct.c.'>s_unpack_internal</a>(soself, vbuf.buf);
<a name='L1427'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;vbuf);
<a name='L1428'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1429'><font color='red'>}</font>
<a name='L1430'>
<a name='L1431'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(s_unpack_from__doc__,
<a name='L1432'>"S.unpack_from(buffer, offset=0) -&gt; (v1, v2, ...)\n\
<a name='L1433'>\n\
<a name='L1434'>Return a tuple containing values unpacked according to the format\n\
<a name='L1435'>string S.format.  Requires len(buffer[offset:]) &gt;= S.size.  See\n\
<a name='L1436'>help(struct) for more on format strings.");
<a name='L1437'>
<a name='L1438'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1439'><a href='../R/10098.html' title='Multiple refered from 2 places.'>s_unpack_from</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L1440'><font color='red'>{</font>
<a name='L1441'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"buffer", "offset", 0<font color='red'>}</font>;
<a name='L1442'>
<a name='L1443'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *input;
<a name='L1444'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> offset = 0;
<a name='L1445'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> vbuf;
<a name='L1446'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1447'>    <a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *soself = (<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *)self;
<a name='L1448'>
<a name='L1449'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2613.html#L43' title='Defined at 43 in Modules/_struct.c.'>PyStruct_Check</a>(self));
<a name='L1450'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(soself-&gt;s_codes != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1451'>
<a name='L1452'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds,
<a name='L1453'>                                     "O|n:unpack_from", kwlist,
<a name='L1454'>                                     &amp;input, &amp;offset))
<a name='L1455'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1456'>    <b>if</b> (<a href='../S/2775.html#L330' title='Defined at 330 in Objects/abstract.c.'>PyObject_GetBuffer</a>(input, &amp;vbuf, <a href='../S/544.html#L169' title='Defined at 169 in Include/object.h.'>PyBUF_SIMPLE</a>) &lt; 0)
<a name='L1457'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1458'>    <b>if</b> (offset &lt; 0)
<a name='L1459'>        offset += vbuf.len;
<a name='L1460'>    <b>if</b> (offset &lt; 0 || vbuf.len - offset &lt; soself-&gt;s_size) <font color='red'>{</font>
<a name='L1461'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(StructError,
<a name='L1462'>            "unpack_from requires a buffer of at least %zd bytes",
<a name='L1463'>            soself-&gt;s_size);
<a name='L1464'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;vbuf);
<a name='L1465'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1466'>    <font color='red'>}</font>
<a name='L1467'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2613.html#L1368' title='Defined at 1368 in Modules/_struct.c.'>s_unpack_internal</a>(soself, (<b>char</b>*)vbuf.buf + offset);
<a name='L1468'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;vbuf);
<a name='L1469'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1470'><font color='red'>}</font>
<a name='L1471'>
<a name='L1472'>
<a name='L1473'><i><font color='green'>/*</font></i>
<a name='L1474'><i><font color='green'> * Guts of the pack function.</font></i>
<a name='L1475'><i><font color='green'> *</font></i>
<a name='L1476'><i><font color='green'> * Takes a struct object, a tuple of arguments, and offset in that tuple of</font></i>
<a name='L1477'><i><font color='green'> * argument for where to start processing the arguments for packing, and a</font></i>
<a name='L1478'><i><font color='green'> * character buffer for writing the packed string.  The caller must insure</font></i>
<a name='L1479'><i><font color='green'> * that the buffer may contain the required length for packing the arguments.</font></i>
<a name='L1480'><i><font color='green'> * 0 is returned on success, 1 is returned if there is an error.</font></i>
<a name='L1481'><i><font color='green'> *</font></i>
<a name='L1482'><i><font color='green'> */</font></i>
<a name='L1483'><b>static</b> <b>int</b>
<a name='L1484'><a href='../R/10090.html' title='Multiple refered from 2 places.'>s_pack_internal</a>(PyStructObject *soself, PyObject *args, <b>int</b> offset, <b>char</b>* buf)
<a name='L1485'><font color='red'>{</font>
<a name='L1486'>    <a href='../S/2613.html#L29' title='Defined at 29 in Modules/_struct.c.'>formatcode</a> *<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>;
<a name='L1487'>    <i><font color='green'>/* XXX(nnorwitz): why does i need to be a local?  can we use</font></i>
<a name='L1488'><i><font color='green'>       the offset parameter or do we need the wider width? */</font></i>
<a name='L1489'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1490'>
<a name='L1491'>    memset(buf, '\0', soself-&gt;s_size);
<a name='L1492'>    i = offset;
<a name='L1493'>    <b>for</b> (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> = soself-&gt;s_codes; <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;fmtdef != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>++) <font color='red'>{</font>
<a name='L1494'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n;
<a name='L1495'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v = PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, i++);
<a name='L1496'>        <b>const</b> <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> *e = <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;fmtdef;
<a name='L1497'>        <b>char</b> *res = buf + <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;offset;
<a name='L1498'>        <b>if</b> (e-&gt;format == 's') <font color='red'>{</font>
<a name='L1499'>            <b>int</b> isstring;
<a name='L1500'>            <b>void</b> *p;
<a name='L1501'>            isstring = PyBytes_Check(v);
<a name='L1502'>            <b>if</b> (!isstring &amp;&amp; !PyByteArray_Check(v)) <font color='red'>{</font>
<a name='L1503'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L1504'>                                "argument for 's' must be a bytes object");
<a name='L1505'>                <b>return</b> -1;
<a name='L1506'>            <font color='red'>}</font>
<a name='L1507'>            <b>if</b> (isstring) <font color='red'>{</font>
<a name='L1508'>                n = PyBytes_GET_SIZE(v);
<a name='L1509'>                p = PyBytes_AS_STRING(v);
<a name='L1510'>            <font color='red'>}</font>
<a name='L1511'>            <b>else</b> <font color='red'>{</font>
<a name='L1512'>                n = PyByteArray_GET_SIZE(v);
<a name='L1513'>                p = PyByteArray_AS_STRING(v);
<a name='L1514'>            <font color='red'>}</font>
<a name='L1515'>            <b>if</b> (n &gt; <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;size)
<a name='L1516'>                n = <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;size;
<a name='L1517'>            <b>if</b> (n &gt; 0)
<a name='L1518'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(res, p, n);
<a name='L1519'>        <font color='red'>}</font> <b>else</b> <b>if</b> (e-&gt;format == 'p') <font color='red'>{</font>
<a name='L1520'>            <b>int</b> isstring;
<a name='L1521'>            <b>void</b> *p;
<a name='L1522'>            isstring = PyBytes_Check(v);
<a name='L1523'>            <b>if</b> (!isstring &amp;&amp; !PyByteArray_Check(v)) <font color='red'>{</font>
<a name='L1524'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L1525'>                                "argument for 'p' must be a bytes object");
<a name='L1526'>                <b>return</b> -1;
<a name='L1527'>            <font color='red'>}</font>
<a name='L1528'>            <b>if</b> (isstring) <font color='red'>{</font>
<a name='L1529'>                n = PyBytes_GET_SIZE(v);
<a name='L1530'>                p = PyBytes_AS_STRING(v);
<a name='L1531'>            <font color='red'>}</font>
<a name='L1532'>            <b>else</b> <font color='red'>{</font>
<a name='L1533'>                n = PyByteArray_GET_SIZE(v);
<a name='L1534'>                p = PyByteArray_AS_STRING(v);
<a name='L1535'>            <font color='red'>}</font>
<a name='L1536'>            <b>if</b> (n &gt; (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;size - 1))
<a name='L1537'>                n = <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a>-&gt;size - 1;
<a name='L1538'>            <b>if</b> (n &gt; 0)
<a name='L1539'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(res + 1, p, n);
<a name='L1540'>            <b>if</b> (n &gt; 255)
<a name='L1541'>                n = 255;
<a name='L1542'>            *res = <a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(n, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>, <b>unsigned</b> <b>char</b>);
<a name='L1543'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1544'>            <b>if</b> (e-&gt;<a href='../S/2613.html#L1804' title='Defined at 1804 in Modules/_struct.c.'>pack</a>(res, v, e) &lt; 0) <font color='red'>{</font>
<a name='L1545'>                <b>if</b> (PyLong_Check(v) &amp;&amp; <a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_OverflowError))
<a name='L1546'>                    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(StructError,
<a name='L1547'>                                    "long too large to convert to int");
<a name='L1548'>                <b>return</b> -1;
<a name='L1549'>            <font color='red'>}</font>
<a name='L1550'>        <font color='red'>}</font>
<a name='L1551'>    <font color='red'>}</font>
<a name='L1552'>
<a name='L1553'>    <i><font color='green'>/* Success */</font></i>
<a name='L1554'>    <b>return</b> 0;
<a name='L1555'><font color='red'>}</font>
<a name='L1556'>
<a name='L1557'>
<a name='L1558'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(s_pack__doc__,
<a name='L1559'>"S.pack(v1, v2, ...) -&gt; bytes\n\
<a name='L1560'>\n\
<a name='L1561'>Return a bytes object containing values v1, v2, ... packed according\n\
<a name='L1562'>to the format string S.format.  See help(struct) for more on format\n\
<a name='L1563'>strings.");
<a name='L1564'>
<a name='L1565'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1566'><a href='../R/10089.html' title='Multiple refered from 2 places.'>s_pack</a>(PyObject *self, PyObject *args)
<a name='L1567'><font color='red'>{</font>
<a name='L1568'>    <a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *soself;
<a name='L1569'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1570'>
<a name='L1571'>    <i><font color='green'>/* Validate arguments. */</font></i>
<a name='L1572'>    soself = (<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *)self;
<a name='L1573'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2613.html#L43' title='Defined at 43 in Modules/_struct.c.'>PyStruct_Check</a>(self));
<a name='L1574'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(soself-&gt;s_codes != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1575'>    <b>if</b> (PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) != soself-&gt;s_len)
<a name='L1576'>    <font color='red'>{</font>
<a name='L1577'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(StructError,
<a name='L1578'>            "pack requires exactly %zd arguments", soself-&gt;s_len);
<a name='L1579'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1580'>    <font color='red'>}</font>
<a name='L1581'>
<a name='L1582'>    <i><font color='green'>/* Allocate a new string */</font></i>
<a name='L1583'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>((<b>char</b> *)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, soself-&gt;s_size);
<a name='L1584'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1585'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1586'>
<a name='L1587'>    <i><font color='green'>/* Call the guts */</font></i>
<a name='L1588'>    <b>if</b> ( <a href='../S/2613.html#L1484' title='Defined at 1484 in Modules/_struct.c.'>s_pack_internal</a>(soself, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 0, PyBytes_AS_STRING(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)) != 0 ) <font color='red'>{</font>
<a name='L1589'>        Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1590'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1591'>    <font color='red'>}</font>
<a name='L1592'>
<a name='L1593'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1594'><font color='red'>}</font>
<a name='L1595'>
<a name='L1596'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(s_pack_into__doc__,
<a name='L1597'>"S.pack_into(buffer, offset, v1, v2, ...)\n\
<a name='L1598'>\n\
<a name='L1599'>Pack the values v1, v2, ... according to the format string S.format\n\
<a name='L1600'>and write the packed bytes into the writable buffer buf starting at\n\
<a name='L1601'>offset.  Note that the offset is a required argument.  See\n\
<a name='L1602'>help(struct) for more on format strings.");
<a name='L1603'>
<a name='L1604'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1605'><a href='../R/10091.html' title='Multiple refered from 2 places.'>s_pack_into</a>(PyObject *self, PyObject *args)
<a name='L1606'><font color='red'>{</font>
<a name='L1607'>    <a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *soself;
<a name='L1608'>    <b>char</b> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L1609'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> buffer_len, offset;
<a name='L1610'>
<a name='L1611'>    <i><font color='green'>/* Validate arguments.  +1 is for the first arg as buffer. */</font></i>
<a name='L1612'>    soself = (<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *)self;
<a name='L1613'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2613.html#L43' title='Defined at 43 in Modules/_struct.c.'>PyStruct_Check</a>(self));
<a name='L1614'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(soself-&gt;s_codes != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1615'>    <b>if</b> (PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) != (soself-&gt;s_len + 2))
<a name='L1616'>    <font color='red'>{</font>
<a name='L1617'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(StructError,
<a name='L1618'>                     "pack_into requires exactly %zd arguments",
<a name='L1619'>                     (soself-&gt;s_len + 2));
<a name='L1620'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1621'>    <font color='red'>}</font>
<a name='L1622'>
<a name='L1623'>    <i><font color='green'>/* Extract a writable memory buffer from the first argument */</font></i>
<a name='L1624'>    <b>if</b> ( <a href='../S/2775.html#L299' title='Defined at 299 in Objects/abstract.c.'>PyObject_AsWriteBuffer</a>(PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 0),
<a name='L1625'>                                                            (<b>void</b>**)&amp;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, &amp;buffer_len) == -1 ) <font color='red'>{</font>
<a name='L1626'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1627'>    <font color='red'>}</font>
<a name='L1628'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>( buffer_len &gt;= 0 );
<a name='L1629'>
<a name='L1630'>    <i><font color='green'>/* Extract the offset from the first argument */</font></i>
<a name='L1631'>    offset = <a href='../S/2775.html#L1227' title='Defined at 1227 in Objects/abstract.c.'>PyNumber_AsSsize_t</a>(PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 1), PyExc_IndexError);
<a name='L1632'>    <b>if</b> (offset == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1633'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1634'>
<a name='L1635'>    <i><font color='green'>/* Support negative offsets. */</font></i>
<a name='L1636'>    <b>if</b> (offset &lt; 0)
<a name='L1637'>        offset += buffer_len;
<a name='L1638'>
<a name='L1639'>    <i><font color='green'>/* Check boundaries */</font></i>
<a name='L1640'>    <b>if</b> (offset &lt; 0 || (buffer_len - offset) &lt; soself-&gt;s_size) <font color='red'>{</font>
<a name='L1641'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(StructError,
<a name='L1642'>                     "pack_into requires a buffer of at least %zd bytes",
<a name='L1643'>                     soself-&gt;s_size);
<a name='L1644'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1645'>    <font color='red'>}</font>
<a name='L1646'>
<a name='L1647'>    <i><font color='green'>/* Call the guts */</font></i>
<a name='L1648'>    <b>if</b> ( <a href='../S/2613.html#L1484' title='Defined at 1484 in Modules/_struct.c.'>s_pack_internal</a>(soself, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 2, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + offset) != 0 ) <font color='red'>{</font>
<a name='L1649'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1650'>    <font color='red'>}</font>
<a name='L1651'>
<a name='L1652'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L1653'><font color='red'>}</font>
<a name='L1654'>
<a name='L1655'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1656'><a href='../S/2613.html#L1688' title='Refered from 1688 in Modules/_struct.c.'>s_get_format</a>(PyStructObject *self, <b>void</b> *unused)
<a name='L1657'><font color='red'>{</font>
<a name='L1658'>    Py_INCREF(self-&gt;s_format);
<a name='L1659'>    <b>return</b> self-&gt;s_format;
<a name='L1660'><font color='red'>}</font>
<a name='L1661'>
<a name='L1662'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1663'><a href='../S/2613.html#L1689' title='Refered from 1689 in Modules/_struct.c.'>s_get_size</a>(PyStructObject *self, <b>void</b> *unused)
<a name='L1664'><font color='red'>{</font>
<a name='L1665'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(self-&gt;s_size);
<a name='L1666'><font color='red'>}</font>
<a name='L1667'>
<a name='L1668'><i><font color='green'>/* List of functions */</font></i>
<a name='L1669'>
<a name='L1670'><b>static</b> <b>struct</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> s_methods[] = <font color='red'>{</font>
<a name='L1671'>    <font color='red'>{</font>"pack",            <a href='../S/2613.html#L1566' title='Defined at 1566 in Modules/_struct.c.'>s_pack</a>,         <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, s_pack__doc__<font color='red'>}</font>,
<a name='L1672'>    <font color='red'>{</font>"pack_into",       <a href='../S/2613.html#L1605' title='Defined at 1605 in Modules/_struct.c.'>s_pack_into</a>,    <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, s_pack_into__doc__<font color='red'>}</font>,
<a name='L1673'>    <font color='red'>{</font>"unpack",          <a href='../S/2613.html#L1409' title='Defined at 1409 in Modules/_struct.c.'>s_unpack</a>,       METH_O, s_unpack__doc__<font color='red'>}</font>,
<a name='L1674'>    <font color='red'>{</font>"unpack_from",     (PyCFunction)<a href='../S/2613.html#L1439' title='Defined at 1439 in Modules/_struct.c.'>s_unpack_from</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS,
<a name='L1675'>                    s_unpack_from__doc__<font color='red'>}</font>,
<a name='L1676'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,       <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>          <i><font color='green'>/* sentinel */</font></i>
<a name='L1677'><font color='red'>}</font>;
<a name='L1678'>
<a name='L1679'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(s__doc__,
<a name='L1680'>"Struct(fmt) --&gt; compiled struct object\n"
<a name='L1681'>"\n"
<a name='L1682'>"Return a new Struct object which writes and reads binary data according to\n"
<a name='L1683'>"the format string fmt.  See help(struct) for more on format strings.");
<a name='L1684'>
<a name='L1685'><font color='darkred'>#define</font> <a href='../R/2175.html' title='Multiple refered from 57 places.'>OFF</a>(x) <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a>, x)
<a name='L1686'>
<a name='L1687'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> s_getsetlist[] = <font color='red'>{</font>
<a name='L1688'>    <font color='red'>{</font>"format", (getter)<a href='../S/2613.html#L1656' title='Defined at 1656 in Modules/_struct.c.'>s_get_format</a>, (setter)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, "struct format string", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1689'>    <font color='red'>{</font>"size", (getter)<a href='../S/2613.html#L1663' title='Defined at 1663 in Modules/_struct.c.'>s_get_size</a>, (setter)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, "struct size in bytes", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1690'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font> <i><font color='green'>/* sentinel */</font></i>
<a name='L1691'><font color='red'>}</font>;
<a name='L1692'>
<a name='L1693'><b>static</b>
<a name='L1694'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyStructType = <font color='red'>{</font>
<a name='L1695'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L1696'>    "Struct",
<a name='L1697'>    <b>sizeof</b>(<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a>),
<a name='L1698'>    0,
<a name='L1699'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2613.html#L1356' title='Defined at 1356 in Modules/_struct.c.'>s_dealloc</a>,      <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L1700'>    0,                                          <i><font color='green'>/* tp_print */</font></i>
<a name='L1701'>    0,                                          <i><font color='green'>/* tp_getattr */</font></i>
<a name='L1702'>    0,                                          <i><font color='green'>/* tp_setattr */</font></i>
<a name='L1703'>    0,                                          <i><font color='green'>/* tp_reserved */</font></i>
<a name='L1704'>    0,                                          <i><font color='green'>/* tp_repr */</font></i>
<a name='L1705'>    0,                                          <i><font color='green'>/* tp_as_number */</font></i>
<a name='L1706'>    0,                                          <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L1707'>    0,                                          <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L1708'>    0,                                          <i><font color='green'>/* tp_hash */</font></i>
<a name='L1709'>    0,                                          <i><font color='green'>/* tp_call */</font></i>
<a name='L1710'>    0,                                          <i><font color='green'>/* tp_str */</font></i>
<a name='L1711'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,            <i><font color='green'>/* tp_getattro */</font></i>
<a name='L1712'>    <a href='../S/2803.html#L1130' title='Defined at 1130 in Objects/object.c.'>PyObject_GenericSetAttr</a>,            <i><font color='green'>/* tp_setattro */</font></i>
<a name='L1713'>    0,                                          <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L1714'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE, <i><font color='green'>/* tp_flags */</font></i>
<a name='L1715'>    s__doc__,                           <i><font color='green'>/* tp_doc */</font></i>
<a name='L1716'>    0,                                          <i><font color='green'>/* tp_traverse */</font></i>
<a name='L1717'>    0,                                          <i><font color='green'>/* tp_clear */</font></i>
<a name='L1718'>    0,                                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L1719'>    <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a>, weakreflist),      <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L1720'>    0,                                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L1721'>    0,                                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L1722'>    s_methods,                          <i><font color='green'>/* tp_methods */</font></i>
<a name='L1723'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,                               <i><font color='green'>/* tp_members */</font></i>
<a name='L1724'>    s_getsetlist,               <i><font color='green'>/* tp_getset */</font></i>
<a name='L1725'>    0,                                          <i><font color='green'>/* tp_base */</font></i>
<a name='L1726'>    0,                                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L1727'>    0,                                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L1728'>    0,                                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L1729'>    0,                                          <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L1730'>    <a href='../S/2613.html#L1317' title='Defined at 1317 in Modules/_struct.c.'>s_init</a>,                             <i><font color='green'>/* tp_init */</font></i>
<a name='L1731'>    <a href='../S/2824.html#L700' title='Defined at 700 in Objects/typeobject.c.'>PyType_GenericAlloc</a>,<i><font color='green'>/* tp_alloc */</font></i>
<a name='L1732'>    <a href='../S/2613.html#L1298' title='Defined at 1298 in Modules/_struct.c.'>s_new</a>,                              <i><font color='green'>/* tp_new */</font></i>
<a name='L1733'>    PyObject_Del,               <i><font color='green'>/* tp_free */</font></i>
<a name='L1734'><font color='red'>}</font>;
<a name='L1735'>
<a name='L1736'>
<a name='L1737'><i><font color='green'>/* ---- Standalone functions  ---- */</font></i>
<a name='L1738'>
<a name='L1739'><font color='darkred'>#define</font> <a href='../S/2613.html#L1761' title='Refered from 1761 in Modules/_struct.c.'>MAXCACHE</a> 100
<a name='L1740'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cache = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1741'>
<a name='L1742'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1743'><a href='../R/6537.html' title='Multiple refered from 5 places.'>cache_struct</a>(PyObject *fmt)
<a name='L1744'><font color='red'>{</font>
<a name='L1745'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> * s_object;
<a name='L1746'>
<a name='L1747'>    <b>if</b> (cache == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1748'>        cache = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L1749'>        <b>if</b> (cache == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1750'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1751'>    <font color='red'>}</font>
<a name='L1752'>
<a name='L1753'>    s_object = <a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(cache, fmt);
<a name='L1754'>    <b>if</b> (s_object != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1755'>        Py_INCREF(s_object);
<a name='L1756'>        <b>return</b> s_object;
<a name='L1757'>    <font color='red'>}</font>
<a name='L1758'>
<a name='L1759'>    s_object = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)(&amp;PyStructType), fmt, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1760'>    <b>if</b> (s_object != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1761'>        <b>if</b> (<a href='../S/2787.html#L1620' title='Defined at 1620 in Objects/dictobject.c.'>PyDict_Size</a>(cache) &gt;= <a href='../S/2613.html#L1739' title='Defined at 1739 in Modules/_struct.c.'>MAXCACHE</a>)
<a name='L1762'>            <a href='../S/2787.html#L870' title='Defined at 870 in Objects/dictobject.c.'>PyDict_Clear</a>(cache);
<a name='L1763'>        <i><font color='green'>/* Attempt to cache the result */</font></i>
<a name='L1764'>        <b>if</b> (<a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(cache, fmt, s_object) == -1)
<a name='L1765'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1766'>    <font color='red'>}</font>
<a name='L1767'>    <b>return</b> s_object;
<a name='L1768'><font color='red'>}</font>
<a name='L1769'>
<a name='L1770'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(clearcache_doc,
<a name='L1771'>"Clear the internal cache.");
<a name='L1772'>
<a name='L1773'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1774'><a href='../S/2613.html#L1920' title='Refered from 1920 in Modules/_struct.c.'>clearcache</a>(PyObject *self)
<a name='L1775'><font color='red'>{</font>
<a name='L1776'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(cache);
<a name='L1777'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L1778'><font color='red'>}</font>
<a name='L1779'>
<a name='L1780'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(calcsize_doc,
<a name='L1781'>"calcsize(fmt) -&gt; integer\n\
<a name='L1782'>\n\
<a name='L1783'>Return size in bytes of the struct described by the format string fmt.");
<a name='L1784'>
<a name='L1785'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1786'><a href='../S/2613.html#L1921' title='Refered from 1921 in Modules/_struct.c.'>calcsize</a>(PyObject *self, PyObject *fmt)
<a name='L1787'><font color='red'>{</font>
<a name='L1788'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n;
<a name='L1789'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s_object = <a href='../S/2613.html#L1743' title='Defined at 1743 in Modules/_struct.c.'>cache_struct</a>(fmt);
<a name='L1790'>    <b>if</b> (s_object == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1791'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1792'>    n = ((<a href='../S/2613.html#L40' title='Defined at 40 in Modules/_struct.c.'>PyStructObject</a> *)s_object)-&gt;s_size;
<a name='L1793'>    Py_DECREF(s_object);
<a name='L1794'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(n);
<a name='L1795'><font color='red'>}</font>
<a name='L1796'>
<a name='L1797'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pack_doc,
<a name='L1798'>"pack(fmt, v1, v2, ...) -&gt; bytes\n\
<a name='L1799'>\n\
<a name='L1800'>Return a bytes object containing the values v1, v2, ... packed according\n\
<a name='L1801'>to the format string fmt.  See help(struct) for more on format strings.");
<a name='L1802'>
<a name='L1803'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1804'><a href='../R/9438.html' title='Multiple refered from 11 places.'>pack</a>(PyObject *self, PyObject *args)
<a name='L1805'><font color='red'>{</font>
<a name='L1806'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s_object, *fmt, *newargs, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1807'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L1808'>
<a name='L1809'>    <b>if</b> (n == 0) <font color='red'>{</font>
<a name='L1810'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "missing format argument");
<a name='L1811'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1812'>    <font color='red'>}</font>
<a name='L1813'>    fmt = PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 0);
<a name='L1814'>    newargs = <a href='../S/2823.html#L400' title='Defined at 400 in Objects/tupleobject.c.'>PyTuple_GetSlice</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 1, n);
<a name='L1815'>    <b>if</b> (newargs == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1816'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1817'>
<a name='L1818'>    s_object = <a href='../S/2613.html#L1743' title='Defined at 1743 in Modules/_struct.c.'>cache_struct</a>(fmt);
<a name='L1819'>    <b>if</b> (s_object == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1820'>        Py_DECREF(newargs);
<a name='L1821'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1822'>    <font color='red'>}</font>
<a name='L1823'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2613.html#L1566' title='Defined at 1566 in Modules/_struct.c.'>s_pack</a>(s_object, newargs);
<a name='L1824'>    Py_DECREF(newargs);
<a name='L1825'>    Py_DECREF(s_object);
<a name='L1826'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1827'><font color='red'>}</font>
<a name='L1828'>
<a name='L1829'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pack_into_doc,
<a name='L1830'>"pack_into(fmt, buffer, offset, v1, v2, ...)\n\
<a name='L1831'>\n\
<a name='L1832'>Pack the values v1, v2, ... according to the format string fmt and write\n\
<a name='L1833'>the packed bytes into the writable buffer buf starting at offset.  Note\n\
<a name='L1834'>that the offset is a required argument.  See help(struct) for more\n\
<a name='L1835'>on format strings.");
<a name='L1836'>
<a name='L1837'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1838'><a href='../S/2613.html#L1923' title='Refered from 1923 in Modules/_struct.c.'>pack_into</a>(PyObject *self, PyObject *args)
<a name='L1839'><font color='red'>{</font>
<a name='L1840'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s_object, *fmt, *newargs, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1841'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L1842'>
<a name='L1843'>    <b>if</b> (n == 0) <font color='red'>{</font>
<a name='L1844'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "missing format argument");
<a name='L1845'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1846'>    <font color='red'>}</font>
<a name='L1847'>    fmt = PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 0);
<a name='L1848'>    newargs = <a href='../S/2823.html#L400' title='Defined at 400 in Objects/tupleobject.c.'>PyTuple_GetSlice</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 1, n);
<a name='L1849'>    <b>if</b> (newargs == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1850'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1851'>
<a name='L1852'>    s_object = <a href='../S/2613.html#L1743' title='Defined at 1743 in Modules/_struct.c.'>cache_struct</a>(fmt);
<a name='L1853'>    <b>if</b> (s_object == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1854'>        Py_DECREF(newargs);
<a name='L1855'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1856'>    <font color='red'>}</font>
<a name='L1857'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2613.html#L1605' title='Defined at 1605 in Modules/_struct.c.'>s_pack_into</a>(s_object, newargs);
<a name='L1858'>    Py_DECREF(newargs);
<a name='L1859'>    Py_DECREF(s_object);
<a name='L1860'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1861'><font color='red'>}</font>
<a name='L1862'>
<a name='L1863'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(unpack_doc,
<a name='L1864'>"unpack(fmt, buffer) -&gt; (v1, v2, ...)\n\
<a name='L1865'>\n\
<a name='L1866'>Return a tuple containing values unpacked according to the format string\n\
<a name='L1867'>fmt.  Requires len(buffer) == calcsize(fmt). See help(struct) for more\n\
<a name='L1868'>on format strings.");
<a name='L1869'>
<a name='L1870'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1871'><a href='../R/11172.html' title='Multiple refered from 4 places.'>unpack</a>(PyObject *self, PyObject *args)
<a name='L1872'><font color='red'>{</font>
<a name='L1873'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s_object, *fmt, *inputstr, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1874'>
<a name='L1875'>    <b>if</b> (!<a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "unpack", 2, 2, &amp;fmt, &amp;inputstr))
<a name='L1876'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1877'>
<a name='L1878'>    s_object = <a href='../S/2613.html#L1743' title='Defined at 1743 in Modules/_struct.c.'>cache_struct</a>(fmt);
<a name='L1879'>    <b>if</b> (s_object == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1880'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1881'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2613.html#L1409' title='Defined at 1409 in Modules/_struct.c.'>s_unpack</a>(s_object, inputstr);
<a name='L1882'>    Py_DECREF(s_object);
<a name='L1883'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1884'><font color='red'>}</font>
<a name='L1885'>
<a name='L1886'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(unpack_from_doc,
<a name='L1887'>"unpack_from(fmt, buffer, offset=0) -&gt; (v1, v2, ...)\n\
<a name='L1888'>\n\
<a name='L1889'>Return a tuple containing values unpacked according to the format string\n\
<a name='L1890'>fmt.  Requires len(buffer[offset:]) &gt;= calcsize(fmt).  See help(struct)\n\
<a name='L1891'>for more on format strings.");
<a name='L1892'>
<a name='L1893'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1894'><a href='../S/2613.html#L1925' title='Refered from 1925 in Modules/_struct.c.'>unpack_from</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L1895'><font color='red'>{</font>
<a name='L1896'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s_object, *fmt, *newargs, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1897'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L1898'>
<a name='L1899'>    <b>if</b> (n == 0) <font color='red'>{</font>
<a name='L1900'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "missing format argument");
<a name='L1901'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1902'>    <font color='red'>}</font>
<a name='L1903'>    fmt = PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 0);
<a name='L1904'>    newargs = <a href='../S/2823.html#L400' title='Defined at 400 in Objects/tupleobject.c.'>PyTuple_GetSlice</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, 1, n);
<a name='L1905'>    <b>if</b> (newargs == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1906'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1907'>
<a name='L1908'>    s_object = <a href='../S/2613.html#L1743' title='Defined at 1743 in Modules/_struct.c.'>cache_struct</a>(fmt);
<a name='L1909'>    <b>if</b> (s_object == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1910'>        Py_DECREF(newargs);
<a name='L1911'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1912'>    <font color='red'>}</font>
<a name='L1913'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2613.html#L1439' title='Defined at 1439 in Modules/_struct.c.'>s_unpack_from</a>(s_object, newargs, kwds);
<a name='L1914'>    Py_DECREF(newargs);
<a name='L1915'>    Py_DECREF(s_object);
<a name='L1916'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1917'><font color='red'>}</font>
<a name='L1918'>
<a name='L1919'><b>static</b> <b>struct</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> module_functions[] = <font color='red'>{</font>
<a name='L1920'>    <font color='red'>{</font>"_clearcache",     (PyCFunction)<a href='../S/2613.html#L1774' title='Defined at 1774 in Modules/_struct.c.'>clearcache</a>,        <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,    clearcache_doc<font color='red'>}</font>,
<a name='L1921'>    <font color='red'>{</font>"calcsize",        <a href='../S/2613.html#L1786' title='Defined at 1786 in Modules/_struct.c.'>calcsize</a>,       METH_O, calcsize_doc<font color='red'>}</font>,
<a name='L1922'>    <font color='red'>{</font>"pack",            <a href='../S/2613.html#L1804' title='Defined at 1804 in Modules/_struct.c.'>pack</a>,           <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   pack_doc<font color='red'>}</font>,
<a name='L1923'>    <font color='red'>{</font>"pack_into",       <a href='../S/2613.html#L1838' title='Defined at 1838 in Modules/_struct.c.'>pack_into</a>,      <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   pack_into_doc<font color='red'>}</font>,
<a name='L1924'>    <font color='red'>{</font>"unpack",          <a href='../S/2613.html#L1871' title='Defined at 1871 in Modules/_struct.c.'>unpack</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   unpack_doc<font color='red'>}</font>,
<a name='L1925'>    <font color='red'>{</font>"unpack_from",     (PyCFunction)<a href='../S/2613.html#L1894' title='Defined at 1894 in Modules/_struct.c.'>unpack_from</a>,
<a name='L1926'>                    <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS,         unpack_from_doc<font color='red'>}</font>,
<a name='L1927'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,       <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>          <i><font color='green'>/* sentinel */</font></i>
<a name='L1928'><font color='red'>}</font>;
<a name='L1929'>
<a name='L1930'>
<a name='L1931'><i><font color='green'>/* Module initialization */</font></i>
<a name='L1932'>
<a name='L1933'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(module_doc,
<a name='L1934'>"Functions to convert between Python values and C structs.\n\
<a name='L1935'>Python bytes objects are used to hold the data representing the C struct\n\
<a name='L1936'>and also as format strings (explained below) to describe the layout of data\n\
<a name='L1937'>in the C struct.\n\
<a name='L1938'>\n\
<a name='L1939'>The optional first format char indicates byte order, size and alignment:\n\
<a name='L1940'>  @: native order, size &amp; alignment (default)\n\
<a name='L1941'>  =: native order, std. size &amp; alignment\n\
<a name='L1942'>  &lt;: little-endian, std. size &amp; alignment\n\
<a name='L1943'>  &gt;: big-endian, std. size &amp; alignment\n\
<a name='L1944'>  !: same as &gt;\n\
<a name='L1945'>\n\
<a name='L1946'>The remaining chars indicate types of args and must match exactly;\n\
<a name='L1947'>these can be preceded by a decimal repeat count:\n\
<a name='L1948'>  x: pad byte (no data); c:char; b:signed byte; B:unsigned byte;\n\
<a name='L1949'>  ?: _Bool (requires C99; if not available, char is used instead)\n\
<a name='L1950'>  h:short; H:unsigned short; i:int; I:unsigned int;\n\
<a name='L1951'>  l:long; L:unsigned long; f:float; d:double.\n\
<a name='L1952'>Special cases (preceding decimal count indicates length):\n\
<a name='L1953'>  s:string (array of char); p: pascal string (with count byte).\n\
<a name='L1954'>Special case (only available in native format):\n\
<a name='L1955'>  P:an integer type that is wide enough to hold a pointer.\n\
<a name='L1956'>Special case (not in native mode unless 'long long' in platform C):\n\
<a name='L1957'>  q:long long; Q:unsigned long long\n\
<a name='L1958'>Whitespace between formats is ignored.\n\
<a name='L1959'>\n\
<a name='L1960'>The variable struct.error is an exception raised on errors.\n");
<a name='L1961'>
<a name='L1962'>
<a name='L1963'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> _structmodule = <font color='red'>{</font>
<a name='L1964'>    <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L1965'>    "_struct",
<a name='L1966'>    module_doc,
<a name='L1967'>    -1,
<a name='L1968'>    module_functions,
<a name='L1969'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1970'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1971'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1972'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L1973'><font color='red'>}</font>;
<a name='L1974'>
<a name='L1975'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L1976'><a href='../R/3040.html' title='Multiple refered from 2 places.'>PyInit__struct</a>(<b>void</b>)
<a name='L1977'><font color='red'>{</font>
<a name='L1978'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *m;
<a name='L1979'>
<a name='L1980'>    m = PyModule_Create(&amp;_structmodule);
<a name='L1981'>    <b>if</b> (m == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1982'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1983'>
<a name='L1984'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(&amp;PyStructType) = &amp;PyType_Type;
<a name='L1985'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;PyStructType) &lt; 0)
<a name='L1986'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1987'>
<a name='L1988'>    <i><font color='green'>/* Check endian and swap in faster functions */</font></i>
<a name='L1989'>    <font color='red'>{</font>
<a name='L1990'>        <b>int</b> one = 1;
<a name='L1991'>        <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> *native = native_table;
<a name='L1992'>        <a href='../S/2613.html#L23' title='Defined at 23 in Modules/_struct.c.'>formatdef</a> *<a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a>, *ptr;
<a name='L1993'>        <b>if</b> ((<b>int</b>)*(<b>unsigned</b> <b>char</b>*)&amp;one)
<a name='L1994'>            <a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a> = lilendian_table;
<a name='L1995'>        <b>else</b>
<a name='L1996'>            <a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a> = bigendian_table;
<a name='L1997'>        <i><font color='green'>/* Scan through the native table, find a matching</font></i>
<a name='L1998'><i><font color='green'>           entry in the endian table and swap in the</font></i>
<a name='L1999'><i><font color='green'>           native implementations whenever possible</font></i>
<a name='L2000'><i><font color='green'>           (64-bit platforms may not have "standard" sizes) */</font></i>
<a name='L2001'>        <b>while</b> (native-&gt;format != '\0' &amp;&amp; <a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a>-&gt;format != '\0') <font color='red'>{</font>
<a name='L2002'>            ptr = <a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a>;
<a name='L2003'>            <b>while</b> (ptr-&gt;format != '\0') <font color='red'>{</font>
<a name='L2004'>                <b>if</b> (ptr-&gt;format == native-&gt;format) <font color='red'>{</font>
<a name='L2005'>                    <i><font color='green'>/* Match faster when formats are</font></i>
<a name='L2006'><i><font color='green'>                       listed in the same order */</font></i>
<a name='L2007'>                    <b>if</b> (ptr == <a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a>)
<a name='L2008'>                        <a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a>++;
<a name='L2009'>                    <i><font color='green'>/* Only use the trick if the</font></i>
<a name='L2010'><i><font color='green'>                       size matches */</font></i>
<a name='L2011'>                    <b>if</b> (ptr-&gt;size != native-&gt;size)
<a name='L2012'>                        <b>break</b>;
<a name='L2013'>                    <i><font color='green'>/* Skip float and double, could be</font></i>
<a name='L2014'><i><font color='green'>                       "unknown" float format */</font></i>
<a name='L2015'>                    <b>if</b> (ptr-&gt;format == 'd' || ptr-&gt;format == 'f')
<a name='L2016'>                        <b>break</b>;
<a name='L2017'>                    ptr-&gt;<a href='../S/2613.html#L1804' title='Defined at 1804 in Modules/_struct.c.'>pack</a> = native-&gt;<a href='../S/2613.html#L1804' title='Defined at 1804 in Modules/_struct.c.'>pack</a>;
<a name='L2018'>                    ptr-&gt;<a href='../S/2613.html#L1871' title='Defined at 1871 in Modules/_struct.c.'>unpack</a> = native-&gt;<a href='../S/2613.html#L1871' title='Defined at 1871 in Modules/_struct.c.'>unpack</a>;
<a name='L2019'>                    <b>break</b>;
<a name='L2020'>                <font color='red'>}</font>
<a name='L2021'>                ptr++;
<a name='L2022'>            <font color='red'>}</font>
<a name='L2023'>            native++;
<a name='L2024'>        <font color='red'>}</font>
<a name='L2025'>    <font color='red'>}</font>
<a name='L2026'>
<a name='L2027'>    <i><font color='green'>/* Add some symbolic constants to the module */</font></i>
<a name='L2028'>    <b>if</b> (StructError == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2029'>        StructError = <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("struct.error", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2030'>        <b>if</b> (StructError == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2031'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2032'>    <font color='red'>}</font>
<a name='L2033'>
<a name='L2034'>    Py_INCREF(StructError);
<a name='L2035'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "error", StructError);
<a name='L2036'>
<a name='L2037'>    Py_INCREF((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)&amp;PyStructType);
<a name='L2038'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "Struct", (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)&amp;PyStructType);
<a name='L2039'>
<a name='L2040'>    <b>return</b> m;
<a name='L2041'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L95'>[^]</a><a href='#L1976'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
