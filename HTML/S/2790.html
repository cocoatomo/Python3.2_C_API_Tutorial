<html>
<head>
<title>Objects/fileobject.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3391.html'>Objects</a>/fileobject.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L29'>[^]</a><a href='#L469'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L29' title='Defined at 29.'>PyFile_FromFd</a>
<li><a href='#L49' title='Defined at 49.'>PyFile_GetLine</a>
<li><a href='#L131' title='Defined at 131.'>PyFile_WriteObject</a>
<li><a href='#L167' title='Defined at 167.'>PyFile_WriteString</a>
<li><a href='#L197' title='Defined at 197.'>PyObject_AsFileDescriptor</a>
<li><a href='#L255' title='Defined at 255.'>Py_UniversalNewlineFgets</a>
<li><a href='#L332' title='Defined at 332.'>stdprinter_new</a>
<li><a href='#L347' title='Defined at 347.'>stdprinter_init</a>
<li><a href='#L355' title='Defined at 355.'>PyFile_NewStdPrinter</a>
<li><a href='#L373' title='Defined at 373.'>stdprinter_write</a>
<li><a href='#L413' title='Defined at 413.'>stdprinter_fileno</a>
<li><a href='#L419' title='Defined at 419.'>stdprinter_repr</a>
<li><a href='#L426' title='Defined at 426.'>stdprinter_noop</a>
<li><a href='#L432' title='Defined at 432.'>stdprinter_isatty</a>
<li><a href='#L456' title='Defined at 456.'>get_closed</a>
<li><a href='#L463' title='Defined at 463.'>get_mode</a>
<li><a href='#L469' title='Defined at 469.'>get_encoding</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* File object implementation (what's left of it -- see io.py) */</font></i>
<a name='L2'>
<a name='L3'><font color='darkred'>#define</font> <a href='../R/2388.html' title='Multiple refered from 2 places.'>PY_SSIZE_T_CLEAN</a>
<a name='L4'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L5'>
<a name='L6'><font color='darkred'>#ifdef</font> HAVE_GETC_UNLOCKED
<a name='L7'><font color='darkred'>#define</font> <a href='../R/1236.html' title='Multiple refered from 3 places.'>GETC</a>(f) getc_unlocked(f)
<a name='L8'><font color='darkred'>#define</font> <a href='../S/2790.html#L266' title='Refered from 266 in Objects/fileobject.c.'>FLOCKFILE</a>(f) flockfile(f)
<a name='L9'><font color='darkred'>#define</font> <a href='../S/2790.html#L302' title='Refered from 302 in Objects/fileobject.c.'>FUNLOCKFILE</a>(f) funlockfile(f)
<a name='L10'><font color='darkred'>#else</font>
<a name='L11'><font color='darkred'>#define</font> <a href='../R/1236.html' title='Multiple refered from 3 places.'>GETC</a>(f) getc(f)
<a name='L12'><font color='darkred'>#define</font> <a href='../S/2790.html#L266' title='Refered from 266 in Objects/fileobject.c.'>FLOCKFILE</a>(f)
<a name='L13'><font color='darkred'>#define</font> <a href='../S/2790.html#L302' title='Refered from 302 in Objects/fileobject.c.'>FUNLOCKFILE</a>(f)
<a name='L14'><font color='darkred'>#endif</font>
<a name='L15'>
<a name='L16'><i><font color='green'>/* Newline flags */</font></i>
<a name='L17'><font color='darkred'>#define</font> NEWLINE_UNKNOWN 0       <i><font color='green'>/* No newline seen, yet */</font></i>
<a name='L18'><font color='darkred'>#define</font> <a href='../R/2069.html' title='Multiple refered from 2 places.'>NEWLINE_CR</a> 1            <i><font color='green'>/* \r newline seen */</font></i>
<a name='L19'><font color='darkred'>#define</font> <a href='../S/2790.html#L295' title='Refered from 295 in Objects/fileobject.c.'>NEWLINE_LF</a> 2            <i><font color='green'>/* \n newline seen */</font></i>
<a name='L20'><font color='darkred'>#define</font> <a href='../S/2790.html#L275' title='Refered from 275 in Objects/fileobject.c.'>NEWLINE_CRLF</a> 4          <i><font color='green'>/* \r\n newline seen */</font></i>
<a name='L21'>
<a name='L22'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L23'><b>extern</b> "C" <font color='red'>{</font>
<a name='L24'><font color='darkred'>#endif</font>
<a name='L25'>
<a name='L26'><i><font color='green'>/* External C interface */</font></i>
<a name='L27'>
<a name='L28'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L29'><a href='../S/3120.html#L3186' title='Refered from 3186 in Python/import.c.'>PyFile_FromFd</a>(<b>int</b> fd, <b>char</b> *name, <b>char</b> *mode, <b>int</b> buffering, <b>char</b> *encoding,
<a name='L30'>              <b>char</b> *errors, <b>char</b> *newline, <b>int</b> closefd)
<a name='L31'><font color='red'>{</font>
<a name='L32'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *io, *stream;
<a name='L33'>
<a name='L34'>    io = <a href='../S/3120.html#L2325' title='Defined at 2325 in Python/import.c.'>PyImport_ImportModule</a>("io");
<a name='L35'>    <b>if</b> (io == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L36'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L37'>    stream = <a href='../D/3603.html' title='Multiple defined in 2 places.'>PyObject_CallMethod</a>(io, "open", "isisssi", fd, mode,
<a name='L38'>                                 buffering, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors,
<a name='L39'>                                 newline, closefd);
<a name='L40'>    Py_DECREF(io);
<a name='L41'>    <b>if</b> (stream == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L42'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L43'>    <i><font color='green'>/* ignore name attribute because the name attribute of _BufferedIOMixin</font></i>
<a name='L44'><i><font color='green'>       and TextIOWrapper is read only */</font></i>
<a name='L45'>    <b>return</b> stream;
<a name='L46'><font color='red'>}</font>
<a name='L47'>
<a name='L48'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L49'><a href='../R/2943.html' title='Multiple refered from 2 places.'>PyFile_GetLine</a>(PyObject *f, <b>int</b> n)
<a name='L50'><font color='red'>{</font>
<a name='L51'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L52'>
<a name='L53'>    <b>if</b> (f == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L54'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L55'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L56'>    <font color='red'>}</font>
<a name='L57'>
<a name='L58'>    <font color='red'>{</font>
<a name='L59'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *reader;
<a name='L60'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>;
<a name='L61'>
<a name='L62'>        reader = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(f, "readline");
<a name='L63'>        <b>if</b> (reader == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L64'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L65'>        <b>if</b> (n &lt;= 0)
<a name='L66'>            <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(0);
<a name='L67'>        <b>else</b>
<a name='L68'>            <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(i)", n);
<a name='L69'>        <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L70'>            Py_DECREF(reader);
<a name='L71'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L72'>        <font color='red'>}</font>
<a name='L73'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = PyEval_CallObject(reader, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L74'>        Py_DECREF(reader);
<a name='L75'>        Py_DECREF(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L76'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; !PyBytes_Check(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) &amp;&amp;
<a name='L77'>            !PyUnicode_Check(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)) <font color='red'>{</font>
<a name='L78'>            Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L79'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L80'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L81'>                       "object.readline() returned non-string");
<a name='L82'>        <font color='red'>}</font>
<a name='L83'>    <font color='red'>}</font>
<a name='L84'>
<a name='L85'>    <b>if</b> (n &lt; 0 &amp;&amp; <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; PyBytes_Check(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)) <font color='red'>{</font>
<a name='L86'>        <b>char</b> *s = PyBytes_AS_STRING(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L87'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = PyBytes_GET_SIZE(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L88'>        <b>if</b> (len == 0) <font color='red'>{</font>
<a name='L89'>            Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L90'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L91'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_EOFError,
<a name='L92'>                            "EOF when reading a line");
<a name='L93'>        <font color='red'>}</font>
<a name='L94'>        <b>else</b> <b>if</b> (s[len-1] == '\n') <font color='red'>{</font>
<a name='L95'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>-&gt;ob_refcnt == 1)
<a name='L96'>                <a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, len-1);
<a name='L97'>            <b>else</b> <font color='red'>{</font>
<a name='L98'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L99'>                v = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(s, len-1);
<a name='L100'>                Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L101'>                <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = v;
<a name='L102'>            <font color='red'>}</font>
<a name='L103'>        <font color='red'>}</font>
<a name='L104'>    <font color='red'>}</font>
<a name='L105'>    <b>if</b> (n &lt; 0 &amp;&amp; <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; PyUnicode_Check(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)) <font color='red'>{</font>
<a name='L106'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L107'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L108'>        <b>if</b> (len == 0) <font color='red'>{</font>
<a name='L109'>            Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L110'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L111'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_EOFError,
<a name='L112'>                            "EOF when reading a line");
<a name='L113'>        <font color='red'>}</font>
<a name='L114'>        <b>else</b> <b>if</b> (s[len-1] == '\n') <font color='red'>{</font>
<a name='L115'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>-&gt;ob_refcnt == 1)
<a name='L116'>                <a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(&amp;<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, len-1);
<a name='L117'>            <b>else</b> <font color='red'>{</font>
<a name='L118'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L119'>                v = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(s, len-1);
<a name='L120'>                Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L121'>                <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = v;
<a name='L122'>            <font color='red'>}</font>
<a name='L123'>        <font color='red'>}</font>
<a name='L124'>    <font color='red'>}</font>
<a name='L125'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L126'><font color='red'>}</font>
<a name='L127'>
<a name='L128'><i><font color='green'>/* Interfaces to write objects/strings to file-like objects */</font></i>
<a name='L129'>
<a name='L130'><b>int</b>
<a name='L131'><a href='../R/2945.html' title='Multiple refered from 17 places.'>PyFile_WriteObject</a>(PyObject *v, PyObject *f, <b>int</b> flags)
<a name='L132'><font color='red'>{</font>
<a name='L133'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *writer, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, *<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L134'>    <b>if</b> (f == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L135'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "writeobject with NULL file");
<a name='L136'>        <b>return</b> -1;
<a name='L137'>    <font color='red'>}</font>
<a name='L138'>    writer = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(f, "write");
<a name='L139'>    <b>if</b> (writer == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L140'>        <b>return</b> -1;
<a name='L141'>    <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; Py_PRINT_RAW) <font color='red'>{</font>
<a name='L142'>        <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2803.html#L396' title='Defined at 396 in Objects/object.c.'>PyObject_Str</a>(v);
<a name='L143'>    <font color='red'>}</font>
<a name='L144'>    <b>else</b>
<a name='L145'>        <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2803.html#L368' title='Defined at 368 in Objects/object.c.'>PyObject_Repr</a>(v);
<a name='L146'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L147'>        Py_DECREF(writer);
<a name='L148'>        <b>return</b> -1;
<a name='L149'>    <font color='red'>}</font>
<a name='L150'>    <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(1, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L151'>    <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L152'>        Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L153'>        Py_DECREF(writer);
<a name='L154'>        <b>return</b> -1;
<a name='L155'>    <font color='red'>}</font>
<a name='L156'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = PyEval_CallObject(writer, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L157'>    Py_DECREF(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L158'>    Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L159'>    Py_DECREF(writer);
<a name='L160'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L161'>        <b>return</b> -1;
<a name='L162'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L163'>    <b>return</b> 0;
<a name='L164'><font color='red'>}</font>
<a name='L165'>
<a name='L166'><b>int</b>
<a name='L167'><a href='../R/2946.html' title='Multiple refered from 45 places.'>PyFile_WriteString</a>(<b>const</b> <b>char</b> *s, PyObject *f)
<a name='L168'><font color='red'>{</font>
<a name='L169'>    <b>if</b> (f == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L170'>        <i><font color='green'>/* Should be caused by a pre-existing error */</font></i>
<a name='L171'>        <b>if</b> (!<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L172'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L173'>                            "null file for PyFile_WriteString");
<a name='L174'>        <b>return</b> -1;
<a name='L175'>    <font color='red'>}</font>
<a name='L176'>    <b>else</b> <b>if</b> (!<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L177'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(s);
<a name='L178'>        <b>int</b> err;
<a name='L179'>        <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L180'>            <b>return</b> -1;
<a name='L181'>        err = <a href='../S/2790.html#L131' title='Defined at 131 in Objects/fileobject.c.'>PyFile_WriteObject</a>(v, f, Py_PRINT_RAW);
<a name='L182'>        Py_DECREF(v);
<a name='L183'>        <b>return</b> err;
<a name='L184'>    <font color='red'>}</font>
<a name='L185'>    <b>else</b>
<a name='L186'>        <b>return</b> -1;
<a name='L187'><font color='red'>}</font>
<a name='L188'>
<a name='L189'><i><font color='green'>/* Try to get a file-descriptor from a Python object.  If the object</font></i>
<a name='L190'><i><font color='green'>   is an integer or long integer, its value is returned.  If not, the</font></i>
<a name='L191'><i><font color='green'>   object's fileno() method is called if it exists; the method must return</font></i>
<a name='L192'><i><font color='green'>   an integer or long integer, which is returned as the file descriptor value.</font></i>
<a name='L193'><i><font color='green'>   -1 is returned on failure.</font></i>
<a name='L194'><i><font color='green'>*/</font></i>
<a name='L195'>
<a name='L196'><b>int</b>
<a name='L197'><a href='../R/3244.html' title='Multiple refered from 14 places.'>PyObject_AsFileDescriptor</a>(PyObject *o)
<a name='L198'><font color='red'>{</font>
<a name='L199'>    <b>int</b> fd;
<a name='L200'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *meth;
<a name='L201'>
<a name='L202'>    <b>if</b> (PyLong_Check(o)) <font color='red'>{</font>
<a name='L203'>        fd = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(o);
<a name='L204'>    <font color='red'>}</font>
<a name='L205'>    <b>else</b> <b>if</b> ((meth = <a href='../S/2803.html#L779' title='Defined at 779 in Objects/object.c.'>PyObject_GetAttrString</a>(o, "fileno")) != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L206'>    <font color='red'>{</font>
<a name='L207'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fno = PyEval_CallObject(meth, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L208'>        Py_DECREF(meth);
<a name='L209'>        <b>if</b> (fno == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L210'>            <b>return</b> -1;
<a name='L211'>
<a name='L212'>        <b>if</b> (PyLong_Check(fno)) <font color='red'>{</font>
<a name='L213'>            fd = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(fno);
<a name='L214'>            Py_DECREF(fno);
<a name='L215'>        <font color='red'>}</font>
<a name='L216'>        <b>else</b> <font color='red'>{</font>
<a name='L217'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L218'>                            "fileno() returned a non-integer");
<a name='L219'>            Py_DECREF(fno);
<a name='L220'>            <b>return</b> -1;
<a name='L221'>        <font color='red'>}</font>
<a name='L222'>    <font color='red'>}</font>
<a name='L223'>    <b>else</b> <font color='red'>{</font>
<a name='L224'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L225'>                        "argument must be an int, or have a fileno() method.");
<a name='L226'>        <b>return</b> -1;
<a name='L227'>    <font color='red'>}</font>
<a name='L228'>
<a name='L229'>    <b>if</b> (fd == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L230'>        <b>return</b> -1;
<a name='L231'>    <b>if</b> (fd &lt; 0) <font color='red'>{</font>
<a name='L232'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L233'>                     "file descriptor cannot be a negative integer (%i)",
<a name='L234'>                     fd);
<a name='L235'>        <b>return</b> -1;
<a name='L236'>    <font color='red'>}</font>
<a name='L237'>    <b>return</b> fd;
<a name='L238'><font color='red'>}</font>
<a name='L239'>
<a name='L240'><i><font color='green'>/*</font></i>
<a name='L241'><i><font color='green'>** Py_UniversalNewlineFgets is an fgets variation that understands</font></i>
<a name='L242'><i><font color='green'>** all of \r, \n and \r\n conventions.</font></i>
<a name='L243'><i><font color='green'>** The stream should be opened in binary mode.</font></i>
<a name='L244'><i><font color='green'>** If fobj is NULL the routine always does newline conversion, and</font></i>
<a name='L245'><i><font color='green'>** it may peek one char ahead to gobble the second char in \r\n.</font></i>
<a name='L246'><i><font color='green'>** If fobj is non-NULL it must be a PyFileObject. In this case there</font></i>
<a name='L247'><i><font color='green'>** is no readahead but in stead a flag is used to skip a following</font></i>
<a name='L248'><i><font color='green'>** \n on the next read. Also, if the file is open in binary mode</font></i>
<a name='L249'><i><font color='green'>** the whole conversion is skipped. Finally, the routine keeps track of</font></i>
<a name='L250'><i><font color='green'>** the different types of newlines seen.</font></i>
<a name='L251'><i><font color='green'>** Note that we need no error handling: fgets() treats error and eof</font></i>
<a name='L252'><i><font color='green'>** identically.</font></i>
<a name='L253'><i><font color='green'>*/</font></i>
<a name='L254'><b>char</b> *
<a name='L255'><a href='../R/3847.html' title='Multiple refered from 2 places.'>Py_UniversalNewlineFgets</a>(<b>char</b> *buf, <b>int</b> n, FILE *stream, PyObject *fobj)
<a name='L256'><font color='red'>{</font>
<a name='L257'>    <b>char</b> *p = buf;
<a name='L258'>    <b>int</b> c;
<a name='L259'>    <b>int</b> newlinetypes = 0;
<a name='L260'>    <b>int</b> skipnextlf = 0;
<a name='L261'>
<a name='L262'>    <b>if</b> (fobj) <font color='red'>{</font>
<a name='L263'>        errno = ENXIO;          <i><font color='green'>/* What can you do... */</font></i>
<a name='L264'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L265'>    <font color='red'>}</font>
<a name='L266'>    <a href='../D/1267.html' title='Multiple defined in 2 places.'>FLOCKFILE</a>(stream);
<a name='L267'>    c = 'x'; <i><font color='green'>/* Shut up gcc warning */</font></i>
<a name='L268'>    <b>while</b> (--n &gt; 0 &amp;&amp; (c = <a href='../D/1378.html' title='Multiple defined in 2 places.'>GETC</a>(stream)) != EOF ) <font color='red'>{</font>
<a name='L269'>        <b>if</b> (skipnextlf ) <font color='red'>{</font>
<a name='L270'>            skipnextlf = 0;
<a name='L271'>            <b>if</b> (c == '\n') <font color='red'>{</font>
<a name='L272'>                <i><font color='green'>/* Seeing a \n here with skipnextlf true</font></i>
<a name='L273'><i><font color='green'>                ** means we saw a \r before.</font></i>
<a name='L274'><i><font color='green'>                */</font></i>
<a name='L275'>                newlinetypes |= <a href='../D/2276.html' title='Multiple defined in 2 places.'>NEWLINE_CRLF</a>;
<a name='L276'>                c = <a href='../D/1378.html' title='Multiple defined in 2 places.'>GETC</a>(stream);
<a name='L277'>                <b>if</b> (c == EOF) <b>break</b>;
<a name='L278'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L279'>                <i><font color='green'>/*</font></i>
<a name='L280'><i><font color='green'>                ** Note that c == EOF also brings us here,</font></i>
<a name='L281'><i><font color='green'>                ** so we're okay if the last char in the file</font></i>
<a name='L282'><i><font color='green'>                ** is a CR.</font></i>
<a name='L283'><i><font color='green'>                */</font></i>
<a name='L284'>                newlinetypes |= <a href='../D/2275.html' title='Multiple defined in 2 places.'>NEWLINE_CR</a>;
<a name='L285'>            <font color='red'>}</font>
<a name='L286'>        <font color='red'>}</font>
<a name='L287'>        <b>if</b> (c == '\r') <font color='red'>{</font>
<a name='L288'>            <i><font color='green'>/* A \r is translated into a \n, and we skip</font></i>
<a name='L289'><i><font color='green'>            ** an adjacent \n, if any. We don't set the</font></i>
<a name='L290'><i><font color='green'>            ** newlinetypes flag until we've seen the next char.</font></i>
<a name='L291'><i><font color='green'>            */</font></i>
<a name='L292'>            skipnextlf = 1;
<a name='L293'>            c = '\n';
<a name='L294'>        <font color='red'>}</font> <b>else</b> <b>if</b> ( c == '\n') <font color='red'>{</font>
<a name='L295'>            newlinetypes |= <a href='../D/2277.html' title='Multiple defined in 2 places.'>NEWLINE_LF</a>;
<a name='L296'>        <font color='red'>}</font>
<a name='L297'>        *p++ = c;
<a name='L298'>        <b>if</b> (c == '\n') <b>break</b>;
<a name='L299'>    <font color='red'>}</font>
<a name='L300'>    <b>if</b> ( c == EOF &amp;&amp; skipnextlf )
<a name='L301'>        newlinetypes |= <a href='../D/2275.html' title='Multiple defined in 2 places.'>NEWLINE_CR</a>;
<a name='L302'>    <a href='../D/1319.html' title='Multiple defined in 2 places.'>FUNLOCKFILE</a>(stream);
<a name='L303'>    *p = '\0';
<a name='L304'>    <b>if</b> ( skipnextlf ) <font color='red'>{</font>
<a name='L305'>        <i><font color='green'>/* If we have no file object we cannot save the</font></i>
<a name='L306'><i><font color='green'>        ** skipnextlf flag. We have to readahead, which</font></i>
<a name='L307'><i><font color='green'>        ** will cause a pause if we're reading from an</font></i>
<a name='L308'><i><font color='green'>        ** interactive stream, but that is very unlikely</font></i>
<a name='L309'><i><font color='green'>        ** unless we're doing something silly like</font></i>
<a name='L310'><i><font color='green'>        ** exec(open("/dev/tty").read()).</font></i>
<a name='L311'><i><font color='green'>        */</font></i>
<a name='L312'>        c = <a href='../D/1378.html' title='Multiple defined in 2 places.'>GETC</a>(stream);
<a name='L313'>        <b>if</b> ( c != '\n' )
<a name='L314'>            ungetc(c, stream);
<a name='L315'>    <font color='red'>}</font>
<a name='L316'>    <b>if</b> (p == buf)
<a name='L317'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L318'>    <b>return</b> buf;
<a name='L319'><font color='red'>}</font>
<a name='L320'>
<a name='L321'><i><font color='green'>/* **************************** std printer ****************************</font></i>
<a name='L322'><i><font color='green'> * The stdprinter is used during the boot strapping phase as a preliminary</font></i>
<a name='L323'><i><font color='green'> * file like object for sys.stderr.</font></i>
<a name='L324'><i><font color='green'> */</font></i>
<a name='L325'>
<a name='L326'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L327'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L328'>    <b>int</b> fd;
<a name='L329'><font color='red'>}</font> <a href='../R/3404.html' title='Multiple refered from 5 places.'>PyStdPrinter_Object</a>;
<a name='L330'>
<a name='L331'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L332'><a href='../S/2790.html#L520' title='Refered from 520 in Objects/fileobject.c.'>stdprinter_new</a>(PyTypeObject *type, PyObject *args, PyObject *kews)
<a name='L333'><font color='red'>{</font>
<a name='L334'>    <a href='../S/2790.html#L329' title='Defined at 329 in Objects/fileobject.c.'>PyStdPrinter_Object</a> *self;
<a name='L335'>
<a name='L336'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(type != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; type-&gt;tp_alloc != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L337'>
<a name='L338'>    self = (<a href='../S/2790.html#L329' title='Defined at 329 in Objects/fileobject.c.'>PyStdPrinter_Object</a> *) type-&gt;tp_alloc(type, 0);
<a name='L339'>    <b>if</b> (self != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L340'>        self-&gt;fd = -1;
<a name='L341'>    <font color='red'>}</font>
<a name='L342'>
<a name='L343'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) self;
<a name='L344'><font color='red'>}</font>
<a name='L345'>
<a name='L346'><b>static</b> <b>int</b>
<a name='L347'><a href='../S/2790.html#L518' title='Refered from 518 in Objects/fileobject.c.'>stdprinter_init</a>(PyObject *self, PyObject *args, PyObject *kwds)
<a name='L348'><font color='red'>{</font>
<a name='L349'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L350'>                    "cannot create 'stderrprinter' instances");
<a name='L351'>    <b>return</b> -1;
<a name='L352'><font color='red'>}</font>
<a name='L353'>
<a name='L354'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L355'><a href='../R/2944.html' title='Multiple refered from 2 places.'>PyFile_NewStdPrinter</a>(<b>int</b> fd)
<a name='L356'><font color='red'>{</font>
<a name='L357'>    <a href='../S/2790.html#L329' title='Defined at 329 in Objects/fileobject.c.'>PyStdPrinter_Object</a> *self;
<a name='L358'>
<a name='L359'>    <b>if</b> (fd != <a href='../S/2759.html#L50' title='Defined at 50 in Modules/zlib/minigzip.c.'>fileno</a>(stdout) &amp;&amp; fd != <a href='../S/2759.html#L50' title='Defined at 50 in Modules/zlib/minigzip.c.'>fileno</a>(stderr)) <font color='red'>{</font>
<a name='L360'>        <i><font color='green'>/* not enough infrastructure for PyErr_BadInternalCall() */</font></i>
<a name='L361'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L362'>    <font color='red'>}</font>
<a name='L363'>
<a name='L364'>    self = PyObject_New(<a href='../S/2790.html#L329' title='Defined at 329 in Objects/fileobject.c.'>PyStdPrinter_Object</a>,
<a name='L365'>                        &amp;PyStdPrinter_Type);
<a name='L366'>    <b>if</b> (self != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L367'>        self-&gt;fd = fd;
<a name='L368'>    <font color='red'>}</font>
<a name='L369'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)self;
<a name='L370'><font color='red'>}</font>
<a name='L371'>
<a name='L372'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L373'><a href='../S/2790.html#L451' title='Refered from 451 in Objects/fileobject.c.'>stdprinter_write</a>(PyStdPrinter_Object *self, PyObject *args)
<a name='L374'><font color='red'>{</font>
<a name='L375'>    <b>char</b> *c;
<a name='L376'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n;
<a name='L377'>
<a name='L378'>    <b>if</b> (self-&gt;fd &lt; 0) <font color='red'>{</font>
<a name='L379'>        <i><font color='green'>/* fd might be invalid on Windows</font></i>
<a name='L380'><i><font color='green'>         * I can't raise an exception here. It may lead to an</font></i>
<a name='L381'><i><font color='green'>         * unlimited recursion in the case stderr is invalid.</font></i>
<a name='L382'><i><font color='green'>         */</font></i>
<a name='L383'>        <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L384'>    <font color='red'>}</font>
<a name='L385'>
<a name='L386'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "s", &amp;c)) <font color='red'>{</font>
<a name='L387'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L388'>    <font color='red'>}</font>
<a name='L389'>    n = strlen(c);
<a name='L390'>
<a name='L391'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L392'>    errno = 0;
<a name='L393'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L142' title='Defined at 142 in PC/pyconfig.h.'>MS_WIN64</a>) || <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>)
<a name='L394'>    <b>if</b> (n &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>)
<a name='L395'>        n = <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>;
<a name='L396'>    n = write(self-&gt;fd, c, (<b>int</b>)n);
<a name='L397'><font color='darkred'>#else</font>
<a name='L398'>    n = write(self-&gt;fd, c, n);
<a name='L399'><font color='darkred'>#endif</font>
<a name='L400'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L401'>
<a name='L402'>    <b>if</b> (n &lt; 0) <font color='red'>{</font>
<a name='L403'>        <b>if</b> (errno == EAGAIN)
<a name='L404'>            <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L405'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_IOError);
<a name='L406'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L407'>    <font color='red'>}</font>
<a name='L408'>
<a name='L409'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(n);
<a name='L410'><font color='red'>}</font>
<a name='L411'>
<a name='L412'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L413'><a href='../S/2790.html#L449' title='Refered from 449 in Objects/fileobject.c.'>stdprinter_fileno</a>(PyStdPrinter_Object *self)
<a name='L414'><font color='red'>{</font>
<a name='L415'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>) self-&gt;fd);
<a name='L416'><font color='red'>}</font>
<a name='L417'>
<a name='L418'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L419'><a href='../S/2790.html#L492' title='Refered from 492 in Objects/fileobject.c.'>stdprinter_repr</a>(PyStdPrinter_Object *self)
<a name='L420'><font color='red'>{</font>
<a name='L421'>    <b>return</b> <a href='../D/4008.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormat</a>("&lt;stdprinter(fd=%d) object at 0x%x&gt;",
<a name='L422'>                                self-&gt;fd, self);
<a name='L423'><font color='red'>}</font>
<a name='L424'>
<a name='L425'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L426'><a href='../R/10520.html' title='Multiple refered from 2 places.'>stdprinter_noop</a>(PyStdPrinter_Object *self)
<a name='L427'><font color='red'>{</font>
<a name='L428'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L429'><font color='red'>}</font>
<a name='L430'>
<a name='L431'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L432'><a href='../S/2790.html#L450' title='Refered from 450 in Objects/fileobject.c.'>stdprinter_isatty</a>(PyStdPrinter_Object *self)
<a name='L433'><font color='red'>{</font>
<a name='L434'>    <b>long</b> res;
<a name='L435'>    <b>if</b> (self-&gt;fd &lt; 0) <font color='red'>{</font>
<a name='L436'>        Py_RETURN_FALSE;
<a name='L437'>    <font color='red'>}</font>
<a name='L438'>
<a name='L439'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L440'>    res = isatty(self-&gt;fd);
<a name='L441'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L442'>
<a name='L443'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(res);
<a name='L444'><font color='red'>}</font>
<a name='L445'>
<a name='L446'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> stdprinter_methods[] = <font color='red'>{</font>
<a name='L447'>    <font color='red'>{</font>"close",           (PyCFunction)<a href='../S/2790.html#L426' title='Defined at 426 in Objects/fileobject.c.'>stdprinter_noop</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, ""<font color='red'>}</font>,
<a name='L448'>    <font color='red'>{</font>"flush",           (PyCFunction)<a href='../S/2790.html#L426' title='Defined at 426 in Objects/fileobject.c.'>stdprinter_noop</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, ""<font color='red'>}</font>,
<a name='L449'>    <font color='red'>{</font>"fileno",          (PyCFunction)<a href='../S/2790.html#L413' title='Defined at 413 in Objects/fileobject.c.'>stdprinter_fileno</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, ""<font color='red'>}</font>,
<a name='L450'>    <font color='red'>{</font>"isatty",          (PyCFunction)<a href='../S/2790.html#L432' title='Defined at 432 in Objects/fileobject.c.'>stdprinter_isatty</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, ""<font color='red'>}</font>,
<a name='L451'>    <font color='red'>{</font>"write",           (PyCFunction)<a href='../S/2790.html#L373' title='Defined at 373 in Objects/fileobject.c.'>stdprinter_write</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, ""<font color='red'>}</font>,
<a name='L452'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>  <i><font color='green'>/*sentinel */</font></i>
<a name='L453'><font color='red'>}</font>;
<a name='L454'>
<a name='L455'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L456'><a href='../R/8032.html' title='Multiple refered from 2 places.'>get_closed</a>(PyStdPrinter_Object *self, <b>void</b> *closure)
<a name='L457'><font color='red'>{</font>
<a name='L458'>    Py_INCREF(Py_False);
<a name='L459'>    <b>return</b> Py_False;
<a name='L460'><font color='red'>}</font>
<a name='L461'>
<a name='L462'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L463'><a href='../R/8071.html' title='Multiple refered from 2 places.'>get_mode</a>(PyStdPrinter_Object *self, <b>void</b> *closure)
<a name='L464'><font color='red'>{</font>
<a name='L465'>    <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("w");
<a name='L466'><font color='red'>}</font>
<a name='L467'>
<a name='L468'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L469'><a href='../S/2790.html#L476' title='Refered from 476 in Objects/fileobject.c.'>get_encoding</a>(PyStdPrinter_Object *self, <b>void</b> *closure)
<a name='L470'><font color='red'>{</font>
<a name='L471'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L472'><font color='red'>}</font>
<a name='L473'>
<a name='L474'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> stdprinter_getsetlist[] = <font color='red'>{</font>
<a name='L475'>    <font color='red'>{</font>"closed", (getter)<a href='../D/8833.html' title='Multiple defined in 2 places.'>get_closed</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, "True if the file is closed"<font color='red'>}</font>,
<a name='L476'>    <font color='red'>{</font>"encoding", (getter)<a href='../S/2790.html#L469' title='Defined at 469 in Objects/fileobject.c.'>get_encoding</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, "Encoding of the file"<font color='red'>}</font>,
<a name='L477'>    <font color='red'>{</font>"mode", (getter)<a href='../D/8873.html' title='Multiple defined in 2 places.'>get_mode</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, "String giving the file mode"<font color='red'>}</font>,
<a name='L478'>    <font color='red'>{</font>0<font color='red'>}</font>,
<a name='L479'><font color='red'>}</font>;
<a name='L480'>
<a name='L481'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyStdPrinter_Type = <font color='red'>{</font>
<a name='L482'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(&amp;PyType_Type, 0)
<a name='L483'>    "stderrprinter",                            <i><font color='green'>/* tp_name */</font></i>
<a name='L484'>    <b>sizeof</b>(<a href='../S/2790.html#L329' title='Defined at 329 in Objects/fileobject.c.'>PyStdPrinter_Object</a>),                <i><font color='green'>/* tp_basicsize */</font></i>
<a name='L485'>    0,                                          <i><font color='green'>/* tp_itemsize */</font></i>
<a name='L486'>    <i><font color='green'>/* methods */</font></i>
<a name='L487'>    0,                                          <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L488'>    0,                                          <i><font color='green'>/* tp_print */</font></i>
<a name='L489'>    0,                                          <i><font color='green'>/* tp_getattr */</font></i>
<a name='L490'>    0,                                          <i><font color='green'>/* tp_setattr */</font></i>
<a name='L491'>    0,                                          <i><font color='green'>/* tp_reserved */</font></i>
<a name='L492'>    (reprfunc)<a href='../S/2790.html#L419' title='Defined at 419 in Objects/fileobject.c.'>stdprinter_repr</a>,                  <i><font color='green'>/* tp_repr */</font></i>
<a name='L493'>    0,                                          <i><font color='green'>/* tp_as_number */</font></i>
<a name='L494'>    0,                                          <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L495'>    0,                                          <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L496'>    0,                                          <i><font color='green'>/* tp_hash */</font></i>
<a name='L497'>    0,                                          <i><font color='green'>/* tp_call */</font></i>
<a name='L498'>    0,                                          <i><font color='green'>/* tp_str */</font></i>
<a name='L499'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,                    <i><font color='green'>/* tp_getattro */</font></i>
<a name='L500'>    0,                                          <i><font color='green'>/* tp_setattro */</font></i>
<a name='L501'>    0,                                          <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L502'>    Py_TPFLAGS_DEFAULT,                         <i><font color='green'>/* tp_flags */</font></i>
<a name='L503'>    0,                                          <i><font color='green'>/* tp_doc */</font></i>
<a name='L504'>    0,                                          <i><font color='green'>/* tp_traverse */</font></i>
<a name='L505'>    0,                                          <i><font color='green'>/* tp_clear */</font></i>
<a name='L506'>    0,                                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L507'>    0,                                          <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L508'>    0,                                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L509'>    0,                                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L510'>    stdprinter_methods,                         <i><font color='green'>/* tp_methods */</font></i>
<a name='L511'>    0,                                          <i><font color='green'>/* tp_members */</font></i>
<a name='L512'>    stdprinter_getsetlist,                      <i><font color='green'>/* tp_getset */</font></i>
<a name='L513'>    0,                                          <i><font color='green'>/* tp_base */</font></i>
<a name='L514'>    0,                                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L515'>    0,                                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L516'>    0,                                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L517'>    0,                                          <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L518'>    <a href='../S/2790.html#L347' title='Defined at 347 in Objects/fileobject.c.'>stdprinter_init</a>,                            <i><font color='green'>/* tp_init */</font></i>
<a name='L519'>    <a href='../S/2824.html#L700' title='Defined at 700 in Objects/typeobject.c.'>PyType_GenericAlloc</a>,                        <i><font color='green'>/* tp_alloc */</font></i>
<a name='L520'>    <a href='../S/2790.html#L332' title='Defined at 332 in Objects/fileobject.c.'>stdprinter_new</a>,                             <i><font color='green'>/* tp_new */</font></i>
<a name='L521'>    PyObject_Del,                               <i><font color='green'>/* tp_free */</font></i>
<a name='L522'><font color='red'>}</font>;
<a name='L523'>
<a name='L524'>
<a name='L525'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L526'><font color='red'>}</font>
<a name='L527'><font color='darkred'>#endif</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L29'>[^]</a><a href='#L469'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
