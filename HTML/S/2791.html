<html>
<head>
<title>Objects/floatobject.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3391.html'>Objects</a>/floatobject.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L54'>[^]</a><a href='#L2356'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L54' title='Defined at 54.'>fill_free_list</a>
<li><a href='#L72' title='Defined at 72.'>PyFloat_GetMax</a>
<li><a href='#L78' title='Defined at 78.'>PyFloat_GetMin</a>
<li><a href='#L120' title='Defined at 120.'>PyFloat_GetInfo</a>
<li><a href='#L157' title='Defined at 157.'>PyFloat_FromDouble</a>
<li><a href='#L173' title='Defined at 173.'>PyFloat_FromString</a>
<li><a href='#L233' title='Defined at 233.'>float_dealloc</a>
<li><a href='#L244' title='Defined at 244.'>PyFloat_AsDouble</a>
<li><a href='#L293' title='Defined at 293.'>convert_to_double</a>
<li><a href='#L313' title='Defined at 313.'>float_repr</a>
<li><a href='#L343' title='Defined at 343.'>float_richcompare</a>
<li><a href='#L531' title='Defined at 531.'>float_hash</a>
<li><a href='#L537' title='Defined at 537.'>float_add</a>
<li><a href='#L549' title='Defined at 549.'>float_sub</a>
<li><a href='#L561' title='Defined at 561.'>float_mul</a>
<li><a href='#L573' title='Defined at 573.'>float_div</a>
<li><a href='#L590' title='Defined at 590.'>float_rem</a>
<li><a href='#L620' title='Defined at 620.'>float_divmod</a>
<li><a href='#L667' title='Defined at 667.'>float_floor_div</a>
<li><a href='#L686' title='Defined at 686.'>float_pow</a>
<li><a href='#L810' title='Defined at 810.'>float_neg</a>
<li><a href='#L816' title='Defined at 816.'>float_abs</a>
<li><a href='#L822' title='Defined at 822.'>float_bool</a>
<li><a href='#L828' title='Defined at 828.'>float_is_integer</a>
<li><a href='#L852' title='Defined at 852.'>float_is_inf</a>
<li><a href='#L861' title='Defined at 861.'>float_is_nan</a>
<li><a href='#L870' title='Defined at 870.'>float_is_finite</a>
<li><a href='#L880' title='Defined at 880.'>float_trunc</a>
<li><a href='#L915' title='Defined at 915.'>double_round</a>
<li><a href='#L968' title='Defined at 968.'>double_round</a>
<li><a href='#L1017' title='Defined at 1017.'>float_round</a>
<li><a href='#L1063' title='Defined at 1063.'>float_float</a>
<li><a href='#L1075' title='Defined at 1075.'>char_from_hex</a>
<li><a href='#L1082' title='Defined at 1082.'>hex_from_char</a>
<li><a href='#L1153' title='Defined at 1153.'>float_hex</a>
<li><a href='#L1217' title='Defined at 1217.'>float_fromhex</a>
<li><a href='#L1468' title='Defined at 1468.'>float_as_integer_ratio</a>
<li><a href='#L1562' title='Defined at 1562.'>float_new</a>
<li><a href='#L1584' title='Defined at 1584.'>float_subtype_new</a>
<li><a href='#L1604' title='Defined at 1604.'>float_getnewargs</a>
<li><a href='#L1619' title='Defined at 1619.'>float_getformat</a>
<li><a href='#L1670' title='Defined at 1670.'>float_setformat</a>
<li><a href='#L1739' title='Defined at 1739.'>float_getzero</a>
<li><a href='#L1745' title='Defined at 1745.'>float__format__</a>
<li><a href='#L1892' title='Defined at 1892.'>_PyFloat_Init</a>
<li><a href='#L1946' title='Defined at 1946.'>PyFloat_ClearFreeList</a>
<li><a href='#L1990' title='Defined at 1990.'>PyFloat_Fini</a>
<li><a href='#L2044' title='Defined at 2044.'>_PyFloat_Pack4</a>
<li><a href='#L2149' title='Defined at 2149.'>_PyFloat_Pack8</a>
<li><a href='#L2278' title='Defined at 2278.'>_PyFloat_Unpack4</a>
<li><a href='#L2356' title='Defined at 2356.'>_PyFloat_Unpack8</a>
</ol>
<hr>
<pre>
<a name='L1'>
<a name='L2'><i><font color='green'>/* Float object implementation */</font></i>
<a name='L3'>
<a name='L4'><i><font color='green'>/* XXX There should be overflow checks here, but it's hard to check</font></i>
<a name='L5'><i><font color='green'>   for any kind of float exception without losing portability. */</font></i>
<a name='L6'>
<a name='L7'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L8'>
<a name='L9'><font color='darkred'>#include</font> &lt;<a href='2809.html'>ctype.h</a>&gt;
<a name='L10'><font color='darkred'>#include</font> &lt;float.h&gt;
<a name='L11'>
<a name='L12'><font color='darkred'>#undef</font> <a href='../R/1834.html' title='Multiple refered from 13 places.'>MAX</a>
<a name='L13'><font color='darkred'>#undef</font> <a href='../R/1923.html' title='Multiple refered from 20 places.'>MIN</a>
<a name='L14'><font color='darkred'>#define</font> <a href='../R/1834.html' title='Multiple refered from 13 places.'>MAX</a>(x, y) ((x) &lt; (y) ? (y) : (x))
<a name='L15'><font color='darkred'>#define</font> <a href='../R/1923.html' title='Multiple refered from 20 places.'>MIN</a>(x, y) ((x) &lt; (y) ? (x) : (y))
<a name='L16'>
<a name='L17'>
<a name='L18'><font color='darkred'>#ifdef</font> _OSF_SOURCE
<a name='L19'><i><font color='green'>/* OSF1 5.1 doesn't make this available with XOPEN_SOURCE_EXTENDED defined */</font></i>
<a name='L20'><b>extern</b> <b>int</b> finite(<b>double</b>);
<a name='L21'><font color='darkred'>#endif</font>
<a name='L22'>
<a name='L23'><i><font color='green'>/* Special free list</font></i>
<a name='L24'><i><font color='green'></font></i>
<a name='L25'><i><font color='green'>   Since some Python programs can spend much of their time allocating</font></i>
<a name='L26'><i><font color='green'>   and deallocating floats, these operations should be very fast.</font></i>
<a name='L27'><i><font color='green'>   Therefore we use a dedicated allocation scheme with a much lower</font></i>
<a name='L28'><i><font color='green'>   overhead (in space and time) than straight malloc(): a simple</font></i>
<a name='L29'><i><font color='green'>   dedicated free list, filled when necessary with memory from malloc().</font></i>
<a name='L30'><i><font color='green'></font></i>
<a name='L31'><i><font color='green'>   block_list is a singly-linked list of all PyFloatBlocks ever allocated,</font></i>
<a name='L32'><i><font color='green'>   linked via their next members.  PyFloatBlocks are never returned to the</font></i>
<a name='L33'><i><font color='green'>   system before shutdown (PyFloat_Fini).</font></i>
<a name='L34'><i><font color='green'></font></i>
<a name='L35'><i><font color='green'>   free_list is a singly-linked list of available PyFloatObjects, linked</font></i>
<a name='L36'><i><font color='green'>   via abuse of their ob_type members.</font></i>
<a name='L37'><i><font color='green'>*/</font></i>
<a name='L38'>
<a name='L39'><font color='darkred'>#define</font> <a href='../S/2791.html#L41' title='Refered from 41 in Objects/floatobject.c.'>BLOCK_SIZE</a>      1000    <i><font color='green'>/* 1K less typical malloc overhead */</font></i>
<a name='L40'><font color='darkred'>#define</font> <a href='../S/2791.html#L41' title='Refered from 41 in Objects/floatobject.c.'>BHEAD_SIZE</a>      8       <i><font color='green'>/* Enough for a 64-bit pointer */</font></i>
<a name='L41'><font color='darkred'>#define</font> <a href='../R/2142.html' title='Multiple refered from 6 places.'>N_FLOATOBJECTS</a>  ((<a href='../S/2791.html#L39' title='Defined at 39 in Objects/floatobject.c.'>BLOCK_SIZE</a> - <a href='../S/2791.html#L40' title='Defined at 40 in Objects/floatobject.c.'>BHEAD_SIZE</a>) / <b>sizeof</b>(<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a>))
<a name='L42'>
<a name='L43'><b>struct</b> <a href='../R/5763.html' title='Multiple refered from 2 places.'>_floatblock</a> <font color='red'>{</font>
<a name='L44'>    <b>struct</b> <a href='../S/2791.html#L43' title='Defined at 43 in Objects/floatobject.c.'>_floatblock</a> *next;
<a name='L45'>    <a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> objects[<a href='../S/2791.html#L41' title='Defined at 41 in Objects/floatobject.c.'>N_FLOATOBJECTS</a>];
<a name='L46'><font color='red'>}</font>;
<a name='L47'>
<a name='L48'><b>typedef</b> <b>struct</b> <a href='../S/2791.html#L43' title='Defined at 43 in Objects/floatobject.c.'>_floatblock</a> <a href='../R/2947.html' title='Multiple refered from 7 places.'>PyFloatBlock</a>;
<a name='L49'>
<a name='L50'><b>static</b> <a href='../S/2791.html#L48' title='Defined at 48 in Objects/floatobject.c.'>PyFloatBlock</a> *block_list = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L51'><b>static</b> <a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *free_list = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L52'>
<a name='L53'><b>static</b> <a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *
<a name='L54'><a href='../S/2791.html#L161' title='Refered from 161 in Objects/floatobject.c.'>fill_free_list</a>(<b>void</b>)
<a name='L55'><font color='red'>{</font>
<a name='L56'>    <a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *p, *q;
<a name='L57'>    <i><font color='green'>/* XXX Float blocks escape the object heap. Use PyObject_MALLOC ??? */</font></i>
<a name='L58'>    p = (<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *) PyMem_MALLOC(<b>sizeof</b>(<a href='../S/2791.html#L48' title='Defined at 48 in Objects/floatobject.c.'>PyFloatBlock</a>));
<a name='L59'>    <b>if</b> (p == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L60'>        <b>return</b> (<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *) <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L61'>    ((<a href='../S/2791.html#L48' title='Defined at 48 in Objects/floatobject.c.'>PyFloatBlock</a> *)p)-&gt;next = block_list;
<a name='L62'>    block_list = (<a href='../S/2791.html#L48' title='Defined at 48 in Objects/floatobject.c.'>PyFloatBlock</a> *)p;
<a name='L63'>    p = &amp;((<a href='../S/2791.html#L48' title='Defined at 48 in Objects/floatobject.c.'>PyFloatBlock</a> *)p)-&gt;objects[0];
<a name='L64'>    q = p + <a href='../S/2791.html#L41' title='Defined at 41 in Objects/floatobject.c.'>N_FLOATOBJECTS</a>;
<a name='L65'>    <b>while</b> (--q &gt; p)
<a name='L66'>        <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(q) = (<b>struct</b> <a href='../D/6629.html' title='Multiple defined in 2 places.'>_typeobject</a> *)(q-1);
<a name='L67'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(q) = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L68'>    <b>return</b> p + <a href='../S/2791.html#L41' title='Defined at 41 in Objects/floatobject.c.'>N_FLOATOBJECTS</a> - 1;
<a name='L69'><font color='red'>}</font>
<a name='L70'>
<a name='L71'><b>double</b>
<a name='L72'>PyFloat_GetMax(<b>void</b>)
<a name='L73'><font color='red'>{</font>
<a name='L74'>    <b>return</b> DBL_MAX;
<a name='L75'><font color='red'>}</font>
<a name='L76'>
<a name='L77'><b>double</b>
<a name='L78'>PyFloat_GetMin(<b>void</b>)
<a name='L79'><font color='red'>{</font>
<a name='L80'>    <b>return</b> DBL_MIN;
<a name='L81'><font color='red'>}</font>
<a name='L82'>
<a name='L83'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> FloatInfoType;
<a name='L84'>
<a name='L85'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(floatinfo__doc__,
<a name='L86'>"sys.float_info\n\
<a name='L87'>\n\
<a name='L88'>A structseq holding information about the float type. It contains low level\n\
<a name='L89'>information about the precision and internal representation. Please study\n\
<a name='L90'>your system's :file:`float.h` for more information.");
<a name='L91'>
<a name='L92'><b>static</b> <a href='../D/3794.html' title='Multiple defined in 2 places.'>PyStructSequence_Field</a> floatinfo_fields[] = <font color='red'>{</font>
<a name='L93'>    <font color='red'>{</font>"max",             "DBL_MAX -- maximum representable finite float"<font color='red'>}</font>,
<a name='L94'>    <font color='red'>{</font>"max_exp",         "DBL_MAX_EXP -- maximum int e such that radix**(e-1) "
<a name='L95'>                    "is representable"<font color='red'>}</font>,
<a name='L96'>    <font color='red'>{</font>"max_10_exp",      "DBL_MAX_10_EXP -- maximum int e such that 10**e "
<a name='L97'>                    "is representable"<font color='red'>}</font>,
<a name='L98'>    <font color='red'>{</font>"min",             "DBL_MIN -- Minimum positive normalizer float"<font color='red'>}</font>,
<a name='L99'>    <font color='red'>{</font>"min_exp",         "DBL_MIN_EXP -- minimum int e such that radix**(e-1) "
<a name='L100'>                    "is a normalized float"<font color='red'>}</font>,
<a name='L101'>    <font color='red'>{</font>"min_10_exp",      "DBL_MIN_10_EXP -- minimum int e such that 10**e is "
<a name='L102'>                    "a normalized"<font color='red'>}</font>,
<a name='L103'>    <font color='red'>{</font>"dig",             "DBL_DIG -- digits"<font color='red'>}</font>,
<a name='L104'>    <font color='red'>{</font>"mant_dig",        "DBL_MANT_DIG -- mantissa digits"<font color='red'>}</font>,
<a name='L105'>    <font color='red'>{</font>"epsilon",         "DBL_EPSILON -- Difference between 1 and the next "
<a name='L106'>                    "representable float"<font color='red'>}</font>,
<a name='L107'>    <font color='red'>{</font>"radix",           "FLT_RADIX -- radix of exponent"<font color='red'>}</font>,
<a name='L108'>    <font color='red'>{</font>"rounds",          "FLT_ROUNDS -- addition rounds"<font color='red'>}</font>,
<a name='L109'>    <font color='red'>{</font>0<font color='red'>}</font>
<a name='L110'><font color='red'>}</font>;
<a name='L111'>
<a name='L112'><b>static</b> <a href='../D/3793.html' title='Multiple defined in 2 places.'>PyStructSequence_Desc</a> floatinfo_desc = <font color='red'>{</font>
<a name='L113'>    "sys.float_info",           <i><font color='green'>/* name */</font></i>
<a name='L114'>    floatinfo__doc__,           <i><font color='green'>/* doc */</font></i>
<a name='L115'>    floatinfo_fields,           <i><font color='green'>/* fields */</font></i>
<a name='L116'>    11
<a name='L117'><font color='red'>}</font>;
<a name='L118'>
<a name='L119'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L120'><a href='../S/3144.html#L1621' title='Refered from 1621 in Python/sysmodule.c.'>PyFloat_GetInfo</a>(<b>void</b>)
<a name='L121'><font color='red'>{</font>
<a name='L122'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* floatinfo;
<a name='L123'>    <b>int</b> pos = 0;
<a name='L124'>
<a name='L125'>    floatinfo = <a href='../S/2822.html#L29' title='Defined at 29 in Objects/structseq.c.'>PyStructSequence_New</a>(&amp;FloatInfoType);
<a name='L126'>    <b>if</b> (floatinfo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L127'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L128'>    <font color='red'>}</font>
<a name='L129'>
<a name='L130'><font color='darkred'>#define</font> <a href='../R/4469.html' title='Multiple refered from 8 places.'>SetIntFlag</a>(flag) \
<a name='L131'>    PyStructSequence_SET_ITEM(floatinfo, pos++, <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(flag))
<a name='L132'><font color='darkred'>#define</font> <a href='../R/4465.html' title='Multiple refered from 3 places.'>SetDblFlag</a>(flag) \
<a name='L133'>    PyStructSequence_SET_ITEM(floatinfo, pos++, <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(flag))
<a name='L134'>
<a name='L135'>    <a href='../D/5061.html' title='Multiple defined in 2 places.'>SetDblFlag</a>(DBL_MAX);
<a name='L136'>    <a href='../D/5065.html' title='Multiple defined in 2 places.'>SetIntFlag</a>(DBL_MAX_EXP);
<a name='L137'>    <a href='../D/5065.html' title='Multiple defined in 2 places.'>SetIntFlag</a>(DBL_MAX_10_EXP);
<a name='L138'>    <a href='../D/5061.html' title='Multiple defined in 2 places.'>SetDblFlag</a>(DBL_MIN);
<a name='L139'>    <a href='../D/5065.html' title='Multiple defined in 2 places.'>SetIntFlag</a>(DBL_MIN_EXP);
<a name='L140'>    <a href='../D/5065.html' title='Multiple defined in 2 places.'>SetIntFlag</a>(DBL_MIN_10_EXP);
<a name='L141'>    <a href='../D/5065.html' title='Multiple defined in 2 places.'>SetIntFlag</a>(DBL_DIG);
<a name='L142'>    <a href='../D/5065.html' title='Multiple defined in 2 places.'>SetIntFlag</a>(DBL_MANT_DIG);
<a name='L143'>    <a href='../D/5061.html' title='Multiple defined in 2 places.'>SetDblFlag</a>(DBL_EPSILON);
<a name='L144'>    <a href='../D/5065.html' title='Multiple defined in 2 places.'>SetIntFlag</a>(FLT_RADIX);
<a name='L145'>    <a href='../D/5065.html' title='Multiple defined in 2 places.'>SetIntFlag</a>(FLT_ROUNDS);
<a name='L146'><font color='darkred'>#undef</font> <a href='../R/4469.html' title='Multiple refered from 8 places.'>SetIntFlag</a>
<a name='L147'><font color='darkred'>#undef</font> <a href='../R/4465.html' title='Multiple refered from 3 places.'>SetDblFlag</a>
<a name='L148'>
<a name='L149'>    <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L150'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(floatinfo);
<a name='L151'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L152'>    <font color='red'>}</font>
<a name='L153'>    <b>return</b> floatinfo;
<a name='L154'><font color='red'>}</font>
<a name='L155'>
<a name='L156'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L157'><a href='../R/2952.html' title='Multiple refered from 110 places.'>PyFloat_FromDouble</a>(<b>double</b> fval)
<a name='L158'><font color='red'>{</font>
<a name='L159'>    <b>register</b> <a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *op;
<a name='L160'>    <b>if</b> (free_list == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L161'>        <b>if</b> ((free_list = <a href='../S/2791.html#L54' title='Defined at 54 in Objects/floatobject.c.'>fill_free_list</a>()) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L162'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L163'>    <font color='red'>}</font>
<a name='L164'>    <i><font color='green'>/* Inline PyObject_New */</font></i>
<a name='L165'>    op = free_list;
<a name='L166'>    free_list = (<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *)<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(op);
<a name='L167'>    PyObject_INIT(op, &amp;PyFloat_Type);
<a name='L168'>    op-&gt;ob_fval = fval;
<a name='L169'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) op;
<a name='L170'><font color='red'>}</font>
<a name='L171'>
<a name='L172'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L173'><a href='../R/2953.html' title='Multiple refered from 3 places.'>PyFloat_FromString</a>(PyObject *v)
<a name='L174'><font color='red'>{</font>
<a name='L175'>    <b>const</b> <b>char</b> *s, *last, *end;
<a name='L176'>    <b>double</b> x;
<a name='L177'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s_buffer = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L178'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L179'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L180'>
<a name='L181'>    <b>if</b> (PyUnicode_Check(v)) <font color='red'>{</font>
<a name='L182'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, buflen = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(v);
<a name='L183'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *bufptr;
<a name='L184'>        s_buffer = <a href='../S/2828.html#L6208' title='Defined at 6208 in Objects/unicodeobject.c.'>PyUnicode_TransformDecimalToASCII</a>(
<a name='L185'>            <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v), buflen);
<a name='L186'>        <b>if</b> (s_buffer == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L187'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L188'>        <i><font color='green'>/* Replace non-ASCII whitespace with ' ' */</font></i>
<a name='L189'>        bufptr = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(s_buffer);
<a name='L190'>        <b>for</b> (i = 0; i &lt; buflen; i++) <font color='red'>{</font>
<a name='L191'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = bufptr[i];
<a name='L192'>            <b>if</b> (ch &gt; 127 &amp;&amp; <a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(ch))
<a name='L193'>                bufptr[i] = ' ';
<a name='L194'>        <font color='red'>}</font>
<a name='L195'>        s = <a href='../S/2828.html#L1903' title='Defined at 1903 in Objects/unicodeobject.c.'>_PyUnicode_AsStringAndSize</a>(s_buffer, &amp;len);
<a name='L196'>        <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L197'>            Py_DECREF(s_buffer);
<a name='L198'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L199'>        <font color='red'>}</font>
<a name='L200'>        last = s + len;
<a name='L201'>    <font color='red'>}</font>
<a name='L202'>    <b>else</b> <b>if</b> (<a href='../S/2775.html#L226' title='Defined at 226 in Objects/abstract.c.'>PyObject_AsCharBuffer</a>(v, &amp;s, &amp;len)) <font color='red'>{</font>
<a name='L203'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L204'>            "float() argument must be a string or a number");
<a name='L205'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L206'>    <font color='red'>}</font>
<a name='L207'>    last = s + len;
<a name='L208'>    <i><font color='green'>/* strip space */</font></i>
<a name='L209'>    <b>while</b> (s &lt; last &amp;&amp; <a href='../S/556.html#L24' title='Defined at 24 in Include/pyctype.h.'>Py_ISSPACE</a>(*s))
<a name='L210'>        s++;
<a name='L211'>    <b>while</b> (s &lt; last - 1 &amp;&amp; <a href='../S/556.html#L24' title='Defined at 24 in Include/pyctype.h.'>Py_ISSPACE</a>(last[-1]))
<a name='L212'>        last--;
<a name='L213'>    <i><font color='green'>/* We don't care about overflow or underflow.  If the platform</font></i>
<a name='L214'><i><font color='green'>     * supports them, infinities and signed zeroes (on underflow) are</font></i>
<a name='L215'><i><font color='green'>     * fine. */</font></i>
<a name='L216'>    x = <a href='../S/3136.html#L298' title='Defined at 298 in Python/pystrtod.c.'>PyOS_string_to_double</a>(s, (<b>char</b> **)&amp;end, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L217'>    <b>if</b> (end != last) <font color='red'>{</font>
<a name='L218'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L219'>                     "could not convert string to float: "
<a name='L220'>                     "%R", v);
<a name='L221'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L222'>    <font color='red'>}</font>
<a name='L223'>    <b>else</b> <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L224'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L225'>    <b>else</b>
<a name='L226'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x);
<a name='L227'>
<a name='L228'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(s_buffer);
<a name='L229'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L230'><font color='red'>}</font>
<a name='L231'>
<a name='L232'><b>static</b> <b>void</b>
<a name='L233'><a href='../S/2791.html#L1855' title='Refered from 1855 in Objects/floatobject.c.'>float_dealloc</a>(PyFloatObject *op)
<a name='L234'><font color='red'>{</font>
<a name='L235'>    <b>if</b> (PyFloat_CheckExact(op)) <font color='red'>{</font>
<a name='L236'>        <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(op) = (<b>struct</b> <a href='../D/6629.html' title='Multiple defined in 2 places.'>_typeobject</a> *)free_list;
<a name='L237'>        free_list = op;
<a name='L238'>    <font color='red'>}</font>
<a name='L239'>    <b>else</b>
<a name='L240'>        <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(op)-&gt;tp_free((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)op);
<a name='L241'><font color='red'>}</font>
<a name='L242'>
<a name='L243'><b>double</b>
<a name='L244'><a href='../R/2949.html' title='Multiple refered from 63 places.'>PyFloat_AsDouble</a>(PyObject *op)
<a name='L245'><font color='red'>{</font>
<a name='L246'>    <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *nb;
<a name='L247'>    <a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *fo;
<a name='L248'>    <b>double</b> val;
<a name='L249'>
<a name='L250'>    <b>if</b> (op &amp;&amp; PyFloat_Check(op))
<a name='L251'>        <b>return</b> PyFloat_AS_DOUBLE((<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a>*) op);
<a name='L252'>
<a name='L253'>    <b>if</b> (op == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L254'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L255'>        <b>return</b> -1;
<a name='L256'>    <font color='red'>}</font>
<a name='L257'>
<a name='L258'>    <b>if</b> ((nb = <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(op)-&gt;tp_as_number) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || nb-&gt;nb_float == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L259'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "a float is required");
<a name='L260'>        <b>return</b> -1;
<a name='L261'>    <font color='red'>}</font>
<a name='L262'>
<a name='L263'>    fo = (<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a>*) (*nb-&gt;nb_float) (op);
<a name='L264'>    <b>if</b> (fo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L265'>        <b>return</b> -1;
<a name='L266'>    <b>if</b> (!PyFloat_Check(fo)) <font color='red'>{</font>
<a name='L267'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L268'>                        "nb_float should return float object");
<a name='L269'>        <b>return</b> -1;
<a name='L270'>    <font color='red'>}</font>
<a name='L271'>
<a name='L272'>    val = PyFloat_AS_DOUBLE(fo);
<a name='L273'>    Py_DECREF(fo);
<a name='L274'>
<a name='L275'>    <b>return</b> val;
<a name='L276'><font color='red'>}</font>
<a name='L277'>
<a name='L278'><i><font color='green'>/* Macro and helper that convert PyObject obj to a C double and store</font></i>
<a name='L279'><i><font color='green'>   the value in dbl.  If conversion to double raises an exception, obj is</font></i>
<a name='L280'><i><font color='green'>   set to NULL, and the function invoking this macro returns NULL.  If</font></i>
<a name='L281'><i><font color='green'>   obj is not of float, int or long type, Py_NotImplemented is incref'ed,</font></i>
<a name='L282'><i><font color='green'>   stored in obj, and returned from the function invoking this macro.</font></i>
<a name='L283'><i><font color='green'>*/</font></i>
<a name='L284'><font color='darkred'>#define</font> <a href='../R/579.html' title='Multiple refered from 16 places.'>CONVERT_TO_DOUBLE</a>(obj, dbl)                     \
<a name='L285'>    <b>if</b> (PyFloat_Check(obj))                             \
<a name='L286'>        dbl = PyFloat_AS_DOUBLE(obj);                   \
<a name='L287'>    <b>else</b> <b>if</b> (<a href='../S/2791.html#L293' title='Defined at 293 in Objects/floatobject.c.'>convert_to_double</a>(&amp;(obj), &amp;(dbl)) &lt; 0)     \
<a name='L288'>        <b>return</b> obj;
<a name='L289'>
<a name='L290'><i><font color='green'>/* Methods */</font></i>
<a name='L291'>
<a name='L292'><b>static</b> <b>int</b>
<a name='L293'><a href='../S/2791.html#L287' title='Refered from 287 in Objects/floatobject.c.'>convert_to_double</a>(PyObject **v, <b>double</b> *dbl)
<a name='L294'><font color='red'>{</font>
<a name='L295'>    <b>register</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = *v;
<a name='L296'>
<a name='L297'>    <b>if</b> (PyLong_Check(obj)) <font color='red'>{</font>
<a name='L298'>        *dbl = <a href='../S/2799.html#L2481' title='Defined at 2481 in Objects/longobject.c.'>PyLong_AsDouble</a>(obj);
<a name='L299'>        <b>if</b> (*dbl == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L300'>            *v = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L301'>            <b>return</b> -1;
<a name='L302'>        <font color='red'>}</font>
<a name='L303'>    <font color='red'>}</font>
<a name='L304'>    <b>else</b> <font color='red'>{</font>
<a name='L305'>        Py_INCREF(Py_NotImplemented);
<a name='L306'>        *v = Py_NotImplemented;
<a name='L307'>        <b>return</b> -1;
<a name='L308'>    <font color='red'>}</font>
<a name='L309'>    <b>return</b> 0;
<a name='L310'><font color='red'>}</font>
<a name='L311'>
<a name='L312'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L313'><a href='../R/7858.html' title='Multiple refered from 3 places.'>float_repr</a>(PyFloatObject *v)
<a name='L314'><font color='red'>{</font>
<a name='L315'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L316'>    <b>char</b> *buf = PyOS_double_to_string(PyFloat_AS_DOUBLE(v),
<a name='L317'>                                      'r', 0,
<a name='L318'>                                      Py_DTSF_ADD_DOT_0,
<a name='L319'>                                      <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L320'>    <b>if</b> (!buf)
<a name='L321'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L322'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(buf);
<a name='L323'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(buf);
<a name='L324'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L325'><font color='red'>}</font>
<a name='L326'>
<a name='L327'><i><font color='green'>/* Comparison is pretty much a nightmare.  When comparing float to float,</font></i>
<a name='L328'><i><font color='green'> * we do it as straightforwardly (and long-windedly) as conceivable, so</font></i>
<a name='L329'><i><font color='green'> * that, e.g., Python x == y delivers the same result as the platform</font></i>
<a name='L330'><i><font color='green'> * C x == y when x and/or y is a NaN.</font></i>
<a name='L331'><i><font color='green'> * When mixing float with an integer type, there's no good *uniform* approach.</font></i>
<a name='L332'><i><font color='green'> * Converting the double to an integer obviously doesn't work, since we</font></i>
<a name='L333'><i><font color='green'> * may lose info from fractional bits.  Converting the integer to a double</font></i>
<a name='L334'><i><font color='green'> * also has two failure modes:  (1) a long int may trigger overflow (too</font></i>
<a name='L335'><i><font color='green'> * large to fit in the dynamic range of a C double); (2) even a C long may have</font></i>
<a name='L336'><i><font color='green'> * more bits than fit in a C double (e.g., on a a 64-bit box long may have</font></i>
<a name='L337'><i><font color='green'> * 63 bits of precision, but a C double probably has only 53), and then</font></i>
<a name='L338'><i><font color='green'> * we can falsely claim equality when low-order integer bits are lost by</font></i>
<a name='L339'><i><font color='green'> * coercion to double.  So this part is painful too.</font></i>
<a name='L340'><i><font color='green'> */</font></i>
<a name='L341'>
<a name='L342'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L343'><a href='../S/2791.html#L1874' title='Refered from 1874 in Objects/floatobject.c.'>float_richcompare</a>(PyObject *v, PyObject *w, <b>int</b> op)
<a name='L344'><font color='red'>{</font>
<a name='L345'>    <b>double</b> i, j;
<a name='L346'>    <b>int</b> r = 0;
<a name='L347'>
<a name='L348'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyFloat_Check(v));
<a name='L349'>    i = PyFloat_AS_DOUBLE(v);
<a name='L350'>
<a name='L351'>    <i><font color='green'>/* Switch on the type of w.  Set i and j to doubles to be compared,</font></i>
<a name='L352'><i><font color='green'>     * and op to the richcomp to use.</font></i>
<a name='L353'><i><font color='green'>     */</font></i>
<a name='L354'>    <b>if</b> (PyFloat_Check(w))
<a name='L355'>        j = PyFloat_AS_DOUBLE(w);
<a name='L356'>
<a name='L357'>    <b>else</b> <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(i)) <font color='red'>{</font>
<a name='L358'>        <b>if</b> (PyLong_Check(w))
<a name='L359'>            <i><font color='green'>/* If i is an infinity, its magnitude exceeds any</font></i>
<a name='L360'><i><font color='green'>             * finite integer, so it doesn't matter which int we</font></i>
<a name='L361'><i><font color='green'>             * compare i with.  If i is a NaN, similarly.</font></i>
<a name='L362'><i><font color='green'>             */</font></i>
<a name='L363'>            j = 0.0;
<a name='L364'>        <b>else</b>
<a name='L365'>            <b>goto</b> Unimplemented;
<a name='L366'>    <font color='red'>}</font>
<a name='L367'>
<a name='L368'>    <b>else</b> <b>if</b> (PyLong_Check(w)) <font color='red'>{</font>
<a name='L369'>        <b>int</b> vsign = i == 0.0 ? 0 : i &lt; 0.0 ? -1 : 1;
<a name='L370'>        <b>int</b> wsign = <a href='../S/2799.html#L640' title='Defined at 640 in Objects/longobject.c.'>_PyLong_Sign</a>(w);
<a name='L371'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> nbits;
<a name='L372'>        <b>int</b> exponent;
<a name='L373'>
<a name='L374'>        <b>if</b> (vsign != wsign) <font color='red'>{</font>
<a name='L375'>            <i><font color='green'>/* Magnitudes are irrelevant -- the signs alone</font></i>
<a name='L376'><i><font color='green'>             * determine the outcome.</font></i>
<a name='L377'><i><font color='green'>             */</font></i>
<a name='L378'>            i = (<b>double</b>)vsign;
<a name='L379'>            j = (<b>double</b>)wsign;
<a name='L380'>            <b>goto</b> <a href='../D/693.html' title='Multiple defined in 2 places.'>Compare</a>;
<a name='L381'>        <font color='red'>}</font>
<a name='L382'>        <i><font color='green'>/* The signs are the same. */</font></i>
<a name='L383'>        <i><font color='green'>/* Convert w to a double if it fits.  In particular, 0 fits. */</font></i>
<a name='L384'>        nbits = <a href='../S/2799.html#L651' title='Defined at 651 in Objects/longobject.c.'>_PyLong_NumBits</a>(w);
<a name='L385'>        <b>if</b> (nbits == (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L386'>            <i><font color='green'>/* This long is so large that size_t isn't big enough</font></i>
<a name='L387'><i><font color='green'>             * to hold the # of bits.  Replace with little doubles</font></i>
<a name='L388'><i><font color='green'>             * that give the same outcome -- w is so large that</font></i>
<a name='L389'><i><font color='green'>             * its magnitude must exceed the magnitude of any</font></i>
<a name='L390'><i><font color='green'>             * finite float.</font></i>
<a name='L391'><i><font color='green'>             */</font></i>
<a name='L392'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L393'>            i = (<b>double</b>)vsign;
<a name='L394'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(wsign != 0);
<a name='L395'>            j = wsign * 2.0;
<a name='L396'>            <b>goto</b> <a href='../D/693.html' title='Multiple defined in 2 places.'>Compare</a>;
<a name='L397'>        <font color='red'>}</font>
<a name='L398'>        <b>if</b> (nbits &lt;= 48) <font color='red'>{</font>
<a name='L399'>            j = <a href='../S/2799.html#L2481' title='Defined at 2481 in Objects/longobject.c.'>PyLong_AsDouble</a>(w);
<a name='L400'>            <i><font color='green'>/* It's impossible that &lt;= 48 bits overflowed. */</font></i>
<a name='L401'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(j != -1.0 || ! <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>());
<a name='L402'>            <b>goto</b> <a href='../D/693.html' title='Multiple defined in 2 places.'>Compare</a>;
<a name='L403'>        <font color='red'>}</font>
<a name='L404'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(wsign != 0); <i><font color='green'>/* else nbits was 0 */</font></i>
<a name='L405'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(vsign != 0); <i><font color='green'>/* if vsign were 0, then since wsign is</font></i>
<a name='L406'><i><font color='green'>                             * not 0, we would have taken the</font></i>
<a name='L407'><i><font color='green'>                             * vsign != wsign branch at the start */</font></i>
<a name='L408'>        <i><font color='green'>/* We want to work with non-negative numbers. */</font></i>
<a name='L409'>        <b>if</b> (vsign &lt; 0) <font color='red'>{</font>
<a name='L410'>            <i><font color='green'>/* "Multiply both sides" by -1; this also swaps the</font></i>
<a name='L411'><i><font color='green'>             * comparator.</font></i>
<a name='L412'><i><font color='green'>             */</font></i>
<a name='L413'>            i = -i;
<a name='L414'>            op = _Py_SwappedOp[op];
<a name='L415'>        <font color='red'>}</font>
<a name='L416'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(i &gt; 0.0);
<a name='L417'>        (<b>void</b>) frexp(i, &amp;exponent);
<a name='L418'>        <i><font color='green'>/* exponent is the # of bits in v before the radix point;</font></i>
<a name='L419'><i><font color='green'>         * we know that nbits (the # of bits in w) &gt; 48 at this point</font></i>
<a name='L420'><i><font color='green'>         */</font></i>
<a name='L421'>        <b>if</b> (exponent &lt; 0 || (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)exponent &lt; nbits) <font color='red'>{</font>
<a name='L422'>            i = 1.0;
<a name='L423'>            j = 2.0;
<a name='L424'>            <b>goto</b> <a href='../D/693.html' title='Multiple defined in 2 places.'>Compare</a>;
<a name='L425'>        <font color='red'>}</font>
<a name='L426'>        <b>if</b> ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)exponent &gt; nbits) <font color='red'>{</font>
<a name='L427'>            i = 2.0;
<a name='L428'>            j = 1.0;
<a name='L429'>            <b>goto</b> <a href='../D/693.html' title='Multiple defined in 2 places.'>Compare</a>;
<a name='L430'>        <font color='red'>}</font>
<a name='L431'>        <i><font color='green'>/* v and w have the same number of bits before the radix</font></i>
<a name='L432'><i><font color='green'>         * point.  Construct two longs that have the same comparison</font></i>
<a name='L433'><i><font color='green'>         * outcome.</font></i>
<a name='L434'><i><font color='green'>         */</font></i>
<a name='L435'>        <font color='red'>{</font>
<a name='L436'>            <b>double</b> fracpart;
<a name='L437'>            <b>double</b> intpart;
<a name='L438'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L439'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *one = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L440'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *vv = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L441'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ww = w;
<a name='L442'>
<a name='L443'>            <b>if</b> (wsign &lt; 0) <font color='red'>{</font>
<a name='L444'>                ww = <a href='../S/2775.html#L1136' title='Defined at 1136 in Objects/abstract.c.'>PyNumber_Negative</a>(w);
<a name='L445'>                <b>if</b> (ww == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L446'>                    <b>goto</b> Error;
<a name='L447'>            <font color='red'>}</font>
<a name='L448'>            <b>else</b>
<a name='L449'>                Py_INCREF(ww);
<a name='L450'>
<a name='L451'>            fracpart = modf(i, &amp;intpart);
<a name='L452'>            vv = <a href='../S/2799.html#L274' title='Defined at 274 in Objects/longobject.c.'>PyLong_FromDouble</a>(intpart);
<a name='L453'>            <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L454'>                <b>goto</b> Error;
<a name='L455'>
<a name='L456'>            <b>if</b> (fracpart != 0.0) <font color='red'>{</font>
<a name='L457'>                <i><font color='green'>/* Shift left, and or a 1 bit into vv</font></i>
<a name='L458'><i><font color='green'>                 * to represent the lost fraction.</font></i>
<a name='L459'><i><font color='green'>                 */</font></i>
<a name='L460'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *temp;
<a name='L461'>
<a name='L462'>                one = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(1);
<a name='L463'>                <b>if</b> (one == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L464'>                    <b>goto</b> Error;
<a name='L465'>
<a name='L466'>                temp = PyNumber_Lshift(ww, one);
<a name='L467'>                <b>if</b> (temp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L468'>                    <b>goto</b> Error;
<a name='L469'>                Py_DECREF(ww);
<a name='L470'>                ww = temp;
<a name='L471'>
<a name='L472'>                temp = PyNumber_Lshift(vv, one);
<a name='L473'>                <b>if</b> (temp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L474'>                    <b>goto</b> Error;
<a name='L475'>                Py_DECREF(vv);
<a name='L476'>                vv = temp;
<a name='L477'>
<a name='L478'>                temp = PyNumber_Or(vv, one);
<a name='L479'>                <b>if</b> (temp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L480'>                    <b>goto</b> Error;
<a name='L481'>                Py_DECREF(vv);
<a name='L482'>                vv = temp;
<a name='L483'>            <font color='red'>}</font>
<a name='L484'>
<a name='L485'>            r = <a href='../S/2803.html#L607' title='Defined at 607 in Objects/object.c.'>PyObject_RichCompareBool</a>(vv, ww, op);
<a name='L486'>            <b>if</b> (r &lt; 0)
<a name='L487'>                <b>goto</b> Error;
<a name='L488'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(r);
<a name='L489'>         Error:
<a name='L490'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(vv);
<a name='L491'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(ww);
<a name='L492'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(one);
<a name='L493'>            <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L494'>        <font color='red'>}</font>
<a name='L495'>    <font color='red'>}</font> <i><font color='green'>/* else if (PyLong_Check(w)) */</font></i>
<a name='L496'>
<a name='L497'>    <b>else</b>        <i><font color='green'>/* w isn't float, int, or long */</font></i>
<a name='L498'>        <b>goto</b> Unimplemented;
<a name='L499'>
<a name='L500'> <a href='../D/693.html' title='Multiple defined in 2 places.'>Compare</a>:
<a name='L501'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("richcompare", <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L502'>    <b>switch</b> (op) <font color='red'>{</font>
<a name='L503'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>:
<a name='L504'>        r = i == j;
<a name='L505'>        <b>break</b>;
<a name='L506'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_NE</a>:
<a name='L507'>        r = i != j;
<a name='L508'>        <b>break</b>;
<a name='L509'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LE</a>:
<a name='L510'>        r = i &lt;= j;
<a name='L511'>        <b>break</b>;
<a name='L512'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_GE</a>:
<a name='L513'>        r = i &gt;= j;
<a name='L514'>        <b>break</b>;
<a name='L515'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LT</a>:
<a name='L516'>        r = i &lt; j;
<a name='L517'>        <b>break</b>;
<a name='L518'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_GT</a>:
<a name='L519'>        r = i &gt; j;
<a name='L520'>        <b>break</b>;
<a name='L521'>    <font color='red'>}</font>
<a name='L522'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(r)
<a name='L523'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(r);
<a name='L524'>
<a name='L525'> Unimplemented:
<a name='L526'>    Py_INCREF(Py_NotImplemented);
<a name='L527'>    <b>return</b> Py_NotImplemented;
<a name='L528'><font color='red'>}</font>
<a name='L529'>
<a name='L530'><b>static</b> <a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>
<a name='L531'><a href='../S/2791.html#L1864' title='Refered from 1864 in Objects/floatobject.c.'>float_hash</a>(PyFloatObject *v)
<a name='L532'><font color='red'>{</font>
<a name='L533'>    <b>return</b> <a href='../S/2803.html#L690' title='Defined at 690 in Objects/object.c.'>_Py_HashDouble</a>(v-&gt;ob_fval);
<a name='L534'><font color='red'>}</font>
<a name='L535'>
<a name='L536'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L537'><a href='../S/2791.html#L1815' title='Refered from 1815 in Objects/floatobject.c.'>float_add</a>(PyObject *v, PyObject *w)
<a name='L538'><font color='red'>{</font>
<a name='L539'>    <b>double</b> a,<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L540'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, a);
<a name='L541'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L542'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("add", <b>return</b> 0)
<a name='L543'>    a = a + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L544'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(a)
<a name='L545'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(a);
<a name='L546'><font color='red'>}</font>
<a name='L547'>
<a name='L548'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L549'><a href='../S/2791.html#L1816' title='Refered from 1816 in Objects/floatobject.c.'>float_sub</a>(PyObject *v, PyObject *w)
<a name='L550'><font color='red'>{</font>
<a name='L551'>    <b>double</b> a,<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L552'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, a);
<a name='L553'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L554'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("subtract", <b>return</b> 0)
<a name='L555'>    a = a - <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L556'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(a)
<a name='L557'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(a);
<a name='L558'><font color='red'>}</font>
<a name='L559'>
<a name='L560'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L561'><a href='../S/2791.html#L1817' title='Refered from 1817 in Objects/floatobject.c.'>float_mul</a>(PyObject *v, PyObject *w)
<a name='L562'><font color='red'>{</font>
<a name='L563'>    <b>double</b> a,<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L564'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, a);
<a name='L565'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L566'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("multiply", <b>return</b> 0)
<a name='L567'>    a = a * <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L568'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(a)
<a name='L569'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(a);
<a name='L570'><font color='red'>}</font>
<a name='L571'>
<a name='L572'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L573'><a href='../S/2791.html#L1845' title='Refered from 1845 in Objects/floatobject.c.'>float_div</a>(PyObject *v, PyObject *w)
<a name='L574'><font color='red'>{</font>
<a name='L575'>    <b>double</b> a,<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L576'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, a);
<a name='L577'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(w, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L578'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == 0.0) <font color='red'>{</font>
<a name='L579'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ZeroDivisionError,
<a name='L580'>                        "float division by zero");
<a name='L581'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L582'>    <font color='red'>}</font>
<a name='L583'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("divide", <b>return</b> 0)
<a name='L584'>    a = a / <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L585'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(a)
<a name='L586'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(a);
<a name='L587'><font color='red'>}</font>
<a name='L588'>
<a name='L589'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L590'><a href='../S/2791.html#L1818' title='Refered from 1818 in Objects/floatobject.c.'>float_rem</a>(PyObject *v, PyObject *w)
<a name='L591'><font color='red'>{</font>
<a name='L592'>    <b>double</b> vx, wx;
<a name='L593'>    <b>double</b> mod;
<a name='L594'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, vx);
<a name='L595'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(w, wx);
<a name='L596'>    <b>if</b> (wx == 0.0) <font color='red'>{</font>
<a name='L597'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ZeroDivisionError,
<a name='L598'>                        "float modulo");
<a name='L599'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L600'>    <font color='red'>}</font>
<a name='L601'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("modulo", <b>return</b> 0)
<a name='L602'>    mod = fmod(vx, wx);
<a name='L603'>    <b>if</b> (mod) <font color='red'>{</font>
<a name='L604'>        <i><font color='green'>/* ensure the remainder has the same sign as the denominator */</font></i>
<a name='L605'>        <b>if</b> ((wx &lt; 0) != (mod &lt; 0)) <font color='red'>{</font>
<a name='L606'>            mod += wx;
<a name='L607'>        <font color='red'>}</font>
<a name='L608'>    <font color='red'>}</font>
<a name='L609'>    <b>else</b> <font color='red'>{</font>
<a name='L610'>        <i><font color='green'>/* the remainder is zero, and in the presence of signed zeroes</font></i>
<a name='L611'><i><font color='green'>           fmod returns different results across platforms; ensure</font></i>
<a name='L612'><i><font color='green'>           it has the same sign as the denominator. */</font></i>
<a name='L613'>        mod = <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0.0, wx);
<a name='L614'>    <font color='red'>}</font>
<a name='L615'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(mod)
<a name='L616'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(mod);
<a name='L617'><font color='red'>}</font>
<a name='L618'>
<a name='L619'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L620'><a href='../R/7839.html' title='Multiple refered from 2 places.'>float_divmod</a>(PyObject *v, PyObject *w)
<a name='L621'><font color='red'>{</font>
<a name='L622'>    <b>double</b> vx, wx;
<a name='L623'>    <b>double</b> div, mod, floordiv;
<a name='L624'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, vx);
<a name='L625'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(w, wx);
<a name='L626'>    <b>if</b> (wx == 0.0) <font color='red'>{</font>
<a name='L627'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ZeroDivisionError, "float divmod()");
<a name='L628'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L629'>    <font color='red'>}</font>
<a name='L630'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("divmod", <b>return</b> 0)
<a name='L631'>    mod = fmod(vx, wx);
<a name='L632'>    <i><font color='green'>/* fmod is typically exact, so vx-mod is *mathematically* an</font></i>
<a name='L633'><i><font color='green'>       exact multiple of wx.  But this is fp arithmetic, and fp</font></i>
<a name='L634'><i><font color='green'>       vx - mod is an approximation; the result is that div may</font></i>
<a name='L635'><i><font color='green'>       not be an exact integral value after the division, although</font></i>
<a name='L636'><i><font color='green'>       it will always be very close to one.</font></i>
<a name='L637'><i><font color='green'>    */</font></i>
<a name='L638'>    div = (vx - mod) / wx;
<a name='L639'>    <b>if</b> (mod) <font color='red'>{</font>
<a name='L640'>        <i><font color='green'>/* ensure the remainder has the same sign as the denominator */</font></i>
<a name='L641'>        <b>if</b> ((wx &lt; 0) != (mod &lt; 0)) <font color='red'>{</font>
<a name='L642'>            mod += wx;
<a name='L643'>            div -= 1.0;
<a name='L644'>        <font color='red'>}</font>
<a name='L645'>    <font color='red'>}</font>
<a name='L646'>    <b>else</b> <font color='red'>{</font>
<a name='L647'>        <i><font color='green'>/* the remainder is zero, and in the presence of signed zeroes</font></i>
<a name='L648'><i><font color='green'>           fmod returns different results across platforms; ensure</font></i>
<a name='L649'><i><font color='green'>           it has the same sign as the denominator. */</font></i>
<a name='L650'>        mod = <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0.0, wx);
<a name='L651'>    <font color='red'>}</font>
<a name='L652'>    <i><font color='green'>/* snap quotient to nearest integral value */</font></i>
<a name='L653'>    <b>if</b> (div) <font color='red'>{</font>
<a name='L654'>        floordiv = floor(div);
<a name='L655'>        <b>if</b> (div - floordiv &gt; 0.5)
<a name='L656'>            floordiv += 1.0;
<a name='L657'>    <font color='red'>}</font>
<a name='L658'>    <b>else</b> <font color='red'>{</font>
<a name='L659'>        <i><font color='green'>/* div is zero - get the same sign as the true quotient */</font></i>
<a name='L660'>        floordiv = <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0.0, vx / wx); <i><font color='green'>/* zero w/ sign of vx/wx */</font></i>
<a name='L661'>    <font color='red'>}</font>
<a name='L662'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(floordiv)
<a name='L663'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(dd)", floordiv, mod);
<a name='L664'><font color='red'>}</font>
<a name='L665'>
<a name='L666'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L667'><a href='../S/2791.html#L1844' title='Refered from 1844 in Objects/floatobject.c.'>float_floor_div</a>(PyObject *v, PyObject *w)
<a name='L668'><font color='red'>{</font>
<a name='L669'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *t, *r;
<a name='L670'>
<a name='L671'>    t = <a href='../S/2791.html#L620' title='Defined at 620 in Objects/floatobject.c.'>float_divmod</a>(v, w);
<a name='L672'>    <b>if</b> (t == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || t == Py_NotImplemented)
<a name='L673'>        <b>return</b> t;
<a name='L674'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyTuple_CheckExact(t));
<a name='L675'>    r = PyTuple_GET_ITEM(t, 0);
<a name='L676'>    Py_INCREF(r);
<a name='L677'>    Py_DECREF(t);
<a name='L678'>    <b>return</b> r;
<a name='L679'><font color='red'>}</font>
<a name='L680'>
<a name='L681'><i><font color='green'>/* determine whether x is an odd integer or not;  assumes that</font></i>
<a name='L682'><i><font color='green'>   x is not an infinity or nan. */</font></i>
<a name='L683'><font color='darkred'>#define</font> <a href='../R/766.html' title='Multiple refered from 3 places.'>DOUBLE_IS_ODD_INTEGER</a>(x) (fmod(fabs(x), 2.0) == 1.0)
<a name='L684'>
<a name='L685'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L686'><a href='../S/2791.html#L1820' title='Refered from 1820 in Objects/floatobject.c.'>float_pow</a>(PyObject *v, PyObject *w, PyObject *z)
<a name='L687'><font color='red'>{</font>
<a name='L688'>    <b>double</b> iv, iw, ix;
<a name='L689'>    <b>int</b> negate_result = 0;
<a name='L690'>
<a name='L691'>    <b>if</b> ((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)z != Py_None) <font color='red'>{</font>
<a name='L692'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "pow() 3rd argument not "
<a name='L693'>            "allowed unless all arguments are integers");
<a name='L694'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L695'>    <font color='red'>}</font>
<a name='L696'>
<a name='L697'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, iv);
<a name='L698'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(w, iw);
<a name='L699'>
<a name='L700'>    <i><font color='green'>/* Sort out special cases here instead of relying on pow() */</font></i>
<a name='L701'>    <b>if</b> (iw == 0) <font color='red'>{</font>              <i><font color='green'>/* v**0 is 1, even 0**0 */</font></i>
<a name='L702'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(1.0);
<a name='L703'>    <font color='red'>}</font>
<a name='L704'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(iv)) <font color='red'>{</font>        <i><font color='green'>/* nan**w = nan, unless w == 0 */</font></i>
<a name='L705'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(iv);
<a name='L706'>    <font color='red'>}</font>
<a name='L707'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(iw)) <font color='red'>{</font>        <i><font color='green'>/* v**nan = nan, unless v == 1; 1**nan = 1 */</font></i>
<a name='L708'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(iv == 1.0 ? 1.0 : iw);
<a name='L709'>    <font color='red'>}</font>
<a name='L710'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(iw)) <font color='red'>{</font>
<a name='L711'>        <i><font color='green'>/* v**inf is: 0.0 if abs(v) &lt; 1; 1.0 if abs(v) == 1; inf if</font></i>
<a name='L712'><i><font color='green'>         *     abs(v) &gt; 1 (including case where v infinite)</font></i>
<a name='L713'><i><font color='green'>         *</font></i>
<a name='L714'><i><font color='green'>         * v**-inf is: inf if abs(v) &lt; 1; 1.0 if abs(v) == 1; 0.0 if</font></i>
<a name='L715'><i><font color='green'>         *     abs(v) &gt; 1 (including case where v infinite)</font></i>
<a name='L716'><i><font color='green'>         */</font></i>
<a name='L717'>        iv = fabs(iv);
<a name='L718'>        <b>if</b> (iv == 1.0)
<a name='L719'>            <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(1.0);
<a name='L720'>        <b>else</b> <b>if</b> ((iw &gt; 0.0) == (iv &gt; 1.0))
<a name='L721'>            <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(fabs(iw)); <i><font color='green'>/* return inf */</font></i>
<a name='L722'>        <b>else</b>
<a name='L723'>            <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(0.0);
<a name='L724'>    <font color='red'>}</font>
<a name='L725'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(iv)) <font color='red'>{</font>
<a name='L726'>        <i><font color='green'>/* (+-inf)**w is: inf for w positive, 0 for w negative; in</font></i>
<a name='L727'><i><font color='green'>         *     both cases, we need to add the appropriate sign if w is</font></i>
<a name='L728'><i><font color='green'>         *     an odd integer.</font></i>
<a name='L729'><i><font color='green'>         */</font></i>
<a name='L730'>        <b>int</b> iw_is_odd = <a href='../D/823.html' title='Multiple defined in 2 places.'>DOUBLE_IS_ODD_INTEGER</a>(iw);
<a name='L731'>        <b>if</b> (iw &gt; 0.0)
<a name='L732'>            <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(iw_is_odd ? iv : fabs(iv));
<a name='L733'>        <b>else</b>
<a name='L734'>            <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(iw_is_odd ?
<a name='L735'>                                      <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0.0, iv) : 0.0);
<a name='L736'>    <font color='red'>}</font>
<a name='L737'>    <b>if</b> (iv == 0.0) <font color='red'>{</font>  <i><font color='green'>/* 0**w is: 0 for w positive, 1 for w zero</font></i>
<a name='L738'><i><font color='green'>                         (already dealt with above), and an error</font></i>
<a name='L739'><i><font color='green'>                         if w is negative. */</font></i>
<a name='L740'>        <b>int</b> iw_is_odd = <a href='../D/823.html' title='Multiple defined in 2 places.'>DOUBLE_IS_ODD_INTEGER</a>(iw);
<a name='L741'>        <b>if</b> (iw &lt; 0.0) <font color='red'>{</font>
<a name='L742'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ZeroDivisionError,
<a name='L743'>                            "0.0 cannot be raised to a "
<a name='L744'>                            "negative power");
<a name='L745'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L746'>        <font color='red'>}</font>
<a name='L747'>        <i><font color='green'>/* use correct sign if iw is odd */</font></i>
<a name='L748'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(iw_is_odd ? iv : 0.0);
<a name='L749'>    <font color='red'>}</font>
<a name='L750'>
<a name='L751'>    <b>if</b> (iv &lt; 0.0) <font color='red'>{</font>
<a name='L752'>        <i><font color='green'>/* Whether this is an error is a mess, and bumps into libm</font></i>
<a name='L753'><i><font color='green'>         * bugs so we have to figure it out ourselves.</font></i>
<a name='L754'><i><font color='green'>         */</font></i>
<a name='L755'>        <b>if</b> (iw != floor(iw)) <font color='red'>{</font>
<a name='L756'>            <i><font color='green'>/* Negative numbers raised to fractional powers</font></i>
<a name='L757'><i><font color='green'>             * become complex.</font></i>
<a name='L758'><i><font color='green'>             */</font></i>
<a name='L759'>            <b>return</b> PyComplex_Type.tp_as_number-&gt;nb_power(v, w, z);
<a name='L760'>        <font color='red'>}</font>
<a name='L761'>        <i><font color='green'>/* iw is an exact integer, albeit perhaps a very large</font></i>
<a name='L762'><i><font color='green'>         * one.  Replace iv by its absolute value and remember</font></i>
<a name='L763'><i><font color='green'>         * to negate the pow result if iw is odd.</font></i>
<a name='L764'><i><font color='green'>         */</font></i>
<a name='L765'>        iv = -iv;
<a name='L766'>        negate_result = <a href='../D/823.html' title='Multiple defined in 2 places.'>DOUBLE_IS_ODD_INTEGER</a>(iw);
<a name='L767'>    <font color='red'>}</font>
<a name='L768'>
<a name='L769'>    <b>if</b> (iv == 1.0) <font color='red'>{</font> <i><font color='green'>/* 1**w is 1, even 1**inf and 1**nan */</font></i>
<a name='L770'>        <i><font color='green'>/* (-1) ** large_integer also ends up here.  Here's an</font></i>
<a name='L771'><i><font color='green'>         * extract from the comments for the previous</font></i>
<a name='L772'><i><font color='green'>         * implementation explaining why this special case is</font></i>
<a name='L773'><i><font color='green'>         * necessary:</font></i>
<a name='L774'><i><font color='green'>         *</font></i>
<a name='L775'><i><font color='green'>         * -1 raised to an exact integer should never be exceptional.</font></i>
<a name='L776'><i><font color='green'>         * Alas, some libms (chiefly glibc as of early 2003) return</font></i>
<a name='L777'><i><font color='green'>         * NaN and set EDOM on pow(-1, large_int) if the int doesn't</font></i>
<a name='L778'><i><font color='green'>         * happen to be representable in a *C* integer.  That's a</font></i>
<a name='L779'><i><font color='green'>         * bug.</font></i>
<a name='L780'><i><font color='green'>         */</font></i>
<a name='L781'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(negate_result ? -1.0 : 1.0);
<a name='L782'>    <font color='red'>}</font>
<a name='L783'>
<a name='L784'>    <i><font color='green'>/* Now iv and iw are finite, iw is nonzero, and iv is</font></i>
<a name='L785'><i><font color='green'>     * positive and not equal to 1.0.  We finally allow</font></i>
<a name='L786'><i><font color='green'>     * the platform pow to step in and do the rest.</font></i>
<a name='L787'><i><font color='green'>     */</font></i>
<a name='L788'>    errno = 0;
<a name='L789'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("pow", <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L790'>    ix = pow(iv, iw);
<a name='L791'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(ix)
<a name='L792'>    <a href='../S/565.html#L495' title='Defined at 495 in Include/pyport.h.'>Py_ADJUST_ERANGE1</a>(ix);
<a name='L793'>    <b>if</b> (negate_result)
<a name='L794'>        ix = -ix;
<a name='L795'>
<a name='L796'>    <b>if</b> (errno != 0) <font color='red'>{</font>
<a name='L797'>        <i><font color='green'>/* We don't expect any errno value other than ERANGE, but</font></i>
<a name='L798'><i><font color='green'>         * the range of libm bugs appears unbounded.</font></i>
<a name='L799'><i><font color='green'>         */</font></i>
<a name='L800'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(errno == ERANGE ? PyExc_OverflowError :
<a name='L801'>                             PyExc_ValueError);
<a name='L802'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L803'>    <font color='red'>}</font>
<a name='L804'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(ix);
<a name='L805'><font color='red'>}</font>
<a name='L806'>
<a name='L807'><font color='darkred'>#undef</font> <a href='../R/766.html' title='Multiple refered from 3 places.'>DOUBLE_IS_ODD_INTEGER</a>
<a name='L808'>
<a name='L809'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L810'><a href='../S/2791.html#L1821' title='Refered from 1821 in Objects/floatobject.c.'>float_neg</a>(PyFloatObject *v)
<a name='L811'><font color='red'>{</font>
<a name='L812'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(-v-&gt;ob_fval);
<a name='L813'><font color='red'>}</font>
<a name='L814'>
<a name='L815'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L816'><a href='../S/2791.html#L1823' title='Refered from 1823 in Objects/floatobject.c.'>float_abs</a>(PyFloatObject *v)
<a name='L817'><font color='red'>{</font>
<a name='L818'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(fabs(v-&gt;ob_fval));
<a name='L819'><font color='red'>}</font>
<a name='L820'>
<a name='L821'><b>static</b> <b>int</b>
<a name='L822'><a href='../S/2791.html#L1824' title='Refered from 1824 in Objects/floatobject.c.'>float_bool</a>(PyFloatObject *v)
<a name='L823'><font color='red'>{</font>
<a name='L824'>    <b>return</b> v-&gt;ob_fval != 0.0;
<a name='L825'><font color='red'>}</font>
<a name='L826'>
<a name='L827'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L828'><a href='../S/2791.html#L1776' title='Refered from 1776 in Objects/floatobject.c.'>float_is_integer</a>(PyObject *v)
<a name='L829'><font color='red'>{</font>
<a name='L830'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L831'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *o;
<a name='L832'>
<a name='L833'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L834'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L835'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x))
<a name='L836'>        Py_RETURN_FALSE;
<a name='L837'>    errno = 0;
<a name='L838'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("is_integer", <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L839'>    o = (floor(x) == x) ? Py_True : Py_False;
<a name='L840'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(x)
<a name='L841'>    <b>if</b> (errno != 0) <font color='red'>{</font>
<a name='L842'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(errno == ERANGE ? PyExc_OverflowError :
<a name='L843'>                             PyExc_ValueError);
<a name='L844'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L845'>    <font color='red'>}</font>
<a name='L846'>    Py_INCREF(o);
<a name='L847'>    <b>return</b> o;
<a name='L848'><font color='red'>}</font>
<a name='L849'>
<a name='L850'><font color='darkred'>#if</font> 0
<a name='L851'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L852'><a href='../S/2791.html#L1779' title='Refered from 1779 in Objects/floatobject.c.'>float_is_inf</a>(PyObject *v)
<a name='L853'><font color='red'>{</font>
<a name='L854'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L855'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L856'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L857'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x));
<a name='L858'><font color='red'>}</font>
<a name='L859'>
<a name='L860'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L861'><a href='../S/2791.html#L1783' title='Refered from 1783 in Objects/floatobject.c.'>float_is_nan</a>(PyObject *v)
<a name='L862'><font color='red'>{</font>
<a name='L863'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L864'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L865'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L866'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x));
<a name='L867'><font color='red'>}</font>
<a name='L868'>
<a name='L869'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L870'><a href='../S/2791.html#L1781' title='Refered from 1781 in Objects/floatobject.c.'>float_is_finite</a>(PyObject *v)
<a name='L871'><font color='red'>{</font>
<a name='L872'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L873'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L874'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L875'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x));
<a name='L876'><font color='red'>}</font>
<a name='L877'><font color='darkred'>#endif</font>
<a name='L878'>
<a name='L879'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L880'><a href='../R/7864.html' title='Multiple refered from 2 places.'>float_trunc</a>(PyObject *v)
<a name='L881'><font color='red'>{</font>
<a name='L882'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L883'>    <b>double</b> wholepart;           <i><font color='green'>/* integral portion of x, rounded toward 0 */</font></i>
<a name='L884'>
<a name='L885'>    (<b>void</b>)modf(x, &amp;wholepart);
<a name='L886'>    <i><font color='green'>/* Try to get out cheap if this fits in a Python int.  The attempt</font></i>
<a name='L887'><i><font color='green'>     * to cast to long must be protected, as C doesn't define what</font></i>
<a name='L888'><i><font color='green'>     * happens if the double is too big to fit in a long.  Some rare</font></i>
<a name='L889'><i><font color='green'>     * systems raise an exception then (RISCOS was mentioned as one,</font></i>
<a name='L890'><i><font color='green'>     * and someone using a non-default option on Sun also bumped into</font></i>
<a name='L891'><i><font color='green'>     * that).  Note that checking for &gt;= and &lt;= LONG_{MIN,MAX} would</font></i>
<a name='L892'><i><font color='green'>     * still be vulnerable:  if a long has more bits of precision than</font></i>
<a name='L893'><i><font color='green'>     * a double, casting MIN/MAX to double may yield an approximation,</font></i>
<a name='L894'><i><font color='green'>     * and if that's rounded up, then, e.g., wholepart=LONG_MAX+1 would</font></i>
<a name='L895'><i><font color='green'>     * yield true from the C expression wholepart&lt;=LONG_MAX, despite</font></i>
<a name='L896'><i><font color='green'>     * that wholepart is actually greater than LONG_MAX.</font></i>
<a name='L897'><i><font color='green'>     */</font></i>
<a name='L898'>    <b>if</b> (<a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a> &lt; wholepart &amp;&amp; wholepart &lt; <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>) <font color='red'>{</font>
<a name='L899'>        <b>const</b> <b>long</b> aslong = (<b>long</b>)wholepart;
<a name='L900'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(aslong);
<a name='L901'>    <font color='red'>}</font>
<a name='L902'>    <b>return</b> <a href='../S/2799.html#L274' title='Defined at 274 in Objects/longobject.c.'>PyLong_FromDouble</a>(wholepart);
<a name='L903'><font color='red'>}</font>
<a name='L904'>
<a name='L905'><i><font color='green'>/* double_round: rounds a finite double to the closest multiple of</font></i>
<a name='L906'><i><font color='green'>   10**-ndigits; here ndigits is within reasonable bounds (typically, -308 &lt;=</font></i>
<a name='L907'><i><font color='green'>   ndigits &lt;= 323).  Returns a Python float, or sets a Python error and</font></i>
<a name='L908'><i><font color='green'>   returns NULL on failure (OverflowError and memory errors are possible). */</font></i>
<a name='L909'>
<a name='L910'><font color='darkred'>#ifndef</font> <a href='../D/2612.html' title='Multiple defined in 2 places.'>PY_NO_SHORT_FLOAT_REPR</a>
<a name='L911'><i><font color='green'>/* version of double_round that uses the correctly-rounded string&lt;-&gt;double</font></i>
<a name='L912'><i><font color='green'>   conversions from Python/dtoa.c */</font></i>
<a name='L913'>
<a name='L914'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L915'><a href='../S/2791.html#L1057' title='Refered from 1057 in Objects/floatobject.c.'>double_round</a>(<b>double</b> x, <b>int</b> ndigits) <font color='red'>{</font>
<a name='L916'>
<a name='L917'>    <b>double</b> rounded;
<a name='L918'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> buflen, mybuflen=100;
<a name='L919'>    <b>char</b> *buf, *buf_end, shortbuf[100], *mybuf=shortbuf;
<a name='L920'>    <b>int</b> decpt, sign;
<a name='L921'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L922'>
<a name='L923'>    <i><font color='green'>/* round to a decimal string */</font></i>
<a name='L924'>    buf = <a href='../S/3095.html#L2314' title='Defined at 2314 in Python/dtoa.c.'>_Py_dg_dtoa</a>(x, 3, ndigits, &amp;decpt, &amp;sign, &amp;buf_end);
<a name='L925'>    <b>if</b> (buf == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L926'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L927'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L928'>    <font color='red'>}</font>
<a name='L929'>
<a name='L930'>    <i><font color='green'>/* Get new buffer if shortbuf is too small.  Space needed &lt;= buf_end -</font></i>
<a name='L931'><i><font color='green'>    buf + 8: (1 extra for '0', 1 for sign, 5 for exp, 1 for '\0').  */</font></i>
<a name='L932'>    buflen = buf_end - buf;
<a name='L933'>    <b>if</b> (buflen + 8 &gt; mybuflen) <font color='red'>{</font>
<a name='L934'>        mybuflen = buflen+8;
<a name='L935'>        mybuf = (<b>char</b> *)<a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>(mybuflen);
<a name='L936'>        <b>if</b> (mybuf == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L937'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L938'>            <b>goto</b> exit;
<a name='L939'>        <font color='red'>}</font>
<a name='L940'>    <font color='red'>}</font>
<a name='L941'>    <i><font color='green'>/* copy buf to mybuf, adding exponent, sign and leading 0 */</font></i>
<a name='L942'>    <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(mybuf, mybuflen, "%s0%se%d", (sign ? "-" : ""),
<a name='L943'>                  buf, decpt - (<b>int</b>)buflen);
<a name='L944'>
<a name='L945'>    <i><font color='green'>/* and convert the resulting string back to a double */</font></i>
<a name='L946'>    errno = 0;
<a name='L947'>    rounded = <a href='../S/3095.html#L1490' title='Defined at 1490 in Python/dtoa.c.'>_Py_dg_strtod</a>(mybuf, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L948'>    <b>if</b> (errno == ERANGE &amp;&amp; fabs(rounded) &gt;= 1.)
<a name='L949'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L950'>                        "rounded value too large to represent");
<a name='L951'>    <b>else</b>
<a name='L952'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(rounded);
<a name='L953'>
<a name='L954'>    <i><font color='green'>/* done computing value;  now clean up */</font></i>
<a name='L955'>    <b>if</b> (mybuf != shortbuf)
<a name='L956'>        <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(mybuf);
<a name='L957'>  exit:
<a name='L958'>    <a href='../S/3095.html#L2268' title='Defined at 2268 in Python/dtoa.c.'>_Py_dg_freedtoa</a>(buf);
<a name='L959'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L960'><font color='red'>}</font>
<a name='L961'>
<a name='L962'><font color='darkred'>#else</font> <i><font color='green'>/* PY_NO_SHORT_FLOAT_REPR */</font></i>
<a name='L963'>
<a name='L964'><i><font color='green'>/* fallback version, to be used when correctly rounded binary&lt;-&gt;decimal</font></i>
<a name='L965'><i><font color='green'>   conversions aren't available */</font></i>
<a name='L966'>
<a name='L967'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L968'><a href='../S/2791.html#L1057' title='Refered from 1057 in Objects/floatobject.c.'>double_round</a>(<b>double</b> x, <b>int</b> ndigits) <font color='red'>{</font>
<a name='L969'>    <b>double</b> pow1, pow2, y, z;
<a name='L970'>    <b>if</b> (ndigits &gt;= 0) <font color='red'>{</font>
<a name='L971'>        <b>if</b> (ndigits &gt; 22) <font color='red'>{</font>
<a name='L972'>            <i><font color='green'>/* pow1 and pow2 are each safe from overflow, but</font></i>
<a name='L973'><i><font color='green'>               pow1*pow2 ~= pow(10.0, ndigits) might overflow */</font></i>
<a name='L974'>            pow1 = pow(10.0, (<b>double</b>)(ndigits-22));
<a name='L975'>            pow2 = 1e22;
<a name='L976'>        <font color='red'>}</font>
<a name='L977'>        <b>else</b> <font color='red'>{</font>
<a name='L978'>            pow1 = pow(10.0, (<b>double</b>)ndigits);
<a name='L979'>            pow2 = 1.0;
<a name='L980'>        <font color='red'>}</font>
<a name='L981'>        y = (x*pow1)*pow2;
<a name='L982'>        <i><font color='green'>/* if y overflows, then rounded value is exactly x */</font></i>
<a name='L983'>        <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(y))
<a name='L984'>            <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x);
<a name='L985'>    <font color='red'>}</font>
<a name='L986'>    <b>else</b> <font color='red'>{</font>
<a name='L987'>        pow1 = pow(10.0, (<b>double</b>)-ndigits);
<a name='L988'>        pow2 = 1.0; <i><font color='green'>/* unused; silences a gcc compiler warning */</font></i>
<a name='L989'>        y = x / pow1;
<a name='L990'>    <font color='red'>}</font>
<a name='L991'>
<a name='L992'>    z = <a href='../S/3133.html#L70' title='Defined at 70 in Python/pymath.c.'>round</a>(y);
<a name='L993'>    <b>if</b> (fabs(y-z) == 0.5)
<a name='L994'>        <i><font color='green'>/* halfway between two integers; use round-half-even */</font></i>
<a name='L995'>        z = 2.0*<a href='../S/3133.html#L70' title='Defined at 70 in Python/pymath.c.'>round</a>(y/2.0);
<a name='L996'>
<a name='L997'>    <b>if</b> (ndigits &gt;= 0)
<a name='L998'>        z = (z / pow2) / pow1;
<a name='L999'>    <b>else</b>
<a name='L1000'>        z *= pow1;
<a name='L1001'>
<a name='L1002'>    <i><font color='green'>/* if computation resulted in overflow, raise OverflowError */</font></i>
<a name='L1003'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(z)) <font color='red'>{</font>
<a name='L1004'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L1005'>                        "overflow occurred during round");
<a name='L1006'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1007'>    <font color='red'>}</font>
<a name='L1008'>
<a name='L1009'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(z);
<a name='L1010'><font color='red'>}</font>
<a name='L1011'>
<a name='L1012'><font color='darkred'>#endif</font> <i><font color='green'>/* PY_NO_SHORT_FLOAT_REPR */</font></i>
<a name='L1013'>
<a name='L1014'><i><font color='green'>/* round a Python float v to the closest multiple of 10**-ndigits */</font></i>
<a name='L1015'>
<a name='L1016'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1017'><a href='../S/2791.html#L1767' title='Refered from 1767 in Objects/floatobject.c.'>float_round</a>(PyObject *v, PyObject *args)
<a name='L1018'><font color='red'>{</font>
<a name='L1019'>    <b>double</b> x, rounded;
<a name='L1020'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *o_ndigits = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1021'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ndigits;
<a name='L1022'>
<a name='L1023'>    x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L1024'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|O", &amp;o_ndigits))
<a name='L1025'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1026'>    <b>if</b> (o_ndigits == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1027'>        <i><font color='green'>/* single-argument round: round to nearest integer */</font></i>
<a name='L1028'>        rounded = <a href='../S/3133.html#L70' title='Defined at 70 in Python/pymath.c.'>round</a>(x);
<a name='L1029'>        <b>if</b> (fabs(x-rounded) == 0.5)
<a name='L1030'>            <i><font color='green'>/* halfway case: round to even */</font></i>
<a name='L1031'>            rounded = 2.0*<a href='../S/3133.html#L70' title='Defined at 70 in Python/pymath.c.'>round</a>(x/2.0);
<a name='L1032'>        <b>return</b> <a href='../S/2799.html#L274' title='Defined at 274 in Objects/longobject.c.'>PyLong_FromDouble</a>(rounded);
<a name='L1033'>    <font color='red'>}</font>
<a name='L1034'>
<a name='L1035'>    <i><font color='green'>/* interpret second argument as a Py_ssize_t; clips on overflow */</font></i>
<a name='L1036'>    ndigits = <a href='../S/2775.html#L1227' title='Defined at 1227 in Objects/abstract.c.'>PyNumber_AsSsize_t</a>(o_ndigits, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1037'>    <b>if</b> (ndigits == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1038'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1039'>
<a name='L1040'>    <i><font color='green'>/* nans and infinities round to themselves */</font></i>
<a name='L1041'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x))
<a name='L1042'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x);
<a name='L1043'>
<a name='L1044'>    <i><font color='green'>/* Deal with extreme values for ndigits. For ndigits &gt; NDIGITS_MAX, x</font></i>
<a name='L1045'><i><font color='green'>       always rounds to itself.  For ndigits &lt; NDIGITS_MIN, x always</font></i>
<a name='L1046'><i><font color='green'>       rounds to +-0.0.  Here 0.30103 is an upper bound for log10(2). */</font></i>
<a name='L1047'><font color='darkred'>#define</font> <a href='../S/2791.html#L1049' title='Refered from 1049 in Objects/floatobject.c.'>NDIGITS_MAX</a> ((<b>int</b>)((DBL_MANT_DIG-DBL_MIN_EXP) * 0.30103))
<a name='L1048'><font color='darkred'>#define</font> <a href='../S/2791.html#L1052' title='Refered from 1052 in Objects/floatobject.c.'>NDIGITS_MIN</a> (-(<b>int</b>)((DBL_MAX_EXP + 1) * 0.30103))
<a name='L1049'>    <b>if</b> (ndigits &gt; <a href='../D/2267.html' title='Multiple defined in 2 places.'>NDIGITS_MAX</a>)
<a name='L1050'>        <i><font color='green'>/* return x */</font></i>
<a name='L1051'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x);
<a name='L1052'>    <b>else</b> <b>if</b> (ndigits &lt; <a href='../D/2268.html' title='Multiple defined in 2 places.'>NDIGITS_MIN</a>)
<a name='L1053'>        <i><font color='green'>/* return 0.0, but with sign of x */</font></i>
<a name='L1054'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(0.0*x);
<a name='L1055'>    <b>else</b>
<a name='L1056'>        <i><font color='green'>/* finite x, and ndigits is not unreasonably large */</font></i>
<a name='L1057'>        <b>return</b> <a href='../D/8253.html' title='Multiple defined in 2 places.'>double_round</a>(x, (<b>int</b>)ndigits);
<a name='L1058'><font color='darkred'>#undef</font> <a href='../S/2791.html#L1049' title='Refered from 1049 in Objects/floatobject.c.'>NDIGITS_MAX</a>
<a name='L1059'><font color='darkred'>#undef</font> <a href='../S/2791.html#L1052' title='Refered from 1052 in Objects/floatobject.c.'>NDIGITS_MIN</a>
<a name='L1060'><font color='red'>}</font>
<a name='L1061'>
<a name='L1062'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1063'><a href='../R/7840.html' title='Multiple refered from 4 places.'>float_float</a>(PyObject *v)
<a name='L1064'><font color='red'>{</font>
<a name='L1065'>    <b>if</b> (PyFloat_CheckExact(v))
<a name='L1066'>        Py_INCREF(v);
<a name='L1067'>    <b>else</b>
<a name='L1068'>        v = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(((<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *)v)-&gt;ob_fval);
<a name='L1069'>    <b>return</b> v;
<a name='L1070'><font color='red'>}</font>
<a name='L1071'>
<a name='L1072'><i><font color='green'>/* turn ASCII hex characters into integer values and vice versa */</font></i>
<a name='L1073'>
<a name='L1074'><b>static</b> <b>char</b>
<a name='L1075'><a href='../R/6603.html' title='Multiple refered from 2 places.'>char_from_hex</a>(<b>int</b> x)
<a name='L1076'><font color='red'>{</font>
<a name='L1077'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0 &lt;= x &amp;&amp; x &lt; 16);
<a name='L1078'>    <b>return</b> "0123456789abcdef"[x];
<a name='L1079'><font color='red'>}</font>
<a name='L1080'>
<a name='L1081'><b>static</b> <b>int</b>
<a name='L1082'><a href='../R/8273.html' title='Multiple refered from 3 places.'>hex_from_char</a>(<b>char</b> c) <font color='red'>{</font>
<a name='L1083'>    <b>int</b> x;
<a name='L1084'>    <b>switch</b>(c) <font color='red'>{</font>
<a name='L1085'>    <b>case</b> '0':
<a name='L1086'>        x = 0;
<a name='L1087'>        <b>break</b>;
<a name='L1088'>    <b>case</b> '1':
<a name='L1089'>        x = 1;
<a name='L1090'>        <b>break</b>;
<a name='L1091'>    <b>case</b> '2':
<a name='L1092'>        x = 2;
<a name='L1093'>        <b>break</b>;
<a name='L1094'>    <b>case</b> '3':
<a name='L1095'>        x = 3;
<a name='L1096'>        <b>break</b>;
<a name='L1097'>    <b>case</b> '4':
<a name='L1098'>        x = 4;
<a name='L1099'>        <b>break</b>;
<a name='L1100'>    <b>case</b> '5':
<a name='L1101'>        x = 5;
<a name='L1102'>        <b>break</b>;
<a name='L1103'>    <b>case</b> '6':
<a name='L1104'>        x = 6;
<a name='L1105'>        <b>break</b>;
<a name='L1106'>    <b>case</b> '7':
<a name='L1107'>        x = 7;
<a name='L1108'>        <b>break</b>;
<a name='L1109'>    <b>case</b> '8':
<a name='L1110'>        x = 8;
<a name='L1111'>        <b>break</b>;
<a name='L1112'>    <b>case</b> '9':
<a name='L1113'>        x = 9;
<a name='L1114'>        <b>break</b>;
<a name='L1115'>    <b>case</b> 'a':
<a name='L1116'>    <b>case</b> 'A':
<a name='L1117'>        x = 10;
<a name='L1118'>        <b>break</b>;
<a name='L1119'>    <b>case</b> 'b':
<a name='L1120'>    <b>case</b> 'B':
<a name='L1121'>        x = 11;
<a name='L1122'>        <b>break</b>;
<a name='L1123'>    <b>case</b> 'c':
<a name='L1124'>    <b>case</b> 'C':
<a name='L1125'>        x = 12;
<a name='L1126'>        <b>break</b>;
<a name='L1127'>    <b>case</b> 'd':
<a name='L1128'>    <b>case</b> 'D':
<a name='L1129'>        x = 13;
<a name='L1130'>        <b>break</b>;
<a name='L1131'>    <b>case</b> 'e':
<a name='L1132'>    <b>case</b> 'E':
<a name='L1133'>        x = 14;
<a name='L1134'>        <b>break</b>;
<a name='L1135'>    <b>case</b> 'f':
<a name='L1136'>    <b>case</b> 'F':
<a name='L1137'>        x = 15;
<a name='L1138'>        <b>break</b>;
<a name='L1139'>    <b>default</b>:
<a name='L1140'>        x = -1;
<a name='L1141'>        <b>break</b>;
<a name='L1142'>    <font color='red'>}</font>
<a name='L1143'>    <b>return</b> x;
<a name='L1144'><font color='red'>}</font>
<a name='L1145'>
<a name='L1146'><i><font color='green'>/* convert a float to a hexadecimal string */</font></i>
<a name='L1147'>
<a name='L1148'><i><font color='green'>/* TOHEX_NBITS is DBL_MANT_DIG rounded up to the next integer</font></i>
<a name='L1149'><i><font color='green'>   of the form 4k+1. */</font></i>
<a name='L1150'><font color='darkred'>#define</font> <a href='../R/4555.html' title='Multiple refered from 2 places.'>TOHEX_NBITS</a> DBL_MANT_DIG + 3 - (DBL_MANT_DIG+2)%4
<a name='L1151'>
<a name='L1152'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1153'><a href='../S/2791.html#L1774' title='Refered from 1774 in Objects/floatobject.c.'>float_hex</a>(PyObject *v)
<a name='L1154'><font color='red'>{</font>
<a name='L1155'>    <b>double</b> x, m;
<a name='L1156'>    <b>int</b> e, <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>, i, si, esign;
<a name='L1157'>    <i><font color='green'>/* Space for 1+(TOHEX_NBITS-1)/4 digits, a decimal point, and the</font></i>
<a name='L1158'><i><font color='green'>       trailing NUL byte. */</font></i>
<a name='L1159'>    <b>char</b> s[(<a href='../S/2791.html#L1150' title='Defined at 1150 in Objects/floatobject.c.'>TOHEX_NBITS</a>-1)/4+3];
<a name='L1160'>
<a name='L1161'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, x);
<a name='L1162'>
<a name='L1163'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x) || <a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x))
<a name='L1164'>        <b>return</b> <a href='../S/2791.html#L313' title='Defined at 313 in Objects/floatobject.c.'>float_repr</a>((<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *)v);
<a name='L1165'>
<a name='L1166'>    <b>if</b> (x == 0.0) <font color='red'>{</font>
<a name='L1167'>        <b>if</b> (<a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(1.0, x) == -1.0)
<a name='L1168'>            <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("-0x0.0p+0");
<a name='L1169'>        <b>else</b>
<a name='L1170'>            <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("0x0.0p+0");
<a name='L1171'>    <font color='red'>}</font>
<a name='L1172'>
<a name='L1173'>    m = frexp(fabs(x), &amp;e);
<a name='L1174'>    <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> = 1 - <a href='../D/2033.html' title='Multiple defined in 10 places.'>MAX</a>(DBL_MIN_EXP - e, 0);
<a name='L1175'>    m = ldexp(m, <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>);
<a name='L1176'>    e -= <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>;
<a name='L1177'>
<a name='L1178'>    si = 0;
<a name='L1179'>    s[si] = <a href='../S/2791.html#L1075' title='Defined at 1075 in Objects/floatobject.c.'>char_from_hex</a>((<b>int</b>)m);
<a name='L1180'>    si++;
<a name='L1181'>    m -= (<b>int</b>)m;
<a name='L1182'>    s[si] = '.';
<a name='L1183'>    si++;
<a name='L1184'>    <b>for</b> (i=0; i &lt; (<a href='../S/2791.html#L1150' title='Defined at 1150 in Objects/floatobject.c.'>TOHEX_NBITS</a>-1)/4; i++) <font color='red'>{</font>
<a name='L1185'>        m *= 16.0;
<a name='L1186'>        s[si] = <a href='../S/2791.html#L1075' title='Defined at 1075 in Objects/floatobject.c.'>char_from_hex</a>((<b>int</b>)m);
<a name='L1187'>        si++;
<a name='L1188'>        m -= (<b>int</b>)m;
<a name='L1189'>    <font color='red'>}</font>
<a name='L1190'>    s[si] = '\0';
<a name='L1191'>
<a name='L1192'>    <b>if</b> (e &lt; 0) <font color='red'>{</font>
<a name='L1193'>        esign = (<b>int</b>)'-';
<a name='L1194'>        e = -e;
<a name='L1195'>    <font color='red'>}</font>
<a name='L1196'>    <b>else</b>
<a name='L1197'>        esign = (<b>int</b>)'+';
<a name='L1198'>
<a name='L1199'>    <b>if</b> (x &lt; 0.0)
<a name='L1200'>        <b>return</b> <a href='../D/4008.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormat</a>("-0x%sp%c%d", s, esign, e);
<a name='L1201'>    <b>else</b>
<a name='L1202'>        <b>return</b> <a href='../D/4008.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormat</a>("0x%sp%c%d", s, esign, e);
<a name='L1203'><font color='red'>}</font>
<a name='L1204'>
<a name='L1205'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(float_hex_doc,
<a name='L1206'>"float.hex() -&gt; string\n\
<a name='L1207'>\n\
<a name='L1208'>Return a hexadecimal representation of a floating-point number.\n\
<a name='L1209'>&gt;&gt;&gt; (-0.1).hex()\n\
<a name='L1210'>'-0x1.999999999999ap-4'\n\
<a name='L1211'>&gt;&gt;&gt; 3.14159.hex()\n\
<a name='L1212'>'0x1.921f9f01b866ep+1'");
<a name='L1213'>
<a name='L1214'><i><font color='green'>/* Convert a hexadecimal string to a float. */</font></i>
<a name='L1215'>
<a name='L1216'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1217'><a href='../S/2791.html#L1772' title='Refered from 1772 in Objects/floatobject.c.'>float_fromhex</a>(PyObject *cls, PyObject *arg)
<a name='L1218'><font color='red'>{</font>
<a name='L1219'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *result_as_float, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1220'>    <b>double</b> x;
<a name='L1221'>    <b>long</b> exp, top_exp, lsb, key_digit;
<a name='L1222'>    <b>char</b> *s, *coeff_start, *s_store, *coeff_end, *exp_start, *s_end;
<a name='L1223'>    <b>int</b> half_eps, <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>, round_up, negate=0;
<a name='L1224'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length, ndigits, fdigits, i;
<a name='L1225'>
<a name='L1226'>    <i><font color='green'>/*</font></i>
<a name='L1227'><i><font color='green'>     * For the sake of simplicity and correctness, we impose an artificial</font></i>
<a name='L1228'><i><font color='green'>     * limit on ndigits, the total number of hex digits in the coefficient</font></i>
<a name='L1229'><i><font color='green'>     * The limit is chosen to ensure that, writing exp for the exponent,</font></i>
<a name='L1230'><i><font color='green'>     *</font></i>
<a name='L1231'><i><font color='green'>     *   (1) if exp &gt; LONG_MAX/2 then the value of the hex string is</font></i>
<a name='L1232'><i><font color='green'>     *   guaranteed to overflow (provided it's nonzero)</font></i>
<a name='L1233'><i><font color='green'>     *</font></i>
<a name='L1234'><i><font color='green'>     *   (2) if exp &lt; LONG_MIN/2 then the value of the hex string is</font></i>
<a name='L1235'><i><font color='green'>     *   guaranteed to underflow to 0.</font></i>
<a name='L1236'><i><font color='green'>     *</font></i>
<a name='L1237'><i><font color='green'>     *   (3) if LONG_MIN/2 &lt;= exp &lt;= LONG_MAX/2 then there's no danger of</font></i>
<a name='L1238'><i><font color='green'>     *   overflow in the calculation of exp and top_exp below.</font></i>
<a name='L1239'><i><font color='green'>     *</font></i>
<a name='L1240'><i><font color='green'>     * More specifically, ndigits is assumed to satisfy the following</font></i>
<a name='L1241'><i><font color='green'>     * inequalities:</font></i>
<a name='L1242'><i><font color='green'>     *</font></i>
<a name='L1243'><i><font color='green'>     *   4*ndigits &lt;= DBL_MIN_EXP - DBL_MANT_DIG - LONG_MIN/2</font></i>
<a name='L1244'><i><font color='green'>     *   4*ndigits &lt;= LONG_MAX/2 + 1 - DBL_MAX_EXP</font></i>
<a name='L1245'><i><font color='green'>     *</font></i>
<a name='L1246'><i><font color='green'>     * If either of these inequalities is not satisfied, a ValueError is</font></i>
<a name='L1247'><i><font color='green'>     * raised.  Otherwise, write x for the value of the hex string, and</font></i>
<a name='L1248'><i><font color='green'>     * assume x is nonzero.  Then</font></i>
<a name='L1249'><i><font color='green'>     *</font></i>
<a name='L1250'><i><font color='green'>     *   2**(exp-4*ndigits) &lt;= |x| &lt; 2**(exp+4*ndigits).</font></i>
<a name='L1251'><i><font color='green'>     *</font></i>
<a name='L1252'><i><font color='green'>     * Now if exp &gt; LONG_MAX/2 then:</font></i>
<a name='L1253'><i><font color='green'>     *</font></i>
<a name='L1254'><i><font color='green'>     *   exp - 4*ndigits &gt;= LONG_MAX/2 + 1 - (LONG_MAX/2 + 1 - DBL_MAX_EXP)</font></i>
<a name='L1255'><i><font color='green'>     *                    = DBL_MAX_EXP</font></i>
<a name='L1256'><i><font color='green'>     *</font></i>
<a name='L1257'><i><font color='green'>     * so |x| &gt;= 2**DBL_MAX_EXP, which is too large to be stored in C</font></i>
<a name='L1258'><i><font color='green'>     * double, so overflows.  If exp &lt; LONG_MIN/2, then</font></i>
<a name='L1259'><i><font color='green'>     *</font></i>
<a name='L1260'><i><font color='green'>     *   exp + 4*ndigits &lt;= LONG_MIN/2 - 1 + (</font></i>
<a name='L1261'><i><font color='green'>     *                      DBL_MIN_EXP - DBL_MANT_DIG - LONG_MIN/2)</font></i>
<a name='L1262'><i><font color='green'>     *                    = DBL_MIN_EXP - DBL_MANT_DIG - 1</font></i>
<a name='L1263'><i><font color='green'>     *</font></i>
<a name='L1264'><i><font color='green'>     * and so |x| &lt; 2**(DBL_MIN_EXP-DBL_MANT_DIG-1), hence underflows to 0</font></i>
<a name='L1265'><i><font color='green'>     * when converted to a C double.</font></i>
<a name='L1266'><i><font color='green'>     *</font></i>
<a name='L1267'><i><font color='green'>     * It's easy to show that if LONG_MIN/2 &lt;= exp &lt;= LONG_MAX/2 then both</font></i>
<a name='L1268'><i><font color='green'>     * exp+4*ndigits and exp-4*ndigits are within the range of a long.</font></i>
<a name='L1269'><i><font color='green'>     */</font></i>
<a name='L1270'>
<a name='L1271'>    s = <a href='../S/2828.html#L1903' title='Defined at 1903 in Objects/unicodeobject.c.'>_PyUnicode_AsStringAndSize</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, &amp;length);
<a name='L1272'>    <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1273'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1274'>    s_end = s + length;
<a name='L1275'>
<a name='L1276'>    <i><font color='green'>/********************</font></i>
<a name='L1277'><i><font color='green'>     * Parse the string *</font></i>
<a name='L1278'><i><font color='green'>     ********************/</font></i>
<a name='L1279'>
<a name='L1280'>    <i><font color='green'>/* leading whitespace */</font></i>
<a name='L1281'>    <b>while</b> (<a href='../S/556.html#L24' title='Defined at 24 in Include/pyctype.h.'>Py_ISSPACE</a>(*s))
<a name='L1282'>        s++;
<a name='L1283'>
<a name='L1284'>    <i><font color='green'>/* infinities and nans */</font></i>
<a name='L1285'>    x = <a href='../S/3136.html#L26' title='Defined at 26 in Python/pystrtod.c.'>_Py_parse_inf_or_nan</a>(s, &amp;coeff_end);
<a name='L1286'>    <b>if</b> (coeff_end != s) <font color='red'>{</font>
<a name='L1287'>        s = coeff_end;
<a name='L1288'>        <b>goto</b> finished;
<a name='L1289'>    <font color='red'>}</font>
<a name='L1290'>
<a name='L1291'>    <i><font color='green'>/* optional sign */</font></i>
<a name='L1292'>    <b>if</b> (*s == '-') <font color='red'>{</font>
<a name='L1293'>        s++;
<a name='L1294'>        negate = 1;
<a name='L1295'>    <font color='red'>}</font>
<a name='L1296'>    <b>else</b> <b>if</b> (*s == '+')
<a name='L1297'>        s++;
<a name='L1298'>
<a name='L1299'>    <i><font color='green'>/* [0x] */</font></i>
<a name='L1300'>    s_store = s;
<a name='L1301'>    <b>if</b> (*s == '0') <font color='red'>{</font>
<a name='L1302'>        s++;
<a name='L1303'>        <b>if</b> (*s == 'x' || *s == 'X')
<a name='L1304'>            s++;
<a name='L1305'>        <b>else</b>
<a name='L1306'>            s = s_store;
<a name='L1307'>    <font color='red'>}</font>
<a name='L1308'>
<a name='L1309'>    <i><font color='green'>/* coefficient: &lt;integer&gt; [. &lt;fraction&gt;] */</font></i>
<a name='L1310'>    coeff_start = s;
<a name='L1311'>    <b>while</b> (<a href='../S/2791.html#L1082' title='Defined at 1082 in Objects/floatobject.c.'>hex_from_char</a>(*s) &gt;= 0)
<a name='L1312'>        s++;
<a name='L1313'>    s_store = s;
<a name='L1314'>    <b>if</b> (*s == '.') <font color='red'>{</font>
<a name='L1315'>        s++;
<a name='L1316'>        <b>while</b> (<a href='../S/2791.html#L1082' title='Defined at 1082 in Objects/floatobject.c.'>hex_from_char</a>(*s) &gt;= 0)
<a name='L1317'>            s++;
<a name='L1318'>        coeff_end = s-1;
<a name='L1319'>    <font color='red'>}</font>
<a name='L1320'>    <b>else</b>
<a name='L1321'>        coeff_end = s;
<a name='L1322'>
<a name='L1323'>    <i><font color='green'>/* ndigits = total # of hex digits; fdigits = # after point */</font></i>
<a name='L1324'>    ndigits = coeff_end - coeff_start;
<a name='L1325'>    fdigits = coeff_end - s_store;
<a name='L1326'>    <b>if</b> (ndigits == 0)
<a name='L1327'>        <b>goto</b> parse_error;
<a name='L1328'>    <b>if</b> (ndigits &gt; <a href='../D/2125.html' title='Multiple defined in 11 places.'>MIN</a>(DBL_MIN_EXP - DBL_MANT_DIG - <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a>/2,
<a name='L1329'>                      <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>/2 + 1 - DBL_MAX_EXP)/4)
<a name='L1330'>        <b>goto</b> insane_length_error;
<a name='L1331'>
<a name='L1332'>    <i><font color='green'>/* [p &lt;exponent&gt;] */</font></i>
<a name='L1333'>    <b>if</b> (*s == 'p' || *s == 'P') <font color='red'>{</font>
<a name='L1334'>        s++;
<a name='L1335'>        exp_start = s;
<a name='L1336'>        <b>if</b> (*s == '-' || *s == '+')
<a name='L1337'>            s++;
<a name='L1338'>        <b>if</b> (!('0' &lt;= *s &amp;&amp; *s &lt;= '9'))
<a name='L1339'>            <b>goto</b> parse_error;
<a name='L1340'>        s++;
<a name='L1341'>        <b>while</b> ('0' &lt;= *s &amp;&amp; *s &lt;= '9')
<a name='L1342'>            s++;
<a name='L1343'>        exp = strtol(exp_start, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 10);
<a name='L1344'>    <font color='red'>}</font>
<a name='L1345'>    <b>else</b>
<a name='L1346'>        exp = 0;
<a name='L1347'>
<a name='L1348'><i><font color='green'>/* for 0 &lt;= j &lt; ndigits, HEX_DIGIT(j) gives the jth most significant digit */</font></i>
<a name='L1349'><font color='darkred'>#define</font> <a href='../R/1457.html' title='Multiple refered from 7 places.'>HEX_DIGIT</a>(j) <a href='../S/2791.html#L1082' title='Defined at 1082 in Objects/floatobject.c.'>hex_from_char</a>(*((j) &lt; fdigits ?            \
<a name='L1350'>                     coeff_end-(j) :                                    \
<a name='L1351'>                     coeff_end-1-(j)))
<a name='L1352'>
<a name='L1353'>    <i><font color='green'>/*******************************************</font></i>
<a name='L1354'><i><font color='green'>     * Compute rounded value of the hex string *</font></i>
<a name='L1355'><i><font color='green'>     *******************************************/</font></i>
<a name='L1356'>
<a name='L1357'>    <i><font color='green'>/* Discard leading zeros, and catch extreme overflow and underflow */</font></i>
<a name='L1358'>    <b>while</b> (ndigits &gt; 0 &amp;&amp; <a href='../S/2791.html#L1349' title='Defined at 1349 in Objects/floatobject.c.'>HEX_DIGIT</a>(ndigits-1) == 0)
<a name='L1359'>        ndigits--;
<a name='L1360'>    <b>if</b> (ndigits == 0 || exp &lt; <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a>/2) <font color='red'>{</font>
<a name='L1361'>        x = 0.0;
<a name='L1362'>        <b>goto</b> finished;
<a name='L1363'>    <font color='red'>}</font>
<a name='L1364'>    <b>if</b> (exp &gt; <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>/2)
<a name='L1365'>        <b>goto</b> overflow_error;
<a name='L1366'>
<a name='L1367'>    <i><font color='green'>/* Adjust exponent for fractional part. */</font></i>
<a name='L1368'>    exp = exp - 4*((<b>long</b>)fdigits);
<a name='L1369'>
<a name='L1370'>    <i><font color='green'>/* top_exp = 1 more than exponent of most sig. bit of coefficient */</font></i>
<a name='L1371'>    top_exp = exp + 4*((<b>long</b>)ndigits - 1);
<a name='L1372'>    <b>for</b> (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> = <a href='../S/2791.html#L1349' title='Defined at 1349 in Objects/floatobject.c.'>HEX_DIGIT</a>(ndigits-1); <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> != 0; <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> /= 2)
<a name='L1373'>        top_exp++;
<a name='L1374'>
<a name='L1375'>    <i><font color='green'>/* catch almost all nonextreme cases of overflow and underflow here */</font></i>
<a name='L1376'>    <b>if</b> (top_exp &lt; DBL_MIN_EXP - DBL_MANT_DIG) <font color='red'>{</font>
<a name='L1377'>        x = 0.0;
<a name='L1378'>        <b>goto</b> finished;
<a name='L1379'>    <font color='red'>}</font>
<a name='L1380'>    <b>if</b> (top_exp &gt; DBL_MAX_EXP)
<a name='L1381'>        <b>goto</b> overflow_error;
<a name='L1382'>
<a name='L1383'>    <i><font color='green'>/* lsb = exponent of least significant bit of the *rounded* value.</font></i>
<a name='L1384'><i><font color='green'>       This is top_exp - DBL_MANT_DIG unless result is subnormal. */</font></i>
<a name='L1385'>    lsb = <a href='../D/2033.html' title='Multiple defined in 10 places.'>MAX</a>(top_exp, (<b>long</b>)DBL_MIN_EXP) - DBL_MANT_DIG;
<a name='L1386'>
<a name='L1387'>    x = 0.0;
<a name='L1388'>    <b>if</b> (exp &gt;= lsb) <font color='red'>{</font>
<a name='L1389'>        <i><font color='green'>/* no rounding required */</font></i>
<a name='L1390'>        <b>for</b> (i = ndigits-1; i &gt;= 0; i--)
<a name='L1391'>            x = 16.0*x + <a href='../S/2791.html#L1349' title='Defined at 1349 in Objects/floatobject.c.'>HEX_DIGIT</a>(i);
<a name='L1392'>        x = ldexp(x, (<b>int</b>)(exp));
<a name='L1393'>        <b>goto</b> finished;
<a name='L1394'>    <font color='red'>}</font>
<a name='L1395'>    <i><font color='green'>/* rounding required.  key_digit is the index of the hex digit</font></i>
<a name='L1396'><i><font color='green'>       containing the first bit to be rounded away. */</font></i>
<a name='L1397'>    half_eps = 1 &lt;&lt; (<b>int</b>)((lsb - exp - 1) % 4);
<a name='L1398'>    key_digit = (lsb - exp - 1) / 4;
<a name='L1399'>    <b>for</b> (i = ndigits-1; i &gt; key_digit; i--)
<a name='L1400'>        x = 16.0*x + <a href='../S/2791.html#L1349' title='Defined at 1349 in Objects/floatobject.c.'>HEX_DIGIT</a>(i);
<a name='L1401'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> = <a href='../S/2791.html#L1349' title='Defined at 1349 in Objects/floatobject.c.'>HEX_DIGIT</a>(key_digit);
<a name='L1402'>    x = 16.0*x + (<b>double</b>)(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> &amp; (16-2*half_eps));
<a name='L1403'>
<a name='L1404'>    <i><font color='green'>/* round-half-even: round up if bit lsb-1 is 1 and at least one of</font></i>
<a name='L1405'><i><font color='green'>       bits lsb, lsb-2, lsb-3, lsb-4, ... is 1. */</font></i>
<a name='L1406'>    <b>if</b> ((<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> &amp; half_eps) != 0) <font color='red'>{</font>
<a name='L1407'>        round_up = 0;
<a name='L1408'>        <b>if</b> ((<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> &amp; (3*half_eps-1)) != 0 ||
<a name='L1409'>            (half_eps == 8 &amp;&amp; (<a href='../S/2791.html#L1349' title='Defined at 1349 in Objects/floatobject.c.'>HEX_DIGIT</a>(key_digit+1) &amp; 1) != 0))
<a name='L1410'>            round_up = 1;
<a name='L1411'>        <b>else</b>
<a name='L1412'>            <b>for</b> (i = key_digit-1; i &gt;= 0; i--)
<a name='L1413'>                <b>if</b> (<a href='../S/2791.html#L1349' title='Defined at 1349 in Objects/floatobject.c.'>HEX_DIGIT</a>(i) != 0) <font color='red'>{</font>
<a name='L1414'>                    round_up = 1;
<a name='L1415'>                    <b>break</b>;
<a name='L1416'>                <font color='red'>}</font>
<a name='L1417'>        <b>if</b> (round_up) <font color='red'>{</font>
<a name='L1418'>            x += 2*half_eps;
<a name='L1419'>            <b>if</b> (top_exp == DBL_MAX_EXP &amp;&amp;
<a name='L1420'>                x == ldexp((<b>double</b>)(2*half_eps), DBL_MANT_DIG))
<a name='L1421'>                <i><font color='green'>/* overflow corner case: pre-rounded value &lt;</font></i>
<a name='L1422'><i><font color='green'>                   2**DBL_MAX_EXP; rounded=2**DBL_MAX_EXP. */</font></i>
<a name='L1423'>                <b>goto</b> overflow_error;
<a name='L1424'>        <font color='red'>}</font>
<a name='L1425'>    <font color='red'>}</font>
<a name='L1426'>    x = ldexp(x, (<b>int</b>)(exp+4*key_digit));
<a name='L1427'>
<a name='L1428'>  finished:
<a name='L1429'>    <i><font color='green'>/* optional trailing whitespace leading to the end of the string */</font></i>
<a name='L1430'>    <b>while</b> (<a href='../S/556.html#L24' title='Defined at 24 in Include/pyctype.h.'>Py_ISSPACE</a>(*s))
<a name='L1431'>        s++;
<a name='L1432'>    <b>if</b> (s != s_end)
<a name='L1433'>        <b>goto</b> parse_error;
<a name='L1434'>    result_as_float = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(d)", negate ? -x : x);
<a name='L1435'>    <b>if</b> (result_as_float == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1436'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1437'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L2135' title='Defined at 2135 in Objects/abstract.c.'>PyObject_CallObject</a>(cls, result_as_float);
<a name='L1438'>    Py_DECREF(result_as_float);
<a name='L1439'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1440'>
<a name='L1441'>  overflow_error:
<a name='L1442'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L1443'>                    "hexadecimal value too large to represent as a float");
<a name='L1444'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1445'>
<a name='L1446'>  parse_error:
<a name='L1447'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1448'>                    "invalid hexadecimal floating-point string");
<a name='L1449'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1450'>
<a name='L1451'>  insane_length_error:
<a name='L1452'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1453'>                    "hexadecimal string too long to convert");
<a name='L1454'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1455'><font color='red'>}</font>
<a name='L1456'>
<a name='L1457'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(float_fromhex_doc,
<a name='L1458'>"float.fromhex(string) -&gt; float\n\
<a name='L1459'>\n\
<a name='L1460'>Create a floating-point number from a hexadecimal string.\n\
<a name='L1461'>&gt;&gt;&gt; float.fromhex('0x1.ffffp10')\n\
<a name='L1462'>2047.984375\n\
<a name='L1463'>&gt;&gt;&gt; float.fromhex('-0x1p-1074')\n\
<a name='L1464'>-4.9406564584124654e-324");
<a name='L1465'>
<a name='L1466'>
<a name='L1467'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1468'><a href='../S/2791.html#L1770' title='Refered from 1770 in Objects/floatobject.c.'>float_as_integer_ratio</a>(PyObject *v, PyObject *unused)
<a name='L1469'><font color='red'>{</font>
<a name='L1470'>    <b>double</b> self;
<a name='L1471'>    <b>double</b> float_part;
<a name='L1472'>    <b>int</b> exponent;
<a name='L1473'>    <b>int</b> i;
<a name='L1474'>
<a name='L1475'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *prev;
<a name='L1476'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *py_exponent = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1477'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *numerator = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1478'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *denominator = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1479'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *result_pair = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1480'>    <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *long_methods = PyLong_Type.tp_as_number;
<a name='L1481'>
<a name='L1482'><font color='darkred'>#define</font> <a href='../R/1545.html' title='Multiple refered from 2 places.'>INPLACE_UPDATE</a>(obj, call) \
<a name='L1483'>    prev = obj; \
<a name='L1484'>    obj = <a href='../S/2611.html#L1950' title='Defined at 1950 in Modules/_sre.c.'>call</a>; \
<a name='L1485'>    Py_DECREF(prev); \
<a name='L1486'>
<a name='L1487'>    <a href='../S/2791.html#L284' title='Defined at 284 in Objects/floatobject.c.'>CONVERT_TO_DOUBLE</a>(v, self);
<a name='L1488'>
<a name='L1489'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(self)) <font color='red'>{</font>
<a name='L1490'>      <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L1491'>                      "Cannot pass infinity to float.as_integer_ratio.");
<a name='L1492'>      <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1493'>    <font color='red'>}</font>
<a name='L1494'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(self)) <font color='red'>{</font>
<a name='L1495'>      <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1496'>                      "Cannot pass NaN to float.as_integer_ratio.");
<a name='L1497'>      <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1498'>    <font color='red'>}</font>
<a name='L1499'>
<a name='L1500'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("as_integer_ratio", <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>);
<a name='L1501'>    float_part = frexp(self, &amp;exponent);        <i><font color='green'>/* self == float_part * 2**exponent exactly */</font></i>
<a name='L1502'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(float_part);
<a name='L1503'>
<a name='L1504'>    <b>for</b> (i=0; i&lt;300 &amp;&amp; float_part != floor(float_part) ; i++) <font color='red'>{</font>
<a name='L1505'>        float_part *= 2.0;
<a name='L1506'>        exponent--;
<a name='L1507'>    <font color='red'>}</font>
<a name='L1508'>    <i><font color='green'>/* self == float_part * 2**exponent exactly and float_part is integral.</font></i>
<a name='L1509'><i><font color='green'>       If FLT_RADIX != 2, the 300 steps may leave a tiny fractional part</font></i>
<a name='L1510'><i><font color='green'>       to be truncated by PyLong_FromDouble(). */</font></i>
<a name='L1511'>
<a name='L1512'>    numerator = <a href='../S/2799.html#L274' title='Defined at 274 in Objects/longobject.c.'>PyLong_FromDouble</a>(float_part);
<a name='L1513'>    <b>if</b> (numerator == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1514'>
<a name='L1515'>    <i><font color='green'>/* fold in 2**exponent */</font></i>
<a name='L1516'>    denominator = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(1);
<a name='L1517'>    py_exponent = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(labs((<b>long</b>)exponent));
<a name='L1518'>    <b>if</b> (py_exponent == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1519'>    <a href='../D/1734.html' title='Multiple defined in 2 places.'>INPLACE_UPDATE</a>(py_exponent,
<a name='L1520'>                   long_methods-&gt;nb_lshift(denominator, py_exponent));
<a name='L1521'>    <b>if</b> (py_exponent == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1522'>    <b>if</b> (exponent &gt; 0) <font color='red'>{</font>
<a name='L1523'>        <a href='../D/1734.html' title='Multiple defined in 2 places.'>INPLACE_UPDATE</a>(numerator,
<a name='L1524'>                       long_methods-&gt;nb_multiply(numerator, py_exponent));
<a name='L1525'>        <b>if</b> (numerator == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1526'>    <font color='red'>}</font>
<a name='L1527'>    <b>else</b> <font color='red'>{</font>
<a name='L1528'>        Py_DECREF(denominator);
<a name='L1529'>        denominator = py_exponent;
<a name='L1530'>        py_exponent = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1531'>    <font color='red'>}</font>
<a name='L1532'>
<a name='L1533'>    result_pair = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(2, numerator, denominator);
<a name='L1534'>
<a name='L1535'><font color='darkred'>#undef</font> <a href='../R/1545.html' title='Multiple refered from 2 places.'>INPLACE_UPDATE</a>
<a name='L1536'><a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1537'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(py_exponent);
<a name='L1538'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(denominator);
<a name='L1539'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(numerator);
<a name='L1540'>    <b>return</b> result_pair;
<a name='L1541'><font color='red'>}</font>
<a name='L1542'>
<a name='L1543'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(float_as_integer_ratio_doc,
<a name='L1544'>"float.as_integer_ratio() -&gt; (int, int)\n"
<a name='L1545'>"\n"
<a name='L1546'>"Returns a pair of integers, whose ratio is exactly equal to the original\n"
<a name='L1547'>"float and with a positive denominator.\n"
<a name='L1548'>"Raises OverflowError on infinities and a ValueError on NaNs.\n"
<a name='L1549'>"\n"
<a name='L1550'>"&gt;&gt;&gt; (10.0).as_integer_ratio()\n"
<a name='L1551'>"(10, 1)\n"
<a name='L1552'>"&gt;&gt;&gt; (0.0).as_integer_ratio()\n"
<a name='L1553'>"(0, 1)\n"
<a name='L1554'>"&gt;&gt;&gt; (-.25).as_integer_ratio()\n"
<a name='L1555'>"(-1, 4)");
<a name='L1556'>
<a name='L1557'>
<a name='L1558'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1559'><a href='../S/2791.html#L1584' title='Defined at 1584 in Objects/floatobject.c.'>float_subtype_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds);
<a name='L1560'>
<a name='L1561'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1562'><a href='../R/7855.html' title='Multiple refered from 2 places.'>float_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L1563'><font color='red'>{</font>
<a name='L1564'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *x = Py_False; <i><font color='green'>/* Integer zero */</font></i>
<a name='L1565'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"x", 0<font color='red'>}</font>;
<a name='L1566'>
<a name='L1567'>    <b>if</b> (type != &amp;PyFloat_Type)
<a name='L1568'>        <b>return</b> <a href='../S/2791.html#L1584' title='Defined at 1584 in Objects/floatobject.c.'>float_subtype_new</a>(type, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds); <i><font color='green'>/* Wimp out */</font></i>
<a name='L1569'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "|O:float", kwlist, &amp;x))
<a name='L1570'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1571'>    <i><font color='green'>/* If it's a string, but not a string subclass, use</font></i>
<a name='L1572'><i><font color='green'>       PyFloat_FromString. */</font></i>
<a name='L1573'>    <b>if</b> (PyUnicode_CheckExact(x))
<a name='L1574'>        <b>return</b> <a href='../S/2791.html#L173' title='Defined at 173 in Objects/floatobject.c.'>PyFloat_FromString</a>(x);
<a name='L1575'>    <b>return</b> <a href='../S/2775.html#L1393' title='Defined at 1393 in Objects/abstract.c.'>PyNumber_Float</a>(x);
<a name='L1576'><font color='red'>}</font>
<a name='L1577'>
<a name='L1578'><i><font color='green'>/* Wimpy, slow approach to tp_new calls for subtypes of float:</font></i>
<a name='L1579'><i><font color='green'>   first create a regular float from whatever arguments we got,</font></i>
<a name='L1580'><i><font color='green'>   then allocate a subtype instance and initialize its ob_fval</font></i>
<a name='L1581'><i><font color='green'>   from the regular float.  The regular float is then thrown away.</font></i>
<a name='L1582'><i><font color='green'>*/</font></i>
<a name='L1583'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1584'><a href='../R/7863.html' title='Multiple refered from 2 places.'>float_subtype_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L1585'><font color='red'>{</font>
<a name='L1586'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tmp, *newobj;
<a name='L1587'>
<a name='L1588'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2824.html#L1082' title='Defined at 1082 in Objects/typeobject.c.'>PyType_IsSubtype</a>(type, &amp;PyFloat_Type));
<a name='L1589'>    tmp = <a href='../S/2791.html#L1562' title='Defined at 1562 in Objects/floatobject.c.'>float_new</a>(&amp;PyFloat_Type, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds);
<a name='L1590'>    <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1591'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1592'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyFloat_CheckExact(tmp));
<a name='L1593'>    newobj = type-&gt;tp_alloc(type, 0);
<a name='L1594'>    <b>if</b> (newobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1595'>        Py_DECREF(tmp);
<a name='L1596'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1597'>    <font color='red'>}</font>
<a name='L1598'>    ((<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *)newobj)-&gt;ob_fval = ((<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *)tmp)-&gt;ob_fval;
<a name='L1599'>    Py_DECREF(tmp);
<a name='L1600'>    <b>return</b> newobj;
<a name='L1601'><font color='red'>}</font>
<a name='L1602'>
<a name='L1603'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1604'><a href='../S/2791.html#L1786' title='Refered from 1786 in Objects/floatobject.c.'>float_getnewargs</a>(PyFloatObject *v)
<a name='L1605'><font color='red'>{</font>
<a name='L1606'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(d)", v-&gt;ob_fval);
<a name='L1607'><font color='red'>}</font>
<a name='L1608'>
<a name='L1609'><i><font color='green'>/* this is for the benefit of the pack/unpack routines below */</font></i>
<a name='L1610'>
<a name='L1611'><b>typedef</b> <b>enum</b> <font color='red'>{</font>
<a name='L1612'>    <a href='../R/11159.html' title='Multiple refered from 11 places.'>unknown_format</a>, <a href='../R/8296.html' title='Multiple refered from 8 places.'>ieee_big_endian_format</a>, <a href='../R/8297.html' title='Multiple refered from 8 places.'>ieee_little_endian_format</a>
<a name='L1613'><font color='red'>}</font> <a href='../R/7842.html' title='Multiple refered from 6 places.'>float_format_type</a>;
<a name='L1614'>
<a name='L1615'><b>static</b> <a href='../S/2791.html#L1613' title='Defined at 1613 in Objects/floatobject.c.'>float_format_type</a> double_format, float_format;
<a name='L1616'><b>static</b> <a href='../S/2791.html#L1613' title='Defined at 1613 in Objects/floatobject.c.'>float_format_type</a> detected_double_format, detected_float_format;
<a name='L1617'>
<a name='L1618'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1619'><a href='../S/2791.html#L1787' title='Refered from 1787 in Objects/floatobject.c.'>float_getformat</a>(PyTypeObject *v, PyObject* arg)
<a name='L1620'><font color='red'>{</font>
<a name='L1621'>    <b>char</b>* s;
<a name='L1622'>    <a href='../S/2791.html#L1613' title='Defined at 1613 in Objects/floatobject.c.'>float_format_type</a> r;
<a name='L1623'>
<a name='L1624'>    <b>if</b> (!PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L1625'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1626'>         "__getformat__() argument must be string, not %.500s",
<a name='L1627'>                         <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)-&gt;tp_name);
<a name='L1628'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1629'>    <font color='red'>}</font>
<a name='L1630'>    s = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1631'>    <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1632'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1633'>    <b>if</b> (strcmp(s, "double") == 0) <font color='red'>{</font>
<a name='L1634'>        r = double_format;
<a name='L1635'>    <font color='red'>}</font>
<a name='L1636'>    <b>else</b> <b>if</b> (strcmp(s, "float") == 0) <font color='red'>{</font>
<a name='L1637'>        r = float_format;
<a name='L1638'>    <font color='red'>}</font>
<a name='L1639'>    <b>else</b> <font color='red'>{</font>
<a name='L1640'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1641'>                        "__getformat__() argument 1 must be "
<a name='L1642'>                        "'double' or 'float'");
<a name='L1643'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1644'>    <font color='red'>}</font>
<a name='L1645'>
<a name='L1646'>    <b>switch</b> (r) <font color='red'>{</font>
<a name='L1647'>    <b>case</b> <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>:
<a name='L1648'>        <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("unknown");
<a name='L1649'>    <b>case</b> <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_little_endian_format</a>:
<a name='L1650'>        <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("IEEE, little-endian");
<a name='L1651'>    <b>case</b> <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_big_endian_format</a>:
<a name='L1652'>        <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>("IEEE, big-endian");
<a name='L1653'>    <b>default</b>:
<a name='L1654'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("insane float_format or double_format");
<a name='L1655'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1656'>    <font color='red'>}</font>
<a name='L1657'><font color='red'>}</font>
<a name='L1658'>
<a name='L1659'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(float_getformat_doc,
<a name='L1660'>"float.__getformat__(typestr) -&gt; string\n"
<a name='L1661'>"\n"
<a name='L1662'>"You probably don't want to use this function.  It exists mainly to be\n"
<a name='L1663'>"used in Python's test suite.\n"
<a name='L1664'>"\n"
<a name='L1665'>"typestr must be 'double' or 'float'.  This function returns whichever of\n"
<a name='L1666'>"'unknown', 'IEEE, big-endian' or 'IEEE, little-endian' best describes the\n"
<a name='L1667'>"format of floating point numbers used by the C type named by typestr.");
<a name='L1668'>
<a name='L1669'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1670'><a href='../S/2791.html#L1789' title='Refered from 1789 in Objects/floatobject.c.'>float_setformat</a>(PyTypeObject *v, PyObject* args)
<a name='L1671'><font color='red'>{</font>
<a name='L1672'>    <b>char</b>* typestr;
<a name='L1673'>    <b>char</b>* format;
<a name='L1674'>    <a href='../S/2791.html#L1613' title='Defined at 1613 in Objects/floatobject.c.'>float_format_type</a> f;
<a name='L1675'>    <a href='../S/2791.html#L1613' title='Defined at 1613 in Objects/floatobject.c.'>float_format_type</a> detected;
<a name='L1676'>    <a href='../S/2791.html#L1613' title='Defined at 1613 in Objects/floatobject.c.'>float_format_type</a> *p;
<a name='L1677'>
<a name='L1678'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "ss:__setformat__", &amp;typestr, &amp;format))
<a name='L1679'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1680'>
<a name='L1681'>    <b>if</b> (strcmp(typestr, "double") == 0) <font color='red'>{</font>
<a name='L1682'>        p = &amp;double_format;
<a name='L1683'>        detected = detected_double_format;
<a name='L1684'>    <font color='red'>}</font>
<a name='L1685'>    <b>else</b> <b>if</b> (strcmp(typestr, "float") == 0) <font color='red'>{</font>
<a name='L1686'>        p = &amp;float_format;
<a name='L1687'>        detected = detected_float_format;
<a name='L1688'>    <font color='red'>}</font>
<a name='L1689'>    <b>else</b> <font color='red'>{</font>
<a name='L1690'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1691'>                        "__setformat__() argument 1 must "
<a name='L1692'>                        "be 'double' or 'float'");
<a name='L1693'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1694'>    <font color='red'>}</font>
<a name='L1695'>
<a name='L1696'>    <b>if</b> (strcmp(format, "unknown") == 0) <font color='red'>{</font>
<a name='L1697'>        f = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>;
<a name='L1698'>    <font color='red'>}</font>
<a name='L1699'>    <b>else</b> <b>if</b> (strcmp(format, "IEEE, little-endian") == 0) <font color='red'>{</font>
<a name='L1700'>        f = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_little_endian_format</a>;
<a name='L1701'>    <font color='red'>}</font>
<a name='L1702'>    <b>else</b> <b>if</b> (strcmp(format, "IEEE, big-endian") == 0) <font color='red'>{</font>
<a name='L1703'>        f = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_big_endian_format</a>;
<a name='L1704'>    <font color='red'>}</font>
<a name='L1705'>    <b>else</b> <font color='red'>{</font>
<a name='L1706'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1707'>                        "__setformat__() argument 2 must be "
<a name='L1708'>                        "'unknown', 'IEEE, little-endian' or "
<a name='L1709'>                        "'IEEE, big-endian'");
<a name='L1710'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1711'>
<a name='L1712'>    <font color='red'>}</font>
<a name='L1713'>
<a name='L1714'>    <b>if</b> (f != <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a> &amp;&amp; f != detected) <font color='red'>{</font>
<a name='L1715'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L1716'>                     "can only set %s format to 'unknown' or the "
<a name='L1717'>                     "detected platform value", typestr);
<a name='L1718'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1719'>    <font color='red'>}</font>
<a name='L1720'>
<a name='L1721'>    *p = f;
<a name='L1722'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L1723'><font color='red'>}</font>
<a name='L1724'>
<a name='L1725'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(float_setformat_doc,
<a name='L1726'>"float.__setformat__(typestr, fmt) -&gt; None\n"
<a name='L1727'>"\n"
<a name='L1728'>"You probably don't want to use this function.  It exists mainly to be\n"
<a name='L1729'>"used in Python's test suite.\n"
<a name='L1730'>"\n"
<a name='L1731'>"typestr must be 'double' or 'float'.  fmt must be one of 'unknown',\n"
<a name='L1732'>"'IEEE, big-endian' or 'IEEE, little-endian', and in addition can only be\n"
<a name='L1733'>"one of the latter two if it appears to match the underlying C reality.\n"
<a name='L1734'>"\n"
<a name='L1735'>"Overrides the automatic determination of C-level floating point type.\n"
<a name='L1736'>"This affects how floats are converted to and from binary strings.");
<a name='L1737'>
<a name='L1738'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1739'><a href='../S/2791.html#L1802' title='Refered from 1802 in Objects/floatobject.c.'>float_getzero</a>(PyObject *v, <b>void</b> *closure)
<a name='L1740'><font color='red'>{</font>
<a name='L1741'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(0.0);
<a name='L1742'><font color='red'>}</font>
<a name='L1743'>
<a name='L1744'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1745'><a href='../S/2791.html#L1791' title='Refered from 1791 in Objects/floatobject.c.'>float__format__</a>(PyObject *self, PyObject *args)
<a name='L1746'><font color='red'>{</font>
<a name='L1747'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *format_spec;
<a name='L1748'>
<a name='L1749'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "U:__format__", &amp;format_spec))
<a name='L1750'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1751'>    <b>return</b> _PyFloat_FormatAdvanced(self,
<a name='L1752'>                                   <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(format_spec),
<a name='L1753'>                                   <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(format_spec));
<a name='L1754'><font color='red'>}</font>
<a name='L1755'>
<a name='L1756'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(float__format__doc,
<a name='L1757'>"float.__format__(format_spec) -&gt; string\n"
<a name='L1758'>"\n"
<a name='L1759'>"Formats the float according to format_spec.");
<a name='L1760'>
<a name='L1761'>
<a name='L1762'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> float_methods[] = <font color='red'>{</font>
<a name='L1763'>    <font color='red'>{</font>"conjugate",       (PyCFunction)<a href='../S/2791.html#L1063' title='Defined at 1063 in Objects/floatobject.c.'>float_float</a>,       <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1764'>     "Returns self, the complex conjugate of any float."<font color='red'>}</font>,
<a name='L1765'>    <font color='red'>{</font>"__trunc__",       (PyCFunction)<a href='../S/2791.html#L880' title='Defined at 880 in Objects/floatobject.c.'>float_trunc</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1766'>     "Returns the Integral closest to x between 0 and x."<font color='red'>}</font>,
<a name='L1767'>    <font color='red'>{</font>"__round__",       (PyCFunction)<a href='../S/2791.html#L1017' title='Defined at 1017 in Objects/floatobject.c.'>float_round</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L1768'>     "Returns the Integral closest to x, rounding half toward even.\n"
<a name='L1769'>     "When an argument is passed, works like built-in round(x, ndigits)."<font color='red'>}</font>,
<a name='L1770'>    <font color='red'>{</font>"as_integer_ratio", (PyCFunction)<a href='../S/2791.html#L1468' title='Defined at 1468 in Objects/floatobject.c.'>float_as_integer_ratio</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1771'>     float_as_integer_ratio_doc<font color='red'>}</font>,
<a name='L1772'>    <font color='red'>{</font>"fromhex", (PyCFunction)<a href='../S/2791.html#L1217' title='Defined at 1217 in Objects/floatobject.c.'>float_fromhex</a>,
<a name='L1773'>     METH_O|METH_CLASS, float_fromhex_doc<font color='red'>}</font>,
<a name='L1774'>    <font color='red'>{</font>"hex", (PyCFunction)<a href='../S/2791.html#L1153' title='Defined at 1153 in Objects/floatobject.c.'>float_hex</a>,
<a name='L1775'>     <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, float_hex_doc<font color='red'>}</font>,
<a name='L1776'>    <font color='red'>{</font>"is_integer",      (PyCFunction)<a href='../S/2791.html#L828' title='Defined at 828 in Objects/floatobject.c.'>float_is_integer</a>,  <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1777'>     "Returns True if the float is an integer."<font color='red'>}</font>,
<a name='L1778'><font color='darkred'>#if</font> 0
<a name='L1779'>    <font color='red'>{</font>"is_inf",          (PyCFunction)<a href='../S/2791.html#L852' title='Defined at 852 in Objects/floatobject.c.'>float_is_inf</a>,      <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1780'>     "Returns True if the float is positive or negative infinite."<font color='red'>}</font>,
<a name='L1781'>    <font color='red'>{</font>"is_finite",       (PyCFunction)<a href='../S/2791.html#L870' title='Defined at 870 in Objects/floatobject.c.'>float_is_finite</a>,   <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1782'>     "Returns True if the float is finite, neither infinite nor NaN."<font color='red'>}</font>,
<a name='L1783'>    <font color='red'>{</font>"is_nan",          (PyCFunction)<a href='../S/2791.html#L861' title='Defined at 861 in Objects/floatobject.c.'>float_is_nan</a>,      <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1784'>     "Returns True if the float is not a number (NaN)."<font color='red'>}</font>,
<a name='L1785'><font color='darkred'>#endif</font>
<a name='L1786'>    <font color='red'>{</font>"__getnewargs__",          (PyCFunction)<a href='../S/2791.html#L1604' title='Defined at 1604 in Objects/floatobject.c.'>float_getnewargs</a>,  <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L1787'>    <font color='red'>{</font>"__getformat__",           (PyCFunction)<a href='../S/2791.html#L1619' title='Defined at 1619 in Objects/floatobject.c.'>float_getformat</a>,
<a name='L1788'>     METH_O|METH_CLASS,                 float_getformat_doc<font color='red'>}</font>,
<a name='L1789'>    <font color='red'>{</font>"__setformat__",           (PyCFunction)<a href='../S/2791.html#L1670' title='Defined at 1670 in Objects/floatobject.c.'>float_setformat</a>,
<a name='L1790'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_CLASS,           float_setformat_doc<font color='red'>}</font>,
<a name='L1791'>    <font color='red'>{</font>"__format__",          (PyCFunction)<a href='../S/2791.html#L1745' title='Defined at 1745 in Objects/floatobject.c.'>float__format__</a>,
<a name='L1792'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,                  float__format__doc<font color='red'>}</font>,
<a name='L1793'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>           <i><font color='green'>/* sentinel */</font></i>
<a name='L1794'><font color='red'>}</font>;
<a name='L1795'>
<a name='L1796'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> float_getset[] = <font color='red'>{</font>
<a name='L1797'>    <font color='red'>{</font>"real",
<a name='L1798'>     (getter)<a href='../S/2791.html#L1063' title='Defined at 1063 in Objects/floatobject.c.'>float_float</a>, (setter)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1799'>     "the real part of a complex number",
<a name='L1800'>     <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1801'>    <font color='red'>{</font>"imag",
<a name='L1802'>     (getter)<a href='../S/2791.html#L1739' title='Defined at 1739 in Objects/floatobject.c.'>float_getzero</a>, (setter)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1803'>     "the imaginary part of a complex number",
<a name='L1804'>     <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1805'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>  <i><font color='green'>/* Sentinel */</font></i>
<a name='L1806'><font color='red'>}</font>;
<a name='L1807'>
<a name='L1808'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(float_doc,
<a name='L1809'>"float(x) -&gt; floating point number\n\
<a name='L1810'>\n\
<a name='L1811'>Convert a string or number to a floating point number, if possible.");
<a name='L1812'>
<a name='L1813'>
<a name='L1814'><b>static</b> <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> float_as_number = <font color='red'>{</font>
<a name='L1815'>    <a href='../S/2791.html#L537' title='Defined at 537 in Objects/floatobject.c.'>float_add</a>,          <i><font color='green'>/*nb_add*/</font></i>
<a name='L1816'>    <a href='../S/2791.html#L549' title='Defined at 549 in Objects/floatobject.c.'>float_sub</a>,          <i><font color='green'>/*nb_subtract*/</font></i>
<a name='L1817'>    <a href='../S/2791.html#L561' title='Defined at 561 in Objects/floatobject.c.'>float_mul</a>,          <i><font color='green'>/*nb_multiply*/</font></i>
<a name='L1818'>    <a href='../S/2791.html#L590' title='Defined at 590 in Objects/floatobject.c.'>float_rem</a>,          <i><font color='green'>/*nb_remainder*/</font></i>
<a name='L1819'>    <a href='../S/2791.html#L620' title='Defined at 620 in Objects/floatobject.c.'>float_divmod</a>,       <i><font color='green'>/*nb_divmod*/</font></i>
<a name='L1820'>    <a href='../S/2791.html#L686' title='Defined at 686 in Objects/floatobject.c.'>float_pow</a>,          <i><font color='green'>/*nb_power*/</font></i>
<a name='L1821'>    (unaryfunc)<a href='../S/2791.html#L810' title='Defined at 810 in Objects/floatobject.c.'>float_neg</a>, <i><font color='green'>/*nb_negative*/</font></i>
<a name='L1822'>    (unaryfunc)<a href='../S/2791.html#L1063' title='Defined at 1063 in Objects/floatobject.c.'>float_float</a>, <i><font color='green'>/*nb_positive*/</font></i>
<a name='L1823'>    (unaryfunc)<a href='../S/2791.html#L816' title='Defined at 816 in Objects/floatobject.c.'>float_abs</a>, <i><font color='green'>/*nb_absolute*/</font></i>
<a name='L1824'>    (inquiry)<a href='../S/2791.html#L822' title='Defined at 822 in Objects/floatobject.c.'>float_bool</a>, <i><font color='green'>/*nb_bool*/</font></i>
<a name='L1825'>    0,                  <i><font color='green'>/*nb_invert*/</font></i>
<a name='L1826'>    0,                  <i><font color='green'>/*nb_lshift*/</font></i>
<a name='L1827'>    0,                  <i><font color='green'>/*nb_rshift*/</font></i>
<a name='L1828'>    0,                  <i><font color='green'>/*nb_and*/</font></i>
<a name='L1829'>    0,                  <i><font color='green'>/*nb_xor*/</font></i>
<a name='L1830'>    0,                  <i><font color='green'>/*nb_or*/</font></i>
<a name='L1831'>    <a href='../S/2791.html#L880' title='Defined at 880 in Objects/floatobject.c.'>float_trunc</a>,        <i><font color='green'>/*nb_int*/</font></i>
<a name='L1832'>    0,                  <i><font color='green'>/*nb_reserved*/</font></i>
<a name='L1833'>    <a href='../S/2791.html#L1063' title='Defined at 1063 in Objects/floatobject.c.'>float_float</a>,        <i><font color='green'>/*nb_float*/</font></i>
<a name='L1834'>    0,                  <i><font color='green'>/* nb_inplace_add */</font></i>
<a name='L1835'>    0,                  <i><font color='green'>/* nb_inplace_subtract */</font></i>
<a name='L1836'>    0,                  <i><font color='green'>/* nb_inplace_multiply */</font></i>
<a name='L1837'>    0,                  <i><font color='green'>/* nb_inplace_remainder */</font></i>
<a name='L1838'>    0,                  <i><font color='green'>/* nb_inplace_power */</font></i>
<a name='L1839'>    0,                  <i><font color='green'>/* nb_inplace_lshift */</font></i>
<a name='L1840'>    0,                  <i><font color='green'>/* nb_inplace_rshift */</font></i>
<a name='L1841'>    0,                  <i><font color='green'>/* nb_inplace_and */</font></i>
<a name='L1842'>    0,                  <i><font color='green'>/* nb_inplace_xor */</font></i>
<a name='L1843'>    0,                  <i><font color='green'>/* nb_inplace_or */</font></i>
<a name='L1844'>    <a href='../S/2791.html#L667' title='Defined at 667 in Objects/floatobject.c.'>float_floor_div</a>, <i><font color='green'>/* nb_floor_divide */</font></i>
<a name='L1845'>    <a href='../S/2791.html#L573' title='Defined at 573 in Objects/floatobject.c.'>float_div</a>,          <i><font color='green'>/* nb_true_divide */</font></i>
<a name='L1846'>    0,                  <i><font color='green'>/* nb_inplace_floor_divide */</font></i>
<a name='L1847'>    0,                  <i><font color='green'>/* nb_inplace_true_divide */</font></i>
<a name='L1848'><font color='red'>}</font>;
<a name='L1849'>
<a name='L1850'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyFloat_Type = <font color='red'>{</font>
<a name='L1851'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(&amp;PyType_Type, 0)
<a name='L1852'>    "float",
<a name='L1853'>    <b>sizeof</b>(<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a>),
<a name='L1854'>    0,
<a name='L1855'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2791.html#L233' title='Defined at 233 in Objects/floatobject.c.'>float_dealloc</a>,                  <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L1856'>    0,                                          <i><font color='green'>/* tp_print */</font></i>
<a name='L1857'>    0,                                          <i><font color='green'>/* tp_getattr */</font></i>
<a name='L1858'>    0,                                          <i><font color='green'>/* tp_setattr */</font></i>
<a name='L1859'>    0,                                          <i><font color='green'>/* tp_reserved */</font></i>
<a name='L1860'>    (reprfunc)<a href='../S/2791.html#L313' title='Defined at 313 in Objects/floatobject.c.'>float_repr</a>,                       <i><font color='green'>/* tp_repr */</font></i>
<a name='L1861'>    &amp;float_as_number,                           <i><font color='green'>/* tp_as_number */</font></i>
<a name='L1862'>    0,                                          <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L1863'>    0,                                          <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L1864'>    (hashfunc)<a href='../S/2791.html#L531' title='Defined at 531 in Objects/floatobject.c.'>float_hash</a>,                       <i><font color='green'>/* tp_hash */</font></i>
<a name='L1865'>    0,                                          <i><font color='green'>/* tp_call */</font></i>
<a name='L1866'>    (reprfunc)<a href='../S/2791.html#L313' title='Defined at 313 in Objects/floatobject.c.'>float_repr</a>,                       <i><font color='green'>/* tp_str */</font></i>
<a name='L1867'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,                    <i><font color='green'>/* tp_getattro */</font></i>
<a name='L1868'>    0,                                          <i><font color='green'>/* tp_setattro */</font></i>
<a name='L1869'>    0,                                          <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L1870'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE, <i><font color='green'>/* tp_flags */</font></i>
<a name='L1871'>    float_doc,                                  <i><font color='green'>/* tp_doc */</font></i>
<a name='L1872'>    0,                                          <i><font color='green'>/* tp_traverse */</font></i>
<a name='L1873'>    0,                                          <i><font color='green'>/* tp_clear */</font></i>
<a name='L1874'>    <a href='../S/2791.html#L343' title='Defined at 343 in Objects/floatobject.c.'>float_richcompare</a>,                          <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L1875'>    0,                                          <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L1876'>    0,                                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L1877'>    0,                                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L1878'>    float_methods,                              <i><font color='green'>/* tp_methods */</font></i>
<a name='L1879'>    0,                                          <i><font color='green'>/* tp_members */</font></i>
<a name='L1880'>    float_getset,                               <i><font color='green'>/* tp_getset */</font></i>
<a name='L1881'>    0,                                          <i><font color='green'>/* tp_base */</font></i>
<a name='L1882'>    0,                                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L1883'>    0,                                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L1884'>    0,                                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L1885'>    0,                                          <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L1886'>    0,                                          <i><font color='green'>/* tp_init */</font></i>
<a name='L1887'>    0,                                          <i><font color='green'>/* tp_alloc */</font></i>
<a name='L1888'>    <a href='../S/2791.html#L1562' title='Defined at 1562 in Objects/floatobject.c.'>float_new</a>,                                  <i><font color='green'>/* tp_new */</font></i>
<a name='L1889'><font color='red'>}</font>;
<a name='L1890'>
<a name='L1891'><b>void</b>
<a name='L1892'><a href='../S/3138.html#L240' title='Refered from 240 in Python/pythonrun.c.'>_PyFloat_Init</a>(<b>void</b>)
<a name='L1893'><font color='red'>{</font>
<a name='L1894'>    <i><font color='green'>/* We attempt to determine if this machine is using IEEE</font></i>
<a name='L1895'><i><font color='green'>       floating point formats by peering at the bits of some</font></i>
<a name='L1896'><i><font color='green'>       carefully chosen values.  If it looks like we are on an</font></i>
<a name='L1897'><i><font color='green'>       IEEE platform, the float packing/unpacking routines can</font></i>
<a name='L1898'><i><font color='green'>       just copy bits, if not they resort to arithmetic &amp; shifts</font></i>
<a name='L1899'><i><font color='green'>       and masks.  The shifts &amp; masks approach works on all finite</font></i>
<a name='L1900'><i><font color='green'>       values, but what happens to infinities, NaNs and signed</font></i>
<a name='L1901'><i><font color='green'>       zeroes on packing is an accident, and attempting to unpack</font></i>
<a name='L1902'><i><font color='green'>       a NaN or an infinity will raise an exception.</font></i>
<a name='L1903'><i><font color='green'></font></i>
<a name='L1904'><i><font color='green'>       Note that if we're on some whacked-out platform which uses</font></i>
<a name='L1905'><i><font color='green'>       IEEE formats but isn't strictly little-endian or big-</font></i>
<a name='L1906'><i><font color='green'>       endian, we will fall back to the portable shifts &amp; masks</font></i>
<a name='L1907'><i><font color='green'>       method. */</font></i>
<a name='L1908'>
<a name='L1909'><font color='darkred'>#if</font> <a href='../D/4727.html' title='Multiple defined in 7 places.'>SIZEOF_DOUBLE</a> == 8
<a name='L1910'>    <font color='red'>{</font>
<a name='L1911'>        <b>double</b> x = 9006104071832581.0;
<a name='L1912'>        <b>if</b> (memcmp(&amp;x, "\x43\x3f\xff\x01\x02\x03\x04\x05", 8) == 0)
<a name='L1913'>            detected_double_format = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_big_endian_format</a>;
<a name='L1914'>        <b>else</b> <b>if</b> (memcmp(&amp;x, "\x05\x04\x03\x02\x01\xff\x3f\x43", 8) == 0)
<a name='L1915'>            detected_double_format = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_little_endian_format</a>;
<a name='L1916'>        <b>else</b>
<a name='L1917'>            detected_double_format = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>;
<a name='L1918'>    <font color='red'>}</font>
<a name='L1919'><font color='darkred'>#else</font>
<a name='L1920'>    detected_double_format = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>;
<a name='L1921'><font color='darkred'>#endif</font>
<a name='L1922'>
<a name='L1923'><font color='darkred'>#if</font> <a href='../S/2906.html#L377' title='Defined at 377 in PC/pyconfig.h.'>SIZEOF_FLOAT</a> == 4
<a name='L1924'>    <font color='red'>{</font>
<a name='L1925'>        <b>float</b> y = 16711938.0;
<a name='L1926'>        <b>if</b> (memcmp(&amp;y, "\x4b\x7f\x01\x02", 4) == 0)
<a name='L1927'>            detected_float_format = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_big_endian_format</a>;
<a name='L1928'>        <b>else</b> <b>if</b> (memcmp(&amp;y, "\x02\x01\x7f\x4b", 4) == 0)
<a name='L1929'>            detected_float_format = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_little_endian_format</a>;
<a name='L1930'>        <b>else</b>
<a name='L1931'>            detected_float_format = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>;
<a name='L1932'>    <font color='red'>}</font>
<a name='L1933'><font color='darkred'>#else</font>
<a name='L1934'>    detected_float_format = <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>;
<a name='L1935'><font color='darkred'>#endif</font>
<a name='L1936'>
<a name='L1937'>    double_format = detected_double_format;
<a name='L1938'>    float_format = detected_float_format;
<a name='L1939'>
<a name='L1940'>    <i><font color='green'>/* Init float info */</font></i>
<a name='L1941'>    <b>if</b> (FloatInfoType.tp_name == 0)
<a name='L1942'>        <a href='../S/2822.html#L318' title='Defined at 318 in Objects/structseq.c.'>PyStructSequence_InitType</a>(&amp;FloatInfoType, &amp;floatinfo_desc);
<a name='L1943'><font color='red'>}</font>
<a name='L1944'>
<a name='L1945'><b>int</b>
<a name='L1946'><a href='../R/2950.html' title='Multiple refered from 2 places.'>PyFloat_ClearFreeList</a>(<b>void</b>)
<a name='L1947'><font color='red'>{</font>
<a name='L1948'>    <a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *p;
<a name='L1949'>    <a href='../S/2791.html#L48' title='Defined at 48 in Objects/floatobject.c.'>PyFloatBlock</a> *list, *next;
<a name='L1950'>    <b>int</b> i;
<a name='L1951'>    <b>int</b> u;                      <i><font color='green'>/* remaining unfreed floats per block */</font></i>
<a name='L1952'>    <b>int</b> freelist_size = 0;
<a name='L1953'>
<a name='L1954'>    list = block_list;
<a name='L1955'>    block_list = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1956'>    free_list = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1957'>    <b>while</b> (list != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1958'>        u = 0;
<a name='L1959'>        <b>for</b> (i = 0, p = &amp;list-&gt;objects[0];
<a name='L1960'>             i &lt; <a href='../S/2791.html#L41' title='Defined at 41 in Objects/floatobject.c.'>N_FLOATOBJECTS</a>;
<a name='L1961'>             i++, p++) <font color='red'>{</font>
<a name='L1962'>            <b>if</b> (PyFloat_CheckExact(p) &amp;&amp; <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(p) != 0)
<a name='L1963'>                u++;
<a name='L1964'>        <font color='red'>}</font>
<a name='L1965'>        next = list-&gt;next;
<a name='L1966'>        <b>if</b> (u) <font color='red'>{</font>
<a name='L1967'>            list-&gt;next = block_list;
<a name='L1968'>            block_list = list;
<a name='L1969'>            <b>for</b> (i = 0, p = &amp;list-&gt;objects[0];
<a name='L1970'>                 i &lt; <a href='../S/2791.html#L41' title='Defined at 41 in Objects/floatobject.c.'>N_FLOATOBJECTS</a>;
<a name='L1971'>                 i++, p++) <font color='red'>{</font>
<a name='L1972'>                <b>if</b> (!PyFloat_CheckExact(p) ||
<a name='L1973'>                    <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(p) == 0) <font color='red'>{</font>
<a name='L1974'>                    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(p) = (<b>struct</b> <a href='../D/6629.html' title='Multiple defined in 2 places.'>_typeobject</a> *)
<a name='L1975'>                        free_list;
<a name='L1976'>                    free_list = p;
<a name='L1977'>                <font color='red'>}</font>
<a name='L1978'>            <font color='red'>}</font>
<a name='L1979'>        <font color='red'>}</font>
<a name='L1980'>        <b>else</b> <font color='red'>{</font>
<a name='L1981'>            PyMem_FREE(list);
<a name='L1982'>        <font color='red'>}</font>
<a name='L1983'>        freelist_size += u;
<a name='L1984'>        list = next;
<a name='L1985'>    <font color='red'>}</font>
<a name='L1986'>    <b>return</b> freelist_size;
<a name='L1987'><font color='red'>}</font>
<a name='L1988'>
<a name='L1989'><b>void</b>
<a name='L1990'><a href='../S/3138.html#L504' title='Refered from 504 in Python/pythonrun.c.'>PyFloat_Fini</a>(<b>void</b>)
<a name='L1991'><font color='red'>{</font>
<a name='L1992'>    <a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *p;
<a name='L1993'>    <a href='../S/2791.html#L48' title='Defined at 48 in Objects/floatobject.c.'>PyFloatBlock</a> *list;
<a name='L1994'>    <b>int</b> i;
<a name='L1995'>    <b>int</b> u;                      <i><font color='green'>/* total unfreed floats per block */</font></i>
<a name='L1996'>
<a name='L1997'>    u = <a href='../S/2791.html#L1946' title='Defined at 1946 in Objects/floatobject.c.'>PyFloat_ClearFreeList</a>();
<a name='L1998'>
<a name='L1999'>    <b>if</b> (!Py_VerboseFlag)
<a name='L2000'>        <b>return</b>;
<a name='L2001'>    fprintf(stderr, "# cleanup floats");
<a name='L2002'>    <b>if</b> (!u) <font color='red'>{</font>
<a name='L2003'>        fprintf(stderr, "\n");
<a name='L2004'>    <font color='red'>}</font>
<a name='L2005'>    <b>else</b> <font color='red'>{</font>
<a name='L2006'>        fprintf(stderr,
<a name='L2007'>            ": %d unfreed float%s\n",
<a name='L2008'>            u, u == 1 ? "" : "s");
<a name='L2009'>    <font color='red'>}</font>
<a name='L2010'>    <b>if</b> (Py_VerboseFlag &gt; 1) <font color='red'>{</font>
<a name='L2011'>        list = block_list;
<a name='L2012'>        <b>while</b> (list != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2013'>            <b>for</b> (i = 0, p = &amp;list-&gt;objects[0];
<a name='L2014'>                 i &lt; <a href='../S/2791.html#L41' title='Defined at 41 in Objects/floatobject.c.'>N_FLOATOBJECTS</a>;
<a name='L2015'>                 i++, p++) <font color='red'>{</font>
<a name='L2016'>                <b>if</b> (PyFloat_CheckExact(p) &amp;&amp;
<a name='L2017'>                    <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(p) != 0) <font color='red'>{</font>
<a name='L2018'>                    <b>char</b> *buf = PyOS_double_to_string(
<a name='L2019'>                        PyFloat_AS_DOUBLE(p), 'r',
<a name='L2020'>                        0, 0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2021'>                    <b>if</b> (buf) <font color='red'>{</font>
<a name='L2022'>                        <i><font color='green'>/* XXX(twouters) cast</font></i>
<a name='L2023'><i><font color='green'>                           refcount to long</font></i>
<a name='L2024'><i><font color='green'>                           until %zd is</font></i>
<a name='L2025'><i><font color='green'>                           universally</font></i>
<a name='L2026'><i><font color='green'>                           available</font></i>
<a name='L2027'><i><font color='green'>                        */</font></i>
<a name='L2028'>                        fprintf(stderr,
<a name='L2029'>                 "#   &lt;float at %p, refcnt=%ld, val=%s&gt;\n",
<a name='L2030'>                                    p, (<b>long</b>)<a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(p), buf);
<a name='L2031'>                                    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(buf);
<a name='L2032'>                            <font color='red'>}</font>
<a name='L2033'>                <font color='red'>}</font>
<a name='L2034'>            <font color='red'>}</font>
<a name='L2035'>            list = list-&gt;next;
<a name='L2036'>        <font color='red'>}</font>
<a name='L2037'>    <font color='red'>}</font>
<a name='L2038'><font color='red'>}</font>
<a name='L2039'>
<a name='L2040'><i><font color='green'>/*----------------------------------------------------------------------------</font></i>
<a name='L2041'><i><font color='green'> * _PyFloat_{Pack,Unpack}{4,8}.  See floatobject.h.</font></i>
<a name='L2042'><i><font color='green'> */</font></i>
<a name='L2043'><b>int</b>
<a name='L2044'><a href='../R/5397.html' title='Multiple refered from 4 places.'>_PyFloat_Pack4</a>(<b>double</b> x, <b>unsigned</b> <b>char</b> *p, <b>int</b> le)
<a name='L2045'><font color='red'>{</font>
<a name='L2046'>    <b>if</b> (float_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>) <font color='red'>{</font>
<a name='L2047'>        <b>unsigned</b> <b>char</b> sign;
<a name='L2048'>        <b>int</b> e;
<a name='L2049'>        <b>double</b> f;
<a name='L2050'>        <b>unsigned</b> <b>int</b> fbits;
<a name='L2051'>        <b>int</b> incr = 1;
<a name='L2052'>
<a name='L2053'>        <b>if</b> (le) <font color='red'>{</font>
<a name='L2054'>            p += 3;
<a name='L2055'>            incr = -1;
<a name='L2056'>        <font color='red'>}</font>
<a name='L2057'>
<a name='L2058'>        <b>if</b> (x &lt; 0) <font color='red'>{</font>
<a name='L2059'>            sign = 1;
<a name='L2060'>            x = -x;
<a name='L2061'>        <font color='red'>}</font>
<a name='L2062'>        <b>else</b>
<a name='L2063'>            sign = 0;
<a name='L2064'>
<a name='L2065'>        f = frexp(x, &amp;e);
<a name='L2066'>
<a name='L2067'>        <i><font color='green'>/* Normalize f to be in the range [1.0, 2.0) */</font></i>
<a name='L2068'>        <b>if</b> (0.5 &lt;= f &amp;&amp; f &lt; 1.0) <font color='red'>{</font>
<a name='L2069'>            f *= 2.0;
<a name='L2070'>            e--;
<a name='L2071'>        <font color='red'>}</font>
<a name='L2072'>        <b>else</b> <b>if</b> (f == 0.0)
<a name='L2073'>            e = 0;
<a name='L2074'>        <b>else</b> <font color='red'>{</font>
<a name='L2075'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L2076'>                            "frexp() result out of range");
<a name='L2077'>            <b>return</b> -1;
<a name='L2078'>        <font color='red'>}</font>
<a name='L2079'>
<a name='L2080'>        <b>if</b> (e &gt;= 128)
<a name='L2081'>            <b>goto</b> Overflow;
<a name='L2082'>        <b>else</b> <b>if</b> (e &lt; -126) <font color='red'>{</font>
<a name='L2083'>            <i><font color='green'>/* Gradual underflow */</font></i>
<a name='L2084'>            f = ldexp(f, 126 + e);
<a name='L2085'>            e = 0;
<a name='L2086'>        <font color='red'>}</font>
<a name='L2087'>        <b>else</b> <b>if</b> (!(e == 0 &amp;&amp; f == 0.0)) <font color='red'>{</font>
<a name='L2088'>            e += 127;
<a name='L2089'>            f -= 1.0; <i><font color='green'>/* Get rid of leading 1 */</font></i>
<a name='L2090'>        <font color='red'>}</font>
<a name='L2091'>
<a name='L2092'>        f *= 8388608.0; <i><font color='green'>/* 2**23 */</font></i>
<a name='L2093'>        fbits = (<b>unsigned</b> <b>int</b>)(f + 0.5); <i><font color='green'>/* Round */</font></i>
<a name='L2094'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(fbits &lt;= 8388608);
<a name='L2095'>        <b>if</b> (fbits &gt;&gt; 23) <font color='red'>{</font>
<a name='L2096'>            <i><font color='green'>/* The carry propagated out of a string of 23 1 bits. */</font></i>
<a name='L2097'>            fbits = 0;
<a name='L2098'>            ++e;
<a name='L2099'>            <b>if</b> (e &gt;= 255)
<a name='L2100'>                <b>goto</b> Overflow;
<a name='L2101'>        <font color='red'>}</font>
<a name='L2102'>
<a name='L2103'>        <i><font color='green'>/* First byte */</font></i>
<a name='L2104'>        *p = (sign &lt;&lt; 7) | (e &gt;&gt; 1);
<a name='L2105'>        p += incr;
<a name='L2106'>
<a name='L2107'>        <i><font color='green'>/* Second byte */</font></i>
<a name='L2108'>        *p = (<b>char</b>) (((e &amp; 1) &lt;&lt; 7) | (fbits &gt;&gt; 16));
<a name='L2109'>        p += incr;
<a name='L2110'>
<a name='L2111'>        <i><font color='green'>/* Third byte */</font></i>
<a name='L2112'>        *p = (fbits &gt;&gt; 8) &amp; 0xFF;
<a name='L2113'>        p += incr;
<a name='L2114'>
<a name='L2115'>        <i><font color='green'>/* Fourth byte */</font></i>
<a name='L2116'>        *p = fbits &amp; 0xFF;
<a name='L2117'>
<a name='L2118'>        <i><font color='green'>/* Done */</font></i>
<a name='L2119'>        <b>return</b> 0;
<a name='L2120'>
<a name='L2121'>    <font color='red'>}</font>
<a name='L2122'>    <b>else</b> <font color='red'>{</font>
<a name='L2123'>        <b>float</b> y = (<b>float</b>)x;
<a name='L2124'>        <b>const</b> <b>char</b> *s = (<b>char</b>*)&amp;y;
<a name='L2125'>        <b>int</b> i, incr = 1;
<a name='L2126'>
<a name='L2127'>        <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(y) &amp;&amp; !<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x))
<a name='L2128'>            <b>goto</b> Overflow;
<a name='L2129'>
<a name='L2130'>        <b>if</b> ((float_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_little_endian_format</a> &amp;&amp; !le)
<a name='L2131'>            || (float_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_big_endian_format</a> &amp;&amp; le)) <font color='red'>{</font>
<a name='L2132'>            p += 3;
<a name='L2133'>            incr = -1;
<a name='L2134'>        <font color='red'>}</font>
<a name='L2135'>
<a name='L2136'>        <b>for</b> (i = 0; i &lt; 4; i++) <font color='red'>{</font>
<a name='L2137'>            *p = *s++;
<a name='L2138'>            p += incr;
<a name='L2139'>        <font color='red'>}</font>
<a name='L2140'>        <b>return</b> 0;
<a name='L2141'>    <font color='red'>}</font>
<a name='L2142'>  Overflow:
<a name='L2143'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L2144'>                    "float too large to pack with f format");
<a name='L2145'>    <b>return</b> -1;
<a name='L2146'><font color='red'>}</font>
<a name='L2147'>
<a name='L2148'><b>int</b>
<a name='L2149'><a href='../R/5398.html' title='Multiple refered from 8 places.'>_PyFloat_Pack8</a>(<b>double</b> x, <b>unsigned</b> <b>char</b> *p, <b>int</b> le)
<a name='L2150'><font color='red'>{</font>
<a name='L2151'>    <b>if</b> (double_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>) <font color='red'>{</font>
<a name='L2152'>        <b>unsigned</b> <b>char</b> sign;
<a name='L2153'>        <b>int</b> e;
<a name='L2154'>        <b>double</b> f;
<a name='L2155'>        <b>unsigned</b> <b>int</b> fhi, flo;
<a name='L2156'>        <b>int</b> incr = 1;
<a name='L2157'>
<a name='L2158'>        <b>if</b> (le) <font color='red'>{</font>
<a name='L2159'>            p += 7;
<a name='L2160'>            incr = -1;
<a name='L2161'>        <font color='red'>}</font>
<a name='L2162'>
<a name='L2163'>        <b>if</b> (x &lt; 0) <font color='red'>{</font>
<a name='L2164'>            sign = 1;
<a name='L2165'>            x = -x;
<a name='L2166'>        <font color='red'>}</font>
<a name='L2167'>        <b>else</b>
<a name='L2168'>            sign = 0;
<a name='L2169'>
<a name='L2170'>        f = frexp(x, &amp;e);
<a name='L2171'>
<a name='L2172'>        <i><font color='green'>/* Normalize f to be in the range [1.0, 2.0) */</font></i>
<a name='L2173'>        <b>if</b> (0.5 &lt;= f &amp;&amp; f &lt; 1.0) <font color='red'>{</font>
<a name='L2174'>            f *= 2.0;
<a name='L2175'>            e--;
<a name='L2176'>        <font color='red'>}</font>
<a name='L2177'>        <b>else</b> <b>if</b> (f == 0.0)
<a name='L2178'>            e = 0;
<a name='L2179'>        <b>else</b> <font color='red'>{</font>
<a name='L2180'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L2181'>                            "frexp() result out of range");
<a name='L2182'>            <b>return</b> -1;
<a name='L2183'>        <font color='red'>}</font>
<a name='L2184'>
<a name='L2185'>        <b>if</b> (e &gt;= 1024)
<a name='L2186'>            <b>goto</b> Overflow;
<a name='L2187'>        <b>else</b> <b>if</b> (e &lt; -1022) <font color='red'>{</font>
<a name='L2188'>            <i><font color='green'>/* Gradual underflow */</font></i>
<a name='L2189'>            f = ldexp(f, 1022 + e);
<a name='L2190'>            e = 0;
<a name='L2191'>        <font color='red'>}</font>
<a name='L2192'>        <b>else</b> <b>if</b> (!(e == 0 &amp;&amp; f == 0.0)) <font color='red'>{</font>
<a name='L2193'>            e += 1023;
<a name='L2194'>            f -= 1.0; <i><font color='green'>/* Get rid of leading 1 */</font></i>
<a name='L2195'>        <font color='red'>}</font>
<a name='L2196'>
<a name='L2197'>        <i><font color='green'>/* fhi receives the high 28 bits; flo the low 24 bits (== 52 bits) */</font></i>
<a name='L2198'>        f *= 268435456.0; <i><font color='green'>/* 2**28 */</font></i>
<a name='L2199'>        fhi = (<b>unsigned</b> <b>int</b>)f; <i><font color='green'>/* Truncate */</font></i>
<a name='L2200'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(fhi &lt; 268435456);
<a name='L2201'>
<a name='L2202'>        f -= (<b>double</b>)fhi;
<a name='L2203'>        f *= 16777216.0; <i><font color='green'>/* 2**24 */</font></i>
<a name='L2204'>        flo = (<b>unsigned</b> <b>int</b>)(f + 0.5); <i><font color='green'>/* Round */</font></i>
<a name='L2205'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(flo &lt;= 16777216);
<a name='L2206'>        <b>if</b> (flo &gt;&gt; 24) <font color='red'>{</font>
<a name='L2207'>            <i><font color='green'>/* The carry propagated out of a string of 24 1 bits. */</font></i>
<a name='L2208'>            flo = 0;
<a name='L2209'>            ++fhi;
<a name='L2210'>            <b>if</b> (fhi &gt;&gt; 28) <font color='red'>{</font>
<a name='L2211'>                <i><font color='green'>/* And it also progagated out of the next 28 bits. */</font></i>
<a name='L2212'>                fhi = 0;
<a name='L2213'>                ++e;
<a name='L2214'>                <b>if</b> (e &gt;= 2047)
<a name='L2215'>                    <b>goto</b> Overflow;
<a name='L2216'>            <font color='red'>}</font>
<a name='L2217'>        <font color='red'>}</font>
<a name='L2218'>
<a name='L2219'>        <i><font color='green'>/* First byte */</font></i>
<a name='L2220'>        *p = (sign &lt;&lt; 7) | (e &gt;&gt; 4);
<a name='L2221'>        p += incr;
<a name='L2222'>
<a name='L2223'>        <i><font color='green'>/* Second byte */</font></i>
<a name='L2224'>        *p = (<b>unsigned</b> <b>char</b>) (((e &amp; 0xF) &lt;&lt; 4) | (fhi &gt;&gt; 24));
<a name='L2225'>        p += incr;
<a name='L2226'>
<a name='L2227'>        <i><font color='green'>/* Third byte */</font></i>
<a name='L2228'>        *p = (fhi &gt;&gt; 16) &amp; 0xFF;
<a name='L2229'>        p += incr;
<a name='L2230'>
<a name='L2231'>        <i><font color='green'>/* Fourth byte */</font></i>
<a name='L2232'>        *p = (fhi &gt;&gt; 8) &amp; 0xFF;
<a name='L2233'>        p += incr;
<a name='L2234'>
<a name='L2235'>        <i><font color='green'>/* Fifth byte */</font></i>
<a name='L2236'>        *p = fhi &amp; 0xFF;
<a name='L2237'>        p += incr;
<a name='L2238'>
<a name='L2239'>        <i><font color='green'>/* Sixth byte */</font></i>
<a name='L2240'>        *p = (flo &gt;&gt; 16) &amp; 0xFF;
<a name='L2241'>        p += incr;
<a name='L2242'>
<a name='L2243'>        <i><font color='green'>/* Seventh byte */</font></i>
<a name='L2244'>        *p = (flo &gt;&gt; 8) &amp; 0xFF;
<a name='L2245'>        p += incr;
<a name='L2246'>
<a name='L2247'>        <i><font color='green'>/* Eighth byte */</font></i>
<a name='L2248'>        *p = flo &amp; 0xFF;
<a name='L2249'>        p += incr;
<a name='L2250'>
<a name='L2251'>        <i><font color='green'>/* Done */</font></i>
<a name='L2252'>        <b>return</b> 0;
<a name='L2253'>
<a name='L2254'>      Overflow:
<a name='L2255'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L2256'>                        "float too large to pack with d format");
<a name='L2257'>        <b>return</b> -1;
<a name='L2258'>    <font color='red'>}</font>
<a name='L2259'>    <b>else</b> <font color='red'>{</font>
<a name='L2260'>        <b>const</b> <b>char</b> *s = (<b>char</b>*)&amp;x;
<a name='L2261'>        <b>int</b> i, incr = 1;
<a name='L2262'>
<a name='L2263'>        <b>if</b> ((double_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_little_endian_format</a> &amp;&amp; !le)
<a name='L2264'>            || (double_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_big_endian_format</a> &amp;&amp; le)) <font color='red'>{</font>
<a name='L2265'>            p += 7;
<a name='L2266'>            incr = -1;
<a name='L2267'>        <font color='red'>}</font>
<a name='L2268'>
<a name='L2269'>        <b>for</b> (i = 0; i &lt; 8; i++) <font color='red'>{</font>
<a name='L2270'>            *p = *s++;
<a name='L2271'>            p += incr;
<a name='L2272'>        <font color='red'>}</font>
<a name='L2273'>        <b>return</b> 0;
<a name='L2274'>    <font color='red'>}</font>
<a name='L2275'><font color='red'>}</font>
<a name='L2276'>
<a name='L2277'><b>double</b>
<a name='L2278'><a href='../R/5399.html' title='Multiple refered from 4 places.'>_PyFloat_Unpack4</a>(<b>const</b> <b>unsigned</b> <b>char</b> *p, <b>int</b> le)
<a name='L2279'><font color='red'>{</font>
<a name='L2280'>    <b>if</b> (float_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>) <font color='red'>{</font>
<a name='L2281'>        <b>unsigned</b> <b>char</b> sign;
<a name='L2282'>        <b>int</b> e;
<a name='L2283'>        <b>unsigned</b> <b>int</b> f;
<a name='L2284'>        <b>double</b> x;
<a name='L2285'>        <b>int</b> incr = 1;
<a name='L2286'>
<a name='L2287'>        <b>if</b> (le) <font color='red'>{</font>
<a name='L2288'>            p += 3;
<a name='L2289'>            incr = -1;
<a name='L2290'>        <font color='red'>}</font>
<a name='L2291'>
<a name='L2292'>        <i><font color='green'>/* First byte */</font></i>
<a name='L2293'>        sign = (*p &gt;&gt; 7) &amp; 1;
<a name='L2294'>        e = (*p &amp; 0x7F) &lt;&lt; 1;
<a name='L2295'>        p += incr;
<a name='L2296'>
<a name='L2297'>        <i><font color='green'>/* Second byte */</font></i>
<a name='L2298'>        e |= (*p &gt;&gt; 7) &amp; 1;
<a name='L2299'>        f = (*p &amp; 0x7F) &lt;&lt; 16;
<a name='L2300'>        p += incr;
<a name='L2301'>
<a name='L2302'>        <b>if</b> (e == 255) <font color='red'>{</font>
<a name='L2303'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(
<a name='L2304'>                PyExc_ValueError,
<a name='L2305'>                "can't unpack IEEE 754 special value "
<a name='L2306'>                "on non-IEEE platform");
<a name='L2307'>            <b>return</b> -1;
<a name='L2308'>        <font color='red'>}</font>
<a name='L2309'>
<a name='L2310'>        <i><font color='green'>/* Third byte */</font></i>
<a name='L2311'>        f |= *p &lt;&lt; 8;
<a name='L2312'>        p += incr;
<a name='L2313'>
<a name='L2314'>        <i><font color='green'>/* Fourth byte */</font></i>
<a name='L2315'>        f |= *p;
<a name='L2316'>
<a name='L2317'>        x = (<b>double</b>)f / 8388608.0;
<a name='L2318'>
<a name='L2319'>        <i><font color='green'>/* XXX This sadly ignores Inf/NaN issues */</font></i>
<a name='L2320'>        <b>if</b> (e == 0)
<a name='L2321'>            e = -126;
<a name='L2322'>        <b>else</b> <font color='red'>{</font>
<a name='L2323'>            x += 1.0;
<a name='L2324'>            e -= 127;
<a name='L2325'>        <font color='red'>}</font>
<a name='L2326'>        x = ldexp(x, e);
<a name='L2327'>
<a name='L2328'>        <b>if</b> (sign)
<a name='L2329'>            x = -x;
<a name='L2330'>
<a name='L2331'>        <b>return</b> x;
<a name='L2332'>    <font color='red'>}</font>
<a name='L2333'>    <b>else</b> <font color='red'>{</font>
<a name='L2334'>        <b>float</b> x;
<a name='L2335'>
<a name='L2336'>        <b>if</b> ((float_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_little_endian_format</a> &amp;&amp; !le)
<a name='L2337'>            || (float_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_big_endian_format</a> &amp;&amp; le)) <font color='red'>{</font>
<a name='L2338'>            <b>char</b> buf[4];
<a name='L2339'>            <b>char</b> *d = &amp;buf[3];
<a name='L2340'>            <b>int</b> i;
<a name='L2341'>
<a name='L2342'>            <b>for</b> (i = 0; i &lt; 4; i++) <font color='red'>{</font>
<a name='L2343'>                *d-- = *p++;
<a name='L2344'>            <font color='red'>}</font>
<a name='L2345'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;x, buf, 4);
<a name='L2346'>        <font color='red'>}</font>
<a name='L2347'>        <b>else</b> <font color='red'>{</font>
<a name='L2348'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;x, p, 4);
<a name='L2349'>        <font color='red'>}</font>
<a name='L2350'>
<a name='L2351'>        <b>return</b> x;
<a name='L2352'>    <font color='red'>}</font>
<a name='L2353'><font color='red'>}</font>
<a name='L2354'>
<a name='L2355'><b>double</b>
<a name='L2356'><a href='../R/5400.html' title='Multiple refered from 8 places.'>_PyFloat_Unpack8</a>(<b>const</b> <b>unsigned</b> <b>char</b> *p, <b>int</b> le)
<a name='L2357'><font color='red'>{</font>
<a name='L2358'>    <b>if</b> (double_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>unknown_format</a>) <font color='red'>{</font>
<a name='L2359'>        <b>unsigned</b> <b>char</b> sign;
<a name='L2360'>        <b>int</b> e;
<a name='L2361'>        <b>unsigned</b> <b>int</b> fhi, flo;
<a name='L2362'>        <b>double</b> x;
<a name='L2363'>        <b>int</b> incr = 1;
<a name='L2364'>
<a name='L2365'>        <b>if</b> (le) <font color='red'>{</font>
<a name='L2366'>            p += 7;
<a name='L2367'>            incr = -1;
<a name='L2368'>        <font color='red'>}</font>
<a name='L2369'>
<a name='L2370'>        <i><font color='green'>/* First byte */</font></i>
<a name='L2371'>        sign = (*p &gt;&gt; 7) &amp; 1;
<a name='L2372'>        e = (*p &amp; 0x7F) &lt;&lt; 4;
<a name='L2373'>
<a name='L2374'>        p += incr;
<a name='L2375'>
<a name='L2376'>        <i><font color='green'>/* Second byte */</font></i>
<a name='L2377'>        e |= (*p &gt;&gt; 4) &amp; 0xF;
<a name='L2378'>        fhi = (*p &amp; 0xF) &lt;&lt; 24;
<a name='L2379'>        p += incr;
<a name='L2380'>
<a name='L2381'>        <b>if</b> (e == 2047) <font color='red'>{</font>
<a name='L2382'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(
<a name='L2383'>                PyExc_ValueError,
<a name='L2384'>                "can't unpack IEEE 754 special value "
<a name='L2385'>                "on non-IEEE platform");
<a name='L2386'>            <b>return</b> -1.0;
<a name='L2387'>        <font color='red'>}</font>
<a name='L2388'>
<a name='L2389'>        <i><font color='green'>/* Third byte */</font></i>
<a name='L2390'>        fhi |= *p &lt;&lt; 16;
<a name='L2391'>        p += incr;
<a name='L2392'>
<a name='L2393'>        <i><font color='green'>/* Fourth byte */</font></i>
<a name='L2394'>        fhi |= *p  &lt;&lt; 8;
<a name='L2395'>        p += incr;
<a name='L2396'>
<a name='L2397'>        <i><font color='green'>/* Fifth byte */</font></i>
<a name='L2398'>        fhi |= *p;
<a name='L2399'>        p += incr;
<a name='L2400'>
<a name='L2401'>        <i><font color='green'>/* Sixth byte */</font></i>
<a name='L2402'>        flo = *p &lt;&lt; 16;
<a name='L2403'>        p += incr;
<a name='L2404'>
<a name='L2405'>        <i><font color='green'>/* Seventh byte */</font></i>
<a name='L2406'>        flo |= *p &lt;&lt; 8;
<a name='L2407'>        p += incr;
<a name='L2408'>
<a name='L2409'>        <i><font color='green'>/* Eighth byte */</font></i>
<a name='L2410'>        flo |= *p;
<a name='L2411'>
<a name='L2412'>        x = (<b>double</b>)fhi + (<b>double</b>)flo / 16777216.0; <i><font color='green'>/* 2**24 */</font></i>
<a name='L2413'>        x /= 268435456.0; <i><font color='green'>/* 2**28 */</font></i>
<a name='L2414'>
<a name='L2415'>        <b>if</b> (e == 0)
<a name='L2416'>            e = -1022;
<a name='L2417'>        <b>else</b> <font color='red'>{</font>
<a name='L2418'>            x += 1.0;
<a name='L2419'>            e -= 1023;
<a name='L2420'>        <font color='red'>}</font>
<a name='L2421'>        x = ldexp(x, e);
<a name='L2422'>
<a name='L2423'>        <b>if</b> (sign)
<a name='L2424'>            x = -x;
<a name='L2425'>
<a name='L2426'>        <b>return</b> x;
<a name='L2427'>    <font color='red'>}</font>
<a name='L2428'>    <b>else</b> <font color='red'>{</font>
<a name='L2429'>        <b>double</b> x;
<a name='L2430'>
<a name='L2431'>        <b>if</b> ((double_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_little_endian_format</a> &amp;&amp; !le)
<a name='L2432'>            || (double_format == <a href='../S/2791.html#L1612' title='Defined at 1612 in Objects/floatobject.c.'>ieee_big_endian_format</a> &amp;&amp; le)) <font color='red'>{</font>
<a name='L2433'>            <b>char</b> buf[8];
<a name='L2434'>            <b>char</b> *d = &amp;buf[7];
<a name='L2435'>            <b>int</b> i;
<a name='L2436'>
<a name='L2437'>            <b>for</b> (i = 0; i &lt; 8; i++) <font color='red'>{</font>
<a name='L2438'>                *d-- = *p++;
<a name='L2439'>            <font color='red'>}</font>
<a name='L2440'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;x, buf, 8);
<a name='L2441'>        <font color='red'>}</font>
<a name='L2442'>        <b>else</b> <font color='red'>{</font>
<a name='L2443'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;x, p, 8);
<a name='L2444'>        <font color='red'>}</font>
<a name='L2445'>
<a name='L2446'>        <b>return</b> x;
<a name='L2447'>    <font color='red'>}</font>
<a name='L2448'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L54'>[^]</a><a href='#L2356'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
