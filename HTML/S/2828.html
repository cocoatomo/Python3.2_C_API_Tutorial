<html>
<head>
<title>Objects/unicodeobject.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3391.html'>Objects</a>/unicodeobject.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L186'>[^]</a><a href='#L10375'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L186' title='Defined at 186.'>PyUnicode_GetMax</a>
<li><a href='#L226' title='Defined at 226.'>Py_LOCAL_INLINE</a>
<li><a href='#L240' title='Defined at 240.'>Py_LOCAL_INLINE</a>
<li><a href='#L257' title='Defined at 257.'>unicode_resize</a>
<li><a href='#L315' title='Defined at 315.'>_PyUnicode_New</a>
<li><a href='#L387' title='Defined at 387.'>unicode_dealloc</a>
<li><a href='#L432' title='Defined at 432.'>_PyUnicode_Resize</a>
<li><a href='#L467' title='Defined at 467.'>PyUnicode_Resize</a>
<li><a href='#L472' title='Defined at 472.'>PyUnicode_FromUnicode</a>
<li><a href='#L514' title='Defined at 514.'>PyUnicode_FromStringAndSize</a>
<li><a href='#L561' title='Defined at 561.'>PyUnicode_FromString</a>
<li><a href='#L583' title='Defined at 583.'>PyUnicode_FromWideChar</a>
<li><a href='#L634' title='Defined at 634.'>PyUnicode_FromWideChar</a>
<li><a href='#L675' title='Defined at 675.'>makefmt</a>
<li><a href='#L723' title='Defined at 723.'>PyUnicode_FromFormatV</a>
<li><a href='#L1139' title='Defined at 1139.'>PyUnicode_FromFormat</a>
<li><a href='#L1164' title='Defined at 1164.'>unicode_aswidechar</a>
<li><a href='#L1264' title='Defined at 1264.'>PyUnicode_AsWideChar</a>
<li><a href='#L1276' title='Defined at 1276.'>PyUnicode_AsWideCharString</a>
<li><a href='#L1306' title='Defined at 1306.'>PyUnicode_FromOrdinal</a>
<li><a href='#L1329' title='Defined at 1329.'>PyUnicode_FromObject</a>
<li><a href='#L1349' title='Defined at 1349.'>PyUnicode_FromEncodedObject</a>
<li><a href='#L1405' title='Defined at 1405.'>normalize_encoding</a>
<li><a href='#L1434' title='Defined at 1434.'>PyUnicode_Decode</a>
<li><a href='#L1490' title='Defined at 1490.'>PyUnicode_AsDecodedObject</a>
<li><a href='#L1514' title='Defined at 1514.'>PyUnicode_AsDecodedUnicode</a>
<li><a href='#L1545' title='Defined at 1545.'>PyUnicode_Encode</a>
<li><a href='#L1560' title='Defined at 1560.'>PyUnicode_AsEncodedObject</a>
<li><a href='#L1585' title='Defined at 1585.'>PyUnicode_EncodeFSDefault</a>
<li><a href='#L1639' title='Defined at 1639.'>PyUnicode_AsEncodedString</a>
<li><a href='#L1726' title='Defined at 1726.'>PyUnicode_AsEncodedUnicode</a>
<li><a href='#L1757' title='Defined at 1757.'>_PyUnicode_AsDefaultEncodedString</a>
<li><a href='#L1775' title='Defined at 1775.'>PyUnicode_DecodeFSDefault</a>
<li><a href='#L1781' title='Defined at 1781.'>PyUnicode_DecodeFSDefaultAndSize</a>
<li><a href='#L1822' title='Defined at 1822.'>PyUnicode_FSConverter</a>
<li><a href='#L1862' title='Defined at 1862.'>PyUnicode_FSDecoder</a>
<li><a href='#L1903' title='Defined at 1903.'>_PyUnicode_AsStringAndSize</a>
<li><a href='#L1919' title='Defined at 1919.'>_PyUnicode_AsString</a>
<li><a href='#L1924' title='Defined at 1924.'>PyUnicode_AsUnicode</a>
<li><a href='#L1936' title='Defined at 1936.'>PyUnicode_GetSize</a>
<li><a href='#L1948' title='Defined at 1948.'>PyUnicode_GetDefaultEncoding</a>
<li><a href='#L1955' title='Defined at 1955.'>make_decode_exception</a>
<li><a href='#L1988' title='Defined at 1988.'>unicode_decode_call_errorhandler</a>
<li><a href='#L2162' title='Defined at 2162.'>PyUnicode_DecodeUTF7</a>
<li><a href='#L2176' title='Defined at 2176.'>PyUnicode_DecodeUTF7Stateful</a>
<li><a href='#L2366' title='Defined at 2366.'>PyUnicode_EncodeUTF7</a>
<li><a href='#L2491' title='Defined at 2491.'>PyUnicode_DecodeUTF8</a>
<li><a href='#L2511' title='Defined at 2511.'>PyUnicode_DecodeUTF8Stateful</a>
<li><a href='#L2741' title='Defined at 2741.'>_Py_DecodeUTF8_surrogateescape</a>
<li><a href='#L2856' title='Defined at 2856.'>PyUnicode_EncodeUTF8</a>
<li><a href='#L3020' title='Defined at 3020.'>PyUnicode_AsUTF8String</a>
<li><a href='#L3034' title='Defined at 3034.'>PyUnicode_DecodeUTF32</a>
<li><a href='#L3043' title='Defined at 3043.'>PyUnicode_DecodeUTF32Stateful</a>
<li><a href='#L3208' title='Defined at 3208.'>PyUnicode_EncodeUTF32</a>
<li><a href='#L3294' title='Defined at 3294.'>PyUnicode_AsUTF32String</a>
<li><a href='#L3309' title='Defined at 3309.'>PyUnicode_DecodeUTF16</a>
<li><a href='#L3335' title='Defined at 3335.'>PyUnicode_DecodeUTF16Stateful</a>
<li><a href='#L3604' title='Defined at 3604.'>PyUnicode_EncodeUTF16</a>
<li><a href='#L3684' title='Defined at 3684.'>PyUnicode_AsUTF16String</a>
<li><a href='#L3700' title='Defined at 3700.'>PyUnicode_DecodeUnicodeEscape</a>
<li><a href='#L3941' title='Defined at 3941.'>Py_LOCAL_INLINE</a>
<li><a href='#L3958' title='Defined at 3958.'>PyUnicode_EncodeUnicodeEscape</a>
<li><a href='#L4099' title='Defined at 4099.'>PyUnicode_AsUnicodeEscapeString</a>
<li><a href='#L4113' title='Defined at 4113.'>PyUnicode_DecodeRawUnicodeEscape</a>
<li><a href='#L4230' title='Defined at 4230.'>PyUnicode_EncodeRawUnicodeEscape</a>
<li><a href='#L4318' title='Defined at 4318.'>PyUnicode_AsRawUnicodeEscapeString</a>
<li><a href='#L4333' title='Defined at 4333.'>_PyUnicode_DecodeUnicodeInternal</a>
<li><a href='#L4411' title='Defined at 4411.'>PyUnicode_DecodeLatin1</a>
<li><a href='#L4453' title='Defined at 4453.'>make_encode_exception</a>
<li><a href='#L4478' title='Defined at 4478.'>raise_encode_exception</a>
<li><a href='#L4494' title='Defined at 4494.'>unicode_encode_call_errorhandler</a>
<li><a href='#L4548' title='Defined at 4548.'>unicode_encode_ucs1</a>
<li><a href='#L4744' title='Defined at 4744.'>PyUnicode_EncodeLatin1</a>
<li><a href='#L4751' title='Defined at 4751.'>PyUnicode_AsLatin1String</a>
<li><a href='#L4764' title='Defined at 4764.'>PyUnicode_DecodeASCII</a>
<li><a href='#L4823' title='Defined at 4823.'>PyUnicode_EncodeASCII</a>
<li><a href='#L4830' title='Defined at 4830.'>PyUnicode_AsASCIIString</a>
<li><a href='#L4854' title='Defined at 4854.'>is_dbcs_lead_byte</a>
<li><a href='#L4869' title='Defined at 4869.'>decode_mbcs</a>
<li><a href='#L4952' title='Defined at 4952.'>PyUnicode_DecodeMBCSStateful</a>
<li><a href='#L4990' title='Defined at 4990.'>PyUnicode_DecodeMBCS</a>
<li><a href='#L5001' title='Defined at 5001.'>encode_mbcs</a>
<li><a href='#L5077' title='Defined at 5077.'>PyUnicode_EncodeMBCS</a>
<li><a href='#L5108' title='Defined at 5108.'>PyUnicode_AsMBCSString</a>
<li><a href='#L5125' title='Defined at 5125.'>PyUnicode_DecodeCharmap</a>
<li><a href='#L5296' title='Defined at 5296.'>encoding_map_size</a>
<li><a href='#L5310' title='Defined at 5310.'>encoding_map_dealloc</a>
<li><a href='#L5360' title='Defined at 5360.'>PyUnicode_BuildEncodingMap</a>
<li><a href='#L5467' title='Defined at 5467.'>encoding_map_lookup</a>
<li><a href='#L5503' title='Defined at 5503.'>charmapencode_lookup</a>
<li><a href='#L5547' title='Defined at 5547.'>charmapencode_resize</a>
<li><a href='#L5568' title='Defined at 5568.'>charmapencode_output</a>
<li><a href='#L5626' title='Defined at 5626.'>charmap_encoding_error</a>
<li><a href='#L5760' title='Defined at 5760.'>PyUnicode_EncodeCharmap</a>
<li><a href='#L5824' title='Defined at 5824.'>PyUnicode_AsCharmapString</a>
<li><a href='#L5838' title='Defined at 5838.'>make_translate_exception</a>
<li><a href='#L5862' title='Defined at 5862.'>raise_translate_exception</a>
<li><a href='#L5877' title='Defined at 5877.'>unicode_translate_call_errorhandler</a>
<li><a href='#L5933' title='Defined at 5933.'>charmaptranslate_lookup</a>
<li><a href='#L5983' title='Defined at 5983.'>charmaptranslate_makespace</a>
<li><a href='#L6006' title='Defined at 6006.'>charmaptranslate_output</a>
<li><a href='#L6044' title='Defined at 6044.'>PyUnicode_TranslateCharmap</a>
<li><a href='#L6186' title='Defined at 6186.'>PyUnicode_Translate</a>
<li><a href='#L6208' title='Defined at 6208.'>PyUnicode_TransformDecimalToASCII</a>
<li><a href='#L6233' title='Defined at 6233.'>PyUnicode_EncodeDecimal</a>
<li><a href='#L6397' title='Defined at 6397.'>PyUnicode_Count</a>
<li><a href='#L6427' title='Defined at 6427.'>PyUnicode_Find</a>
<li><a href='#L6464' title='Defined at 6464.'>tailmatch</a>
<li><a href='#L6489' title='Defined at 6489.'>PyUnicode_Tailmatch</a>
<li><a href='#L6518' title='Defined at 6518.'>fixup</a>
<li><a href='#L6542' title='Defined at 6542.'>fixupper</a>
<li><a href='#L6563' title='Defined at 6563.'>fixlower</a>
<li><a href='#L6584' title='Defined at 6584.'>fixswapcase</a>
<li><a href='#L6605' title='Defined at 6605.'>fixcapitalize</a>
<li><a href='#L6629' title='Defined at 6629.'>fixtitle</a>
<li><a href='#L6667' title='Defined at 6667.'>PyUnicode_Join</a>
<li><a href='#L6780' title='Defined at 6780.'>pad</a>
<li><a href='#L6814' title='Defined at 6814.'>PyUnicode_Splitlines</a>
<li><a href='#L6831' title='Defined at 6831.'>split</a>
<li><a href='#L6851' title='Defined at 6851.'>rsplit</a>
<li><a href='#L6871' title='Defined at 6871.'>replace</a>
<li><a href='#L7020' title='Defined at 7020.'>unicode_title</a>
<li><a href='#L7032' title='Defined at 7032.'>unicode_capitalize</a>
<li><a href='#L7045' title='Defined at 7045.'>unicode_capwords</a>
<li><a href='#L7078' title='Defined at 7078.'>convert_uc</a>
<li><a href='#L7109' title='Defined at 7109.'>unicode_center</a>
<li><a href='#L7148' title='Defined at 7148.'>unicode_compare</a>
<li><a href='#L7182' title='Defined at 7182.'>unicode_compare</a>
<li><a href='#L7209' title='Defined at 7209.'>PyUnicode_Compare</a>
<li><a href='#L7223' title='Defined at 7223.'>PyUnicode_CompareWithASCIIString</a>
<li><a href='#L7246' title='Defined at 7246.'>PyUnicode_RichCompare</a>
<li><a href='#L7303' title='Defined at 7303.'>PyUnicode_Contains</a>
<li><a href='#L7334' title='Defined at 7334.'>PyUnicode_Concat</a>
<li><a href='#L7375' title='Defined at 7375.'>PyUnicode_Append</a>
<li><a href='#L7391' title='Defined at 7391.'>PyUnicode_AppendAndDel</a>
<li><a href='#L7405' title='Defined at 7405.'>unicode_count</a>
<li><a href='#L7444' title='Defined at 7444.'>unicode_encode</a>
<li><a href='#L7463' title='Defined at 7463.'>unicode_expandtabs</a>
<li><a href='#L7553' title='Defined at 7553.'>unicode_find</a>
<li><a href='#L7575' title='Defined at 7575.'>unicode_getitem</a>
<li><a href='#L7588' title='Defined at 7588.'>unicode_hash</a>
<li><a href='#L7614' title='Defined at 7614.'>unicode_index</a>
<li><a href='#L7647' title='Defined at 7647.'>unicode_islower</a>
<li><a href='#L7681' title='Defined at 7681.'>unicode_isupper</a>
<li><a href='#L7717' title='Defined at 7717.'>unicode_istitle</a>
<li><a href='#L7763' title='Defined at 7763.'>unicode_isspace</a>
<li><a href='#L7792' title='Defined at 7792.'>unicode_isalpha</a>
<li><a href='#L7821' title='Defined at 7821.'>unicode_isalnum</a>
<li><a href='#L7850' title='Defined at 7850.'>unicode_isdecimal</a>
<li><a href='#L7879' title='Defined at 7879.'>unicode_isdigit</a>
<li><a href='#L7908' title='Defined at 7908.'>unicode_isnumeric</a>
<li><a href='#L7931' title='Defined at 7931.'>PyUnicode_IsIdentifier</a>
<li><a href='#L7966' title='Defined at 7966.'>unicode_isidentifier</a>
<li><a href='#L7978' title='Defined at 7978.'>unicode_isprintable</a>
<li><a href='#L8004' title='Defined at 8004.'>unicode_join</a>
<li><a href='#L8010' title='Defined at 8010.'>unicode_length</a>
<li><a href='#L8022' title='Defined at 8022.'>unicode_ljust</a>
<li><a href='#L8044' title='Defined at 8044.'>unicode_lower</a>
<li><a href='#L8060' title='Defined at 8060.'>_PyUnicode_XStrip</a>
<li><a href='#L8095' title='Defined at 8095.'>do_strip</a>
<li><a href='#L8125' title='Defined at 8125.'>do_argstrip</a>
<li><a href='#L8155' title='Defined at 8155.'>unicode_strip</a>
<li><a href='#L8171' title='Defined at 8171.'>unicode_lstrip</a>
<li><a href='#L8187' title='Defined at 8187.'>unicode_rstrip</a>
<li><a href='#L8197' title='Defined at 8197.'>unicode_repeat</a>
<li><a href='#L8251' title='Defined at 8251.'>PyUnicode_Replace</a>
<li><a href='#L8293' title='Defined at 8293.'>unicode_replace</a>
<li><a href='#L8319' title='Defined at 8319.'>unicode_repr</a>
<li><a href='#L8477' title='Defined at 8477.'>unicode_rfind</a>
<li><a href='#L8504' title='Defined at 8504.'>unicode_rindex</a>
<li><a href='#L8536' title='Defined at 8536.'>unicode_rjust</a>
<li><a href='#L8552' title='Defined at 8552.'>PyUnicode_Split</a>
<li><a href='#L8586' title='Defined at 8586.'>unicode_split</a>
<li><a href='#L8603' title='Defined at 8603.'>PyUnicode_Partition</a>
<li><a href='#L8631' title='Defined at 8631.'>PyUnicode_RPartition</a>
<li><a href='#L8665' title='Defined at 8665.'>unicode_partition</a>
<li><a href='#L8678' title='Defined at 8678.'>unicode_rpartition</a>
<li><a href='#L8683' title='Defined at 8683.'>PyUnicode_RSplit</a>
<li><a href='#L8717' title='Defined at 8717.'>unicode_rsplit</a>
<li><a href='#L8741' title='Defined at 8741.'>unicode_splitlines</a>
<li><a href='#L8752' title='Defined at 8752.'>unicode_str</a>
<li><a href='#L8770' title='Defined at 8770.'>unicode_swapcase</a>
<li><a href='#L8788' title='Defined at 8788.'>unicode_maketrans</a>
<li><a href='#L8888' title='Defined at 8888.'>unicode_translate</a>
<li><a href='#L8899' title='Defined at 8899.'>unicode_upper</a>
<li><a href='#L8911' title='Defined at 8911.'>unicode_zfill</a>
<li><a href='#L8950' title='Defined at 8950.'>unicode_freelistsize</a>
<li><a href='#L8956' title='Defined at 8956.'>unicode__decimal2ascii</a>
<li><a href='#L8972' title='Defined at 8972.'>unicode_startswith</a>
<li><a href='#L9018' title='Defined at 9018.'>unicode_endswith</a>
<li><a href='#L9069' title='Defined at 9069.'>unicode__format__</a>
<li><a href='#L9087' title='Defined at 9087.'>unicode__sizeof__</a>
<li><a href='#L9097' title='Defined at 9097.'>unicode_getnewargs</a>
<li><a href='#L9168' title='Defined at 9168.'>unicode_mod</a>
<li><a href='#L9196' title='Defined at 9196.'>unicode_subscript</a>
<li><a href='#L9256' title='Defined at 9256.'>getnextarg</a>
<li><a href='#L9274' title='Defined at 9274.'>formatfloat</a>
<li><a href='#L9297' title='Defined at 9297.'>formatlong</a>
<li><a href='#L9313' title='Defined at 9313.'>formatchar</a>
<li><a href='#L9377' title='Defined at 9377.'>PyUnicode_Format</a>
<li><a href='#L9821' title='Defined at 9821.'>unicode_new</a>
<li><a href='#L9842' title='Defined at 9842.'>unicode_subtype_new</a>
<li><a href='#L9926' title='Defined at 9926.'>_PyUnicode_Init</a>
<li><a href='#L9965' title='Defined at 9965.'>PyUnicode_ClearFreeList</a>
<li><a href='#L9985' title='Defined at 9985.'>_PyUnicode_Fini</a>
<li><a href='#L10002' title='Defined at 10002.'>PyUnicode_InternInPlace</a>
<li><a href='#L10050' title='Defined at 10050.'>PyUnicode_InternImmortal</a>
<li><a href='#L10060' title='Defined at 10060.'>PyUnicode_InternFromString</a>
<li><a href='#L10069' title='Defined at 10069.'>_Py_ReleaseInternedUnicodeStrings</a>
<li><a href='#L10130' title='Defined at 10130.'>unicodeiter_dealloc</a>
<li><a href='#L10138' title='Defined at 10138.'>unicodeiter_traverse</a>
<li><a href='#L10145' title='Defined at 10145.'>unicodeiter_next</a>
<li><a href='#L10170' title='Defined at 10170.'>unicodeiter_len</a>
<li><a href='#L10220' title='Defined at 10220.'>unicode_iter</a>
<li><a href='#L10239' title='Defined at 10239.'>Py_UNICODE_strlen</a>
<li><a href='#L10248' title='Defined at 10248.'>Py_UNICODE_strcpy</a>
<li><a href='#L10256' title='Defined at 10256.'>Py_UNICODE_strncpy</a>
<li><a href='#L10266' title='Defined at 10266.'>Py_UNICODE_strcat</a>
<li><a href='#L10275' title='Defined at 10275.'>Py_UNICODE_strcmp</a>
<li><a href='#L10289' title='Defined at 10289.'>Py_UNICODE_strncmp</a>
<li><a href='#L10306' title='Defined at 10306.'>Py_UNICODE_strchr</a>
<li><a href='#L10316' title='Defined at 10316.'>Py_UNICODE_strrchr</a>
<li><a href='#L10329' title='Defined at 10329.'>PyUnicode_AsUnicodeCopy</a>
<li><a href='#L10375' title='Defined at 10375.'>PyInit__string</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*</font></i>
<a name='L2'><i><font color='green'></font></i>
<a name='L3'><i><font color='green'>Unicode implementation based on original code by Fredrik Lundh,</font></i>
<a name='L4'><i><font color='green'>modified by Marc-Andre Lemburg &lt;mal@lemburg.com&gt; according to the</font></i>
<a name='L5'><i><font color='green'>Unicode Integration Proposal (see file Misc/unicode.txt).</font></i>
<a name='L6'><i><font color='green'></font></i>
<a name='L7'><i><font color='green'>Major speed upgrades to the method implementations at the Reykjavik</font></i>
<a name='L8'><i><font color='green'>NeedForSpeed sprint, by Fredrik Lundh and Andrew Dalke.</font></i>
<a name='L9'><i><font color='green'></font></i>
<a name='L10'><i><font color='green'>Copyright (c) Corporation for National Research Initiatives.</font></i>
<a name='L11'><i><font color='green'></font></i>
<a name='L12'><i><font color='green'>--------------------------------------------------------------------</font></i>
<a name='L13'><i><font color='green'>The original string type implementation is:</font></i>
<a name='L14'><i><font color='green'></font></i>
<a name='L15'><i><font color='green'>  Copyright (c) 1999 by Secret Labs AB</font></i>
<a name='L16'><i><font color='green'>  Copyright (c) 1999 by Fredrik Lundh</font></i>
<a name='L17'><i><font color='green'></font></i>
<a name='L18'><i><font color='green'>By obtaining, using, and/or copying this software and/or its</font></i>
<a name='L19'><i><font color='green'>associated documentation, you agree that you have read, understood,</font></i>
<a name='L20'><i><font color='green'>and will comply with the following terms and conditions:</font></i>
<a name='L21'><i><font color='green'></font></i>
<a name='L22'><i><font color='green'>Permission to use, copy, modify, and distribute this software and its</font></i>
<a name='L23'><i><font color='green'>associated documentation for any purpose and without fee is hereby</font></i>
<a name='L24'><i><font color='green'>granted, provided that the above copyright notice appears in all</font></i>
<a name='L25'><i><font color='green'>copies, and that both that copyright notice and this permission notice</font></i>
<a name='L26'><i><font color='green'>appear in supporting documentation, and that the name of Secret Labs</font></i>
<a name='L27'><i><font color='green'>AB or the author not be used in advertising or publicity pertaining to</font></i>
<a name='L28'><i><font color='green'>distribution of the software without specific, written prior</font></i>
<a name='L29'><i><font color='green'>permission.</font></i>
<a name='L30'><i><font color='green'></font></i>
<a name='L31'><i><font color='green'>SECRET LABS AB AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO</font></i>
<a name='L32'><i><font color='green'>THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND</font></i>
<a name='L33'><i><font color='green'>FITNESS.  IN NO EVENT SHALL SECRET LABS AB OR THE AUTHOR BE LIABLE FOR</font></i>
<a name='L34'><i><font color='green'>ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</font></i>
<a name='L35'><i><font color='green'>WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</font></i>
<a name='L36'><i><font color='green'>ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT</font></i>
<a name='L37'><i><font color='green'>OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</font></i>
<a name='L38'><i><font color='green'>--------------------------------------------------------------------</font></i>
<a name='L39'><i><font color='green'></font></i>
<a name='L40'><i><font color='green'>*/</font></i>
<a name='L41'>
<a name='L42'><font color='darkred'>#define</font> <a href='../R/2388.html' title='Multiple refered from 2 places.'>PY_SSIZE_T_CLEAN</a>
<a name='L43'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L44'><font color='darkred'>#include</font> "<a href='586.html'>ucnhash.h</a>"
<a name='L45'>
<a name='L46'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L47'><font color='darkred'>#include</font> &lt;windows.h&gt;
<a name='L48'><font color='darkred'>#endif</font>
<a name='L49'>
<a name='L50'><i><font color='green'>/* Limit for the Unicode object free list */</font></i>
<a name='L51'>
<a name='L52'><font color='darkred'>#define</font> <a href='../S/2828.html#L409' title='Refered from 409 in Objects/unicodeobject.c.'>PyUnicode_MAXFREELIST</a>       1024
<a name='L53'>
<a name='L54'><i><font color='green'>/* Limit for the Unicode object free list stay alive optimization.</font></i>
<a name='L55'><i><font color='green'></font></i>
<a name='L56'><i><font color='green'>   The implementation will keep allocated Unicode memory intact for</font></i>
<a name='L57'><i><font color='green'>   all objects on the free list having a size less than this</font></i>
<a name='L58'><i><font color='green'>   limit. This reduces malloc() overhead for small Unicode objects.</font></i>
<a name='L59'><i><font color='green'></font></i>
<a name='L60'><i><font color='green'>   At worst this will result in PyUnicode_MAXFREELIST *</font></i>
<a name='L61'><i><font color='green'>   (sizeof(PyUnicodeObject) + KEEPALIVE_SIZE_LIMIT +</font></i>
<a name='L62'><i><font color='green'>   malloc()-overhead) bytes of unused garbage.</font></i>
<a name='L63'><i><font color='green'></font></i>
<a name='L64'><i><font color='green'>   Setting the limit to 0 effectively turns the feature off.</font></i>
<a name='L65'><i><font color='green'></font></i>
<a name='L66'><i><font color='green'>   Note: This is an experimental feature ! If you get core dumps when</font></i>
<a name='L67'><i><font color='green'>   using Unicode objects, turn this feature off.</font></i>
<a name='L68'><i><font color='green'></font></i>
<a name='L69'><i><font color='green'>*/</font></i>
<a name='L70'>
<a name='L71'><font color='darkred'>#define</font> <a href='../S/2828.html#L411' title='Refered from 411 in Objects/unicodeobject.c.'>KEEPALIVE_SIZE_LIMIT</a>       9
<a name='L72'>
<a name='L73'><i><font color='green'>/* Endianness switches; defaults to little endian */</font></i>
<a name='L74'>
<a name='L75'><font color='darkred'>#ifdef</font> <a href='../D/5540.html' title='Multiple defined in 8 places.'>WORDS_BIGENDIAN</a>
<a name='L76'><font color='darkred'># define</font> BYTEORDER_IS_BIG_ENDIAN
<a name='L77'><font color='darkred'>#else</font>
<a name='L78'><font color='darkred'># define</font> <a href='../R/342.html' title='Multiple refered from 8 places.'>BYTEORDER_IS_LITTLE_ENDIAN</a>
<a name='L79'><font color='darkred'>#endif</font>
<a name='L80'>
<a name='L81'><i><font color='green'>/* --- Globals ------------------------------------------------------------</font></i>
<a name='L82'><i><font color='green'></font></i>
<a name='L83'><i><font color='green'>   The globals are initialized by the _PyUnicode_Init() API and should</font></i>
<a name='L84'><i><font color='green'>   not be used before calling that API.</font></i>
<a name='L85'><i><font color='green'></font></i>
<a name='L86'><i><font color='green'>*/</font></i>
<a name='L87'>
<a name='L88'>
<a name='L89'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L90'><b>extern</b> "C" <font color='red'>{</font>
<a name='L91'><font color='darkred'>#endif</font>
<a name='L92'>
<a name='L93'><i><font color='green'>/* This dictionary holds all interned unicode strings.  Note that references</font></i>
<a name='L94'><i><font color='green'>   to strings in this dictionary are *not* counted in the string's ob_refcnt.</font></i>
<a name='L95'><i><font color='green'>   When the interned string reaches a refcnt of 0 the string deallocation</font></i>
<a name='L96'><i><font color='green'>   function will delete the reference from this dictionary.</font></i>
<a name='L97'><i><font color='green'></font></i>
<a name='L98'><i><font color='green'>   Another way to look at this is that to say that the actual reference</font></i>
<a name='L99'><i><font color='green'>   count of a string is:  s-&gt;ob_refcnt + (s-&gt;state ? 2 : 0)</font></i>
<a name='L100'><i><font color='green'>*/</font></i>
<a name='L101'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *interned;
<a name='L102'>
<a name='L103'><i><font color='green'>/* Free list for Unicode objects */</font></i>
<a name='L104'><b>static</b> <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *free_list;
<a name='L105'><b>static</b> <b>int</b> numfree;
<a name='L106'>
<a name='L107'><i><font color='green'>/* The empty Unicode object is shared to improve performance. */</font></i>
<a name='L108'><b>static</b> <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode_empty;
<a name='L109'>
<a name='L110'><i><font color='green'>/* Single character Unicode strings in the Latin-1 range are being</font></i>
<a name='L111'><i><font color='green'>   shared as well. */</font></i>
<a name='L112'><b>static</b> <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode_latin1[256];
<a name='L113'>
<a name='L114'><i><font color='green'>/* Fast detection of the most frequent whitespace characters */</font></i>
<a name='L115'><b>const</b> <b>unsigned</b> <b>char</b> _Py_ascii_whitespace[] = <font color='red'>{</font>
<a name='L116'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L117'><i><font color='green'>/*     case 0x0009: * CHARACTER TABULATION */</font></i>
<a name='L118'><i><font color='green'>/*     case 0x000A: * LINE FEED */</font></i>
<a name='L119'><i><font color='green'>/*     case 0x000B: * LINE TABULATION */</font></i>
<a name='L120'><i><font color='green'>/*     case 0x000C: * FORM FEED */</font></i>
<a name='L121'><i><font color='green'>/*     case 0x000D: * CARRIAGE RETURN */</font></i>
<a name='L122'>    0, 1, 1, 1, 1, 1, 0, 0,
<a name='L123'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L124'><i><font color='green'>/*     case 0x001C: * FILE SEPARATOR */</font></i>
<a name='L125'><i><font color='green'>/*     case 0x001D: * GROUP SEPARATOR */</font></i>
<a name='L126'><i><font color='green'>/*     case 0x001E: * RECORD SEPARATOR */</font></i>
<a name='L127'><i><font color='green'>/*     case 0x001F: * UNIT SEPARATOR */</font></i>
<a name='L128'>    0, 0, 0, 0, 1, 1, 1, 1,
<a name='L129'><i><font color='green'>/*     case 0x0020: * SPACE */</font></i>
<a name='L130'>    1, 0, 0, 0, 0, 0, 0, 0,
<a name='L131'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L132'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L133'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L134'>
<a name='L135'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L136'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L137'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L138'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L139'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L140'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L141'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L142'>    0, 0, 0, 0, 0, 0, 0, 0
<a name='L143'><font color='red'>}</font>;
<a name='L144'>
<a name='L145'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2828.html#L4494' title='Defined at 4494 in Objects/unicodeobject.c.'>unicode_encode_call_errorhandler</a>(<b>const</b> <b>char</b> *errors,
<a name='L146'>       PyObject **errorHandler,<b>const</b> <b>char</b> *encoding, <b>const</b> <b>char</b> *reason,
<a name='L147'>       <b>const</b> Py_UNICODE *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, PyObject **exceptionObject,
<a name='L148'>       <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *newpos);
<a name='L149'>
<a name='L150'><b>static</b> <b>void</b> <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(PyObject **exceptionObject,
<a name='L151'>                                   <b>const</b> <b>char</b> *encoding,
<a name='L152'>                                   <b>const</b> Py_UNICODE *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L153'>                                   <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos,
<a name='L154'>                                   <b>const</b> <b>char</b> *reason);
<a name='L155'>
<a name='L156'><i><font color='green'>/* Same for linebreaks */</font></i>
<a name='L157'><b>static</b> <b>unsigned</b> <b>char</b> ascii_linebreak[] = <font color='red'>{</font>
<a name='L158'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L159'><i><font color='green'>/*         0x000A, * LINE FEED */</font></i>
<a name='L160'><i><font color='green'>/*         0x000B, * LINE TABULATION */</font></i>
<a name='L161'><i><font color='green'>/*         0x000C, * FORM FEED */</font></i>
<a name='L162'><i><font color='green'>/*         0x000D, * CARRIAGE RETURN */</font></i>
<a name='L163'>    0, 0, 1, 1, 1, 1, 0, 0,
<a name='L164'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L165'><i><font color='green'>/*         0x001C, * FILE SEPARATOR */</font></i>
<a name='L166'><i><font color='green'>/*         0x001D, * GROUP SEPARATOR */</font></i>
<a name='L167'><i><font color='green'>/*         0x001E, * RECORD SEPARATOR */</font></i>
<a name='L168'>    0, 0, 0, 0, 1, 1, 1, 0,
<a name='L169'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L170'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L171'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L172'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L173'>
<a name='L174'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L175'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L176'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L177'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L178'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L179'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L180'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L181'>    0, 0, 0, 0, 0, 0, 0, 0
<a name='L182'><font color='red'>}</font>;
<a name='L183'>
<a name='L184'>
<a name='L185'><a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>
<a name='L186'><a href='../R/3595.html' title='Multiple refered from 4 places.'>PyUnicode_GetMax</a>(<b>void</b>)
<a name='L187'><font color='red'>{</font>
<a name='L188'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L189'>    <b>return</b> 0x10FFFF;
<a name='L190'><font color='darkred'>#else</font>
<a name='L191'>    <i><font color='green'>/* This is actually an illegal character, so it should</font></i>
<a name='L192'><i><font color='green'>       not be passed to unichr. */</font></i>
<a name='L193'>    <b>return</b> 0xFFFF;
<a name='L194'><font color='darkred'>#endif</font>
<a name='L195'><font color='red'>}</font>
<a name='L196'>
<a name='L197'><i><font color='green'>/* --- Bloom Filters ----------------------------------------------------- */</font></i>
<a name='L198'>
<a name='L199'><i><font color='green'>/* stuff to implement simple "bloom filters" for Unicode characters.</font></i>
<a name='L200'><i><font color='green'>   to keep things simple, we use a single bitmask, using the least 5</font></i>
<a name='L201'><i><font color='green'>   bits from each unicode characters as the bit index. */</font></i>
<a name='L202'>
<a name='L203'><i><font color='green'>/* the linebreak mask is set up by Unicode_Init below */</font></i>
<a name='L204'>
<a name='L205'><font color='darkred'>#if</font> <a href='../D/1963.html' title='Multiple defined in 3 places.'>LONG_BIT</a> &gt;= 128
<a name='L206'><font color='darkred'>#define</font> <a href='../R/277.html' title='Multiple refered from 2 places.'>BLOOM_WIDTH</a> 128
<a name='L207'><font color='darkred'>#elif</font> <a href='../D/1963.html' title='Multiple defined in 3 places.'>LONG_BIT</a> &gt;= 64
<a name='L208'><font color='darkred'>#define</font> <a href='../R/277.html' title='Multiple refered from 2 places.'>BLOOM_WIDTH</a> 64
<a name='L209'><font color='darkred'>#elif</font> <a href='../D/1963.html' title='Multiple defined in 3 places.'>LONG_BIT</a> &gt;= 32
<a name='L210'><font color='darkred'>#define</font> <a href='../R/277.html' title='Multiple refered from 2 places.'>BLOOM_WIDTH</a> 32
<a name='L211'><font color='darkred'>#else</font>
<a name='L212'><font color='darkred'>#error</font> "LONG_BIT is smaller than 32"
<a name='L213'><font color='darkred'>#endif</font>
<a name='L214'>
<a name='L215'><font color='darkred'>#define</font> <a href='../R/275.html' title='Multiple refered from 4 places.'>BLOOM_MASK</a> <b>unsigned</b> <b>long</b>
<a name='L216'>
<a name='L217'><b>static</b> <a href='../S/2828.html#L215' title='Defined at 215 in Objects/unicodeobject.c.'>BLOOM_MASK</a> bloom_linebreak;
<a name='L218'>
<a name='L219'><font color='darkred'>#define</font> <a href='../S/2828.html#L235' title='Refered from 235 in Objects/unicodeobject.c.'>BLOOM_ADD</a>(mask, ch) ((mask |= (1UL &lt;&lt; ((ch) &amp; (<a href='../D/301.html' title='Multiple defined in 3 places.'>BLOOM_WIDTH</a> - 1)))))
<a name='L220'><font color='darkred'>#define</font> <a href='../R/272.html' title='Multiple refered from 2 places.'>BLOOM</a>(mask, ch)     ((mask &amp;  (1UL &lt;&lt; ((ch) &amp; (<a href='../D/301.html' title='Multiple defined in 3 places.'>BLOOM_WIDTH</a> - 1)))))
<a name='L221'>
<a name='L222'><font color='darkred'>#define</font> <a href='../S/2821.html#L15' title='Refered from 15 in Objects/stringlib/unicodedefs.h.'>BLOOM_LINEBREAK</a>(ch)                                             \
<a name='L223'>    ((ch) &lt; 128U ? ascii_linebreak[(ch)] :                              \
<a name='L224'>     (<a href='../S/2828.html#L220' title='Defined at 220 in Objects/unicodeobject.c.'>BLOOM</a>(bloom_linebreak, (ch)) &amp;&amp; <a href='../S/587.html#L330' title='Defined at 330 in Include/unicodeobject.h.'>Py_UNICODE_ISLINEBREAK</a>(ch)))
<a name='L225'>
<a name='L226'>Py_LOCAL_INLINE(<a href='../S/2828.html#L215' title='Defined at 215 in Objects/unicodeobject.c.'>BLOOM_MASK</a>) make_bloom_mask(Py_UNICODE* ptr, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len)
<a name='L227'><font color='red'>{</font>
<a name='L228'>    <i><font color='green'>/* calculate simple bloom-style bitmask for a given unicode string */</font></i>
<a name='L229'>
<a name='L230'>    <a href='../S/2828.html#L215' title='Defined at 215 in Objects/unicodeobject.c.'>BLOOM_MASK</a> mask;
<a name='L231'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L232'>
<a name='L233'>    mask = 0;
<a name='L234'>    <b>for</b> (i = 0; i &lt; len; i++)
<a name='L235'>        <a href='../S/2828.html#L219' title='Defined at 219 in Objects/unicodeobject.c.'>BLOOM_ADD</a>(mask, ptr[i]);
<a name='L236'>
<a name='L237'>    <b>return</b> mask;
<a name='L238'><font color='red'>}</font>
<a name='L239'>
<a name='L240'>Py_LOCAL_INLINE(<b>int</b>) unicode_member(Py_UNICODE chr, Py_UNICODE* set, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> setlen)
<a name='L241'><font color='red'>{</font>
<a name='L242'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L243'>
<a name='L244'>    <b>for</b> (i = 0; i &lt; setlen; i++)
<a name='L245'>        <b>if</b> (set[i] == chr)
<a name='L246'>            <b>return</b> 1;
<a name='L247'>
<a name='L248'>    <b>return</b> 0;
<a name='L249'><font color='red'>}</font>
<a name='L250'>
<a name='L251'><font color='darkred'>#define</font> <a href='../R/276.html' title='Multiple refered from 2 places.'>BLOOM_MEMBER</a>(mask, chr, set, setlen)                    \
<a name='L252'>    <a href='../S/2828.html#L220' title='Defined at 220 in Objects/unicodeobject.c.'>BLOOM</a>(mask, chr) &amp;&amp; unicode_member(chr, set, setlen)
<a name='L253'>
<a name='L254'><i><font color='green'>/* --- Unicode Object ----------------------------------------------------- */</font></i>
<a name='L255'>
<a name='L256'><b>static</b>
<a name='L257'><b>int</b> <a href='../R/11114.html' title='Multiple refered from 2 places.'>unicode_resize</a>(<b>register</b> PyUnicodeObject *unicode,
<a name='L258'>                   <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length)
<a name='L259'><font color='red'>{</font>
<a name='L260'>    <b>void</b> *oldstr;
<a name='L261'>
<a name='L262'>    <i><font color='green'>/* Shortcut if there's nothing much to do. */</font></i>
<a name='L263'>    <b>if</b> (unicode-&gt;length == length)
<a name='L264'>        <b>goto</b> reset;
<a name='L265'>
<a name='L266'>    <i><font color='green'>/* Resizing shared object (unicode_empty or single character</font></i>
<a name='L267'><i><font color='green'>       objects) in-place is not allowed. Use PyUnicode_Resize()</font></i>
<a name='L268'><i><font color='green'>       instead ! */</font></i>
<a name='L269'>
<a name='L270'>    <b>if</b> (unicode == unicode_empty ||
<a name='L271'>        (unicode-&gt;length == 1 &amp;&amp;
<a name='L272'>         unicode-&gt;str[0] &lt; 256U &amp;&amp;
<a name='L273'>         unicode_latin1[unicode-&gt;str[0]] == unicode)) <font color='red'>{</font>
<a name='L274'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L275'>                        "can't resize shared str objects");
<a name='L276'>        <b>return</b> -1;
<a name='L277'>    <font color='red'>}</font>
<a name='L278'>
<a name='L279'>    <i><font color='green'>/* We allocate one more byte to make sure the string is Ux0000 terminated.</font></i>
<a name='L280'><i><font color='green'>       The overallocation is also used by fastsearch, which assumes that it's</font></i>
<a name='L281'><i><font color='green'>       safe to look at str[length] (without making any assumptions about what</font></i>
<a name='L282'><i><font color='green'>       it contains). */</font></i>
<a name='L283'>
<a name='L284'>    oldstr = unicode-&gt;str;
<a name='L285'>    unicode-&gt;str = PyObject_REALLOC(unicode-&gt;str,
<a name='L286'>                                    <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) * (length + 1));
<a name='L287'>    <b>if</b> (!unicode-&gt;str) <font color='red'>{</font>
<a name='L288'>        unicode-&gt;str = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *)oldstr;
<a name='L289'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L290'>        <b>return</b> -1;
<a name='L291'>    <font color='red'>}</font>
<a name='L292'>    unicode-&gt;str[length] = 0;
<a name='L293'>    unicode-&gt;length = length;
<a name='L294'>
<a name='L295'>  reset:
<a name='L296'>    <i><font color='green'>/* Reset the object caches */</font></i>
<a name='L297'>    <b>if</b> (unicode-&gt;defenc) <font color='red'>{</font>
<a name='L298'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(unicode-&gt;defenc);
<a name='L299'>    <font color='red'>}</font>
<a name='L300'>    unicode-&gt;<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> = -1;
<a name='L301'>
<a name='L302'>    <b>return</b> 0;
<a name='L303'><font color='red'>}</font>
<a name='L304'>
<a name='L305'><i><font color='green'>/* We allocate one more byte to make sure the string is</font></i>
<a name='L306'><i><font color='green'>   Ux0000 terminated; some code (e.g. new_identifier)</font></i>
<a name='L307'><i><font color='green'>   relies on that.</font></i>
<a name='L308'><i><font color='green'></font></i>
<a name='L309'><i><font color='green'>   XXX This allocator could further be enhanced by assuring that the</font></i>
<a name='L310'><i><font color='green'>   free list never reduces its size below 1.</font></i>
<a name='L311'><i><font color='green'></font></i>
<a name='L312'><i><font color='green'>*/</font></i>
<a name='L313'>
<a name='L314'><b>static</b>
<a name='L315'><a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *<a href='../R/5525.html' title='Multiple refered from 29 places.'>_PyUnicode_New</a>(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length)
<a name='L316'><font color='red'>{</font>
<a name='L317'>    <b>register</b> <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L318'>
<a name='L319'>    <i><font color='green'>/* Optimization for empty strings */</font></i>
<a name='L320'>    <b>if</b> (length == 0 &amp;&amp; unicode_empty != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L321'>        Py_INCREF(unicode_empty);
<a name='L322'>        <b>return</b> unicode_empty;
<a name='L323'>    <font color='red'>}</font>
<a name='L324'>
<a name='L325'>    <i><font color='green'>/* Ensure we won't overflow the size. */</font></i>
<a name='L326'>    <b>if</b> (length &gt; ((<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)) - 1)) <font color='red'>{</font>
<a name='L327'>        <b>return</b> (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L328'>    <font color='red'>}</font>
<a name='L329'>
<a name='L330'>    <i><font color='green'>/* Unicode freelist &amp; memory allocation */</font></i>
<a name='L331'>    <b>if</b> (free_list) <font color='red'>{</font>
<a name='L332'>        unicode = free_list;
<a name='L333'>        free_list = *(<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> **)unicode;
<a name='L334'>        numfree--;
<a name='L335'>        <b>if</b> (unicode-&gt;str) <font color='red'>{</font>
<a name='L336'>            <i><font color='green'>/* Keep-Alive optimization: we only upsize the buffer,</font></i>
<a name='L337'><i><font color='green'>               never downsize it. */</font></i>
<a name='L338'>            <b>if</b> ((unicode-&gt;length &lt; length) &amp;&amp;
<a name='L339'>                <a href='../S/2828.html#L257' title='Defined at 257 in Objects/unicodeobject.c.'>unicode_resize</a>(unicode, length) &lt; 0) <font color='red'>{</font>
<a name='L340'>                <a href='../S/2611.html#L74' title='Defined at 74 in Modules/_sre.c.'>PyObject_DEL</a>(unicode-&gt;str);
<a name='L341'>                unicode-&gt;str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L342'>            <font color='red'>}</font>
<a name='L343'>        <font color='red'>}</font>
<a name='L344'>        <b>else</b> <font color='red'>{</font>
<a name='L345'>            <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> new_size = <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) * ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)length + 1);
<a name='L346'>            unicode-&gt;str = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*) PyObject_MALLOC(new_size);
<a name='L347'>        <font color='red'>}</font>
<a name='L348'>        PyObject_INIT(unicode, &amp;PyUnicode_Type);
<a name='L349'>    <font color='red'>}</font>
<a name='L350'>    <b>else</b> <font color='red'>{</font>
<a name='L351'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> new_size;
<a name='L352'>        unicode = PyObject_New(<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>, &amp;PyUnicode_Type);
<a name='L353'>        <b>if</b> (unicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L354'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L355'>        new_size = <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) * ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)length + 1);
<a name='L356'>        unicode-&gt;str = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*) PyObject_MALLOC(new_size);
<a name='L357'>    <font color='red'>}</font>
<a name='L358'>
<a name='L359'>    <b>if</b> (!unicode-&gt;str) <font color='red'>{</font>
<a name='L360'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L361'>        <b>goto</b> onError;
<a name='L362'>    <font color='red'>}</font>
<a name='L363'>    <i><font color='green'>/* Initialize the first element to guard against cases where</font></i>
<a name='L364'><i><font color='green'>     * the caller fails before initializing str -- unicode_resize()</font></i>
<a name='L365'><i><font color='green'>     * reads str[0], and the Keep-Alive optimization can keep memory</font></i>
<a name='L366'><i><font color='green'>     * allocated for str alive across a call to unicode_dealloc(unicode).</font></i>
<a name='L367'><i><font color='green'>     * We don't want unicode_resize to read uninitialized memory in</font></i>
<a name='L368'><i><font color='green'>     * that case.</font></i>
<a name='L369'><i><font color='green'>     */</font></i>
<a name='L370'>    unicode-&gt;str[0] = 0;
<a name='L371'>    unicode-&gt;str[length] = 0;
<a name='L372'>    unicode-&gt;length = length;
<a name='L373'>    unicode-&gt;<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> = -1;
<a name='L374'>    unicode-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = 0;
<a name='L375'>    unicode-&gt;defenc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L376'>    <b>return</b> unicode;
<a name='L377'>
<a name='L378'>  onError:
<a name='L379'>    <i><font color='green'>/* XXX UNREF/NEWREF interface should be more symmetrical */</font></i>
<a name='L380'>    <a href='../S/544.html#L661' title='Defined at 661 in Include/object.h.'>_Py_DEC_REFTOTAL</a>;
<a name='L381'>    <a href='../D/6292.html' title='Multiple defined in 2 places.'>_Py_ForgetReference</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode);
<a name='L382'>    PyObject_Del(unicode);
<a name='L383'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L384'><font color='red'>}</font>
<a name='L385'>
<a name='L386'><b>static</b>
<a name='L387'><b>void</b> <a href='../S/2828.html#L9886' title='Refered from 9886 in Objects/unicodeobject.c.'>unicode_dealloc</a>(<b>register</b> PyUnicodeObject *unicode)
<a name='L388'><font color='red'>{</font>
<a name='L389'>    <b>switch</b> (PyUnicode_CHECK_INTERNED(unicode)) <font color='red'>{</font>
<a name='L390'>    <b>case</b> SSTATE_NOT_INTERNED:
<a name='L391'>        <b>break</b>;
<a name='L392'>
<a name='L393'>    <b>case</b> SSTATE_INTERNED_MORTAL:
<a name='L394'>        <i><font color='green'>/* revive dead object temporarily for DelItem */</font></i>
<a name='L395'>        <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(unicode) = 3;
<a name='L396'>        <b>if</b> (<a href='../S/2787.html#L832' title='Defined at 832 in Objects/dictobject.c.'>PyDict_DelItem</a>(interned, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode) != 0)
<a name='L397'>            <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>(
<a name='L398'>                "deletion of interned string failed");
<a name='L399'>        <b>break</b>;
<a name='L400'>
<a name='L401'>    <b>case</b> SSTATE_INTERNED_IMMORTAL:
<a name='L402'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("Immortal interned string died.");
<a name='L403'>
<a name='L404'>    <b>default</b>:
<a name='L405'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("Inconsistent interned string state.");
<a name='L406'>    <font color='red'>}</font>
<a name='L407'>
<a name='L408'>    <b>if</b> (PyUnicode_CheckExact(unicode) &amp;&amp;
<a name='L409'>        numfree &lt; <a href='../S/2828.html#L52' title='Defined at 52 in Objects/unicodeobject.c.'>PyUnicode_MAXFREELIST</a>) <font color='red'>{</font>
<a name='L410'>        <i><font color='green'>/* Keep-Alive optimization */</font></i>
<a name='L411'>        <b>if</b> (unicode-&gt;length &gt;= <a href='../S/2828.html#L71' title='Defined at 71 in Objects/unicodeobject.c.'>KEEPALIVE_SIZE_LIMIT</a>) <font color='red'>{</font>
<a name='L412'>            <a href='../S/2611.html#L74' title='Defined at 74 in Modules/_sre.c.'>PyObject_DEL</a>(unicode-&gt;str);
<a name='L413'>            unicode-&gt;str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L414'>            unicode-&gt;length = 0;
<a name='L415'>        <font color='red'>}</font>
<a name='L416'>        <b>if</b> (unicode-&gt;defenc) <font color='red'>{</font>
<a name='L417'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(unicode-&gt;defenc);
<a name='L418'>        <font color='red'>}</font>
<a name='L419'>        <i><font color='green'>/* Add to free list */</font></i>
<a name='L420'>        *(<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> **)unicode = free_list;
<a name='L421'>        free_list = unicode;
<a name='L422'>        numfree++;
<a name='L423'>    <font color='red'>}</font>
<a name='L424'>    <b>else</b> <font color='red'>{</font>
<a name='L425'>        <a href='../S/2611.html#L74' title='Defined at 74 in Modules/_sre.c.'>PyObject_DEL</a>(unicode-&gt;str);
<a name='L426'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(unicode-&gt;defenc);
<a name='L427'>        <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(unicode)-&gt;tp_free((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode);
<a name='L428'>    <font color='red'>}</font>
<a name='L429'><font color='red'>}</font>
<a name='L430'>
<a name='L431'><b>static</b>
<a name='L432'><b>int</b> <a href='../R/5526.html' title='Multiple refered from 16 places.'>_PyUnicode_Resize</a>(PyUnicodeObject **unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length)
<a name='L433'><font color='red'>{</font>
<a name='L434'>    <b>register</b> <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v;
<a name='L435'>
<a name='L436'>    <i><font color='green'>/* Argument checks */</font></i>
<a name='L437'>    <b>if</b> (unicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L438'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L439'>        <b>return</b> -1;
<a name='L440'>    <font color='red'>}</font>
<a name='L441'>    v = *unicode;
<a name='L442'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyUnicode_Check(v) || <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(v) != 1 || length &lt; 0) <font color='red'>{</font>
<a name='L443'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L444'>        <b>return</b> -1;
<a name='L445'>    <font color='red'>}</font>
<a name='L446'>
<a name='L447'>    <i><font color='green'>/* Resizing unicode_empty and single character objects is not</font></i>
<a name='L448'><i><font color='green'>       possible since these are being shared. We simply return a fresh</font></i>
<a name='L449'><i><font color='green'>       copy with the same Unicode content. */</font></i>
<a name='L450'>    <b>if</b> (v-&gt;length != length &amp;&amp;
<a name='L451'>        (v == unicode_empty || v-&gt;length == 1)) <font color='red'>{</font>
<a name='L452'>        <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *w = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(length);
<a name='L453'>        <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L454'>            <b>return</b> -1;
<a name='L455'>        <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(w-&gt;str, v-&gt;str,
<a name='L456'>                        length &lt; v-&gt;length ? length : v-&gt;length);
<a name='L457'>        Py_DECREF(*unicode);
<a name='L458'>        *unicode = w;
<a name='L459'>        <b>return</b> 0;
<a name='L460'>    <font color='red'>}</font>
<a name='L461'>
<a name='L462'>    <i><font color='green'>/* Note that we don't have to modify *unicode for unshared Unicode</font></i>
<a name='L463'><i><font color='green'>       objects, since we can modify them in-place. */</font></i>
<a name='L464'>    <b>return</b> <a href='../S/2828.html#L257' title='Defined at 257 in Objects/unicodeobject.c.'>unicode_resize</a>(v, length);
<a name='L465'><font color='red'>}</font>
<a name='L466'>
<a name='L467'><b>int</b> <a href='../R/3606.html' title='Multiple refered from 24 places.'>PyUnicode_Resize</a>(PyObject **unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length)
<a name='L468'><font color='red'>{</font>
<a name='L469'>    <b>return</b> <a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> **)unicode, length);
<a name='L470'><font color='red'>}</font>
<a name='L471'>
<a name='L472'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3590.html' title='Multiple refered from 110 places.'>PyUnicode_FromUnicode</a>(<b>const</b> Py_UNICODE *u,
<a name='L473'>                                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L474'><font color='red'>{</font>
<a name='L475'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L476'>
<a name='L477'>    <i><font color='green'>/* If the Unicode data is known at construction time, we can apply</font></i>
<a name='L478'><i><font color='green'>       some optimizations which share commonly used objects. */</font></i>
<a name='L479'>    <b>if</b> (u != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L480'>
<a name='L481'>        <i><font color='green'>/* Optimization for empty strings */</font></i>
<a name='L482'>        <b>if</b> (size == 0 &amp;&amp; unicode_empty != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L483'>            Py_INCREF(unicode_empty);
<a name='L484'>            <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode_empty;
<a name='L485'>        <font color='red'>}</font>
<a name='L486'>
<a name='L487'>        <i><font color='green'>/* Single character Unicode objects in the Latin-1 range are</font></i>
<a name='L488'><i><font color='green'>           shared when using this constructor */</font></i>
<a name='L489'>        <b>if</b> (size == 1 &amp;&amp; *u &lt; 256) <font color='red'>{</font>
<a name='L490'>            unicode = unicode_latin1[*u];
<a name='L491'>            <b>if</b> (!unicode) <font color='red'>{</font>
<a name='L492'>                unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(1);
<a name='L493'>                <b>if</b> (!unicode)
<a name='L494'>                    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L495'>                unicode-&gt;str[0] = *u;
<a name='L496'>                unicode_latin1[*u] = unicode;
<a name='L497'>            <font color='red'>}</font>
<a name='L498'>            Py_INCREF(unicode);
<a name='L499'>            <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L500'>        <font color='red'>}</font>
<a name='L501'>    <font color='red'>}</font>
<a name='L502'>
<a name='L503'>    unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L504'>    <b>if</b> (!unicode)
<a name='L505'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L506'>
<a name='L507'>    <i><font color='green'>/* Copy the Unicode data into the new object */</font></i>
<a name='L508'>    <b>if</b> (u != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L509'>        <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(unicode-&gt;str, u, size);
<a name='L510'>
<a name='L511'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L512'><font color='red'>}</font>
<a name='L513'>
<a name='L514'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3589.html' title='Multiple refered from 54 places.'>PyUnicode_FromStringAndSize</a>(<b>const</b> <b>char</b> *u, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L515'><font color='red'>{</font>
<a name='L516'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L517'>
<a name='L518'>    <b>if</b> (size &lt; 0) <font color='red'>{</font>
<a name='L519'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L520'>                        "Negative size passed to PyUnicode_FromStringAndSize");
<a name='L521'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L522'>    <font color='red'>}</font>
<a name='L523'>
<a name='L524'>    <i><font color='green'>/* If the Unicode data is known at construction time, we can apply</font></i>
<a name='L525'><i><font color='green'>       some optimizations which share commonly used objects.</font></i>
<a name='L526'><i><font color='green'>       Also, this means the input must be UTF-8, so fall back to the</font></i>
<a name='L527'><i><font color='green'>       UTF-8 decoder at the end. */</font></i>
<a name='L528'>    <b>if</b> (u != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L529'>
<a name='L530'>        <i><font color='green'>/* Optimization for empty strings */</font></i>
<a name='L531'>        <b>if</b> (size == 0 &amp;&amp; unicode_empty != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L532'>            Py_INCREF(unicode_empty);
<a name='L533'>            <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode_empty;
<a name='L534'>        <font color='red'>}</font>
<a name='L535'>
<a name='L536'>        <i><font color='green'>/* Single characters are shared when using this constructor.</font></i>
<a name='L537'><i><font color='green'>           Restrict to ASCII, since the input must be UTF-8. */</font></i>
<a name='L538'>        <b>if</b> (size == 1 &amp;&amp; <a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*u) &lt; 128) <font color='red'>{</font>
<a name='L539'>            unicode = unicode_latin1[<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*u)];
<a name='L540'>            <b>if</b> (!unicode) <font color='red'>{</font>
<a name='L541'>                unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(1);
<a name='L542'>                <b>if</b> (!unicode)
<a name='L543'>                    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L544'>                unicode-&gt;str[0] = <a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*u);
<a name='L545'>                unicode_latin1[<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*u)] = unicode;
<a name='L546'>            <font color='red'>}</font>
<a name='L547'>            Py_INCREF(unicode);
<a name='L548'>            <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L549'>        <font color='red'>}</font>
<a name='L550'>
<a name='L551'>        <b>return</b> <a href='../D/3987.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF8</a>(u, size, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L552'>    <font color='red'>}</font>
<a name='L553'>
<a name='L554'>    unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L555'>    <b>if</b> (!unicode)
<a name='L556'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L557'>
<a name='L558'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L559'><font color='red'>}</font>
<a name='L560'>
<a name='L561'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3588.html' title='Multiple refered from 247 places.'>PyUnicode_FromString</a>(<b>const</b> <b>char</b> *u)
<a name='L562'><font color='red'>{</font>
<a name='L563'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> size = strlen(u);
<a name='L564'>    <b>if</b> (size &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>) <font color='red'>{</font>
<a name='L565'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError, "input too long");
<a name='L566'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L567'>    <font color='red'>}</font>
<a name='L568'>
<a name='L569'>    <b>return</b> <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(u, size);
<a name='L570'><font color='red'>}</font>
<a name='L571'>
<a name='L572'><font color='darkred'>#ifdef</font> <a href='../D/1607.html' title='Multiple defined in 2 places.'>HAVE_WCHAR_H</a>
<a name='L573'>
<a name='L574'><font color='darkred'>#if</font> (<a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a> == 2) &amp;&amp; <b>defined</b>(<a href='../S/2906.html#L727' title='Defined at 727 in PC/pyconfig.h.'>SIZEOF_WCHAR_T</a>) &amp;&amp; (<a href='../S/2906.html#L727' title='Defined at 727 in PC/pyconfig.h.'>SIZEOF_WCHAR_T</a> == 4)
<a name='L575'><font color='darkred'># define</font> <a href='../S/2828.html#L578' title='Refered from 578 in Objects/unicodeobject.c.'>CONVERT_WCHAR_TO_SURROGATES</a>
<a name='L576'><font color='darkred'>#endif</font>
<a name='L577'>
<a name='L578'><font color='darkred'>#ifdef</font> <a href='../D/623.html' title='Multiple defined in 2 places.'>CONVERT_WCHAR_TO_SURROGATES</a>
<a name='L579'>
<a name='L580'><i><font color='green'>/* Here sizeof(wchar_t) is 4 but Py_UNICODE_SIZE == 2, so we need</font></i>
<a name='L581'><i><font color='green'>   to convert from UTF32 to UTF16. */</font></i>
<a name='L582'>
<a name='L583'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3591.html' title='Multiple refered from 40 places.'>PyUnicode_FromWideChar</a>(<b>register</b> <b>const</b> wchar_t *w,
<a name='L584'>                                 <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L585'><font color='red'>{</font>
<a name='L586'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L587'>    <b>register</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L588'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> alloc;
<a name='L589'>    <b>const</b> wchar_t *orig_w;
<a name='L590'>
<a name='L591'>    <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L592'>        <b>if</b> (size == 0)
<a name='L593'>            <b>return</b> <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L594'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L595'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L596'>    <font color='red'>}</font>
<a name='L597'>
<a name='L598'>    <b>if</b> (size == -1) <font color='red'>{</font>
<a name='L599'>        size = wcslen(w);
<a name='L600'>    <font color='red'>}</font>
<a name='L601'>
<a name='L602'>    alloc = size;
<a name='L603'>    orig_w = w;
<a name='L604'>    <b>for</b> (i = size; i &gt; 0; i--) <font color='red'>{</font>
<a name='L605'>        <b>if</b> (*w &gt; 0xFFFF)
<a name='L606'>            alloc++;
<a name='L607'>        w++;
<a name='L608'>    <font color='red'>}</font>
<a name='L609'>    w = orig_w;
<a name='L610'>    unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(alloc);
<a name='L611'>    <b>if</b> (!unicode)
<a name='L612'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L613'>
<a name='L614'>    <i><font color='green'>/* Copy the wchar_t data into the new object */</font></i>
<a name='L615'>    <font color='red'>{</font>
<a name='L616'>        <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *u;
<a name='L617'>        u = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L618'>        <b>for</b> (i = size; i &gt; 0; i--) <font color='red'>{</font>
<a name='L619'>            <b>if</b> (*w &gt; 0xFFFF) <font color='red'>{</font>
<a name='L620'>                wchar_t ordinal = *w++;
<a name='L621'>                ordinal -= 0x10000;
<a name='L622'>                *u++ = 0xD800 | (ordinal &gt;&gt; 10);
<a name='L623'>                *u++ = 0xDC00 | (ordinal &amp; 0x3FF);
<a name='L624'>            <font color='red'>}</font>
<a name='L625'>            <b>else</b>
<a name='L626'>                *u++ = *w++;
<a name='L627'>        <font color='red'>}</font>
<a name='L628'>    <font color='red'>}</font>
<a name='L629'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L630'><font color='red'>}</font>
<a name='L631'>
<a name='L632'><font color='darkred'>#else</font>
<a name='L633'>
<a name='L634'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3591.html' title='Multiple refered from 40 places.'>PyUnicode_FromWideChar</a>(<b>register</b> <b>const</b> wchar_t *w,
<a name='L635'>                                 <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L636'><font color='red'>{</font>
<a name='L637'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L638'>
<a name='L639'>    <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L640'>        <b>if</b> (size == 0)
<a name='L641'>            <b>return</b> <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L642'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L643'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L644'>    <font color='red'>}</font>
<a name='L645'>
<a name='L646'>    <b>if</b> (size == -1) <font color='red'>{</font>
<a name='L647'>        size = wcslen(w);
<a name='L648'>    <font color='red'>}</font>
<a name='L649'>
<a name='L650'>    unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L651'>    <b>if</b> (!unicode)
<a name='L652'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L653'>
<a name='L654'>    <i><font color='green'>/* Copy the wchar_t data into the new object */</font></i>
<a name='L655'><font color='darkred'>#if</font> <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a> == <a href='../S/2906.html#L727' title='Defined at 727 in PC/pyconfig.h.'>SIZEOF_WCHAR_T</a>
<a name='L656'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(unicode-&gt;str, w, size * <b>sizeof</b>(wchar_t));
<a name='L657'><font color='darkred'>#else</font>
<a name='L658'>    <font color='red'>{</font>
<a name='L659'>        <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *u;
<a name='L660'>        <b>register</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L661'>        u = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L662'>        <b>for</b> (i = size; i &gt; 0; i--)
<a name='L663'>            *u++ = *w++;
<a name='L664'>    <font color='red'>}</font>
<a name='L665'><font color='darkred'>#endif</font>
<a name='L666'>
<a name='L667'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L668'><font color='red'>}</font>
<a name='L669'>
<a name='L670'><font color='darkred'>#endif</font> <i><font color='green'>/* CONVERT_WCHAR_TO_SURROGATES */</font></i>
<a name='L671'>
<a name='L672'><font color='darkred'>#undef</font> <a href='../S/2828.html#L578' title='Refered from 578 in Objects/unicodeobject.c.'>CONVERT_WCHAR_TO_SURROGATES</a>
<a name='L673'>
<a name='L674'><b>static</b> <b>void</b>
<a name='L675'><a href='../R/8856.html' title='Multiple refered from 4 places.'>makefmt</a>(<b>char</b> *fmt, <b>int</b> longflag, <b>int</b> longlongflag, <b>int</b> size_tflag,
<a name='L676'>        <b>int</b> zeropad, <b>int</b> width, <b>int</b> precision, <b>char</b> c)
<a name='L677'><font color='red'>{</font>
<a name='L678'>    *fmt++ = '%';
<a name='L679'>    <b>if</b> (width) <font color='red'>{</font>
<a name='L680'>        <b>if</b> (zeropad)
<a name='L681'>            *fmt++ = '0';
<a name='L682'>        fmt += sprintf(fmt, "%d", width);
<a name='L683'>    <font color='red'>}</font>
<a name='L684'>    <b>if</b> (precision)
<a name='L685'>        fmt += sprintf(fmt, ".%d", precision);
<a name='L686'>    <b>if</b> (longflag)
<a name='L687'>        *fmt++ = 'l';
<a name='L688'>    <b>else</b> <b>if</b> (longlongflag) <font color='red'>{</font>
<a name='L689'>        <i><font color='green'>/* longlongflag should only ever be nonzero on machines with</font></i>
<a name='L690'><i><font color='green'>           HAVE_LONG_LONG defined */</font></i>
<a name='L691'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L692'>        <b>char</b> *f = <a href='../S/565.html#L255' title='Defined at 255 in Include/pyport.h.'>PY_FORMAT_LONG_LONG</a>;
<a name='L693'>        <b>while</b> (*f)
<a name='L694'>            *fmt++ = *f++;
<a name='L695'><font color='darkred'>#else</font>
<a name='L696'>        <i><font color='green'>/* we shouldn't ever get here */</font></i>
<a name='L697'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0);
<a name='L698'>        *fmt++ = 'l';
<a name='L699'><font color='darkred'>#endif</font>
<a name='L700'>    <font color='red'>}</font>
<a name='L701'>    <b>else</b> <b>if</b> (size_tflag) <font color='red'>{</font>
<a name='L702'>        <b>char</b> *f = <a href='../D/2597.html' title='Multiple defined in 4 places.'>PY_FORMAT_SIZE_T</a>;
<a name='L703'>        <b>while</b> (*f)
<a name='L704'>            *fmt++ = *f++;
<a name='L705'>    <font color='red'>}</font>
<a name='L706'>    *fmt++ = c;
<a name='L707'>    *fmt = '\0';
<a name='L708'><font color='red'>}</font>
<a name='L709'>
<a name='L710'><font color='darkred'>#define</font> <a href='../R/5974.html' title='Multiple refered from 7 places.'>appendstring</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>) <font color='red'>{</font><b>for</b> (copy = string;*copy;) *s++ = *copy++;<font color='red'>}</font>
<a name='L711'>
<a name='L712'><i><font color='green'>/* size of fixed-size buffer for formatting single arguments */</font></i>
<a name='L713'><font color='darkred'>#define</font> <a href='../R/1611.html' title='Multiple refered from 2 places.'>ITEM_BUFFER_LEN</a> 21
<a name='L714'><i><font color='green'>/* maximum number of characters required for output of %ld.  21 characters</font></i>
<a name='L715'><i><font color='green'>   allows for 64-bit integers (in decimal) and an optional sign. */</font></i>
<a name='L716'><font color='darkred'>#define</font> <a href='../R/1865.html' title='Multiple refered from 2 places.'>MAX_LONG_CHARS</a> 21
<a name='L717'><i><font color='green'>/* maximum number of characters required for output of %lld.</font></i>
<a name='L718'><i><font color='green'>   We need at most ceil(log10(256)*SIZEOF_LONG_LONG) digits,</font></i>
<a name='L719'><i><font color='green'>   plus 1 for the sign.  53/22 is an upper bound for log10(256). */</font></i>
<a name='L720'><font color='darkred'>#define</font> <a href='../R/1867.html' title='Multiple refered from 2 places.'>MAX_LONG_LONG_CHARS</a> (2 + (<a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a>*53-1) / 22)
<a name='L721'>
<a name='L722'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L723'><a href='../R/3585.html' title='Multiple refered from 5 places.'>PyUnicode_FromFormatV</a>(<b>const</b> <b>char</b> *format, va_list vargs)
<a name='L724'><font color='red'>{</font>
<a name='L725'>    va_list count;
<a name='L726'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> callcount = 0;
<a name='L727'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **callresults = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L728'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **callresult = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L729'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = 0;
<a name='L730'>    <b>int</b> width = 0;
<a name='L731'>    <b>int</b> precision = 0;
<a name='L732'>    <b>int</b> zeropad;
<a name='L733'>    <b>const</b> <b>char</b>* f;
<a name='L734'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s;
<a name='L735'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>;
<a name='L736'>    <i><font color='green'>/* used by sprintf */</font></i>
<a name='L737'>    <b>char</b> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[<a href='../S/2828.html#L713' title='Defined at 713 in Objects/unicodeobject.c.'>ITEM_BUFFER_LEN</a>+1];
<a name='L738'>    <i><font color='green'>/* use abuffer instead of buffer, if we need more space</font></i>
<a name='L739'><i><font color='green'>     * (which can happen if there's a format specifier with width). */</font></i>
<a name='L740'>    <b>char</b> *abuffer = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L741'>    <b>char</b> *realbuffer;
<a name='L742'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> abuffersize = 0;
<a name='L743'>    <b>char</b> fmt[61]; <i><font color='green'>/* should be enough for %0width.precisionlld */</font></i>
<a name='L744'>    <b>const</b> <b>char</b> *copy;
<a name='L745'>
<a name='L746'>    <a href='../D/4300.html' title='Multiple defined in 3 places.'>Py_VA_COPY</a>(count, vargs);
<a name='L747'>    <i><font color='green'>/* step 1: count the number of %S/%R/%A/%s format specifications</font></i>
<a name='L748'><i><font color='green'>     * (we call PyObject_Str()/PyObject_Repr()/PyObject_ASCII()/</font></i>
<a name='L749'><i><font color='green'>     * PyUnicode_DecodeUTF8() for these objects once during step 3 and put the</font></i>
<a name='L750'><i><font color='green'>     * result in an array) */</font></i>
<a name='L751'>    <b>for</b> (f = format; *f; f++) <font color='red'>{</font>
<a name='L752'>         <b>if</b> (*f == '%') <font color='red'>{</font>
<a name='L753'>             <b>if</b> (*(f+1)=='%')
<a name='L754'>                 <b>continue</b>;
<a name='L755'>             <b>if</b> (*(f+1)=='S' || *(f+1)=='R' || *(f+1)=='A')
<a name='L756'>                 ++callcount;
<a name='L757'>             <b>while</b> (<a href='../S/556.html#L21' title='Defined at 21 in Include/pyctype.h.'>Py_ISDIGIT</a>((<b>unsigned</b>)*f))
<a name='L758'>                 width = (width*10) + *f++ - '0';
<a name='L759'>             <b>while</b> (*++f &amp;&amp; *f != '%' &amp;&amp; !<a href='../S/556.html#L20' title='Defined at 20 in Include/pyctype.h.'>Py_ISALPHA</a>((<b>unsigned</b>)*f))
<a name='L760'>                 ;
<a name='L761'>             <b>if</b> (*f == 's')
<a name='L762'>                 ++callcount;
<a name='L763'>         <font color='red'>}</font>
<a name='L764'>         <b>else</b> <b>if</b> (128 &lt;= (<b>unsigned</b> <b>char</b>)*f) <font color='red'>{</font>
<a name='L765'>             <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L766'>                "PyUnicode_FromFormatV() expects an ASCII-encoded format "
<a name='L767'>                "string, got a non-ASCII byte: 0x%02x",
<a name='L768'>                (<b>unsigned</b> <b>char</b>)*f);
<a name='L769'>             <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L770'>         <font color='red'>}</font>
<a name='L771'>    <font color='red'>}</font>
<a name='L772'>    <i><font color='green'>/* step 2: allocate memory for the results of</font></i>
<a name='L773'><i><font color='green'>     * PyObject_Str()/PyObject_Repr()/PyUnicode_DecodeUTF8() calls */</font></i>
<a name='L774'>    <b>if</b> (callcount) <font color='red'>{</font>
<a name='L775'>        callresults = <a href='../S/2804.html#L1262' title='Defined at 1262 in Objects/obmalloc.c.'>PyObject_Malloc</a>(<b>sizeof</b>(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)*callcount);
<a name='L776'>        <b>if</b> (!callresults) <font color='red'>{</font>
<a name='L777'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L778'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L779'>        <font color='red'>}</font>
<a name='L780'>        callresult = callresults;
<a name='L781'>    <font color='red'>}</font>
<a name='L782'>    <i><font color='green'>/* step 3: figure out how large a buffer we need */</font></i>
<a name='L783'>    <b>for</b> (f = format; *f; f++) <font color='red'>{</font>
<a name='L784'>        <b>if</b> (*f == '%') <font color='red'>{</font>
<a name='L785'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L786'>            <b>int</b> longlongflag = 0;
<a name='L787'><font color='darkred'>#endif</font>
<a name='L788'>            <b>const</b> <b>char</b>* p = f;
<a name='L789'>            width = 0;
<a name='L790'>            <b>while</b> (<a href='../S/556.html#L21' title='Defined at 21 in Include/pyctype.h.'>Py_ISDIGIT</a>((<b>unsigned</b>)*f))
<a name='L791'>                width = (width*10) + *f++ - '0';
<a name='L792'>            <b>while</b> (*++f &amp;&amp; *f != '%' &amp;&amp; !<a href='../S/556.html#L20' title='Defined at 20 in Include/pyctype.h.'>Py_ISALPHA</a>((<b>unsigned</b>)*f))
<a name='L793'>                ;
<a name='L794'>
<a name='L795'>            <i><font color='green'>/* skip the 'l' or 'z' in {%ld, %zd, %lu, %zu} since</font></i>
<a name='L796'><i><font color='green'>             * they don't affect the amount of space we reserve.</font></i>
<a name='L797'><i><font color='green'>             */</font></i>
<a name='L798'>            <b>if</b> (*f == 'l') <font color='red'>{</font>
<a name='L799'>                <b>if</b> (f[1] == 'd' || f[1] == 'u') <font color='red'>{</font>
<a name='L800'>                    ++f;
<a name='L801'>                <font color='red'>}</font>
<a name='L802'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L803'>                <b>else</b> <b>if</b> (f[1] == 'l' &amp;&amp;
<a name='L804'>                         (f[2] == 'd' || f[2] == 'u')) <font color='red'>{</font>
<a name='L805'>                    longlongflag = 1;
<a name='L806'>                    f += 2;
<a name='L807'>                <font color='red'>}</font>
<a name='L808'><font color='darkred'>#endif</font>
<a name='L809'>            <font color='red'>}</font>
<a name='L810'>            <b>else</b> <b>if</b> (*f == 'z' &amp;&amp; (f[1] == 'd' || f[1] == 'u')) <font color='red'>{</font>
<a name='L811'>                ++f;
<a name='L812'>            <font color='red'>}</font>
<a name='L813'>
<a name='L814'>            <b>switch</b> (*f) <font color='red'>{</font>
<a name='L815'>            <b>case</b> 'c':
<a name='L816'>                (<b>void</b>)va_arg(count, <b>int</b>);
<a name='L817'>                <i><font color='green'>/* fall through... */</font></i>
<a name='L818'>            <b>case</b> '%':
<a name='L819'>                n++;
<a name='L820'>                <b>break</b>;
<a name='L821'>            <b>case</b> 'd': <b>case</b> 'u': <b>case</b> 'i': <b>case</b> 'x':
<a name='L822'>                (<b>void</b>) va_arg(count, <b>int</b>);
<a name='L823'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L824'>                <b>if</b> (longlongflag) <font color='red'>{</font>
<a name='L825'>                    <b>if</b> (width &lt; <a href='../S/2828.html#L720' title='Defined at 720 in Objects/unicodeobject.c.'>MAX_LONG_LONG_CHARS</a>)
<a name='L826'>                        width = <a href='../S/2828.html#L720' title='Defined at 720 in Objects/unicodeobject.c.'>MAX_LONG_LONG_CHARS</a>;
<a name='L827'>                <font color='red'>}</font>
<a name='L828'>                <b>else</b>
<a name='L829'><font color='darkred'>#endif</font>
<a name='L830'>                    <i><font color='green'>/* MAX_LONG_CHARS is enough to hold a 64-bit integer,</font></i>
<a name='L831'><i><font color='green'>                       including sign.  Decimal takes the most space.  This</font></i>
<a name='L832'><i><font color='green'>                       isn't enough for octal.  If a width is specified we</font></i>
<a name='L833'><i><font color='green'>                       need more (which we allocate later). */</font></i>
<a name='L834'>                    <b>if</b> (width &lt; <a href='../S/2828.html#L716' title='Defined at 716 in Objects/unicodeobject.c.'>MAX_LONG_CHARS</a>)
<a name='L835'>                        width = <a href='../S/2828.html#L716' title='Defined at 716 in Objects/unicodeobject.c.'>MAX_LONG_CHARS</a>;
<a name='L836'>                n += width;
<a name='L837'>                <i><font color='green'>/* XXX should allow for large precision here too. */</font></i>
<a name='L838'>                <b>if</b> (abuffersize &lt; width)
<a name='L839'>                    abuffersize = width;
<a name='L840'>                <b>break</b>;
<a name='L841'>            <b>case</b> 's':
<a name='L842'>            <font color='red'>{</font>
<a name='L843'>                <i><font color='green'>/* UTF-8 */</font></i>
<a name='L844'>                <b>const</b> <b>char</b> *s = va_arg(count, <b>const</b> <b>char</b>*);
<a name='L845'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str = <a href='../D/3987.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF8</a>(s, strlen(s), "replace");
<a name='L846'>                <b>if</b> (!str)
<a name='L847'>                    <b>goto</b> fail;
<a name='L848'>                n += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(str);
<a name='L849'>                <i><font color='green'>/* Remember the str and switch to the next slot */</font></i>
<a name='L850'>                *callresult++ = str;
<a name='L851'>                <b>break</b>;
<a name='L852'>            <font color='red'>}</font>
<a name='L853'>            <b>case</b> 'U':
<a name='L854'>            <font color='red'>{</font>
<a name='L855'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = va_arg(count, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L856'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(obj &amp;&amp; PyUnicode_Check(obj));
<a name='L857'>                n += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(obj);
<a name='L858'>                <b>break</b>;
<a name='L859'>            <font color='red'>}</font>
<a name='L860'>            <b>case</b> 'V':
<a name='L861'>            <font color='red'>{</font>
<a name='L862'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = va_arg(count, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L863'>                <b>const</b> <b>char</b> *str = va_arg(count, <b>const</b> <b>char</b> *);
<a name='L864'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(obj || str);
<a name='L865'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(!obj || PyUnicode_Check(obj));
<a name='L866'>                <b>if</b> (obj)
<a name='L867'>                    n += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(obj);
<a name='L868'>                <b>else</b>
<a name='L869'>                    n += strlen(str);
<a name='L870'>                <b>break</b>;
<a name='L871'>            <font color='red'>}</font>
<a name='L872'>            <b>case</b> 'S':
<a name='L873'>            <font color='red'>{</font>
<a name='L874'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = va_arg(count, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L875'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str;
<a name='L876'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(obj);
<a name='L877'>                str = <a href='../S/2803.html#L396' title='Defined at 396 in Objects/object.c.'>PyObject_Str</a>(obj);
<a name='L878'>                <b>if</b> (!str)
<a name='L879'>                    <b>goto</b> fail;
<a name='L880'>                n += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(str);
<a name='L881'>                <i><font color='green'>/* Remember the str and switch to the next slot */</font></i>
<a name='L882'>                *callresult++ = str;
<a name='L883'>                <b>break</b>;
<a name='L884'>            <font color='red'>}</font>
<a name='L885'>            <b>case</b> 'R':
<a name='L886'>            <font color='red'>{</font>
<a name='L887'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = va_arg(count, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L888'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repr;
<a name='L889'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(obj);
<a name='L890'>                repr = <a href='../S/2803.html#L368' title='Defined at 368 in Objects/object.c.'>PyObject_Repr</a>(obj);
<a name='L891'>                <b>if</b> (!repr)
<a name='L892'>                    <b>goto</b> fail;
<a name='L893'>                n += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(repr);
<a name='L894'>                <i><font color='green'>/* Remember the repr and switch to the next slot */</font></i>
<a name='L895'>                *callresult++ = repr;
<a name='L896'>                <b>break</b>;
<a name='L897'>            <font color='red'>}</font>
<a name='L898'>            <b>case</b> 'A':
<a name='L899'>            <font color='red'>{</font>
<a name='L900'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = va_arg(count, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L901'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ascii;
<a name='L902'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(obj);
<a name='L903'>                ascii = <a href='../S/2803.html#L435' title='Defined at 435 in Objects/object.c.'>PyObject_ASCII</a>(obj);
<a name='L904'>                <b>if</b> (!ascii)
<a name='L905'>                    <b>goto</b> fail;
<a name='L906'>                n += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(ascii);
<a name='L907'>                <i><font color='green'>/* Remember the repr and switch to the next slot */</font></i>
<a name='L908'>                *callresult++ = ascii;
<a name='L909'>                <b>break</b>;
<a name='L910'>            <font color='red'>}</font>
<a name='L911'>            <b>case</b> 'p':
<a name='L912'>                (<b>void</b>) va_arg(count, <b>int</b>);
<a name='L913'>                <i><font color='green'>/* maximum 64-bit pointer representation:</font></i>
<a name='L914'><i><font color='green'>                 * 0xffffffffffffffff</font></i>
<a name='L915'><i><font color='green'>                 * so 19 characters is enough.</font></i>
<a name='L916'><i><font color='green'>                 * XXX I count 18 -- what's the extra for?</font></i>
<a name='L917'><i><font color='green'>                 */</font></i>
<a name='L918'>                n += 19;
<a name='L919'>                <b>break</b>;
<a name='L920'>            <b>default</b>:
<a name='L921'>                <i><font color='green'>/* if we stumble upon an unknown</font></i>
<a name='L922'><i><font color='green'>                   formatting code, copy the rest of</font></i>
<a name='L923'><i><font color='green'>                   the format string to the output</font></i>
<a name='L924'><i><font color='green'>                   string. (we cannot just skip the</font></i>
<a name='L925'><i><font color='green'>                   code, since there's no way to know</font></i>
<a name='L926'><i><font color='green'>                   what's in the argument list) */</font></i>
<a name='L927'>                n += strlen(p);
<a name='L928'>                <b>goto</b> expand;
<a name='L929'>            <font color='red'>}</font>
<a name='L930'>        <font color='red'>}</font> <b>else</b>
<a name='L931'>            n++;
<a name='L932'>    <font color='red'>}</font>
<a name='L933'>  expand:
<a name='L934'>    <b>if</b> (abuffersize &gt; <a href='../S/2828.html#L713' title='Defined at 713 in Objects/unicodeobject.c.'>ITEM_BUFFER_LEN</a>) <font color='red'>{</font>
<a name='L935'>        <i><font color='green'>/* add 1 for sprintf's trailing null byte */</font></i>
<a name='L936'>        abuffer = <a href='../S/2804.html#L1262' title='Defined at 1262 in Objects/obmalloc.c.'>PyObject_Malloc</a>(abuffersize + 1);
<a name='L937'>        <b>if</b> (!abuffer) <font color='red'>{</font>
<a name='L938'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L939'>            <b>goto</b> fail;
<a name='L940'>        <font color='red'>}</font>
<a name='L941'>        realbuffer = abuffer;
<a name='L942'>    <font color='red'>}</font>
<a name='L943'>    <b>else</b>
<a name='L944'>        realbuffer = <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L945'>    <i><font color='green'>/* step 4: fill the buffer */</font></i>
<a name='L946'>    <i><font color='green'>/* Since we've analyzed how much space we need for the worst case,</font></i>
<a name='L947'><i><font color='green'>       we don't have to resize the string.</font></i>
<a name='L948'><i><font color='green'>       There can be no errors beyond this point. */</font></i>
<a name='L949'>    <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a> = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, n);
<a name='L950'>    <b>if</b> (!<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>)
<a name='L951'>        <b>goto</b> fail;
<a name='L952'>
<a name='L953'>    s = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>);
<a name='L954'>    callresult = callresults;
<a name='L955'>
<a name='L956'>    <b>for</b> (f = format; *f; f++) <font color='red'>{</font>
<a name='L957'>        <b>if</b> (*f == '%') <font color='red'>{</font>
<a name='L958'>            <b>const</b> <b>char</b>* p = f++;
<a name='L959'>            <b>int</b> longflag = 0;
<a name='L960'>            <b>int</b> longlongflag = 0;
<a name='L961'>            <b>int</b> size_tflag = 0;
<a name='L962'>            zeropad = (*f == '0');
<a name='L963'>            <i><font color='green'>/* parse the width.precision part */</font></i>
<a name='L964'>            width = 0;
<a name='L965'>            <b>while</b> (<a href='../S/556.html#L21' title='Defined at 21 in Include/pyctype.h.'>Py_ISDIGIT</a>((<b>unsigned</b>)*f))
<a name='L966'>                width = (width*10) + *f++ - '0';
<a name='L967'>            precision = 0;
<a name='L968'>            <b>if</b> (*f == '.') <font color='red'>{</font>
<a name='L969'>                f++;
<a name='L970'>                <b>while</b> (<a href='../S/556.html#L21' title='Defined at 21 in Include/pyctype.h.'>Py_ISDIGIT</a>((<b>unsigned</b>)*f))
<a name='L971'>                    precision = (precision*10) + *f++ - '0';
<a name='L972'>            <font color='red'>}</font>
<a name='L973'>            <i><font color='green'>/* Handle %ld, %lu, %lld and %llu. */</font></i>
<a name='L974'>            <b>if</b> (*f == 'l') <font color='red'>{</font>
<a name='L975'>                <b>if</b> (f[1] == 'd' || f[1] == 'u') <font color='red'>{</font>
<a name='L976'>                    longflag = 1;
<a name='L977'>                    ++f;
<a name='L978'>                <font color='red'>}</font>
<a name='L979'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L980'>                <b>else</b> <b>if</b> (f[1] == 'l' &amp;&amp;
<a name='L981'>                         (f[2] == 'd' || f[2] == 'u')) <font color='red'>{</font>
<a name='L982'>                    longlongflag = 1;
<a name='L983'>                    f += 2;
<a name='L984'>                <font color='red'>}</font>
<a name='L985'><font color='darkred'>#endif</font>
<a name='L986'>            <font color='red'>}</font>
<a name='L987'>            <i><font color='green'>/* handle the size_t flag. */</font></i>
<a name='L988'>            <b>if</b> (*f == 'z' &amp;&amp; (f[1] == 'd' || f[1] == 'u')) <font color='red'>{</font>
<a name='L989'>                size_tflag = 1;
<a name='L990'>                ++f;
<a name='L991'>            <font color='red'>}</font>
<a name='L992'>
<a name='L993'>            <b>switch</b> (*f) <font color='red'>{</font>
<a name='L994'>            <b>case</b> 'c':
<a name='L995'>                *s++ = va_arg(vargs, <b>int</b>);
<a name='L996'>                <b>break</b>;
<a name='L997'>            <b>case</b> 'd':
<a name='L998'>                <a href='../S/2828.html#L675' title='Defined at 675 in Objects/unicodeobject.c.'>makefmt</a>(fmt, longflag, longlongflag, size_tflag, zeropad,
<a name='L999'>                        width, precision, 'd');
<a name='L1000'>                <b>if</b> (longflag)
<a name='L1001'>                    sprintf(realbuffer, fmt, va_arg(vargs, <b>long</b>));
<a name='L1002'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L1003'>                <b>else</b> <b>if</b> (longlongflag)
<a name='L1004'>                    sprintf(realbuffer, fmt, va_arg(vargs, <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>));
<a name='L1005'><font color='darkred'>#endif</font>
<a name='L1006'>                <b>else</b> <b>if</b> (size_tflag)
<a name='L1007'>                    sprintf(realbuffer, fmt, va_arg(vargs, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>));
<a name='L1008'>                <b>else</b>
<a name='L1009'>                    sprintf(realbuffer, fmt, va_arg(vargs, <b>int</b>));
<a name='L1010'>                <a href='../D/6727.html' title='Multiple defined in 2 places.'>appendstring</a>(realbuffer);
<a name='L1011'>                <b>break</b>;
<a name='L1012'>            <b>case</b> 'u':
<a name='L1013'>                <a href='../S/2828.html#L675' title='Defined at 675 in Objects/unicodeobject.c.'>makefmt</a>(fmt, longflag, longlongflag, size_tflag, zeropad,
<a name='L1014'>                        width, precision, 'u');
<a name='L1015'>                <b>if</b> (longflag)
<a name='L1016'>                    sprintf(realbuffer, fmt, va_arg(vargs, <b>unsigned</b> <b>long</b>));
<a name='L1017'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L1018'>                <b>else</b> <b>if</b> (longlongflag)
<a name='L1019'>                    sprintf(realbuffer, fmt, va_arg(vargs,
<a name='L1020'>                                                    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>));
<a name='L1021'><font color='darkred'>#endif</font>
<a name='L1022'>                <b>else</b> <b>if</b> (size_tflag)
<a name='L1023'>                    sprintf(realbuffer, fmt, va_arg(vargs, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>));
<a name='L1024'>                <b>else</b>
<a name='L1025'>                    sprintf(realbuffer, fmt, va_arg(vargs, <b>unsigned</b> <b>int</b>));
<a name='L1026'>                <a href='../D/6727.html' title='Multiple defined in 2 places.'>appendstring</a>(realbuffer);
<a name='L1027'>                <b>break</b>;
<a name='L1028'>            <b>case</b> 'i':
<a name='L1029'>                <a href='../S/2828.html#L675' title='Defined at 675 in Objects/unicodeobject.c.'>makefmt</a>(fmt, 0, 0, 0, zeropad, width, precision, 'i');
<a name='L1030'>                sprintf(realbuffer, fmt, va_arg(vargs, <b>int</b>));
<a name='L1031'>                <a href='../D/6727.html' title='Multiple defined in 2 places.'>appendstring</a>(realbuffer);
<a name='L1032'>                <b>break</b>;
<a name='L1033'>            <b>case</b> 'x':
<a name='L1034'>                <a href='../S/2828.html#L675' title='Defined at 675 in Objects/unicodeobject.c.'>makefmt</a>(fmt, 0, 0, 0, zeropad, width, precision, 'x');
<a name='L1035'>                sprintf(realbuffer, fmt, va_arg(vargs, <b>int</b>));
<a name='L1036'>                <a href='../D/6727.html' title='Multiple defined in 2 places.'>appendstring</a>(realbuffer);
<a name='L1037'>                <b>break</b>;
<a name='L1038'>            <b>case</b> 's':
<a name='L1039'>            <font color='red'>{</font>
<a name='L1040'>                <i><font color='green'>/* unused, since we already have the result */</font></i>
<a name='L1041'>                (<b>void</b>) va_arg(vargs, <b>char</b> *);
<a name='L1042'>                <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(s, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*callresult),
<a name='L1043'>                                <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(*callresult));
<a name='L1044'>                s += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(*callresult);
<a name='L1045'>                <i><font color='green'>/* We're done with the unicode()/repr() =&gt; forget it */</font></i>
<a name='L1046'>                Py_DECREF(*callresult);
<a name='L1047'>                <i><font color='green'>/* switch to next unicode()/repr() result */</font></i>
<a name='L1048'>                ++callresult;
<a name='L1049'>                <b>break</b>;
<a name='L1050'>            <font color='red'>}</font>
<a name='L1051'>            <b>case</b> 'U':
<a name='L1052'>            <font color='red'>{</font>
<a name='L1053'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = va_arg(vargs, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L1054'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(obj);
<a name='L1055'>                <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(s, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(obj), size);
<a name='L1056'>                s += size;
<a name='L1057'>                <b>break</b>;
<a name='L1058'>            <font color='red'>}</font>
<a name='L1059'>            <b>case</b> 'V':
<a name='L1060'>            <font color='red'>{</font>
<a name='L1061'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj = va_arg(vargs, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L1062'>                <b>const</b> <b>char</b> *str = va_arg(vargs, <b>const</b> <b>char</b> *);
<a name='L1063'>                <b>if</b> (obj) <font color='red'>{</font>
<a name='L1064'>                    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(obj);
<a name='L1065'>                    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(s, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(obj), size);
<a name='L1066'>                    s += size;
<a name='L1067'>                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1068'>                    <a href='../D/6727.html' title='Multiple defined in 2 places.'>appendstring</a>(str);
<a name='L1069'>                <font color='red'>}</font>
<a name='L1070'>                <b>break</b>;
<a name='L1071'>            <font color='red'>}</font>
<a name='L1072'>            <b>case</b> 'S':
<a name='L1073'>            <b>case</b> 'R':
<a name='L1074'>            <b>case</b> 'A':
<a name='L1075'>            <font color='red'>{</font>
<a name='L1076'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *ucopy;
<a name='L1077'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> usize;
<a name='L1078'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> upos;
<a name='L1079'>                <i><font color='green'>/* unused, since we already have the result */</font></i>
<a name='L1080'>                (<b>void</b>) va_arg(vargs, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *);
<a name='L1081'>                ucopy = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*callresult);
<a name='L1082'>                usize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(*callresult);
<a name='L1083'>                <b>for</b> (upos = 0; upos&lt;usize;)
<a name='L1084'>                    *s++ = ucopy[upos++];
<a name='L1085'>                <i><font color='green'>/* We're done with the unicode()/repr() =&gt; forget it */</font></i>
<a name='L1086'>                Py_DECREF(*callresult);
<a name='L1087'>                <i><font color='green'>/* switch to next unicode()/repr() result */</font></i>
<a name='L1088'>                ++callresult;
<a name='L1089'>                <b>break</b>;
<a name='L1090'>            <font color='red'>}</font>
<a name='L1091'>            <b>case</b> 'p':
<a name='L1092'>                sprintf(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "%p", va_arg(vargs, <b>void</b>*));
<a name='L1093'>                <i><font color='green'>/* %p is ill-defined:  ensure leading 0x. */</font></i>
<a name='L1094'>                <b>if</b> (<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[1] == 'X')
<a name='L1095'>                    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[1] = 'x';
<a name='L1096'>                <b>else</b> <b>if</b> (<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[1] != 'x') <font color='red'>{</font>
<a name='L1097'>                    <a href='../S/2664.html#L75' title='Defined at 75 in Modules/expat/xmlparse.c.'>memmove</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>+2, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, strlen(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>)+1);
<a name='L1098'>                    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[0] = '0';
<a name='L1099'>                    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[1] = 'x';
<a name='L1100'>                <font color='red'>}</font>
<a name='L1101'>                <a href='../D/6727.html' title='Multiple defined in 2 places.'>appendstring</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L1102'>                <b>break</b>;
<a name='L1103'>            <b>case</b> '%':
<a name='L1104'>                *s++ = '%';
<a name='L1105'>                <b>break</b>;
<a name='L1106'>            <b>default</b>:
<a name='L1107'>                <a href='../D/6727.html' title='Multiple defined in 2 places.'>appendstring</a>(p);
<a name='L1108'>                <b>goto</b> end;
<a name='L1109'>            <font color='red'>}</font>
<a name='L1110'>        <font color='red'>}</font>
<a name='L1111'>        <b>else</b>
<a name='L1112'>            *s++ = *f;
<a name='L1113'>    <font color='red'>}</font>
<a name='L1114'>
<a name='L1115'>  end:
<a name='L1116'>    <b>if</b> (callresults)
<a name='L1117'>        <a href='../D/3616.html' title='Multiple defined in 3 places.'>PyObject_Free</a>(callresults);
<a name='L1118'>    <b>if</b> (abuffer)
<a name='L1119'>        <a href='../D/3616.html' title='Multiple defined in 3 places.'>PyObject_Free</a>(abuffer);
<a name='L1120'>    <a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(&amp;<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>, s - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>));
<a name='L1121'>    <b>return</b> <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>;
<a name='L1122'>  fail:
<a name='L1123'>    <b>if</b> (callresults) <font color='red'>{</font>
<a name='L1124'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **callresult2 = callresults;
<a name='L1125'>        <b>while</b> (callresult2 &lt; callresult) <font color='red'>{</font>
<a name='L1126'>            Py_DECREF(*callresult2);
<a name='L1127'>            ++callresult2;
<a name='L1128'>        <font color='red'>}</font>
<a name='L1129'>        <a href='../D/3616.html' title='Multiple defined in 3 places.'>PyObject_Free</a>(callresults);
<a name='L1130'>    <font color='red'>}</font>
<a name='L1131'>    <b>if</b> (abuffer)
<a name='L1132'>        <a href='../D/3616.html' title='Multiple defined in 3 places.'>PyObject_Free</a>(abuffer);
<a name='L1133'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1134'><font color='red'>}</font>
<a name='L1135'>
<a name='L1136'><font color='darkred'>#undef</font> <a href='../R/5974.html' title='Multiple refered from 7 places.'>appendstring</a>
<a name='L1137'>
<a name='L1138'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1139'><a href='../R/3584.html' title='Multiple refered from 125 places.'>PyUnicode_FromFormat</a>(<b>const</b> <b>char</b> *format, ...)
<a name='L1140'><font color='red'>{</font>
<a name='L1141'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* ret;
<a name='L1142'>    va_list vargs;
<a name='L1143'>
<a name='L1144'><font color='darkred'>#ifdef</font> <a href='../D/1566.html' title='Multiple defined in 3 places.'>HAVE_STDARG_PROTOTYPES</a>
<a name='L1145'>    va_start(vargs, format);
<a name='L1146'><font color='darkred'>#else</font>
<a name='L1147'>    va_start(vargs);
<a name='L1148'><font color='darkred'>#endif</font>
<a name='L1149'>    ret = <a href='../D/4009.html' title='Multiple defined in 3 places.'>PyUnicode_FromFormatV</a>(format, vargs);
<a name='L1150'>    va_end(vargs);
<a name='L1151'>    <b>return</b> ret;
<a name='L1152'><font color='red'>}</font>
<a name='L1153'>
<a name='L1154'><i><font color='green'>/* Helper function for PyUnicode_AsWideChar() and PyUnicode_AsWideCharString():</font></i>
<a name='L1155'><i><font color='green'>   convert a Unicode object to a wide character string.</font></i>
<a name='L1156'><i><font color='green'></font></i>
<a name='L1157'><i><font color='green'>   - If w is NULL: return the number of wide characters (including the nul</font></i>
<a name='L1158'><i><font color='green'>     character) required to convert the unicode object. Ignore size argument.</font></i>
<a name='L1159'><i><font color='green'></font></i>
<a name='L1160'><i><font color='green'>   - Otherwise: return the number of wide characters (excluding the nul</font></i>
<a name='L1161'><i><font color='green'>     character) written into w. Write at most size wide characters (including</font></i>
<a name='L1162'><i><font color='green'>     the nul character). */</font></i>
<a name='L1163'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L1164'><a href='../R/11064.html' title='Multiple refered from 4 places.'>unicode_aswidechar</a>(PyUnicodeObject *unicode,
<a name='L1165'>                   wchar_t *w,
<a name='L1166'>                   <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L1167'><font color='red'>{</font>
<a name='L1168'><font color='darkred'>#if</font> <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a> == <a href='../S/2906.html#L727' title='Defined at 727 in PC/pyconfig.h.'>SIZEOF_WCHAR_T</a>
<a name='L1169'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> res;
<a name='L1170'>    <b>if</b> (w != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1171'>        res = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode);
<a name='L1172'>        <b>if</b> (size &gt; res)
<a name='L1173'>            size = res + 1;
<a name='L1174'>        <b>else</b>
<a name='L1175'>            res = size;
<a name='L1176'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(w, unicode-&gt;str, size * <b>sizeof</b>(wchar_t));
<a name='L1177'>        <b>return</b> res;
<a name='L1178'>    <font color='red'>}</font>
<a name='L1179'>    <b>else</b>
<a name='L1180'>        <b>return</b> <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode) + 1;
<a name='L1181'><font color='darkred'>#elif</font> <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a> == 2 &amp;&amp; <a href='../S/2906.html#L727' title='Defined at 727 in PC/pyconfig.h.'>SIZEOF_WCHAR_T</a> == 4
<a name='L1182'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *u;
<a name='L1183'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *uend;
<a name='L1184'>    <b>const</b> wchar_t *worig, *wend;
<a name='L1185'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nchar;
<a name='L1186'>
<a name='L1187'>    u = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L1188'>    uend = u + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode);
<a name='L1189'>    <b>if</b> (w != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1190'>        worig = w;
<a name='L1191'>        wend = w + size;
<a name='L1192'>        <b>while</b> (u != uend &amp;&amp; w != wend) <font color='red'>{</font>
<a name='L1193'>            <b>if</b> (0xD800 &lt;= u[0] &amp;&amp; u[0] &lt;= 0xDBFF
<a name='L1194'>                &amp;&amp; 0xDC00 &lt;= u[1] &amp;&amp; u[1] &lt;= 0xDFFF)
<a name='L1195'>            <font color='red'>{</font>
<a name='L1196'>                *w = (((u[0] &amp; 0x3FF) &lt;&lt; 10) | (u[1] &amp; 0x3FF)) + 0x10000;
<a name='L1197'>                u += 2;
<a name='L1198'>            <font color='red'>}</font>
<a name='L1199'>            <b>else</b> <font color='red'>{</font>
<a name='L1200'>                *w = *u;
<a name='L1201'>                u++;
<a name='L1202'>            <font color='red'>}</font>
<a name='L1203'>            w++;
<a name='L1204'>        <font color='red'>}</font>
<a name='L1205'>        <b>if</b> (w != wend)
<a name='L1206'>            *w = L'\0';
<a name='L1207'>        <b>return</b> w - worig;
<a name='L1208'>    <font color='red'>}</font>
<a name='L1209'>    <b>else</b> <font color='red'>{</font>
<a name='L1210'>        nchar = 1; <i><font color='green'>/* nul character at the end */</font></i>
<a name='L1211'>        <b>while</b> (u != uend) <font color='red'>{</font>
<a name='L1212'>            <b>if</b> (0xD800 &lt;= u[0] &amp;&amp; u[0] &lt;= 0xDBFF
<a name='L1213'>                &amp;&amp; 0xDC00 &lt;= u[1] &amp;&amp; u[1] &lt;= 0xDFFF)
<a name='L1214'>                u += 2;
<a name='L1215'>            <b>else</b>
<a name='L1216'>                u++;
<a name='L1217'>            nchar++;
<a name='L1218'>        <font color='red'>}</font>
<a name='L1219'>    <font color='red'>}</font>
<a name='L1220'>    <b>return</b> nchar;
<a name='L1221'><font color='darkred'>#elif</font> <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a> == 4 &amp;&amp; <a href='../S/2906.html#L727' title='Defined at 727 in PC/pyconfig.h.'>SIZEOF_WCHAR_T</a> == 2
<a name='L1222'>    <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *u, *uend, ordinal;
<a name='L1223'>    <b>register</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1224'>    wchar_t *worig, *wend;
<a name='L1225'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nchar;
<a name='L1226'>
<a name='L1227'>    u = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L1228'>    uend = u + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(u);
<a name='L1229'>    <b>if</b> (w != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1230'>        worig = w;
<a name='L1231'>        wend = w + size;
<a name='L1232'>        <b>while</b> (u != uend &amp;&amp; w != wend) <font color='red'>{</font>
<a name='L1233'>            ordinal = *u;
<a name='L1234'>            <b>if</b> (ordinal &gt; 0xffff) <font color='red'>{</font>
<a name='L1235'>                ordinal -= 0x10000;
<a name='L1236'>                *w++ = 0xD800 | (ordinal &gt;&gt; 10);
<a name='L1237'>                *w++ = 0xDC00 | (ordinal &amp; 0x3FF);
<a name='L1238'>            <font color='red'>}</font>
<a name='L1239'>            <b>else</b>
<a name='L1240'>                *w++ = ordinal;
<a name='L1241'>            u++;
<a name='L1242'>        <font color='red'>}</font>
<a name='L1243'>        <b>if</b> (w != wend)
<a name='L1244'>            *w = 0;
<a name='L1245'>        <b>return</b> w - worig;
<a name='L1246'>    <font color='red'>}</font>
<a name='L1247'>    <b>else</b> <font color='red'>{</font>
<a name='L1248'>        nchar = 1; <i><font color='green'>/* nul character */</font></i>
<a name='L1249'>        <b>while</b> (u != uend) <font color='red'>{</font>
<a name='L1250'>            <b>if</b> (*u &gt; 0xffff)
<a name='L1251'>                nchar += 2;
<a name='L1252'>            <b>else</b>
<a name='L1253'>                nchar++;
<a name='L1254'>            u++;
<a name='L1255'>        <font color='red'>}</font>
<a name='L1256'>        <b>return</b> nchar;
<a name='L1257'>    <font color='red'>}</font>
<a name='L1258'><font color='darkred'>#else</font>
<a name='L1259'><font color='darkred'>#  error</font> "unsupported wchar_t and Py_UNICODE sizes, see issue #8670"
<a name='L1260'><font color='darkred'>#endif</font>
<a name='L1261'><font color='red'>}</font>
<a name='L1262'>
<a name='L1263'><a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L1264'><a href='../R/3544.html' title='Multiple refered from 5 places.'>PyUnicode_AsWideChar</a>(PyObject *unicode,
<a name='L1265'>                     wchar_t *w,
<a name='L1266'>                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L1267'><font color='red'>{</font>
<a name='L1268'>    <b>if</b> (unicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1269'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1270'>        <b>return</b> -1;
<a name='L1271'>    <font color='red'>}</font>
<a name='L1272'>    <b>return</b> <a href='../D/11949.html' title='Multiple defined in 2 places.'>unicode_aswidechar</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>*)unicode, w, size);
<a name='L1273'><font color='red'>}</font>
<a name='L1274'>
<a name='L1275'>wchar_t*
<a name='L1276'><a href='../R/3545.html' title='Multiple refered from 8 places.'>PyUnicode_AsWideCharString</a>(PyObject *unicode,
<a name='L1277'>                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *size)
<a name='L1278'><font color='red'>{</font>
<a name='L1279'>    wchar_t* <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L1280'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> buflen;
<a name='L1281'>
<a name='L1282'>    <b>if</b> (unicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1283'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1284'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1285'>    <font color='red'>}</font>
<a name='L1286'>
<a name='L1287'>    buflen = <a href='../D/11949.html' title='Multiple defined in 2 places.'>unicode_aswidechar</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)unicode, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L1288'>    <b>if</b> (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / <b>sizeof</b>(wchar_t) &lt; buflen) <font color='red'>{</font>
<a name='L1289'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1290'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1291'>    <font color='red'>}</font>
<a name='L1292'>
<a name='L1293'>    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = PyMem_MALLOC(buflen * <b>sizeof</b>(wchar_t));
<a name='L1294'>    <b>if</b> (<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1295'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1296'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1297'>    <font color='red'>}</font>
<a name='L1298'>    buflen = <a href='../D/11949.html' title='Multiple defined in 2 places.'>unicode_aswidechar</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)unicode, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, buflen);
<a name='L1299'>    <b>if</b> (size != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1300'>        *size = buflen;
<a name='L1301'>    <b>return</b> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L1302'><font color='red'>}</font>
<a name='L1303'>
<a name='L1304'><font color='darkred'>#endif</font>
<a name='L1305'>
<a name='L1306'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3587.html' title='Multiple refered from 2 places.'>PyUnicode_FromOrdinal</a>(<b>int</b> ordinal)
<a name='L1307'><font color='red'>{</font>
<a name='L1308'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> s[2];
<a name='L1309'>
<a name='L1310'>    <b>if</b> (ordinal &lt; 0 || ordinal &gt; 0x10ffff) <font color='red'>{</font>
<a name='L1311'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1312'>                        "chr() arg not in range(0x110000)");
<a name='L1313'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1314'>    <font color='red'>}</font>
<a name='L1315'>
<a name='L1316'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L1317'>    <b>if</b> (ordinal &gt; 0xffff) <font color='red'>{</font>
<a name='L1318'>        ordinal -= 0x10000;
<a name='L1319'>        s[0] = 0xD800 | (ordinal &gt;&gt; 10);
<a name='L1320'>        s[1] = 0xDC00 | (ordinal &amp; 0x3FF);
<a name='L1321'>        <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(s, 2);
<a name='L1322'>    <font color='red'>}</font>
<a name='L1323'><font color='darkred'>#endif</font>
<a name='L1324'>
<a name='L1325'>    s[0] = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)ordinal;
<a name='L1326'>    <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(s, 1);
<a name='L1327'><font color='red'>}</font>
<a name='L1328'>
<a name='L1329'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3586.html' title='Multiple refered from 50 places.'>PyUnicode_FromObject</a>(<b>register</b> PyObject *obj)
<a name='L1330'><font color='red'>{</font>
<a name='L1331'>    <i><font color='green'>/* XXX Perhaps we should make this API an alias of</font></i>
<a name='L1332'><i><font color='green'>       PyObject_Str() instead ?! */</font></i>
<a name='L1333'>    <b>if</b> (PyUnicode_CheckExact(obj)) <font color='red'>{</font>
<a name='L1334'>        Py_INCREF(obj);
<a name='L1335'>        <b>return</b> obj;
<a name='L1336'>    <font color='red'>}</font>
<a name='L1337'>    <b>if</b> (PyUnicode_Check(obj)) <font color='red'>{</font>
<a name='L1338'>        <i><font color='green'>/* For a Unicode subtype that's not a Unicode object,</font></i>
<a name='L1339'><i><font color='green'>           return a true Unicode object with the same data. */</font></i>
<a name='L1340'>        <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(obj),
<a name='L1341'>                                     <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(obj));
<a name='L1342'>    <font color='red'>}</font>
<a name='L1343'>    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1344'>                 "Can't convert '%.100s' object to str implicitly",
<a name='L1345'>                 <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(obj)-&gt;tp_name);
<a name='L1346'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1347'><font color='red'>}</font>
<a name='L1348'>
<a name='L1349'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3583.html' title='Multiple refered from 7 places.'>PyUnicode_FromEncodedObject</a>(<b>register</b> PyObject *obj,
<a name='L1350'>                                      <b>const</b> <b>char</b> *encoding,
<a name='L1351'>                                      <b>const</b> <b>char</b> *errors)
<a name='L1352'><font color='red'>{</font>
<a name='L1353'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L1354'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L1355'>
<a name='L1356'>    <b>if</b> (obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1357'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1358'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1359'>    <font color='red'>}</font>
<a name='L1360'>
<a name='L1361'>    <i><font color='green'>/* Decoding bytes objects is the most common case and should be fast */</font></i>
<a name='L1362'>    <b>if</b> (PyBytes_Check(obj)) <font color='red'>{</font>
<a name='L1363'>        <b>if</b> (PyBytes_GET_SIZE(obj) == 0) <font color='red'>{</font>
<a name='L1364'>            Py_INCREF(unicode_empty);
<a name='L1365'>            v = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) unicode_empty;
<a name='L1366'>        <font color='red'>}</font>
<a name='L1367'>        <b>else</b> <font color='red'>{</font>
<a name='L1368'>            v = <a href='../D/3972.html' title='Multiple defined in 3 places.'>PyUnicode_Decode</a>(
<a name='L1369'>                    PyBytes_AS_STRING(obj), PyBytes_GET_SIZE(obj),
<a name='L1370'>                    <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1371'>        <font color='red'>}</font>
<a name='L1372'>        <b>return</b> v;
<a name='L1373'>    <font color='red'>}</font>
<a name='L1374'>
<a name='L1375'>    <b>if</b> (PyUnicode_Check(obj)) <font color='red'>{</font>
<a name='L1376'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1377'>                        "decoding str is not supported");
<a name='L1378'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1379'>    <font color='red'>}</font>
<a name='L1380'>
<a name='L1381'>    <i><font color='green'>/* Retrieve a bytes buffer view through the PEP 3118 buffer interface */</font></i>
<a name='L1382'>    <b>if</b> (<a href='../S/2775.html#L330' title='Defined at 330 in Objects/abstract.c.'>PyObject_GetBuffer</a>(obj, &amp;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, <a href='../S/544.html#L169' title='Defined at 169 in Include/object.h.'>PyBUF_SIMPLE</a>) &lt; 0) <font color='red'>{</font>
<a name='L1383'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1384'>                     "coercing to str: need bytes, bytearray "
<a name='L1385'>                     "or buffer-like object, %.80s found",
<a name='L1386'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(obj)-&gt;tp_name);
<a name='L1387'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1388'>    <font color='red'>}</font>
<a name='L1389'>
<a name='L1390'>    <b>if</b> (<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.len == 0) <font color='red'>{</font>
<a name='L1391'>        Py_INCREF(unicode_empty);
<a name='L1392'>        v = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) unicode_empty;
<a name='L1393'>    <font color='red'>}</font>
<a name='L1394'>    <b>else</b>
<a name='L1395'>        v = <a href='../D/3972.html' title='Multiple defined in 3 places.'>PyUnicode_Decode</a>((<b>char</b>*) <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.buf, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>.len, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1396'>
<a name='L1397'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L1398'>    <b>return</b> v;
<a name='L1399'><font color='red'>}</font>
<a name='L1400'>
<a name='L1401'><i><font color='green'>/* Convert encoding to lower case and replace '_' with '-' in order to</font></i>
<a name='L1402'><i><font color='green'>   catch e.g. UTF_8. Return 0 on error (encoding is longer than lower_len-1),</font></i>
<a name='L1403'><i><font color='green'>   1 on success. */</font></i>
<a name='L1404'><b>static</b> <b>int</b>
<a name='L1405'><a href='../R/9271.html' title='Multiple refered from 2 places.'>normalize_encoding</a>(<b>const</b> <b>char</b> *encoding,
<a name='L1406'>                   <b>char</b> *lower,
<a name='L1407'>                   <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> lower_len)
<a name='L1408'><font color='red'>{</font>
<a name='L1409'>    <b>const</b> <b>char</b> *e;
<a name='L1410'>    <b>char</b> *l;
<a name='L1411'>    <b>char</b> *l_end;
<a name='L1412'>
<a name='L1413'>    e = <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>;
<a name='L1414'>    l = lower;
<a name='L1415'>    l_end = &amp;lower[lower_len - 1];
<a name='L1416'>    <b>while</b> (*e) <font color='red'>{</font>
<a name='L1417'>        <b>if</b> (l == l_end)
<a name='L1418'>            <b>return</b> 0;
<a name='L1419'>        <b>if</b> (<a href='../S/556.html#L19' title='Defined at 19 in Include/pyctype.h.'>Py_ISUPPER</a>(*e)) <font color='red'>{</font>
<a name='L1420'>            *l++ = <a href='../S/556.html#L29' title='Defined at 29 in Include/pyctype.h.'>Py_TOLOWER</a>(*e++);
<a name='L1421'>        <font color='red'>}</font>
<a name='L1422'>        <b>else</b> <b>if</b> (*e == '_') <font color='red'>{</font>
<a name='L1423'>            *l++ = '-';
<a name='L1424'>            e++;
<a name='L1425'>        <font color='red'>}</font>
<a name='L1426'>        <b>else</b> <font color='red'>{</font>
<a name='L1427'>            *l++ = *e++;
<a name='L1428'>        <font color='red'>}</font>
<a name='L1429'>    <font color='red'>}</font>
<a name='L1430'>    *l = '\0';
<a name='L1431'>    <b>return</b> 1;
<a name='L1432'><font color='red'>}</font>
<a name='L1433'>
<a name='L1434'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3552.html' title='Multiple refered from 16 places.'>PyUnicode_Decode</a>(<b>const</b> <b>char</b> *s,
<a name='L1435'>                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L1436'>                           <b>const</b> <b>char</b> *encoding,
<a name='L1437'>                           <b>const</b> <b>char</b> *errors)
<a name='L1438'><font color='red'>{</font>
<a name='L1439'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *unicode;
<a name='L1440'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> info;
<a name='L1441'>    <b>char</b> lower[11];  <i><font color='green'>/* Enough for any encoding shortcut */</font></i>
<a name='L1442'>
<a name='L1443'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1444'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4018.html' title='Multiple defined in 3 places.'>PyUnicode_GetDefaultEncoding</a>();
<a name='L1445'>
<a name='L1446'>    <i><font color='green'>/* Shortcuts for common default encodings */</font></i>
<a name='L1447'>    <b>if</b> (<a href='../S/2828.html#L1405' title='Defined at 1405 in Objects/unicodeobject.c.'>normalize_encoding</a>(<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, lower, <b>sizeof</b>(lower))) <font color='red'>{</font>
<a name='L1448'>        <b>if</b> (strcmp(lower, "utf-8") == 0)
<a name='L1449'>            <b>return</b> <a href='../D/3987.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF8</a>(s, size, errors);
<a name='L1450'>        <b>else</b> <b>if</b> ((strcmp(lower, "latin-1") == 0) ||
<a name='L1451'>                 (strcmp(lower, "iso-8859-1") == 0))
<a name='L1452'>            <b>return</b> <a href='../D/3977.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeLatin1</a>(s, size, errors);
<a name='L1453'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>) &amp;&amp; <b>defined</b>(<a href='../S/587.html#L92' title='Defined at 92 in Include/unicodeobject.h.'>HAVE_USABLE_WCHAR_T</a>)
<a name='L1454'>        <b>else</b> <b>if</b> (strcmp(lower, "mbcs") == 0)
<a name='L1455'>            <b>return</b> <a href='../S/2828.html#L4990' title='Defined at 4990 in Objects/unicodeobject.c.'>PyUnicode_DecodeMBCS</a>(s, size, errors);
<a name='L1456'><font color='darkred'>#endif</font>
<a name='L1457'>        <b>else</b> <b>if</b> (strcmp(lower, "ascii") == 0)
<a name='L1458'>            <b>return</b> <a href='../D/3973.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeASCII</a>(s, size, errors);
<a name='L1459'>        <b>else</b> <b>if</b> (strcmp(lower, "utf-16") == 0)
<a name='L1460'>            <b>return</b> <a href='../D/3981.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF16</a>(s, size, errors, 0);
<a name='L1461'>        <b>else</b> <b>if</b> (strcmp(lower, "utf-32") == 0)
<a name='L1462'>            <b>return</b> <a href='../D/3983.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF32</a>(s, size, errors, 0);
<a name='L1463'>    <font color='red'>}</font>
<a name='L1464'>
<a name='L1465'>    <i><font color='green'>/* Decode via the codec registry */</font></i>
<a name='L1466'>    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1467'>    <b>if</b> (<a href='../S/2775.html#L650' title='Defined at 650 in Objects/abstract.c.'>PyBuffer_FillInfo</a>(&amp;info, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, (<b>void</b> *)s, size, 1, <a href='../S/544.html#L191' title='Defined at 191 in Include/object.h.'>PyBUF_FULL_RO</a>) &lt; 0)
<a name='L1468'>        <b>goto</b> onError;
<a name='L1469'>    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = <a href='../S/2800.html#L74' title='Defined at 74 in Objects/memoryobject.c.'>PyMemoryView_FromBuffer</a>(&amp;info);
<a name='L1470'>    <b>if</b> (<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1471'>        <b>goto</b> onError;
<a name='L1472'>    unicode = <a href='../S/3093.html#L385' title='Defined at 385 in Python/codecs.c.'>PyCodec_Decode</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1473'>    <b>if</b> (unicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1474'>        <b>goto</b> onError;
<a name='L1475'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1476'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1477'>                     "decoder did not return a str object (type=%.400s)",
<a name='L1478'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(unicode)-&gt;tp_name);
<a name='L1479'>        Py_DECREF(unicode);
<a name='L1480'>        <b>goto</b> onError;
<a name='L1481'>    <font color='red'>}</font>
<a name='L1482'>    Py_DECREF(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L1483'>    <b>return</b> unicode;
<a name='L1484'>
<a name='L1485'>  onError:
<a name='L1486'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>);
<a name='L1487'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1488'><font color='red'>}</font>
<a name='L1489'>
<a name='L1490'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsDecodedObject(PyObject *unicode,
<a name='L1491'>                                    <b>const</b> <b>char</b> *encoding,
<a name='L1492'>                                    <b>const</b> <b>char</b> *errors)
<a name='L1493'><font color='red'>{</font>
<a name='L1494'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L1495'>
<a name='L1496'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1497'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L1498'>        <b>goto</b> onError;
<a name='L1499'>    <font color='red'>}</font>
<a name='L1500'>
<a name='L1501'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1502'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4018.html' title='Multiple defined in 3 places.'>PyUnicode_GetDefaultEncoding</a>();
<a name='L1503'>
<a name='L1504'>    <i><font color='green'>/* Decode via the codec registry */</font></i>
<a name='L1505'>    v = <a href='../S/3093.html#L385' title='Defined at 385 in Python/codecs.c.'>PyCodec_Decode</a>(unicode, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1506'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1507'>        <b>goto</b> onError;
<a name='L1508'>    <b>return</b> v;
<a name='L1509'>
<a name='L1510'>  onError:
<a name='L1511'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1512'><font color='red'>}</font>
<a name='L1513'>
<a name='L1514'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsDecodedUnicode(PyObject *unicode,
<a name='L1515'>                                     <b>const</b> <b>char</b> *encoding,
<a name='L1516'>                                     <b>const</b> <b>char</b> *errors)
<a name='L1517'><font color='red'>{</font>
<a name='L1518'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L1519'>
<a name='L1520'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1521'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L1522'>        <b>goto</b> onError;
<a name='L1523'>    <font color='red'>}</font>
<a name='L1524'>
<a name='L1525'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1526'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4018.html' title='Multiple defined in 3 places.'>PyUnicode_GetDefaultEncoding</a>();
<a name='L1527'>
<a name='L1528'>    <i><font color='green'>/* Decode via the codec registry */</font></i>
<a name='L1529'>    v = <a href='../S/3093.html#L385' title='Defined at 385 in Python/codecs.c.'>PyCodec_Decode</a>(unicode, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1530'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1531'>        <b>goto</b> onError;
<a name='L1532'>    <b>if</b> (!PyUnicode_Check(v)) <font color='red'>{</font>
<a name='L1533'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1534'>                     "decoder did not return a str object (type=%.400s)",
<a name='L1535'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(v)-&gt;tp_name);
<a name='L1536'>        Py_DECREF(v);
<a name='L1537'>        <b>goto</b> onError;
<a name='L1538'>    <font color='red'>}</font>
<a name='L1539'>    <b>return</b> v;
<a name='L1540'>
<a name='L1541'>  onError:
<a name='L1542'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1543'><font color='red'>}</font>
<a name='L1544'>
<a name='L1545'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_Encode(<b>const</b> Py_UNICODE *s,
<a name='L1546'>                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L1547'>                           <b>const</b> <b>char</b> *encoding,
<a name='L1548'>                           <b>const</b> <b>char</b> *errors)
<a name='L1549'><font color='red'>{</font>
<a name='L1550'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v, *unicode;
<a name='L1551'>
<a name='L1552'>    unicode = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(s, size);
<a name='L1553'>    <b>if</b> (unicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1554'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1555'>    v = <a href='../D/3952.html' title='Multiple defined in 3 places.'>PyUnicode_AsEncodedString</a>(unicode, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1556'>    Py_DECREF(unicode);
<a name='L1557'>    <b>return</b> v;
<a name='L1558'><font color='red'>}</font>
<a name='L1559'>
<a name='L1560'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsEncodedObject(PyObject *unicode,
<a name='L1561'>                                    <b>const</b> <b>char</b> *encoding,
<a name='L1562'>                                    <b>const</b> <b>char</b> *errors)
<a name='L1563'><font color='red'>{</font>
<a name='L1564'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L1565'>
<a name='L1566'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1567'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L1568'>        <b>goto</b> onError;
<a name='L1569'>    <font color='red'>}</font>
<a name='L1570'>
<a name='L1571'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1572'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4018.html' title='Multiple defined in 3 places.'>PyUnicode_GetDefaultEncoding</a>();
<a name='L1573'>
<a name='L1574'>    <i><font color='green'>/* Encode via the codec registry */</font></i>
<a name='L1575'>    v = <a href='../S/3093.html#L338' title='Defined at 338 in Python/codecs.c.'>PyCodec_Encode</a>(unicode, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1576'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1577'>        <b>goto</b> onError;
<a name='L1578'>    <b>return</b> v;
<a name='L1579'>
<a name='L1580'>  onError:
<a name='L1581'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1582'><font color='red'>}</font>
<a name='L1583'>
<a name='L1584'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1585'><a href='../R/3571.html' title='Multiple refered from 18 places.'>PyUnicode_EncodeFSDefault</a>(PyObject *unicode)
<a name='L1586'><font color='red'>{</font>
<a name='L1587'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>) &amp;&amp; <b>defined</b>(<a href='../S/587.html#L92' title='Defined at 92 in Include/unicodeobject.h.'>HAVE_USABLE_WCHAR_T</a>)
<a name='L1588'>    <b>return</b> <a href='../S/2828.html#L5077' title='Defined at 5077 in Objects/unicodeobject.c.'>PyUnicode_EncodeMBCS</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L1589'>                                <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1590'>                                <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1591'><font color='darkred'>#elif</font> <b>defined</b>(__APPLE__)
<a name='L1592'>    <b>return</b> <a href='../D/4001.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF8</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L1593'>                                <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1594'>                                "surrogateescape");
<a name='L1595'><font color='darkred'>#else</font>
<a name='L1596'>    <b>if</b> (Py_FileSystemDefaultEncoding) <font color='red'>{</font>
<a name='L1597'>        <b>return</b> <a href='../D/3952.html' title='Multiple defined in 3 places.'>PyUnicode_AsEncodedString</a>(unicode,
<a name='L1598'>                                         Py_FileSystemDefaultEncoding,
<a name='L1599'>                                         "surrogateescape");
<a name='L1600'>    <font color='red'>}</font>
<a name='L1601'>    <b>else</b> <font color='red'>{</font>
<a name='L1602'>        <i><font color='green'>/* locale encoding with surrogateescape */</font></i>
<a name='L1603'>        wchar_t *wchar;
<a name='L1604'>        <b>char</b> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L1605'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *bytes_obj;
<a name='L1606'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> error_pos;
<a name='L1607'>
<a name='L1608'>        wchar = <a href='../D/3964.html' title='Multiple defined in 3 places.'>PyUnicode_AsWideCharString</a>(unicode, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1609'>        <b>if</b> (wchar == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1610'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1611'>        <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../S/3107.html#L145' title='Defined at 145 in Python/fileutils.c.'>_Py_wchar2char</a>(wchar, &amp;error_pos);
<a name='L1612'>        <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1613'>            <b>if</b> (error_pos != (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)-1) <font color='red'>{</font>
<a name='L1614'>                <b>char</b> *errmsg = strerror(errno);
<a name='L1615'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1616'>                <b>if</b> (errmsg == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1617'>                    errmsg = "Py_wchar2char() failed";
<a name='L1618'>                <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(&amp;exc,
<a name='L1619'>                    "filesystemencoding",
<a name='L1620'>                    <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1621'>                    error_pos, error_pos+1,
<a name='L1622'>                    errmsg);
<a name='L1623'>                <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L1624'>            <font color='red'>}</font>
<a name='L1625'>            <b>else</b>
<a name='L1626'>                <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1627'>            <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(wchar);
<a name='L1628'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1629'>        <font color='red'>}</font>
<a name='L1630'>        <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(wchar);
<a name='L1631'>
<a name='L1632'>        bytes_obj = <a href='../S/2779.html#L122' title='Defined at 122 in Objects/bytesobject.c.'>PyBytes_FromString</a>(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L1633'>        <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L1634'>        <b>return</b> bytes_obj;
<a name='L1635'>    <font color='red'>}</font>
<a name='L1636'><font color='darkred'>#endif</font>
<a name='L1637'><font color='red'>}</font>
<a name='L1638'>
<a name='L1639'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3541.html' title='Multiple refered from 12 places.'>PyUnicode_AsEncodedString</a>(PyObject *unicode,
<a name='L1640'>                                    <b>const</b> <b>char</b> *encoding,
<a name='L1641'>                                    <b>const</b> <b>char</b> *errors)
<a name='L1642'><font color='red'>{</font>
<a name='L1643'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L1644'>    <b>char</b> lower[11];  <i><font color='green'>/* Enough for any encoding shortcut */</font></i>
<a name='L1645'>
<a name='L1646'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1647'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L1648'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1649'>    <font color='red'>}</font>
<a name='L1650'>
<a name='L1651'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1652'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4018.html' title='Multiple defined in 3 places.'>PyUnicode_GetDefaultEncoding</a>();
<a name='L1653'>
<a name='L1654'>    <i><font color='green'>/* Shortcuts for common default encodings */</font></i>
<a name='L1655'>    <b>if</b> (<a href='../S/2828.html#L1405' title='Defined at 1405 in Objects/unicodeobject.c.'>normalize_encoding</a>(<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, lower, <b>sizeof</b>(lower))) <font color='red'>{</font>
<a name='L1656'>        <b>if</b> (strcmp(lower, "utf-8") == 0)
<a name='L1657'>            <b>return</b> <a href='../D/4001.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF8</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L1658'>                                        <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1659'>                                        errors);
<a name='L1660'>        <b>else</b> <b>if</b> ((strcmp(lower, "latin-1") == 0) ||
<a name='L1661'>                 (strcmp(lower, "iso-8859-1") == 0))
<a name='L1662'>            <b>return</b> <a href='../D/3995.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeLatin1</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L1663'>                                          <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1664'>                                          errors);
<a name='L1665'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>) &amp;&amp; <b>defined</b>(<a href='../S/587.html#L92' title='Defined at 92 in Include/unicodeobject.h.'>HAVE_USABLE_WCHAR_T</a>)
<a name='L1666'>        <b>else</b> <b>if</b> (strcmp(lower, "mbcs") == 0)
<a name='L1667'>            <b>return</b> <a href='../S/2828.html#L5077' title='Defined at 5077 in Objects/unicodeobject.c.'>PyUnicode_EncodeMBCS</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L1668'>                                        <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1669'>                                        errors);
<a name='L1670'><font color='darkred'>#endif</font>
<a name='L1671'>        <b>else</b> <b>if</b> (strcmp(lower, "ascii") == 0)
<a name='L1672'>            <b>return</b> <a href='../D/3991.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeASCII</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L1673'>                                         <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1674'>                                         errors);
<a name='L1675'>    <font color='red'>}</font>
<a name='L1676'>    <i><font color='green'>/* During bootstrap, we may need to find the encodings</font></i>
<a name='L1677'><i><font color='green'>       package, to load the file system encoding, and require the</font></i>
<a name='L1678'><i><font color='green'>       file system encoding in order to load the encodings</font></i>
<a name='L1679'><i><font color='green'>       package.</font></i>
<a name='L1680'><i><font color='green'></font></i>
<a name='L1681'><i><font color='green'>       Break out of this dependency by assuming that the path to</font></i>
<a name='L1682'><i><font color='green'>       the encodings module is ASCII-only.  XXX could try wcstombs</font></i>
<a name='L1683'><i><font color='green'>       instead, if the file system encoding is the locale's</font></i>
<a name='L1684'><i><font color='green'>       encoding. */</font></i>
<a name='L1685'>    <b>if</b> (Py_FileSystemDefaultEncoding &amp;&amp;
<a name='L1686'>             strcmp(<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, Py_FileSystemDefaultEncoding) == 0 &amp;&amp;
<a name='L1687'>             !<a href='../S/509.html#L90' title='Defined at 90 in Include/ceval.h.'>PyThreadState_GET</a>()-&gt;interp-&gt;codecs_initialized)
<a name='L1688'>        <b>return</b> <a href='../D/3991.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeASCII</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L1689'>                                     <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1690'>                                     errors);
<a name='L1691'>
<a name='L1692'>    <i><font color='green'>/* Encode via the codec registry */</font></i>
<a name='L1693'>    v = <a href='../S/3093.html#L338' title='Defined at 338 in Python/codecs.c.'>PyCodec_Encode</a>(unicode, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1694'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1695'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1696'>
<a name='L1697'>    <i><font color='green'>/* The normal path */</font></i>
<a name='L1698'>    <b>if</b> (PyBytes_Check(v))
<a name='L1699'>        <b>return</b> v;
<a name='L1700'>
<a name='L1701'>    <i><font color='green'>/* If the codec returns a buffer, raise a warning and convert to bytes */</font></i>
<a name='L1702'>    <b>if</b> (PyByteArray_Check(v)) <font color='red'>{</font>
<a name='L1703'>        <b>int</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1704'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L1705'>
<a name='L1706'>        <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../S/3087.html#L732' title='Defined at 732 in Python/_warnings.c.'>PyErr_WarnFormat</a>(PyExc_RuntimeWarning, 1,
<a name='L1707'>            "encoder %s returned bytearray instead of bytes",
<a name='L1708'>            <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>);
<a name='L1709'>        <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>) <font color='red'>{</font>
<a name='L1710'>            Py_DECREF(v);
<a name='L1711'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1712'>        <font color='red'>}</font>
<a name='L1713'>
<a name='L1714'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(PyByteArray_AS_STRING(v), <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v));
<a name='L1715'>        Py_DECREF(v);
<a name='L1716'>        <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L1717'>    <font color='red'>}</font>
<a name='L1718'>
<a name='L1719'>    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1720'>                 "encoder did not return a bytes object (type=%.400s)",
<a name='L1721'>                 <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(v)-&gt;tp_name);
<a name='L1722'>    Py_DECREF(v);
<a name='L1723'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1724'><font color='red'>}</font>
<a name='L1725'>
<a name='L1726'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsEncodedUnicode(PyObject *unicode,
<a name='L1727'>                                     <b>const</b> <b>char</b> *encoding,
<a name='L1728'>                                     <b>const</b> <b>char</b> *errors)
<a name='L1729'><font color='red'>{</font>
<a name='L1730'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L1731'>
<a name='L1732'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1733'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L1734'>        <b>goto</b> onError;
<a name='L1735'>    <font color='red'>}</font>
<a name='L1736'>
<a name='L1737'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1738'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4018.html' title='Multiple defined in 3 places.'>PyUnicode_GetDefaultEncoding</a>();
<a name='L1739'>
<a name='L1740'>    <i><font color='green'>/* Encode via the codec registry */</font></i>
<a name='L1741'>    v = <a href='../S/3093.html#L338' title='Defined at 338 in Python/codecs.c.'>PyCodec_Encode</a>(unicode, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L1742'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1743'>        <b>goto</b> onError;
<a name='L1744'>    <b>if</b> (!PyUnicode_Check(v)) <font color='red'>{</font>
<a name='L1745'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1746'>                     "encoder did not return an str object (type=%.400s)",
<a name='L1747'>                     <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(v)-&gt;tp_name);
<a name='L1748'>        Py_DECREF(v);
<a name='L1749'>        <b>goto</b> onError;
<a name='L1750'>    <font color='red'>}</font>
<a name='L1751'>    <b>return</b> v;
<a name='L1752'>
<a name='L1753'>  onError:
<a name='L1754'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1755'><font color='red'>}</font>
<a name='L1756'>
<a name='L1757'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/5505.html' title='Multiple refered from 7 places.'>_PyUnicode_AsDefaultEncodedString</a>(PyObject *unicode,
<a name='L1758'>                                            <b>const</b> <b>char</b> *errors)
<a name='L1759'><font color='red'>{</font>
<a name='L1760'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v = ((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)unicode)-&gt;defenc;
<a name='L1761'>    <b>if</b> (v)
<a name='L1762'>        <b>return</b> v;
<a name='L1763'>    <b>if</b> (errors != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1764'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("non-NULL encoding in _PyUnicode_AsDefaultEncodedString");
<a name='L1765'>    v = <a href='../D/4001.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF8</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L1766'>                             <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L1767'>                             <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1768'>    <b>if</b> (!v)
<a name='L1769'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1770'>    ((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)unicode)-&gt;defenc = v;
<a name='L1771'>    <b>return</b> v;
<a name='L1772'><font color='red'>}</font>
<a name='L1773'>
<a name='L1774'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L1775'><a href='../R/3555.html' title='Multiple refered from 29 places.'>PyUnicode_DecodeFSDefault</a>(<b>const</b> <b>char</b> *s) <font color='red'>{</font>
<a name='L1776'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size = (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)strlen(s);
<a name='L1777'>    <b>return</b> <a href='../D/3976.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeFSDefaultAndSize</a>(s, size);
<a name='L1778'><font color='red'>}</font>
<a name='L1779'>
<a name='L1780'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L1781'><a href='../R/3556.html' title='Multiple refered from 10 places.'>PyUnicode_DecodeFSDefaultAndSize</a>(<b>const</b> <b>char</b> *s, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L1782'><font color='red'>{</font>
<a name='L1783'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>) &amp;&amp; <b>defined</b>(<a href='../S/587.html#L92' title='Defined at 92 in Include/unicodeobject.h.'>HAVE_USABLE_WCHAR_T</a>)
<a name='L1784'>    <b>return</b> <a href='../S/2828.html#L4990' title='Defined at 4990 in Objects/unicodeobject.c.'>PyUnicode_DecodeMBCS</a>(s, size, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1785'><font color='darkred'>#elif</font> <b>defined</b>(__APPLE__)
<a name='L1786'>    <b>return</b> <a href='../D/3987.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF8</a>(s, size, "surrogateescape");
<a name='L1787'><font color='darkred'>#else</font>
<a name='L1788'>    <i><font color='green'>/* During the early bootstrapping process, Py_FileSystemDefaultEncoding</font></i>
<a name='L1789'><i><font color='green'>       can be undefined. If it is case, decode using UTF-8. The following assumes</font></i>
<a name='L1790'><i><font color='green'>       that Py_FileSystemDefaultEncoding is set to a built-in encoding during the</font></i>
<a name='L1791'><i><font color='green'>       bootstrapping process where the codecs aren't ready yet.</font></i>
<a name='L1792'><i><font color='green'>    */</font></i>
<a name='L1793'>    <b>if</b> (Py_FileSystemDefaultEncoding) <font color='red'>{</font>
<a name='L1794'>        <b>return</b> <a href='../D/3972.html' title='Multiple defined in 3 places.'>PyUnicode_Decode</a>(s, size,
<a name='L1795'>                                Py_FileSystemDefaultEncoding,
<a name='L1796'>                                "surrogateescape");
<a name='L1797'>    <font color='red'>}</font>
<a name='L1798'>    <b>else</b> <font color='red'>{</font>
<a name='L1799'>        <i><font color='green'>/* locale encoding with surrogateescape */</font></i>
<a name='L1800'>        wchar_t *wchar;
<a name='L1801'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *unicode;
<a name='L1802'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> len;
<a name='L1803'>
<a name='L1804'>        <b>if</b> (s[size] != '\0' || size != strlen(s)) <font color='red'>{</font>
<a name='L1805'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "embedded NUL character");
<a name='L1806'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1807'>        <font color='red'>}</font>
<a name='L1808'>
<a name='L1809'>        wchar = <a href='../S/3107.html#L24' title='Defined at 24 in Python/fileutils.c.'>_Py_char2wchar</a>(s, &amp;len);
<a name='L1810'>        <b>if</b> (wchar == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1811'>            <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1812'>
<a name='L1813'>        unicode = <a href='../D/4015.html' title='Multiple defined in 4 places.'>PyUnicode_FromWideChar</a>(wchar, len);
<a name='L1814'>        <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(wchar);
<a name='L1815'>        <b>return</b> unicode;
<a name='L1816'>    <font color='red'>}</font>
<a name='L1817'><font color='darkred'>#endif</font>
<a name='L1818'><font color='red'>}</font>
<a name='L1819'>
<a name='L1820'>
<a name='L1821'><b>int</b>
<a name='L1822'><a href='../R/3580.html' title='Multiple refered from 67 places.'>PyUnicode_FSConverter</a>(PyObject* arg, <b>void</b>* addr)
<a name='L1823'><font color='red'>{</font>
<a name='L1824'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *output = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1825'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L1826'>    <b>void</b> *data;
<a name='L1827'>    <b>if</b> (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1828'>        Py_DECREF(*(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>**)addr);
<a name='L1829'>        <b>return</b> 1;
<a name='L1830'>    <font color='red'>}</font>
<a name='L1831'>    <b>if</b> (PyBytes_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L1832'>        output = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1833'>        Py_INCREF(output);
<a name='L1834'>    <font color='red'>}</font>
<a name='L1835'>    <b>else</b> <font color='red'>{</font>
<a name='L1836'>        <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1837'>        <b>if</b> (!<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)
<a name='L1838'>            <b>return</b> 0;
<a name='L1839'>        output = <a href='../S/2828.html#L1585' title='Defined at 1585 in Objects/unicodeobject.c.'>PyUnicode_EncodeFSDefault</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1840'>        Py_DECREF(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1841'>        <b>if</b> (!output)
<a name='L1842'>            <b>return</b> 0;
<a name='L1843'>        <b>if</b> (!PyBytes_Check(output)) <font color='red'>{</font>
<a name='L1844'>            Py_DECREF(output);
<a name='L1845'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "encoder failed to return bytes");
<a name='L1846'>            <b>return</b> 0;
<a name='L1847'>        <font color='red'>}</font>
<a name='L1848'>    <font color='red'>}</font>
<a name='L1849'>    size = PyBytes_GET_SIZE(output);
<a name='L1850'>    data = PyBytes_AS_STRING(output);
<a name='L1851'>    <b>if</b> (size != strlen(data)) <font color='red'>{</font>
<a name='L1852'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "embedded NUL character");
<a name='L1853'>        Py_DECREF(output);
<a name='L1854'>        <b>return</b> 0;
<a name='L1855'>    <font color='red'>}</font>
<a name='L1856'>    *(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>**)addr = output;
<a name='L1857'>    <b>return</b> Py_CLEANUP_SUPPORTED;
<a name='L1858'><font color='red'>}</font>
<a name='L1859'>
<a name='L1860'>
<a name='L1861'><b>int</b>
<a name='L1862'><a href='../S/2729.html#L74' title='Refered from 74 in Modules/zipimport.c.'>PyUnicode_FSDecoder</a>(PyObject* arg, <b>void</b>* addr)
<a name='L1863'><font color='red'>{</font>
<a name='L1864'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *output = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1865'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L1866'>    <b>void</b> *data;
<a name='L1867'>    <b>if</b> (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1868'>        Py_DECREF(*(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>**)addr);
<a name='L1869'>        <b>return</b> 1;
<a name='L1870'>    <font color='red'>}</font>
<a name='L1871'>    <b>if</b> (PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L1872'>        output = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1873'>        Py_INCREF(output);
<a name='L1874'>    <font color='red'>}</font>
<a name='L1875'>    <b>else</b> <font color='red'>{</font>
<a name='L1876'>        <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> = <a href='../S/2779.html#L2560' title='Defined at 2560 in Objects/bytesobject.c.'>PyBytes_FromObject</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1877'>        <b>if</b> (!<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)
<a name='L1878'>            <b>return</b> 0;
<a name='L1879'>        output = <a href='../D/3976.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeFSDefaultAndSize</a>(PyBytes_AS_STRING(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>),
<a name='L1880'>                                                  PyBytes_GET_SIZE(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>));
<a name='L1881'>        Py_DECREF(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1882'>        <b>if</b> (!output)
<a name='L1883'>            <b>return</b> 0;
<a name='L1884'>        <b>if</b> (!PyUnicode_Check(output)) <font color='red'>{</font>
<a name='L1885'>            Py_DECREF(output);
<a name='L1886'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "decoder failed to return unicode");
<a name='L1887'>            <b>return</b> 0;
<a name='L1888'>        <font color='red'>}</font>
<a name='L1889'>    <font color='red'>}</font>
<a name='L1890'>    size = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(output);
<a name='L1891'>    data = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(output);
<a name='L1892'>    <b>if</b> (size != <a href='../S/2828.html#L10239' title='Defined at 10239 in Objects/unicodeobject.c.'>Py_UNICODE_strlen</a>(data)) <font color='red'>{</font>
<a name='L1893'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "embedded NUL character");
<a name='L1894'>        Py_DECREF(output);
<a name='L1895'>        <b>return</b> 0;
<a name='L1896'>    <font color='red'>}</font>
<a name='L1897'>    *(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>**)addr = output;
<a name='L1898'>    <b>return</b> Py_CLEANUP_SUPPORTED;
<a name='L1899'><font color='red'>}</font>
<a name='L1900'>
<a name='L1901'>
<a name='L1902'><b>char</b>*
<a name='L1903'><a href='../R/5507.html' title='Multiple refered from 19 places.'>_PyUnicode_AsStringAndSize</a>(PyObject *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *psize)
<a name='L1904'><font color='red'>{</font>
<a name='L1905'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L1906'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1907'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L1908'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1909'>    <font color='red'>}</font>
<a name='L1910'>    <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../D/6200.html' title='Multiple defined in 3 places.'>_PyUnicode_AsDefaultEncodedString</a>(unicode, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1911'>    <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1912'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1913'>    <b>if</b> (psize != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1914'>        *psize = PyBytes_GET_SIZE(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L1915'>    <b>return</b> PyBytes_AS_STRING(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L1916'><font color='red'>}</font>
<a name='L1917'>
<a name='L1918'><b>char</b>*
<a name='L1919'><a href='../R/5506.html' title='Multiple refered from 82 places.'>_PyUnicode_AsString</a>(PyObject *unicode)
<a name='L1920'><font color='red'>{</font>
<a name='L1921'>    <b>return</b> <a href='../S/2828.html#L1903' title='Defined at 1903 in Objects/unicodeobject.c.'>_PyUnicode_AsStringAndSize</a>(unicode, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1922'><font color='red'>}</font>
<a name='L1923'>
<a name='L1924'><a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *<a href='../R/3543.html' title='Multiple refered from 15 places.'>PyUnicode_AsUnicode</a>(PyObject *unicode)
<a name='L1925'><font color='red'>{</font>
<a name='L1926'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1927'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L1928'>        <b>goto</b> onError;
<a name='L1929'>    <font color='red'>}</font>
<a name='L1930'>    <b>return</b> <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L1931'>
<a name='L1932'>  onError:
<a name='L1933'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1934'><font color='red'>}</font>
<a name='L1935'>
<a name='L1936'><a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../R/3596.html' title='Multiple refered from 17 places.'>PyUnicode_GetSize</a>(PyObject *unicode)
<a name='L1937'><font color='red'>{</font>
<a name='L1938'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L1939'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L1940'>        <b>goto</b> onError;
<a name='L1941'>    <font color='red'>}</font>
<a name='L1942'>    <b>return</b> <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode);
<a name='L1943'>
<a name='L1944'>  onError:
<a name='L1945'>    <b>return</b> -1;
<a name='L1946'><font color='red'>}</font>
<a name='L1947'>
<a name='L1948'><b>const</b> <b>char</b> *<a href='../R/3594.html' title='Multiple refered from 13 places.'>PyUnicode_GetDefaultEncoding</a>(<b>void</b>)
<a name='L1949'><font color='red'>{</font>
<a name='L1950'>    <b>return</b> "utf-8";
<a name='L1951'><font color='red'>}</font>
<a name='L1952'>
<a name='L1953'><i><font color='green'>/* create or adjust a UnicodeDecodeError */</font></i>
<a name='L1954'><b>static</b> <b>void</b>
<a name='L1955'><a href='../R/8836.html' title='Multiple refered from 2 places.'>make_decode_exception</a>(PyObject **exceptionObject,
<a name='L1956'>                      <b>const</b> <b>char</b> *encoding,
<a name='L1957'>                      <b>const</b> <b>char</b> *input, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length,
<a name='L1958'>                      <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos,
<a name='L1959'>                      <b>const</b> <b>char</b> *reason)
<a name='L1960'><font color='red'>{</font>
<a name='L1961'>    <b>if</b> (*exceptionObject == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1962'>        *exceptionObject = <a href='../S/2789.html#L1621' title='Defined at 1621 in Objects/exceptions.c.'>PyUnicodeDecodeError_Create</a>(
<a name='L1963'>            <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, input, length, startpos, endpos, reason);
<a name='L1964'>    <font color='red'>}</font>
<a name='L1965'>    <b>else</b> <font color='red'>{</font>
<a name='L1966'>        <b>if</b> (<a href='../S/2789.html#L1244' title='Defined at 1244 in Objects/exceptions.c.'>PyUnicodeDecodeError_SetStart</a>(*exceptionObject, startpos))
<a name='L1967'>            <b>goto</b> onError;
<a name='L1968'>        <b>if</b> (<a href='../S/2789.html#L1312' title='Defined at 1312 in Objects/exceptions.c.'>PyUnicodeDecodeError_SetEnd</a>(*exceptionObject, endpos))
<a name='L1969'>            <b>goto</b> onError;
<a name='L1970'>        <b>if</b> (<a href='../S/2789.html#L1356' title='Defined at 1356 in Objects/exceptions.c.'>PyUnicodeDecodeError_SetReason</a>(*exceptionObject, reason))
<a name='L1971'>            <b>goto</b> onError;
<a name='L1972'>    <font color='red'>}</font>
<a name='L1973'>    <b>return</b>;
<a name='L1974'>
<a name='L1975'>onError:
<a name='L1976'>    Py_DECREF(*exceptionObject);
<a name='L1977'>    *exceptionObject = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1978'><font color='red'>}</font>
<a name='L1979'>
<a name='L1980'><i><font color='green'>/* error handling callback helper:</font></i>
<a name='L1981'><i><font color='green'>   build arguments, call the callback and check the arguments,</font></i>
<a name='L1982'><i><font color='green'>   if no exception occurred, copy the replacement to the output</font></i>
<a name='L1983'><i><font color='green'>   and adjust various state variables.</font></i>
<a name='L1984'><i><font color='green'>   return 0 on success, -1 on error</font></i>
<a name='L1985'><i><font color='green'>*/</font></i>
<a name='L1986'>
<a name='L1987'><b>static</b>
<a name='L1988'><b>int</b> <a href='../R/11074.html' title='Multiple refered from 17 places.'>unicode_decode_call_errorhandler</a>(<b>const</b> <b>char</b> *errors, PyObject **errorHandler,
<a name='L1989'>                                     <b>const</b> <b>char</b> *encoding, <b>const</b> <b>char</b> *reason,
<a name='L1990'>                                     <b>const</b> <b>char</b> **input, <b>const</b> <b>char</b> **inend, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *startinpos,
<a name='L1991'>                                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *endinpos, PyObject **exceptionObject, <b>const</b> <b>char</b> **inptr,
<a name='L1992'>                                     PyUnicodeObject **output, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *outpos, Py_UNICODE **outptr)
<a name='L1993'><font color='red'>{</font>
<a name='L1994'>    <b>static</b> <b>char</b> *argparse = "O!n;decoding error handler must return (str, int) tuple";
<a name='L1995'>
<a name='L1996'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *restuple = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1997'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repunicode = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1998'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(*output);
<a name='L1999'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> insize;
<a name='L2000'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize;
<a name='L2001'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> newpos;
<a name='L2002'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *repptr;
<a name='L2003'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *inputobj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2004'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> repsize;
<a name='L2005'>    <b>int</b> res = -1;
<a name='L2006'>
<a name='L2007'>    <b>if</b> (*errorHandler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2008'>        *errorHandler = <a href='../S/3093.html#L448' title='Defined at 448 in Python/codecs.c.'>PyCodec_LookupError</a>(errors);
<a name='L2009'>        <b>if</b> (*errorHandler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2010'>            <b>goto</b> onError;
<a name='L2011'>    <font color='red'>}</font>
<a name='L2012'>
<a name='L2013'>    <a href='../S/2828.html#L1955' title='Defined at 1955 in Objects/unicodeobject.c.'>make_decode_exception</a>(exceptionObject,
<a name='L2014'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>,
<a name='L2015'>        *input, *inend - *input,
<a name='L2016'>        *startinpos, *endinpos,
<a name='L2017'>        reason);
<a name='L2018'>    <b>if</b> (*exceptionObject == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2019'>        <b>goto</b> onError;
<a name='L2020'>
<a name='L2021'>    restuple = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(*errorHandler, *exceptionObject, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2022'>    <b>if</b> (restuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2023'>        <b>goto</b> onError;
<a name='L2024'>    <b>if</b> (!PyTuple_Check(restuple)) <font color='red'>{</font>
<a name='L2025'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, &amp;argparse[4]);
<a name='L2026'>        <b>goto</b> onError;
<a name='L2027'>    <font color='red'>}</font>
<a name='L2028'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(restuple, argparse, &amp;PyUnicode_Type, &amp;repunicode, &amp;newpos))
<a name='L2029'>        <b>goto</b> onError;
<a name='L2030'>
<a name='L2031'>    <i><font color='green'>/* Copy back the bytes variables, which might have been modified by the</font></i>
<a name='L2032'><i><font color='green'>       callback */</font></i>
<a name='L2033'>    inputobj = <a href='../S/2789.html#L1180' title='Defined at 1180 in Objects/exceptions.c.'>PyUnicodeDecodeError_GetObject</a>(*exceptionObject);
<a name='L2034'>    <b>if</b> (!inputobj)
<a name='L2035'>        <b>goto</b> onError;
<a name='L2036'>    <b>if</b> (!PyBytes_Check(inputobj)) <font color='red'>{</font>
<a name='L2037'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError, "exception attribute object must be bytes");
<a name='L2038'>    <font color='red'>}</font>
<a name='L2039'>    *input = PyBytes_AS_STRING(inputobj);
<a name='L2040'>    insize = PyBytes_GET_SIZE(inputobj);
<a name='L2041'>    *inend = *input + insize;
<a name='L2042'>    <i><font color='green'>/* we can DECREF safely, as the exception has another reference,</font></i>
<a name='L2043'><i><font color='green'>       so the object won't go away. */</font></i>
<a name='L2044'>    Py_DECREF(inputobj);
<a name='L2045'>
<a name='L2046'>    <b>if</b> (newpos&lt;0)
<a name='L2047'>        newpos = insize+newpos;
<a name='L2048'>    <b>if</b> (newpos&lt;0 || newpos&gt;insize) <font color='red'>{</font>
<a name='L2049'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_IndexError, "position %zd from error handler out of bounds", newpos);
<a name='L2050'>        <b>goto</b> onError;
<a name='L2051'>    <font color='red'>}</font>
<a name='L2052'>
<a name='L2053'>    <i><font color='green'>/* need more space? (at least enough for what we</font></i>
<a name='L2054'><i><font color='green'>       have+the replacement+the rest of the string (starting</font></i>
<a name='L2055'><i><font color='green'>       at the new input position), so we won't have to check space</font></i>
<a name='L2056'><i><font color='green'>       when there are no errors in the rest of the string) */</font></i>
<a name='L2057'>    repptr = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repunicode);
<a name='L2058'>    repsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(repunicode);
<a name='L2059'>    requiredsize = *outpos + repsize + insize-newpos;
<a name='L2060'>    <b>if</b> (requiredsize &gt; outsize) <font color='red'>{</font>
<a name='L2061'>        <b>if</b> (requiredsize&lt;2*outsize)
<a name='L2062'>            requiredsize = 2*outsize;
<a name='L2063'>        <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(output, requiredsize) &lt; 0)
<a name='L2064'>            <b>goto</b> onError;
<a name='L2065'>        *outptr = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*output) + *outpos;
<a name='L2066'>    <font color='red'>}</font>
<a name='L2067'>    *endinpos = newpos;
<a name='L2068'>    *inptr = *input + newpos;
<a name='L2069'>    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(*outptr, repptr, repsize);
<a name='L2070'>    *outptr += repsize;
<a name='L2071'>    *outpos += repsize;
<a name='L2072'>
<a name='L2073'>    <i><font color='green'>/* we made it! */</font></i>
<a name='L2074'>    res = 0;
<a name='L2075'>
<a name='L2076'>  onError:
<a name='L2077'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(restuple);
<a name='L2078'>    <b>return</b> res;
<a name='L2079'><font color='red'>}</font>
<a name='L2080'>
<a name='L2081'><i><font color='green'>/* --- UTF-7 Codec -------------------------------------------------------- */</font></i>
<a name='L2082'>
<a name='L2083'><i><font color='green'>/* See RFC2152 for details.  We encode conservatively and decode liberally. */</font></i>
<a name='L2084'>
<a name='L2085'><i><font color='green'>/* Three simple macros defining base-64. */</font></i>
<a name='L2086'>
<a name='L2087'><i><font color='green'>/* Is c a base-64 character? */</font></i>
<a name='L2088'>
<a name='L2089'><font color='darkred'>#define</font> <a href='../R/1586.html' title='Multiple refered from 2 places.'>IS_BASE64</a>(c) \
<a name='L2090'>    (((c) &gt;= 'A' &amp;&amp; (c) &lt;= 'Z') ||     \
<a name='L2091'>     ((c) &gt;= 'a' &amp;&amp; (c) &lt;= 'z') ||     \
<a name='L2092'>     ((c) &gt;= '0' &amp;&amp; (c) &lt;= '9') ||     \
<a name='L2093'>     (c) == '+' || (c) == '/')
<a name='L2094'>
<a name='L2095'><i><font color='green'>/* given that c is a base-64 character, what is its base-64 value? */</font></i>
<a name='L2096'>
<a name='L2097'><font color='darkred'>#define</font> <a href='../S/2828.html#L2217' title='Refered from 2217 in Objects/unicodeobject.c.'>FROM_BASE64</a>(c)                                                  \
<a name='L2098'>    (((c) &gt;= 'A' &amp;&amp; (c) &lt;= 'Z') ? (c) - 'A' :                           \
<a name='L2099'>     ((c) &gt;= 'a' &amp;&amp; (c) &lt;= 'z') ? (c) - 'a' + 26 :                      \
<a name='L2100'>     ((c) &gt;= '0' &amp;&amp; (c) &lt;= '9') ? (c) - '0' + 52 :                      \
<a name='L2101'>     (c) == '+' ? 62 : 63)
<a name='L2102'>
<a name='L2103'><i><font color='green'>/* What is the base-64 character of the bottom 6 bits of n? */</font></i>
<a name='L2104'>
<a name='L2105'><font color='darkred'>#define</font> <a href='../R/4560.html' title='Multiple refered from 4 places.'>TO_BASE64</a>(n)  \
<a name='L2106'>    ("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n) &amp; 0x3f])
<a name='L2107'>
<a name='L2108'><i><font color='green'>/* DECODE_DIRECT: this byte encountered in a UTF-7 string should be</font></i>
<a name='L2109'><i><font color='green'> * decoded as itself.  We are permissive on decoding; the only ASCII</font></i>
<a name='L2110'><i><font color='green'> * byte not decoding to itself is the + which begins a base64</font></i>
<a name='L2111'><i><font color='green'> * string. */</font></i>
<a name='L2112'>
<a name='L2113'><font color='darkred'>#define</font> <a href='../S/2828.html#L2298' title='Refered from 2298 in Objects/unicodeobject.c.'>DECODE_DIRECT</a>(c)                                \
<a name='L2114'>    ((c) &lt;= 127 &amp;&amp; (c) != '+')
<a name='L2115'>
<a name='L2116'><i><font color='green'>/* The UTF-7 encoder treats ASCII characters differently according to</font></i>
<a name='L2117'><i><font color='green'> * whether they are Set D, Set O, Whitespace, or special (i.e. none of</font></i>
<a name='L2118'><i><font color='green'> * the above).  See RFC2152.  This array identifies these different</font></i>
<a name='L2119'><i><font color='green'> * sets:</font></i>
<a name='L2120'><i><font color='green'> * 0 : "Set D"</font></i>
<a name='L2121'><i><font color='green'> *     alphanumeric and '(),-./:?</font></i>
<a name='L2122'><i><font color='green'> * 1 : "Set O"</font></i>
<a name='L2123'><i><font color='green'> *     !"#$%&amp;*;&lt;=&gt;@[]^_`{|}</font></i>
<a name='L2124'><i><font color='green'> * 2 : "whitespace"</font></i>
<a name='L2125'><i><font color='green'> *     ht nl cr sp</font></i>
<a name='L2126'><i><font color='green'> * 3 : special (must be base64 encoded)</font></i>
<a name='L2127'><i><font color='green'> *     everything else (i.e. +\~ and non-printing codes 0-8 11-12 14-31 127)</font></i>
<a name='L2128'><i><font color='green'> */</font></i>
<a name='L2129'>
<a name='L2130'><b>static</b>
<a name='L2131'><b>char</b> utf7_category[128] = <font color='red'>{</font>
<a name='L2132'><i><font color='green'>/* nul soh stx etx eot enq ack bel bs  ht  nl  vt  np  cr  so  si  */</font></i>
<a name='L2133'>    3,  3,  3,  3,  3,  3,  3,  3,  3,  2,  2,  3,  3,  2,  3,  3,
<a name='L2134'><i><font color='green'>/* dle dc1 dc2 dc3 dc4 nak syn etb can em  sub esc fs  gs  rs  us  */</font></i>
<a name='L2135'>    3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,
<a name='L2136'><i><font color='green'>/* sp   !   "   #   $   %   &amp;   '   (   )   *   +   ,   -   .   /  */</font></i>
<a name='L2137'>    2,  1,  1,  1,  1,  1,  1,  0,  0,  0,  1,  3,  0,  0,  0,  0,
<a name='L2138'><i><font color='green'>/*  0   1   2   3   4   5   6   7   8   9   :   ;   &lt;   =   &gt;   ?  */</font></i>
<a name='L2139'>    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  1,  1,  0,
<a name='L2140'><i><font color='green'>/*  @   A   B   C   D   E   F   G   H   I   J   K   L   M   N   O  */</font></i>
<a name='L2141'>    1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
<a name='L2142'><i><font color='green'>/*  P   Q   R   S   T   U   V   W   X   Y   Z   [   \   ]   ^   _  */</font></i>
<a name='L2143'>    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  3,  1,  1,  1,
<a name='L2144'><i><font color='green'>/*  `   a   b   c   d   e   f   g   h   i   j   k   l   m   n   o  */</font></i>
<a name='L2145'>    1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
<a name='L2146'><i><font color='green'>/*  p   q   r   s   t   u   v   w   x   y   z   {   |   }   ~  del */</font></i>
<a name='L2147'>    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  1,  3,  3,
<a name='L2148'><font color='red'>}</font>;
<a name='L2149'>
<a name='L2150'><i><font color='green'>/* ENCODE_DIRECT: this character should be encoded as itself.  The</font></i>
<a name='L2151'><i><font color='green'> * answer depends on whether we are encoding set O as itself, and also</font></i>
<a name='L2152'><i><font color='green'> * on whether we are encoding whitespace as itself.  RFC2152 makes it</font></i>
<a name='L2153'><i><font color='green'> * clear that the answers to these questions vary between</font></i>
<a name='L2154'><i><font color='green'> * applications, so this code needs to be flexible.  */</font></i>
<a name='L2155'>
<a name='L2156'><font color='darkred'>#define</font> <a href='../R/849.html' title='Multiple refered from 2 places.'>ENCODE_DIRECT</a>(c, directO, directWS)             \
<a name='L2157'>    ((c) &lt; 128 &amp;&amp; (c) &gt; 0 &amp;&amp;                            \
<a name='L2158'>     ((utf7_category[(c)] == 0) ||                      \
<a name='L2159'>      (directWS &amp;&amp; (utf7_category[(c)] == 2)) ||        \
<a name='L2160'>      (directO &amp;&amp; (utf7_category[(c)] == 1))))
<a name='L2161'>
<a name='L2162'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_DecodeUTF7(<b>const</b> <b>char</b> *s,
<a name='L2163'>                               <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L2164'>                               <b>const</b> <b>char</b> *errors)
<a name='L2165'><font color='red'>{</font>
<a name='L2166'>    <b>return</b> <a href='../S/2828.html#L2176' title='Defined at 2176 in Objects/unicodeobject.c.'>PyUnicode_DecodeUTF7Stateful</a>(s, size, errors, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2167'><font color='red'>}</font>
<a name='L2168'>
<a name='L2169'><i><font color='green'>/* The decoder.  The only state we preserve is our read position,</font></i>
<a name='L2170'><i><font color='green'> * i.e. how many characters we have consumed.  So if we end in the</font></i>
<a name='L2171'><i><font color='green'> * middle of a shift sequence we have to back off the read position</font></i>
<a name='L2172'><i><font color='green'> * and the output to the beginning of the sequence, otherwise we lose</font></i>
<a name='L2173'><i><font color='green'> * all the shift state (seen bits, number of bits seen, high</font></i>
<a name='L2174'><i><font color='green'> * surrogate). */</font></i>
<a name='L2175'>
<a name='L2176'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3565.html' title='Multiple refered from 2 places.'>PyUnicode_DecodeUTF7Stateful</a>(<b>const</b> <b>char</b> *s,
<a name='L2177'>                                       <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L2178'>                                       <b>const</b> <b>char</b> *errors,
<a name='L2179'>                                       <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *consumed)
<a name='L2180'><font color='red'>{</font>
<a name='L2181'>    <b>const</b> <b>char</b> *starts = s;
<a name='L2182'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L2183'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L2184'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L2185'>    <b>const</b> <b>char</b> *e;
<a name='L2186'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L2187'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L2188'>    <b>const</b> <b>char</b> *errmsg = "";
<a name='L2189'>    <b>int</b> inShift = 0;
<a name='L2190'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *shiftOutStart;
<a name='L2191'>    <b>unsigned</b> <b>int</b> base64bits = 0;
<a name='L2192'>    <b>unsigned</b> <b>long</b> base64buffer = 0;
<a name='L2193'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> surrogate = 0;
<a name='L2194'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2195'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2196'>
<a name='L2197'>    unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L2198'>    <b>if</b> (!unicode)
<a name='L2199'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2200'>    <b>if</b> (size == 0) <font color='red'>{</font>
<a name='L2201'>        <b>if</b> (consumed)
<a name='L2202'>            *consumed = 0;
<a name='L2203'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L2204'>    <font color='red'>}</font>
<a name='L2205'>
<a name='L2206'>    p = unicode-&gt;str;
<a name='L2207'>    shiftOutStart = p;
<a name='L2208'>    e = s + size;
<a name='L2209'>
<a name='L2210'>    <b>while</b> (s &lt; e) <font color='red'>{</font>
<a name='L2211'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch;
<a name='L2212'>      restart:
<a name='L2213'>        ch = (<b>unsigned</b> <b>char</b>) *s;
<a name='L2214'>
<a name='L2215'>        <b>if</b> (inShift) <font color='red'>{</font> <i><font color='green'>/* in a base-64 section */</font></i>
<a name='L2216'>            <b>if</b> (<a href='../D/1777.html' title='Multiple defined in 2 places.'>IS_BASE64</a>(ch)) <font color='red'>{</font> <i><font color='green'>/* consume a base-64 character */</font></i>
<a name='L2217'>                base64buffer = (base64buffer &lt;&lt; 6) | <a href='../D/1304.html' title='Multiple defined in 2 places.'>FROM_BASE64</a>(ch);
<a name='L2218'>                base64bits += 6;
<a name='L2219'>                s++;
<a name='L2220'>                <b>if</b> (base64bits &gt;= 16) <font color='red'>{</font>
<a name='L2221'>                    <i><font color='green'>/* we have enough bits for a UTF-16 value */</font></i>
<a name='L2222'>                    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> outCh = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)
<a name='L2223'>                                       (base64buffer &gt;&gt; (base64bits-16));
<a name='L2224'>                    base64bits -= 16;
<a name='L2225'>                    base64buffer &amp;= (1 &lt;&lt; base64bits) - 1; <i><font color='green'>/* clear high bits */</font></i>
<a name='L2226'>                    <b>if</b> (surrogate) <font color='red'>{</font>
<a name='L2227'>                        <i><font color='green'>/* expecting a second surrogate */</font></i>
<a name='L2228'>                        <b>if</b> (outCh &gt;= 0xDC00 &amp;&amp; outCh &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L2229'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L2230'>                            *p++ = (((surrogate &amp; 0x3FF)&lt;&lt;10)
<a name='L2231'>                                    | (outCh &amp; 0x3FF)) + 0x10000;
<a name='L2232'><font color='darkred'>#else</font>
<a name='L2233'>                            *p++ = surrogate;
<a name='L2234'>                            *p++ = outCh;
<a name='L2235'><font color='darkred'>#endif</font>
<a name='L2236'>                            surrogate = 0;
<a name='L2237'>                        <font color='red'>}</font>
<a name='L2238'>                        <b>else</b> <font color='red'>{</font>
<a name='L2239'>                            surrogate = 0;
<a name='L2240'>                            errmsg = "second surrogate missing";
<a name='L2241'>                            <b>goto</b> utf7Error;
<a name='L2242'>                        <font color='red'>}</font>
<a name='L2243'>                    <font color='red'>}</font>
<a name='L2244'>                    <b>else</b> <b>if</b> (outCh &gt;= 0xD800 &amp;&amp; outCh &lt;= 0xDBFF) <font color='red'>{</font>
<a name='L2245'>                        <i><font color='green'>/* first surrogate */</font></i>
<a name='L2246'>                        surrogate = outCh;
<a name='L2247'>                    <font color='red'>}</font>
<a name='L2248'>                    <b>else</b> <b>if</b> (outCh &gt;= 0xDC00 &amp;&amp; outCh &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L2249'>                        errmsg = "unexpected second surrogate";
<a name='L2250'>                        <b>goto</b> utf7Error;
<a name='L2251'>                    <font color='red'>}</font>
<a name='L2252'>                    <b>else</b> <font color='red'>{</font>
<a name='L2253'>                        *p++ = outCh;
<a name='L2254'>                    <font color='red'>}</font>
<a name='L2255'>                <font color='red'>}</font>
<a name='L2256'>            <font color='red'>}</font>
<a name='L2257'>            <b>else</b> <font color='red'>{</font> <i><font color='green'>/* now leaving a base-64 section */</font></i>
<a name='L2258'>                inShift = 0;
<a name='L2259'>                s++;
<a name='L2260'>                <b>if</b> (surrogate) <font color='red'>{</font>
<a name='L2261'>                    errmsg = "second surrogate missing at end of shift sequence";
<a name='L2262'>                    <b>goto</b> utf7Error;
<a name='L2263'>                <font color='red'>}</font>
<a name='L2264'>                <b>if</b> (base64bits &gt; 0) <font color='red'>{</font> <i><font color='green'>/* left-over bits */</font></i>
<a name='L2265'>                    <b>if</b> (base64bits &gt;= 6) <font color='red'>{</font>
<a name='L2266'>                        <i><font color='green'>/* We've seen at least one base-64 character */</font></i>
<a name='L2267'>                        errmsg = "partial character in shift sequence";
<a name='L2268'>                        <b>goto</b> utf7Error;
<a name='L2269'>                    <font color='red'>}</font>
<a name='L2270'>                    <b>else</b> <font color='red'>{</font>
<a name='L2271'>                        <i><font color='green'>/* Some bits remain; they should be zero */</font></i>
<a name='L2272'>                        <b>if</b> (base64buffer != 0) <font color='red'>{</font>
<a name='L2273'>                            errmsg = "non-zero padding bits in shift sequence";
<a name='L2274'>                            <b>goto</b> utf7Error;
<a name='L2275'>                        <font color='red'>}</font>
<a name='L2276'>                    <font color='red'>}</font>
<a name='L2277'>                <font color='red'>}</font>
<a name='L2278'>                <b>if</b> (ch != '-') <font color='red'>{</font>
<a name='L2279'>                    <i><font color='green'>/* '-' is absorbed; other terminating</font></i>
<a name='L2280'><i><font color='green'>                       characters are preserved */</font></i>
<a name='L2281'>                    *p++ = ch;
<a name='L2282'>                <font color='red'>}</font>
<a name='L2283'>            <font color='red'>}</font>
<a name='L2284'>        <font color='red'>}</font>
<a name='L2285'>        <b>else</b> <b>if</b> ( ch == '+' ) <font color='red'>{</font>
<a name='L2286'>            startinpos = s-starts;
<a name='L2287'>            s++; <i><font color='green'>/* consume '+' */</font></i>
<a name='L2288'>            <b>if</b> (s &lt; e &amp;&amp; *s == '-') <font color='red'>{</font> <i><font color='green'>/* '+-' encodes '+' */</font></i>
<a name='L2289'>                s++;
<a name='L2290'>                *p++ = '+';
<a name='L2291'>            <font color='red'>}</font>
<a name='L2292'>            <b>else</b> <font color='red'>{</font> <i><font color='green'>/* begin base64-encoded section */</font></i>
<a name='L2293'>                inShift = 1;
<a name='L2294'>                shiftOutStart = p;
<a name='L2295'>                base64bits = 0;
<a name='L2296'>            <font color='red'>}</font>
<a name='L2297'>        <font color='red'>}</font>
<a name='L2298'>        <b>else</b> <b>if</b> (<a href='../D/744.html' title='Multiple defined in 2 places.'>DECODE_DIRECT</a>(ch)) <font color='red'>{</font> <i><font color='green'>/* character decodes as itself */</font></i>
<a name='L2299'>            *p++ = ch;
<a name='L2300'>            s++;
<a name='L2301'>        <font color='red'>}</font>
<a name='L2302'>        <b>else</b> <font color='red'>{</font>
<a name='L2303'>            startinpos = s-starts;
<a name='L2304'>            s++;
<a name='L2305'>            errmsg = "unexpected special character";
<a name='L2306'>            <b>goto</b> utf7Error;
<a name='L2307'>        <font color='red'>}</font>
<a name='L2308'>        <b>continue</b>;
<a name='L2309'>utf7Error:
<a name='L2310'>        outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L2311'>        endinpos = s-starts;
<a name='L2312'>        <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L2313'>                errors, &amp;errorHandler,
<a name='L2314'>                "utf7", errmsg,
<a name='L2315'>                &amp;starts, &amp;e, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L2316'>                &amp;unicode, &amp;outpos, &amp;p))
<a name='L2317'>            <b>goto</b> onError;
<a name='L2318'>    <font color='red'>}</font>
<a name='L2319'>
<a name='L2320'>    <i><font color='green'>/* end of string */</font></i>
<a name='L2321'>
<a name='L2322'>    <b>if</b> (inShift &amp;&amp; !consumed) <font color='red'>{</font> <i><font color='green'>/* in shift sequence, no more to follow */</font></i>
<a name='L2323'>        <i><font color='green'>/* if we're in an inconsistent state, that's an error */</font></i>
<a name='L2324'>        <b>if</b> (surrogate ||
<a name='L2325'>                (base64bits &gt;= 6) ||
<a name='L2326'>                (base64bits &gt; 0 &amp;&amp; base64buffer != 0)) <font color='red'>{</font>
<a name='L2327'>            outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L2328'>            endinpos = size;
<a name='L2329'>            <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L2330'>                    errors, &amp;errorHandler,
<a name='L2331'>                    "utf7", "unterminated shift sequence",
<a name='L2332'>                    &amp;starts, &amp;e, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L2333'>                    &amp;unicode, &amp;outpos, &amp;p))
<a name='L2334'>                <b>goto</b> onError;
<a name='L2335'>            <b>if</b> (s &lt; e)
<a name='L2336'>                <b>goto</b> restart;
<a name='L2337'>        <font color='red'>}</font>
<a name='L2338'>    <font color='red'>}</font>
<a name='L2339'>
<a name='L2340'>    <i><font color='green'>/* return state */</font></i>
<a name='L2341'>    <b>if</b> (consumed) <font color='red'>{</font>
<a name='L2342'>        <b>if</b> (inShift) <font color='red'>{</font>
<a name='L2343'>            p = shiftOutStart; <i><font color='green'>/* back off output */</font></i>
<a name='L2344'>            *consumed = startinpos;
<a name='L2345'>        <font color='red'>}</font>
<a name='L2346'>        <b>else</b> <font color='red'>{</font>
<a name='L2347'>            *consumed = s-starts;
<a name='L2348'>        <font color='red'>}</font>
<a name='L2349'>    <font color='red'>}</font>
<a name='L2350'>
<a name='L2351'>    <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;unicode, p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode)) &lt; 0)
<a name='L2352'>        <b>goto</b> onError;
<a name='L2353'>
<a name='L2354'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L2355'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L2356'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L2357'>
<a name='L2358'>  onError:
<a name='L2359'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L2360'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L2361'>    Py_DECREF(unicode);
<a name='L2362'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2363'><font color='red'>}</font>
<a name='L2364'>
<a name='L2365'>
<a name='L2366'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2243.html#L681' title='Refered from 681 in Modules/_codecsmodule.c.'>PyUnicode_EncodeUTF7</a>(<b>const</b> Py_UNICODE *s,
<a name='L2367'>                               <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L2368'>                               <b>int</b> base64SetO,
<a name='L2369'>                               <b>int</b> base64WhiteSpace,
<a name='L2370'>                               <b>const</b> <b>char</b> *errors)
<a name='L2371'><font color='red'>{</font>
<a name='L2372'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L2373'>    <i><font color='green'>/* It might be possible to tighten this worst case */</font></i>
<a name='L2374'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> allocated = 8 * size;
<a name='L2375'>    <b>int</b> inShift = 0;
<a name='L2376'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = 0;
<a name='L2377'>    <b>unsigned</b> <b>int</b> base64bits = 0;
<a name='L2378'>    <b>unsigned</b> <b>long</b> base64buffer = 0;
<a name='L2379'>    <b>char</b> * out;
<a name='L2380'>    <b>char</b> * start;
<a name='L2381'>
<a name='L2382'>    <b>if</b> (size == 0)
<a name='L2383'>        <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L2384'>
<a name='L2385'>    <b>if</b> (allocated / 8 != size)
<a name='L2386'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L2387'>
<a name='L2388'>    v = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, allocated);
<a name='L2389'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2390'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2391'>
<a name='L2392'>    start = out = PyBytes_AS_STRING(v);
<a name='L2393'>    <b>for</b> (;i &lt; size; ++i) <font color='red'>{</font>
<a name='L2394'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = s[i];
<a name='L2395'>
<a name='L2396'>        <b>if</b> (inShift) <font color='red'>{</font>
<a name='L2397'>            <b>if</b> (<a href='../D/923.html' title='Multiple defined in 2 places.'>ENCODE_DIRECT</a>(ch, !base64SetO, !base64WhiteSpace)) <font color='red'>{</font>
<a name='L2398'>                <i><font color='green'>/* shifting out */</font></i>
<a name='L2399'>                <b>if</b> (base64bits) <font color='red'>{</font> <i><font color='green'>/* output remaining bits */</font></i>
<a name='L2400'>                    *out++ = <a href='../D/5170.html' title='Multiple defined in 2 places.'>TO_BASE64</a>(base64buffer &lt;&lt; (6-base64bits));
<a name='L2401'>                    base64buffer = 0;
<a name='L2402'>                    base64bits = 0;
<a name='L2403'>                <font color='red'>}</font>
<a name='L2404'>                inShift = 0;
<a name='L2405'>                <i><font color='green'>/* Characters not in the BASE64 set implicitly unshift the sequence</font></i>
<a name='L2406'><i><font color='green'>                   so no '-' is required, except if the character is itself a '-' */</font></i>
<a name='L2407'>                <b>if</b> (<a href='../D/1777.html' title='Multiple defined in 2 places.'>IS_BASE64</a>(ch) || ch == '-') <font color='red'>{</font>
<a name='L2408'>                    *out++ = '-';
<a name='L2409'>                <font color='red'>}</font>
<a name='L2410'>                *out++ = (<b>char</b>) ch;
<a name='L2411'>            <font color='red'>}</font>
<a name='L2412'>            <b>else</b> <font color='red'>{</font>
<a name='L2413'>                <b>goto</b> encode_char;
<a name='L2414'>            <font color='red'>}</font>
<a name='L2415'>        <font color='red'>}</font>
<a name='L2416'>        <b>else</b> <font color='red'>{</font> <i><font color='green'>/* not in a shift sequence */</font></i>
<a name='L2417'>            <b>if</b> (ch == '+') <font color='red'>{</font>
<a name='L2418'>                *out++ = '+';
<a name='L2419'>                        *out++ = '-';
<a name='L2420'>            <font color='red'>}</font>
<a name='L2421'>            <b>else</b> <b>if</b> (<a href='../D/923.html' title='Multiple defined in 2 places.'>ENCODE_DIRECT</a>(ch, !base64SetO, !base64WhiteSpace)) <font color='red'>{</font>
<a name='L2422'>                *out++ = (<b>char</b>) ch;
<a name='L2423'>            <font color='red'>}</font>
<a name='L2424'>            <b>else</b> <font color='red'>{</font>
<a name='L2425'>                *out++ = '+';
<a name='L2426'>                inShift = 1;
<a name='L2427'>                <b>goto</b> encode_char;
<a name='L2428'>            <font color='red'>}</font>
<a name='L2429'>        <font color='red'>}</font>
<a name='L2430'>        <b>continue</b>;
<a name='L2431'>encode_char:
<a name='L2432'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L2433'>        <b>if</b> (ch &gt;= 0x10000) <font color='red'>{</font>
<a name='L2434'>            <i><font color='green'>/* code first surrogate */</font></i>
<a name='L2435'>            base64bits += 16;
<a name='L2436'>            base64buffer = (base64buffer &lt;&lt; 16) | 0xd800 | ((ch-0x10000) &gt;&gt; 10);
<a name='L2437'>            <b>while</b> (base64bits &gt;= 6) <font color='red'>{</font>
<a name='L2438'>                *out++ = <a href='../D/5170.html' title='Multiple defined in 2 places.'>TO_BASE64</a>(base64buffer &gt;&gt; (base64bits-6));
<a name='L2439'>                base64bits -= 6;
<a name='L2440'>            <font color='red'>}</font>
<a name='L2441'>            <i><font color='green'>/* prepare second surrogate */</font></i>
<a name='L2442'>            ch =  0xDC00 | ((ch-0x10000) &amp; 0x3FF);
<a name='L2443'>        <font color='red'>}</font>
<a name='L2444'><font color='darkred'>#endif</font>
<a name='L2445'>        base64bits += 16;
<a name='L2446'>        base64buffer = (base64buffer &lt;&lt; 16) | ch;
<a name='L2447'>        <b>while</b> (base64bits &gt;= 6) <font color='red'>{</font>
<a name='L2448'>            *out++ = <a href='../D/5170.html' title='Multiple defined in 2 places.'>TO_BASE64</a>(base64buffer &gt;&gt; (base64bits-6));
<a name='L2449'>            base64bits -= 6;
<a name='L2450'>        <font color='red'>}</font>
<a name='L2451'>    <font color='red'>}</font>
<a name='L2452'>    <b>if</b> (base64bits)
<a name='L2453'>        *out++= <a href='../D/5170.html' title='Multiple defined in 2 places.'>TO_BASE64</a>(base64buffer &lt;&lt; (6-base64bits) );
<a name='L2454'>    <b>if</b> (inShift)
<a name='L2455'>        *out++ = '-';
<a name='L2456'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;v, out - start) &lt; 0)
<a name='L2457'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2458'>    <b>return</b> v;
<a name='L2459'><font color='red'>}</font>
<a name='L2460'>
<a name='L2461'><font color='darkred'>#undef</font> <a href='../R/1586.html' title='Multiple refered from 2 places.'>IS_BASE64</a>
<a name='L2462'><font color='darkred'>#undef</font> <a href='../S/2828.html#L2217' title='Refered from 2217 in Objects/unicodeobject.c.'>FROM_BASE64</a>
<a name='L2463'><font color='darkred'>#undef</font> <a href='../R/4560.html' title='Multiple refered from 4 places.'>TO_BASE64</a>
<a name='L2464'><font color='darkred'>#undef</font> <a href='../S/2828.html#L2298' title='Refered from 2298 in Objects/unicodeobject.c.'>DECODE_DIRECT</a>
<a name='L2465'><font color='darkred'>#undef</font> <a href='../R/849.html' title='Multiple refered from 2 places.'>ENCODE_DIRECT</a>
<a name='L2466'>
<a name='L2467'><i><font color='green'>/* --- UTF-8 Codec -------------------------------------------------------- */</font></i>
<a name='L2468'>
<a name='L2469'><b>static</b>
<a name='L2470'><b>char</b> utf8_code_length[256] = <font color='red'>{</font>
<a name='L2471'>    <i><font color='green'>/* Map UTF-8 encoded prefix byte to sequence length.  Zero means</font></i>
<a name='L2472'><i><font color='green'>       illegal prefix.  See RFC 3629 for details */</font></i>
<a name='L2473'>    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, <i><font color='green'>/* 00-0F */</font></i>
<a name='L2474'>    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
<a name='L2475'>    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
<a name='L2476'>    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
<a name='L2477'>    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
<a name='L2478'>    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
<a name='L2479'>    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
<a name='L2480'>    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, <i><font color='green'>/* 70-7F */</font></i>
<a name='L2481'>    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <i><font color='green'>/* 80-8F */</font></i>
<a name='L2482'>    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name='L2483'>    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name='L2484'>    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <i><font color='green'>/* B0-BF */</font></i>
<a name='L2485'>    0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, <i><font color='green'>/* C0-C1 + C2-CF */</font></i>
<a name='L2486'>    2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, <i><font color='green'>/* D0-DF */</font></i>
<a name='L2487'>    3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, <i><font color='green'>/* E0-EF */</font></i>
<a name='L2488'>    4, 4, 4, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0  <i><font color='green'>/* F0-F4 + F5-FF */</font></i>
<a name='L2489'><font color='red'>}</font>;
<a name='L2490'>
<a name='L2491'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3566.html' title='Multiple refered from 33 places.'>PyUnicode_DecodeUTF8</a>(<b>const</b> <b>char</b> *s,
<a name='L2492'>                               <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L2493'>                               <b>const</b> <b>char</b> *errors)
<a name='L2494'><font color='red'>{</font>
<a name='L2495'>    <b>return</b> <a href='../D/3988.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF8Stateful</a>(s, size, errors, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2496'><font color='red'>}</font>
<a name='L2497'>
<a name='L2498'><i><font color='green'>/* Mask to check or force alignment of a pointer to C 'long' boundaries */</font></i>
<a name='L2499'><font color='darkred'>#define</font> <a href='../R/1770.html' title='Multiple refered from 5 places.'>LONG_PTR_MASK</a> (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>) (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> - 1)
<a name='L2500'>
<a name='L2501'><i><font color='green'>/* Mask to quickly check whether a C 'long' contains a</font></i>
<a name='L2502'><i><font color='green'>   non-ASCII, UTF8-encoded char. */</font></i>
<a name='L2503'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> == 8)
<a name='L2504'><font color='darkred'># define</font> <a href='../S/2828.html#L2565' title='Refered from 2565 in Objects/unicodeobject.c.'>ASCII_CHAR_MASK</a> 0x8080808080808080L
<a name='L2505'><font color='darkred'>#elif</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> == 4)
<a name='L2506'><font color='darkred'># define</font> <a href='../S/2828.html#L2565' title='Refered from 2565 in Objects/unicodeobject.c.'>ASCII_CHAR_MASK</a> 0x80808080L
<a name='L2507'><font color='darkred'>#else</font>
<a name='L2508'><font color='darkred'># error</font> C 'long' size should be either 4 or 8!
<a name='L2509'><font color='darkred'>#endif</font>
<a name='L2510'>
<a name='L2511'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3567.html' title='Multiple refered from 2 places.'>PyUnicode_DecodeUTF8Stateful</a>(<b>const</b> <b>char</b> *s,
<a name='L2512'>                                       <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L2513'>                                       <b>const</b> <b>char</b> *errors,
<a name='L2514'>                                       <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *consumed)
<a name='L2515'><font color='red'>{</font>
<a name='L2516'>    <b>const</b> <b>char</b> *starts = s;
<a name='L2517'>    <b>int</b> n;
<a name='L2518'>    <b>int</b> k;
<a name='L2519'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L2520'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L2521'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L2522'>    <b>const</b> <b>char</b> *e, *aligned_end;
<a name='L2523'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L2524'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L2525'>    <b>const</b> <b>char</b> *errmsg = "";
<a name='L2526'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2527'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2528'>
<a name='L2529'>    <i><font color='green'>/* Note: size will always be longer than the resulting Unicode</font></i>
<a name='L2530'><i><font color='green'>       character count */</font></i>
<a name='L2531'>    unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L2532'>    <b>if</b> (!unicode)
<a name='L2533'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2534'>    <b>if</b> (size == 0) <font color='red'>{</font>
<a name='L2535'>        <b>if</b> (consumed)
<a name='L2536'>            *consumed = 0;
<a name='L2537'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L2538'>    <font color='red'>}</font>
<a name='L2539'>
<a name='L2540'>    <i><font color='green'>/* Unpack UTF-8 encoded data */</font></i>
<a name='L2541'>    p = unicode-&gt;str;
<a name='L2542'>    e = s + size;
<a name='L2543'>    aligned_end = (<b>const</b> <b>char</b> *) ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>) e &amp; ~<a href='../S/2828.html#L2499' title='Defined at 2499 in Objects/unicodeobject.c.'>LONG_PTR_MASK</a>);
<a name='L2544'>
<a name='L2545'>    <b>while</b> (s &lt; e) <font color='red'>{</font>
<a name='L2546'>        <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ch = (<b>unsigned</b> <b>char</b>)*s;
<a name='L2547'>
<a name='L2548'>        <b>if</b> (ch &lt; 0x80) <font color='red'>{</font>
<a name='L2549'>            <i><font color='green'>/* Fast path for runs of ASCII characters. Given that common UTF-8</font></i>
<a name='L2550'><i><font color='green'>               input will consist of an overwhelming majority of ASCII</font></i>
<a name='L2551'><i><font color='green'>               characters, we try to optimize for this case by checking</font></i>
<a name='L2552'><i><font color='green'>               as many characters as a C 'long' can contain.</font></i>
<a name='L2553'><i><font color='green'>               First, check if we can do an aligned read, as most CPUs have</font></i>
<a name='L2554'><i><font color='green'>               a penalty for unaligned reads.</font></i>
<a name='L2555'><i><font color='green'>            */</font></i>
<a name='L2556'>            <b>if</b> (!((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>) s &amp; <a href='../S/2828.html#L2499' title='Defined at 2499 in Objects/unicodeobject.c.'>LONG_PTR_MASK</a>)) <font color='red'>{</font>
<a name='L2557'>                <i><font color='green'>/* Help register allocation */</font></i>
<a name='L2558'>                <b>register</b> <b>const</b> <b>char</b> *_s = s;
<a name='L2559'>                <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *_p = p;
<a name='L2560'>                <b>while</b> (_s &lt; aligned_end) <font color='red'>{</font>
<a name='L2561'>                    <i><font color='green'>/* Read a whole long at a time (either 4 or 8 bytes),</font></i>
<a name='L2562'><i><font color='green'>                       and do a fast unrolled copy if it only contains ASCII</font></i>
<a name='L2563'><i><font color='green'>                       characters. */</font></i>
<a name='L2564'>                    <b>unsigned</b> <b>long</b> data = *(<b>unsigned</b> <b>long</b> *) _s;
<a name='L2565'>                    <b>if</b> (data &amp; <a href='../D/94.html' title='Multiple defined in 3 places.'>ASCII_CHAR_MASK</a>)
<a name='L2566'>                        <b>break</b>;
<a name='L2567'>                    _p[0] = (<b>unsigned</b> <b>char</b>) _s[0];
<a name='L2568'>                    _p[1] = (<b>unsigned</b> <b>char</b>) _s[1];
<a name='L2569'>                    _p[2] = (<b>unsigned</b> <b>char</b>) _s[2];
<a name='L2570'>                    _p[3] = (<b>unsigned</b> <b>char</b>) _s[3];
<a name='L2571'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> == 8)
<a name='L2572'>                    _p[4] = (<b>unsigned</b> <b>char</b>) _s[4];
<a name='L2573'>                    _p[5] = (<b>unsigned</b> <b>char</b>) _s[5];
<a name='L2574'>                    _p[6] = (<b>unsigned</b> <b>char</b>) _s[6];
<a name='L2575'>                    _p[7] = (<b>unsigned</b> <b>char</b>) _s[7];
<a name='L2576'><font color='darkred'>#endif</font>
<a name='L2577'>                    _s += <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>;
<a name='L2578'>                    _p += <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>;
<a name='L2579'>                <font color='red'>}</font>
<a name='L2580'>                s = _s;
<a name='L2581'>                p = _p;
<a name='L2582'>                <b>if</b> (s == e)
<a name='L2583'>                    <b>break</b>;
<a name='L2584'>                ch = (<b>unsigned</b> <b>char</b>)*s;
<a name='L2585'>            <font color='red'>}</font>
<a name='L2586'>        <font color='red'>}</font>
<a name='L2587'>
<a name='L2588'>        <b>if</b> (ch &lt; 0x80) <font color='red'>{</font>
<a name='L2589'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)ch;
<a name='L2590'>            s++;
<a name='L2591'>            <b>continue</b>;
<a name='L2592'>        <font color='red'>}</font>
<a name='L2593'>
<a name='L2594'>        n = utf8_code_length[ch];
<a name='L2595'>
<a name='L2596'>        <b>if</b> (s + n &gt; e) <font color='red'>{</font>
<a name='L2597'>            <b>if</b> (consumed)
<a name='L2598'>                <b>break</b>;
<a name='L2599'>            <b>else</b> <font color='red'>{</font>
<a name='L2600'>                errmsg = "unexpected end of data";
<a name='L2601'>                startinpos = s-starts;
<a name='L2602'>                endinpos = startinpos+1;
<a name='L2603'>                <b>for</b> (k=1; (k &lt; size-startinpos) &amp;&amp; ((s[k]&amp;0xC0) == 0x80); k++)
<a name='L2604'>                    endinpos++;
<a name='L2605'>                <b>goto</b> utf8Error;
<a name='L2606'>            <font color='red'>}</font>
<a name='L2607'>        <font color='red'>}</font>
<a name='L2608'>
<a name='L2609'>        <b>switch</b> (n) <font color='red'>{</font>
<a name='L2610'>
<a name='L2611'>        <b>case</b> 0:
<a name='L2612'>            errmsg = "invalid start byte";
<a name='L2613'>            startinpos = s-starts;
<a name='L2614'>            endinpos = startinpos+1;
<a name='L2615'>            <b>goto</b> utf8Error;
<a name='L2616'>
<a name='L2617'>        <b>case</b> 1:
<a name='L2618'>            errmsg = "internal error";
<a name='L2619'>            startinpos = s-starts;
<a name='L2620'>            endinpos = startinpos+1;
<a name='L2621'>            <b>goto</b> utf8Error;
<a name='L2622'>
<a name='L2623'>        <b>case</b> 2:
<a name='L2624'>            <b>if</b> ((s[1] &amp; 0xc0) != 0x80) <font color='red'>{</font>
<a name='L2625'>                errmsg = "invalid continuation byte";
<a name='L2626'>                startinpos = s-starts;
<a name='L2627'>                endinpos = startinpos + 1;
<a name='L2628'>                <b>goto</b> utf8Error;
<a name='L2629'>            <font color='red'>}</font>
<a name='L2630'>            ch = ((s[0] &amp; 0x1f) &lt;&lt; 6) + (s[1] &amp; 0x3f);
<a name='L2631'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> ((ch &gt; 0x007F) &amp;&amp; (ch &lt;= 0x07FF));
<a name='L2632'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)ch;
<a name='L2633'>            <b>break</b>;
<a name='L2634'>
<a name='L2635'>        <b>case</b> 3:
<a name='L2636'>            <i><font color='green'>/* Decoding UTF-8 sequences in range \xed\xa0\x80-\xed\xbf\xbf</font></i>
<a name='L2637'><i><font color='green'>               will result in surrogates in range d800-dfff. Surrogates are</font></i>
<a name='L2638'><i><font color='green'>               not valid UTF-8 so they are rejected.</font></i>
<a name='L2639'><i><font color='green'>               See http://www.unicode.org/versions/Unicode5.2.0/ch03.pdf</font></i>
<a name='L2640'><i><font color='green'>               (table 3-7) and http://www.rfc-editor.org/rfc/rfc3629.txt */</font></i>
<a name='L2641'>            <b>if</b> ((s[1] &amp; 0xc0) != 0x80 ||
<a name='L2642'>                (s[2] &amp; 0xc0) != 0x80 ||
<a name='L2643'>                ((<b>unsigned</b> <b>char</b>)s[0] == 0xE0 &amp;&amp;
<a name='L2644'>                 (<b>unsigned</b> <b>char</b>)s[1] &lt; 0xA0) ||
<a name='L2645'>                ((<b>unsigned</b> <b>char</b>)s[0] == 0xED &amp;&amp;
<a name='L2646'>                 (<b>unsigned</b> <b>char</b>)s[1] &gt; 0x9F)) <font color='red'>{</font>
<a name='L2647'>                errmsg = "invalid continuation byte";
<a name='L2648'>                startinpos = s-starts;
<a name='L2649'>                endinpos = startinpos + 1;
<a name='L2650'>
<a name='L2651'>                <i><font color='green'>/* if s[1] first two bits are 1 and 0, then the invalid</font></i>
<a name='L2652'><i><font color='green'>                   continuation byte is s[2], so increment endinpos by 1,</font></i>
<a name='L2653'><i><font color='green'>                   if not, s[1] is invalid and endinpos doesn't need to</font></i>
<a name='L2654'><i><font color='green'>                   be incremented. */</font></i>
<a name='L2655'>                <b>if</b> ((s[1] &amp; 0xC0) == 0x80)
<a name='L2656'>                    endinpos++;
<a name='L2657'>                <b>goto</b> utf8Error;
<a name='L2658'>            <font color='red'>}</font>
<a name='L2659'>            ch = ((s[0] &amp; 0x0f) &lt;&lt; 12) + ((s[1] &amp; 0x3f) &lt;&lt; 6) + (s[2] &amp; 0x3f);
<a name='L2660'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> ((ch &gt; 0x07FF) &amp;&amp; (ch &lt;= 0xFFFF));
<a name='L2661'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)ch;
<a name='L2662'>            <b>break</b>;
<a name='L2663'>
<a name='L2664'>        <b>case</b> 4:
<a name='L2665'>            <b>if</b> ((s[1] &amp; 0xc0) != 0x80 ||
<a name='L2666'>                (s[2] &amp; 0xc0) != 0x80 ||
<a name='L2667'>                (s[3] &amp; 0xc0) != 0x80 ||
<a name='L2668'>                ((<b>unsigned</b> <b>char</b>)s[0] == 0xF0 &amp;&amp;
<a name='L2669'>                 (<b>unsigned</b> <b>char</b>)s[1] &lt; 0x90) ||
<a name='L2670'>                ((<b>unsigned</b> <b>char</b>)s[0] == 0xF4 &amp;&amp;
<a name='L2671'>                 (<b>unsigned</b> <b>char</b>)s[1] &gt; 0x8F)) <font color='red'>{</font>
<a name='L2672'>                errmsg = "invalid continuation byte";
<a name='L2673'>                startinpos = s-starts;
<a name='L2674'>                endinpos = startinpos + 1;
<a name='L2675'>                <b>if</b> ((s[1] &amp; 0xC0) == 0x80) <font color='red'>{</font>
<a name='L2676'>                    endinpos++;
<a name='L2677'>                    <b>if</b> ((s[2] &amp; 0xC0) == 0x80)
<a name='L2678'>                        endinpos++;
<a name='L2679'>                <font color='red'>}</font>
<a name='L2680'>                <b>goto</b> utf8Error;
<a name='L2681'>            <font color='red'>}</font>
<a name='L2682'>            ch = ((s[0] &amp; 0x7) &lt;&lt; 18) + ((s[1] &amp; 0x3f) &lt;&lt; 12) +
<a name='L2683'>                 ((s[2] &amp; 0x3f) &lt;&lt; 6) + (s[3] &amp; 0x3f);
<a name='L2684'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> ((ch &gt; 0xFFFF) &amp;&amp; (ch &lt;= 0x10ffff));
<a name='L2685'>
<a name='L2686'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L2687'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)ch;
<a name='L2688'><font color='darkred'>#else</font>
<a name='L2689'>            <i><font color='green'>/*  compute and append the two surrogates: */</font></i>
<a name='L2690'>
<a name='L2691'>            <i><font color='green'>/*  translate from 10000..10FFFF to 0..FFFF */</font></i>
<a name='L2692'>            ch -= 0x10000;
<a name='L2693'>
<a name='L2694'>            <i><font color='green'>/*  high surrogate = top 10 bits added to D800 */</font></i>
<a name='L2695'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)(0xD800 + (ch &gt;&gt; 10));
<a name='L2696'>
<a name='L2697'>            <i><font color='green'>/*  low surrogate = bottom 10 bits added to DC00 */</font></i>
<a name='L2698'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)(0xDC00 + (ch &amp; 0x03FF));
<a name='L2699'><font color='darkred'>#endif</font>
<a name='L2700'>            <b>break</b>;
<a name='L2701'>        <font color='red'>}</font>
<a name='L2702'>        s += n;
<a name='L2703'>        <b>continue</b>;
<a name='L2704'>
<a name='L2705'>      utf8Error:
<a name='L2706'>        outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L2707'>        <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L2708'>                errors, &amp;errorHandler,
<a name='L2709'>                "utf8", errmsg,
<a name='L2710'>                &amp;starts, &amp;e, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L2711'>                &amp;unicode, &amp;outpos, &amp;p))
<a name='L2712'>            <b>goto</b> onError;
<a name='L2713'>        aligned_end = (<b>const</b> <b>char</b> *) ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>) e &amp; ~<a href='../S/2828.html#L2499' title='Defined at 2499 in Objects/unicodeobject.c.'>LONG_PTR_MASK</a>);
<a name='L2714'>    <font color='red'>}</font>
<a name='L2715'>    <b>if</b> (consumed)
<a name='L2716'>        *consumed = s-starts;
<a name='L2717'>
<a name='L2718'>    <i><font color='green'>/* Adjust length */</font></i>
<a name='L2719'>    <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;unicode, p - unicode-&gt;str) &lt; 0)
<a name='L2720'>        <b>goto</b> onError;
<a name='L2721'>
<a name='L2722'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L2723'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L2724'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L2725'>
<a name='L2726'>  onError:
<a name='L2727'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L2728'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L2729'>    Py_DECREF(unicode);
<a name='L2730'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2731'><font color='red'>}</font>
<a name='L2732'>
<a name='L2733'><font color='darkred'>#undef</font> <a href='../S/2828.html#L2565' title='Refered from 2565 in Objects/unicodeobject.c.'>ASCII_CHAR_MASK</a>
<a name='L2734'>
<a name='L2735'><font color='darkred'>#ifdef</font> __APPLE__
<a name='L2736'>
<a name='L2737'><i><font color='green'>/* Simplified UTF-8 decoder using surrogateescape error handler,</font></i>
<a name='L2738'><i><font color='green'>   used to decode the command line arguments on Mac OS X. */</font></i>
<a name='L2739'>
<a name='L2740'>wchar_t*
<a name='L2741'><a href='../R/5564.html' title='Multiple refered from 2 places.'>_Py_DecodeUTF8_surrogateescape</a>(<b>const</b> <b>char</b> *s, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L2742'><font color='red'>{</font>
<a name='L2743'>    <b>int</b> n;
<a name='L2744'>    <b>const</b> <b>char</b> *e;
<a name='L2745'>    wchar_t *unicode, *p;
<a name='L2746'>
<a name='L2747'>    <i><font color='green'>/* Note: size will always be longer than the resulting Unicode</font></i>
<a name='L2748'><i><font color='green'>       character count */</font></i>
<a name='L2749'>    <b>if</b> (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / <b>sizeof</b>(wchar_t) &lt; (size + 1)) <font color='red'>{</font>
<a name='L2750'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L2751'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2752'>    <font color='red'>}</font>
<a name='L2753'>    unicode = <a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>((size + 1) * <b>sizeof</b>(wchar_t));
<a name='L2754'>    <b>if</b> (!unicode)
<a name='L2755'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2756'>
<a name='L2757'>    <i><font color='green'>/* Unpack UTF-8 encoded data */</font></i>
<a name='L2758'>    p = unicode;
<a name='L2759'>    e = s + size;
<a name='L2760'>    <b>while</b> (s &lt; e) <font color='red'>{</font>
<a name='L2761'>        <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ch = (<b>unsigned</b> <b>char</b>)*s;
<a name='L2762'>
<a name='L2763'>        <b>if</b> (ch &lt; 0x80) <font color='red'>{</font>
<a name='L2764'>            *p++ = (wchar_t)ch;
<a name='L2765'>            s++;
<a name='L2766'>            <b>continue</b>;
<a name='L2767'>        <font color='red'>}</font>
<a name='L2768'>
<a name='L2769'>        n = utf8_code_length[ch];
<a name='L2770'>        <b>if</b> (s + n &gt; e) <font color='red'>{</font>
<a name='L2771'>            <b>goto</b> surrogateescape;
<a name='L2772'>        <font color='red'>}</font>
<a name='L2773'>
<a name='L2774'>        <b>switch</b> (n) <font color='red'>{</font>
<a name='L2775'>        <b>case</b> 0:
<a name='L2776'>        <b>case</b> 1:
<a name='L2777'>            <b>goto</b> surrogateescape;
<a name='L2778'>
<a name='L2779'>        <b>case</b> 2:
<a name='L2780'>            <b>if</b> ((s[1] &amp; 0xc0) != 0x80)
<a name='L2781'>                <b>goto</b> surrogateescape;
<a name='L2782'>            ch = ((s[0] &amp; 0x1f) &lt;&lt; 6) + (s[1] &amp; 0x3f);
<a name='L2783'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> ((ch &gt; 0x007F) &amp;&amp; (ch &lt;= 0x07FF));
<a name='L2784'>            *p++ = (wchar_t)ch;
<a name='L2785'>            <b>break</b>;
<a name='L2786'>
<a name='L2787'>        <b>case</b> 3:
<a name='L2788'>            <i><font color='green'>/* Decoding UTF-8 sequences in range \xed\xa0\x80-\xed\xbf\xbf</font></i>
<a name='L2789'><i><font color='green'>               will result in surrogates in range d800-dfff. Surrogates are</font></i>
<a name='L2790'><i><font color='green'>               not valid UTF-8 so they are rejected.</font></i>
<a name='L2791'><i><font color='green'>               See http://www.unicode.org/versions/Unicode5.2.0/ch03.pdf</font></i>
<a name='L2792'><i><font color='green'>               (table 3-7) and http://www.rfc-editor.org/rfc/rfc3629.txt */</font></i>
<a name='L2793'>            <b>if</b> ((s[1] &amp; 0xc0) != 0x80 ||
<a name='L2794'>                (s[2] &amp; 0xc0) != 0x80 ||
<a name='L2795'>                ((<b>unsigned</b> <b>char</b>)s[0] == 0xE0 &amp;&amp;
<a name='L2796'>                 (<b>unsigned</b> <b>char</b>)s[1] &lt; 0xA0) ||
<a name='L2797'>                ((<b>unsigned</b> <b>char</b>)s[0] == 0xED &amp;&amp;
<a name='L2798'>                 (<b>unsigned</b> <b>char</b>)s[1] &gt; 0x9F)) <font color='red'>{</font>
<a name='L2799'>
<a name='L2800'>                <b>goto</b> surrogateescape;
<a name='L2801'>            <font color='red'>}</font>
<a name='L2802'>            ch = ((s[0] &amp; 0x0f) &lt;&lt; 12) + ((s[1] &amp; 0x3f) &lt;&lt; 6) + (s[2] &amp; 0x3f);
<a name='L2803'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> ((ch &gt; 0x07FF) &amp;&amp; (ch &lt;= 0xFFFF));
<a name='L2804'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)ch;
<a name='L2805'>            <b>break</b>;
<a name='L2806'>
<a name='L2807'>        <b>case</b> 4:
<a name='L2808'>            <b>if</b> ((s[1] &amp; 0xc0) != 0x80 ||
<a name='L2809'>                (s[2] &amp; 0xc0) != 0x80 ||
<a name='L2810'>                (s[3] &amp; 0xc0) != 0x80 ||
<a name='L2811'>                ((<b>unsigned</b> <b>char</b>)s[0] == 0xF0 &amp;&amp;
<a name='L2812'>                 (<b>unsigned</b> <b>char</b>)s[1] &lt; 0x90) ||
<a name='L2813'>                ((<b>unsigned</b> <b>char</b>)s[0] == 0xF4 &amp;&amp;
<a name='L2814'>                 (<b>unsigned</b> <b>char</b>)s[1] &gt; 0x8F)) <font color='red'>{</font>
<a name='L2815'>                <b>goto</b> surrogateescape;
<a name='L2816'>            <font color='red'>}</font>
<a name='L2817'>            ch = ((s[0] &amp; 0x7) &lt;&lt; 18) + ((s[1] &amp; 0x3f) &lt;&lt; 12) +
<a name='L2818'>                 ((s[2] &amp; 0x3f) &lt;&lt; 6) + (s[3] &amp; 0x3f);
<a name='L2819'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a> ((ch &gt; 0xFFFF) &amp;&amp; (ch &lt;= 0x10ffff));
<a name='L2820'>
<a name='L2821'><font color='darkred'>#if</font> <a href='../S/2906.html#L727' title='Defined at 727 in PC/pyconfig.h.'>SIZEOF_WCHAR_T</a> == 4
<a name='L2822'>            *p++ = (wchar_t)ch;
<a name='L2823'><font color='darkred'>#else</font>
<a name='L2824'>            <i><font color='green'>/*  compute and append the two surrogates: */</font></i>
<a name='L2825'>
<a name='L2826'>            <i><font color='green'>/*  translate from 10000..10FFFF to 0..FFFF */</font></i>
<a name='L2827'>            ch -= 0x10000;
<a name='L2828'>
<a name='L2829'>            <i><font color='green'>/*  high surrogate = top 10 bits added to D800 */</font></i>
<a name='L2830'>            *p++ = (wchar_t)(0xD800 + (ch &gt;&gt; 10));
<a name='L2831'>
<a name='L2832'>            <i><font color='green'>/*  low surrogate = bottom 10 bits added to DC00 */</font></i>
<a name='L2833'>            *p++ = (wchar_t)(0xDC00 + (ch &amp; 0x03FF));
<a name='L2834'><font color='darkred'>#endif</font>
<a name='L2835'>            <b>break</b>;
<a name='L2836'>        <font color='red'>}</font>
<a name='L2837'>        s += n;
<a name='L2838'>        <b>continue</b>;
<a name='L2839'>
<a name='L2840'>      surrogateescape:
<a name='L2841'>        *p++ = 0xDC00 + ch;
<a name='L2842'>        s++;
<a name='L2843'>    <font color='red'>}</font>
<a name='L2844'>    *p = L'\0';
<a name='L2845'>    <b>return</b> unicode;
<a name='L2846'><font color='red'>}</font>
<a name='L2847'>
<a name='L2848'><font color='darkred'>#endif</font> <i><font color='green'>/* __APPLE__ */</font></i>
<a name='L2849'>
<a name='L2850'><i><font color='green'>/* Allocation strategy:  if the string is short, convert into a stack buffer</font></i>
<a name='L2851'><i><font color='green'>   and allocate exactly as much space needed at the end.  Else allocate the</font></i>
<a name='L2852'><i><font color='green'>   maximum possible needed (4 result bytes per Unicode character), and return</font></i>
<a name='L2853'><i><font color='green'>   the excess memory at the end.</font></i>
<a name='L2854'><i><font color='green'>*/</font></i>
<a name='L2855'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2856'><a href='../R/3578.html' title='Multiple refered from 10 places.'>PyUnicode_EncodeUTF8</a>(<b>const</b> Py_UNICODE *s,
<a name='L2857'>                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L2858'>                     <b>const</b> <b>char</b> *errors)
<a name='L2859'><font color='red'>{</font>
<a name='L2860'><font color='darkred'>#define</font> <a href='../R/1879.html' title='Multiple refered from 2 places.'>MAX_SHORT_UNICHARS</a> 300  <i><font color='green'>/* largest size we'll do on the stack */</font></i>
<a name='L2861'>
<a name='L2862'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;                <i><font color='green'>/* index into s of next input byte */</font></i>
<a name='L2863'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;            <i><font color='green'>/* result string object */</font></i>
<a name='L2864'>    <b>char</b> *p;                     <i><font color='green'>/* next free byte in output buffer */</font></i>
<a name='L2865'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nallocated;      <i><font color='green'>/* number of result bytes allocated */</font></i>
<a name='L2866'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nneeded;            <i><font color='green'>/* number of result bytes needed */</font></i>
<a name='L2867'>    <b>char</b> stackbuf[<a href='../D/2078.html' title='Multiple defined in 2 places.'>MAX_SHORT_UNICHARS</a> * 4];
<a name='L2868'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2869'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2870'>
<a name='L2871'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(s != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L2872'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(size &gt;= 0);
<a name='L2873'>
<a name='L2874'>    <b>if</b> (size &lt;= <a href='../D/2078.html' title='Multiple defined in 2 places.'>MAX_SHORT_UNICHARS</a>) <font color='red'>{</font>
<a name='L2875'>        <i><font color='green'>/* Write into the stack buffer; nallocated can't overflow.</font></i>
<a name='L2876'><i><font color='green'>         * At the end, we'll allocate exactly as much heap space as it</font></i>
<a name='L2877'><i><font color='green'>         * turns out we need.</font></i>
<a name='L2878'><i><font color='green'>         */</font></i>
<a name='L2879'>        nallocated = <a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(<b>sizeof</b>(stackbuf), <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>, <b>int</b>);
<a name='L2880'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;   <i><font color='green'>/* will allocate after we're done */</font></i>
<a name='L2881'>        p = stackbuf;
<a name='L2882'>    <font color='red'>}</font>
<a name='L2883'>    <b>else</b> <font color='red'>{</font>
<a name='L2884'>        <i><font color='green'>/* Overallocate on the heap, and give the excess back at the end. */</font></i>
<a name='L2885'>        nallocated = size * 4;
<a name='L2886'>        <b>if</b> (nallocated / 4 != size)  <i><font color='green'>/* overflow! */</font></i>
<a name='L2887'>            <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L2888'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, nallocated);
<a name='L2889'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2890'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2891'>        p = PyBytes_AS_STRING(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L2892'>    <font color='red'>}</font>
<a name='L2893'>
<a name='L2894'>    <b>for</b> (i = 0; i &lt; size;) <font color='red'>{</font>
<a name='L2895'>        <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ch = s[i++];
<a name='L2896'>
<a name='L2897'>        <b>if</b> (ch &lt; 0x80)
<a name='L2898'>            <i><font color='green'>/* Encode ASCII */</font></i>
<a name='L2899'>            *p++ = (<b>char</b>) ch;
<a name='L2900'>
<a name='L2901'>        <b>else</b> <b>if</b> (ch &lt; 0x0800) <font color='red'>{</font>
<a name='L2902'>            <i><font color='green'>/* Encode Latin-1 */</font></i>
<a name='L2903'>            *p++ = (<b>char</b>)(0xc0 | (ch &gt;&gt; 6));
<a name='L2904'>            *p++ = (<b>char</b>)(0x80 | (ch &amp; 0x3f));
<a name='L2905'>        <font color='red'>}</font> <b>else</b> <b>if</b> (0xD800 &lt;= ch &amp;&amp; ch &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L2906'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L2907'>            <i><font color='green'>/* Special case: check for high and low surrogate */</font></i>
<a name='L2908'>            <b>if</b> (ch &lt;= 0xDBFF &amp;&amp; i != size &amp;&amp; 0xDC00 &lt;= s[i] &amp;&amp; s[i] &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L2909'>                <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ch2 = s[i];
<a name='L2910'>                <i><font color='green'>/* Combine the two surrogates to form a UCS4 value */</font></i>
<a name='L2911'>                ch = ((ch - 0xD800) &lt;&lt; 10 | (ch2 - 0xDC00)) + 0x10000;
<a name='L2912'>                i++;
<a name='L2913'>
<a name='L2914'>                <i><font color='green'>/* Encode UCS4 Unicode ordinals */</font></i>
<a name='L2915'>                *p++ = (<b>char</b>)(0xf0 | (ch &gt;&gt; 18));
<a name='L2916'>                *p++ = (<b>char</b>)(0x80 | ((ch &gt;&gt; 12) &amp; 0x3f));
<a name='L2917'>                *p++ = (<b>char</b>)(0x80 | ((ch &gt;&gt; 6) &amp; 0x3f));
<a name='L2918'>                *p++ = (<b>char</b>)(0x80 | (ch &amp; 0x3f));
<a name='L2919'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L2920'><font color='darkred'>#endif</font>
<a name='L2921'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> newpos;
<a name='L2922'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *rep;
<a name='L2923'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> repsize, k;
<a name='L2924'>                rep = <a href='../S/2828.html#L4494' title='Defined at 4494 in Objects/unicodeobject.c.'>unicode_encode_call_errorhandler</a>
<a name='L2925'>                    (errors, &amp;errorHandler, "utf-8", "surrogates not allowed",
<a name='L2926'>                     s, size, &amp;exc, i-1, i, &amp;newpos);
<a name='L2927'>                <b>if</b> (!rep)
<a name='L2928'>                    <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2929'>
<a name='L2930'>                <b>if</b> (PyBytes_Check(rep))
<a name='L2931'>                    repsize = PyBytes_GET_SIZE(rep);
<a name='L2932'>                <b>else</b>
<a name='L2933'>                    repsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(rep);
<a name='L2934'>
<a name='L2935'>                <b>if</b> (repsize &gt; 4) <font color='red'>{</font>
<a name='L2936'>                    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> offset;
<a name='L2937'>
<a name='L2938'>                    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2939'>                        offset = p - stackbuf;
<a name='L2940'>                    <b>else</b>
<a name='L2941'>                        offset = p - PyBytes_AS_STRING(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L2942'>
<a name='L2943'>                    <b>if</b> (nallocated &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - repsize + 4) <font color='red'>{</font>
<a name='L2944'>                        <i><font color='green'>/* integer overflow */</font></i>
<a name='L2945'>                        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L2946'>                        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2947'>                    <font color='red'>}</font>
<a name='L2948'>                    nallocated += repsize - 4;
<a name='L2949'>                    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2950'>                        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, nallocated) &lt; 0)
<a name='L2951'>                            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2952'>                    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L2953'>                        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, nallocated);
<a name='L2954'>                        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2955'>                            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2956'>                        <a href='../D/4187.html' title='Multiple defined in 2 places.'>Py_MEMCPY</a>(PyBytes_AS_STRING(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>), stackbuf, offset);
<a name='L2957'>                    <font color='red'>}</font>
<a name='L2958'>                    p = PyBytes_AS_STRING(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) + offset;
<a name='L2959'>                <font color='red'>}</font>
<a name='L2960'>
<a name='L2961'>                <b>if</b> (PyBytes_Check(rep)) <font color='red'>{</font>
<a name='L2962'>                    <b>char</b> *prep = PyBytes_AS_STRING(rep);
<a name='L2963'>                    <b>for</b>(k = repsize; k &gt; 0; k--)
<a name='L2964'>                        *p++ = *prep++;
<a name='L2965'>                <font color='red'>}</font> <b>else</b> <i><font color='green'>/* rep is unicode */</font></i> <font color='red'>{</font>
<a name='L2966'>                    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *prep = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(rep);
<a name='L2967'>                    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> c;
<a name='L2968'>
<a name='L2969'>                    <b>for</b>(k=0; k&lt;repsize; k++) <font color='red'>{</font>
<a name='L2970'>                        c = prep[k];
<a name='L2971'>                        <b>if</b> (0x80 &lt;= c) <font color='red'>{</font>
<a name='L2972'>                            <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(&amp;exc, "utf-8", s, size,
<a name='L2973'>                                                   i-1, i, "surrogates not allowed");
<a name='L2974'>                            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L2975'>                        <font color='red'>}</font>
<a name='L2976'>                        *p++ = (<b>char</b>)prep[k];
<a name='L2977'>                    <font color='red'>}</font>
<a name='L2978'>                <font color='red'>}</font>
<a name='L2979'>                Py_DECREF(rep);
<a name='L2980'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L2981'>            <font color='red'>}</font>
<a name='L2982'><font color='darkred'>#endif</font>
<a name='L2983'>        <font color='red'>}</font> <b>else</b> <b>if</b> (ch &lt; 0x10000) <font color='red'>{</font>
<a name='L2984'>            *p++ = (<b>char</b>)(0xe0 | (ch &gt;&gt; 12));
<a name='L2985'>            *p++ = (<b>char</b>)(0x80 | ((ch &gt;&gt; 6) &amp; 0x3f));
<a name='L2986'>            *p++ = (<b>char</b>)(0x80 | (ch &amp; 0x3f));
<a name='L2987'>        <font color='red'>}</font> <b>else</b> <i><font color='green'>/* ch &gt;= 0x10000 */</font></i> <font color='red'>{</font>
<a name='L2988'>            <i><font color='green'>/* Encode UCS4 Unicode ordinals */</font></i>
<a name='L2989'>            *p++ = (<b>char</b>)(0xf0 | (ch &gt;&gt; 18));
<a name='L2990'>            *p++ = (<b>char</b>)(0x80 | ((ch &gt;&gt; 12) &amp; 0x3f));
<a name='L2991'>            *p++ = (<b>char</b>)(0x80 | ((ch &gt;&gt; 6) &amp; 0x3f));
<a name='L2992'>            *p++ = (<b>char</b>)(0x80 | (ch &amp; 0x3f));
<a name='L2993'>        <font color='red'>}</font>
<a name='L2994'>    <font color='red'>}</font>
<a name='L2995'>
<a name='L2996'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2997'>        <i><font color='green'>/* This was stack allocated. */</font></i>
<a name='L2998'>        nneeded = p - stackbuf;
<a name='L2999'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(nneeded &lt;= nallocated);
<a name='L3000'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(stackbuf, nneeded);
<a name='L3001'>    <font color='red'>}</font>
<a name='L3002'>    <b>else</b> <font color='red'>{</font>
<a name='L3003'>        <i><font color='green'>/* Cut back to size actually needed. */</font></i>
<a name='L3004'>        nneeded = p - PyBytes_AS_STRING(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L3005'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(nneeded &lt;= nallocated);
<a name='L3006'>        <a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, nneeded);
<a name='L3007'>    <font color='red'>}</font>
<a name='L3008'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3009'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3010'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L3011'> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L3012'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3013'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3014'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L3015'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3016'>
<a name='L3017'><font color='darkred'>#undef</font> <a href='../R/1879.html' title='Multiple refered from 2 places.'>MAX_SHORT_UNICHARS</a>
<a name='L3018'><font color='red'>}</font>
<a name='L3019'>
<a name='L3020'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3542.html' title='Multiple refered from 4 places.'>PyUnicode_AsUTF8String</a>(PyObject *unicode)
<a name='L3021'><font color='red'>{</font>
<a name='L3022'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L3023'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L3024'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3025'>    <font color='red'>}</font>
<a name='L3026'>    <b>return</b> <a href='../D/4001.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF8</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L3027'>                                <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L3028'>                                <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L3029'><font color='red'>}</font>
<a name='L3030'>
<a name='L3031'><i><font color='green'>/* --- UTF-32 Codec ------------------------------------------------------- */</font></i>
<a name='L3032'>
<a name='L3033'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3034'><a href='../R/3563.html' title='Multiple refered from 2 places.'>PyUnicode_DecodeUTF32</a>(<b>const</b> <b>char</b> *s,
<a name='L3035'>                      <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L3036'>                      <b>const</b> <b>char</b> *errors,
<a name='L3037'>                      <b>int</b> *byteorder)
<a name='L3038'><font color='red'>{</font>
<a name='L3039'>    <b>return</b> <a href='../D/3984.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF32Stateful</a>(s, size, errors, byteorder, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L3040'><font color='red'>}</font>
<a name='L3041'>
<a name='L3042'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3043'><a href='../R/3564.html' title='Multiple refered from 5 places.'>PyUnicode_DecodeUTF32Stateful</a>(<b>const</b> <b>char</b> *s,
<a name='L3044'>                              <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L3045'>                              <b>const</b> <b>char</b> *errors,
<a name='L3046'>                              <b>int</b> *byteorder,
<a name='L3047'>                              <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *consumed)
<a name='L3048'><font color='red'>{</font>
<a name='L3049'>    <b>const</b> <b>char</b> *starts = s;
<a name='L3050'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L3051'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L3052'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L3053'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L3054'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L3055'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3056'>    <b>int</b> pairs = 0;
<a name='L3057'>    <b>const</b> <b>unsigned</b> <b>char</b> *qq;
<a name='L3058'><font color='darkred'>#else</font>
<a name='L3059'>    <b>const</b> <b>int</b> pairs = 0;
<a name='L3060'><font color='darkred'>#endif</font>
<a name='L3061'>    <b>const</b> <b>unsigned</b> <b>char</b> *q, *e;
<a name='L3062'>    <b>int</b> bo = 0;       <i><font color='green'>/* assume native ordering by default */</font></i>
<a name='L3063'>    <b>const</b> <b>char</b> *errmsg = "";
<a name='L3064'>    <i><font color='green'>/* Offsets from q for retrieving bytes in the right order. */</font></i>
<a name='L3065'><font color='darkred'>#ifdef</font> <a href='../S/2828.html#L78' title='Defined at 78 in Objects/unicodeobject.c.'>BYTEORDER_IS_LITTLE_ENDIAN</a>
<a name='L3066'>    <b>int</b> iorder[] = <font color='red'>{</font>0, 1, 2, 3<font color='red'>}</font>;
<a name='L3067'><font color='darkred'>#else</font>
<a name='L3068'>    <b>int</b> iorder[] = <font color='red'>{</font>3, 2, 1, 0<font color='red'>}</font>;
<a name='L3069'><font color='darkred'>#endif</font>
<a name='L3070'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3071'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3072'>
<a name='L3073'>    q = (<b>unsigned</b> <b>char</b> *)s;
<a name='L3074'>    e = q + size;
<a name='L3075'>
<a name='L3076'>    <b>if</b> (byteorder)
<a name='L3077'>        bo = *byteorder;
<a name='L3078'>
<a name='L3079'>    <i><font color='green'>/* Check for BOM marks (U+FEFF) in the input and adjust current</font></i>
<a name='L3080'><i><font color='green'>       byte order setting accordingly. In native mode, the leading BOM</font></i>
<a name='L3081'><i><font color='green'>       mark is skipped, in all other modes, it is copied to the output</font></i>
<a name='L3082'><i><font color='green'>       stream as-is (giving a ZWNBSP character). */</font></i>
<a name='L3083'>    <b>if</b> (bo == 0) <font color='red'>{</font>
<a name='L3084'>        <b>if</b> (size &gt;= 4) <font color='red'>{</font>
<a name='L3085'>            <b>const</b> <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> bom = (q[iorder[3]] &lt;&lt; 24) | (q[iorder[2]] &lt;&lt; 16) |
<a name='L3086'>                (q[iorder[1]] &lt;&lt; 8) | q[iorder[0]];
<a name='L3087'><font color='darkred'>#ifdef</font> <a href='../S/2828.html#L78' title='Defined at 78 in Objects/unicodeobject.c.'>BYTEORDER_IS_LITTLE_ENDIAN</a>
<a name='L3088'>            <b>if</b> (bom == 0x0000FEFF) <font color='red'>{</font>
<a name='L3089'>                q += 4;
<a name='L3090'>                bo = -1;
<a name='L3091'>            <font color='red'>}</font>
<a name='L3092'>            <b>else</b> <b>if</b> (bom == 0xFFFE0000) <font color='red'>{</font>
<a name='L3093'>                q += 4;
<a name='L3094'>                bo = 1;
<a name='L3095'>            <font color='red'>}</font>
<a name='L3096'><font color='darkred'>#else</font>
<a name='L3097'>            <b>if</b> (bom == 0x0000FEFF) <font color='red'>{</font>
<a name='L3098'>                q += 4;
<a name='L3099'>                bo = 1;
<a name='L3100'>            <font color='red'>}</font>
<a name='L3101'>            <b>else</b> <b>if</b> (bom == 0xFFFE0000) <font color='red'>{</font>
<a name='L3102'>                q += 4;
<a name='L3103'>                bo = -1;
<a name='L3104'>            <font color='red'>}</font>
<a name='L3105'><font color='darkred'>#endif</font>
<a name='L3106'>        <font color='red'>}</font>
<a name='L3107'>    <font color='red'>}</font>
<a name='L3108'>
<a name='L3109'>    <b>if</b> (bo == -1) <font color='red'>{</font>
<a name='L3110'>        <i><font color='green'>/* force LE */</font></i>
<a name='L3111'>        iorder[0] = 0;
<a name='L3112'>        iorder[1] = 1;
<a name='L3113'>        iorder[2] = 2;
<a name='L3114'>        iorder[3] = 3;
<a name='L3115'>    <font color='red'>}</font>
<a name='L3116'>    <b>else</b> <b>if</b> (bo == 1) <font color='red'>{</font>
<a name='L3117'>        <i><font color='green'>/* force BE */</font></i>
<a name='L3118'>        iorder[0] = 3;
<a name='L3119'>        iorder[1] = 2;
<a name='L3120'>        iorder[2] = 1;
<a name='L3121'>        iorder[3] = 0;
<a name='L3122'>    <font color='red'>}</font>
<a name='L3123'>
<a name='L3124'>    <i><font color='green'>/* On narrow builds we split characters outside the BMP into two</font></i>
<a name='L3125'><i><font color='green'>       codepoints =&gt; count how much extra space we need. */</font></i>
<a name='L3126'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3127'>    <b>for</b> (qq = q; qq &lt; e; qq += 4)
<a name='L3128'>        <b>if</b> (qq[iorder[2]] != 0 || qq[iorder[3]] != 0)
<a name='L3129'>            pairs++;
<a name='L3130'><font color='darkred'>#endif</font>
<a name='L3131'>
<a name='L3132'>    <i><font color='green'>/* This might be one to much, because of a BOM */</font></i>
<a name='L3133'>    unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>((size+3)/4+pairs);
<a name='L3134'>    <b>if</b> (!unicode)
<a name='L3135'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3136'>    <b>if</b> (size == 0)
<a name='L3137'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L3138'>
<a name='L3139'>    <i><font color='green'>/* Unpack UTF-32 encoded data */</font></i>
<a name='L3140'>    p = unicode-&gt;str;
<a name='L3141'>
<a name='L3142'>    <b>while</b> (q &lt; e) <font color='red'>{</font>
<a name='L3143'>        <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ch;
<a name='L3144'>        <i><font color='green'>/* remaining bytes at the end? (size should be divisible by 4) */</font></i>
<a name='L3145'>        <b>if</b> (e-q&lt;4) <font color='red'>{</font>
<a name='L3146'>            <b>if</b> (consumed)
<a name='L3147'>                <b>break</b>;
<a name='L3148'>            errmsg = "truncated data";
<a name='L3149'>            startinpos = ((<b>const</b> <b>char</b> *)q)-starts;
<a name='L3150'>            endinpos = ((<b>const</b> <b>char</b> *)e)-starts;
<a name='L3151'>            <b>goto</b> utf32Error;
<a name='L3152'>            <i><font color='green'>/* The remaining input chars are ignored if the callback</font></i>
<a name='L3153'><i><font color='green'>               chooses to skip the input */</font></i>
<a name='L3154'>        <font color='red'>}</font>
<a name='L3155'>        ch = (q[iorder[3]] &lt;&lt; 24) | (q[iorder[2]] &lt;&lt; 16) |
<a name='L3156'>            (q[iorder[1]] &lt;&lt; 8) | q[iorder[0]];
<a name='L3157'>
<a name='L3158'>        <b>if</b> (ch &gt;= 0x110000)
<a name='L3159'>        <font color='red'>{</font>
<a name='L3160'>            errmsg = "codepoint not in range(0x110000)";
<a name='L3161'>            startinpos = ((<b>const</b> <b>char</b> *)q)-starts;
<a name='L3162'>            endinpos = startinpos+4;
<a name='L3163'>            <b>goto</b> utf32Error;
<a name='L3164'>        <font color='red'>}</font>
<a name='L3165'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3166'>        <b>if</b> (ch &gt;= 0x10000)
<a name='L3167'>        <font color='red'>{</font>
<a name='L3168'>            *p++ = 0xD800 | ((ch-0x10000) &gt;&gt; 10);
<a name='L3169'>            *p++ = 0xDC00 | ((ch-0x10000) &amp; 0x3FF);
<a name='L3170'>        <font color='red'>}</font>
<a name='L3171'>        <b>else</b>
<a name='L3172'><font color='darkred'>#endif</font>
<a name='L3173'>            *p++ = ch;
<a name='L3174'>        q += 4;
<a name='L3175'>        <b>continue</b>;
<a name='L3176'>      utf32Error:
<a name='L3177'>        outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L3178'>        <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L3179'>                errors, &amp;errorHandler,
<a name='L3180'>                "utf32", errmsg,
<a name='L3181'>                &amp;starts, (<b>const</b> <b>char</b> **)&amp;e, &amp;startinpos, &amp;endinpos, &amp;exc, (<b>const</b> <b>char</b> **)&amp;q,
<a name='L3182'>                &amp;unicode, &amp;outpos, &amp;p))
<a name='L3183'>            <b>goto</b> onError;
<a name='L3184'>    <font color='red'>}</font>
<a name='L3185'>
<a name='L3186'>    <b>if</b> (byteorder)
<a name='L3187'>        *byteorder = bo;
<a name='L3188'>
<a name='L3189'>    <b>if</b> (consumed)
<a name='L3190'>        *consumed = (<b>const</b> <b>char</b> *)q-starts;
<a name='L3191'>
<a name='L3192'>    <i><font color='green'>/* Adjust length */</font></i>
<a name='L3193'>    <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;unicode, p - unicode-&gt;str) &lt; 0)
<a name='L3194'>        <b>goto</b> onError;
<a name='L3195'>
<a name='L3196'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3197'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3198'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L3199'>
<a name='L3200'>  onError:
<a name='L3201'>    Py_DECREF(unicode);
<a name='L3202'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3203'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3204'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3205'><font color='red'>}</font>
<a name='L3206'>
<a name='L3207'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3208'><a href='../R/3576.html' title='Multiple refered from 7 places.'>PyUnicode_EncodeUTF32</a>(<b>const</b> Py_UNICODE *s,
<a name='L3209'>                      <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L3210'>                      <b>const</b> <b>char</b> *errors,
<a name='L3211'>                      <b>int</b> byteorder)
<a name='L3212'><font color='red'>{</font>
<a name='L3213'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L3214'>    <b>unsigned</b> <b>char</b> *p;
<a name='L3215'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nsize, bytesize;
<a name='L3216'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3217'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, pairs;
<a name='L3218'><font color='darkred'>#else</font>
<a name='L3219'>    <b>const</b> <b>int</b> pairs = 0;
<a name='L3220'><font color='darkred'>#endif</font>
<a name='L3221'>    <i><font color='green'>/* Offsets from p for storing byte pairs in the right order. */</font></i>
<a name='L3222'><font color='darkred'>#ifdef</font> <a href='../S/2828.html#L78' title='Defined at 78 in Objects/unicodeobject.c.'>BYTEORDER_IS_LITTLE_ENDIAN</a>
<a name='L3223'>    <b>int</b> iorder[] = <font color='red'>{</font>0, 1, 2, 3<font color='red'>}</font>;
<a name='L3224'><font color='darkred'>#else</font>
<a name='L3225'>    <b>int</b> iorder[] = <font color='red'>{</font>3, 2, 1, 0<font color='red'>}</font>;
<a name='L3226'><font color='darkred'>#endif</font>
<a name='L3227'>
<a name='L3228'><font color='darkred'>#define</font> <a href='../R/4371.html' title='Multiple refered from 5 places.'>STORECHAR</a>(CH)                           \
<a name='L3229'>    <b>do</b> <font color='red'>{</font>                                        \
<a name='L3230'>        p[iorder[3]] = ((CH) &gt;&gt; 24) &amp; 0xff;     \
<a name='L3231'>        p[iorder[2]] = ((CH) &gt;&gt; 16) &amp; 0xff;     \
<a name='L3232'>        p[iorder[1]] = ((CH) &gt;&gt; 8) &amp; 0xff;      \
<a name='L3233'>        p[iorder[0]] = (CH) &amp; 0xff;             \
<a name='L3234'>        p += 4;                                 \
<a name='L3235'>    <font color='red'>}</font> <b>while</b>(0)
<a name='L3236'>
<a name='L3237'>    <i><font color='green'>/* In narrow builds we can output surrogate pairs as one codepoint,</font></i>
<a name='L3238'><i><font color='green'>       so we need less space. */</font></i>
<a name='L3239'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3240'>    <b>for</b> (i = pairs = 0; i &lt; size-1; i++)
<a name='L3241'>        <b>if</b> (0xD800 &lt;= s[i] &amp;&amp; s[i] &lt;= 0xDBFF &amp;&amp;
<a name='L3242'>            0xDC00 &lt;= s[i+1] &amp;&amp; s[i+1] &lt;= 0xDFFF)
<a name='L3243'>            pairs++;
<a name='L3244'><font color='darkred'>#endif</font>
<a name='L3245'>    nsize = (size - pairs + (byteorder == 0));
<a name='L3246'>    bytesize = nsize * 4;
<a name='L3247'>    <b>if</b> (bytesize / 4 != nsize)
<a name='L3248'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L3249'>    v = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, bytesize);
<a name='L3250'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3251'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3252'>
<a name='L3253'>    p = (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(v);
<a name='L3254'>    <b>if</b> (byteorder == 0)
<a name='L3255'>        <a href='../D/4960.html' title='Multiple defined in 4 places.'>STORECHAR</a>(0xFEFF);
<a name='L3256'>    <b>if</b> (size == 0)
<a name='L3257'>        <b>goto</b> done;
<a name='L3258'>
<a name='L3259'>    <b>if</b> (byteorder == -1) <font color='red'>{</font>
<a name='L3260'>        <i><font color='green'>/* force LE */</font></i>
<a name='L3261'>        iorder[0] = 0;
<a name='L3262'>        iorder[1] = 1;
<a name='L3263'>        iorder[2] = 2;
<a name='L3264'>        iorder[3] = 3;
<a name='L3265'>    <font color='red'>}</font>
<a name='L3266'>    <b>else</b> <b>if</b> (byteorder == 1) <font color='red'>{</font>
<a name='L3267'>        <i><font color='green'>/* force BE */</font></i>
<a name='L3268'>        iorder[0] = 3;
<a name='L3269'>        iorder[1] = 2;
<a name='L3270'>        iorder[2] = 1;
<a name='L3271'>        iorder[3] = 0;
<a name='L3272'>    <font color='red'>}</font>
<a name='L3273'>
<a name='L3274'>    <b>while</b> (size-- &gt; 0) <font color='red'>{</font>
<a name='L3275'>        <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ch = *s++;
<a name='L3276'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3277'>        <b>if</b> (0xD800 &lt;= ch &amp;&amp; ch &lt;= 0xDBFF &amp;&amp; size &gt; 0) <font color='red'>{</font>
<a name='L3278'>            <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ch2 = *s;
<a name='L3279'>            <b>if</b> (0xDC00 &lt;= ch2 &amp;&amp; ch2 &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L3280'>                ch = (((ch &amp; 0x3FF)&lt;&lt;10) | (ch2 &amp; 0x3FF)) + 0x10000;
<a name='L3281'>                s++;
<a name='L3282'>                size--;
<a name='L3283'>            <font color='red'>}</font>
<a name='L3284'>        <font color='red'>}</font>
<a name='L3285'><font color='darkred'>#endif</font>
<a name='L3286'>        <a href='../D/4960.html' title='Multiple defined in 4 places.'>STORECHAR</a>(ch);
<a name='L3287'>    <font color='red'>}</font>
<a name='L3288'>
<a name='L3289'>  done:
<a name='L3290'>    <b>return</b> v;
<a name='L3291'><font color='darkred'>#undef</font> <a href='../R/4371.html' title='Multiple refered from 5 places.'>STORECHAR</a>
<a name='L3292'><font color='red'>}</font>
<a name='L3293'>
<a name='L3294'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsUTF32String(PyObject *unicode)
<a name='L3295'><font color='red'>{</font>
<a name='L3296'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L3297'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L3298'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3299'>    <font color='red'>}</font>
<a name='L3300'>    <b>return</b> <a href='../D/3999.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF32</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L3301'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L3302'>                                 <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L3303'>                                 0);
<a name='L3304'><font color='red'>}</font>
<a name='L3305'>
<a name='L3306'><i><font color='green'>/* --- UTF-16 Codec ------------------------------------------------------- */</font></i>
<a name='L3307'>
<a name='L3308'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3309'><a href='../R/3561.html' title='Multiple refered from 2 places.'>PyUnicode_DecodeUTF16</a>(<b>const</b> <b>char</b> *s,
<a name='L3310'>                      <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L3311'>                      <b>const</b> <b>char</b> *errors,
<a name='L3312'>                      <b>int</b> *byteorder)
<a name='L3313'><font color='red'>{</font>
<a name='L3314'>    <b>return</b> <a href='../D/3982.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeUTF16Stateful</a>(s, size, errors, byteorder, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L3315'><font color='red'>}</font>
<a name='L3316'>
<a name='L3317'><i><font color='green'>/* Two masks for fast checking of whether a C 'long' may contain</font></i>
<a name='L3318'><i><font color='green'>   UTF16-encoded surrogate characters. This is an efficient heuristic,</font></i>
<a name='L3319'><i><font color='green'>   assuming that non-surrogate characters with a code point &gt;= 0x8000 are</font></i>
<a name='L3320'><i><font color='green'>   rare in most input.</font></i>
<a name='L3321'><i><font color='green'>   FAST_CHAR_MASK is used when the input is in native byte ordering,</font></i>
<a name='L3322'><i><font color='green'>   SWAPPED_FAST_CHAR_MASK when the input is in byteswapped ordering.</font></i>
<a name='L3323'><i><font color='green'>*/</font></i>
<a name='L3324'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> == 8)
<a name='L3325'><font color='darkred'># define</font> <a href='../S/2828.html#L3438' title='Refered from 3438 in Objects/unicodeobject.c.'>FAST_CHAR_MASK</a>         0x8000800080008000L
<a name='L3326'><font color='darkred'># define</font> <a href='../S/2828.html#L3457' title='Refered from 3457 in Objects/unicodeobject.c.'>SWAPPED_FAST_CHAR_MASK</a> 0x0080008000800080L
<a name='L3327'><font color='darkred'>#elif</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> == 4)
<a name='L3328'><font color='darkred'># define</font> <a href='../S/2828.html#L3438' title='Refered from 3438 in Objects/unicodeobject.c.'>FAST_CHAR_MASK</a>         0x80008000L
<a name='L3329'><font color='darkred'># define</font> <a href='../S/2828.html#L3457' title='Refered from 3457 in Objects/unicodeobject.c.'>SWAPPED_FAST_CHAR_MASK</a> 0x00800080L
<a name='L3330'><font color='darkred'>#else</font>
<a name='L3331'><font color='darkred'># error</font> C 'long' size should be either 4 or 8!
<a name='L3332'><font color='darkred'>#endif</font>
<a name='L3333'>
<a name='L3334'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3335'><a href='../R/3562.html' title='Multiple refered from 5 places.'>PyUnicode_DecodeUTF16Stateful</a>(<b>const</b> <b>char</b> *s,
<a name='L3336'>                              <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L3337'>                              <b>const</b> <b>char</b> *errors,
<a name='L3338'>                              <b>int</b> *byteorder,
<a name='L3339'>                              <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *consumed)
<a name='L3340'><font color='red'>{</font>
<a name='L3341'>    <b>const</b> <b>char</b> *starts = s;
<a name='L3342'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L3343'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L3344'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L3345'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode;
<a name='L3346'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L3347'>    <b>const</b> <b>unsigned</b> <b>char</b> *q, *e, *aligned_end;
<a name='L3348'>    <b>int</b> bo = 0;       <i><font color='green'>/* assume native ordering by default */</font></i>
<a name='L3349'>    <b>int</b> native_ordering = 0;
<a name='L3350'>    <b>const</b> <b>char</b> *errmsg = "";
<a name='L3351'>    <i><font color='green'>/* Offsets from q for retrieving byte pairs in the right order. */</font></i>
<a name='L3352'><font color='darkred'>#ifdef</font> <a href='../S/2828.html#L78' title='Defined at 78 in Objects/unicodeobject.c.'>BYTEORDER_IS_LITTLE_ENDIAN</a>
<a name='L3353'>    <b>int</b> ihi = 1, ilo = 0;
<a name='L3354'><font color='darkred'>#else</font>
<a name='L3355'>    <b>int</b> ihi = 0, ilo = 1;
<a name='L3356'><font color='darkred'>#endif</font>
<a name='L3357'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3358'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3359'>
<a name='L3360'>    <i><font color='green'>/* Note: size will always be longer than the resulting Unicode</font></i>
<a name='L3361'><i><font color='green'>       character count */</font></i>
<a name='L3362'>    unicode = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L3363'>    <b>if</b> (!unicode)
<a name='L3364'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3365'>    <b>if</b> (size == 0)
<a name='L3366'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L3367'>
<a name='L3368'>    <i><font color='green'>/* Unpack UTF-16 encoded data */</font></i>
<a name='L3369'>    p = unicode-&gt;str;
<a name='L3370'>    q = (<b>unsigned</b> <b>char</b> *)s;
<a name='L3371'>    e = q + size - 1;
<a name='L3372'>
<a name='L3373'>    <b>if</b> (byteorder)
<a name='L3374'>        bo = *byteorder;
<a name='L3375'>
<a name='L3376'>    <i><font color='green'>/* Check for BOM marks (U+FEFF) in the input and adjust current</font></i>
<a name='L3377'><i><font color='green'>       byte order setting accordingly. In native mode, the leading BOM</font></i>
<a name='L3378'><i><font color='green'>       mark is skipped, in all other modes, it is copied to the output</font></i>
<a name='L3379'><i><font color='green'>       stream as-is (giving a ZWNBSP character). */</font></i>
<a name='L3380'>    <b>if</b> (bo == 0) <font color='red'>{</font>
<a name='L3381'>        <b>if</b> (size &gt;= 2) <font color='red'>{</font>
<a name='L3382'>            <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> bom = (q[ihi] &lt;&lt; 8) | q[ilo];
<a name='L3383'><font color='darkred'>#ifdef</font> <a href='../S/2828.html#L78' title='Defined at 78 in Objects/unicodeobject.c.'>BYTEORDER_IS_LITTLE_ENDIAN</a>
<a name='L3384'>            <b>if</b> (bom == 0xFEFF) <font color='red'>{</font>
<a name='L3385'>                q += 2;
<a name='L3386'>                bo = -1;
<a name='L3387'>            <font color='red'>}</font>
<a name='L3388'>            <b>else</b> <b>if</b> (bom == 0xFFFE) <font color='red'>{</font>
<a name='L3389'>                q += 2;
<a name='L3390'>                bo = 1;
<a name='L3391'>            <font color='red'>}</font>
<a name='L3392'><font color='darkred'>#else</font>
<a name='L3393'>            <b>if</b> (bom == 0xFEFF) <font color='red'>{</font>
<a name='L3394'>                q += 2;
<a name='L3395'>                bo = 1;
<a name='L3396'>            <font color='red'>}</font>
<a name='L3397'>            <b>else</b> <b>if</b> (bom == 0xFFFE) <font color='red'>{</font>
<a name='L3398'>                q += 2;
<a name='L3399'>                bo = -1;
<a name='L3400'>            <font color='red'>}</font>
<a name='L3401'><font color='darkred'>#endif</font>
<a name='L3402'>        <font color='red'>}</font>
<a name='L3403'>    <font color='red'>}</font>
<a name='L3404'>
<a name='L3405'>    <b>if</b> (bo == -1) <font color='red'>{</font>
<a name='L3406'>        <i><font color='green'>/* force LE */</font></i>
<a name='L3407'>        ihi = 1;
<a name='L3408'>        ilo = 0;
<a name='L3409'>    <font color='red'>}</font>
<a name='L3410'>    <b>else</b> <b>if</b> (bo == 1) <font color='red'>{</font>
<a name='L3411'>        <i><font color='green'>/* force BE */</font></i>
<a name='L3412'>        ihi = 0;
<a name='L3413'>        ilo = 1;
<a name='L3414'>    <font color='red'>}</font>
<a name='L3415'><font color='darkred'>#ifdef</font> <a href='../S/2828.html#L78' title='Defined at 78 in Objects/unicodeobject.c.'>BYTEORDER_IS_LITTLE_ENDIAN</a>
<a name='L3416'>    native_ordering = ilo &lt; ihi;
<a name='L3417'><font color='darkred'>#else</font>
<a name='L3418'>    native_ordering = ilo &gt; ihi;
<a name='L3419'><font color='darkred'>#endif</font>
<a name='L3420'>
<a name='L3421'>    aligned_end = (<b>const</b> <b>unsigned</b> <b>char</b> *) ((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>) e &amp; ~<a href='../S/2828.html#L2499' title='Defined at 2499 in Objects/unicodeobject.c.'>LONG_PTR_MASK</a>);
<a name='L3422'>    <b>while</b> (q &lt; e) <font color='red'>{</font>
<a name='L3423'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch;
<a name='L3424'>        <i><font color='green'>/* First check for possible aligned read of a C 'long'. Unaligned</font></i>
<a name='L3425'><i><font color='green'>           reads are more expensive, better to defer to another iteration. */</font></i>
<a name='L3426'>        <b>if</b> (!((<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>) q &amp; <a href='../S/2828.html#L2499' title='Defined at 2499 in Objects/unicodeobject.c.'>LONG_PTR_MASK</a>)) <font color='red'>{</font>
<a name='L3427'>            <i><font color='green'>/* Fast path for runs of non-surrogate chars. */</font></i>
<a name='L3428'>            <b>register</b> <b>const</b> <b>unsigned</b> <b>char</b> *_q = q;
<a name='L3429'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *_p = p;
<a name='L3430'>            <b>if</b> (native_ordering) <font color='red'>{</font>
<a name='L3431'>                <i><font color='green'>/* Native ordering is simple: as long as the input cannot</font></i>
<a name='L3432'><i><font color='green'>                   possibly contain a surrogate char, do an unrolled copy</font></i>
<a name='L3433'><i><font color='green'>                   of several 16-bit code points to the target object.</font></i>
<a name='L3434'><i><font color='green'>                   The non-surrogate check is done on several input bytes</font></i>
<a name='L3435'><i><font color='green'>                   at a time (as many as a C 'long' can contain). */</font></i>
<a name='L3436'>                <b>while</b> (_q &lt; aligned_end) <font color='red'>{</font>
<a name='L3437'>                    <b>unsigned</b> <b>long</b> data = * (<b>unsigned</b> <b>long</b> *) _q;
<a name='L3438'>                    <b>if</b> (data &amp; <a href='../D/1090.html' title='Multiple defined in 3 places.'>FAST_CHAR_MASK</a>)
<a name='L3439'>                        <b>break</b>;
<a name='L3440'>                    _p[0] = ((<b>unsigned</b> <b>short</b> *) _q)[0];
<a name='L3441'>                    _p[1] = ((<b>unsigned</b> <b>short</b> *) _q)[1];
<a name='L3442'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> == 8)
<a name='L3443'>                    _p[2] = ((<b>unsigned</b> <b>short</b> *) _q)[2];
<a name='L3444'>                    _p[3] = ((<b>unsigned</b> <b>short</b> *) _q)[3];
<a name='L3445'><font color='darkred'>#endif</font>
<a name='L3446'>                    _q += <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>;
<a name='L3447'>                    _p += <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> / 2;
<a name='L3448'>                <font color='red'>}</font>
<a name='L3449'>            <font color='red'>}</font>
<a name='L3450'>            <b>else</b> <font color='red'>{</font>
<a name='L3451'>                <i><font color='green'>/* Byteswapped ordering is similar, but we must decompose</font></i>
<a name='L3452'><i><font color='green'>                   the copy bytewise, and take care of zero'ing out the</font></i>
<a name='L3453'><i><font color='green'>                   upper bytes if the target object is in 32-bit units</font></i>
<a name='L3454'><i><font color='green'>                   (that is, in UCS-4 builds). */</font></i>
<a name='L3455'>                <b>while</b> (_q &lt; aligned_end) <font color='red'>{</font>
<a name='L3456'>                    <b>unsigned</b> <b>long</b> data = * (<b>unsigned</b> <b>long</b> *) _q;
<a name='L3457'>                    <b>if</b> (data &amp; <a href='../D/5036.html' title='Multiple defined in 3 places.'>SWAPPED_FAST_CHAR_MASK</a>)
<a name='L3458'>                        <b>break</b>;
<a name='L3459'>                    <i><font color='green'>/* Zero upper bytes in UCS-4 builds */</font></i>
<a name='L3460'><font color='darkred'>#if</font> (<a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a> &gt; 2)
<a name='L3461'>                    _p[0] = 0;
<a name='L3462'>                    _p[1] = 0;
<a name='L3463'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> == 8)
<a name='L3464'>                    _p[2] = 0;
<a name='L3465'>                    _p[3] = 0;
<a name='L3466'><font color='darkred'>#endif</font>
<a name='L3467'><font color='darkred'>#endif</font>
<a name='L3468'>                    <i><font color='green'>/* Issue #4916; UCS-4 builds on big endian machines must</font></i>
<a name='L3469'><i><font color='green'>                       fill the two last bytes of each 4-byte unit. */</font></i>
<a name='L3470'><font color='darkred'>#if</font> (!<b>defined</b>(<a href='../S/2828.html#L78' title='Defined at 78 in Objects/unicodeobject.c.'>BYTEORDER_IS_LITTLE_ENDIAN</a>) &amp;&amp; <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a> &gt; 2)
<a name='L3471'><font color='darkred'># define</font> <a href='../R/2175.html' title='Multiple refered from 57 places.'>OFF</a> 2
<a name='L3472'><font color='darkred'>#else</font>
<a name='L3473'><font color='darkred'># define</font> <a href='../R/2175.html' title='Multiple refered from 57 places.'>OFF</a> 0
<a name='L3474'><font color='darkred'>#endif</font>
<a name='L3475'>                    ((<b>unsigned</b> <b>char</b> *) _p)[<a href='../D/2402.html' title='Multiple defined in 16 places.'>OFF</a> + 1] = _q[0];
<a name='L3476'>                    ((<b>unsigned</b> <b>char</b> *) _p)[<a href='../D/2402.html' title='Multiple defined in 16 places.'>OFF</a> + 0] = _q[1];
<a name='L3477'>                    ((<b>unsigned</b> <b>char</b> *) _p)[<a href='../D/2402.html' title='Multiple defined in 16 places.'>OFF</a> + 1 + <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>] = _q[2];
<a name='L3478'>                    ((<b>unsigned</b> <b>char</b> *) _p)[<a href='../D/2402.html' title='Multiple defined in 16 places.'>OFF</a> + 0 + <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>] = _q[3];
<a name='L3479'><font color='darkred'>#if</font> (<a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> == 8)
<a name='L3480'>                    ((<b>unsigned</b> <b>char</b> *) _p)[<a href='../D/2402.html' title='Multiple defined in 16 places.'>OFF</a> + 1 + 2 * <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>] = _q[4];
<a name='L3481'>                    ((<b>unsigned</b> <b>char</b> *) _p)[<a href='../D/2402.html' title='Multiple defined in 16 places.'>OFF</a> + 0 + 2 * <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>] = _q[5];
<a name='L3482'>                    ((<b>unsigned</b> <b>char</b> *) _p)[<a href='../D/2402.html' title='Multiple defined in 16 places.'>OFF</a> + 1 + 3 * <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>] = _q[6];
<a name='L3483'>                    ((<b>unsigned</b> <b>char</b> *) _p)[<a href='../D/2402.html' title='Multiple defined in 16 places.'>OFF</a> + 0 + 3 * <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>] = _q[7];
<a name='L3484'><font color='darkred'>#endif</font>
<a name='L3485'><font color='darkred'>#undef</font> <a href='../R/2175.html' title='Multiple refered from 57 places.'>OFF</a>
<a name='L3486'>                    _q += <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>;
<a name='L3487'>                    _p += <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> / 2;
<a name='L3488'>                <font color='red'>}</font>
<a name='L3489'>            <font color='red'>}</font>
<a name='L3490'>            p = _p;
<a name='L3491'>            q = _q;
<a name='L3492'>            <b>if</b> (q &gt;= e)
<a name='L3493'>                <b>break</b>;
<a name='L3494'>        <font color='red'>}</font>
<a name='L3495'>        ch = (q[ihi] &lt;&lt; 8) | q[ilo];
<a name='L3496'>
<a name='L3497'>        q += 2;
<a name='L3498'>
<a name='L3499'>        <b>if</b> (ch &lt; 0xD800 || ch &gt; 0xDFFF) <font color='red'>{</font>
<a name='L3500'>            *p++ = ch;
<a name='L3501'>            <b>continue</b>;
<a name='L3502'>        <font color='red'>}</font>
<a name='L3503'>
<a name='L3504'>        <i><font color='green'>/* UTF-16 code pair: */</font></i>
<a name='L3505'>        <b>if</b> (q &gt; e) <font color='red'>{</font>
<a name='L3506'>            errmsg = "unexpected end of data";
<a name='L3507'>            startinpos = (((<b>const</b> <b>char</b> *)q) - 2) - starts;
<a name='L3508'>            endinpos = ((<b>const</b> <b>char</b> *)e) + 1 - starts;
<a name='L3509'>            <b>goto</b> utf16Error;
<a name='L3510'>        <font color='red'>}</font>
<a name='L3511'>        <b>if</b> (0xD800 &lt;= ch &amp;&amp; ch &lt;= 0xDBFF) <font color='red'>{</font>
<a name='L3512'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch2 = (q[ihi] &lt;&lt; 8) | q[ilo];
<a name='L3513'>            q += 2;
<a name='L3514'>            <b>if</b> (0xDC00 &lt;= ch2 &amp;&amp; ch2 &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L3515'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3516'>                *p++ = ch;
<a name='L3517'>                *p++ = ch2;
<a name='L3518'><font color='darkred'>#else</font>
<a name='L3519'>                *p++ = (((ch &amp; 0x3FF)&lt;&lt;10) | (ch2 &amp; 0x3FF)) + 0x10000;
<a name='L3520'><font color='darkred'>#endif</font>
<a name='L3521'>                <b>continue</b>;
<a name='L3522'>            <font color='red'>}</font>
<a name='L3523'>            <b>else</b> <font color='red'>{</font>
<a name='L3524'>                errmsg = "illegal UTF-16 surrogate";
<a name='L3525'>                startinpos = (((<b>const</b> <b>char</b> *)q)-4)-starts;
<a name='L3526'>                endinpos = startinpos+2;
<a name='L3527'>                <b>goto</b> utf16Error;
<a name='L3528'>            <font color='red'>}</font>
<a name='L3529'>
<a name='L3530'>        <font color='red'>}</font>
<a name='L3531'>        errmsg = "illegal encoding";
<a name='L3532'>        startinpos = (((<b>const</b> <b>char</b> *)q)-2)-starts;
<a name='L3533'>        endinpos = startinpos+2;
<a name='L3534'>        <i><font color='green'>/* Fall through to report the error */</font></i>
<a name='L3535'>
<a name='L3536'>      utf16Error:
<a name='L3537'>        outpos = p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L3538'>        <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L3539'>                errors,
<a name='L3540'>                &amp;errorHandler,
<a name='L3541'>                "utf16", errmsg,
<a name='L3542'>                &amp;starts,
<a name='L3543'>                (<b>const</b> <b>char</b> **)&amp;e,
<a name='L3544'>                &amp;startinpos,
<a name='L3545'>                &amp;endinpos,
<a name='L3546'>                &amp;exc,
<a name='L3547'>                (<b>const</b> <b>char</b> **)&amp;q,
<a name='L3548'>                &amp;unicode,
<a name='L3549'>                &amp;outpos,
<a name='L3550'>                &amp;p))
<a name='L3551'>            <b>goto</b> onError;
<a name='L3552'>    <font color='red'>}</font>
<a name='L3553'>    <i><font color='green'>/* remaining byte at the end? (size should be even) */</font></i>
<a name='L3554'>    <b>if</b> (e == q) <font color='red'>{</font>
<a name='L3555'>        <b>if</b> (!consumed) <font color='red'>{</font>
<a name='L3556'>            errmsg = "truncated data";
<a name='L3557'>            startinpos = ((<b>const</b> <b>char</b> *)q) - starts;
<a name='L3558'>            endinpos = ((<b>const</b> <b>char</b> *)e) + 1 - starts;
<a name='L3559'>            outpos = p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L3560'>            <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L3561'>                    errors,
<a name='L3562'>                    &amp;errorHandler,
<a name='L3563'>                    "utf16", errmsg,
<a name='L3564'>                    &amp;starts,
<a name='L3565'>                    (<b>const</b> <b>char</b> **)&amp;e,
<a name='L3566'>                    &amp;startinpos,
<a name='L3567'>                    &amp;endinpos,
<a name='L3568'>                    &amp;exc,
<a name='L3569'>                    (<b>const</b> <b>char</b> **)&amp;q,
<a name='L3570'>                    &amp;unicode,
<a name='L3571'>                    &amp;outpos,
<a name='L3572'>                    &amp;p))
<a name='L3573'>                <b>goto</b> onError;
<a name='L3574'>            <i><font color='green'>/* The remaining input chars are ignored if the callback</font></i>
<a name='L3575'><i><font color='green'>               chooses to skip the input */</font></i>
<a name='L3576'>        <font color='red'>}</font>
<a name='L3577'>    <font color='red'>}</font>
<a name='L3578'>
<a name='L3579'>    <b>if</b> (byteorder)
<a name='L3580'>        *byteorder = bo;
<a name='L3581'>
<a name='L3582'>    <b>if</b> (consumed)
<a name='L3583'>        *consumed = (<b>const</b> <b>char</b> *)q-starts;
<a name='L3584'>
<a name='L3585'>    <i><font color='green'>/* Adjust length */</font></i>
<a name='L3586'>    <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;unicode, p - unicode-&gt;str) &lt; 0)
<a name='L3587'>        <b>goto</b> onError;
<a name='L3588'>
<a name='L3589'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3590'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3591'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode;
<a name='L3592'>
<a name='L3593'>  onError:
<a name='L3594'>    Py_DECREF(unicode);
<a name='L3595'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3596'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3597'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3598'><font color='red'>}</font>
<a name='L3599'>
<a name='L3600'><font color='darkred'>#undef</font> <a href='../S/2828.html#L3438' title='Refered from 3438 in Objects/unicodeobject.c.'>FAST_CHAR_MASK</a>
<a name='L3601'><font color='darkred'>#undef</font> <a href='../S/2828.html#L3457' title='Refered from 3457 in Objects/unicodeobject.c.'>SWAPPED_FAST_CHAR_MASK</a>
<a name='L3602'>
<a name='L3603'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3604'><a href='../R/3575.html' title='Multiple refered from 7 places.'>PyUnicode_EncodeUTF16</a>(<b>const</b> Py_UNICODE *s,
<a name='L3605'>                      <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L3606'>                      <b>const</b> <b>char</b> *errors,
<a name='L3607'>                      <b>int</b> byteorder)
<a name='L3608'><font color='red'>{</font>
<a name='L3609'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L3610'>    <b>unsigned</b> <b>char</b> *p;
<a name='L3611'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nsize, bytesize;
<a name='L3612'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3613'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, pairs;
<a name='L3614'><font color='darkred'>#else</font>
<a name='L3615'>    <b>const</b> <b>int</b> pairs = 0;
<a name='L3616'><font color='darkred'>#endif</font>
<a name='L3617'>    <i><font color='green'>/* Offsets from p for storing byte pairs in the right order. */</font></i>
<a name='L3618'><font color='darkred'>#ifdef</font> <a href='../S/2828.html#L78' title='Defined at 78 in Objects/unicodeobject.c.'>BYTEORDER_IS_LITTLE_ENDIAN</a>
<a name='L3619'>    <b>int</b> ihi = 1, ilo = 0;
<a name='L3620'><font color='darkred'>#else</font>
<a name='L3621'>    <b>int</b> ihi = 0, ilo = 1;
<a name='L3622'><font color='darkred'>#endif</font>
<a name='L3623'>
<a name='L3624'><font color='darkred'>#define</font> <a href='../R/4371.html' title='Multiple refered from 5 places.'>STORECHAR</a>(CH)                           \
<a name='L3625'>    <b>do</b> <font color='red'>{</font>                                        \
<a name='L3626'>        p[ihi] = ((CH) &gt;&gt; 8) &amp; 0xff;            \
<a name='L3627'>        p[ilo] = (CH) &amp; 0xff;                   \
<a name='L3628'>        p += 2;                                 \
<a name='L3629'>    <font color='red'>}</font> <b>while</b>(0)
<a name='L3630'>
<a name='L3631'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3632'>    <b>for</b> (i = pairs = 0; i &lt; size; i++)
<a name='L3633'>        <b>if</b> (s[i] &gt;= 0x10000)
<a name='L3634'>            pairs++;
<a name='L3635'><font color='darkred'>#endif</font>
<a name='L3636'>    <i><font color='green'>/* 2 * (size + pairs + (byteorder == 0)) */</font></i>
<a name='L3637'>    <b>if</b> (size &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> ||
<a name='L3638'>        size &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - pairs - (byteorder == 0))
<a name='L3639'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L3640'>    nsize = size + pairs + (byteorder == 0);
<a name='L3641'>    bytesize = nsize * 2;
<a name='L3642'>    <b>if</b> (bytesize / 2 != nsize)
<a name='L3643'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L3644'>    v = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, bytesize);
<a name='L3645'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3646'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3647'>
<a name='L3648'>    p = (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(v);
<a name='L3649'>    <b>if</b> (byteorder == 0)
<a name='L3650'>        <a href='../D/4960.html' title='Multiple defined in 4 places.'>STORECHAR</a>(0xFEFF);
<a name='L3651'>    <b>if</b> (size == 0)
<a name='L3652'>        <b>goto</b> done;
<a name='L3653'>
<a name='L3654'>    <b>if</b> (byteorder == -1) <font color='red'>{</font>
<a name='L3655'>        <i><font color='green'>/* force LE */</font></i>
<a name='L3656'>        ihi = 1;
<a name='L3657'>        ilo = 0;
<a name='L3658'>    <font color='red'>}</font>
<a name='L3659'>    <b>else</b> <b>if</b> (byteorder == 1) <font color='red'>{</font>
<a name='L3660'>        <i><font color='green'>/* force BE */</font></i>
<a name='L3661'>        ihi = 0;
<a name='L3662'>        ilo = 1;
<a name='L3663'>    <font color='red'>}</font>
<a name='L3664'>
<a name='L3665'>    <b>while</b> (size-- &gt; 0) <font color='red'>{</font>
<a name='L3666'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *s++;
<a name='L3667'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch2 = 0;
<a name='L3668'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3669'>        <b>if</b> (ch &gt;= 0x10000) <font color='red'>{</font>
<a name='L3670'>            ch2 = 0xDC00 | ((ch-0x10000) &amp; 0x3FF);
<a name='L3671'>            ch  = 0xD800 | ((ch-0x10000) &gt;&gt; 10);
<a name='L3672'>        <font color='red'>}</font>
<a name='L3673'><font color='darkred'>#endif</font>
<a name='L3674'>        <a href='../D/4960.html' title='Multiple defined in 4 places.'>STORECHAR</a>(ch);
<a name='L3675'>        <b>if</b> (ch2)
<a name='L3676'>            <a href='../D/4960.html' title='Multiple defined in 4 places.'>STORECHAR</a>(ch2);
<a name='L3677'>    <font color='red'>}</font>
<a name='L3678'>
<a name='L3679'>  done:
<a name='L3680'>    <b>return</b> v;
<a name='L3681'><font color='darkred'>#undef</font> <a href='../R/4371.html' title='Multiple refered from 5 places.'>STORECHAR</a>
<a name='L3682'><font color='red'>}</font>
<a name='L3683'>
<a name='L3684'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsUTF16String(PyObject *unicode)
<a name='L3685'><font color='red'>{</font>
<a name='L3686'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L3687'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L3688'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3689'>    <font color='red'>}</font>
<a name='L3690'>    <b>return</b> <a href='../D/3998.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF16</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L3691'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L3692'>                                 <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L3693'>                                 0);
<a name='L3694'><font color='red'>}</font>
<a name='L3695'>
<a name='L3696'><i><font color='green'>/* --- Unicode Escape Codec ----------------------------------------------- */</font></i>
<a name='L3697'>
<a name='L3698'><b>static</b> <a href='../S/586.html#L28' title='Defined at 28 in Include/ucnhash.h.'>_PyUnicode_Name_CAPI</a> *ucnhash_CAPI = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3699'>
<a name='L3700'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3568.html' title='Multiple refered from 2 places.'>PyUnicode_DecodeUnicodeEscape</a>(<b>const</b> <b>char</b> *s,
<a name='L3701'>                                        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L3702'>                                        <b>const</b> <b>char</b> *errors)
<a name='L3703'><font color='red'>{</font>
<a name='L3704'>    <b>const</b> <b>char</b> *starts = s;
<a name='L3705'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L3706'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L3707'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L3708'>    <b>int</b> i;
<a name='L3709'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v;
<a name='L3710'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L3711'>    <b>const</b> <b>char</b> *end;
<a name='L3712'>    <b>char</b>* message;
<a name='L3713'>    <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> chr = 0xffffffff; <i><font color='green'>/* in case 'getcode' messes up */</font></i>
<a name='L3714'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3715'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3716'>
<a name='L3717'>    <i><font color='green'>/* Escaped strings will always be longer than the resulting</font></i>
<a name='L3718'><i><font color='green'>       Unicode string, so we start with size here and then reduce the</font></i>
<a name='L3719'><i><font color='green'>       length after conversion to the true value.</font></i>
<a name='L3720'><i><font color='green'>       (but if the error callback returns a long replacement string</font></i>
<a name='L3721'><i><font color='green'>       we'll have to allocate more space) */</font></i>
<a name='L3722'>    v = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L3723'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3724'>        <b>goto</b> onError;
<a name='L3725'>    <b>if</b> (size == 0)
<a name='L3726'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L3727'>
<a name='L3728'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L3729'>    end = s + size;
<a name='L3730'>
<a name='L3731'>    <b>while</b> (s &lt; end) <font color='red'>{</font>
<a name='L3732'>        <b>unsigned</b> <b>char</b> c;
<a name='L3733'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> x;
<a name='L3734'>        <b>int</b> digits;
<a name='L3735'>
<a name='L3736'>        <i><font color='green'>/* Non-escape characters are interpreted as Unicode ordinals */</font></i>
<a name='L3737'>        <b>if</b> (*s != '\\') <font color='red'>{</font>
<a name='L3738'>            *p++ = (<b>unsigned</b> <b>char</b>) *s++;
<a name='L3739'>            <b>continue</b>;
<a name='L3740'>        <font color='red'>}</font>
<a name='L3741'>
<a name='L3742'>        startinpos = s-starts;
<a name='L3743'>        <i><font color='green'>/* \ - Escapes */</font></i>
<a name='L3744'>        s++;
<a name='L3745'>        c = *s++;
<a name='L3746'>        <b>if</b> (s &gt; end)
<a name='L3747'>            c = '\0'; <i><font color='green'>/* Invalid after \ */</font></i>
<a name='L3748'>        <b>switch</b> (c) <font color='red'>{</font>
<a name='L3749'>
<a name='L3750'>            <i><font color='green'>/* \x escapes */</font></i>
<a name='L3751'>        <b>case</b> '\n': <b>break</b>;
<a name='L3752'>        <b>case</b> '\\': *p++ = '\\'; <b>break</b>;
<a name='L3753'>        <b>case</b> '\'': *p++ = '\''; <b>break</b>;
<a name='L3754'>        <b>case</b> '\"': *p++ = '\"'; <b>break</b>;
<a name='L3755'>        <b>case</b> 'b': *p++ = '\b'; <b>break</b>;
<a name='L3756'>        <b>case</b> 'f': *p++ = '\014'; <b>break</b>; <i><font color='green'>/* FF */</font></i>
<a name='L3757'>        <b>case</b> 't': *p++ = '\t'; <b>break</b>;
<a name='L3758'>        <b>case</b> 'n': *p++ = '\n'; <b>break</b>;
<a name='L3759'>        <b>case</b> 'r': *p++ = '\r'; <b>break</b>;
<a name='L3760'>        <b>case</b> 'v': *p++ = '\013'; <b>break</b>; <i><font color='green'>/* VT */</font></i>
<a name='L3761'>        <b>case</b> 'a': *p++ = '\007'; <b>break</b>; <i><font color='green'>/* BEL, not classic C */</font></i>
<a name='L3762'>
<a name='L3763'>            <i><font color='green'>/* \OOO (octal) escapes */</font></i>
<a name='L3764'>        <b>case</b> '0': <b>case</b> '1': <b>case</b> '2': <b>case</b> '3':
<a name='L3765'>        <b>case</b> '4': <b>case</b> '5': <b>case</b> '6': <b>case</b> '7':
<a name='L3766'>            x = s[-1] - '0';
<a name='L3767'>            <b>if</b> (s &lt; end &amp;&amp; '0' &lt;= *s &amp;&amp; *s &lt;= '7') <font color='red'>{</font>
<a name='L3768'>                x = (x&lt;&lt;3) + *s++ - '0';
<a name='L3769'>                <b>if</b> (s &lt; end &amp;&amp; '0' &lt;= *s &amp;&amp; *s &lt;= '7')
<a name='L3770'>                    x = (x&lt;&lt;3) + *s++ - '0';
<a name='L3771'>            <font color='red'>}</font>
<a name='L3772'>            *p++ = x;
<a name='L3773'>            <b>break</b>;
<a name='L3774'>
<a name='L3775'>            <i><font color='green'>/* hex escapes */</font></i>
<a name='L3776'>            <i><font color='green'>/* \xXX */</font></i>
<a name='L3777'>        <b>case</b> 'x':
<a name='L3778'>            digits = 2;
<a name='L3779'>            message = "truncated \\xXX escape";
<a name='L3780'>            <b>goto</b> hexescape;
<a name='L3781'>
<a name='L3782'>            <i><font color='green'>/* \uXXXX */</font></i>
<a name='L3783'>        <b>case</b> 'u':
<a name='L3784'>            digits = 4;
<a name='L3785'>            message = "truncated \\uXXXX escape";
<a name='L3786'>            <b>goto</b> hexescape;
<a name='L3787'>
<a name='L3788'>            <i><font color='green'>/* \UXXXXXXXX */</font></i>
<a name='L3789'>        <b>case</b> 'U':
<a name='L3790'>            digits = 8;
<a name='L3791'>            message = "truncated \\UXXXXXXXX escape";
<a name='L3792'>        hexescape:
<a name='L3793'>            chr = 0;
<a name='L3794'>            outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L3795'>            <b>if</b> (s+digits&gt;end) <font color='red'>{</font>
<a name='L3796'>                endinpos = size;
<a name='L3797'>                <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L3798'>                        errors, &amp;errorHandler,
<a name='L3799'>                        "unicodeescape", "end of string in escape sequence",
<a name='L3800'>                        &amp;starts, &amp;end, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L3801'>                        &amp;v, &amp;outpos, &amp;p))
<a name='L3802'>                    <b>goto</b> onError;
<a name='L3803'>                <b>goto</b> nextByte;
<a name='L3804'>            <font color='red'>}</font>
<a name='L3805'>            <b>for</b> (i = 0; i &lt; digits; ++i) <font color='red'>{</font>
<a name='L3806'>                c = (<b>unsigned</b> <b>char</b>) s[i];
<a name='L3807'>                <b>if</b> (!<a href='../S/556.html#L22' title='Defined at 22 in Include/pyctype.h.'>Py_ISXDIGIT</a>(c)) <font color='red'>{</font>
<a name='L3808'>                    endinpos = (s+i+1)-starts;
<a name='L3809'>                    <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L3810'>                            errors, &amp;errorHandler,
<a name='L3811'>                            "unicodeescape", message,
<a name='L3812'>                            &amp;starts, &amp;end, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L3813'>                            &amp;v, &amp;outpos, &amp;p))
<a name='L3814'>                        <b>goto</b> onError;
<a name='L3815'>                    <b>goto</b> nextByte;
<a name='L3816'>                <font color='red'>}</font>
<a name='L3817'>                chr = (chr&lt;&lt;4) &amp; ~0xF;
<a name='L3818'>                <b>if</b> (c &gt;= '0' &amp;&amp; c &lt;= '9')
<a name='L3819'>                    chr += c - '0';
<a name='L3820'>                <b>else</b> <b>if</b> (c &gt;= 'a' &amp;&amp; c &lt;= 'f')
<a name='L3821'>                    chr += 10 + c - 'a';
<a name='L3822'>                <b>else</b>
<a name='L3823'>                    chr += 10 + c - 'A';
<a name='L3824'>            <font color='red'>}</font>
<a name='L3825'>            s += i;
<a name='L3826'>            <b>if</b> (chr == 0xffffffff &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3827'>                <i><font color='green'>/* _decoding_error will have already written into the</font></i>
<a name='L3828'><i><font color='green'>                   target buffer. */</font></i>
<a name='L3829'>                <b>break</b>;
<a name='L3830'>        store:
<a name='L3831'>            <i><font color='green'>/* when we get here, chr is a 32-bit unicode character */</font></i>
<a name='L3832'>            <b>if</b> (chr &lt;= 0xffff)
<a name='L3833'>                <i><font color='green'>/* UCS-2 character */</font></i>
<a name='L3834'>                *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) chr;
<a name='L3835'>            <b>else</b> <b>if</b> (chr &lt;= 0x10ffff) <font color='red'>{</font>
<a name='L3836'>                <i><font color='green'>/* UCS-4 character. Either store directly, or as</font></i>
<a name='L3837'><i><font color='green'>                   surrogate pair. */</font></i>
<a name='L3838'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3839'>                *p++ = chr;
<a name='L3840'><font color='darkred'>#else</font>
<a name='L3841'>                chr -= 0x10000L;
<a name='L3842'>                *p++ = 0xD800 + (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) (chr &gt;&gt; 10);
<a name='L3843'>                *p++ = 0xDC00 + (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) (chr &amp; 0x03FF);
<a name='L3844'><font color='darkred'>#endif</font>
<a name='L3845'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L3846'>                endinpos = s-starts;
<a name='L3847'>                outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L3848'>                <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L3849'>                        errors, &amp;errorHandler,
<a name='L3850'>                        "unicodeescape", "illegal Unicode character",
<a name='L3851'>                        &amp;starts, &amp;end, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L3852'>                        &amp;v, &amp;outpos, &amp;p))
<a name='L3853'>                    <b>goto</b> onError;
<a name='L3854'>            <font color='red'>}</font>
<a name='L3855'>            <b>break</b>;
<a name='L3856'>
<a name='L3857'>            <i><font color='green'>/* \N{name} */</font></i>
<a name='L3858'>        <b>case</b> 'N':
<a name='L3859'>            message = "malformed \\N character escape";
<a name='L3860'>            <b>if</b> (ucnhash_CAPI == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3861'>                <i><font color='green'>/* load the unicode data module */</font></i>
<a name='L3862'>                ucnhash_CAPI = (<a href='../S/586.html#L28' title='Defined at 28 in Include/ucnhash.h.'>_PyUnicode_Name_CAPI</a> *)<a href='../S/2780.html#L195' title='Defined at 195 in Objects/capsule.c.'>PyCapsule_Import</a>(<a href='../S/586.html#L11' title='Defined at 11 in Include/ucnhash.h.'>PyUnicodeData_CAPSULE_NAME</a>, 1);
<a name='L3863'>                <b>if</b> (ucnhash_CAPI == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3864'>                    <b>goto</b> ucnhashError;
<a name='L3865'>            <font color='red'>}</font>
<a name='L3866'>            <b>if</b> (*s == '{') <font color='red'>{</font>
<a name='L3867'>                <b>const</b> <b>char</b> *start = s+1;
<a name='L3868'>                <i><font color='green'>/* look for the closing brace */</font></i>
<a name='L3869'>                <b>while</b> (*s != '}' &amp;&amp; s &lt; end)
<a name='L3870'>                    s++;
<a name='L3871'>                <b>if</b> (s &gt; start &amp;&amp; s &lt; end &amp;&amp; *s == '}') <font color='red'>{</font>
<a name='L3872'>                    <i><font color='green'>/* found a name.  look it up in the unicode database */</font></i>
<a name='L3873'>                    message = "unknown Unicode character name";
<a name='L3874'>                    s++;
<a name='L3875'>                    <b>if</b> (ucnhash_CAPI-&gt;<a href='../S/2698.html#L210' title='Defined at 210 in Modules/pyexpat.c.'>getcode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, start, (<b>int</b>)(s-start-1), &amp;chr))
<a name='L3876'>                        <b>goto</b> store;
<a name='L3877'>                <font color='red'>}</font>
<a name='L3878'>            <font color='red'>}</font>
<a name='L3879'>            endinpos = s-starts;
<a name='L3880'>            outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L3881'>            <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L3882'>                    errors, &amp;errorHandler,
<a name='L3883'>                    "unicodeescape", message,
<a name='L3884'>                    &amp;starts, &amp;end, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L3885'>                    &amp;v, &amp;outpos, &amp;p))
<a name='L3886'>                <b>goto</b> onError;
<a name='L3887'>            <b>break</b>;
<a name='L3888'>
<a name='L3889'>        <b>default</b>:
<a name='L3890'>            <b>if</b> (s &gt; end) <font color='red'>{</font>
<a name='L3891'>                message = "\\ at end of string";
<a name='L3892'>                s--;
<a name='L3893'>                endinpos = s-starts;
<a name='L3894'>                outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L3895'>                <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L3896'>                        errors, &amp;errorHandler,
<a name='L3897'>                        "unicodeescape", message,
<a name='L3898'>                        &amp;starts, &amp;end, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L3899'>                        &amp;v, &amp;outpos, &amp;p))
<a name='L3900'>                    <b>goto</b> onError;
<a name='L3901'>            <font color='red'>}</font>
<a name='L3902'>            <b>else</b> <font color='red'>{</font>
<a name='L3903'>                *p++ = '\\';
<a name='L3904'>                *p++ = (<b>unsigned</b> <b>char</b>)s[-1];
<a name='L3905'>            <font color='red'>}</font>
<a name='L3906'>            <b>break</b>;
<a name='L3907'>        <font color='red'>}</font>
<a name='L3908'>      nextByte:
<a name='L3909'>        ;
<a name='L3910'>    <font color='red'>}</font>
<a name='L3911'>    <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;v, p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v)) &lt; 0)
<a name='L3912'>        <b>goto</b> onError;
<a name='L3913'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3914'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3915'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L3916'>
<a name='L3917'>  ucnhashError:
<a name='L3918'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(
<a name='L3919'>        PyExc_UnicodeError,
<a name='L3920'>        "\\N escapes not supported (can't load unicodedata module)"
<a name='L3921'>        );
<a name='L3922'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L3923'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3924'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3925'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3926'>
<a name='L3927'>  onError:
<a name='L3928'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L3929'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L3930'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L3931'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3932'><font color='red'>}</font>
<a name='L3933'>
<a name='L3934'><i><font color='green'>/* Return a Unicode-Escape string version of the Unicode object.</font></i>
<a name='L3935'><i><font color='green'></font></i>
<a name='L3936'><i><font color='green'>   If quotes is true, the string is enclosed in u"" or u'' quotes as</font></i>
<a name='L3937'><i><font color='green'>   appropriate.</font></i>
<a name='L3938'><i><font color='green'></font></i>
<a name='L3939'><i><font color='green'>*/</font></i>
<a name='L3940'>
<a name='L3941'>Py_LOCAL_INLINE(<b>const</b> Py_UNICODE *) findchar(<b>const</b> Py_UNICODE *s,
<a name='L3942'>                                             <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L3943'>                                             Py_UNICODE ch)
<a name='L3944'><font color='red'>{</font>
<a name='L3945'>    <i><font color='green'>/* like wcschr, but doesn't stop at NULL characters */</font></i>
<a name='L3946'>
<a name='L3947'>    <b>while</b> (size-- &gt; 0) <font color='red'>{</font>
<a name='L3948'>        <b>if</b> (*s == ch)
<a name='L3949'>            <b>return</b> s;
<a name='L3950'>        s++;
<a name='L3951'>    <font color='red'>}</font>
<a name='L3952'>
<a name='L3953'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3954'><font color='red'>}</font>
<a name='L3955'>
<a name='L3956'><b>static</b> <b>const</b> <b>char</b> *hexdigits = "0123456789abcdef";
<a name='L3957'>
<a name='L3958'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3579.html' title='Multiple refered from 2 places.'>PyUnicode_EncodeUnicodeEscape</a>(<b>const</b> Py_UNICODE *s,
<a name='L3959'>                                        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L3960'><font color='red'>{</font>
<a name='L3961'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repr;
<a name='L3962'>    <b>char</b> *p;
<a name='L3963'>
<a name='L3964'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L3965'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> expandsize = 10;
<a name='L3966'><font color='darkred'>#else</font>
<a name='L3967'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> expandsize = 6;
<a name='L3968'><font color='darkred'>#endif</font>
<a name='L3969'>
<a name='L3970'>    <i><font color='green'>/* XXX(nnorwitz): rather than over-allocating, it would be</font></i>
<a name='L3971'><i><font color='green'>       better to choose a different scheme.  Perhaps scan the</font></i>
<a name='L3972'><i><font color='green'>       first N-chars of the string and allocate based on that size.</font></i>
<a name='L3973'><i><font color='green'>    */</font></i>
<a name='L3974'>    <i><font color='green'>/* Initial allocation is based on the longest-possible unichr</font></i>
<a name='L3975'><i><font color='green'>       escape.</font></i>
<a name='L3976'><i><font color='green'></font></i>
<a name='L3977'><i><font color='green'>       In wide (UTF-32) builds '\U00xxxxxx' is 10 chars per source</font></i>
<a name='L3978'><i><font color='green'>       unichr, so in this case it's the longest unichr escape. In</font></i>
<a name='L3979'><i><font color='green'>       narrow (UTF-16) builds this is five chars per source unichr</font></i>
<a name='L3980'><i><font color='green'>       since there are two unichrs in the surrogate pair, so in narrow</font></i>
<a name='L3981'><i><font color='green'>       (UTF-16) builds it's not the longest unichr escape.</font></i>
<a name='L3982'><i><font color='green'></font></i>
<a name='L3983'><i><font color='green'>       In wide or narrow builds '\uxxxx' is 6 chars per source unichr,</font></i>
<a name='L3984'><i><font color='green'>       so in the narrow (UTF-16) build case it's the longest unichr</font></i>
<a name='L3985'><i><font color='green'>       escape.</font></i>
<a name='L3986'><i><font color='green'>    */</font></i>
<a name='L3987'>
<a name='L3988'>    <b>if</b> (size == 0)
<a name='L3989'>        <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L3990'>
<a name='L3991'>    <b>if</b> (size &gt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - 2 - 1) / expandsize)
<a name='L3992'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L3993'>
<a name='L3994'>    repr = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L3995'>                                     2
<a name='L3996'>                                     + expandsize*size
<a name='L3997'>                                     + 1);
<a name='L3998'>    <b>if</b> (repr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3999'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4000'>
<a name='L4001'>    p = PyBytes_AS_STRING(repr);
<a name='L4002'>
<a name='L4003'>    <b>while</b> (size-- &gt; 0) <font color='red'>{</font>
<a name='L4004'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *s++;
<a name='L4005'>
<a name='L4006'>        <i><font color='green'>/* Escape backslashes */</font></i>
<a name='L4007'>        <b>if</b> (ch == '\\') <font color='red'>{</font>
<a name='L4008'>            *p++ = '\\';
<a name='L4009'>            *p++ = (<b>char</b>) ch;
<a name='L4010'>            <b>continue</b>;
<a name='L4011'>        <font color='red'>}</font>
<a name='L4012'>
<a name='L4013'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L4014'>        <i><font color='green'>/* Map 21-bit characters to '\U00xxxxxx' */</font></i>
<a name='L4015'>        <b>else</b> <b>if</b> (ch &gt;= 0x10000) <font color='red'>{</font>
<a name='L4016'>            *p++ = '\\';
<a name='L4017'>            *p++ = 'U';
<a name='L4018'>            *p++ = hexdigits[(ch &gt;&gt; 28) &amp; 0x0000000F];
<a name='L4019'>            *p++ = hexdigits[(ch &gt;&gt; 24) &amp; 0x0000000F];
<a name='L4020'>            *p++ = hexdigits[(ch &gt;&gt; 20) &amp; 0x0000000F];
<a name='L4021'>            *p++ = hexdigits[(ch &gt;&gt; 16) &amp; 0x0000000F];
<a name='L4022'>            *p++ = hexdigits[(ch &gt;&gt; 12) &amp; 0x0000000F];
<a name='L4023'>            *p++ = hexdigits[(ch &gt;&gt; 8) &amp; 0x0000000F];
<a name='L4024'>            *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0x0000000F];
<a name='L4025'>            *p++ = hexdigits[ch &amp; 0x0000000F];
<a name='L4026'>            <b>continue</b>;
<a name='L4027'>        <font color='red'>}</font>
<a name='L4028'><font color='darkred'>#else</font>
<a name='L4029'>        <i><font color='green'>/* Map UTF-16 surrogate pairs to '\U00xxxxxx' */</font></i>
<a name='L4030'>        <b>else</b> <b>if</b> (ch &gt;= 0xD800 &amp;&amp; ch &lt; 0xDC00) <font color='red'>{</font>
<a name='L4031'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch2;
<a name='L4032'>            <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ucs;
<a name='L4033'>
<a name='L4034'>            ch2 = *s++;
<a name='L4035'>            size--;
<a name='L4036'>            <b>if</b> (ch2 &gt;= 0xDC00 &amp;&amp; ch2 &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L4037'>                ucs = (((ch &amp; 0x03FF) &lt;&lt; 10) | (ch2 &amp; 0x03FF)) + 0x00010000;
<a name='L4038'>                *p++ = '\\';
<a name='L4039'>                *p++ = 'U';
<a name='L4040'>                *p++ = hexdigits[(ucs &gt;&gt; 28) &amp; 0x0000000F];
<a name='L4041'>                *p++ = hexdigits[(ucs &gt;&gt; 24) &amp; 0x0000000F];
<a name='L4042'>                *p++ = hexdigits[(ucs &gt;&gt; 20) &amp; 0x0000000F];
<a name='L4043'>                *p++ = hexdigits[(ucs &gt;&gt; 16) &amp; 0x0000000F];
<a name='L4044'>                *p++ = hexdigits[(ucs &gt;&gt; 12) &amp; 0x0000000F];
<a name='L4045'>                *p++ = hexdigits[(ucs &gt;&gt; 8) &amp; 0x0000000F];
<a name='L4046'>                *p++ = hexdigits[(ucs &gt;&gt; 4) &amp; 0x0000000F];
<a name='L4047'>                *p++ = hexdigits[ucs &amp; 0x0000000F];
<a name='L4048'>                <b>continue</b>;
<a name='L4049'>            <font color='red'>}</font>
<a name='L4050'>            <i><font color='green'>/* Fall through: isolated surrogates are copied as-is */</font></i>
<a name='L4051'>            s--;
<a name='L4052'>            size++;
<a name='L4053'>        <font color='red'>}</font>
<a name='L4054'><font color='darkred'>#endif</font>
<a name='L4055'>
<a name='L4056'>        <i><font color='green'>/* Map 16-bit characters to '\uxxxx' */</font></i>
<a name='L4057'>        <b>if</b> (ch &gt;= 256) <font color='red'>{</font>
<a name='L4058'>            *p++ = '\\';
<a name='L4059'>            *p++ = 'u';
<a name='L4060'>            *p++ = hexdigits[(ch &gt;&gt; 12) &amp; 0x000F];
<a name='L4061'>            *p++ = hexdigits[(ch &gt;&gt; 8) &amp; 0x000F];
<a name='L4062'>            *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0x000F];
<a name='L4063'>            *p++ = hexdigits[ch &amp; 0x000F];
<a name='L4064'>        <font color='red'>}</font>
<a name='L4065'>
<a name='L4066'>        <i><font color='green'>/* Map special whitespace to '\t', \n', '\r' */</font></i>
<a name='L4067'>        <b>else</b> <b>if</b> (ch == '\t') <font color='red'>{</font>
<a name='L4068'>            *p++ = '\\';
<a name='L4069'>            *p++ = 't';
<a name='L4070'>        <font color='red'>}</font>
<a name='L4071'>        <b>else</b> <b>if</b> (ch == '\n') <font color='red'>{</font>
<a name='L4072'>            *p++ = '\\';
<a name='L4073'>            *p++ = 'n';
<a name='L4074'>        <font color='red'>}</font>
<a name='L4075'>        <b>else</b> <b>if</b> (ch == '\r') <font color='red'>{</font>
<a name='L4076'>            *p++ = '\\';
<a name='L4077'>            *p++ = 'r';
<a name='L4078'>        <font color='red'>}</font>
<a name='L4079'>
<a name='L4080'>        <i><font color='green'>/* Map non-printable US ASCII to '\xhh' */</font></i>
<a name='L4081'>        <b>else</b> <b>if</b> (ch &lt; ' ' || ch &gt;= 0x7F) <font color='red'>{</font>
<a name='L4082'>            *p++ = '\\';
<a name='L4083'>            *p++ = 'x';
<a name='L4084'>            *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0x000F];
<a name='L4085'>            *p++ = hexdigits[ch &amp; 0x000F];
<a name='L4086'>        <font color='red'>}</font>
<a name='L4087'>
<a name='L4088'>        <i><font color='green'>/* Copy everything else as-is */</font></i>
<a name='L4089'>        <b>else</b>
<a name='L4090'>            *p++ = (<b>char</b>) ch;
<a name='L4091'>    <font color='red'>}</font>
<a name='L4092'>
<a name='L4093'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(p - PyBytes_AS_STRING(repr) &gt; 0);
<a name='L4094'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;repr, p - PyBytes_AS_STRING(repr)) &lt; 0)
<a name='L4095'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4096'>    <b>return</b> repr;
<a name='L4097'><font color='red'>}</font>
<a name='L4098'>
<a name='L4099'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsUnicodeEscapeString(PyObject *unicode)
<a name='L4100'><font color='red'>{</font>
<a name='L4101'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s;
<a name='L4102'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L4103'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L4104'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4105'>    <font color='red'>}</font>
<a name='L4106'>    s = <a href='../D/4002.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUnicodeEscape</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L4107'>                                      <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode));
<a name='L4108'>    <b>return</b> s;
<a name='L4109'><font color='red'>}</font>
<a name='L4110'>
<a name='L4111'><i><font color='green'>/* --- Raw Unicode Escape Codec ------------------------------------------- */</font></i>
<a name='L4112'>
<a name='L4113'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3560.html' title='Multiple refered from 3 places.'>PyUnicode_DecodeRawUnicodeEscape</a>(<b>const</b> <b>char</b> *s,
<a name='L4114'>                                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4115'>                                           <b>const</b> <b>char</b> *errors)
<a name='L4116'><font color='red'>{</font>
<a name='L4117'>    <b>const</b> <b>char</b> *starts = s;
<a name='L4118'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L4119'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L4120'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L4121'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v;
<a name='L4122'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L4123'>    <b>const</b> <b>char</b> *end;
<a name='L4124'>    <b>const</b> <b>char</b> *bs;
<a name='L4125'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4126'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4127'>
<a name='L4128'>    <i><font color='green'>/* Escaped strings will always be longer than the resulting</font></i>
<a name='L4129'><i><font color='green'>       Unicode string, so we start with size here and then reduce the</font></i>
<a name='L4130'><i><font color='green'>       length after conversion to the true value. (But decoding error</font></i>
<a name='L4131'><i><font color='green'>       handler might have to resize the string) */</font></i>
<a name='L4132'>    v = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L4133'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4134'>        <b>goto</b> onError;
<a name='L4135'>    <b>if</b> (size == 0)
<a name='L4136'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4137'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L4138'>    end = s + size;
<a name='L4139'>    <b>while</b> (s &lt; end) <font color='red'>{</font>
<a name='L4140'>        <b>unsigned</b> <b>char</b> c;
<a name='L4141'>        <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> x;
<a name='L4142'>        <b>int</b> i;
<a name='L4143'>        <b>int</b> count;
<a name='L4144'>
<a name='L4145'>        <i><font color='green'>/* Non-escape characters are interpreted as Unicode ordinals */</font></i>
<a name='L4146'>        <b>if</b> (*s != '\\') <font color='red'>{</font>
<a name='L4147'>            *p++ = (<b>unsigned</b> <b>char</b>)*s++;
<a name='L4148'>            <b>continue</b>;
<a name='L4149'>        <font color='red'>}</font>
<a name='L4150'>        startinpos = s-starts;
<a name='L4151'>
<a name='L4152'>        <i><font color='green'>/* \u-escapes are only interpreted iff the number of leading</font></i>
<a name='L4153'><i><font color='green'>           backslashes if odd */</font></i>
<a name='L4154'>        bs = s;
<a name='L4155'>        <b>for</b> (;s &lt; end;) <font color='red'>{</font>
<a name='L4156'>            <b>if</b> (*s != '\\')
<a name='L4157'>                <b>break</b>;
<a name='L4158'>            *p++ = (<b>unsigned</b> <b>char</b>)*s++;
<a name='L4159'>        <font color='red'>}</font>
<a name='L4160'>        <b>if</b> (((s - bs) &amp; 1) == 0 ||
<a name='L4161'>            s &gt;= end ||
<a name='L4162'>            (*s != 'u' &amp;&amp; *s != 'U')) <font color='red'>{</font>
<a name='L4163'>            <b>continue</b>;
<a name='L4164'>        <font color='red'>}</font>
<a name='L4165'>        p--;
<a name='L4166'>        count = *s=='u' ? 4 : 8;
<a name='L4167'>        s++;
<a name='L4168'>
<a name='L4169'>        <i><font color='green'>/* \uXXXX with 4 hex digits, \Uxxxxxxxx with 8 */</font></i>
<a name='L4170'>        outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L4171'>        <b>for</b> (x = 0, i = 0; i &lt; count; ++i, ++s) <font color='red'>{</font>
<a name='L4172'>            c = (<b>unsigned</b> <b>char</b>)*s;
<a name='L4173'>            <b>if</b> (!<a href='../S/556.html#L22' title='Defined at 22 in Include/pyctype.h.'>Py_ISXDIGIT</a>(c)) <font color='red'>{</font>
<a name='L4174'>                endinpos = s-starts;
<a name='L4175'>                <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L4176'>                        errors, &amp;errorHandler,
<a name='L4177'>                        "rawunicodeescape", "truncated \\uXXXX",
<a name='L4178'>                        &amp;starts, &amp;end, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L4179'>                        &amp;v, &amp;outpos, &amp;p))
<a name='L4180'>                    <b>goto</b> onError;
<a name='L4181'>                <b>goto</b> nextByte;
<a name='L4182'>            <font color='red'>}</font>
<a name='L4183'>            x = (x&lt;&lt;4) &amp; ~0xF;
<a name='L4184'>            <b>if</b> (c &gt;= '0' &amp;&amp; c &lt;= '9')
<a name='L4185'>                x += c - '0';
<a name='L4186'>            <b>else</b> <b>if</b> (c &gt;= 'a' &amp;&amp; c &lt;= 'f')
<a name='L4187'>                x += 10 + c - 'a';
<a name='L4188'>            <b>else</b>
<a name='L4189'>                x += 10 + c - 'A';
<a name='L4190'>        <font color='red'>}</font>
<a name='L4191'>        <b>if</b> (x &lt;= 0xffff)
<a name='L4192'>            <i><font color='green'>/* UCS-2 character */</font></i>
<a name='L4193'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) x;
<a name='L4194'>        <b>else</b> <b>if</b> (x &lt;= 0x10ffff) <font color='red'>{</font>
<a name='L4195'>            <i><font color='green'>/* UCS-4 character. Either store directly, or as</font></i>
<a name='L4196'><i><font color='green'>               surrogate pair. */</font></i>
<a name='L4197'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L4198'>            *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) x;
<a name='L4199'><font color='darkred'>#else</font>
<a name='L4200'>            x -= 0x10000L;
<a name='L4201'>            *p++ = 0xD800 + (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) (x &gt;&gt; 10);
<a name='L4202'>            *p++ = 0xDC00 + (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) (x &amp; 0x03FF);
<a name='L4203'><font color='darkred'>#endif</font>
<a name='L4204'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L4205'>            endinpos = s-starts;
<a name='L4206'>            outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L4207'>            <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L4208'>                    errors, &amp;errorHandler,
<a name='L4209'>                    "rawunicodeescape", "\\Uxxxxxxxx out of range",
<a name='L4210'>                    &amp;starts, &amp;end, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L4211'>                    &amp;v, &amp;outpos, &amp;p))
<a name='L4212'>                <b>goto</b> onError;
<a name='L4213'>        <font color='red'>}</font>
<a name='L4214'>      nextByte:
<a name='L4215'>        ;
<a name='L4216'>    <font color='red'>}</font>
<a name='L4217'>    <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;v, p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v)) &lt; 0)
<a name='L4218'>        <b>goto</b> onError;
<a name='L4219'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L4220'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L4221'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4222'>
<a name='L4223'>  onError:
<a name='L4224'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L4225'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L4226'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L4227'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4228'><font color='red'>}</font>
<a name='L4229'>
<a name='L4230'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3574.html' title='Multiple refered from 2 places.'>PyUnicode_EncodeRawUnicodeEscape</a>(<b>const</b> Py_UNICODE *s,
<a name='L4231'>                                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L4232'><font color='red'>{</font>
<a name='L4233'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repr;
<a name='L4234'>    <b>char</b> *p;
<a name='L4235'>    <b>char</b> *q;
<a name='L4236'>
<a name='L4237'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L4238'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> expandsize = 10;
<a name='L4239'><font color='darkred'>#else</font>
<a name='L4240'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> expandsize = 6;
<a name='L4241'><font color='darkred'>#endif</font>
<a name='L4242'>
<a name='L4243'>    <b>if</b> (size &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / expandsize)
<a name='L4244'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L4245'>
<a name='L4246'>    repr = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, expandsize * size);
<a name='L4247'>    <b>if</b> (repr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4248'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4249'>    <b>if</b> (size == 0)
<a name='L4250'>        <b>return</b> repr;
<a name='L4251'>
<a name='L4252'>    p = q = PyBytes_AS_STRING(repr);
<a name='L4253'>    <b>while</b> (size-- &gt; 0) <font color='red'>{</font>
<a name='L4254'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *s++;
<a name='L4255'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L4256'>        <i><font color='green'>/* Map 32-bit characters to '\Uxxxxxxxx' */</font></i>
<a name='L4257'>        <b>if</b> (ch &gt;= 0x10000) <font color='red'>{</font>
<a name='L4258'>            *p++ = '\\';
<a name='L4259'>            *p++ = 'U';
<a name='L4260'>            *p++ = hexdigits[(ch &gt;&gt; 28) &amp; 0xf];
<a name='L4261'>            *p++ = hexdigits[(ch &gt;&gt; 24) &amp; 0xf];
<a name='L4262'>            *p++ = hexdigits[(ch &gt;&gt; 20) &amp; 0xf];
<a name='L4263'>            *p++ = hexdigits[(ch &gt;&gt; 16) &amp; 0xf];
<a name='L4264'>            *p++ = hexdigits[(ch &gt;&gt; 12) &amp; 0xf];
<a name='L4265'>            *p++ = hexdigits[(ch &gt;&gt; 8) &amp; 0xf];
<a name='L4266'>            *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0xf];
<a name='L4267'>            *p++ = hexdigits[ch &amp; 15];
<a name='L4268'>        <font color='red'>}</font>
<a name='L4269'>        <b>else</b>
<a name='L4270'><font color='darkred'>#else</font>
<a name='L4271'>            <i><font color='green'>/* Map UTF-16 surrogate pairs to '\U00xxxxxx' */</font></i>
<a name='L4272'>            <b>if</b> (ch &gt;= 0xD800 &amp;&amp; ch &lt; 0xDC00) <font color='red'>{</font>
<a name='L4273'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch2;
<a name='L4274'>                <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ucs;
<a name='L4275'>
<a name='L4276'>                ch2 = *s++;
<a name='L4277'>                size--;
<a name='L4278'>                <b>if</b> (ch2 &gt;= 0xDC00 &amp;&amp; ch2 &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L4279'>                    ucs = (((ch &amp; 0x03FF) &lt;&lt; 10) | (ch2 &amp; 0x03FF)) + 0x00010000;
<a name='L4280'>                    *p++ = '\\';
<a name='L4281'>                    *p++ = 'U';
<a name='L4282'>                    *p++ = hexdigits[(ucs &gt;&gt; 28) &amp; 0xf];
<a name='L4283'>                    *p++ = hexdigits[(ucs &gt;&gt; 24) &amp; 0xf];
<a name='L4284'>                    *p++ = hexdigits[(ucs &gt;&gt; 20) &amp; 0xf];
<a name='L4285'>                    *p++ = hexdigits[(ucs &gt;&gt; 16) &amp; 0xf];
<a name='L4286'>                    *p++ = hexdigits[(ucs &gt;&gt; 12) &amp; 0xf];
<a name='L4287'>                    *p++ = hexdigits[(ucs &gt;&gt; 8) &amp; 0xf];
<a name='L4288'>                    *p++ = hexdigits[(ucs &gt;&gt; 4) &amp; 0xf];
<a name='L4289'>                    *p++ = hexdigits[ucs &amp; 0xf];
<a name='L4290'>                    <b>continue</b>;
<a name='L4291'>                <font color='red'>}</font>
<a name='L4292'>                <i><font color='green'>/* Fall through: isolated surrogates are copied as-is */</font></i>
<a name='L4293'>                s--;
<a name='L4294'>                size++;
<a name='L4295'>            <font color='red'>}</font>
<a name='L4296'><font color='darkred'>#endif</font>
<a name='L4297'>        <i><font color='green'>/* Map 16-bit characters to '\uxxxx' */</font></i>
<a name='L4298'>        <b>if</b> (ch &gt;= 256) <font color='red'>{</font>
<a name='L4299'>            *p++ = '\\';
<a name='L4300'>            *p++ = 'u';
<a name='L4301'>            *p++ = hexdigits[(ch &gt;&gt; 12) &amp; 0xf];
<a name='L4302'>            *p++ = hexdigits[(ch &gt;&gt; 8) &amp; 0xf];
<a name='L4303'>            *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0xf];
<a name='L4304'>            *p++ = hexdigits[ch &amp; 15];
<a name='L4305'>        <font color='red'>}</font>
<a name='L4306'>        <i><font color='green'>/* Copy everything else as-is */</font></i>
<a name='L4307'>        <b>else</b>
<a name='L4308'>            *p++ = (<b>char</b>) ch;
<a name='L4309'>    <font color='red'>}</font>
<a name='L4310'>    size = p - q;
<a name='L4311'>
<a name='L4312'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(size &gt; 0);
<a name='L4313'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;repr, size) &lt; 0)
<a name='L4314'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4315'>    <b>return</b> repr;
<a name='L4316'><font color='red'>}</font>
<a name='L4317'>
<a name='L4318'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsRawUnicodeEscapeString(PyObject *unicode)
<a name='L4319'><font color='red'>{</font>
<a name='L4320'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s;
<a name='L4321'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L4322'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L4323'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4324'>    <font color='red'>}</font>
<a name='L4325'>    s = <a href='../D/3997.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeRawUnicodeEscape</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L4326'>                                         <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode));
<a name='L4327'>
<a name='L4328'>    <b>return</b> s;
<a name='L4329'><font color='red'>}</font>
<a name='L4330'>
<a name='L4331'><i><font color='green'>/* --- Unicode Internal Codec ------------------------------------------- */</font></i>
<a name='L4332'>
<a name='L4333'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2243.html#L246' title='Refered from 246 in Modules/_codecsmodule.c.'>_PyUnicode_DecodeUnicodeInternal</a>(<b>const</b> <b>char</b> *s,
<a name='L4334'>                                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4335'>                                           <b>const</b> <b>char</b> *errors)
<a name='L4336'><font color='red'>{</font>
<a name='L4337'>    <b>const</b> <b>char</b> *starts = s;
<a name='L4338'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L4339'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L4340'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L4341'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v;
<a name='L4342'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L4343'>    <b>const</b> <b>char</b> *end;
<a name='L4344'>    <b>const</b> <b>char</b> *reason;
<a name='L4345'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4346'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4347'>
<a name='L4348'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L4349'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> unimax = <a href='../D/4019.html' title='Multiple defined in 3 places.'>PyUnicode_GetMax</a>();
<a name='L4350'><font color='darkred'>#endif</font>
<a name='L4351'>
<a name='L4352'>    <i><font color='green'>/* XXX overflow detection missing */</font></i>
<a name='L4353'>    v = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>((size+<a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>-1)/ <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>);
<a name='L4354'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4355'>        <b>goto</b> onError;
<a name='L4356'>    <b>if</b> (<a href='../D/4020.html' title='Multiple defined in 3 places.'>PyUnicode_GetSize</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v) == 0)
<a name='L4357'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4358'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L4359'>    end = s + size;
<a name='L4360'>
<a name='L4361'>    <b>while</b> (s &lt; end) <font color='red'>{</font>
<a name='L4362'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(p, s, <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>));
<a name='L4363'>        <i><font color='green'>/* We have to sanity check the raw data, otherwise doom looms for</font></i>
<a name='L4364'><i><font color='green'>           some malformed UCS-4 data. */</font></i>
<a name='L4365'>        <b>if</b> (
<a name='L4366'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L4367'>            *p &gt; unimax || *p &lt; 0 ||
<a name='L4368'><font color='darkred'>#endif</font>
<a name='L4369'>            end-s &lt; <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>
<a name='L4370'>            )
<a name='L4371'>        <font color='red'>{</font>
<a name='L4372'>            startinpos = s - starts;
<a name='L4373'>            <b>if</b> (end-s &lt; <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>) <font color='red'>{</font>
<a name='L4374'>                endinpos = end-starts;
<a name='L4375'>                reason = "truncated input";
<a name='L4376'>            <font color='red'>}</font>
<a name='L4377'>            <b>else</b> <font color='red'>{</font>
<a name='L4378'>                endinpos = s - starts + <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>;
<a name='L4379'>                reason = "illegal code point (&gt; 0x10FFFF)";
<a name='L4380'>            <font color='red'>}</font>
<a name='L4381'>            outpos = p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L4382'>            <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L4383'>                    errors, &amp;errorHandler,
<a name='L4384'>                    "unicode_internal", reason,
<a name='L4385'>                    &amp;starts, &amp;end, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L4386'>                    &amp;v, &amp;outpos, &amp;p)) <font color='red'>{</font>
<a name='L4387'>                <b>goto</b> onError;
<a name='L4388'>            <font color='red'>}</font>
<a name='L4389'>        <font color='red'>}</font>
<a name='L4390'>        <b>else</b> <font color='red'>{</font>
<a name='L4391'>            p++;
<a name='L4392'>            s += <a href='../D/4282.html' title='Multiple defined in 3 places.'>Py_UNICODE_SIZE</a>;
<a name='L4393'>        <font color='red'>}</font>
<a name='L4394'>    <font color='red'>}</font>
<a name='L4395'>
<a name='L4396'>    <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;v, p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v)) &lt; 0)
<a name='L4397'>        <b>goto</b> onError;
<a name='L4398'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L4399'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L4400'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4401'>
<a name='L4402'>  onError:
<a name='L4403'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L4404'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L4405'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L4406'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4407'><font color='red'>}</font>
<a name='L4408'>
<a name='L4409'><i><font color='green'>/* --- Latin-1 Codec ------------------------------------------------------ */</font></i>
<a name='L4410'>
<a name='L4411'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3557.html' title='Multiple refered from 5 places.'>PyUnicode_DecodeLatin1</a>(<b>const</b> <b>char</b> *s,
<a name='L4412'>                                 <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4413'>                                 <b>const</b> <b>char</b> *errors)
<a name='L4414'><font color='red'>{</font>
<a name='L4415'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v;
<a name='L4416'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L4417'>    <b>const</b> <b>char</b> *e, *unrolled_end;
<a name='L4418'>
<a name='L4419'>    <i><font color='green'>/* Latin-1 is equivalent to the first 256 ordinals in Unicode. */</font></i>
<a name='L4420'>    <b>if</b> (size == 1) <font color='red'>{</font>
<a name='L4421'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> r = *(<b>unsigned</b> <b>char</b>*)s;
<a name='L4422'>        <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(&amp;r, 1);
<a name='L4423'>    <font color='red'>}</font>
<a name='L4424'>
<a name='L4425'>    v = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L4426'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4427'>        <b>goto</b> onError;
<a name='L4428'>    <b>if</b> (size == 0)
<a name='L4429'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4430'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L4431'>    e = s + size;
<a name='L4432'>    <i><font color='green'>/* Unrolling the copy makes it much faster by reducing the looping</font></i>
<a name='L4433'><i><font color='green'>       overhead. This is similar to what many memcpy() implementations do. */</font></i>
<a name='L4434'>    unrolled_end = e - 4;
<a name='L4435'>    <b>while</b> (s &lt; unrolled_end) <font color='red'>{</font>
<a name='L4436'>        p[0] = (<b>unsigned</b> <b>char</b>) s[0];
<a name='L4437'>        p[1] = (<b>unsigned</b> <b>char</b>) s[1];
<a name='L4438'>        p[2] = (<b>unsigned</b> <b>char</b>) s[2];
<a name='L4439'>        p[3] = (<b>unsigned</b> <b>char</b>) s[3];
<a name='L4440'>        s += 4;
<a name='L4441'>        p += 4;
<a name='L4442'>    <font color='red'>}</font>
<a name='L4443'>    <b>while</b> (s &lt; e)
<a name='L4444'>        *p++ = (<b>unsigned</b> <b>char</b>) *s++;
<a name='L4445'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4446'>
<a name='L4447'>  onError:
<a name='L4448'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L4449'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4450'><font color='red'>}</font>
<a name='L4451'>
<a name='L4452'><i><font color='green'>/* create or adjust a UnicodeEncodeError */</font></i>
<a name='L4453'><b>static</b> <b>void</b> <a href='../R/8837.html' title='Multiple refered from 2 places.'>make_encode_exception</a>(PyObject **exceptionObject,
<a name='L4454'>                                  <b>const</b> <b>char</b> *encoding,
<a name='L4455'>                                  <b>const</b> Py_UNICODE *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4456'>                                  <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos,
<a name='L4457'>                                  <b>const</b> <b>char</b> *reason)
<a name='L4458'><font color='red'>{</font>
<a name='L4459'>    <b>if</b> (*exceptionObject == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4460'>        *exceptionObject = <a href='../S/2789.html#L1509' title='Defined at 1509 in Objects/exceptions.c.'>PyUnicodeEncodeError_Create</a>(
<a name='L4461'>            <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, unicode, size, startpos, endpos, reason);
<a name='L4462'>    <font color='red'>}</font>
<a name='L4463'>    <b>else</b> <font color='red'>{</font>
<a name='L4464'>        <b>if</b> (<a href='../S/2789.html#L1236' title='Defined at 1236 in Objects/exceptions.c.'>PyUnicodeEncodeError_SetStart</a>(*exceptionObject, startpos))
<a name='L4465'>            <b>goto</b> onError;
<a name='L4466'>        <b>if</b> (<a href='../S/2789.html#L1304' title='Defined at 1304 in Objects/exceptions.c.'>PyUnicodeEncodeError_SetEnd</a>(*exceptionObject, endpos))
<a name='L4467'>            <b>goto</b> onError;
<a name='L4468'>        <b>if</b> (<a href='../S/2789.html#L1348' title='Defined at 1348 in Objects/exceptions.c.'>PyUnicodeEncodeError_SetReason</a>(*exceptionObject, reason))
<a name='L4469'>            <b>goto</b> onError;
<a name='L4470'>        <b>return</b>;
<a name='L4471'>      onError:
<a name='L4472'>        Py_DECREF(*exceptionObject);
<a name='L4473'>        *exceptionObject = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4474'>    <font color='red'>}</font>
<a name='L4475'><font color='red'>}</font>
<a name='L4476'>
<a name='L4477'><i><font color='green'>/* raises a UnicodeEncodeError */</font></i>
<a name='L4478'><b>static</b> <b>void</b> <a href='../R/9930.html' title='Multiple refered from 12 places.'>raise_encode_exception</a>(PyObject **exceptionObject,
<a name='L4479'>                                   <b>const</b> <b>char</b> *encoding,
<a name='L4480'>                                   <b>const</b> Py_UNICODE *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4481'>                                   <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos,
<a name='L4482'>                                   <b>const</b> <b>char</b> *reason)
<a name='L4483'><font color='red'>{</font>
<a name='L4484'>    <a href='../S/2828.html#L4453' title='Defined at 4453 in Objects/unicodeobject.c.'>make_encode_exception</a>(exceptionObject,
<a name='L4485'>                          <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, unicode, size, startpos, endpos, reason);
<a name='L4486'>    <b>if</b> (*exceptionObject != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4487'>        <a href='../S/3093.html#L480' title='Defined at 480 in Python/codecs.c.'>PyCodec_StrictErrors</a>(*exceptionObject);
<a name='L4488'><font color='red'>}</font>
<a name='L4489'>
<a name='L4490'><i><font color='green'>/* error handling callback helper:</font></i>
<a name='L4491'><i><font color='green'>   build arguments, call the callback and check the arguments,</font></i>
<a name='L4492'><i><font color='green'>   put the result into newpos and return the replacement string, which</font></i>
<a name='L4493'><i><font color='green'>   has to be freed by the caller */</font></i>
<a name='L4494'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/11076.html' title='Multiple refered from 5 places.'>unicode_encode_call_errorhandler</a>(<b>const</b> <b>char</b> *errors,
<a name='L4495'>                                                  PyObject **errorHandler,
<a name='L4496'>                                                  <b>const</b> <b>char</b> *encoding, <b>const</b> <b>char</b> *reason,
<a name='L4497'>                                                  <b>const</b> Py_UNICODE *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, PyObject **exceptionObject,
<a name='L4498'>                                                  <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos,
<a name='L4499'>                                                  <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *newpos)
<a name='L4500'><font color='red'>{</font>
<a name='L4501'>    <b>static</b> <b>char</b> *argparse = "On;encoding error handler must return (str/bytes, int) tuple";
<a name='L4502'>
<a name='L4503'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *restuple;
<a name='L4504'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *resunicode;
<a name='L4505'>
<a name='L4506'>    <b>if</b> (*errorHandler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4507'>        *errorHandler = <a href='../S/3093.html#L448' title='Defined at 448 in Python/codecs.c.'>PyCodec_LookupError</a>(errors);
<a name='L4508'>        <b>if</b> (*errorHandler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4509'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4510'>    <font color='red'>}</font>
<a name='L4511'>
<a name='L4512'>    <a href='../S/2828.html#L4453' title='Defined at 4453 in Objects/unicodeobject.c.'>make_encode_exception</a>(exceptionObject,
<a name='L4513'>                          <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, unicode, size, startpos, endpos, reason);
<a name='L4514'>    <b>if</b> (*exceptionObject == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4515'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4516'>
<a name='L4517'>    restuple = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(
<a name='L4518'>        *errorHandler, *exceptionObject, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4519'>    <b>if</b> (restuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4520'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4521'>    <b>if</b> (!PyTuple_Check(restuple)) <font color='red'>{</font>
<a name='L4522'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, &amp;argparse[3]);
<a name='L4523'>        Py_DECREF(restuple);
<a name='L4524'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4525'>    <font color='red'>}</font>
<a name='L4526'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(restuple, argparse,
<a name='L4527'>                          &amp;resunicode, newpos)) <font color='red'>{</font>
<a name='L4528'>        Py_DECREF(restuple);
<a name='L4529'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4530'>    <font color='red'>}</font>
<a name='L4531'>    <b>if</b> (!PyUnicode_Check(resunicode) &amp;&amp; !PyBytes_Check(resunicode)) <font color='red'>{</font>
<a name='L4532'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, &amp;argparse[3]);
<a name='L4533'>        Py_DECREF(restuple);
<a name='L4534'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4535'>    <font color='red'>}</font>
<a name='L4536'>    <b>if</b> (*newpos&lt;0)
<a name='L4537'>        *newpos = size+*newpos;
<a name='L4538'>    <b>if</b> (*newpos&lt;0 || *newpos&gt;size) <font color='red'>{</font>
<a name='L4539'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_IndexError, "position %zd from error handler out of bounds", *newpos);
<a name='L4540'>        Py_DECREF(restuple);
<a name='L4541'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4542'>    <font color='red'>}</font>
<a name='L4543'>    Py_INCREF(resunicode);
<a name='L4544'>    Py_DECREF(restuple);
<a name='L4545'>    <b>return</b> resunicode;
<a name='L4546'><font color='red'>}</font>
<a name='L4547'>
<a name='L4548'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/11077.html' title='Multiple refered from 2 places.'>unicode_encode_ucs1</a>(<b>const</b> Py_UNICODE *p,
<a name='L4549'>                                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4550'>                                     <b>const</b> <b>char</b> *errors,
<a name='L4551'>                                     <b>int</b> limit)
<a name='L4552'><font color='red'>{</font>
<a name='L4553'>    <i><font color='green'>/* output object */</font></i>
<a name='L4554'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res;
<a name='L4555'>    <i><font color='green'>/* pointers to the beginning and end+1 of input */</font></i>
<a name='L4556'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *startp = p;
<a name='L4557'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *endp = p + size;
<a name='L4558'>    <i><font color='green'>/* pointer to the beginning of the unencodable characters */</font></i>
<a name='L4559'>    <i><font color='green'>/* const Py_UNICODE *badp = NULL; */</font></i>
<a name='L4560'>    <i><font color='green'>/* pointer into the output */</font></i>
<a name='L4561'>    <b>char</b> *str;
<a name='L4562'>    <i><font color='green'>/* current output position */</font></i>
<a name='L4563'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ressize;
<a name='L4564'>    <b>const</b> <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = (limit == 256) ? "latin-1" : "ascii";
<a name='L4565'>    <b>const</b> <b>char</b> *reason = (limit == 256) ? "ordinal not in range(256)" : "ordinal not in range(128)";
<a name='L4566'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4567'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4568'>    <i><font color='green'>/* the following variable is used for caching string comparisons</font></i>
<a name='L4569'><i><font color='green'>     * -1=not initialized, 0=unknown, 1=strict, 2=replace, 3=ignore, 4=xmlcharrefreplace */</font></i>
<a name='L4570'>    <b>int</b> known_errorHandler = -1;
<a name='L4571'>
<a name='L4572'>    <i><font color='green'>/* allocate enough for a simple encoding without</font></i>
<a name='L4573'><i><font color='green'>       replacements, if we need more, we'll resize */</font></i>
<a name='L4574'>    <b>if</b> (size == 0)
<a name='L4575'>        <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L4576'>    res = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, size);
<a name='L4577'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4578'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4579'>    str = PyBytes_AS_STRING(res);
<a name='L4580'>    ressize = size;
<a name='L4581'>
<a name='L4582'>    <b>while</b> (p&lt;endp) <font color='red'>{</font>
<a name='L4583'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> c = *p;
<a name='L4584'>
<a name='L4585'>        <i><font color='green'>/* can we encode this? */</font></i>
<a name='L4586'>        <b>if</b> (c&lt;limit) <font color='red'>{</font>
<a name='L4587'>            <i><font color='green'>/* no overflow check, because we know that the space is enough */</font></i>
<a name='L4588'>            *str++ = (<b>char</b>)c;
<a name='L4589'>            ++p;
<a name='L4590'>        <font color='red'>}</font>
<a name='L4591'>        <b>else</b> <font color='red'>{</font>
<a name='L4592'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> unicodepos = p-startp;
<a name='L4593'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize;
<a name='L4594'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repunicode;
<a name='L4595'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> repsize;
<a name='L4596'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> newpos;
<a name='L4597'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> respos;
<a name='L4598'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *uni2;
<a name='L4599'>            <i><font color='green'>/* startpos for collecting unencodable chars */</font></i>
<a name='L4600'>            <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *collstart = p;
<a name='L4601'>            <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *collend = p;
<a name='L4602'>            <i><font color='green'>/* find all unecodable characters */</font></i>
<a name='L4603'>            <b>while</b> ((collend &lt; endp) &amp;&amp; ((*collend)&gt;=limit))
<a name='L4604'>                ++collend;
<a name='L4605'>            <i><font color='green'>/* cache callback name lookup (if not done yet, i.e. it's the first error) */</font></i>
<a name='L4606'>            <b>if</b> (known_errorHandler==-1) <font color='red'>{</font>
<a name='L4607'>                <b>if</b> ((errors==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) || (!strcmp(errors, "strict")))
<a name='L4608'>                    known_errorHandler = 1;
<a name='L4609'>                <b>else</b> <b>if</b> (!strcmp(errors, "replace"))
<a name='L4610'>                    known_errorHandler = 2;
<a name='L4611'>                <b>else</b> <b>if</b> (!strcmp(errors, "ignore"))
<a name='L4612'>                    known_errorHandler = 3;
<a name='L4613'>                <b>else</b> <b>if</b> (!strcmp(errors, "xmlcharrefreplace"))
<a name='L4614'>                    known_errorHandler = 4;
<a name='L4615'>                <b>else</b>
<a name='L4616'>                    known_errorHandler = 0;
<a name='L4617'>            <font color='red'>}</font>
<a name='L4618'>            <b>switch</b> (known_errorHandler) <font color='red'>{</font>
<a name='L4619'>            <b>case</b> 1: <i><font color='green'>/* strict */</font></i>
<a name='L4620'>                <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(&amp;exc, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, startp, size, collstart-startp, collend-startp, reason);
<a name='L4621'>                <b>goto</b> onError;
<a name='L4622'>            <b>case</b> 2: <i><font color='green'>/* replace */</font></i>
<a name='L4623'>                <b>while</b> (collstart++&lt;collend)
<a name='L4624'>                    *str++ = '?'; <i><font color='green'>/* fall through */</font></i>
<a name='L4625'>            <b>case</b> 3: <i><font color='green'>/* ignore */</font></i>
<a name='L4626'>                p = collend;
<a name='L4627'>                <b>break</b>;
<a name='L4628'>            <b>case</b> 4: <i><font color='green'>/* xmlcharrefreplace */</font></i>
<a name='L4629'>                respos = str - PyBytes_AS_STRING(res);
<a name='L4630'>                <i><font color='green'>/* determine replacement size (temporarily (mis)uses p) */</font></i>
<a name='L4631'>                <b>for</b> (p = collstart, repsize = 0; p &lt; collend; ++p) <font color='red'>{</font>
<a name='L4632'>                    <b>if</b> (*p&lt;10)
<a name='L4633'>                        repsize += 2+1+1;
<a name='L4634'>                    <b>else</b> <b>if</b> (*p&lt;100)
<a name='L4635'>                        repsize += 2+2+1;
<a name='L4636'>                    <b>else</b> <b>if</b> (*p&lt;1000)
<a name='L4637'>                        repsize += 2+3+1;
<a name='L4638'>                    <b>else</b> <b>if</b> (*p&lt;10000)
<a name='L4639'>                        repsize += 2+4+1;
<a name='L4640'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L4641'>                    <b>else</b>
<a name='L4642'>                        repsize += 2+5+1;
<a name='L4643'><font color='darkred'>#else</font>
<a name='L4644'>                    <b>else</b> <b>if</b> (*p&lt;100000)
<a name='L4645'>                        repsize += 2+5+1;
<a name='L4646'>                    <b>else</b> <b>if</b> (*p&lt;1000000)
<a name='L4647'>                        repsize += 2+6+1;
<a name='L4648'>                    <b>else</b>
<a name='L4649'>                        repsize += 2+7+1;
<a name='L4650'><font color='darkred'>#endif</font>
<a name='L4651'>                <font color='red'>}</font>
<a name='L4652'>                requiredsize = respos+repsize+(endp-collend);
<a name='L4653'>                <b>if</b> (requiredsize &gt; ressize) <font color='red'>{</font>
<a name='L4654'>                    <b>if</b> (requiredsize&lt;2*ressize)
<a name='L4655'>                        requiredsize = 2*ressize;
<a name='L4656'>                    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;res, requiredsize))
<a name='L4657'>                        <b>goto</b> onError;
<a name='L4658'>                    str = PyBytes_AS_STRING(res) + respos;
<a name='L4659'>                    ressize = requiredsize;
<a name='L4660'>                <font color='red'>}</font>
<a name='L4661'>                <i><font color='green'>/* generate replacement (temporarily (mis)uses p) */</font></i>
<a name='L4662'>                <b>for</b> (p = collstart; p &lt; collend; ++p) <font color='red'>{</font>
<a name='L4663'>                    str += sprintf(str, "&amp;#%d;", (<b>int</b>)*p);
<a name='L4664'>                <font color='red'>}</font>
<a name='L4665'>                p = collend;
<a name='L4666'>                <b>break</b>;
<a name='L4667'>            <b>default</b>:
<a name='L4668'>                repunicode = <a href='../S/2828.html#L4494' title='Defined at 4494 in Objects/unicodeobject.c.'>unicode_encode_call_errorhandler</a>(errors, &amp;errorHandler,
<a name='L4669'>                                                              <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, reason, startp, size, &amp;exc,
<a name='L4670'>                                                              collstart-startp, collend-startp, &amp;newpos);
<a name='L4671'>                <b>if</b> (repunicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4672'>                    <b>goto</b> onError;
<a name='L4673'>                <b>if</b> (PyBytes_Check(repunicode)) <font color='red'>{</font>
<a name='L4674'>                    <i><font color='green'>/* Directly copy bytes result to output. */</font></i>
<a name='L4675'>                    repsize = <a href='../S/2779.html#L506' title='Defined at 506 in Objects/bytesobject.c.'>PyBytes_Size</a>(repunicode);
<a name='L4676'>                    <b>if</b> (repsize &gt; 1) <font color='red'>{</font>
<a name='L4677'>                        <i><font color='green'>/* Make room for all additional bytes. */</font></i>
<a name='L4678'>                        respos = str - PyBytes_AS_STRING(res);
<a name='L4679'>                        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;res, ressize+repsize-1)) <font color='red'>{</font>
<a name='L4680'>                            Py_DECREF(repunicode);
<a name='L4681'>                            <b>goto</b> onError;
<a name='L4682'>                        <font color='red'>}</font>
<a name='L4683'>                        str = PyBytes_AS_STRING(res) + respos;
<a name='L4684'>                        ressize += repsize-1;
<a name='L4685'>                    <font color='red'>}</font>
<a name='L4686'>                    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(str, <a href='../S/2779.html#L517' title='Defined at 517 in Objects/bytesobject.c.'>PyBytes_AsString</a>(repunicode), repsize);
<a name='L4687'>                    str += repsize;
<a name='L4688'>                    p = startp + newpos;
<a name='L4689'>                    Py_DECREF(repunicode);
<a name='L4690'>                    <b>break</b>;
<a name='L4691'>                <font color='red'>}</font>
<a name='L4692'>                <i><font color='green'>/* need more space? (at least enough for what we</font></i>
<a name='L4693'><i><font color='green'>                   have+the replacement+the rest of the string, so</font></i>
<a name='L4694'><i><font color='green'>                   we won't have to check space for encodable characters) */</font></i>
<a name='L4695'>                respos = str - PyBytes_AS_STRING(res);
<a name='L4696'>                repsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(repunicode);
<a name='L4697'>                requiredsize = respos+repsize+(endp-collend);
<a name='L4698'>                <b>if</b> (requiredsize &gt; ressize) <font color='red'>{</font>
<a name='L4699'>                    <b>if</b> (requiredsize&lt;2*ressize)
<a name='L4700'>                        requiredsize = 2*ressize;
<a name='L4701'>                    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;res, requiredsize)) <font color='red'>{</font>
<a name='L4702'>                        Py_DECREF(repunicode);
<a name='L4703'>                        <b>goto</b> onError;
<a name='L4704'>                    <font color='red'>}</font>
<a name='L4705'>                    str = PyBytes_AS_STRING(res) + respos;
<a name='L4706'>                    ressize = requiredsize;
<a name='L4707'>                <font color='red'>}</font>
<a name='L4708'>                <i><font color='green'>/* check if there is anything unencodable in the replacement</font></i>
<a name='L4709'><i><font color='green'>                   and copy it to the output */</font></i>
<a name='L4710'>                <b>for</b> (uni2 = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repunicode);repsize--&gt;0; ++uni2, ++str) <font color='red'>{</font>
<a name='L4711'>                    c = *uni2;
<a name='L4712'>                    <b>if</b> (c &gt;= limit) <font color='red'>{</font>
<a name='L4713'>                        <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(&amp;exc, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, startp, size,
<a name='L4714'>                                               unicodepos, unicodepos+1, reason);
<a name='L4715'>                        Py_DECREF(repunicode);
<a name='L4716'>                        <b>goto</b> onError;
<a name='L4717'>                    <font color='red'>}</font>
<a name='L4718'>                    *str = (<b>char</b>)c;
<a name='L4719'>                <font color='red'>}</font>
<a name='L4720'>                p = startp + newpos;
<a name='L4721'>                Py_DECREF(repunicode);
<a name='L4722'>            <font color='red'>}</font>
<a name='L4723'>        <font color='red'>}</font>
<a name='L4724'>    <font color='red'>}</font>
<a name='L4725'>    <i><font color='green'>/* Resize if we allocated to much */</font></i>
<a name='L4726'>    size = str - PyBytes_AS_STRING(res);
<a name='L4727'>    <b>if</b> (size &lt; ressize) <font color='red'>{</font> <i><font color='green'>/* If this falls res will be NULL */</font></i>
<a name='L4728'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(size &gt;= 0);
<a name='L4729'>        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;res, size) &lt; 0)
<a name='L4730'>            <b>goto</b> onError;
<a name='L4731'>    <font color='red'>}</font>
<a name='L4732'>
<a name='L4733'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L4734'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L4735'>    <b>return</b> res;
<a name='L4736'>
<a name='L4737'>  onError:
<a name='L4738'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(res);
<a name='L4739'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L4740'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L4741'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4742'><font color='red'>}</font>
<a name='L4743'>
<a name='L4744'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3572.html' title='Multiple refered from 5 places.'>PyUnicode_EncodeLatin1</a>(<b>const</b> Py_UNICODE *p,
<a name='L4745'>                                 <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4746'>                                 <b>const</b> <b>char</b> *errors)
<a name='L4747'><font color='red'>{</font>
<a name='L4748'>    <b>return</b> <a href='../S/2828.html#L4548' title='Defined at 4548 in Objects/unicodeobject.c.'>unicode_encode_ucs1</a>(p, size, errors, 256);
<a name='L4749'><font color='red'>}</font>
<a name='L4750'>
<a name='L4751'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsLatin1String(PyObject *unicode)
<a name='L4752'><font color='red'>{</font>
<a name='L4753'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L4754'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L4755'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4756'>    <font color='red'>}</font>
<a name='L4757'>    <b>return</b> <a href='../D/3995.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeLatin1</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L4758'>                                  <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L4759'>                                  <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4760'><font color='red'>}</font>
<a name='L4761'>
<a name='L4762'><i><font color='green'>/* --- 7-bit ASCII Codec -------------------------------------------------- */</font></i>
<a name='L4763'>
<a name='L4764'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3553.html' title='Multiple refered from 7 places.'>PyUnicode_DecodeASCII</a>(<b>const</b> <b>char</b> *s,
<a name='L4765'>                                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4766'>                                <b>const</b> <b>char</b> *errors)
<a name='L4767'><font color='red'>{</font>
<a name='L4768'>    <b>const</b> <b>char</b> *starts = s;
<a name='L4769'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v;
<a name='L4770'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L4771'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L4772'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L4773'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L4774'>    <b>const</b> <b>char</b> *e;
<a name='L4775'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4776'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4777'>
<a name='L4778'>    <i><font color='green'>/* ASCII is equivalent to the first 128 ordinals in Unicode. */</font></i>
<a name='L4779'>    <b>if</b> (size == 1 &amp;&amp; *(<b>unsigned</b> <b>char</b>*)s &lt; 128) <font color='red'>{</font>
<a name='L4780'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> r = *(<b>unsigned</b> <b>char</b>*)s;
<a name='L4781'>        <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(&amp;r, 1);
<a name='L4782'>    <font color='red'>}</font>
<a name='L4783'>
<a name='L4784'>    v = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L4785'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4786'>        <b>goto</b> onError;
<a name='L4787'>    <b>if</b> (size == 0)
<a name='L4788'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4789'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L4790'>    e = s + size;
<a name='L4791'>    <b>while</b> (s &lt; e) <font color='red'>{</font>
<a name='L4792'>        <b>register</b> <b>unsigned</b> <b>char</b> c = (<b>unsigned</b> <b>char</b>)*s;
<a name='L4793'>        <b>if</b> (c &lt; 128) <font color='red'>{</font>
<a name='L4794'>            *p++ = c;
<a name='L4795'>            ++s;
<a name='L4796'>        <font color='red'>}</font>
<a name='L4797'>        <b>else</b> <font color='red'>{</font>
<a name='L4798'>            startinpos = s-starts;
<a name='L4799'>            endinpos = startinpos + 1;
<a name='L4800'>            outpos = p - (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *)<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L4801'>            <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L4802'>                    errors, &amp;errorHandler,
<a name='L4803'>                    "ascii", "ordinal not in range(128)",
<a name='L4804'>                    &amp;starts, &amp;e, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L4805'>                    &amp;v, &amp;outpos, &amp;p))
<a name='L4806'>                <b>goto</b> onError;
<a name='L4807'>        <font color='red'>}</font>
<a name='L4808'>    <font color='red'>}</font>
<a name='L4809'>    <b>if</b> (p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v) &lt; <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(v))
<a name='L4810'>        <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;v, p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v)) &lt; 0)
<a name='L4811'>            <b>goto</b> onError;
<a name='L4812'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L4813'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L4814'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4815'>
<a name='L4816'>  onError:
<a name='L4817'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L4818'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L4819'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L4820'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4821'><font color='red'>}</font>
<a name='L4822'>
<a name='L4823'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3569.html' title='Multiple refered from 6 places.'>PyUnicode_EncodeASCII</a>(<b>const</b> Py_UNICODE *p,
<a name='L4824'>                                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4825'>                                <b>const</b> <b>char</b> *errors)
<a name='L4826'><font color='red'>{</font>
<a name='L4827'>    <b>return</b> <a href='../S/2828.html#L4548' title='Defined at 4548 in Objects/unicodeobject.c.'>unicode_encode_ucs1</a>(p, size, errors, 128);
<a name='L4828'><font color='red'>}</font>
<a name='L4829'>
<a name='L4830'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3540.html' title='Multiple refered from 2 places.'>PyUnicode_AsASCIIString</a>(PyObject *unicode)
<a name='L4831'><font color='red'>{</font>
<a name='L4832'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L4833'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L4834'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4835'>    <font color='red'>}</font>
<a name='L4836'>    <b>return</b> <a href='../D/3991.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeASCII</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L4837'>                                 <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L4838'>                                 <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4839'><font color='red'>}</font>
<a name='L4840'>
<a name='L4841'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>) &amp;&amp; <b>defined</b>(<a href='../S/587.html#L92' title='Defined at 92 in Include/unicodeobject.h.'>HAVE_USABLE_WCHAR_T</a>)
<a name='L4842'>
<a name='L4843'><i><font color='green'>/* --- MBCS codecs for Windows -------------------------------------------- */</font></i>
<a name='L4844'>
<a name='L4845'><font color='darkred'>#if</font> <a href='../D/4733.html' title='Multiple defined in 3 places.'>SIZEOF_INT</a> &lt; <a href='../D/4740.html' title='Multiple defined in 6 places.'>SIZEOF_SIZE_T</a>
<a name='L4846'><font color='darkred'>#define</font> <a href='../R/2064.html' title='Multiple refered from 4 places.'>NEED_RETRY</a>
<a name='L4847'><font color='darkred'>#endif</font>
<a name='L4848'>
<a name='L4849'><i><font color='green'>/* XXX This code is limited to "true" double-byte encodings, as</font></i>
<a name='L4850'><i><font color='green'>   a) it assumes an incomplete character consists of a single byte, and</font></i>
<a name='L4851'><i><font color='green'>   b) IsDBCSLeadByte (probably) does not work for non-DBCS multi-byte</font></i>
<a name='L4852'><i><font color='green'>   encodings, see IsDBCSLeadByteEx documentation. */</font></i>
<a name='L4853'>
<a name='L4854'><b>static</b> <b>int</b> <a href='../S/2828.html#L4895' title='Refered from 4895 in Objects/unicodeobject.c.'>is_dbcs_lead_byte</a>(<b>const</b> <b>char</b> *s, <b>int</b> offset)
<a name='L4855'><font color='red'>{</font>
<a name='L4856'>    <b>const</b> <b>char</b> *curr = s + offset;
<a name='L4857'>
<a name='L4858'>    <b>if</b> (IsDBCSLeadByte(*curr)) <font color='red'>{</font>
<a name='L4859'>        <b>const</b> <b>char</b> *prev = CharPrev(s, curr);
<a name='L4860'>        <b>return</b> (prev == curr) || !IsDBCSLeadByte(*prev) || (curr - prev == 2);
<a name='L4861'>    <font color='red'>}</font>
<a name='L4862'>    <b>return</b> 0;
<a name='L4863'><font color='red'>}</font>
<a name='L4864'>
<a name='L4865'><i><font color='green'>/*</font></i>
<a name='L4866'><i><font color='green'> * Decode MBCS string into unicode object. If 'final' is set, converts</font></i>
<a name='L4867'><i><font color='green'> * trailing lead-byte too. Returns consumed size if succeed, -1 otherwise.</font></i>
<a name='L4868'><i><font color='green'> */</font></i>
<a name='L4869'><b>static</b> <b>int</b> <a href='../R/7197.html' title='Multiple refered from 2 places.'>decode_mbcs</a>(PyUnicodeObject **v,
<a name='L4870'>                       <b>const</b> <b>char</b> *s, <i><font color='green'>/* MBCS string */</font></i>
<a name='L4871'>                       <b>int</b> size, <i><font color='green'>/* sizeof MBCS string */</font></i>
<a name='L4872'>                       <b>int</b> final,
<a name='L4873'>                       <b>const</b> <b>char</b> *errors)
<a name='L4874'><font color='red'>{</font>
<a name='L4875'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L4876'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n;
<a name='L4877'>    DWORD usize;
<a name='L4878'>    DWORD <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>;
<a name='L4879'>
<a name='L4880'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(size &gt;= 0);
<a name='L4881'>
<a name='L4882'>    <i><font color='green'>/* check and handle 'errors' arg */</font></i>
<a name='L4883'>    <b>if</b> (errors==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || strcmp(errors, "strict")==0)
<a name='L4884'>        <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = MB_ERR_INVALID_CHARS;
<a name='L4885'>    <b>else</b> <b>if</b> (strcmp(errors, "ignore")==0)
<a name='L4886'>        <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L4887'>    <b>else</b> <font color='red'>{</font>
<a name='L4888'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L4889'>                     "mbcs encoding does not support errors='%s'",
<a name='L4890'>                     errors);
<a name='L4891'>        <b>return</b> -1;
<a name='L4892'>    <font color='red'>}</font>
<a name='L4893'>
<a name='L4894'>    <i><font color='green'>/* Skip trailing lead-byte unless 'final' is set */</font></i>
<a name='L4895'>    <b>if</b> (!final &amp;&amp; size &gt;= 1 &amp;&amp; <a href='../S/2828.html#L4854' title='Defined at 4854 in Objects/unicodeobject.c.'>is_dbcs_lead_byte</a>(s, size - 1))
<a name='L4896'>        --size;
<a name='L4897'>
<a name='L4898'>    <i><font color='green'>/* First get the size of the result */</font></i>
<a name='L4899'>    <b>if</b> (size &gt; 0) <font color='red'>{</font>
<a name='L4900'>        usize = MultiByteToWideChar(CP_ACP, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, s, size, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L4901'>        <b>if</b> (usize==0)
<a name='L4902'>            <b>goto</b> mbcs_decode_error;
<a name='L4903'>    <font color='red'>}</font> <b>else</b>
<a name='L4904'>        usize = 0;
<a name='L4905'>
<a name='L4906'>    <b>if</b> (*v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4907'>        <i><font color='green'>/* Create unicode object */</font></i>
<a name='L4908'>        *v = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(usize);
<a name='L4909'>        <b>if</b> (*v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4910'>            <b>return</b> -1;
<a name='L4911'>        n = 0;
<a name='L4912'>    <font color='red'>}</font>
<a name='L4913'>    <b>else</b> <font color='red'>{</font>
<a name='L4914'>        <i><font color='green'>/* Extend unicode object */</font></i>
<a name='L4915'>        n = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(*v);
<a name='L4916'>        <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(v, n + usize) &lt; 0)
<a name='L4917'>            <b>return</b> -1;
<a name='L4918'>    <font color='red'>}</font>
<a name='L4919'>
<a name='L4920'>    <i><font color='green'>/* Do the conversion */</font></i>
<a name='L4921'>    <b>if</b> (usize &gt; 0) <font color='red'>{</font>
<a name='L4922'>        p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*v) + n;
<a name='L4923'>        <b>if</b> (0 == MultiByteToWideChar(CP_ACP, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, s, size, p, usize)) <font color='red'>{</font>
<a name='L4924'>            <b>goto</b> mbcs_decode_error;
<a name='L4925'>        <font color='red'>}</font>
<a name='L4926'>    <font color='red'>}</font>
<a name='L4927'>    <b>return</b> size;
<a name='L4928'>
<a name='L4929'>mbcs_decode_error:
<a name='L4930'>    <i><font color='green'>/* If the last error was ERROR_NO_UNICODE_TRANSLATION, then</font></i>
<a name='L4931'><i><font color='green'>       we raise a UnicodeDecodeError - else it is a 'generic'</font></i>
<a name='L4932'><i><font color='green'>       windows error</font></i>
<a name='L4933'><i><font color='green'>     */</font></i>
<a name='L4934'>    <b>if</b> (GetLastError()==ERROR_NO_UNICODE_TRANSLATION) <font color='red'>{</font>
<a name='L4935'>        <i><font color='green'>/* Ideally, we should get reason from FormatMessage - this</font></i>
<a name='L4936'><i><font color='green'>           is the Windows 2000 English version of the message</font></i>
<a name='L4937'><i><font color='green'>        */</font></i>
<a name='L4938'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4939'>        <b>const</b> <b>char</b> *reason = "No mapping for the Unicode character exists "
<a name='L4940'>                             "in the target multi-byte code page.";
<a name='L4941'>        <a href='../S/2828.html#L1955' title='Defined at 1955 in Objects/unicodeobject.c.'>make_decode_exception</a>(&amp;exc, "mbcs", s, size, 0, 0, reason);
<a name='L4942'>        <b>if</b> (exc != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4943'>            <a href='../S/3093.html#L480' title='Defined at 480 in Python/codecs.c.'>PyCodec_StrictErrors</a>(exc);
<a name='L4944'>            Py_DECREF(exc);
<a name='L4945'>        <font color='red'>}</font>
<a name='L4946'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L4947'>        <a href='../S/3106.html#L551' title='Defined at 551 in Python/errors.c.'>PyErr_SetFromWindowsErrWithFilename</a>(0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4948'>    <font color='red'>}</font>
<a name='L4949'>    <b>return</b> -1;
<a name='L4950'><font color='red'>}</font>
<a name='L4951'>
<a name='L4952'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3559.html' title='Multiple refered from 2 places.'>PyUnicode_DecodeMBCSStateful</a>(<b>const</b> <b>char</b> *s,
<a name='L4953'>                                       <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4954'>                                       <b>const</b> <b>char</b> *errors,
<a name='L4955'>                                       <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *consumed)
<a name='L4956'><font color='red'>{</font>
<a name='L4957'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4958'>    <b>int</b> done;
<a name='L4959'>
<a name='L4960'>    <b>if</b> (consumed)
<a name='L4961'>        *consumed = 0;
<a name='L4962'>
<a name='L4963'><font color='darkred'>#ifdef</font> <a href='../D/2270.html' title='Multiple defined in 2 places.'>NEED_RETRY</a>
<a name='L4964'>  retry:
<a name='L4965'>    <b>if</b> (size &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>)
<a name='L4966'>        done = <a href='../S/2828.html#L4869' title='Defined at 4869 in Objects/unicodeobject.c.'>decode_mbcs</a>(&amp;v, s, <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>, 0, errors);
<a name='L4967'>    <b>else</b>
<a name='L4968'><font color='darkred'>#endif</font>
<a name='L4969'>        done = <a href='../S/2828.html#L4869' title='Defined at 4869 in Objects/unicodeobject.c.'>decode_mbcs</a>(&amp;v, s, (<b>int</b>)size, !consumed, errors);
<a name='L4970'>
<a name='L4971'>    <b>if</b> (done &lt; 0) <font color='red'>{</font>
<a name='L4972'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L4973'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4974'>    <font color='red'>}</font>
<a name='L4975'>
<a name='L4976'>    <b>if</b> (consumed)
<a name='L4977'>        *consumed += done;
<a name='L4978'>
<a name='L4979'><font color='darkred'>#ifdef</font> <a href='../D/2270.html' title='Multiple defined in 2 places.'>NEED_RETRY</a>
<a name='L4980'>    <b>if</b> (size &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>) <font color='red'>{</font>
<a name='L4981'>        s += done;
<a name='L4982'>        size -= done;
<a name='L4983'>        <b>goto</b> retry;
<a name='L4984'>    <font color='red'>}</font>
<a name='L4985'><font color='darkred'>#endif</font>
<a name='L4986'>
<a name='L4987'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L4988'><font color='red'>}</font>
<a name='L4989'>
<a name='L4990'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3558.html' title='Multiple refered from 2 places.'>PyUnicode_DecodeMBCS</a>(<b>const</b> <b>char</b> *s,
<a name='L4991'>                               <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L4992'>                               <b>const</b> <b>char</b> *errors)
<a name='L4993'><font color='red'>{</font>
<a name='L4994'>    <b>return</b> <a href='../S/2828.html#L4952' title='Defined at 4952 in Objects/unicodeobject.c.'>PyUnicode_DecodeMBCSStateful</a>(s, size, errors, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4995'><font color='red'>}</font>
<a name='L4996'>
<a name='L4997'><i><font color='green'>/*</font></i>
<a name='L4998'><i><font color='green'> * Convert unicode into string object (MBCS).</font></i>
<a name='L4999'><i><font color='green'> * Returns 0 if succeed, -1 otherwise.</font></i>
<a name='L5000'><i><font color='green'> */</font></i>
<a name='L5001'><b>static</b> <b>int</b> <a href='../R/7545.html' title='Multiple refered from 2 places.'>encode_mbcs</a>(PyObject **repr,
<a name='L5002'>                       <b>const</b> Py_UNICODE *p, <i><font color='green'>/* unicode */</font></i>
<a name='L5003'>                       <b>int</b> size, <i><font color='green'>/* size of unicode */</font></i>
<a name='L5004'>                       <b>const</b> <b>char</b>* errors)
<a name='L5005'><font color='red'>{</font>
<a name='L5006'>    <a href='../S/2583.html#L42' title='Defined at 42 in Modules/_multiprocessing/multiprocessing.h.'>BOOL</a> usedDefaultChar = <a href='../D/1087.html' title='Multiple defined in 3 places.'>FALSE</a>;
<a name='L5007'>    <a href='../S/2583.html#L42' title='Defined at 42 in Modules/_multiprocessing/multiprocessing.h.'>BOOL</a> *pusedDefaultChar;
<a name='L5008'>    <b>int</b> mbcssize;
<a name='L5009'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n;
<a name='L5010'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5011'>    DWORD <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>;
<a name='L5012'>
<a name='L5013'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(size &gt;= 0);
<a name='L5014'>
<a name='L5015'>    <i><font color='green'>/* check and handle 'errors' arg */</font></i>
<a name='L5016'>    <b>if</b> (errors==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || strcmp(errors, "strict")==0) <font color='red'>{</font>
<a name='L5017'>        <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = WC_NO_BEST_FIT_CHARS;
<a name='L5018'>        pusedDefaultChar = &amp;usedDefaultChar;
<a name='L5019'>    <font color='red'>}</font> <b>else</b> <b>if</b> (strcmp(errors, "replace")==0) <font color='red'>{</font>
<a name='L5020'>        <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L5021'>        pusedDefaultChar = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5022'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L5023'>         <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L5024'>                      "mbcs encoding does not support errors='%s'",
<a name='L5025'>                      errors);
<a name='L5026'>         <b>return</b> -1;
<a name='L5027'>    <font color='red'>}</font>
<a name='L5028'>
<a name='L5029'>    <i><font color='green'>/* First get the size of the result */</font></i>
<a name='L5030'>    <b>if</b> (size &gt; 0) <font color='red'>{</font>
<a name='L5031'>        mbcssize = WideCharToMultiByte(CP_ACP, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, p, size, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0,
<a name='L5032'>                                       <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, pusedDefaultChar);
<a name='L5033'>        <b>if</b> (mbcssize == 0) <font color='red'>{</font>
<a name='L5034'>            <a href='../S/3106.html#L551' title='Defined at 551 in Python/errors.c.'>PyErr_SetFromWindowsErrWithFilename</a>(0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L5035'>            <b>return</b> -1;
<a name='L5036'>        <font color='red'>}</font>
<a name='L5037'>        <i><font color='green'>/* If we used a default char, then we failed! */</font></i>
<a name='L5038'>        <b>if</b> (pusedDefaultChar &amp;&amp; *pusedDefaultChar)
<a name='L5039'>            <b>goto</b> mbcs_encode_error;
<a name='L5040'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L5041'>        mbcssize = 0;
<a name='L5042'>    <font color='red'>}</font>
<a name='L5043'>
<a name='L5044'>    <b>if</b> (*repr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5045'>        <i><font color='green'>/* Create string object */</font></i>
<a name='L5046'>        *repr = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, mbcssize);
<a name='L5047'>        <b>if</b> (*repr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5048'>            <b>return</b> -1;
<a name='L5049'>        n = 0;
<a name='L5050'>    <font color='red'>}</font>
<a name='L5051'>    <b>else</b> <font color='red'>{</font>
<a name='L5052'>        <i><font color='green'>/* Extend string object */</font></i>
<a name='L5053'>        n = <a href='../S/2779.html#L506' title='Defined at 506 in Objects/bytesobject.c.'>PyBytes_Size</a>(*repr);
<a name='L5054'>        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(repr, n + mbcssize) &lt; 0)
<a name='L5055'>            <b>return</b> -1;
<a name='L5056'>    <font color='red'>}</font>
<a name='L5057'>
<a name='L5058'>    <i><font color='green'>/* Do the conversion */</font></i>
<a name='L5059'>    <b>if</b> (size &gt; 0) <font color='red'>{</font>
<a name='L5060'>        <b>char</b> *s = PyBytes_AS_STRING(*repr) + n;
<a name='L5061'>        <b>if</b> (0 == WideCharToMultiByte(CP_ACP, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, p, size, s, mbcssize,
<a name='L5062'>                                     <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, pusedDefaultChar)) <font color='red'>{</font>
<a name='L5063'>            <a href='../S/3106.html#L551' title='Defined at 551 in Python/errors.c.'>PyErr_SetFromWindowsErrWithFilename</a>(0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L5064'>            <b>return</b> -1;
<a name='L5065'>        <font color='red'>}</font>
<a name='L5066'>        <b>if</b> (pusedDefaultChar &amp;&amp; *pusedDefaultChar)
<a name='L5067'>            <b>goto</b> mbcs_encode_error;
<a name='L5068'>    <font color='red'>}</font>
<a name='L5069'>    <b>return</b> 0;
<a name='L5070'>
<a name='L5071'>mbcs_encode_error:
<a name='L5072'>    <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(&amp;exc, "mbcs", p, size, 0, 0, "invalid character");
<a name='L5073'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L5074'>    <b>return</b> -1;
<a name='L5075'><font color='red'>}</font>
<a name='L5076'>
<a name='L5077'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3573.html' title='Multiple refered from 4 places.'>PyUnicode_EncodeMBCS</a>(<b>const</b> Py_UNICODE *p,
<a name='L5078'>                               <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L5079'>                               <b>const</b> <b>char</b> *errors)
<a name='L5080'><font color='red'>{</font>
<a name='L5081'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repr = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5082'>    <b>int</b> ret;
<a name='L5083'>
<a name='L5084'><font color='darkred'>#ifdef</font> <a href='../D/2270.html' title='Multiple defined in 2 places.'>NEED_RETRY</a>
<a name='L5085'>  retry:
<a name='L5086'>    <b>if</b> (size &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>)
<a name='L5087'>        ret = <a href='../S/2828.html#L5001' title='Defined at 5001 in Objects/unicodeobject.c.'>encode_mbcs</a>(&amp;repr, p, <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>, errors);
<a name='L5088'>    <b>else</b>
<a name='L5089'><font color='darkred'>#endif</font>
<a name='L5090'>        ret = <a href='../S/2828.html#L5001' title='Defined at 5001 in Objects/unicodeobject.c.'>encode_mbcs</a>(&amp;repr, p, (<b>int</b>)size, errors);
<a name='L5091'>
<a name='L5092'>    <b>if</b> (ret &lt; 0) <font color='red'>{</font>
<a name='L5093'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(repr);
<a name='L5094'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5095'>    <font color='red'>}</font>
<a name='L5096'>
<a name='L5097'><font color='darkred'>#ifdef</font> <a href='../D/2270.html' title='Multiple defined in 2 places.'>NEED_RETRY</a>
<a name='L5098'>    <b>if</b> (size &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>) <font color='red'>{</font>
<a name='L5099'>        p += <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>;
<a name='L5100'>        size -= <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>;
<a name='L5101'>        <b>goto</b> retry;
<a name='L5102'>    <font color='red'>}</font>
<a name='L5103'><font color='darkred'>#endif</font>
<a name='L5104'>
<a name='L5105'>    <b>return</b> repr;
<a name='L5106'><font color='red'>}</font>
<a name='L5107'>
<a name='L5108'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsMBCSString(PyObject *unicode)
<a name='L5109'><font color='red'>{</font>
<a name='L5110'>    <b>if</b> (!PyUnicode_Check(unicode)) <font color='red'>{</font>
<a name='L5111'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L5112'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5113'>    <font color='red'>}</font>
<a name='L5114'>    <b>return</b> <a href='../S/2828.html#L5077' title='Defined at 5077 in Objects/unicodeobject.c.'>PyUnicode_EncodeMBCS</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L5115'>                                <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L5116'>                                <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L5117'><font color='red'>}</font>
<a name='L5118'>
<a name='L5119'><font color='darkred'>#undef</font> <a href='../R/2064.html' title='Multiple refered from 4 places.'>NEED_RETRY</a>
<a name='L5120'>
<a name='L5121'><font color='darkred'>#endif</font> <i><font color='green'>/* MS_WINDOWS */</font></i>
<a name='L5122'>
<a name='L5123'><i><font color='green'>/* --- Character Mapping Codec -------------------------------------------- */</font></i>
<a name='L5124'>
<a name='L5125'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2243.html#L586' title='Refered from 586 in Modules/_codecsmodule.c.'>PyUnicode_DecodeCharmap</a>(<b>const</b> <b>char</b> *s,
<a name='L5126'>                                  <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L5127'>                                  PyObject *mapping,
<a name='L5128'>                                  <b>const</b> <b>char</b> *errors)
<a name='L5129'><font color='red'>{</font>
<a name='L5130'>    <b>const</b> <b>char</b> *starts = s;
<a name='L5131'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startinpos;
<a name='L5132'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endinpos;
<a name='L5133'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos;
<a name='L5134'>    <b>const</b> <b>char</b> *e;
<a name='L5135'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v;
<a name='L5136'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L5137'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> extrachars = 0;
<a name='L5138'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5139'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5140'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *mapstring = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5141'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maplen = 0;
<a name='L5142'>
<a name='L5143'>    <i><font color='green'>/* Default to Latin-1 */</font></i>
<a name='L5144'>    <b>if</b> (mapping == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5145'>        <b>return</b> <a href='../D/3977.html' title='Multiple defined in 3 places.'>PyUnicode_DecodeLatin1</a>(s, size, errors);
<a name='L5146'>
<a name='L5147'>    v = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(size);
<a name='L5148'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5149'>        <b>goto</b> onError;
<a name='L5150'>    <b>if</b> (size == 0)
<a name='L5151'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L5152'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L5153'>    e = s + size;
<a name='L5154'>    <b>if</b> (PyUnicode_CheckExact(mapping)) <font color='red'>{</font>
<a name='L5155'>        mapstring = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(mapping);
<a name='L5156'>        maplen = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(mapping);
<a name='L5157'>        <b>while</b> (s &lt; e) <font color='red'>{</font>
<a name='L5158'>            <b>unsigned</b> <b>char</b> ch = *s;
<a name='L5159'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> x = 0xfffe; <i><font color='green'>/* illegal value */</font></i>
<a name='L5160'>
<a name='L5161'>            <b>if</b> (ch &lt; maplen)
<a name='L5162'>                x = mapstring[ch];
<a name='L5163'>
<a name='L5164'>            <b>if</b> (x == 0xfffe) <font color='red'>{</font>
<a name='L5165'>                <i><font color='green'>/* undefined mapping */</font></i>
<a name='L5166'>                outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L5167'>                startinpos = s-starts;
<a name='L5168'>                endinpos = startinpos+1;
<a name='L5169'>                <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L5170'>                        errors, &amp;errorHandler,
<a name='L5171'>                        "charmap", "character maps to &lt;undefined&gt;",
<a name='L5172'>                        &amp;starts, &amp;e, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L5173'>                        &amp;v, &amp;outpos, &amp;p)) <font color='red'>{</font>
<a name='L5174'>                    <b>goto</b> onError;
<a name='L5175'>                <font color='red'>}</font>
<a name='L5176'>                <b>continue</b>;
<a name='L5177'>            <font color='red'>}</font>
<a name='L5178'>            *p++ = x;
<a name='L5179'>            ++s;
<a name='L5180'>        <font color='red'>}</font>
<a name='L5181'>    <font color='red'>}</font>
<a name='L5182'>    <b>else</b> <font color='red'>{</font>
<a name='L5183'>        <b>while</b> (s &lt; e) <font color='red'>{</font>
<a name='L5184'>            <b>unsigned</b> <b>char</b> ch = *s;
<a name='L5185'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *w, *x;
<a name='L5186'>
<a name='L5187'>            <i><font color='green'>/* Get mapping (char ordinal -&gt; integer, Unicode char or None) */</font></i>
<a name='L5188'>            w = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)ch);
<a name='L5189'>            <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5190'>                <b>goto</b> onError;
<a name='L5191'>            x = <a href='../S/2775.html#L113' title='Defined at 113 in Objects/abstract.c.'>PyObject_GetItem</a>(mapping, w);
<a name='L5192'>            Py_DECREF(w);
<a name='L5193'>            <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5194'>                <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_LookupError)) <font color='red'>{</font>
<a name='L5195'>                    <i><font color='green'>/* No mapping found means: mapping is undefined. */</font></i>
<a name='L5196'>                    <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L5197'>                    x = Py_None;
<a name='L5198'>                    Py_INCREF(x);
<a name='L5199'>                <font color='red'>}</font> <b>else</b>
<a name='L5200'>                    <b>goto</b> onError;
<a name='L5201'>            <font color='red'>}</font>
<a name='L5202'>
<a name='L5203'>            <i><font color='green'>/* Apply mapping */</font></i>
<a name='L5204'>            <b>if</b> (PyLong_Check(x)) <font color='red'>{</font>
<a name='L5205'>                <b>long</b> <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = PyLong_AS_LONG(x);
<a name='L5206'>                <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &lt; 0 || <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &gt; 65535) <font color='red'>{</font>
<a name='L5207'>                    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L5208'>                                    "character mapping must be in range(65536)");
<a name='L5209'>                    Py_DECREF(x);
<a name='L5210'>                    <b>goto</b> onError;
<a name='L5211'>                <font color='red'>}</font>
<a name='L5212'>                *p++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L5213'>            <font color='red'>}</font>
<a name='L5214'>            <b>else</b> <b>if</b> (x == Py_None) <font color='red'>{</font>
<a name='L5215'>                <i><font color='green'>/* undefined mapping */</font></i>
<a name='L5216'>                outpos = p-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L5217'>                startinpos = s-starts;
<a name='L5218'>                endinpos = startinpos+1;
<a name='L5219'>                <b>if</b> (<a href='../S/2828.html#L1988' title='Defined at 1988 in Objects/unicodeobject.c.'>unicode_decode_call_errorhandler</a>(
<a name='L5220'>                        errors, &amp;errorHandler,
<a name='L5221'>                        "charmap", "character maps to &lt;undefined&gt;",
<a name='L5222'>                        &amp;starts, &amp;e, &amp;startinpos, &amp;endinpos, &amp;exc, &amp;s,
<a name='L5223'>                        &amp;v, &amp;outpos, &amp;p)) <font color='red'>{</font>
<a name='L5224'>                    Py_DECREF(x);
<a name='L5225'>                    <b>goto</b> onError;
<a name='L5226'>                <font color='red'>}</font>
<a name='L5227'>                Py_DECREF(x);
<a name='L5228'>                <b>continue</b>;
<a name='L5229'>            <font color='red'>}</font>
<a name='L5230'>            <b>else</b> <b>if</b> (PyUnicode_Check(x)) <font color='red'>{</font>
<a name='L5231'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> targetsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(x);
<a name='L5232'>
<a name='L5233'>                <b>if</b> (targetsize == 1)
<a name='L5234'>                    <i><font color='green'>/* 1-1 mapping */</font></i>
<a name='L5235'>                    *p++ = *<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(x);
<a name='L5236'>
<a name='L5237'>                <b>else</b> <b>if</b> (targetsize &gt; 1) <font color='red'>{</font>
<a name='L5238'>                    <i><font color='green'>/* 1-n mapping */</font></i>
<a name='L5239'>                    <b>if</b> (targetsize &gt; extrachars) <font color='red'>{</font>
<a name='L5240'>                        <i><font color='green'>/* resize first */</font></i>
<a name='L5241'>                        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> oldpos = p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v);
<a name='L5242'>                        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> needed = (targetsize - extrachars) + \
<a name='L5243'>                            (targetsize &lt;&lt; 2);
<a name='L5244'>                        extrachars += needed;
<a name='L5245'>                        <i><font color='green'>/* XXX overflow detection missing */</font></i>
<a name='L5246'>                        <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;v,
<a name='L5247'>                                              <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(v) + needed) &lt; 0) <font color='red'>{</font>
<a name='L5248'>                            Py_DECREF(x);
<a name='L5249'>                            <b>goto</b> onError;
<a name='L5250'>                        <font color='red'>}</font>
<a name='L5251'>                        p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v) + oldpos;
<a name='L5252'>                    <font color='red'>}</font>
<a name='L5253'>                    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(p,
<a name='L5254'>                                    <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(x),
<a name='L5255'>                                    targetsize);
<a name='L5256'>                    p += targetsize;
<a name='L5257'>                    extrachars -= targetsize;
<a name='L5258'>                <font color='red'>}</font>
<a name='L5259'>                <i><font color='green'>/* 1-0 mapping: skip the character */</font></i>
<a name='L5260'>            <font color='red'>}</font>
<a name='L5261'>            <b>else</b> <font color='red'>{</font>
<a name='L5262'>                <i><font color='green'>/* wrong return value */</font></i>
<a name='L5263'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L5264'>                                "character mapping must return integer, None or str");
<a name='L5265'>                Py_DECREF(x);
<a name='L5266'>                <b>goto</b> onError;
<a name='L5267'>            <font color='red'>}</font>
<a name='L5268'>            Py_DECREF(x);
<a name='L5269'>            ++s;
<a name='L5270'>        <font color='red'>}</font>
<a name='L5271'>    <font color='red'>}</font>
<a name='L5272'>    <b>if</b> (p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v) &lt; <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(v))
<a name='L5273'>        <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;v, p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v)) &lt; 0)
<a name='L5274'>            <b>goto</b> onError;
<a name='L5275'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L5276'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L5277'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L5278'>
<a name='L5279'>  onError:
<a name='L5280'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L5281'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L5282'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L5283'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5284'><font color='red'>}</font>
<a name='L5285'>
<a name='L5286'><i><font color='green'>/* Charmap encoding: the lookup table */</font></i>
<a name='L5287'>
<a name='L5288'><b>struct</b> <a href='../R/7561.html' title='Multiple refered from 6 places.'>encoding_map</a><font color='red'>{</font>
<a name='L5289'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L5290'>    <b>unsigned</b> <b>char</b> level1[32];
<a name='L5291'>    <b>int</b> count2, count3;
<a name='L5292'>    <b>unsigned</b> <b>char</b> level23[1];
<a name='L5293'><font color='red'>}</font>;
<a name='L5294'>
<a name='L5295'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L5296'><a href='../S/2828.html#L5304' title='Refered from 5304 in Objects/unicodeobject.c.'>encoding_map_size</a>(PyObject *obj, PyObject* args)
<a name='L5297'><font color='red'>{</font>
<a name='L5298'>    <b>struct</b> <a href='../S/2828.html#L5288' title='Defined at 5288 in Objects/unicodeobject.c.'>encoding_map</a> *map = (<b>struct</b> <a href='../S/2828.html#L5288' title='Defined at 5288 in Objects/unicodeobject.c.'>encoding_map</a>*)obj;
<a name='L5299'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<b>sizeof</b>(*map) - 1 + 16*map-&gt;count2 +
<a name='L5300'>                           128*map-&gt;count3);
<a name='L5301'><font color='red'>}</font>
<a name='L5302'>
<a name='L5303'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> encoding_map_methods[] = <font color='red'>{</font>
<a name='L5304'>    <font color='red'>{</font>"size", <a href='../S/2828.html#L5296' title='Defined at 5296 in Objects/unicodeobject.c.'>encoding_map_size</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L5305'>     <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("Return the size (in bytes) of this object") <font color='red'>}</font>,
<a name='L5306'>    <font color='red'>{</font> 0 <font color='red'>}</font>
<a name='L5307'><font color='red'>}</font>;
<a name='L5308'>
<a name='L5309'><b>static</b> <b>void</b>
<a name='L5310'><a href='../S/2828.html#L5321' title='Refered from 5321 in Objects/unicodeobject.c.'>encoding_map_dealloc</a>(PyObject* o)
<a name='L5311'><font color='red'>{</font>
<a name='L5312'>    PyObject_FREE(o);
<a name='L5313'><font color='red'>}</font>
<a name='L5314'>
<a name='L5315'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> EncodingMapType = <font color='red'>{</font>
<a name='L5316'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L5317'>    "EncodingMap",          <i><font color='green'>/*tp_name*/</font></i>
<a name='L5318'>    <b>sizeof</b>(<b>struct</b> <a href='../S/2828.html#L5288' title='Defined at 5288 in Objects/unicodeobject.c.'>encoding_map</a>),   <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L5319'>    0,                      <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L5320'>    <i><font color='green'>/* methods */</font></i>
<a name='L5321'>    <a href='../S/2828.html#L5310' title='Defined at 5310 in Objects/unicodeobject.c.'>encoding_map_dealloc</a>,   <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L5322'>    0,                      <i><font color='green'>/*tp_print*/</font></i>
<a name='L5323'>    0,                      <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L5324'>    0,                      <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L5325'>    0,                      <i><font color='green'>/*tp_reserved*/</font></i>
<a name='L5326'>    0,                      <i><font color='green'>/*tp_repr*/</font></i>
<a name='L5327'>    0,                      <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L5328'>    0,                      <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L5329'>    0,                      <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L5330'>    0,                      <i><font color='green'>/*tp_hash*/</font></i>
<a name='L5331'>    0,                      <i><font color='green'>/*tp_call*/</font></i>
<a name='L5332'>    0,                      <i><font color='green'>/*tp_str*/</font></i>
<a name='L5333'>    0,                      <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L5334'>    0,                      <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L5335'>    0,                      <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L5336'>    Py_TPFLAGS_DEFAULT,     <i><font color='green'>/*tp_flags*/</font></i>
<a name='L5337'>    0,                      <i><font color='green'>/*tp_doc*/</font></i>
<a name='L5338'>    0,                      <i><font color='green'>/*tp_traverse*/</font></i>
<a name='L5339'>    0,                      <i><font color='green'>/*tp_clear*/</font></i>
<a name='L5340'>    0,                      <i><font color='green'>/*tp_richcompare*/</font></i>
<a name='L5341'>    0,                      <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L5342'>    0,                      <i><font color='green'>/*tp_iter*/</font></i>
<a name='L5343'>    0,                      <i><font color='green'>/*tp_iternext*/</font></i>
<a name='L5344'>    encoding_map_methods,   <i><font color='green'>/*tp_methods*/</font></i>
<a name='L5345'>    0,                      <i><font color='green'>/*tp_members*/</font></i>
<a name='L5346'>    0,                      <i><font color='green'>/*tp_getset*/</font></i>
<a name='L5347'>    0,                      <i><font color='green'>/*tp_base*/</font></i>
<a name='L5348'>    0,                      <i><font color='green'>/*tp_dict*/</font></i>
<a name='L5349'>    0,                      <i><font color='green'>/*tp_descr_get*/</font></i>
<a name='L5350'>    0,                      <i><font color='green'>/*tp_descr_set*/</font></i>
<a name='L5351'>    0,                      <i><font color='green'>/*tp_dictoffset*/</font></i>
<a name='L5352'>    0,                      <i><font color='green'>/*tp_init*/</font></i>
<a name='L5353'>    0,                      <i><font color='green'>/*tp_alloc*/</font></i>
<a name='L5354'>    0,                      <i><font color='green'>/*tp_new*/</font></i>
<a name='L5355'>    0,                      <i><font color='green'>/*tp_free*/</font></i>
<a name='L5356'>    0,                      <i><font color='green'>/*tp_is_gc*/</font></i>
<a name='L5357'><font color='red'>}</font>;
<a name='L5358'>
<a name='L5359'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L5360'><a href='../S/2243.html#L989' title='Refered from 989 in Modules/_codecsmodule.c.'>PyUnicode_BuildEncodingMap</a>(PyObject* string)
<a name='L5361'><font color='red'>{</font>
<a name='L5362'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *decode;
<a name='L5363'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L5364'>    <b>struct</b> <a href='../S/2828.html#L5288' title='Defined at 5288 in Objects/unicodeobject.c.'>encoding_map</a> *mresult;
<a name='L5365'>    <b>int</b> i;
<a name='L5366'>    <b>int</b> need_dict = 0;
<a name='L5367'>    <b>unsigned</b> <b>char</b> level1[32];
<a name='L5368'>    <b>unsigned</b> <b>char</b> level2[512];
<a name='L5369'>    <b>unsigned</b> <b>char</b> *mlevel1, *mlevel2, *mlevel3;
<a name='L5370'>    <b>int</b> count2 = 0, count3 = 0;
<a name='L5371'>
<a name='L5372'>    <b>if</b> (!PyUnicode_Check(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>) || <a href='../D/4020.html' title='Multiple defined in 3 places.'>PyUnicode_GetSize</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>) != 256) <font color='red'>{</font>
<a name='L5373'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L5374'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5375'>    <font color='red'>}</font>
<a name='L5376'>    decode = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>);
<a name='L5377'>    memset(level1, 0xFF, <b>sizeof</b> level1);
<a name='L5378'>    memset(level2, 0xFF, <b>sizeof</b> level2);
<a name='L5379'>
<a name='L5380'>    <i><font color='green'>/* If there isn't a one-to-one mapping of NULL to \0,</font></i>
<a name='L5381'><i><font color='green'>       or if there are non-BMP characters, we need to use</font></i>
<a name='L5382'><i><font color='green'>       a mapping dictionary. */</font></i>
<a name='L5383'>    <b>if</b> (decode[0] != 0)
<a name='L5384'>        need_dict = 1;
<a name='L5385'>    <b>for</b> (i = 1; i &lt; 256; i++) <font color='red'>{</font>
<a name='L5386'>        <b>int</b> l1, l2;
<a name='L5387'>        <b>if</b> (decode[i] == 0
<a name='L5388'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L5389'>            || decode[i] &gt; 0xFFFF
<a name='L5390'><font color='darkred'>#endif</font>
<a name='L5391'>            ) <font color='red'>{</font>
<a name='L5392'>            need_dict = 1;
<a name='L5393'>            <b>break</b>;
<a name='L5394'>        <font color='red'>}</font>
<a name='L5395'>        <b>if</b> (decode[i] == 0xFFFE)
<a name='L5396'>            <i><font color='green'>/* unmapped character */</font></i>
<a name='L5397'>            <b>continue</b>;
<a name='L5398'>        l1 = decode[i] &gt;&gt; 11;
<a name='L5399'>        l2 = decode[i] &gt;&gt; 7;
<a name='L5400'>        <b>if</b> (level1[l1] == 0xFF)
<a name='L5401'>            level1[l1] = count2++;
<a name='L5402'>        <b>if</b> (level2[l2] == 0xFF)
<a name='L5403'>            level2[l2] = count3++;
<a name='L5404'>    <font color='red'>}</font>
<a name='L5405'>
<a name='L5406'>    <b>if</b> (count2 &gt;= 0xFF || count3 &gt;= 0xFF)
<a name='L5407'>        need_dict = 1;
<a name='L5408'>
<a name='L5409'>    <b>if</b> (need_dict) <font color='red'>{</font>
<a name='L5410'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L5411'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L5412'>        <b>if</b> (!<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)
<a name='L5413'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5414'>        <b>for</b> (i = 0; i &lt; 256; i++) <font color='red'>{</font>
<a name='L5415'>            <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5416'>            <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(decode[i]);
<a name='L5417'>            <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(i);
<a name='L5418'>            <b>if</b> (!<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> || !<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)
<a name='L5419'>                <b>goto</b> failed1;
<a name='L5420'>            <b>if</b> (<a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>) == -1)
<a name='L5421'>                <b>goto</b> failed1;
<a name='L5422'>            Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L5423'>            Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L5424'>        <font color='red'>}</font>
<a name='L5425'>        <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L5426'>      failed1:
<a name='L5427'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L5428'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L5429'>        Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L5430'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5431'>    <font color='red'>}</font>
<a name='L5432'>
<a name='L5433'>    <i><font color='green'>/* Create a three-level trie */</font></i>
<a name='L5434'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = PyObject_MALLOC(<b>sizeof</b>(<b>struct</b> <a href='../S/2828.html#L5288' title='Defined at 5288 in Objects/unicodeobject.c.'>encoding_map</a>) +
<a name='L5435'>                             16*count2 + 128*count3 - 1);
<a name='L5436'>    <b>if</b> (!<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)
<a name='L5437'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L5438'>    <a href='../S/2803.html#L217' title='Defined at 217 in Objects/object.c.'>PyObject_Init</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, &amp;EncodingMapType);
<a name='L5439'>    mresult = (<b>struct</b> <a href='../S/2828.html#L5288' title='Defined at 5288 in Objects/unicodeobject.c.'>encoding_map</a>*)<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L5440'>    mresult-&gt;count2 = count2;
<a name='L5441'>    mresult-&gt;count3 = count3;
<a name='L5442'>    mlevel1 = mresult-&gt;level1;
<a name='L5443'>    mlevel2 = mresult-&gt;level23;
<a name='L5444'>    mlevel3 = mresult-&gt;level23 + 16*count2;
<a name='L5445'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(mlevel1, level1, 32);
<a name='L5446'>    memset(mlevel2, 0xFF, 16*count2);
<a name='L5447'>    memset(mlevel3, 0, 128*count3);
<a name='L5448'>    count3 = 0;
<a name='L5449'>    <b>for</b> (i = 1; i &lt; 256; i++) <font color='red'>{</font>
<a name='L5450'>        <b>int</b> o1, o2, o3, i2, i3;
<a name='L5451'>        <b>if</b> (decode[i] == 0xFFFE)
<a name='L5452'>            <i><font color='green'>/* unmapped character */</font></i>
<a name='L5453'>            <b>continue</b>;
<a name='L5454'>        o1 = decode[i]&gt;&gt;11;
<a name='L5455'>        o2 = (decode[i]&gt;&gt;7) &amp; 0xF;
<a name='L5456'>        i2 = 16*mlevel1[o1] + o2;
<a name='L5457'>        <b>if</b> (mlevel2[i2] == 0xFF)
<a name='L5458'>            mlevel2[i2] = count3++;
<a name='L5459'>        o3 = decode[i] &amp; 0x7F;
<a name='L5460'>        i3 = 128*mlevel2[i2] + o3;
<a name='L5461'>        mlevel3[i3] = i;
<a name='L5462'>    <font color='red'>}</font>
<a name='L5463'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L5464'><font color='red'>}</font>
<a name='L5465'>
<a name='L5466'><b>static</b> <b>int</b>
<a name='L5467'><a href='../R/7563.html' title='Multiple refered from 2 places.'>encoding_map_lookup</a>(Py_UNICODE c, PyObject *mapping)
<a name='L5468'><font color='red'>{</font>
<a name='L5469'>    <b>struct</b> <a href='../S/2828.html#L5288' title='Defined at 5288 in Objects/unicodeobject.c.'>encoding_map</a> *map = (<b>struct</b> <a href='../S/2828.html#L5288' title='Defined at 5288 in Objects/unicodeobject.c.'>encoding_map</a>*)mapping;
<a name='L5470'>    <b>int</b> l1 = c&gt;&gt;11;
<a name='L5471'>    <b>int</b> l2 = (c&gt;&gt;7) &amp; 0xF;
<a name='L5472'>    <b>int</b> l3 = c &amp; 0x7F;
<a name='L5473'>    <b>int</b> i;
<a name='L5474'>
<a name='L5475'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L5476'>    <b>if</b> (c &gt; 0xFFFF) <font color='red'>{</font>
<a name='L5477'>        <b>return</b> -1;
<a name='L5478'>    <font color='red'>}</font>
<a name='L5479'><font color='darkred'>#endif</font>
<a name='L5480'>    <b>if</b> (c == 0)
<a name='L5481'>        <b>return</b> 0;
<a name='L5482'>    <i><font color='green'>/* level 1*/</font></i>
<a name='L5483'>    i = map-&gt;level1[l1];
<a name='L5484'>    <b>if</b> (i == 0xFF) <font color='red'>{</font>
<a name='L5485'>        <b>return</b> -1;
<a name='L5486'>    <font color='red'>}</font>
<a name='L5487'>    <i><font color='green'>/* level 2*/</font></i>
<a name='L5488'>    i = map-&gt;level23[16*i+l2];
<a name='L5489'>    <b>if</b> (i == 0xFF) <font color='red'>{</font>
<a name='L5490'>        <b>return</b> -1;
<a name='L5491'>    <font color='red'>}</font>
<a name='L5492'>    <i><font color='green'>/* level 3 */</font></i>
<a name='L5493'>    i = map-&gt;level23[16*map-&gt;count2 + 128*i + l3];
<a name='L5494'>    <b>if</b> (i == 0) <font color='red'>{</font>
<a name='L5495'>        <b>return</b> -1;
<a name='L5496'>    <font color='red'>}</font>
<a name='L5497'>    <b>return</b> i;
<a name='L5498'><font color='red'>}</font>
<a name='L5499'>
<a name='L5500'><i><font color='green'>/* Lookup the character ch in the mapping. If the character</font></i>
<a name='L5501'><i><font color='green'>   can't be found, Py_None is returned (or NULL, if another</font></i>
<a name='L5502'><i><font color='green'>   error occurred). */</font></i>
<a name='L5503'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/6610.html' title='Multiple refered from 2 places.'>charmapencode_lookup</a>(Py_UNICODE c, PyObject *mapping)
<a name='L5504'><font color='red'>{</font>
<a name='L5505'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *w = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)c);
<a name='L5506'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *x;
<a name='L5507'>
<a name='L5508'>    <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5509'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5510'>    x = <a href='../S/2775.html#L113' title='Defined at 113 in Objects/abstract.c.'>PyObject_GetItem</a>(mapping, w);
<a name='L5511'>    Py_DECREF(w);
<a name='L5512'>    <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5513'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_LookupError)) <font color='red'>{</font>
<a name='L5514'>            <i><font color='green'>/* No mapping found means: mapping is undefined. */</font></i>
<a name='L5515'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L5516'>            x = Py_None;
<a name='L5517'>            Py_INCREF(x);
<a name='L5518'>            <b>return</b> x;
<a name='L5519'>        <font color='red'>}</font> <b>else</b>
<a name='L5520'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5521'>    <font color='red'>}</font>
<a name='L5522'>    <b>else</b> <b>if</b> (x == Py_None)
<a name='L5523'>        <b>return</b> x;
<a name='L5524'>    <b>else</b> <b>if</b> (PyLong_Check(x)) <font color='red'>{</font>
<a name='L5525'>        <b>long</b> <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = PyLong_AS_LONG(x);
<a name='L5526'>        <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &lt; 0 || <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &gt; 255) <font color='red'>{</font>
<a name='L5527'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L5528'>                            "character mapping must be in range(256)");
<a name='L5529'>            Py_DECREF(x);
<a name='L5530'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5531'>        <font color='red'>}</font>
<a name='L5532'>        <b>return</b> x;
<a name='L5533'>    <font color='red'>}</font>
<a name='L5534'>    <b>else</b> <b>if</b> (PyBytes_Check(x))
<a name='L5535'>        <b>return</b> x;
<a name='L5536'>    <b>else</b> <font color='red'>{</font>
<a name='L5537'>        <i><font color='green'>/* wrong return value */</font></i>
<a name='L5538'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L5539'>                     "character mapping must return integer, bytes or None, not %.400s",
<a name='L5540'>                     x-&gt;ob_type-&gt;tp_name);
<a name='L5541'>        Py_DECREF(x);
<a name='L5542'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5543'>    <font color='red'>}</font>
<a name='L5544'><font color='red'>}</font>
<a name='L5545'>
<a name='L5546'><b>static</b> <b>int</b>
<a name='L5547'><a href='../R/6612.html' title='Multiple refered from 4 places.'>charmapencode_resize</a>(PyObject **outobj, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *outpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize)
<a name='L5548'><font color='red'>{</font>
<a name='L5549'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outsize = PyBytes_GET_SIZE(*outobj);
<a name='L5550'>    <i><font color='green'>/* exponentially overallocate to minimize reallocations */</font></i>
<a name='L5551'>    <b>if</b> (requiredsize &lt; 2*outsize)
<a name='L5552'>        requiredsize = 2*outsize;
<a name='L5553'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(outobj, requiredsize))
<a name='L5554'>        <b>return</b> -1;
<a name='L5555'>    <b>return</b> 0;
<a name='L5556'><font color='red'>}</font>
<a name='L5557'>
<a name='L5558'><b>typedef</b> <b>enum</b> <a href='../R/6613.html' title='Multiple refered from 3 places.'>charmapencode_result</a> <font color='red'>{</font>
<a name='L5559'>    <a href='../R/7543.html' title='Multiple refered from 2 places.'>enc_SUCCESS</a>, <a href='../R/7542.html' title='Multiple refered from 6 places.'>enc_FAILED</a>, <a href='../R/7541.html' title='Multiple refered from 8 places.'>enc_EXCEPTION</a>
<a name='L5560'><font color='red'>}</font><a href='../R/6613.html' title='Multiple refered from 3 places.'>charmapencode_result</a>;
<a name='L5561'><i><font color='green'>/* lookup the character, put the result in the output string and adjust</font></i>
<a name='L5562'><i><font color='green'>   various state variables. Resize the output bytes object if not enough</font></i>
<a name='L5563'><i><font color='green'>   space is available. Return a new reference to the object that</font></i>
<a name='L5564'><i><font color='green'>   was put in the output buffer, or Py_None, if the mapping was undefined</font></i>
<a name='L5565'><i><font color='green'>   (in which case no character was written) or NULL, if a</font></i>
<a name='L5566'><i><font color='green'>   reallocation error occurred. The caller must decref the result */</font></i>
<a name='L5567'><b>static</b>
<a name='L5568'><a href='../D/7385.html' title='Multiple defined in 2 places.'>charmapencode_result</a> <a href='../R/6611.html' title='Multiple refered from 4 places.'>charmapencode_output</a>(Py_UNICODE c, PyObject *mapping,
<a name='L5569'>                                          PyObject **outobj, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *outpos)
<a name='L5570'><font color='red'>{</font>
<a name='L5571'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *rep;
<a name='L5572'>    <b>char</b> *outstart;
<a name='L5573'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outsize = PyBytes_GET_SIZE(*outobj);
<a name='L5574'>
<a name='L5575'>    <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(mapping) == &amp;EncodingMapType) <font color='red'>{</font>
<a name='L5576'>        <b>int</b> res = <a href='../S/2828.html#L5467' title='Defined at 5467 in Objects/unicodeobject.c.'>encoding_map_lookup</a>(c, mapping);
<a name='L5577'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize = *outpos+1;
<a name='L5578'>        <b>if</b> (res == -1)
<a name='L5579'>            <b>return</b> <a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_FAILED</a>;
<a name='L5580'>        <b>if</b> (outsize&lt;requiredsize)
<a name='L5581'>            <b>if</b> (<a href='../S/2828.html#L5547' title='Defined at 5547 in Objects/unicodeobject.c.'>charmapencode_resize</a>(outobj, outpos, requiredsize))
<a name='L5582'>                <b>return</b> <a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_EXCEPTION</a>;
<a name='L5583'>        outstart = PyBytes_AS_STRING(*outobj);
<a name='L5584'>        outstart[(*outpos)++] = (<b>char</b>)res;
<a name='L5585'>        <b>return</b> <a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_SUCCESS</a>;
<a name='L5586'>    <font color='red'>}</font>
<a name='L5587'>
<a name='L5588'>    rep = <a href='../S/2828.html#L5503' title='Defined at 5503 in Objects/unicodeobject.c.'>charmapencode_lookup</a>(c, mapping);
<a name='L5589'>    <b>if</b> (rep==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5590'>        <b>return</b> <a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_EXCEPTION</a>;
<a name='L5591'>    <b>else</b> <b>if</b> (rep==Py_None) <font color='red'>{</font>
<a name='L5592'>        Py_DECREF(rep);
<a name='L5593'>        <b>return</b> <a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_FAILED</a>;
<a name='L5594'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L5595'>        <b>if</b> (PyLong_Check(rep)) <font color='red'>{</font>
<a name='L5596'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize = *outpos+1;
<a name='L5597'>            <b>if</b> (outsize&lt;requiredsize)
<a name='L5598'>                <b>if</b> (<a href='../S/2828.html#L5547' title='Defined at 5547 in Objects/unicodeobject.c.'>charmapencode_resize</a>(outobj, outpos, requiredsize)) <font color='red'>{</font>
<a name='L5599'>                    Py_DECREF(rep);
<a name='L5600'>                    <b>return</b> <a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_EXCEPTION</a>;
<a name='L5601'>                <font color='red'>}</font>
<a name='L5602'>            outstart = PyBytes_AS_STRING(*outobj);
<a name='L5603'>            outstart[(*outpos)++] = (<b>char</b>)PyLong_AS_LONG(rep);
<a name='L5604'>        <font color='red'>}</font>
<a name='L5605'>        <b>else</b> <font color='red'>{</font>
<a name='L5606'>            <b>const</b> <b>char</b> *repchars = PyBytes_AS_STRING(rep);
<a name='L5607'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> repsize = PyBytes_GET_SIZE(rep);
<a name='L5608'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize = *outpos+repsize;
<a name='L5609'>            <b>if</b> (outsize&lt;requiredsize)
<a name='L5610'>                <b>if</b> (<a href='../S/2828.html#L5547' title='Defined at 5547 in Objects/unicodeobject.c.'>charmapencode_resize</a>(outobj, outpos, requiredsize)) <font color='red'>{</font>
<a name='L5611'>                    Py_DECREF(rep);
<a name='L5612'>                    <b>return</b> <a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_EXCEPTION</a>;
<a name='L5613'>                <font color='red'>}</font>
<a name='L5614'>            outstart = PyBytes_AS_STRING(*outobj);
<a name='L5615'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(outstart + *outpos, repchars, repsize);
<a name='L5616'>            *outpos += repsize;
<a name='L5617'>        <font color='red'>}</font>
<a name='L5618'>    <font color='red'>}</font>
<a name='L5619'>    Py_DECREF(rep);
<a name='L5620'>    <b>return</b> <a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_SUCCESS</a>;
<a name='L5621'><font color='red'>}</font>
<a name='L5622'>
<a name='L5623'><i><font color='green'>/* handle an error in PyUnicode_EncodeCharmap</font></i>
<a name='L5624'><i><font color='green'>   Return 0 on success, -1 on error */</font></i>
<a name='L5625'><b>static</b>
<a name='L5626'><b>int</b> <a href='../S/2828.html#L5796' title='Refered from 5796 in Objects/unicodeobject.c.'>charmap_encoding_error</a>(
<a name='L5627'>    <b>const</b> Py_UNICODE *p, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *inpos, PyObject *mapping,
<a name='L5628'>    PyObject **exceptionObject,
<a name='L5629'>    <b>int</b> *known_errorHandler, PyObject **errorHandler, <b>const</b> <b>char</b> *errors,
<a name='L5630'>    PyObject **res, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *respos)
<a name='L5631'><font color='red'>{</font>
<a name='L5632'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repunicode = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; <i><font color='green'>/* initialize to prevent gcc warning */</font></i>
<a name='L5633'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> repsize;
<a name='L5634'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> newpos;
<a name='L5635'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *uni2;
<a name='L5636'>    <i><font color='green'>/* startpos for collecting unencodable chars */</font></i>
<a name='L5637'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> collstartpos = *inpos;
<a name='L5638'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> collendpos = *inpos+1;
<a name='L5639'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> collpos;
<a name='L5640'>    <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = "charmap";
<a name='L5641'>    <b>char</b> *reason = "character maps to &lt;undefined&gt;";
<a name='L5642'>    <a href='../D/7385.html' title='Multiple defined in 2 places.'>charmapencode_result</a> x;
<a name='L5643'>
<a name='L5644'>    <i><font color='green'>/* find all unencodable characters */</font></i>
<a name='L5645'>    <b>while</b> (collendpos &lt; size) <font color='red'>{</font>
<a name='L5646'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *rep;
<a name='L5647'>        <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(mapping) == &amp;EncodingMapType) <font color='red'>{</font>
<a name='L5648'>            <b>int</b> res = <a href='../S/2828.html#L5467' title='Defined at 5467 in Objects/unicodeobject.c.'>encoding_map_lookup</a>(p[collendpos], mapping);
<a name='L5649'>            <b>if</b> (res != -1)
<a name='L5650'>                <b>break</b>;
<a name='L5651'>            ++collendpos;
<a name='L5652'>            <b>continue</b>;
<a name='L5653'>        <font color='red'>}</font>
<a name='L5654'>
<a name='L5655'>        rep = <a href='../S/2828.html#L5503' title='Defined at 5503 in Objects/unicodeobject.c.'>charmapencode_lookup</a>(p[collendpos], mapping);
<a name='L5656'>        <b>if</b> (rep==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5657'>            <b>return</b> -1;
<a name='L5658'>        <b>else</b> <b>if</b> (rep!=Py_None) <font color='red'>{</font>
<a name='L5659'>            Py_DECREF(rep);
<a name='L5660'>            <b>break</b>;
<a name='L5661'>        <font color='red'>}</font>
<a name='L5662'>        Py_DECREF(rep);
<a name='L5663'>        ++collendpos;
<a name='L5664'>    <font color='red'>}</font>
<a name='L5665'>    <i><font color='green'>/* cache callback name lookup</font></i>
<a name='L5666'><i><font color='green'>     * (if not done yet, i.e. it's the first error) */</font></i>
<a name='L5667'>    <b>if</b> (*known_errorHandler==-1) <font color='red'>{</font>
<a name='L5668'>        <b>if</b> ((errors==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) || (!strcmp(errors, "strict")))
<a name='L5669'>            *known_errorHandler = 1;
<a name='L5670'>        <b>else</b> <b>if</b> (!strcmp(errors, "replace"))
<a name='L5671'>            *known_errorHandler = 2;
<a name='L5672'>        <b>else</b> <b>if</b> (!strcmp(errors, "ignore"))
<a name='L5673'>            *known_errorHandler = 3;
<a name='L5674'>        <b>else</b> <b>if</b> (!strcmp(errors, "xmlcharrefreplace"))
<a name='L5675'>            *known_errorHandler = 4;
<a name='L5676'>        <b>else</b>
<a name='L5677'>            *known_errorHandler = 0;
<a name='L5678'>    <font color='red'>}</font>
<a name='L5679'>    <b>switch</b> (*known_errorHandler) <font color='red'>{</font>
<a name='L5680'>    <b>case</b> 1: <i><font color='green'>/* strict */</font></i>
<a name='L5681'>        <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(exceptionObject, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, p, size, collstartpos, collendpos, reason);
<a name='L5682'>        <b>return</b> -1;
<a name='L5683'>    <b>case</b> 2: <i><font color='green'>/* replace */</font></i>
<a name='L5684'>        <b>for</b> (collpos = collstartpos; collpos&lt;collendpos; ++collpos) <font color='red'>{</font>
<a name='L5685'>            x = <a href='../S/2828.html#L5568' title='Defined at 5568 in Objects/unicodeobject.c.'>charmapencode_output</a>('?', mapping, res, respos);
<a name='L5686'>            <b>if</b> (x==<a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_EXCEPTION</a>) <font color='red'>{</font>
<a name='L5687'>                <b>return</b> -1;
<a name='L5688'>            <font color='red'>}</font>
<a name='L5689'>            <b>else</b> <b>if</b> (x==<a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_FAILED</a>) <font color='red'>{</font>
<a name='L5690'>                <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(exceptionObject, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, p, size, collstartpos, collendpos, reason);
<a name='L5691'>                <b>return</b> -1;
<a name='L5692'>            <font color='red'>}</font>
<a name='L5693'>        <font color='red'>}</font>
<a name='L5694'>        <i><font color='green'>/* fall through */</font></i>
<a name='L5695'>    <b>case</b> 3: <i><font color='green'>/* ignore */</font></i>
<a name='L5696'>        *inpos = collendpos;
<a name='L5697'>        <b>break</b>;
<a name='L5698'>    <b>case</b> 4: <i><font color='green'>/* xmlcharrefreplace */</font></i>
<a name='L5699'>        <i><font color='green'>/* generate replacement (temporarily (mis)uses p) */</font></i>
<a name='L5700'>        <b>for</b> (collpos = collstartpos; collpos &lt; collendpos; ++collpos) <font color='red'>{</font>
<a name='L5701'>            <b>char</b> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[2+29+1+1];
<a name='L5702'>            <b>char</b> *cp;
<a name='L5703'>            sprintf(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "&amp;#%d;", (<b>int</b>)p[collpos]);
<a name='L5704'>            <b>for</b> (cp = <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>; *cp; ++cp) <font color='red'>{</font>
<a name='L5705'>                x = <a href='../S/2828.html#L5568' title='Defined at 5568 in Objects/unicodeobject.c.'>charmapencode_output</a>(*cp, mapping, res, respos);
<a name='L5706'>                <b>if</b> (x==<a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_EXCEPTION</a>)
<a name='L5707'>                    <b>return</b> -1;
<a name='L5708'>                <b>else</b> <b>if</b> (x==<a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_FAILED</a>) <font color='red'>{</font>
<a name='L5709'>                    <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(exceptionObject, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, p, size, collstartpos, collendpos, reason);
<a name='L5710'>                    <b>return</b> -1;
<a name='L5711'>                <font color='red'>}</font>
<a name='L5712'>            <font color='red'>}</font>
<a name='L5713'>        <font color='red'>}</font>
<a name='L5714'>        *inpos = collendpos;
<a name='L5715'>        <b>break</b>;
<a name='L5716'>    <b>default</b>:
<a name='L5717'>        repunicode = <a href='../S/2828.html#L4494' title='Defined at 4494 in Objects/unicodeobject.c.'>unicode_encode_call_errorhandler</a>(errors, errorHandler,
<a name='L5718'>                                                      <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, reason, p, size, exceptionObject,
<a name='L5719'>                                                      collstartpos, collendpos, &amp;newpos);
<a name='L5720'>        <b>if</b> (repunicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5721'>            <b>return</b> -1;
<a name='L5722'>        <b>if</b> (PyBytes_Check(repunicode)) <font color='red'>{</font>
<a name='L5723'>            <i><font color='green'>/* Directly copy bytes result to output. */</font></i>
<a name='L5724'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outsize = <a href='../S/2779.html#L506' title='Defined at 506 in Objects/bytesobject.c.'>PyBytes_Size</a>(*res);
<a name='L5725'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize;
<a name='L5726'>            repsize = <a href='../S/2779.html#L506' title='Defined at 506 in Objects/bytesobject.c.'>PyBytes_Size</a>(repunicode);
<a name='L5727'>            requiredsize = *respos + repsize;
<a name='L5728'>            <b>if</b> (requiredsize &gt; outsize)
<a name='L5729'>                <i><font color='green'>/* Make room for all additional bytes. */</font></i>
<a name='L5730'>                <b>if</b> (<a href='../S/2828.html#L5547' title='Defined at 5547 in Objects/unicodeobject.c.'>charmapencode_resize</a>(res, respos, requiredsize)) <font color='red'>{</font>
<a name='L5731'>                    Py_DECREF(repunicode);
<a name='L5732'>                    <b>return</b> -1;
<a name='L5733'>                <font color='red'>}</font>
<a name='L5734'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(<a href='../S/2779.html#L517' title='Defined at 517 in Objects/bytesobject.c.'>PyBytes_AsString</a>(*res) + *respos,
<a name='L5735'>                   <a href='../S/2779.html#L517' title='Defined at 517 in Objects/bytesobject.c.'>PyBytes_AsString</a>(repunicode),  repsize);
<a name='L5736'>            *respos += repsize;
<a name='L5737'>            *inpos = newpos;
<a name='L5738'>            Py_DECREF(repunicode);
<a name='L5739'>            <b>break</b>;
<a name='L5740'>        <font color='red'>}</font>
<a name='L5741'>        <i><font color='green'>/* generate replacement  */</font></i>
<a name='L5742'>        repsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(repunicode);
<a name='L5743'>        <b>for</b> (uni2 = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repunicode); repsize--&gt;0; ++uni2) <font color='red'>{</font>
<a name='L5744'>            x = <a href='../S/2828.html#L5568' title='Defined at 5568 in Objects/unicodeobject.c.'>charmapencode_output</a>(*uni2, mapping, res, respos);
<a name='L5745'>            <b>if</b> (x==<a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_EXCEPTION</a>) <font color='red'>{</font>
<a name='L5746'>                <b>return</b> -1;
<a name='L5747'>            <font color='red'>}</font>
<a name='L5748'>            <b>else</b> <b>if</b> (x==<a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_FAILED</a>) <font color='red'>{</font>
<a name='L5749'>                Py_DECREF(repunicode);
<a name='L5750'>                <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(exceptionObject, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, p, size, collstartpos, collendpos, reason);
<a name='L5751'>                <b>return</b> -1;
<a name='L5752'>            <font color='red'>}</font>
<a name='L5753'>        <font color='red'>}</font>
<a name='L5754'>        *inpos = newpos;
<a name='L5755'>        Py_DECREF(repunicode);
<a name='L5756'>    <font color='red'>}</font>
<a name='L5757'>    <b>return</b> 0;
<a name='L5758'><font color='red'>}</font>
<a name='L5759'>
<a name='L5760'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3570.html' title='Multiple refered from 2 places.'>PyUnicode_EncodeCharmap</a>(<b>const</b> Py_UNICODE *p,
<a name='L5761'>                                  <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L5762'>                                  PyObject *mapping,
<a name='L5763'>                                  <b>const</b> <b>char</b> *errors)
<a name='L5764'><font color='red'>{</font>
<a name='L5765'>    <i><font color='green'>/* output object */</font></i>
<a name='L5766'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5767'>    <i><font color='green'>/* current input position */</font></i>
<a name='L5768'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> inpos = 0;
<a name='L5769'>    <i><font color='green'>/* current output position */</font></i>
<a name='L5770'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> respos = 0;
<a name='L5771'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5772'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5773'>    <i><font color='green'>/* the following variable is used for caching string comparisons</font></i>
<a name='L5774'><i><font color='green'>     * -1=not initialized, 0=unknown, 1=strict, 2=replace,</font></i>
<a name='L5775'><i><font color='green'>     * 3=ignore, 4=xmlcharrefreplace */</font></i>
<a name='L5776'>    <b>int</b> known_errorHandler = -1;
<a name='L5777'>
<a name='L5778'>    <i><font color='green'>/* Default to Latin-1 */</font></i>
<a name='L5779'>    <b>if</b> (mapping == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5780'>        <b>return</b> <a href='../D/3995.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeLatin1</a>(p, size, errors);
<a name='L5781'>
<a name='L5782'>    <i><font color='green'>/* allocate enough for a simple encoding without</font></i>
<a name='L5783'><i><font color='green'>       replacements, if we need more, we'll resize */</font></i>
<a name='L5784'>    res = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, size);
<a name='L5785'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5786'>        <b>goto</b> onError;
<a name='L5787'>    <b>if</b> (size == 0)
<a name='L5788'>        <b>return</b> res;
<a name='L5789'>
<a name='L5790'>    <b>while</b> (inpos&lt;size) <font color='red'>{</font>
<a name='L5791'>        <i><font color='green'>/* try to encode it */</font></i>
<a name='L5792'>        <a href='../D/7385.html' title='Multiple defined in 2 places.'>charmapencode_result</a> x = <a href='../S/2828.html#L5568' title='Defined at 5568 in Objects/unicodeobject.c.'>charmapencode_output</a>(p[inpos], mapping, &amp;res, &amp;respos);
<a name='L5793'>        <b>if</b> (x==<a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_EXCEPTION</a>) <i><font color='green'>/* error */</font></i>
<a name='L5794'>            <b>goto</b> onError;
<a name='L5795'>        <b>if</b> (x==<a href='../S/2828.html#L5559' title='Defined at 5559 in Objects/unicodeobject.c.'>enc_FAILED</a>) <font color='red'>{</font> <i><font color='green'>/* unencodable character */</font></i>
<a name='L5796'>            <b>if</b> (<a href='../S/2828.html#L5626' title='Defined at 5626 in Objects/unicodeobject.c.'>charmap_encoding_error</a>(p, size, &amp;inpos, mapping,
<a name='L5797'>                                       &amp;exc,
<a name='L5798'>                                       &amp;known_errorHandler, &amp;errorHandler, errors,
<a name='L5799'>                                       &amp;res, &amp;respos)) <font color='red'>{</font>
<a name='L5800'>                <b>goto</b> onError;
<a name='L5801'>            <font color='red'>}</font>
<a name='L5802'>        <font color='red'>}</font>
<a name='L5803'>        <b>else</b>
<a name='L5804'>            <i><font color='green'>/* done with this character =&gt; adjust input position */</font></i>
<a name='L5805'>            ++inpos;
<a name='L5806'>    <font color='red'>}</font>
<a name='L5807'>
<a name='L5808'>    <i><font color='green'>/* Resize if we allocated to much */</font></i>
<a name='L5809'>    <b>if</b> (respos&lt;PyBytes_GET_SIZE(res))
<a name='L5810'>        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;res, respos) &lt; 0)
<a name='L5811'>            <b>goto</b> onError;
<a name='L5812'>
<a name='L5813'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L5814'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L5815'>    <b>return</b> res;
<a name='L5816'>
<a name='L5817'>  onError:
<a name='L5818'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(res);
<a name='L5819'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L5820'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L5821'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5822'><font color='red'>}</font>
<a name='L5823'>
<a name='L5824'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_AsCharmapString(PyObject *unicode,
<a name='L5825'>                                    PyObject *mapping)
<a name='L5826'><font color='red'>{</font>
<a name='L5827'>    <b>if</b> (!PyUnicode_Check(unicode) || mapping == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5828'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L5829'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5830'>    <font color='red'>}</font>
<a name='L5831'>    <b>return</b> <a href='../D/3992.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeCharmap</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode),
<a name='L5832'>                                   <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode),
<a name='L5833'>                                   mapping,
<a name='L5834'>                                   <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L5835'><font color='red'>}</font>
<a name='L5836'>
<a name='L5837'><i><font color='green'>/* create or adjust a UnicodeTranslateError */</font></i>
<a name='L5838'><b>static</b> <b>void</b> <a href='../R/8847.html' title='Multiple refered from 2 places.'>make_translate_exception</a>(PyObject **exceptionObject,
<a name='L5839'>                                     <b>const</b> Py_UNICODE *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L5840'>                                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos,
<a name='L5841'>                                     <b>const</b> <b>char</b> *reason)
<a name='L5842'><font color='red'>{</font>
<a name='L5843'>    <b>if</b> (*exceptionObject == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5844'>        *exceptionObject = <a href='../S/2789.html#L1716' title='Defined at 1716 in Objects/exceptions.c.'>PyUnicodeTranslateError_Create</a>(
<a name='L5845'>            unicode, size, startpos, endpos, reason);
<a name='L5846'>    <font color='red'>}</font>
<a name='L5847'>    <b>else</b> <font color='red'>{</font>
<a name='L5848'>        <b>if</b> (<a href='../S/2789.html#L1252' title='Defined at 1252 in Objects/exceptions.c.'>PyUnicodeTranslateError_SetStart</a>(*exceptionObject, startpos))
<a name='L5849'>            <b>goto</b> onError;
<a name='L5850'>        <b>if</b> (<a href='../S/2789.html#L1320' title='Defined at 1320 in Objects/exceptions.c.'>PyUnicodeTranslateError_SetEnd</a>(*exceptionObject, endpos))
<a name='L5851'>            <b>goto</b> onError;
<a name='L5852'>        <b>if</b> (<a href='../S/2789.html#L1364' title='Defined at 1364 in Objects/exceptions.c.'>PyUnicodeTranslateError_SetReason</a>(*exceptionObject, reason))
<a name='L5853'>            <b>goto</b> onError;
<a name='L5854'>        <b>return</b>;
<a name='L5855'>      onError:
<a name='L5856'>        Py_DECREF(*exceptionObject);
<a name='L5857'>        *exceptionObject = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5858'>    <font color='red'>}</font>
<a name='L5859'><font color='red'>}</font>
<a name='L5860'>
<a name='L5861'><i><font color='green'>/* raises a UnicodeTranslateError */</font></i>
<a name='L5862'><b>static</b> <b>void</b> <a href='../S/2828.html#L6125' title='Refered from 6125 in Objects/unicodeobject.c.'>raise_translate_exception</a>(PyObject **exceptionObject,
<a name='L5863'>                                      <b>const</b> Py_UNICODE *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L5864'>                                      <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos,
<a name='L5865'>                                      <b>const</b> <b>char</b> *reason)
<a name='L5866'><font color='red'>{</font>
<a name='L5867'>    <a href='../S/2828.html#L5838' title='Defined at 5838 in Objects/unicodeobject.c.'>make_translate_exception</a>(exceptionObject,
<a name='L5868'>                             unicode, size, startpos, endpos, reason);
<a name='L5869'>    <b>if</b> (*exceptionObject != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5870'>        <a href='../S/3093.html#L480' title='Defined at 480 in Python/codecs.c.'>PyCodec_StrictErrors</a>(*exceptionObject);
<a name='L5871'><font color='red'>}</font>
<a name='L5872'>
<a name='L5873'><i><font color='green'>/* error handling callback helper:</font></i>
<a name='L5874'><i><font color='green'>   build arguments, call the callback and check the arguments,</font></i>
<a name='L5875'><i><font color='green'>   put the result into newpos and return the replacement string, which</font></i>
<a name='L5876'><i><font color='green'>   has to be freed by the caller */</font></i>
<a name='L5877'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2828.html#L6150' title='Refered from 6150 in Objects/unicodeobject.c.'>unicode_translate_call_errorhandler</a>(<b>const</b> <b>char</b> *errors,
<a name='L5878'>                                                     PyObject **errorHandler,
<a name='L5879'>                                                     <b>const</b> <b>char</b> *reason,
<a name='L5880'>                                                     <b>const</b> Py_UNICODE *unicode, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, PyObject **exceptionObject,
<a name='L5881'>                                                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> startpos, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> endpos,
<a name='L5882'>                                                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *newpos)
<a name='L5883'><font color='red'>{</font>
<a name='L5884'>    <b>static</b> <b>char</b> *argparse = "O!n;translating error handler must return (str, int) tuple";
<a name='L5885'>
<a name='L5886'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i_newpos;
<a name='L5887'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *restuple;
<a name='L5888'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *resunicode;
<a name='L5889'>
<a name='L5890'>    <b>if</b> (*errorHandler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5891'>        *errorHandler = <a href='../S/3093.html#L448' title='Defined at 448 in Python/codecs.c.'>PyCodec_LookupError</a>(errors);
<a name='L5892'>        <b>if</b> (*errorHandler == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5893'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5894'>    <font color='red'>}</font>
<a name='L5895'>
<a name='L5896'>    <a href='../S/2828.html#L5838' title='Defined at 5838 in Objects/unicodeobject.c.'>make_translate_exception</a>(exceptionObject,
<a name='L5897'>                             unicode, size, startpos, endpos, reason);
<a name='L5898'>    <b>if</b> (*exceptionObject == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5899'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5900'>
<a name='L5901'>    restuple = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(
<a name='L5902'>        *errorHandler, *exceptionObject, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L5903'>    <b>if</b> (restuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5904'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5905'>    <b>if</b> (!PyTuple_Check(restuple)) <font color='red'>{</font>
<a name='L5906'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, &amp;argparse[4]);
<a name='L5907'>        Py_DECREF(restuple);
<a name='L5908'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5909'>    <font color='red'>}</font>
<a name='L5910'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(restuple, argparse, &amp;PyUnicode_Type,
<a name='L5911'>                          &amp;resunicode, &amp;i_newpos)) <font color='red'>{</font>
<a name='L5912'>        Py_DECREF(restuple);
<a name='L5913'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5914'>    <font color='red'>}</font>
<a name='L5915'>    <b>if</b> (i_newpos&lt;0)
<a name='L5916'>        *newpos = size+i_newpos;
<a name='L5917'>    <b>else</b>
<a name='L5918'>        *newpos = i_newpos;
<a name='L5919'>    <b>if</b> (*newpos&lt;0 || *newpos&gt;size) <font color='red'>{</font>
<a name='L5920'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_IndexError, "position %zd from error handler out of bounds", *newpos);
<a name='L5921'>        Py_DECREF(restuple);
<a name='L5922'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5923'>    <font color='red'>}</font>
<a name='L5924'>    Py_INCREF(resunicode);
<a name='L5925'>    Py_DECREF(restuple);
<a name='L5926'>    <b>return</b> resunicode;
<a name='L5927'><font color='red'>}</font>
<a name='L5928'>
<a name='L5929'><i><font color='green'>/* Lookup the character ch in the mapping and put the result in result,</font></i>
<a name='L5930'><i><font color='green'>   which must be decrefed by the caller.</font></i>
<a name='L5931'><i><font color='green'>   Return 0 on success, -1 on error */</font></i>
<a name='L5932'><b>static</b>
<a name='L5933'><b>int</b> <a href='../R/6614.html' title='Multiple refered from 2 places.'>charmaptranslate_lookup</a>(Py_UNICODE c, PyObject *mapping, PyObject **result)
<a name='L5934'><font color='red'>{</font>
<a name='L5935'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *w = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)c);
<a name='L5936'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *x;
<a name='L5937'>
<a name='L5938'>    <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L5939'>        <b>return</b> -1;
<a name='L5940'>    x = <a href='../S/2775.html#L113' title='Defined at 113 in Objects/abstract.c.'>PyObject_GetItem</a>(mapping, w);
<a name='L5941'>    Py_DECREF(w);
<a name='L5942'>    <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L5943'>        <b>if</b> (<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_LookupError)) <font color='red'>{</font>
<a name='L5944'>            <i><font color='green'>/* No mapping found means: use 1:1 mapping. */</font></i>
<a name='L5945'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L5946'>            *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L5947'>            <b>return</b> 0;
<a name='L5948'>        <font color='red'>}</font> <b>else</b>
<a name='L5949'>            <b>return</b> -1;
<a name='L5950'>    <font color='red'>}</font>
<a name='L5951'>    <b>else</b> <b>if</b> (x == Py_None) <font color='red'>{</font>
<a name='L5952'>        *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = x;
<a name='L5953'>        <b>return</b> 0;
<a name='L5954'>    <font color='red'>}</font>
<a name='L5955'>    <b>else</b> <b>if</b> (PyLong_Check(x)) <font color='red'>{</font>
<a name='L5956'>        <b>long</b> <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = PyLong_AS_LONG(x);
<a name='L5957'>        <b>long</b> <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> = <a href='../D/4019.html' title='Multiple defined in 3 places.'>PyUnicode_GetMax</a>();
<a name='L5958'>        <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &lt; 0 || <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> &gt; <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>) <font color='red'>{</font>
<a name='L5959'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L5960'>                         "character mapping must be in range(0x%x)", <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>+1);
<a name='L5961'>            Py_DECREF(x);
<a name='L5962'>            <b>return</b> -1;
<a name='L5963'>        <font color='red'>}</font>
<a name='L5964'>        *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = x;
<a name='L5965'>        <b>return</b> 0;
<a name='L5966'>    <font color='red'>}</font>
<a name='L5967'>    <b>else</b> <b>if</b> (PyUnicode_Check(x)) <font color='red'>{</font>
<a name='L5968'>        *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = x;
<a name='L5969'>        <b>return</b> 0;
<a name='L5970'>    <font color='red'>}</font>
<a name='L5971'>    <b>else</b> <font color='red'>{</font>
<a name='L5972'>        <i><font color='green'>/* wrong return value */</font></i>
<a name='L5973'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L5974'>                        "character mapping must return integer, None or str");
<a name='L5975'>        Py_DECREF(x);
<a name='L5976'>        <b>return</b> -1;
<a name='L5977'>    <font color='red'>}</font>
<a name='L5978'><font color='red'>}</font>
<a name='L5979'><i><font color='green'>/* ensure that *outobj is at least requiredsize characters long,</font></i>
<a name='L5980'><i><font color='green'>   if not reallocate and adjust various state variables.</font></i>
<a name='L5981'><i><font color='green'>   Return 0 on success, -1 on error */</font></i>
<a name='L5982'><b>static</b>
<a name='L5983'><b>int</b> <a href='../R/6615.html' title='Multiple refered from 3 places.'>charmaptranslate_makespace</a>(PyObject **outobj, Py_UNICODE **outp,
<a name='L5984'>                               <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize)
<a name='L5985'><font color='red'>{</font>
<a name='L5986'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> oldsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(*outobj);
<a name='L5987'>    <b>if</b> (requiredsize &gt; oldsize) <font color='red'>{</font>
<a name='L5988'>        <i><font color='green'>/* remember old output position */</font></i>
<a name='L5989'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> outpos = *outp-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*outobj);
<a name='L5990'>        <i><font color='green'>/* exponentially overallocate to minimize reallocations */</font></i>
<a name='L5991'>        <b>if</b> (requiredsize &lt; 2 * oldsize)
<a name='L5992'>            requiredsize = 2 * oldsize;
<a name='L5993'>        <b>if</b> (<a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(outobj, requiredsize) &lt; 0)
<a name='L5994'>            <b>return</b> -1;
<a name='L5995'>        *outp = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*outobj) + outpos;
<a name='L5996'>    <font color='red'>}</font>
<a name='L5997'>    <b>return</b> 0;
<a name='L5998'><font color='red'>}</font>
<a name='L5999'><i><font color='green'>/* lookup the character, put the result in the output string and adjust</font></i>
<a name='L6000'><i><font color='green'>   various state variables. Return a new reference to the object that</font></i>
<a name='L6001'><i><font color='green'>   was put in the output buffer in *result, or Py_None, if the mapping was</font></i>
<a name='L6002'><i><font color='green'>   undefined (in which case no character was written).</font></i>
<a name='L6003'><i><font color='green'>   The called must decref result.</font></i>
<a name='L6004'><i><font color='green'>   Return 0 on success, -1 on error. */</font></i>
<a name='L6005'><b>static</b>
<a name='L6006'><b>int</b> <a href='../S/2828.html#L6083' title='Refered from 6083 in Objects/unicodeobject.c.'>charmaptranslate_output</a>(<b>const</b> Py_UNICODE *startinp, <b>const</b> Py_UNICODE *curinp,
<a name='L6007'>                            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> insize, PyObject *mapping, PyObject **outobj, Py_UNICODE **outp,
<a name='L6008'>                            PyObject **res)
<a name='L6009'><font color='red'>{</font>
<a name='L6010'>    <b>if</b> (<a href='../S/2828.html#L5933' title='Defined at 5933 in Objects/unicodeobject.c.'>charmaptranslate_lookup</a>(*curinp, mapping, res))
<a name='L6011'>        <b>return</b> -1;
<a name='L6012'>    <b>if</b> (*res==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L6013'>        <i><font color='green'>/* not found =&gt; default to 1:1 mapping */</font></i>
<a name='L6014'>        *(*outp)++ = *curinp;
<a name='L6015'>    <font color='red'>}</font>
<a name='L6016'>    <b>else</b> <b>if</b> (*res==Py_None)
<a name='L6017'>        ;
<a name='L6018'>    <b>else</b> <b>if</b> (PyLong_Check(*res)) <font color='red'>{</font>
<a name='L6019'>        <i><font color='green'>/* no overflow check, because we know that the space is enough */</font></i>
<a name='L6020'>        *(*outp)++ = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)PyLong_AS_LONG(*res);
<a name='L6021'>    <font color='red'>}</font>
<a name='L6022'>    <b>else</b> <b>if</b> (PyUnicode_Check(*res)) <font color='red'>{</font>
<a name='L6023'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> repsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(*res);
<a name='L6024'>        <b>if</b> (repsize==1) <font color='red'>{</font>
<a name='L6025'>            <i><font color='green'>/* no overflow check, because we know that the space is enough */</font></i>
<a name='L6026'>            *(*outp)++ = *<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*res);
<a name='L6027'>        <font color='red'>}</font>
<a name='L6028'>        <b>else</b> <b>if</b> (repsize!=0) <font color='red'>{</font>
<a name='L6029'>            <i><font color='green'>/* more than one character */</font></i>
<a name='L6030'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> requiredsize = (*outp-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*outobj)) +
<a name='L6031'>                (insize - (curinp-startinp)) +
<a name='L6032'>                repsize - 1;
<a name='L6033'>            <b>if</b> (<a href='../S/2828.html#L5983' title='Defined at 5983 in Objects/unicodeobject.c.'>charmaptranslate_makespace</a>(outobj, outp, requiredsize))
<a name='L6034'>                <b>return</b> -1;
<a name='L6035'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(*outp, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(*res), <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)*repsize);
<a name='L6036'>            *outp += repsize;
<a name='L6037'>        <font color='red'>}</font>
<a name='L6038'>    <font color='red'>}</font>
<a name='L6039'>    <b>else</b>
<a name='L6040'>        <b>return</b> -1;
<a name='L6041'>    <b>return</b> 0;
<a name='L6042'><font color='red'>}</font>
<a name='L6043'>
<a name='L6044'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3611.html' title='Multiple refered from 2 places.'>PyUnicode_TranslateCharmap</a>(<b>const</b> Py_UNICODE *p,
<a name='L6045'>                                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L6046'>                                     PyObject *mapping,
<a name='L6047'>                                     <b>const</b> <b>char</b> *errors)
<a name='L6048'><font color='red'>{</font>
<a name='L6049'>    <i><font color='green'>/* output object */</font></i>
<a name='L6050'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6051'>    <i><font color='green'>/* pointers to the beginning and end+1 of input */</font></i>
<a name='L6052'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *startp = p;
<a name='L6053'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *endp = p + size;
<a name='L6054'>    <i><font color='green'>/* pointer into the output */</font></i>
<a name='L6055'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *str;
<a name='L6056'>    <i><font color='green'>/* current output position */</font></i>
<a name='L6057'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> respos = 0;
<a name='L6058'>    <b>char</b> *reason = "character maps to &lt;undefined&gt;";
<a name='L6059'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6060'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6061'>    <i><font color='green'>/* the following variable is used for caching string comparisons</font></i>
<a name='L6062'><i><font color='green'>     * -1=not initialized, 0=unknown, 1=strict, 2=replace,</font></i>
<a name='L6063'><i><font color='green'>     * 3=ignore, 4=xmlcharrefreplace */</font></i>
<a name='L6064'>    <b>int</b> known_errorHandler = -1;
<a name='L6065'>
<a name='L6066'>    <b>if</b> (mapping == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L6067'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L6068'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6069'>    <font color='red'>}</font>
<a name='L6070'>
<a name='L6071'>    <i><font color='green'>/* allocate enough for a simple 1:1 translation without</font></i>
<a name='L6072'><i><font color='green'>       replacements, if we need more, we'll resize */</font></i>
<a name='L6073'>    res = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, size);
<a name='L6074'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6075'>        <b>goto</b> onError;
<a name='L6076'>    <b>if</b> (size == 0)
<a name='L6077'>        <b>return</b> res;
<a name='L6078'>    str = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(res);
<a name='L6079'>
<a name='L6080'>    <b>while</b> (p&lt;endp) <font color='red'>{</font>
<a name='L6081'>        <i><font color='green'>/* try to encode it */</font></i>
<a name='L6082'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *x = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6083'>        <b>if</b> (<a href='../S/2828.html#L6006' title='Defined at 6006 in Objects/unicodeobject.c.'>charmaptranslate_output</a>(startp, p, size, mapping, &amp;res, &amp;str, &amp;x)) <font color='red'>{</font>
<a name='L6084'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(x);
<a name='L6085'>            <b>goto</b> onError;
<a name='L6086'>        <font color='red'>}</font>
<a name='L6087'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(x);
<a name='L6088'>        <b>if</b> (x!=Py_None) <i><font color='green'>/* it worked =&gt; adjust input pointer */</font></i>
<a name='L6089'>            ++p;
<a name='L6090'>        <b>else</b> <font color='red'>{</font> <i><font color='green'>/* untranslatable character */</font></i>
<a name='L6091'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repunicode = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; <i><font color='green'>/* initialize to prevent gcc warning */</font></i>
<a name='L6092'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> repsize;
<a name='L6093'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> newpos;
<a name='L6094'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *uni2;
<a name='L6095'>            <i><font color='green'>/* startpos for collecting untranslatable chars */</font></i>
<a name='L6096'>            <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *collstart = p;
<a name='L6097'>            <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *collend = p+1;
<a name='L6098'>            <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *coll;
<a name='L6099'>
<a name='L6100'>            <i><font color='green'>/* find all untranslatable characters */</font></i>
<a name='L6101'>            <b>while</b> (collend &lt; endp) <font color='red'>{</font>
<a name='L6102'>                <b>if</b> (<a href='../S/2828.html#L5933' title='Defined at 5933 in Objects/unicodeobject.c.'>charmaptranslate_lookup</a>(*collend, mapping, &amp;x))
<a name='L6103'>                    <b>goto</b> onError;
<a name='L6104'>                <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(x);
<a name='L6105'>                <b>if</b> (x!=Py_None)
<a name='L6106'>                    <b>break</b>;
<a name='L6107'>                ++collend;
<a name='L6108'>            <font color='red'>}</font>
<a name='L6109'>            <i><font color='green'>/* cache callback name lookup</font></i>
<a name='L6110'><i><font color='green'>             * (if not done yet, i.e. it's the first error) */</font></i>
<a name='L6111'>            <b>if</b> (known_errorHandler==-1) <font color='red'>{</font>
<a name='L6112'>                <b>if</b> ((errors==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) || (!strcmp(errors, "strict")))
<a name='L6113'>                    known_errorHandler = 1;
<a name='L6114'>                <b>else</b> <b>if</b> (!strcmp(errors, "replace"))
<a name='L6115'>                    known_errorHandler = 2;
<a name='L6116'>                <b>else</b> <b>if</b> (!strcmp(errors, "ignore"))
<a name='L6117'>                    known_errorHandler = 3;
<a name='L6118'>                <b>else</b> <b>if</b> (!strcmp(errors, "xmlcharrefreplace"))
<a name='L6119'>                    known_errorHandler = 4;
<a name='L6120'>                <b>else</b>
<a name='L6121'>                    known_errorHandler = 0;
<a name='L6122'>            <font color='red'>}</font>
<a name='L6123'>            <b>switch</b> (known_errorHandler) <font color='red'>{</font>
<a name='L6124'>            <b>case</b> 1: <i><font color='green'>/* strict */</font></i>
<a name='L6125'>                <a href='../S/2828.html#L5862' title='Defined at 5862 in Objects/unicodeobject.c.'>raise_translate_exception</a>(&amp;exc, startp, size, collstart-startp, collend-startp, reason);
<a name='L6126'>                <b>goto</b> onError;
<a name='L6127'>            <b>case</b> 2: <i><font color='green'>/* replace */</font></i>
<a name='L6128'>                <i><font color='green'>/* No need to check for space, this is a 1:1 replacement */</font></i>
<a name='L6129'>                <b>for</b> (coll = collstart; coll&lt;collend; ++coll)
<a name='L6130'>                    *str++ = '?';
<a name='L6131'>                <i><font color='green'>/* fall through */</font></i>
<a name='L6132'>            <b>case</b> 3: <i><font color='green'>/* ignore */</font></i>
<a name='L6133'>                p = collend;
<a name='L6134'>                <b>break</b>;
<a name='L6135'>            <b>case</b> 4: <i><font color='green'>/* xmlcharrefreplace */</font></i>
<a name='L6136'>                <i><font color='green'>/* generate replacement (temporarily (mis)uses p) */</font></i>
<a name='L6137'>                <b>for</b> (p = collstart; p &lt; collend; ++p) <font color='red'>{</font>
<a name='L6138'>                    <b>char</b> <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>[2+29+1+1];
<a name='L6139'>                    <b>char</b> *cp;
<a name='L6140'>                    sprintf(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, "&amp;#%d;", (<b>int</b>)*p);
<a name='L6141'>                    <b>if</b> (<a href='../S/2828.html#L5983' title='Defined at 5983 in Objects/unicodeobject.c.'>charmaptranslate_makespace</a>(&amp;res, &amp;str,
<a name='L6142'>                                                   (str-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(res))+strlen(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>)+(endp-collend)))
<a name='L6143'>                        <b>goto</b> onError;
<a name='L6144'>                    <b>for</b> (cp = <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>; *cp; ++cp)
<a name='L6145'>                        *str++ = *cp;
<a name='L6146'>                <font color='red'>}</font>
<a name='L6147'>                p = collend;
<a name='L6148'>                <b>break</b>;
<a name='L6149'>            <b>default</b>:
<a name='L6150'>                repunicode = <a href='../S/2828.html#L5877' title='Defined at 5877 in Objects/unicodeobject.c.'>unicode_translate_call_errorhandler</a>(errors, &amp;errorHandler,
<a name='L6151'>                                                                 reason, startp, size, &amp;exc,
<a name='L6152'>                                                                 collstart-startp, collend-startp, &amp;newpos);
<a name='L6153'>                <b>if</b> (repunicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6154'>                    <b>goto</b> onError;
<a name='L6155'>                <i><font color='green'>/* generate replacement  */</font></i>
<a name='L6156'>                repsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(repunicode);
<a name='L6157'>                <b>if</b> (<a href='../S/2828.html#L5983' title='Defined at 5983 in Objects/unicodeobject.c.'>charmaptranslate_makespace</a>(&amp;res, &amp;str,
<a name='L6158'>                                               (str-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(res))+repsize+(endp-collend))) <font color='red'>{</font>
<a name='L6159'>                    Py_DECREF(repunicode);
<a name='L6160'>                    <b>goto</b> onError;
<a name='L6161'>                <font color='red'>}</font>
<a name='L6162'>                <b>for</b> (uni2 = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repunicode); repsize--&gt;0; ++uni2)
<a name='L6163'>                    *str++ = *uni2;
<a name='L6164'>                p = startp + newpos;
<a name='L6165'>                Py_DECREF(repunicode);
<a name='L6166'>            <font color='red'>}</font>
<a name='L6167'>        <font color='red'>}</font>
<a name='L6168'>    <font color='red'>}</font>
<a name='L6169'>    <i><font color='green'>/* Resize if we allocated to much */</font></i>
<a name='L6170'>    respos = str-<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(res);
<a name='L6171'>    <b>if</b> (respos&lt;<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(res)) <font color='red'>{</font>
<a name='L6172'>        <b>if</b> (<a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(&amp;res, respos) &lt; 0)
<a name='L6173'>            <b>goto</b> onError;
<a name='L6174'>    <font color='red'>}</font>
<a name='L6175'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L6176'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L6177'>    <b>return</b> res;
<a name='L6178'>
<a name='L6179'>  onError:
<a name='L6180'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(res);
<a name='L6181'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L6182'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L6183'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6184'><font color='red'>}</font>
<a name='L6185'>
<a name='L6186'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *PyUnicode_Translate(PyObject *str,
<a name='L6187'>                              PyObject *mapping,
<a name='L6188'>                              <b>const</b> <b>char</b> *errors)
<a name='L6189'><font color='red'>{</font>
<a name='L6190'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6191'>
<a name='L6192'>    str = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(str);
<a name='L6193'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6194'>        <b>goto</b> onError;
<a name='L6195'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/4038.html' title='Multiple defined in 3 places.'>PyUnicode_TranslateCharmap</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str),
<a name='L6196'>                                        <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(str),
<a name='L6197'>                                        mapping,
<a name='L6198'>                                        errors);
<a name='L6199'>    Py_DECREF(str);
<a name='L6200'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6201'>
<a name='L6202'>  onError:
<a name='L6203'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(str);
<a name='L6204'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6205'><font color='red'>}</font>
<a name='L6206'>
<a name='L6207'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L6208'><a href='../R/3610.html' title='Multiple refered from 4 places.'>PyUnicode_TransformDecimalToASCII</a>(Py_UNICODE *s,
<a name='L6209'>                                  <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length)
<a name='L6210'><font color='red'>{</font>
<a name='L6211'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6212'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p; <i><font color='green'>/* write pointer into result */</font></i>
<a name='L6213'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L6214'>    <i><font color='green'>/* Copy to a new string */</font></i>
<a name='L6215'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(length);
<a name='L6216'>    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>), s, length);
<a name='L6217'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6218'>        <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6219'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L6220'>    <i><font color='green'>/* Iterate over code points */</font></i>
<a name='L6221'>    <b>for</b> (i = 0; i &lt; length; i++) <font color='red'>{</font>
<a name='L6222'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch =s[i];
<a name='L6223'>        <b>if</b> (ch &gt; 127) <font color='red'>{</font>
<a name='L6224'>            <b>int</b> decimal = <a href='../S/587.html#L341' title='Defined at 341 in Include/unicodeobject.h.'>Py_UNICODE_TODECIMAL</a>(ch);
<a name='L6225'>            <b>if</b> (decimal &gt;= 0)
<a name='L6226'>                p[i] = '0' + decimal;
<a name='L6227'>        <font color='red'>}</font>
<a name='L6228'>    <font color='red'>}</font>
<a name='L6229'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6230'><font color='red'>}</font>
<a name='L6231'><i><font color='green'>/* --- Decimal Encoder ---------------------------------------------------- */</font></i>
<a name='L6232'>
<a name='L6233'><b>int</b> PyUnicode_EncodeDecimal(Py_UNICODE *s,
<a name='L6234'>                            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length,
<a name='L6235'>                            <b>char</b> *output,
<a name='L6236'>                            <b>const</b> <b>char</b> *errors)
<a name='L6237'><font color='red'>{</font>
<a name='L6238'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p, *end;
<a name='L6239'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *errorHandler = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6240'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *exc = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6241'>    <b>const</b> <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = "decimal";
<a name='L6242'>    <b>const</b> <b>char</b> *reason = "invalid decimal Unicode string";
<a name='L6243'>    <i><font color='green'>/* the following variable is used for caching string comparisons</font></i>
<a name='L6244'><i><font color='green'>     * -1=not initialized, 0=unknown, 1=strict, 2=replace, 3=ignore, 4=xmlcharrefreplace */</font></i>
<a name='L6245'>    <b>int</b> known_errorHandler = -1;
<a name='L6246'>
<a name='L6247'>    <b>if</b> (output == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L6248'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L6249'>        <b>return</b> -1;
<a name='L6250'>    <font color='red'>}</font>
<a name='L6251'>
<a name='L6252'>    p = s;
<a name='L6253'>    end = s + length;
<a name='L6254'>    <b>while</b> (p &lt; end) <font color='red'>{</font>
<a name='L6255'>        <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *p;
<a name='L6256'>        <b>int</b> decimal;
<a name='L6257'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repunicode;
<a name='L6258'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> repsize;
<a name='L6259'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> newpos;
<a name='L6260'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *uni2;
<a name='L6261'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *collstart;
<a name='L6262'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *collend;
<a name='L6263'>
<a name='L6264'>        <b>if</b> (<a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(ch)) <font color='red'>{</font>
<a name='L6265'>            *output++ = ' ';
<a name='L6266'>            ++p;
<a name='L6267'>            <b>continue</b>;
<a name='L6268'>        <font color='red'>}</font>
<a name='L6269'>        decimal = <a href='../S/587.html#L341' title='Defined at 341 in Include/unicodeobject.h.'>Py_UNICODE_TODECIMAL</a>(ch);
<a name='L6270'>        <b>if</b> (decimal &gt;= 0) <font color='red'>{</font>
<a name='L6271'>            *output++ = '0' + decimal;
<a name='L6272'>            ++p;
<a name='L6273'>            <b>continue</b>;
<a name='L6274'>        <font color='red'>}</font>
<a name='L6275'>        <b>if</b> (0 &lt; ch &amp;&amp; ch &lt; 256) <font color='red'>{</font>
<a name='L6276'>            *output++ = (<b>char</b>)ch;
<a name='L6277'>            ++p;
<a name='L6278'>            <b>continue</b>;
<a name='L6279'>        <font color='red'>}</font>
<a name='L6280'>        <i><font color='green'>/* All other characters are considered unencodable */</font></i>
<a name='L6281'>        collstart = p;
<a name='L6282'>        collend = p+1;
<a name='L6283'>        <b>while</b> (collend &lt; end) <font color='red'>{</font>
<a name='L6284'>            <b>if</b> ((0 &lt; *collend &amp;&amp; *collend &lt; 256) ||
<a name='L6285'>                !<a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(*collend) ||
<a name='L6286'>                <a href='../S/587.html#L341' title='Defined at 341 in Include/unicodeobject.h.'>Py_UNICODE_TODECIMAL</a>(*collend))
<a name='L6287'>                <b>break</b>;
<a name='L6288'>        <font color='red'>}</font>
<a name='L6289'>        <i><font color='green'>/* cache callback name lookup</font></i>
<a name='L6290'><i><font color='green'>         * (if not done yet, i.e. it's the first error) */</font></i>
<a name='L6291'>        <b>if</b> (known_errorHandler==-1) <font color='red'>{</font>
<a name='L6292'>            <b>if</b> ((errors==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) || (!strcmp(errors, "strict")))
<a name='L6293'>                known_errorHandler = 1;
<a name='L6294'>            <b>else</b> <b>if</b> (!strcmp(errors, "replace"))
<a name='L6295'>                known_errorHandler = 2;
<a name='L6296'>            <b>else</b> <b>if</b> (!strcmp(errors, "ignore"))
<a name='L6297'>                known_errorHandler = 3;
<a name='L6298'>            <b>else</b> <b>if</b> (!strcmp(errors, "xmlcharrefreplace"))
<a name='L6299'>                known_errorHandler = 4;
<a name='L6300'>            <b>else</b>
<a name='L6301'>                known_errorHandler = 0;
<a name='L6302'>        <font color='red'>}</font>
<a name='L6303'>        <b>switch</b> (known_errorHandler) <font color='red'>{</font>
<a name='L6304'>        <b>case</b> 1: <i><font color='green'>/* strict */</font></i>
<a name='L6305'>            <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(&amp;exc, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, s, length, collstart-s, collend-s, reason);
<a name='L6306'>            <b>goto</b> onError;
<a name='L6307'>        <b>case</b> 2: <i><font color='green'>/* replace */</font></i>
<a name='L6308'>            <b>for</b> (p = collstart; p &lt; collend; ++p)
<a name='L6309'>                *output++ = '?';
<a name='L6310'>            <i><font color='green'>/* fall through */</font></i>
<a name='L6311'>        <b>case</b> 3: <i><font color='green'>/* ignore */</font></i>
<a name='L6312'>            p = collend;
<a name='L6313'>            <b>break</b>;
<a name='L6314'>        <b>case</b> 4: <i><font color='green'>/* xmlcharrefreplace */</font></i>
<a name='L6315'>            <i><font color='green'>/* generate replacement (temporarily (mis)uses p) */</font></i>
<a name='L6316'>            <b>for</b> (p = collstart; p &lt; collend; ++p)
<a name='L6317'>                output += sprintf(output, "&amp;#%d;", (<b>int</b>)*p);
<a name='L6318'>            p = collend;
<a name='L6319'>            <b>break</b>;
<a name='L6320'>        <b>default</b>:
<a name='L6321'>            repunicode = <a href='../S/2828.html#L4494' title='Defined at 4494 in Objects/unicodeobject.c.'>unicode_encode_call_errorhandler</a>(errors, &amp;errorHandler,
<a name='L6322'>                                                          <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, reason, s, length, &amp;exc,
<a name='L6323'>                                                          collstart-s, collend-s, &amp;newpos);
<a name='L6324'>            <b>if</b> (repunicode == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6325'>                <b>goto</b> onError;
<a name='L6326'>            <b>if</b> (!PyUnicode_Check(repunicode)) <font color='red'>{</font>
<a name='L6327'>                <i><font color='green'>/* Byte results not supported, since they have no decimal property. */</font></i>
<a name='L6328'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "error handler should return unicode");
<a name='L6329'>                Py_DECREF(repunicode);
<a name='L6330'>                <b>goto</b> onError;
<a name='L6331'>            <font color='red'>}</font>
<a name='L6332'>            <i><font color='green'>/* generate replacement  */</font></i>
<a name='L6333'>            repsize = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(repunicode);
<a name='L6334'>            <b>for</b> (uni2 = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repunicode); repsize--&gt;0; ++uni2) <font color='red'>{</font>
<a name='L6335'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *uni2;
<a name='L6336'>                <b>if</b> (<a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(ch))
<a name='L6337'>                    *output++ = ' ';
<a name='L6338'>                <b>else</b> <font color='red'>{</font>
<a name='L6339'>                    decimal = <a href='../S/587.html#L341' title='Defined at 341 in Include/unicodeobject.h.'>Py_UNICODE_TODECIMAL</a>(ch);
<a name='L6340'>                    <b>if</b> (decimal &gt;= 0)
<a name='L6341'>                        *output++ = '0' + decimal;
<a name='L6342'>                    <b>else</b> <b>if</b> (0 &lt; ch &amp;&amp; ch &lt; 256)
<a name='L6343'>                        *output++ = (<b>char</b>)ch;
<a name='L6344'>                    <b>else</b> <font color='red'>{</font>
<a name='L6345'>                        Py_DECREF(repunicode);
<a name='L6346'>                        <a href='../S/2828.html#L4478' title='Defined at 4478 in Objects/unicodeobject.c.'>raise_encode_exception</a>(&amp;exc, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>,
<a name='L6347'>                                               s, length, collstart-s, collend-s, reason);
<a name='L6348'>                        <b>goto</b> onError;
<a name='L6349'>                    <font color='red'>}</font>
<a name='L6350'>                <font color='red'>}</font>
<a name='L6351'>            <font color='red'>}</font>
<a name='L6352'>            p = s + newpos;
<a name='L6353'>            Py_DECREF(repunicode);
<a name='L6354'>        <font color='red'>}</font>
<a name='L6355'>    <font color='red'>}</font>
<a name='L6356'>    <i><font color='green'>/* 0-terminate the output string */</font></i>
<a name='L6357'>    *output++ = '\0';
<a name='L6358'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L6359'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L6360'>    <b>return</b> 0;
<a name='L6361'>
<a name='L6362'>  onError:
<a name='L6363'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(exc);
<a name='L6364'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(errorHandler);
<a name='L6365'>    <b>return</b> -1;
<a name='L6366'><font color='red'>}</font>
<a name='L6367'>
<a name='L6368'><i><font color='green'>/* --- Helpers ------------------------------------------------------------ */</font></i>
<a name='L6369'>
<a name='L6370'><font color='darkred'>#include</font> "<a href='2821.html'>stringlib/unicodedefs.h</a>"
<a name='L6371'><font color='darkred'>#include</font> "<a href='2811.html'>stringlib/fastsearch.h</a>"
<a name='L6372'>
<a name='L6373'><font color='darkred'>#include</font> "<a href='2808.html'>stringlib/count.h</a>"
<a name='L6374'><font color='darkred'>#include</font> "<a href='2812.html'>stringlib/find.h</a>"
<a name='L6375'><font color='darkred'>#include</font> "<a href='2815.html'>stringlib/partition.h</a>"
<a name='L6376'><font color='darkred'>#include</font> "<a href='2817.html'>stringlib/split.h</a>"
<a name='L6377'>
<a name='L6378'><font color='darkred'>#define</font> <a href='../S/2814.html#L209' title='Refered from 209 in Objects/stringlib/localeutil.h.'>_Py_InsertThousandsGrouping</a> _PyUnicode_InsertThousandsGrouping
<a name='L6379'><font color='darkred'>#define</font> _Py_InsertThousandsGroupingLocale _PyUnicode_InsertThousandsGroupingLocale
<a name='L6380'><font color='darkred'>#include</font> "<a href='2814.html'>stringlib/localeutil.h</a>"
<a name='L6381'>
<a name='L6382'><i><font color='green'>/* helper macro to fixup start/end slice values */</font></i>
<a name='L6383'><font color='darkred'>#define</font> <a href='../R/32.html' title='Multiple refered from 9 places.'>ADJUST_INDICES</a>(start, end, len)         \
<a name='L6384'>    <b>if</b> (end &gt; len)                              \
<a name='L6385'>        end = len;                              \
<a name='L6386'>    <b>else</b> <b>if</b> (end &lt; 0) <font color='red'>{</font>                         \
<a name='L6387'>        end += len;                             \
<a name='L6388'>        <b>if</b> (end &lt; 0)                            \
<a name='L6389'>            end = 0;                            \
<a name='L6390'>    <font color='red'>}</font>                                           \
<a name='L6391'>    <b>if</b> (start &lt; 0) <font color='red'>{</font>                            \
<a name='L6392'>        start += len;                           \
<a name='L6393'>        <b>if</b> (start &lt; 0)                          \
<a name='L6394'>            start = 0;                          \
<a name='L6395'>    <font color='red'>}</font>
<a name='L6396'>
<a name='L6397'><a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> PyUnicode_Count(PyObject *str,
<a name='L6398'>                           PyObject *substr,
<a name='L6399'>                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start,
<a name='L6400'>                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end)
<a name='L6401'><font color='red'>{</font>
<a name='L6402'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6403'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>* str_obj;
<a name='L6404'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>* sub_obj;
<a name='L6405'>
<a name='L6406'>    str_obj = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>*) <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(str);
<a name='L6407'>    <b>if</b> (!str_obj)
<a name='L6408'>        <b>return</b> -1;
<a name='L6409'>    sub_obj = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>*) <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(substr);
<a name='L6410'>    <b>if</b> (!sub_obj) <font color='red'>{</font>
<a name='L6411'>        Py_DECREF(str_obj);
<a name='L6412'>        <b>return</b> -1;
<a name='L6413'>    <font color='red'>}</font>
<a name='L6414'>
<a name='L6415'>    <a href='../D/42.html' title='Multiple defined in 4 places.'>ADJUST_INDICES</a>(start, end, str_obj-&gt;length);
<a name='L6416'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = stringlib_count(
<a name='L6417'>        str_obj-&gt;str + start, end - start, sub_obj-&gt;str, sub_obj-&gt;length,
<a name='L6418'>        <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>
<a name='L6419'>        );
<a name='L6420'>
<a name='L6421'>    Py_DECREF(sub_obj);
<a name='L6422'>    Py_DECREF(str_obj);
<a name='L6423'>
<a name='L6424'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6425'><font color='red'>}</font>
<a name='L6426'>
<a name='L6427'><a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> PyUnicode_Find(PyObject *str,
<a name='L6428'>                          PyObject *sub,
<a name='L6429'>                          <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start,
<a name='L6430'>                          <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end,
<a name='L6431'>                          <b>int</b> direction)
<a name='L6432'><font color='red'>{</font>
<a name='L6433'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6434'>
<a name='L6435'>    str = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(str);
<a name='L6436'>    <b>if</b> (!str)
<a name='L6437'>        <b>return</b> -2;
<a name='L6438'>    sub = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(sub);
<a name='L6439'>    <b>if</b> (!sub) <font color='red'>{</font>
<a name='L6440'>        Py_DECREF(str);
<a name='L6441'>        <b>return</b> -2;
<a name='L6442'>    <font color='red'>}</font>
<a name='L6443'>
<a name='L6444'>    <b>if</b> (direction &gt; 0)
<a name='L6445'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = stringlib_find_slice(
<a name='L6446'>            <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(str),
<a name='L6447'>            <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(sub), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(sub),
<a name='L6448'>            start, end
<a name='L6449'>            );
<a name='L6450'>    <b>else</b>
<a name='L6451'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = stringlib_rfind_slice(
<a name='L6452'>            <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(str),
<a name='L6453'>            <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(sub), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(sub),
<a name='L6454'>            start, end
<a name='L6455'>            );
<a name='L6456'>
<a name='L6457'>    Py_DECREF(str);
<a name='L6458'>    Py_DECREF(sub);
<a name='L6459'>
<a name='L6460'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6461'><font color='red'>}</font>
<a name='L6462'>
<a name='L6463'><b>static</b>
<a name='L6464'><b>int</b> <a href='../R/10727.html' title='Multiple refered from 5 places.'>tailmatch</a>(PyUnicodeObject *self,
<a name='L6465'>              PyUnicodeObject *substring,
<a name='L6466'>              <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start,
<a name='L6467'>              <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end,
<a name='L6468'>              <b>int</b> direction)
<a name='L6469'><font color='red'>{</font>
<a name='L6470'>    <b>if</b> (substring-&gt;length == 0)
<a name='L6471'>        <b>return</b> 1;
<a name='L6472'>
<a name='L6473'>    <a href='../D/42.html' title='Multiple defined in 4 places.'>ADJUST_INDICES</a>(start, end, self-&gt;length);
<a name='L6474'>    end -= substring-&gt;length;
<a name='L6475'>    <b>if</b> (end &lt; start)
<a name='L6476'>        <b>return</b> 0;
<a name='L6477'>
<a name='L6478'>    <b>if</b> (direction &gt; 0) <font color='red'>{</font>
<a name='L6479'>        <b>if</b> (<a href='../S/587.html#L364' title='Defined at 364 in Include/unicodeobject.h.'>Py_UNICODE_MATCH</a>(self, end, substring))
<a name='L6480'>            <b>return</b> 1;
<a name='L6481'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L6482'>        <b>if</b> (<a href='../S/587.html#L364' title='Defined at 364 in Include/unicodeobject.h.'>Py_UNICODE_MATCH</a>(self, start, substring))
<a name='L6483'>            <b>return</b> 1;
<a name='L6484'>    <font color='red'>}</font>
<a name='L6485'>
<a name='L6486'>    <b>return</b> 0;
<a name='L6487'><font color='red'>}</font>
<a name='L6488'>
<a name='L6489'><a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> PyUnicode_Tailmatch(PyObject *str,
<a name='L6490'>                               PyObject *substr,
<a name='L6491'>                               <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start,
<a name='L6492'>                               <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end,
<a name='L6493'>                               <b>int</b> direction)
<a name='L6494'><font color='red'>{</font>
<a name='L6495'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6496'>
<a name='L6497'>    str = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(str);
<a name='L6498'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6499'>        <b>return</b> -1;
<a name='L6500'>    substr = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(substr);
<a name='L6501'>    <b>if</b> (substr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L6502'>        Py_DECREF(str);
<a name='L6503'>        <b>return</b> -1;
<a name='L6504'>    <font color='red'>}</font>
<a name='L6505'>
<a name='L6506'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6464' title='Defined at 6464 in Objects/unicodeobject.c.'>tailmatch</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)str,
<a name='L6507'>                       (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)substr,
<a name='L6508'>                       start, end, direction);
<a name='L6509'>    Py_DECREF(str);
<a name='L6510'>    Py_DECREF(substr);
<a name='L6511'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L6512'><font color='red'>}</font>
<a name='L6513'>
<a name='L6514'><i><font color='green'>/* Apply fixfct filter to the Unicode object self and return a</font></i>
<a name='L6515'><i><font color='green'>   reference to the modified object */</font></i>
<a name='L6516'>
<a name='L6517'><b>static</b>
<a name='L6518'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/7821.html' title='Multiple refered from 6 places.'>fixup</a>(PyUnicodeObject *self,
<a name='L6519'>                <b>int</b> (*fixfct)(PyUnicodeObject *s))
<a name='L6520'><font color='red'>{</font>
<a name='L6521'>
<a name='L6522'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *u;
<a name='L6523'>
<a name='L6524'>    u = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>*) <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, self-&gt;length);
<a name='L6525'>    <b>if</b> (u == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6526'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6527'>
<a name='L6528'>    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(u-&gt;str, self-&gt;str, self-&gt;length);
<a name='L6529'>
<a name='L6530'>    <b>if</b> (!fixfct(u) &amp;&amp; PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L6531'>        <i><font color='green'>/* fixfct should return TRUE if it modified the buffer. If</font></i>
<a name='L6532'><i><font color='green'>           FALSE, return a reference to the original buffer instead</font></i>
<a name='L6533'><i><font color='green'>           (to save space, not time) */</font></i>
<a name='L6534'>        Py_INCREF(self);
<a name='L6535'>        Py_DECREF(u);
<a name='L6536'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self;
<a name='L6537'>    <font color='red'>}</font>
<a name='L6538'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) u;
<a name='L6539'><font color='red'>}</font>
<a name='L6540'>
<a name='L6541'><b>static</b>
<a name='L6542'><b>int</b> <a href='../S/2828.html#L8901' title='Refered from 8901 in Objects/unicodeobject.c.'>fixupper</a>(PyUnicodeObject *self)
<a name='L6543'><font color='red'>{</font>
<a name='L6544'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = self-&gt;length;
<a name='L6545'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = self-&gt;str;
<a name='L6546'>    <b>int</b> status = 0;
<a name='L6547'>
<a name='L6548'>    <b>while</b> (len-- &gt; 0) <font color='red'>{</font>
<a name='L6549'>        <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch;
<a name='L6550'>
<a name='L6551'>        ch = <a href='../S/587.html#L333' title='Defined at 333 in Include/unicodeobject.h.'>Py_UNICODE_TOUPPER</a>(*s);
<a name='L6552'>        <b>if</b> (ch != *s) <font color='red'>{</font>
<a name='L6553'>            status = 1;
<a name='L6554'>            *s = ch;
<a name='L6555'>        <font color='red'>}</font>
<a name='L6556'>        s++;
<a name='L6557'>    <font color='red'>}</font>
<a name='L6558'>
<a name='L6559'>    <b>return</b> status;
<a name='L6560'><font color='red'>}</font>
<a name='L6561'>
<a name='L6562'><b>static</b>
<a name='L6563'><b>int</b> <a href='../S/2828.html#L8046' title='Refered from 8046 in Objects/unicodeobject.c.'>fixlower</a>(PyUnicodeObject *self)
<a name='L6564'><font color='red'>{</font>
<a name='L6565'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = self-&gt;length;
<a name='L6566'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = self-&gt;str;
<a name='L6567'>    <b>int</b> status = 0;
<a name='L6568'>
<a name='L6569'>    <b>while</b> (len-- &gt; 0) <font color='red'>{</font>
<a name='L6570'>        <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch;
<a name='L6571'>
<a name='L6572'>        ch = <a href='../S/587.html#L332' title='Defined at 332 in Include/unicodeobject.h.'>Py_UNICODE_TOLOWER</a>(*s);
<a name='L6573'>        <b>if</b> (ch != *s) <font color='red'>{</font>
<a name='L6574'>            status = 1;
<a name='L6575'>            *s = ch;
<a name='L6576'>        <font color='red'>}</font>
<a name='L6577'>        s++;
<a name='L6578'>    <font color='red'>}</font>
<a name='L6579'>
<a name='L6580'>    <b>return</b> status;
<a name='L6581'><font color='red'>}</font>
<a name='L6582'>
<a name='L6583'><b>static</b>
<a name='L6584'><b>int</b> <a href='../S/2828.html#L8772' title='Refered from 8772 in Objects/unicodeobject.c.'>fixswapcase</a>(PyUnicodeObject *self)
<a name='L6585'><font color='red'>{</font>
<a name='L6586'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = self-&gt;length;
<a name='L6587'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = self-&gt;str;
<a name='L6588'>    <b>int</b> status = 0;
<a name='L6589'>
<a name='L6590'>    <b>while</b> (len-- &gt; 0) <font color='red'>{</font>
<a name='L6591'>        <b>if</b> (<a href='../S/587.html#L328' title='Defined at 328 in Include/unicodeobject.h.'>Py_UNICODE_ISUPPER</a>(*s)) <font color='red'>{</font>
<a name='L6592'>            *s = <a href='../S/587.html#L332' title='Defined at 332 in Include/unicodeobject.h.'>Py_UNICODE_TOLOWER</a>(*s);
<a name='L6593'>            status = 1;
<a name='L6594'>        <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../S/587.html#L327' title='Defined at 327 in Include/unicodeobject.h.'>Py_UNICODE_ISLOWER</a>(*s)) <font color='red'>{</font>
<a name='L6595'>            *s = <a href='../S/587.html#L333' title='Defined at 333 in Include/unicodeobject.h.'>Py_UNICODE_TOUPPER</a>(*s);
<a name='L6596'>            status = 1;
<a name='L6597'>        <font color='red'>}</font>
<a name='L6598'>        s++;
<a name='L6599'>    <font color='red'>}</font>
<a name='L6600'>
<a name='L6601'>    <b>return</b> status;
<a name='L6602'><font color='red'>}</font>
<a name='L6603'>
<a name='L6604'><b>static</b>
<a name='L6605'><b>int</b> <a href='../R/7814.html' title='Multiple refered from 2 places.'>fixcapitalize</a>(PyUnicodeObject *self)
<a name='L6606'><font color='red'>{</font>
<a name='L6607'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = self-&gt;length;
<a name='L6608'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = self-&gt;str;
<a name='L6609'>    <b>int</b> status = 0;
<a name='L6610'>
<a name='L6611'>    <b>if</b> (len == 0)
<a name='L6612'>        <b>return</b> 0;
<a name='L6613'>    <b>if</b> (<a href='../S/587.html#L327' title='Defined at 327 in Include/unicodeobject.h.'>Py_UNICODE_ISLOWER</a>(*s)) <font color='red'>{</font>
<a name='L6614'>        *s = <a href='../S/587.html#L333' title='Defined at 333 in Include/unicodeobject.h.'>Py_UNICODE_TOUPPER</a>(*s);
<a name='L6615'>        status = 1;
<a name='L6616'>    <font color='red'>}</font>
<a name='L6617'>    s++;
<a name='L6618'>    <b>while</b> (--len &gt; 0) <font color='red'>{</font>
<a name='L6619'>        <b>if</b> (<a href='../S/587.html#L328' title='Defined at 328 in Include/unicodeobject.h.'>Py_UNICODE_ISUPPER</a>(*s)) <font color='red'>{</font>
<a name='L6620'>            *s = <a href='../S/587.html#L332' title='Defined at 332 in Include/unicodeobject.h.'>Py_UNICODE_TOLOWER</a>(*s);
<a name='L6621'>            status = 1;
<a name='L6622'>        <font color='red'>}</font>
<a name='L6623'>        s++;
<a name='L6624'>    <font color='red'>}</font>
<a name='L6625'>    <b>return</b> status;
<a name='L6626'><font color='red'>}</font>
<a name='L6627'>
<a name='L6628'><b>static</b>
<a name='L6629'><b>int</b> <a href='../S/2828.html#L7022' title='Refered from 7022 in Objects/unicodeobject.c.'>fixtitle</a>(PyUnicodeObject *self)
<a name='L6630'><font color='red'>{</font>
<a name='L6631'>    <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L6632'>    <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L6633'>    <b>int</b> previous_is_cased;
<a name='L6634'>
<a name='L6635'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L6636'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1) <font color='red'>{</font>
<a name='L6637'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = <a href='../S/587.html#L334' title='Defined at 334 in Include/unicodeobject.h.'>Py_UNICODE_TOTITLE</a>(*p);
<a name='L6638'>        <b>if</b> (*p != ch) <font color='red'>{</font>
<a name='L6639'>            *p = ch;
<a name='L6640'>            <b>return</b> 1;
<a name='L6641'>        <font color='red'>}</font>
<a name='L6642'>        <b>else</b>
<a name='L6643'>            <b>return</b> 0;
<a name='L6644'>    <font color='red'>}</font>
<a name='L6645'>
<a name='L6646'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L6647'>    previous_is_cased = 0;
<a name='L6648'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L6649'>        <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *p;
<a name='L6650'>
<a name='L6651'>        <b>if</b> (previous_is_cased)
<a name='L6652'>            *p = <a href='../S/587.html#L332' title='Defined at 332 in Include/unicodeobject.h.'>Py_UNICODE_TOLOWER</a>(ch);
<a name='L6653'>        <b>else</b>
<a name='L6654'>            *p = <a href='../S/587.html#L334' title='Defined at 334 in Include/unicodeobject.h.'>Py_UNICODE_TOTITLE</a>(ch);
<a name='L6655'>
<a name='L6656'>        <b>if</b> (<a href='../S/587.html#L327' title='Defined at 327 in Include/unicodeobject.h.'>Py_UNICODE_ISLOWER</a>(ch) ||
<a name='L6657'>            <a href='../S/587.html#L328' title='Defined at 328 in Include/unicodeobject.h.'>Py_UNICODE_ISUPPER</a>(ch) ||
<a name='L6658'>            <a href='../S/587.html#L329' title='Defined at 329 in Include/unicodeobject.h.'>Py_UNICODE_ISTITLE</a>(ch))
<a name='L6659'>            previous_is_cased = 1;
<a name='L6660'>        <b>else</b>
<a name='L6661'>            previous_is_cased = 0;
<a name='L6662'>    <font color='red'>}</font>
<a name='L6663'>    <b>return</b> 1;
<a name='L6664'><font color='red'>}</font>
<a name='L6665'>
<a name='L6666'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L6667'><a href='../R/3600.html' title='Multiple refered from 8 places.'>PyUnicode_Join</a>(PyObject *separator, PyObject *seq)
<a name='L6668'><font color='red'>{</font>
<a name='L6669'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> blank = ' ';
<a name='L6670'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *sep = &amp;blank;
<a name='L6671'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> seplen = 1;
<a name='L6672'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *res = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; <i><font color='green'>/* the result */</font></i>
<a name='L6673'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *res_p;       <i><font color='green'>/* pointer to free byte in res's string area */</font></i>
<a name='L6674'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *fseq;          <i><font color='green'>/* PySequence_Fast(seq) */</font></i>
<a name='L6675'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> seqlen;       <i><font color='green'>/* len(fseq) -- number of items in sequence */</font></i>
<a name='L6676'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **items;
<a name='L6677'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item;
<a name='L6678'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> sz, i;
<a name='L6679'>
<a name='L6680'>    fseq = <a href='../S/2775.html#L1836' title='Defined at 1836 in Objects/abstract.c.'>PySequence_Fast</a>(seq, "");
<a name='L6681'>    <b>if</b> (fseq == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L6682'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6683'>    <font color='red'>}</font>
<a name='L6684'>
<a name='L6685'>    <i><font color='green'>/* NOTE: the following code can't call back into Python code,</font></i>
<a name='L6686'><i><font color='green'>     * so we are sure that fseq won't be mutated.</font></i>
<a name='L6687'><i><font color='green'>     */</font></i>
<a name='L6688'>
<a name='L6689'>    seqlen = PySequence_Fast_GET_SIZE(fseq);
<a name='L6690'>    <i><font color='green'>/* If empty sequence, return u"". */</font></i>
<a name='L6691'>    <b>if</b> (seqlen == 0) <font color='red'>{</font>
<a name='L6692'>        res = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(0);  <i><font color='green'>/* empty sequence; return u"" */</font></i>
<a name='L6693'>        <b>goto</b> Done;
<a name='L6694'>    <font color='red'>}</font>
<a name='L6695'>    items = PySequence_Fast_ITEMS(fseq);
<a name='L6696'>    <i><font color='green'>/* If singleton sequence with an exact Unicode, return that. */</font></i>
<a name='L6697'>    <b>if</b> (seqlen == 1) <font color='red'>{</font>
<a name='L6698'>        item = items[0];
<a name='L6699'>        <b>if</b> (PyUnicode_CheckExact(item)) <font color='red'>{</font>
<a name='L6700'>            Py_INCREF(item);
<a name='L6701'>            res = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)item;
<a name='L6702'>            <b>goto</b> Done;
<a name='L6703'>        <font color='red'>}</font>
<a name='L6704'>    <font color='red'>}</font>
<a name='L6705'>    <b>else</b> <font color='red'>{</font>
<a name='L6706'>        <i><font color='green'>/* Set up sep and seplen */</font></i>
<a name='L6707'>        <b>if</b> (separator == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L6708'>            sep = &amp;blank;
<a name='L6709'>            seplen = 1;
<a name='L6710'>        <font color='red'>}</font>
<a name='L6711'>        <b>else</b> <font color='red'>{</font>
<a name='L6712'>            <b>if</b> (!PyUnicode_Check(separator)) <font color='red'>{</font>
<a name='L6713'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L6714'>                             "separator: expected str instance,"
<a name='L6715'>                             " %.80s found",
<a name='L6716'>                             <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(separator)-&gt;tp_name);
<a name='L6717'>                <b>goto</b> onError;
<a name='L6718'>            <font color='red'>}</font>
<a name='L6719'>            sep = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(separator);
<a name='L6720'>            seplen = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(separator);
<a name='L6721'>        <font color='red'>}</font>
<a name='L6722'>    <font color='red'>}</font>
<a name='L6723'>
<a name='L6724'>    <i><font color='green'>/* There are at least two things to join, or else we have a subclass</font></i>
<a name='L6725'><i><font color='green'>     * of str in the sequence.</font></i>
<a name='L6726'><i><font color='green'>     * Do a pre-pass to figure out the total amount of space we'll</font></i>
<a name='L6727'><i><font color='green'>     * need (sz), and see whether all argument are strings.</font></i>
<a name='L6728'><i><font color='green'>     */</font></i>
<a name='L6729'>    sz = 0;
<a name='L6730'>    <b>for</b> (i = 0; i &lt; seqlen; i++) <font color='red'>{</font>
<a name='L6731'>        <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> old_sz = sz;
<a name='L6732'>        item = items[i];
<a name='L6733'>        <b>if</b> (!PyUnicode_Check(item)) <font color='red'>{</font>
<a name='L6734'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L6735'>                         "sequence item %zd: expected str instance,"
<a name='L6736'>                         " %.80s found",
<a name='L6737'>                         i, <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(item)-&gt;tp_name);
<a name='L6738'>            <b>goto</b> onError;
<a name='L6739'>        <font color='red'>}</font>
<a name='L6740'>        sz += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(item);
<a name='L6741'>        <b>if</b> (i != 0)
<a name='L6742'>            sz += seplen;
<a name='L6743'>        <b>if</b> (sz &lt; old_sz || sz &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>) <font color='red'>{</font>
<a name='L6744'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L6745'>                            "join() result is too long for a Python string");
<a name='L6746'>            <b>goto</b> onError;
<a name='L6747'>        <font color='red'>}</font>
<a name='L6748'>    <font color='red'>}</font>
<a name='L6749'>
<a name='L6750'>    res = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(sz);
<a name='L6751'>    <b>if</b> (res == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6752'>        <b>goto</b> onError;
<a name='L6753'>
<a name='L6754'>    <i><font color='green'>/* Catenate everything. */</font></i>
<a name='L6755'>    res_p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(res);
<a name='L6756'>    <b>for</b> (i = 0; i &lt; seqlen; ++i) <font color='red'>{</font>
<a name='L6757'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> itemlen;
<a name='L6758'>        item = items[i];
<a name='L6759'>        itemlen = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(item);
<a name='L6760'>        <i><font color='green'>/* Copy item, and maybe the separator. */</font></i>
<a name='L6761'>        <b>if</b> (i) <font color='red'>{</font>
<a name='L6762'>            <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(res_p, sep, seplen);
<a name='L6763'>            res_p += seplen;
<a name='L6764'>        <font color='red'>}</font>
<a name='L6765'>        <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(res_p, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(item), itemlen);
<a name='L6766'>        res_p += itemlen;
<a name='L6767'>    <font color='red'>}</font>
<a name='L6768'>
<a name='L6769'>  Done:
<a name='L6770'>    Py_DECREF(fseq);
<a name='L6771'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)res;
<a name='L6772'>
<a name='L6773'>  onError:
<a name='L6774'>    Py_DECREF(fseq);
<a name='L6775'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(res);
<a name='L6776'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6777'><font color='red'>}</font>
<a name='L6778'>
<a name='L6779'><b>static</b>
<a name='L6780'><a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *<a href='../R/9440.html' title='Multiple refered from 14 places.'>pad</a>(PyUnicodeObject *self,
<a name='L6781'>                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> left,
<a name='L6782'>                     <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> right,
<a name='L6783'>                     Py_UNICODE fill)
<a name='L6784'><font color='red'>{</font>
<a name='L6785'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *u;
<a name='L6786'>
<a name='L6787'>    <b>if</b> (left &lt; 0)
<a name='L6788'>        left = 0;
<a name='L6789'>    <b>if</b> (right &lt; 0)
<a name='L6790'>        right = 0;
<a name='L6791'>
<a name='L6792'>    <b>if</b> (left == 0 &amp;&amp; right == 0 &amp;&amp; PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L6793'>        Py_INCREF(self);
<a name='L6794'>        <b>return</b> self;
<a name='L6795'>    <font color='red'>}</font>
<a name='L6796'>
<a name='L6797'>    <b>if</b> (left &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - self-&gt;length ||
<a name='L6798'>        right &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - (left + self-&gt;length)) <font color='red'>{</font>
<a name='L6799'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError, "padded string is too long");
<a name='L6800'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6801'>    <font color='red'>}</font>
<a name='L6802'>    u = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(left + self-&gt;length + right);
<a name='L6803'>    <b>if</b> (u) <font color='red'>{</font>
<a name='L6804'>        <b>if</b> (left)
<a name='L6805'>            <a href='../S/587.html#L356' title='Defined at 356 in Include/unicodeobject.h.'>Py_UNICODE_FILL</a>(u-&gt;str, <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>, left);
<a name='L6806'>        <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(u-&gt;str + left, self-&gt;str, self-&gt;length);
<a name='L6807'>        <b>if</b> (right)
<a name='L6808'>            <a href='../S/587.html#L356' title='Defined at 356 in Include/unicodeobject.h.'>Py_UNICODE_FILL</a>(u-&gt;str + left + self-&gt;length, <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>, right);
<a name='L6809'>    <font color='red'>}</font>
<a name='L6810'>
<a name='L6811'>    <b>return</b> u;
<a name='L6812'><font color='red'>}</font>
<a name='L6813'>
<a name='L6814'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3609.html' title='Multiple refered from 2 places.'>PyUnicode_Splitlines</a>(PyObject *string, <b>int</b> keepends)
<a name='L6815'><font color='red'>{</font>
<a name='L6816'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *list;
<a name='L6817'>
<a name='L6818'>    <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a> = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>);
<a name='L6819'>    <b>if</b> (<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6820'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6821'>
<a name='L6822'>    list = stringlib_splitlines(
<a name='L6823'>        (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>),
<a name='L6824'>        <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>), keepends);
<a name='L6825'>
<a name='L6826'>    Py_DECREF(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>);
<a name='L6827'>    <b>return</b> list;
<a name='L6828'><font color='red'>}</font>
<a name='L6829'>
<a name='L6830'><b>static</b>
<a name='L6831'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/10469.html' title='Multiple refered from 4 places.'>split</a>(PyUnicodeObject *self,
<a name='L6832'>                PyUnicodeObject *substring,
<a name='L6833'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxcount)
<a name='L6834'><font color='red'>{</font>
<a name='L6835'>    <b>if</b> (maxcount &lt; 0)
<a name='L6836'>        maxcount = <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>;
<a name='L6837'>
<a name='L6838'>    <b>if</b> (substring == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6839'>        <b>return</b> stringlib_split_whitespace(
<a name='L6840'>            (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self,  self-&gt;str, self-&gt;length, maxcount
<a name='L6841'>            );
<a name='L6842'>
<a name='L6843'>    <b>return</b> stringlib_split(
<a name='L6844'>        (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self,  self-&gt;str, self-&gt;length,
<a name='L6845'>        substring-&gt;str, substring-&gt;length,
<a name='L6846'>        maxcount
<a name='L6847'>        );
<a name='L6848'><font color='red'>}</font>
<a name='L6849'>
<a name='L6850'><b>static</b>
<a name='L6851'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/10066.html' title='Multiple refered from 3 places.'>rsplit</a>(PyUnicodeObject *self,
<a name='L6852'>                 PyUnicodeObject *substring,
<a name='L6853'>                 <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxcount)
<a name='L6854'><font color='red'>{</font>
<a name='L6855'>    <b>if</b> (maxcount &lt; 0)
<a name='L6856'>        maxcount = <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>;
<a name='L6857'>
<a name='L6858'>    <b>if</b> (substring == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L6859'>        <b>return</b> stringlib_rsplit_whitespace(
<a name='L6860'>            (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self,  self-&gt;str, self-&gt;length, maxcount
<a name='L6861'>            );
<a name='L6862'>
<a name='L6863'>    <b>return</b> stringlib_rsplit(
<a name='L6864'>        (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self,  self-&gt;str, self-&gt;length,
<a name='L6865'>        substring-&gt;str, substring-&gt;length,
<a name='L6866'>        maxcount
<a name='L6867'>        );
<a name='L6868'><font color='red'>}</font>
<a name='L6869'>
<a name='L6870'><b>static</b>
<a name='L6871'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/10015.html' title='Multiple refered from 4 places.'>replace</a>(PyUnicodeObject *self,
<a name='L6872'>                  PyUnicodeObject *str1,
<a name='L6873'>                  PyUnicodeObject *str2,
<a name='L6874'>                  <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxcount)
<a name='L6875'><font color='red'>{</font>
<a name='L6876'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *u;
<a name='L6877'>
<a name='L6878'>    <b>if</b> (maxcount &lt; 0)
<a name='L6879'>        maxcount = <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>;
<a name='L6880'>    <b>else</b> <b>if</b> (maxcount == 0 || self-&gt;length == 0)
<a name='L6881'>        <b>goto</b> nothing;
<a name='L6882'>
<a name='L6883'>    <b>if</b> (str1-&gt;length == str2-&gt;length) <font color='red'>{</font>
<a name='L6884'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L6885'>        <i><font color='green'>/* same length */</font></i>
<a name='L6886'>        <b>if</b> (str1-&gt;length == 0)
<a name='L6887'>            <b>goto</b> nothing;
<a name='L6888'>        <b>if</b> (str1-&gt;length == 1) <font color='red'>{</font>
<a name='L6889'>            <i><font color='green'>/* replace characters */</font></i>
<a name='L6890'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> u1, u2;
<a name='L6891'>            <b>if</b> (!<a href='../D/8607.html' title='Multiple defined in 2 places.'>findchar</a>(self-&gt;str, self-&gt;length, str1-&gt;str[0]))
<a name='L6892'>                <b>goto</b> nothing;
<a name='L6893'>            u = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>*) <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, self-&gt;length);
<a name='L6894'>            <b>if</b> (!u)
<a name='L6895'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6896'>            <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(u-&gt;str, self-&gt;str, self-&gt;length);
<a name='L6897'>            u1 = str1-&gt;str[0];
<a name='L6898'>            u2 = str2-&gt;str[0];
<a name='L6899'>            <b>for</b> (i = 0; i &lt; u-&gt;length; i++)
<a name='L6900'>                <b>if</b> (u-&gt;str[i] == u1) <font color='red'>{</font>
<a name='L6901'>                    <b>if</b> (--maxcount &lt; 0)
<a name='L6902'>                        <b>break</b>;
<a name='L6903'>                    u-&gt;str[i] = u2;
<a name='L6904'>                <font color='red'>}</font>
<a name='L6905'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L6906'>            i = stringlib_find(
<a name='L6907'>                self-&gt;str, self-&gt;length, str1-&gt;str, str1-&gt;length, 0
<a name='L6908'>                );
<a name='L6909'>            <b>if</b> (i &lt; 0)
<a name='L6910'>                <b>goto</b> nothing;
<a name='L6911'>            u = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>*) <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, self-&gt;length);
<a name='L6912'>            <b>if</b> (!u)
<a name='L6913'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6914'>            <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(u-&gt;str, self-&gt;str, self-&gt;length);
<a name='L6915'>
<a name='L6916'>            <i><font color='green'>/* change everything in-place, starting with this one */</font></i>
<a name='L6917'>            <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(u-&gt;str+i, str2-&gt;str, str2-&gt;length);
<a name='L6918'>            i += str1-&gt;length;
<a name='L6919'>
<a name='L6920'>            <b>while</b> ( --maxcount &gt; 0) <font color='red'>{</font>
<a name='L6921'>                i = stringlib_find(self-&gt;str+i, self-&gt;length-i,
<a name='L6922'>                                   str1-&gt;str, str1-&gt;length,
<a name='L6923'>                                   i);
<a name='L6924'>                <b>if</b> (i == -1)
<a name='L6925'>                    <b>break</b>;
<a name='L6926'>                <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(u-&gt;str+i, str2-&gt;str, str2-&gt;length);
<a name='L6927'>                i += str1-&gt;length;
<a name='L6928'>            <font color='red'>}</font>
<a name='L6929'>        <font color='red'>}</font>
<a name='L6930'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L6931'>
<a name='L6932'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n, i, j, e;
<a name='L6933'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> product, new_size, delta;
<a name='L6934'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L6935'>
<a name='L6936'>        <i><font color='green'>/* replace strings */</font></i>
<a name='L6937'>        n = stringlib_count(self-&gt;str, self-&gt;length, str1-&gt;str, str1-&gt;length,
<a name='L6938'>                            maxcount);
<a name='L6939'>        <b>if</b> (n == 0)
<a name='L6940'>            <b>goto</b> nothing;
<a name='L6941'>        <i><font color='green'>/* new_size = self-&gt;length + n * (str2-&gt;length - str1-&gt;length)); */</font></i>
<a name='L6942'>        delta = (str2-&gt;length - str1-&gt;length);
<a name='L6943'>        <b>if</b> (delta == 0) <font color='red'>{</font>
<a name='L6944'>            new_size = self-&gt;length;
<a name='L6945'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L6946'>            product = n * (str2-&gt;length - str1-&gt;length);
<a name='L6947'>            <b>if</b> ((product / (str2-&gt;length - str1-&gt;length)) != n) <font color='red'>{</font>
<a name='L6948'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L6949'>                                "replace string is too long");
<a name='L6950'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6951'>            <font color='red'>}</font>
<a name='L6952'>            new_size = self-&gt;length + product;
<a name='L6953'>            <b>if</b> (new_size &lt; 0) <font color='red'>{</font>
<a name='L6954'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L6955'>                                "replace string is too long");
<a name='L6956'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6957'>            <font color='red'>}</font>
<a name='L6958'>        <font color='red'>}</font>
<a name='L6959'>        u = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(new_size);
<a name='L6960'>        <b>if</b> (!u)
<a name='L6961'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L6962'>        i = 0;
<a name='L6963'>        p = u-&gt;str;
<a name='L6964'>        e = self-&gt;length - str1-&gt;length;
<a name='L6965'>        <b>if</b> (str1-&gt;length &gt; 0) <font color='red'>{</font>
<a name='L6966'>            <b>while</b> (n-- &gt; 0) <font color='red'>{</font>
<a name='L6967'>                <i><font color='green'>/* look for next match */</font></i>
<a name='L6968'>                j = stringlib_find(self-&gt;str+i, self-&gt;length-i,
<a name='L6969'>                                   str1-&gt;str, str1-&gt;length,
<a name='L6970'>                                   i);
<a name='L6971'>                <b>if</b> (j == -1)
<a name='L6972'>                    <b>break</b>;
<a name='L6973'>                <b>else</b> <b>if</b> (j &gt; i) <font color='red'>{</font>
<a name='L6974'>                    <i><font color='green'>/* copy unchanged part [i:j] */</font></i>
<a name='L6975'>                    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(p, self-&gt;str+i, j-i);
<a name='L6976'>                    p += j - i;
<a name='L6977'>                <font color='red'>}</font>
<a name='L6978'>                <i><font color='green'>/* copy substitution string */</font></i>
<a name='L6979'>                <b>if</b> (str2-&gt;length &gt; 0) <font color='red'>{</font>
<a name='L6980'>                    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(p, str2-&gt;str, str2-&gt;length);
<a name='L6981'>                    p += str2-&gt;length;
<a name='L6982'>                <font color='red'>}</font>
<a name='L6983'>                i = j + str1-&gt;length;
<a name='L6984'>            <font color='red'>}</font>
<a name='L6985'>            <b>if</b> (i &lt; self-&gt;length)
<a name='L6986'>                <i><font color='green'>/* copy tail [i:] */</font></i>
<a name='L6987'>                <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(p, self-&gt;str+i, self-&gt;length-i);
<a name='L6988'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L6989'>            <i><font color='green'>/* interleave */</font></i>
<a name='L6990'>            <b>while</b> (n &gt; 0) <font color='red'>{</font>
<a name='L6991'>                <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(p, str2-&gt;str, str2-&gt;length);
<a name='L6992'>                p += str2-&gt;length;
<a name='L6993'>                <b>if</b> (--n &lt;= 0)
<a name='L6994'>                    <b>break</b>;
<a name='L6995'>                *p++ = self-&gt;str[i++];
<a name='L6996'>            <font color='red'>}</font>
<a name='L6997'>            <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(p, self-&gt;str+i, self-&gt;length-i);
<a name='L6998'>        <font color='red'>}</font>
<a name='L6999'>    <font color='red'>}</font>
<a name='L7000'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) u;
<a name='L7001'>
<a name='L7002'>  nothing:
<a name='L7003'>    <i><font color='green'>/* nothing to replace; return original string (when possible) */</font></i>
<a name='L7004'>    <b>if</b> (PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L7005'>        Py_INCREF(self);
<a name='L7006'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) self;
<a name='L7007'>    <font color='red'>}</font>
<a name='L7008'>    <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(self-&gt;str, self-&gt;length);
<a name='L7009'><font color='red'>}</font>
<a name='L7010'>
<a name='L7011'><i><font color='green'>/* --- Unicode Object Methods --------------------------------------------- */</font></i>
<a name='L7012'>
<a name='L7013'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(title__doc__,
<a name='L7014'>             "S.title() -&gt; str\n\
<a name='L7015'>\n\
<a name='L7016'>Return a titlecased version of S, i.e. words start with title case\n\
<a name='L7017'>characters, all remaining cased characters have lower case.");
<a name='L7018'>
<a name='L7019'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7020'><a href='../S/2828.html#L9113' title='Refered from 9113 in Objects/unicodeobject.c.'>unicode_title</a>(PyUnicodeObject *self)
<a name='L7021'><font color='red'>{</font>
<a name='L7022'>    <b>return</b> <a href='../S/2828.html#L6518' title='Defined at 6518 in Objects/unicodeobject.c.'>fixup</a>(self, <a href='../S/2828.html#L6629' title='Defined at 6629 in Objects/unicodeobject.c.'>fixtitle</a>);
<a name='L7023'><font color='red'>}</font>
<a name='L7024'>
<a name='L7025'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(capitalize__doc__,
<a name='L7026'>             "S.capitalize() -&gt; str\n\
<a name='L7027'>\n\
<a name='L7028'>Return a capitalized version of S, i.e. make the first character\n\
<a name='L7029'>have upper case and the rest lower case.");
<a name='L7030'>
<a name='L7031'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7032'><a href='../S/2828.html#L9112' title='Refered from 9112 in Objects/unicodeobject.c.'>unicode_capitalize</a>(PyUnicodeObject *self)
<a name='L7033'><font color='red'>{</font>
<a name='L7034'>    <b>return</b> <a href='../S/2828.html#L6518' title='Defined at 6518 in Objects/unicodeobject.c.'>fixup</a>(self, <a href='../S/2828.html#L6605' title='Defined at 6605 in Objects/unicodeobject.c.'>fixcapitalize</a>);
<a name='L7035'><font color='red'>}</font>
<a name='L7036'>
<a name='L7037'><font color='darkred'>#if</font> 0
<a name='L7038'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(capwords__doc__,
<a name='L7039'>             "S.capwords() -&gt; str\n\
<a name='L7040'>\n\
<a name='L7041'>Apply .capitalize() to all words in S and return the result with\n\
<a name='L7042'>normalized whitespace (all whitespace strings are replaced by ' ').");
<a name='L7043'>
<a name='L7044'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7045'><a href='../S/2828.html#L9154' title='Refered from 9154 in Objects/unicodeobject.c.'>unicode_capwords</a>(PyUnicodeObject *self)
<a name='L7046'><font color='red'>{</font>
<a name='L7047'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *list;
<a name='L7048'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item;
<a name='L7049'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L7050'>
<a name='L7051'>    <i><font color='green'>/* Split into words */</font></i>
<a name='L7052'>    list = <a href='../S/2828.html#L6831' title='Defined at 6831 in Objects/unicodeobject.c.'>split</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, -1);
<a name='L7053'>    <b>if</b> (!list)
<a name='L7054'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7055'>
<a name='L7056'>    <i><font color='green'>/* Capitalize each word */</font></i>
<a name='L7057'>    <b>for</b> (i = 0; i &lt; <a href='../S/534.html#L71' title='Defined at 71 in Include/listobject.h.'>PyList_GET_SIZE</a>(list); i++) <font color='red'>{</font>
<a name='L7058'>        item = <a href='../S/2828.html#L6518' title='Defined at 6518 in Objects/unicodeobject.c.'>fixup</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)PyList_GET_ITEM(list, i),
<a name='L7059'>                     <a href='../S/2828.html#L6605' title='Defined at 6605 in Objects/unicodeobject.c.'>fixcapitalize</a>);
<a name='L7060'>        <b>if</b> (item == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L7061'>            <b>goto</b> onError;
<a name='L7062'>        Py_DECREF(PyList_GET_ITEM(list, i));
<a name='L7063'>        PyList_SET_ITEM(list, i, item);
<a name='L7064'>    <font color='red'>}</font>
<a name='L7065'>
<a name='L7066'>    <i><font color='green'>/* Join the words to form a new string */</font></i>
<a name='L7067'>    item = <a href='../D/4025.html' title='Multiple defined in 3 places.'>PyUnicode_Join</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, list);
<a name='L7068'>
<a name='L7069'>  onError:
<a name='L7070'>    Py_DECREF(list);
<a name='L7071'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)item;
<a name='L7072'><font color='red'>}</font>
<a name='L7073'><font color='darkred'>#endif</font>
<a name='L7074'>
<a name='L7075'><i><font color='green'>/* Argument converter.  Coerces to a single unicode character */</font></i>
<a name='L7076'>
<a name='L7077'><b>static</b> <b>int</b>
<a name='L7078'><a href='../R/7001.html' title='Multiple refered from 3 places.'>convert_uc</a>(PyObject *obj, <b>void</b> *addr)
<a name='L7079'><font color='red'>{</font>
<a name='L7080'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *fillcharloc = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *)addr;
<a name='L7081'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *uniobj;
<a name='L7082'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *unistr;
<a name='L7083'>
<a name='L7084'>    uniobj = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(obj);
<a name='L7085'>    <b>if</b> (uniobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L7086'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L7087'>                        "The fill character cannot be converted to Unicode");
<a name='L7088'>        <b>return</b> 0;
<a name='L7089'>    <font color='red'>}</font>
<a name='L7090'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(uniobj) != 1) <font color='red'>{</font>
<a name='L7091'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L7092'>                        "The fill character must be exactly one character long");
<a name='L7093'>        Py_DECREF(uniobj);
<a name='L7094'>        <b>return</b> 0;
<a name='L7095'>    <font color='red'>}</font>
<a name='L7096'>    unistr = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(uniobj);
<a name='L7097'>    *fillcharloc = unistr[0];
<a name='L7098'>    Py_DECREF(uniobj);
<a name='L7099'>    <b>return</b> 1;
<a name='L7100'><font color='red'>}</font>
<a name='L7101'>
<a name='L7102'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(center__doc__,
<a name='L7103'>             "S.center(width[, fillchar]) -&gt; str\n\
<a name='L7104'>\n\
<a name='L7105'>Return S centered in a string of length width. Padding is\n\
<a name='L7106'>done using the specified fill character (default is a space)");
<a name='L7107'>
<a name='L7108'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L7109'><a href='../S/2828.html#L9114' title='Refered from 9114 in Objects/unicodeobject.c.'>unicode_center</a>(PyUnicodeObject *self, PyObject *args)
<a name='L7110'><font color='red'>{</font>
<a name='L7111'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> marg, left;
<a name='L7112'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> width;
<a name='L7113'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> fillchar = ' ';
<a name='L7114'>
<a name='L7115'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "n|O&amp;:center", &amp;width, <a href='../S/2828.html#L7078' title='Defined at 7078 in Objects/unicodeobject.c.'>convert_uc</a>, &amp;fillchar))
<a name='L7116'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7117'>
<a name='L7118'>    <b>if</b> (self-&gt;length &gt;= width &amp;&amp; PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L7119'>        Py_INCREF(self);
<a name='L7120'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self;
<a name='L7121'>    <font color='red'>}</font>
<a name='L7122'>
<a name='L7123'>    marg = width - self-&gt;length;
<a name='L7124'>    left = marg / 2 + (marg &amp; width &amp; 1);
<a name='L7125'>
<a name='L7126'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) <a href='../S/2828.html#L6780' title='Defined at 6780 in Objects/unicodeobject.c.'>pad</a>(self, left, marg - left, fillchar);
<a name='L7127'><font color='red'>}</font>
<a name='L7128'>
<a name='L7129'><font color='darkred'>#if</font> 0
<a name='L7130'>
<a name='L7131'><i><font color='green'>/* This code should go into some future Unicode collation support</font></i>
<a name='L7132'><i><font color='green'>   module. The basic comparison should compare ordinals on a naive</font></i>
<a name='L7133'><i><font color='green'>   basis (this is what Java does and thus Jython too). */</font></i>
<a name='L7134'>
<a name='L7135'><i><font color='green'>/* speedy UTF-16 code point order comparison */</font></i>
<a name='L7136'><i><font color='green'>/* gleaned from: */</font></i>
<a name='L7137'><i><font color='green'>/* http://www-4.ibm.com/software/developer/library/utf16.html?dwzone=unicode */</font></i>
<a name='L7138'>
<a name='L7139'><b>static</b> <b>short</b> utf16Fixup[32] =
<a name='L7140'><font color='red'>{</font>
<a name='L7141'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L7142'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L7143'>    0, 0, 0, 0, 0, 0, 0, 0,
<a name='L7144'>    0, 0, 0, 0x2000, -0x800, -0x800, -0x800, -0x800
<a name='L7145'><font color='red'>}</font>;
<a name='L7146'>
<a name='L7147'><b>static</b> <b>int</b>
<a name='L7148'><a href='../R/11070.html' title='Multiple refered from 2 places.'>unicode_compare</a>(PyUnicodeObject *str1, PyUnicodeObject *str2)
<a name='L7149'><font color='red'>{</font>
<a name='L7150'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len1, len2;
<a name='L7151'>
<a name='L7152'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s1 = str1-&gt;str;
<a name='L7153'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s2 = str2-&gt;str;
<a name='L7154'>
<a name='L7155'>    len1 = str1-&gt;length;
<a name='L7156'>    len2 = str2-&gt;length;
<a name='L7157'>
<a name='L7158'>    <b>while</b> (len1 &gt; 0 &amp;&amp; len2 &gt; 0) <font color='red'>{</font>
<a name='L7159'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> c1, c2;
<a name='L7160'>
<a name='L7161'>        c1 = *s1++;
<a name='L7162'>        c2 = *s2++;
<a name='L7163'>
<a name='L7164'>        <b>if</b> (c1 &gt; (1&lt;&lt;11) * 26)
<a name='L7165'>            c1 += utf16Fixup[c1&gt;&gt;11];
<a name='L7166'>        <b>if</b> (c2 &gt; (1&lt;&lt;11) * 26)
<a name='L7167'>            c2 += utf16Fixup[c2&gt;&gt;11];
<a name='L7168'>        <i><font color='green'>/* now c1 and c2 are in UTF-32-compatible order */</font></i>
<a name='L7169'>
<a name='L7170'>        <b>if</b> (c1 != c2)
<a name='L7171'>            <b>return</b> (c1 &lt; c2) ? -1 : 1;
<a name='L7172'>
<a name='L7173'>        len1--; len2--;
<a name='L7174'>    <font color='red'>}</font>
<a name='L7175'>
<a name='L7176'>    <b>return</b> (len1 &lt; len2) ? -1 : (len1 != len2);
<a name='L7177'><font color='red'>}</font>
<a name='L7178'>
<a name='L7179'><font color='darkred'>#else</font>
<a name='L7180'>
<a name='L7181'><b>static</b> <b>int</b>
<a name='L7182'><a href='../R/11070.html' title='Multiple refered from 2 places.'>unicode_compare</a>(PyUnicodeObject *str1, PyUnicodeObject *str2)
<a name='L7183'><font color='red'>{</font>
<a name='L7184'>    <b>register</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len1, len2;
<a name='L7185'>
<a name='L7186'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s1 = str1-&gt;str;
<a name='L7187'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s2 = str2-&gt;str;
<a name='L7188'>
<a name='L7189'>    len1 = str1-&gt;length;
<a name='L7190'>    len2 = str2-&gt;length;
<a name='L7191'>
<a name='L7192'>    <b>while</b> (len1 &gt; 0 &amp;&amp; len2 &gt; 0) <font color='red'>{</font>
<a name='L7193'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> c1, c2;
<a name='L7194'>
<a name='L7195'>        c1 = *s1++;
<a name='L7196'>        c2 = *s2++;
<a name='L7197'>
<a name='L7198'>        <b>if</b> (c1 != c2)
<a name='L7199'>            <b>return</b> (c1 &lt; c2) ? -1 : 1;
<a name='L7200'>
<a name='L7201'>        len1--; len2--;
<a name='L7202'>    <font color='red'>}</font>
<a name='L7203'>
<a name='L7204'>    <b>return</b> (len1 &lt; len2) ? -1 : (len1 != len2);
<a name='L7205'><font color='red'>}</font>
<a name='L7206'>
<a name='L7207'><font color='darkred'>#endif</font>
<a name='L7208'>
<a name='L7209'><b>int</b> <a href='../R/3548.html' title='Multiple refered from 5 places.'>PyUnicode_Compare</a>(PyObject *left,
<a name='L7210'>                      PyObject *right)
<a name='L7211'><font color='red'>{</font>
<a name='L7212'>    <b>if</b> (PyUnicode_Check(left) &amp;&amp; PyUnicode_Check(right))
<a name='L7213'>        <b>return</b> <a href='../D/11955.html' title='Multiple defined in 2 places.'>unicode_compare</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)left,
<a name='L7214'>                               (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)right);
<a name='L7215'>    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L7216'>                 "Can't compare %.100s and %.100s",
<a name='L7217'>                 left-&gt;ob_type-&gt;tp_name,
<a name='L7218'>                 right-&gt;ob_type-&gt;tp_name);
<a name='L7219'>    <b>return</b> -1;
<a name='L7220'><font color='red'>}</font>
<a name='L7221'>
<a name='L7222'><b>int</b>
<a name='L7223'><a href='../R/3549.html' title='Multiple refered from 45 places.'>PyUnicode_CompareWithASCIIString</a>(PyObject* uni, <b>const</b> <b>char</b>* str)
<a name='L7224'><font color='red'>{</font>
<a name='L7225'>    <b>int</b> i;
<a name='L7226'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *id;
<a name='L7227'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyUnicode_Check(uni));
<a name='L7228'>    id = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(uni);
<a name='L7229'>    <i><font color='green'>/* Compare Unicode string and source character set string */</font></i>
<a name='L7230'>    <b>for</b> (i = 0; id[i] &amp;&amp; str[i]; i++)
<a name='L7231'>        <b>if</b> (id[i] != str[i])
<a name='L7232'>            <b>return</b> ((<b>int</b>)id[i] &lt; (<b>int</b>)str[i]) ? -1 : 1;
<a name='L7233'>    <i><font color='green'>/* This check keeps Python strings that end in '\0' from comparing equal</font></i>
<a name='L7234'><i><font color='green'>     to C strings identical up to that point. */</font></i>
<a name='L7235'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(uni) != i || id[i])
<a name='L7236'>        <b>return</b> 1; <i><font color='green'>/* uni is longer */</font></i>
<a name='L7237'>    <b>if</b> (str[i])
<a name='L7238'>        <b>return</b> -1; <i><font color='green'>/* str is longer */</font></i>
<a name='L7239'>    <b>return</b> 0;
<a name='L7240'><font color='red'>}</font>
<a name='L7241'>
<a name='L7242'>
<a name='L7243'><font color='darkred'>#define</font> <a href='../R/4531.html' title='Multiple refered from 36 places.'>TEST_COND</a>(cond)                         \
<a name='L7244'>    ((cond) ? Py_True : Py_False)
<a name='L7245'>
<a name='L7246'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2828.html#L9906' title='Refered from 9906 in Objects/unicodeobject.c.'>PyUnicode_RichCompare</a>(PyObject *left,
<a name='L7247'>                                PyObject *right,
<a name='L7248'>                                <b>int</b> op)
<a name='L7249'><font color='red'>{</font>
<a name='L7250'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L7251'>
<a name='L7252'>    <b>if</b> (PyUnicode_Check(left) &amp;&amp; PyUnicode_Check(right)) <font color='red'>{</font>
<a name='L7253'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L7254'>        <b>if</b> (((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *) left)-&gt;length !=
<a name='L7255'>            ((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *) right)-&gt;length) <font color='red'>{</font>
<a name='L7256'>            <b>if</b> (op == <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>) <font color='red'>{</font>
<a name='L7257'>                Py_INCREF(Py_False);
<a name='L7258'>                <b>return</b> Py_False;
<a name='L7259'>            <font color='red'>}</font>
<a name='L7260'>            <b>if</b> (op == <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_NE</a>) <font color='red'>{</font>
<a name='L7261'>                Py_INCREF(Py_True);
<a name='L7262'>                <b>return</b> Py_True;
<a name='L7263'>            <font color='red'>}</font>
<a name='L7264'>        <font color='red'>}</font>
<a name='L7265'>        <b>if</b> (left == right)
<a name='L7266'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 0;
<a name='L7267'>        <b>else</b>
<a name='L7268'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/11955.html' title='Multiple defined in 2 places.'>unicode_compare</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)left,
<a name='L7269'>                                     (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)right);
<a name='L7270'>
<a name='L7271'>        <i><font color='green'>/* Convert the return value to a Boolean */</font></i>
<a name='L7272'>        <b>switch</b> (op) <font color='red'>{</font>
<a name='L7273'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>:
<a name='L7274'>            v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == 0);
<a name='L7275'>            <b>break</b>;
<a name='L7276'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_NE</a>:
<a name='L7277'>            v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != 0);
<a name='L7278'>            <b>break</b>;
<a name='L7279'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LE</a>:
<a name='L7280'>            v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt;= 0);
<a name='L7281'>            <b>break</b>;
<a name='L7282'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_GE</a>:
<a name='L7283'>            v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &gt;= 0);
<a name='L7284'>            <b>break</b>;
<a name='L7285'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LT</a>:
<a name='L7286'>            v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == -1);
<a name='L7287'>            <b>break</b>;
<a name='L7288'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_GT</a>:
<a name='L7289'>            v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == 1);
<a name='L7290'>            <b>break</b>;
<a name='L7291'>        <b>default</b>:
<a name='L7292'>            <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L7293'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7294'>        <font color='red'>}</font>
<a name='L7295'>        Py_INCREF(v);
<a name='L7296'>        <b>return</b> v;
<a name='L7297'>    <font color='red'>}</font>
<a name='L7298'>
<a name='L7299'>    Py_INCREF(Py_NotImplemented);
<a name='L7300'>    <b>return</b> Py_NotImplemented;
<a name='L7301'><font color='red'>}</font>
<a name='L7302'>
<a name='L7303'><b>int</b> <a href='../R/3551.html' title='Multiple refered from 2 places.'>PyUnicode_Contains</a>(PyObject *container,
<a name='L7304'>                       PyObject *element)
<a name='L7305'><font color='red'>{</font>
<a name='L7306'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str, *sub;
<a name='L7307'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L7308'>
<a name='L7309'>    <i><font color='green'>/* Coerce the two arguments */</font></i>
<a name='L7310'>    sub = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(<a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a>);
<a name='L7311'>    <b>if</b> (!sub) <font color='red'>{</font>
<a name='L7312'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L7313'>                     "'in &lt;string&gt;' requires string as left operand, not %s",
<a name='L7314'>                     <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a>-&gt;ob_type-&gt;tp_name);
<a name='L7315'>        <b>return</b> -1;
<a name='L7316'>    <font color='red'>}</font>
<a name='L7317'>
<a name='L7318'>    str = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(container);
<a name='L7319'>    <b>if</b> (!str) <font color='red'>{</font>
<a name='L7320'>        Py_DECREF(sub);
<a name='L7321'>        <b>return</b> -1;
<a name='L7322'>    <font color='red'>}</font>
<a name='L7323'>
<a name='L7324'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = stringlib_contains_obj(str, sub);
<a name='L7325'>
<a name='L7326'>    Py_DECREF(str);
<a name='L7327'>    Py_DECREF(sub);
<a name='L7328'>
<a name='L7329'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L7330'><font color='red'>}</font>
<a name='L7331'>
<a name='L7332'><i><font color='green'>/* Concat to string or Unicode object giving a new Unicode object. */</font></i>
<a name='L7333'>
<a name='L7334'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3550.html' title='Multiple refered from 7 places.'>PyUnicode_Concat</a>(PyObject *left,
<a name='L7335'>                           PyObject *right)
<a name='L7336'><font color='red'>{</font>
<a name='L7337'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *u = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *v = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *w;
<a name='L7338'>
<a name='L7339'>    <i><font color='green'>/* Coerce the two arguments */</font></i>
<a name='L7340'>    u = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(left);
<a name='L7341'>    <b>if</b> (u == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L7342'>        <b>goto</b> onError;
<a name='L7343'>    v = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(right);
<a name='L7344'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L7345'>        <b>goto</b> onError;
<a name='L7346'>
<a name='L7347'>    <i><font color='green'>/* Shortcuts */</font></i>
<a name='L7348'>    <b>if</b> (v == unicode_empty) <font color='red'>{</font>
<a name='L7349'>        Py_DECREF(v);
<a name='L7350'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)u;
<a name='L7351'>    <font color='red'>}</font>
<a name='L7352'>    <b>if</b> (u == unicode_empty) <font color='red'>{</font>
<a name='L7353'>        Py_DECREF(u);
<a name='L7354'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L7355'>    <font color='red'>}</font>
<a name='L7356'>
<a name='L7357'>    <i><font color='green'>/* Concat the two Unicode strings */</font></i>
<a name='L7358'>    w = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(u-&gt;length + v-&gt;length);
<a name='L7359'>    <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L7360'>        <b>goto</b> onError;
<a name='L7361'>    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(w-&gt;str, u-&gt;str, u-&gt;length);
<a name='L7362'>    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(w-&gt;str + u-&gt;length, v-&gt;str, v-&gt;length);
<a name='L7363'>
<a name='L7364'>    Py_DECREF(u);
<a name='L7365'>    Py_DECREF(v);
<a name='L7366'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)w;
<a name='L7367'>
<a name='L7368'>  onError:
<a name='L7369'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(u);
<a name='L7370'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v);
<a name='L7371'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7372'><font color='red'>}</font>
<a name='L7373'>
<a name='L7374'><b>void</b>
<a name='L7375'><a href='../R/3538.html' title='Multiple refered from 2 places.'>PyUnicode_Append</a>(PyObject **pleft, PyObject *right)
<a name='L7376'><font color='red'>{</font>
<a name='L7377'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *new;
<a name='L7378'>    <b>if</b> (*pleft == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L7379'>        <b>return</b>;
<a name='L7380'>    <b>if</b> (right == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyUnicode_Check(*pleft)) <font color='red'>{</font>
<a name='L7381'>        Py_DECREF(*pleft);
<a name='L7382'>        *pleft = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7383'>        <b>return</b>;
<a name='L7384'>    <font color='red'>}</font>
<a name='L7385'>    new = <a href='../D/3969.html' title='Multiple defined in 3 places.'>PyUnicode_Concat</a>(*pleft, right);
<a name='L7386'>    Py_DECREF(*pleft);
<a name='L7387'>    *pleft = new;
<a name='L7388'><font color='red'>}</font>
<a name='L7389'>
<a name='L7390'><b>void</b>
<a name='L7391'><a href='../R/3539.html' title='Multiple refered from 17 places.'>PyUnicode_AppendAndDel</a>(PyObject **pleft, PyObject *right)
<a name='L7392'><font color='red'>{</font>
<a name='L7393'>    <a href='../D/3945.html' title='Multiple defined in 3 places.'>PyUnicode_Append</a>(pleft, right);
<a name='L7394'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(right);
<a name='L7395'><font color='red'>}</font>
<a name='L7396'>
<a name='L7397'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(count__doc__,
<a name='L7398'>             "S.count(sub[, start[, end]]) -&gt; int\n\
<a name='L7399'>\n\
<a name='L7400'>Return the number of non-overlapping occurrences of substring sub in\n\
<a name='L7401'>string S[start:end].  Optional arguments start and end are\n\
<a name='L7402'>interpreted as in slice notation.");
<a name='L7403'>
<a name='L7404'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L7405'><a href='../S/2828.html#L9115' title='Refered from 9115 in Objects/unicodeobject.c.'>unicode_count</a>(PyUnicodeObject *self, PyObject *args)
<a name='L7406'><font color='red'>{</font>
<a name='L7407'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *substring;
<a name='L7408'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start = 0;
<a name='L7409'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end = <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>;
<a name='L7410'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L7411'>
<a name='L7412'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "O|O&amp;O&amp;:count", &amp;substring,
<a name='L7413'>                          <a href='../S/3091.html#L4209' title='Defined at 4209 in Python/ceval.c.'>_PyEval_SliceIndex</a>, &amp;start, <a href='../S/3091.html#L4209' title='Defined at 4209 in Python/ceval.c.'>_PyEval_SliceIndex</a>, &amp;end))
<a name='L7414'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7415'>
<a name='L7416'>    substring = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(
<a name='L7417'>        (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)substring);
<a name='L7418'>    <b>if</b> (substring == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L7419'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7420'>
<a name='L7421'>    <a href='../D/42.html' title='Multiple defined in 4 places.'>ADJUST_INDICES</a>(start, end, self-&gt;length);
<a name='L7422'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(
<a name='L7423'>        stringlib_count(self-&gt;str + start, end - start,
<a name='L7424'>                        substring-&gt;str, substring-&gt;length,
<a name='L7425'>                        <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>)
<a name='L7426'>        );
<a name='L7427'>
<a name='L7428'>    Py_DECREF(substring);
<a name='L7429'>
<a name='L7430'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L7431'><font color='red'>}</font>
<a name='L7432'>
<a name='L7433'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(encode__doc__,
<a name='L7434'>             "S.encode(encoding='utf-8', errors='strict') -&gt; bytes\n\
<a name='L7435'>\n\
<a name='L7436'>Encode S using the codec registered for encoding. Default encoding\n\
<a name='L7437'>is 'utf-8'. errors may be given to set a different error\n\
<a name='L7438'>handling scheme. Default is 'strict' meaning that encoding errors raise\n\
<a name='L7439'>a UnicodeEncodeError. Other possible values are 'ignore', 'replace' and\n\
<a name='L7440'>'xmlcharrefreplace' as well as any other name registered with\n\
<a name='L7441'>codecs.register_error that can handle UnicodeEncodeErrors.");
<a name='L7442'>
<a name='L7443'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L7444'><a href='../S/2828.html#L9107' title='Refered from 9107 in Objects/unicodeobject.c.'>unicode_encode</a>(PyUnicodeObject *self, PyObject *args, PyObject *kwargs)
<a name='L7445'><font color='red'>{</font>
<a name='L7446'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"encoding", "errors", 0<font color='red'>}</font>;
<a name='L7447'>    <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7448'>    <b>char</b> *errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7449'>
<a name='L7450'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwargs, "|ss:encode",
<a name='L7451'>                                     kwlist, &amp;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, &amp;errors))
<a name='L7452'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7453'>    <b>return</b> <a href='../D/3952.html' title='Multiple defined in 3 places.'>PyUnicode_AsEncodedString</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L7454'><font color='red'>}</font>
<a name='L7455'>
<a name='L7456'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(expandtabs__doc__,
<a name='L7457'>             "S.expandtabs([tabsize]) -&gt; str\n\
<a name='L7458'>\n\
<a name='L7459'>Return a copy of S where all tab characters are expanded using spaces.\n\
<a name='L7460'>If tabsize is not given, a tab size of 8 characters is assumed.");
<a name='L7461'>
<a name='L7462'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7463'><a href='../S/2828.html#L9116' title='Refered from 9116 in Objects/unicodeobject.c.'>unicode_expandtabs</a>(PyUnicodeObject *self, PyObject *args)
<a name='L7464'><font color='red'>{</font>
<a name='L7465'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7466'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L7467'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *q;
<a name='L7468'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *qe;
<a name='L7469'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, j, incr;
<a name='L7470'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *u;
<a name='L7471'>    <b>int</b> tabsize = 8;
<a name='L7472'>
<a name='L7473'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|i:expandtabs", &amp;tabsize))
<a name='L7474'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7475'>
<a name='L7476'>    <i><font color='green'>/* First pass: determine size of output string */</font></i>
<a name='L7477'>    i = 0; <i><font color='green'>/* chars up to and including most recent \n or \r */</font></i>
<a name='L7478'>    j = 0; <i><font color='green'>/* chars since most recent \n or \r (use in tab calculations) */</font></i>
<a name='L7479'>    e = self-&gt;str + self-&gt;length; <i><font color='green'>/* end of input */</font></i>
<a name='L7480'>    <b>for</b> (p = self-&gt;str; p &lt; e; p++)
<a name='L7481'>        <b>if</b> (*p == '\t') <font color='red'>{</font>
<a name='L7482'>            <b>if</b> (tabsize &gt; 0) <font color='red'>{</font>
<a name='L7483'>                incr = tabsize - (j % tabsize); <i><font color='green'>/* cannot overflow */</font></i>
<a name='L7484'>                <b>if</b> (j &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - incr)
<a name='L7485'>                    <b>goto</b> overflow1;
<a name='L7486'>                j += incr;
<a name='L7487'>            <font color='red'>}</font>
<a name='L7488'>        <font color='red'>}</font>
<a name='L7489'>        <b>else</b> <font color='red'>{</font>
<a name='L7490'>            <b>if</b> (j &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - 1)
<a name='L7491'>                <b>goto</b> overflow1;
<a name='L7492'>            j++;
<a name='L7493'>            <b>if</b> (*p == '\n' || *p == '\r') <font color='red'>{</font>
<a name='L7494'>                <b>if</b> (i &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - j)
<a name='L7495'>                    <b>goto</b> overflow1;
<a name='L7496'>                i += j;
<a name='L7497'>                j = 0;
<a name='L7498'>            <font color='red'>}</font>
<a name='L7499'>        <font color='red'>}</font>
<a name='L7500'>
<a name='L7501'>    <b>if</b> (i &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - j)
<a name='L7502'>        <b>goto</b> overflow1;
<a name='L7503'>
<a name='L7504'>    <i><font color='green'>/* Second pass: create output string and fill it */</font></i>
<a name='L7505'>    u = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(i + j);
<a name='L7506'>    <b>if</b> (!u)
<a name='L7507'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7508'>
<a name='L7509'>    j = 0; <i><font color='green'>/* same as in first pass */</font></i>
<a name='L7510'>    q = u-&gt;str; <i><font color='green'>/* next output char */</font></i>
<a name='L7511'>    qe = u-&gt;str + u-&gt;length; <i><font color='green'>/* end of output */</font></i>
<a name='L7512'>
<a name='L7513'>    <b>for</b> (p = self-&gt;str; p &lt; e; p++)
<a name='L7514'>        <b>if</b> (*p == '\t') <font color='red'>{</font>
<a name='L7515'>            <b>if</b> (tabsize &gt; 0) <font color='red'>{</font>
<a name='L7516'>                i = tabsize - (j % tabsize);
<a name='L7517'>                j += i;
<a name='L7518'>                <b>while</b> (i--) <font color='red'>{</font>
<a name='L7519'>                    <b>if</b> (q &gt;= qe)
<a name='L7520'>                        <b>goto</b> overflow2;
<a name='L7521'>                    *q++ = ' ';
<a name='L7522'>                <font color='red'>}</font>
<a name='L7523'>            <font color='red'>}</font>
<a name='L7524'>        <font color='red'>}</font>
<a name='L7525'>        <b>else</b> <font color='red'>{</font>
<a name='L7526'>            <b>if</b> (q &gt;= qe)
<a name='L7527'>                <b>goto</b> overflow2;
<a name='L7528'>            *q++ = *p;
<a name='L7529'>            j++;
<a name='L7530'>            <b>if</b> (*p == '\n' || *p == '\r')
<a name='L7531'>                j = 0;
<a name='L7532'>        <font color='red'>}</font>
<a name='L7533'>
<a name='L7534'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) u;
<a name='L7535'>
<a name='L7536'>  overflow2:
<a name='L7537'>    Py_DECREF(u);
<a name='L7538'>  overflow1:
<a name='L7539'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError, "new string is too long");
<a name='L7540'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7541'><font color='red'>}</font>
<a name='L7542'>
<a name='L7543'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(find__doc__,
<a name='L7544'>             "S.find(sub[, start[, end]]) -&gt; int\n\
<a name='L7545'>\n\
<a name='L7546'>Return the lowest index in S where substring sub is found,\n\
<a name='L7547'>such that sub is contained within s[start:end].  Optional\n\
<a name='L7548'>arguments start and end are interpreted as in slice notation.\n\
<a name='L7549'>\n\
<a name='L7550'>Return -1 on failure.");
<a name='L7551'>
<a name='L7552'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L7553'><a href='../S/2828.html#L9117' title='Refered from 9117 in Objects/unicodeobject.c.'>unicode_find</a>(PyUnicodeObject *self, PyObject *args)
<a name='L7554'><font color='red'>{</font>
<a name='L7555'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *substring;
<a name='L7556'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start;
<a name='L7557'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end;
<a name='L7558'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L7559'>
<a name='L7560'>    <b>if</b> (!_ParseTupleFinds(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, &amp;substring, &amp;start, &amp;end))
<a name='L7561'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7562'>
<a name='L7563'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = stringlib_find_slice(
<a name='L7564'>        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self),
<a name='L7565'>        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(substring), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(substring),
<a name='L7566'>        start, end
<a name='L7567'>        );
<a name='L7568'>
<a name='L7569'>    Py_DECREF(substring);
<a name='L7570'>
<a name='L7571'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L7572'><font color='red'>}</font>
<a name='L7573'>
<a name='L7574'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L7575'><a href='../R/11084.html' title='Multiple refered from 2 places.'>unicode_getitem</a>(PyUnicodeObject *self, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> index)
<a name='L7576'><font color='red'>{</font>
<a name='L7577'>    <b>if</b> (index &lt; 0 || index &gt;= self-&gt;length) <font color='red'>{</font>
<a name='L7578'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_IndexError, "string index out of range");
<a name='L7579'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7580'>    <font color='red'>}</font>
<a name='L7581'>
<a name='L7582'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(&amp;self-&gt;str[index], 1);
<a name='L7583'><font color='red'>}</font>
<a name='L7584'>
<a name='L7585'><i><font color='green'>/* Believe it or not, this produces the same value for ASCII strings</font></i>
<a name='L7586'><i><font color='green'>   as string_hash(). */</font></i>
<a name='L7587'><b>static</b> <a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>
<a name='L7588'><a href='../S/2828.html#L9895' title='Refered from 9895 in Objects/unicodeobject.c.'>unicode_hash</a>(PyUnicodeObject *self)
<a name='L7589'><font color='red'>{</font>
<a name='L7590'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L7591'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L7592'>    <a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a> x;
<a name='L7593'>
<a name='L7594'>    <b>if</b> (self-&gt;<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> != -1)
<a name='L7595'>        <b>return</b> self-&gt;<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a>;
<a name='L7596'>    len = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self);
<a name='L7597'>    p = self-&gt;str;
<a name='L7598'>    x = *p &lt;&lt; 7;
<a name='L7599'>    <b>while</b> (--len &gt;= 0)
<a name='L7600'>        x = (1000003*x) ^ *p++;
<a name='L7601'>    x ^= <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(self);
<a name='L7602'>    <b>if</b> (x == -1)
<a name='L7603'>        x = -2;
<a name='L7604'>    self-&gt;<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> = x;
<a name='L7605'>    <b>return</b> x;
<a name='L7606'><font color='red'>}</font>
<a name='L7607'>
<a name='L7608'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(index__doc__,
<a name='L7609'>             "S.index(sub[, start[, end]]) -&gt; int\n\
<a name='L7610'>\n\
<a name='L7611'>Like S.find() but raise ValueError when the substring is not found.");
<a name='L7612'>
<a name='L7613'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L7614'><a href='../S/2828.html#L9119' title='Refered from 9119 in Objects/unicodeobject.c.'>unicode_index</a>(PyUnicodeObject *self, PyObject *args)
<a name='L7615'><font color='red'>{</font>
<a name='L7616'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L7617'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *substring;
<a name='L7618'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start;
<a name='L7619'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end;
<a name='L7620'>
<a name='L7621'>    <b>if</b> (!_ParseTupleFinds(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, &amp;substring, &amp;start, &amp;end))
<a name='L7622'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7623'>
<a name='L7624'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = stringlib_find_slice(
<a name='L7625'>        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self),
<a name='L7626'>        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(substring), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(substring),
<a name='L7627'>        start, end
<a name='L7628'>        );
<a name='L7629'>
<a name='L7630'>    Py_DECREF(substring);
<a name='L7631'>
<a name='L7632'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt; 0) <font color='red'>{</font>
<a name='L7633'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "substring not found");
<a name='L7634'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L7635'>    <font color='red'>}</font>
<a name='L7636'>
<a name='L7637'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L7638'><font color='red'>}</font>
<a name='L7639'>
<a name='L7640'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(islower__doc__,
<a name='L7641'>             "S.islower() -&gt; bool\n\
<a name='L7642'>\n\
<a name='L7643'>Return True if all cased characters in S are lowercase and there is\n\
<a name='L7644'>at least one cased character in S, False otherwise.");
<a name='L7645'>
<a name='L7646'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7647'><a href='../S/2828.html#L9135' title='Refered from 9135 in Objects/unicodeobject.c.'>unicode_islower</a>(PyUnicodeObject *self)
<a name='L7648'><font color='red'>{</font>
<a name='L7649'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7650'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7651'>    <b>int</b> cased;
<a name='L7652'>
<a name='L7653'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7654'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1)
<a name='L7655'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(<a href='../S/587.html#L327' title='Defined at 327 in Include/unicodeobject.h.'>Py_UNICODE_ISLOWER</a>(*p));
<a name='L7656'>
<a name='L7657'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7658'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7659'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7660'>
<a name='L7661'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7662'>    cased = 0;
<a name='L7663'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7664'>        <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *p;
<a name='L7665'>
<a name='L7666'>        <b>if</b> (<a href='../S/587.html#L328' title='Defined at 328 in Include/unicodeobject.h.'>Py_UNICODE_ISUPPER</a>(ch) || <a href='../S/587.html#L329' title='Defined at 329 in Include/unicodeobject.h.'>Py_UNICODE_ISTITLE</a>(ch))
<a name='L7667'>            <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7668'>        <b>else</b> <b>if</b> (!cased &amp;&amp; <a href='../S/587.html#L327' title='Defined at 327 in Include/unicodeobject.h.'>Py_UNICODE_ISLOWER</a>(ch))
<a name='L7669'>            cased = 1;
<a name='L7670'>    <font color='red'>}</font>
<a name='L7671'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(cased);
<a name='L7672'><font color='red'>}</font>
<a name='L7673'>
<a name='L7674'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isupper__doc__,
<a name='L7675'>             "S.isupper() -&gt; bool\n\
<a name='L7676'>\n\
<a name='L7677'>Return True if all cased characters in S are uppercase and there is\n\
<a name='L7678'>at least one cased character in S, False otherwise.");
<a name='L7679'>
<a name='L7680'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7681'><a href='../S/2828.html#L9136' title='Refered from 9136 in Objects/unicodeobject.c.'>unicode_isupper</a>(PyUnicodeObject *self)
<a name='L7682'><font color='red'>{</font>
<a name='L7683'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7684'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7685'>    <b>int</b> cased;
<a name='L7686'>
<a name='L7687'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7688'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1)
<a name='L7689'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(<a href='../S/587.html#L328' title='Defined at 328 in Include/unicodeobject.h.'>Py_UNICODE_ISUPPER</a>(*p) != 0);
<a name='L7690'>
<a name='L7691'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7692'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7693'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7694'>
<a name='L7695'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7696'>    cased = 0;
<a name='L7697'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7698'>        <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *p;
<a name='L7699'>
<a name='L7700'>        <b>if</b> (<a href='../S/587.html#L327' title='Defined at 327 in Include/unicodeobject.h.'>Py_UNICODE_ISLOWER</a>(ch) || <a href='../S/587.html#L329' title='Defined at 329 in Include/unicodeobject.h.'>Py_UNICODE_ISTITLE</a>(ch))
<a name='L7701'>            <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7702'>        <b>else</b> <b>if</b> (!cased &amp;&amp; <a href='../S/587.html#L328' title='Defined at 328 in Include/unicodeobject.h.'>Py_UNICODE_ISUPPER</a>(ch))
<a name='L7703'>            cased = 1;
<a name='L7704'>    <font color='red'>}</font>
<a name='L7705'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(cased);
<a name='L7706'><font color='red'>}</font>
<a name='L7707'>
<a name='L7708'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(istitle__doc__,
<a name='L7709'>             "S.istitle() -&gt; bool\n\
<a name='L7710'>\n\
<a name='L7711'>Return True if S is a titlecased string and there is at least one\n\
<a name='L7712'>character in S, i.e. upper- and titlecase characters may only\n\
<a name='L7713'>follow uncased characters and lowercase characters only cased ones.\n\
<a name='L7714'>Return False otherwise.");
<a name='L7715'>
<a name='L7716'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7717'><a href='../S/2828.html#L9137' title='Refered from 9137 in Objects/unicodeobject.c.'>unicode_istitle</a>(PyUnicodeObject *self)
<a name='L7718'><font color='red'>{</font>
<a name='L7719'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7720'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7721'>    <b>int</b> cased, previous_is_cased;
<a name='L7722'>
<a name='L7723'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7724'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1)
<a name='L7725'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<a href='../S/587.html#L329' title='Defined at 329 in Include/unicodeobject.h.'>Py_UNICODE_ISTITLE</a>(*p) != 0) ||
<a name='L7726'>                               (<a href='../S/587.html#L328' title='Defined at 328 in Include/unicodeobject.h.'>Py_UNICODE_ISUPPER</a>(*p) != 0));
<a name='L7727'>
<a name='L7728'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7729'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7730'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7731'>
<a name='L7732'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7733'>    cased = 0;
<a name='L7734'>    previous_is_cased = 0;
<a name='L7735'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7736'>        <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *p;
<a name='L7737'>
<a name='L7738'>        <b>if</b> (<a href='../S/587.html#L328' title='Defined at 328 in Include/unicodeobject.h.'>Py_UNICODE_ISUPPER</a>(ch) || <a href='../S/587.html#L329' title='Defined at 329 in Include/unicodeobject.h.'>Py_UNICODE_ISTITLE</a>(ch)) <font color='red'>{</font>
<a name='L7739'>            <b>if</b> (previous_is_cased)
<a name='L7740'>                <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7741'>            previous_is_cased = 1;
<a name='L7742'>            cased = 1;
<a name='L7743'>        <font color='red'>}</font>
<a name='L7744'>        <b>else</b> <b>if</b> (<a href='../S/587.html#L327' title='Defined at 327 in Include/unicodeobject.h.'>Py_UNICODE_ISLOWER</a>(ch)) <font color='red'>{</font>
<a name='L7745'>            <b>if</b> (!previous_is_cased)
<a name='L7746'>                <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7747'>            previous_is_cased = 1;
<a name='L7748'>            cased = 1;
<a name='L7749'>        <font color='red'>}</font>
<a name='L7750'>        <b>else</b>
<a name='L7751'>            previous_is_cased = 0;
<a name='L7752'>    <font color='red'>}</font>
<a name='L7753'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(cased);
<a name='L7754'><font color='red'>}</font>
<a name='L7755'>
<a name='L7756'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isspace__doc__,
<a name='L7757'>             "S.isspace() -&gt; bool\n\
<a name='L7758'>\n\
<a name='L7759'>Return True if all characters in S are whitespace\n\
<a name='L7760'>and there is at least one character in S, False otherwise.");
<a name='L7761'>
<a name='L7762'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7763'><a href='../S/2828.html#L9138' title='Refered from 9138 in Objects/unicodeobject.c.'>unicode_isspace</a>(PyUnicodeObject *self)
<a name='L7764'><font color='red'>{</font>
<a name='L7765'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7766'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7767'>
<a name='L7768'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7769'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1 &amp;&amp;
<a name='L7770'>        <a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(*p))
<a name='L7771'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7772'>
<a name='L7773'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7774'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7775'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7776'>
<a name='L7777'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7778'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7779'>        <b>if</b> (!<a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(*p))
<a name='L7780'>            <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7781'>    <font color='red'>}</font>
<a name='L7782'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7783'><font color='red'>}</font>
<a name='L7784'>
<a name='L7785'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isalpha__doc__,
<a name='L7786'>             "S.isalpha() -&gt; bool\n\
<a name='L7787'>\n\
<a name='L7788'>Return True if all characters in S are alphabetic\n\
<a name='L7789'>and there is at least one character in S, False otherwise.");
<a name='L7790'>
<a name='L7791'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7792'><a href='../S/2828.html#L9142' title='Refered from 9142 in Objects/unicodeobject.c.'>unicode_isalpha</a>(PyUnicodeObject *self)
<a name='L7793'><font color='red'>{</font>
<a name='L7794'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7795'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7796'>
<a name='L7797'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7798'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1 &amp;&amp;
<a name='L7799'>        <a href='../S/587.html#L345' title='Defined at 345 in Include/unicodeobject.h.'>Py_UNICODE_ISALPHA</a>(*p))
<a name='L7800'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7801'>
<a name='L7802'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7803'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7804'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7805'>
<a name='L7806'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7807'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7808'>        <b>if</b> (!<a href='../S/587.html#L345' title='Defined at 345 in Include/unicodeobject.h.'>Py_UNICODE_ISALPHA</a>(*p))
<a name='L7809'>            <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7810'>    <font color='red'>}</font>
<a name='L7811'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7812'><font color='red'>}</font>
<a name='L7813'>
<a name='L7814'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isalnum__doc__,
<a name='L7815'>             "S.isalnum() -&gt; bool\n\
<a name='L7816'>\n\
<a name='L7817'>Return True if all characters in S are alphanumeric\n\
<a name='L7818'>and there is at least one character in S, False otherwise.");
<a name='L7819'>
<a name='L7820'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7821'><a href='../S/2828.html#L9143' title='Refered from 9143 in Objects/unicodeobject.c.'>unicode_isalnum</a>(PyUnicodeObject *self)
<a name='L7822'><font color='red'>{</font>
<a name='L7823'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7824'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7825'>
<a name='L7826'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7827'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1 &amp;&amp;
<a name='L7828'>        <a href='../S/587.html#L347' title='Defined at 347 in Include/unicodeobject.h.'>Py_UNICODE_ISALNUM</a>(*p))
<a name='L7829'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7830'>
<a name='L7831'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7832'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7833'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7834'>
<a name='L7835'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7836'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7837'>        <b>if</b> (!<a href='../S/587.html#L347' title='Defined at 347 in Include/unicodeobject.h.'>Py_UNICODE_ISALNUM</a>(*p))
<a name='L7838'>            <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7839'>    <font color='red'>}</font>
<a name='L7840'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7841'><font color='red'>}</font>
<a name='L7842'>
<a name='L7843'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isdecimal__doc__,
<a name='L7844'>             "S.isdecimal() -&gt; bool\n\
<a name='L7845'>\n\
<a name='L7846'>Return True if there are only decimal characters in S,\n\
<a name='L7847'>False otherwise.");
<a name='L7848'>
<a name='L7849'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7850'><a href='../S/2828.html#L9139' title='Refered from 9139 in Objects/unicodeobject.c.'>unicode_isdecimal</a>(PyUnicodeObject *self)
<a name='L7851'><font color='red'>{</font>
<a name='L7852'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7853'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7854'>
<a name='L7855'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7856'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1 &amp;&amp;
<a name='L7857'>        <a href='../S/587.html#L336' title='Defined at 336 in Include/unicodeobject.h.'>Py_UNICODE_ISDECIMAL</a>(*p))
<a name='L7858'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7859'>
<a name='L7860'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7861'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7862'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7863'>
<a name='L7864'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7865'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7866'>        <b>if</b> (!<a href='../S/587.html#L336' title='Defined at 336 in Include/unicodeobject.h.'>Py_UNICODE_ISDECIMAL</a>(*p))
<a name='L7867'>            <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7868'>    <font color='red'>}</font>
<a name='L7869'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7870'><font color='red'>}</font>
<a name='L7871'>
<a name='L7872'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isdigit__doc__,
<a name='L7873'>             "S.isdigit() -&gt; bool\n\
<a name='L7874'>\n\
<a name='L7875'>Return True if all characters in S are digits\n\
<a name='L7876'>and there is at least one character in S, False otherwise.");
<a name='L7877'>
<a name='L7878'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7879'><a href='../S/2828.html#L9140' title='Refered from 9140 in Objects/unicodeobject.c.'>unicode_isdigit</a>(PyUnicodeObject *self)
<a name='L7880'><font color='red'>{</font>
<a name='L7881'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7882'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7883'>
<a name='L7884'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7885'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1 &amp;&amp;
<a name='L7886'>        <a href='../S/587.html#L337' title='Defined at 337 in Include/unicodeobject.h.'>Py_UNICODE_ISDIGIT</a>(*p))
<a name='L7887'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7888'>
<a name='L7889'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7890'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7891'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7892'>
<a name='L7893'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7894'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7895'>        <b>if</b> (!<a href='../S/587.html#L337' title='Defined at 337 in Include/unicodeobject.h.'>Py_UNICODE_ISDIGIT</a>(*p))
<a name='L7896'>            <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7897'>    <font color='red'>}</font>
<a name='L7898'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7899'><font color='red'>}</font>
<a name='L7900'>
<a name='L7901'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isnumeric__doc__,
<a name='L7902'>             "S.isnumeric() -&gt; bool\n\
<a name='L7903'>\n\
<a name='L7904'>Return True if there are only numeric characters in S,\n\
<a name='L7905'>False otherwise.");
<a name='L7906'>
<a name='L7907'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7908'><a href='../S/2828.html#L9141' title='Refered from 9141 in Objects/unicodeobject.c.'>unicode_isnumeric</a>(PyUnicodeObject *self)
<a name='L7909'><font color='red'>{</font>
<a name='L7910'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7911'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7912'>
<a name='L7913'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7914'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1 &amp;&amp;
<a name='L7915'>        <a href='../S/587.html#L338' title='Defined at 338 in Include/unicodeobject.h.'>Py_UNICODE_ISNUMERIC</a>(*p))
<a name='L7916'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7917'>
<a name='L7918'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7919'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7920'>        <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7921'>
<a name='L7922'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7923'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7924'>        <b>if</b> (!<a href='../S/587.html#L338' title='Defined at 338 in Include/unicodeobject.h.'>Py_UNICODE_ISNUMERIC</a>(*p))
<a name='L7925'>            <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(0);
<a name='L7926'>    <font color='red'>}</font>
<a name='L7927'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(1);
<a name='L7928'><font color='red'>}</font>
<a name='L7929'>
<a name='L7930'><b>int</b>
<a name='L7931'><a href='../R/3599.html' title='Multiple refered from 3 places.'>PyUnicode_IsIdentifier</a>(PyObject *self)
<a name='L7932'><font color='red'>{</font>
<a name='L7933'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>*)self);
<a name='L7934'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7935'>
<a name='L7936'>    <i><font color='green'>/* Special case for empty strings */</font></i>
<a name='L7937'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 0)
<a name='L7938'>        <b>return</b> 0;
<a name='L7939'>
<a name='L7940'>    <i><font color='green'>/* PEP 3131 says that the first character must be in</font></i>
<a name='L7941'><i><font color='green'>       XID_Start and subsequent characters in XID_Continue,</font></i>
<a name='L7942'><i><font color='green'>       and for the ASCII range, the 2.x rules apply (i.e</font></i>
<a name='L7943'><i><font color='green'>       start with letters and underscore, continue with</font></i>
<a name='L7944'><i><font color='green'>       letters, digits, underscore). However, given the current</font></i>
<a name='L7945'><i><font color='green'>       definition of XID_Start and XID_Continue, it is sufficient</font></i>
<a name='L7946'><i><font color='green'>       to check just for these, except that _ must be allowed</font></i>
<a name='L7947'><i><font color='green'>       as starting an identifier.  */</font></i>
<a name='L7948'>    <b>if</b> (!<a href='../S/2827.html#L84' title='Defined at 84 in Objects/unicodectype.c.'>_PyUnicode_IsXidStart</a>(*p) &amp;&amp; *p != 0x5F <i><font color='green'>/* LOW LINE */</font></i>)
<a name='L7949'>        <b>return</b> 0;
<a name='L7950'>
<a name='L7951'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7952'>    <b>for</b> (p++; p &lt; e; p++) <font color='red'>{</font>
<a name='L7953'>        <b>if</b> (!<a href='../S/2827.html#L94' title='Defined at 94 in Objects/unicodectype.c.'>_PyUnicode_IsXidContinue</a>(*p))
<a name='L7954'>            <b>return</b> 0;
<a name='L7955'>    <font color='red'>}</font>
<a name='L7956'>    <b>return</b> 1;
<a name='L7957'><font color='red'>}</font>
<a name='L7958'>
<a name='L7959'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isidentifier__doc__,
<a name='L7960'>             "S.isidentifier() -&gt; bool\n\
<a name='L7961'>\n\
<a name='L7962'>Return True if S is a valid identifier according\n\
<a name='L7963'>to the language definition.");
<a name='L7964'>
<a name='L7965'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7966'><a href='../S/2828.html#L9144' title='Refered from 9144 in Objects/unicodeobject.c.'>unicode_isidentifier</a>(PyObject *self)
<a name='L7967'><font color='red'>{</font>
<a name='L7968'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(<a href='../D/4024.html' title='Multiple defined in 3 places.'>PyUnicode_IsIdentifier</a>(self));
<a name='L7969'><font color='red'>}</font>
<a name='L7970'>
<a name='L7971'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(isprintable__doc__,
<a name='L7972'>             "S.isprintable() -&gt; bool\n\
<a name='L7973'>\n\
<a name='L7974'>Return True if all characters in S are considered\n\
<a name='L7975'>printable in repr() or S is empty, False otherwise.");
<a name='L7976'>
<a name='L7977'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L7978'><a href='../S/2828.html#L9145' title='Refered from 9145 in Objects/unicodeobject.c.'>unicode_isprintable</a>(PyObject *self)
<a name='L7979'><font color='red'>{</font>
<a name='L7980'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L7981'>    <b>register</b> <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *e;
<a name='L7982'>
<a name='L7983'>    <i><font color='green'>/* Shortcut for single character strings */</font></i>
<a name='L7984'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self) == 1 &amp;&amp; <a href='../S/587.html#L339' title='Defined at 339 in Include/unicodeobject.h.'>Py_UNICODE_ISPRINTABLE</a>(*p)) <font color='red'>{</font>
<a name='L7985'>        Py_RETURN_TRUE;
<a name='L7986'>    <font color='red'>}</font>
<a name='L7987'>
<a name='L7988'>    e = p + <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L7989'>    <b>for</b> (; p &lt; e; p++) <font color='red'>{</font>
<a name='L7990'>        <b>if</b> (!<a href='../S/587.html#L339' title='Defined at 339 in Include/unicodeobject.h.'>Py_UNICODE_ISPRINTABLE</a>(*p)) <font color='red'>{</font>
<a name='L7991'>            Py_RETURN_FALSE;
<a name='L7992'>        <font color='red'>}</font>
<a name='L7993'>    <font color='red'>}</font>
<a name='L7994'>    Py_RETURN_TRUE;
<a name='L7995'><font color='red'>}</font>
<a name='L7996'>
<a name='L7997'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(join__doc__,
<a name='L7998'>             "S.join(iterable) -&gt; str\n\
<a name='L7999'>\n\
<a name='L8000'>Return a string which is the concatenation of the strings in the\n\
<a name='L8001'>iterable.  The separator between elements is S.");
<a name='L8002'>
<a name='L8003'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8004'><a href='../S/2828.html#L9111' title='Refered from 9111 in Objects/unicodeobject.c.'>unicode_join</a>(PyObject *self, PyObject *data)
<a name='L8005'><font color='red'>{</font>
<a name='L8006'>    <b>return</b> <a href='../D/4025.html' title='Multiple defined in 3 places.'>PyUnicode_Join</a>(self, data);
<a name='L8007'><font color='red'>}</font>
<a name='L8008'>
<a name='L8009'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L8010'><a href='../R/11103.html' title='Multiple refered from 2 places.'>unicode_length</a>(PyUnicodeObject *self)
<a name='L8011'><font color='red'>{</font>
<a name='L8012'>    <b>return</b> self-&gt;length;
<a name='L8013'><font color='red'>}</font>
<a name='L8014'>
<a name='L8015'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(ljust__doc__,
<a name='L8016'>             "S.ljust(width[, fillchar]) -&gt; str\n\
<a name='L8017'>\n\
<a name='L8018'>Return S left-justified in a Unicode string of length width. Padding is\n\
<a name='L8019'>done using the specified fill character (default is a space).");
<a name='L8020'>
<a name='L8021'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8022'><a href='../S/2828.html#L9120' title='Refered from 9120 in Objects/unicodeobject.c.'>unicode_ljust</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8023'><font color='red'>{</font>
<a name='L8024'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> width;
<a name='L8025'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> fillchar = ' ';
<a name='L8026'>
<a name='L8027'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "n|O&amp;:ljust", &amp;width, <a href='../S/2828.html#L7078' title='Defined at 7078 in Objects/unicodeobject.c.'>convert_uc</a>, &amp;fillchar))
<a name='L8028'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8029'>
<a name='L8030'>    <b>if</b> (self-&gt;length &gt;= width &amp;&amp; PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L8031'>        Py_INCREF(self);
<a name='L8032'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self;
<a name='L8033'>    <font color='red'>}</font>
<a name='L8034'>
<a name='L8035'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) <a href='../S/2828.html#L6780' title='Defined at 6780 in Objects/unicodeobject.c.'>pad</a>(self, 0, width - self-&gt;length, fillchar);
<a name='L8036'><font color='red'>}</font>
<a name='L8037'>
<a name='L8038'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(lower__doc__,
<a name='L8039'>             "S.lower() -&gt; str\n\
<a name='L8040'>\n\
<a name='L8041'>Return a copy of the string S converted to lowercase.");
<a name='L8042'>
<a name='L8043'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8044'><a href='../S/2828.html#L9121' title='Refered from 9121 in Objects/unicodeobject.c.'>unicode_lower</a>(PyUnicodeObject *self)
<a name='L8045'><font color='red'>{</font>
<a name='L8046'>    <b>return</b> <a href='../S/2828.html#L6518' title='Defined at 6518 in Objects/unicodeobject.c.'>fixup</a>(self, <a href='../S/2828.html#L6563' title='Defined at 6563 in Objects/unicodeobject.c.'>fixlower</a>);
<a name='L8047'><font color='red'>}</font>
<a name='L8048'>
<a name='L8049'><font color='darkred'>#define</font> <a href='../R/1709.html' title='Multiple refered from 8 places.'>LEFTSTRIP</a> 0
<a name='L8050'><font color='darkred'>#define</font> <a href='../R/3972.html' title='Multiple refered from 8 places.'>RIGHTSTRIP</a> 1
<a name='L8051'><font color='darkred'>#define</font> <a href='../R/282.html' title='Multiple refered from 4 places.'>BOTHSTRIP</a> 2
<a name='L8052'>
<a name='L8053'><i><font color='green'>/* Arrays indexed by above */</font></i>
<a name='L8054'><b>static</b> <b>const</b> <b>char</b> *stripformat[] = <font color='red'>{</font>"|O:lstrip", "|O:rstrip", "|O:strip"<font color='red'>}</font>;
<a name='L8055'>
<a name='L8056'><font color='darkred'>#define</font> <a href='../S/2828.html#L8138' title='Refered from 8138 in Objects/unicodeobject.c.'>STRIPNAME</a>(i) (stripformat[i]+3)
<a name='L8057'>
<a name='L8058'><i><font color='green'>/* externally visible for str.strip(unicode) */</font></i>
<a name='L8059'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8060'><a href='../S/2828.html#L8134' title='Refered from 8134 in Objects/unicodeobject.c.'>_PyUnicode_XStrip</a>(PyUnicodeObject *self, <b>int</b> striptype, PyObject *sepobj)
<a name='L8061'><font color='red'>{</font>
<a name='L8062'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L8063'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L8064'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *sep = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(sepobj);
<a name='L8065'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> seplen = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(sepobj);
<a name='L8066'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, j;
<a name='L8067'>
<a name='L8068'>    <a href='../S/2828.html#L215' title='Defined at 215 in Objects/unicodeobject.c.'>BLOOM_MASK</a> sepmask = make_bloom_mask(sep, seplen);
<a name='L8069'>
<a name='L8070'>    i = 0;
<a name='L8071'>    <b>if</b> (striptype != <a href='../D/4504.html' title='Multiple defined in 2 places.'>RIGHTSTRIP</a>) <font color='red'>{</font>
<a name='L8072'>        <b>while</b> (i &lt; len &amp;&amp; <a href='../S/2828.html#L251' title='Defined at 251 in Objects/unicodeobject.c.'>BLOOM_MEMBER</a>(sepmask, s[i], sep, seplen)) <font color='red'>{</font>
<a name='L8073'>            i++;
<a name='L8074'>        <font color='red'>}</font>
<a name='L8075'>    <font color='red'>}</font>
<a name='L8076'>
<a name='L8077'>    j = len;
<a name='L8078'>    <b>if</b> (striptype != <a href='../D/1902.html' title='Multiple defined in 2 places.'>LEFTSTRIP</a>) <font color='red'>{</font>
<a name='L8079'>        <b>do</b> <font color='red'>{</font>
<a name='L8080'>            j--;
<a name='L8081'>        <font color='red'>}</font> <b>while</b> (j &gt;= i &amp;&amp; <a href='../S/2828.html#L251' title='Defined at 251 in Objects/unicodeobject.c.'>BLOOM_MEMBER</a>(sepmask, s[j], sep, seplen));
<a name='L8082'>        j++;
<a name='L8083'>    <font color='red'>}</font>
<a name='L8084'>
<a name='L8085'>    <b>if</b> (i == 0 &amp;&amp; j == len &amp;&amp; PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L8086'>        Py_INCREF(self);
<a name='L8087'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)self;
<a name='L8088'>    <font color='red'>}</font>
<a name='L8089'>    <b>else</b>
<a name='L8090'>        <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(s+i, j-i);
<a name='L8091'><font color='red'>}</font>
<a name='L8092'>
<a name='L8093'>
<a name='L8094'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8095'><a href='../R/7452.html' title='Multiple refered from 8 places.'>do_strip</a>(PyUnicodeObject *self, <b>int</b> striptype)
<a name='L8096'><font color='red'>{</font>
<a name='L8097'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self);
<a name='L8098'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self), i, j;
<a name='L8099'>
<a name='L8100'>    i = 0;
<a name='L8101'>    <b>if</b> (striptype != <a href='../D/4504.html' title='Multiple defined in 2 places.'>RIGHTSTRIP</a>) <font color='red'>{</font>
<a name='L8102'>        <b>while</b> (i &lt; len &amp;&amp; <a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(s[i])) <font color='red'>{</font>
<a name='L8103'>            i++;
<a name='L8104'>        <font color='red'>}</font>
<a name='L8105'>    <font color='red'>}</font>
<a name='L8106'>
<a name='L8107'>    j = len;
<a name='L8108'>    <b>if</b> (striptype != <a href='../D/1902.html' title='Multiple defined in 2 places.'>LEFTSTRIP</a>) <font color='red'>{</font>
<a name='L8109'>        <b>do</b> <font color='red'>{</font>
<a name='L8110'>            j--;
<a name='L8111'>        <font color='red'>}</font> <b>while</b> (j &gt;= i &amp;&amp; <a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(s[j]));
<a name='L8112'>        j++;
<a name='L8113'>    <font color='red'>}</font>
<a name='L8114'>
<a name='L8115'>    <b>if</b> (i == 0 &amp;&amp; j == len &amp;&amp; PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L8116'>        Py_INCREF(self);
<a name='L8117'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)self;
<a name='L8118'>    <font color='red'>}</font>
<a name='L8119'>    <b>else</b>
<a name='L8120'>        <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(s+i, j-i);
<a name='L8121'><font color='red'>}</font>
<a name='L8122'>
<a name='L8123'>
<a name='L8124'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8125'><a href='../R/7424.html' title='Multiple refered from 6 places.'>do_argstrip</a>(PyUnicodeObject *self, <b>int</b> striptype, PyObject *args)
<a name='L8126'><font color='red'>{</font>
<a name='L8127'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *sep = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8128'>
<a name='L8129'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, (<b>char</b> *)stripformat[striptype], &amp;sep))
<a name='L8130'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8131'>
<a name='L8132'>    <b>if</b> (sep != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; sep != Py_None) <font color='red'>{</font>
<a name='L8133'>        <b>if</b> (PyUnicode_Check(sep))
<a name='L8134'>            <b>return</b> <a href='../S/2828.html#L8060' title='Defined at 8060 in Objects/unicodeobject.c.'>_PyUnicode_XStrip</a>(self, striptype, sep);
<a name='L8135'>        <b>else</b> <font color='red'>{</font>
<a name='L8136'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L8137'>                         "%s arg must be None or str",
<a name='L8138'>                         <a href='../D/5014.html' title='Multiple defined in 2 places.'>STRIPNAME</a>(striptype));
<a name='L8139'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8140'>        <font color='red'>}</font>
<a name='L8141'>    <font color='red'>}</font>
<a name='L8142'>
<a name='L8143'>    <b>return</b> <a href='../S/2828.html#L8095' title='Defined at 8095 in Objects/unicodeobject.c.'>do_strip</a>(self, striptype);
<a name='L8144'><font color='red'>}</font>
<a name='L8145'>
<a name='L8146'>
<a name='L8147'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(strip__doc__,
<a name='L8148'>             "S.strip([chars]) -&gt; str\n\
<a name='L8149'>\n\
<a name='L8150'>Return a copy of the string S with leading and trailing\n\
<a name='L8151'>whitespace removed.\n\
<a name='L8152'>If chars is given and not None, remove characters in chars instead.");
<a name='L8153'>
<a name='L8154'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8155'><a href='../S/2828.html#L9129' title='Refered from 9129 in Objects/unicodeobject.c.'>unicode_strip</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8156'><font color='red'>{</font>
<a name='L8157'>    <b>if</b> (PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) == 0)
<a name='L8158'>        <b>return</b> <a href='../S/2828.html#L8095' title='Defined at 8095 in Objects/unicodeobject.c.'>do_strip</a>(self, <a href='../D/306.html' title='Multiple defined in 2 places.'>BOTHSTRIP</a>); <i><font color='green'>/* Common case */</font></i>
<a name='L8159'>    <b>else</b>
<a name='L8160'>        <b>return</b> <a href='../S/2828.html#L8125' title='Defined at 8125 in Objects/unicodeobject.c.'>do_argstrip</a>(self, <a href='../D/306.html' title='Multiple defined in 2 places.'>BOTHSTRIP</a>, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L8161'><font color='red'>}</font>
<a name='L8162'>
<a name='L8163'>
<a name='L8164'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(lstrip__doc__,
<a name='L8165'>             "S.lstrip([chars]) -&gt; str\n\
<a name='L8166'>\n\
<a name='L8167'>Return a copy of the string S with leading whitespace removed.\n\
<a name='L8168'>If chars is given and not None, remove characters in chars instead.");
<a name='L8169'>
<a name='L8170'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8171'><a href='../S/2828.html#L9122' title='Refered from 9122 in Objects/unicodeobject.c.'>unicode_lstrip</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8172'><font color='red'>{</font>
<a name='L8173'>    <b>if</b> (PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) == 0)
<a name='L8174'>        <b>return</b> <a href='../S/2828.html#L8095' title='Defined at 8095 in Objects/unicodeobject.c.'>do_strip</a>(self, <a href='../D/1902.html' title='Multiple defined in 2 places.'>LEFTSTRIP</a>); <i><font color='green'>/* Common case */</font></i>
<a name='L8175'>    <b>else</b>
<a name='L8176'>        <b>return</b> <a href='../S/2828.html#L8125' title='Defined at 8125 in Objects/unicodeobject.c.'>do_argstrip</a>(self, <a href='../D/1902.html' title='Multiple defined in 2 places.'>LEFTSTRIP</a>, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L8177'><font color='red'>}</font>
<a name='L8178'>
<a name='L8179'>
<a name='L8180'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(rstrip__doc__,
<a name='L8181'>             "S.rstrip([chars]) -&gt; str\n\
<a name='L8182'>\n\
<a name='L8183'>Return a copy of the string S with trailing whitespace removed.\n\
<a name='L8184'>If chars is given and not None, remove characters in chars instead.");
<a name='L8185'>
<a name='L8186'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8187'><a href='../S/2828.html#L9126' title='Refered from 9126 in Objects/unicodeobject.c.'>unicode_rstrip</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8188'><font color='red'>{</font>
<a name='L8189'>    <b>if</b> (PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) == 0)
<a name='L8190'>        <b>return</b> <a href='../S/2828.html#L8095' title='Defined at 8095 in Objects/unicodeobject.c.'>do_strip</a>(self, <a href='../D/4504.html' title='Multiple defined in 2 places.'>RIGHTSTRIP</a>); <i><font color='green'>/* Common case */</font></i>
<a name='L8191'>    <b>else</b>
<a name='L8192'>        <b>return</b> <a href='../S/2828.html#L8125' title='Defined at 8125 in Objects/unicodeobject.c.'>do_argstrip</a>(self, <a href='../D/4504.html' title='Multiple defined in 2 places.'>RIGHTSTRIP</a>, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L8193'><font color='red'>}</font>
<a name='L8194'>
<a name='L8195'>
<a name='L8196'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8197'><a href='../S/2828.html#L9187' title='Refered from 9187 in Objects/unicodeobject.c.'>unicode_repeat</a>(PyUnicodeObject *str, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len)
<a name='L8198'><font color='red'>{</font>
<a name='L8199'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *u;
<a name='L8200'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L8201'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nchars;
<a name='L8202'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> nbytes;
<a name='L8203'>
<a name='L8204'>    <b>if</b> (len &lt; 1) <font color='red'>{</font>
<a name='L8205'>        Py_INCREF(unicode_empty);
<a name='L8206'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)unicode_empty;
<a name='L8207'>    <font color='red'>}</font>
<a name='L8208'>
<a name='L8209'>    <b>if</b> (len == 1 &amp;&amp; PyUnicode_CheckExact(str)) <font color='red'>{</font>
<a name='L8210'>        <i><font color='green'>/* no repeat, return original string */</font></i>
<a name='L8211'>        Py_INCREF(str);
<a name='L8212'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) str;
<a name='L8213'>    <font color='red'>}</font>
<a name='L8214'>
<a name='L8215'>    <i><font color='green'>/* ensure # of chars needed doesn't overflow int and # of bytes</font></i>
<a name='L8216'><i><font color='green'>     * needed doesn't overflow size_t</font></i>
<a name='L8217'><i><font color='green'>     */</font></i>
<a name='L8218'>    nchars = len * str-&gt;length;
<a name='L8219'>    <b>if</b> (nchars / len != str-&gt;length) <font color='red'>{</font>
<a name='L8220'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L8221'>                        "repeated string is too long");
<a name='L8222'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8223'>    <font color='red'>}</font>
<a name='L8224'>    nbytes = (nchars + 1) * <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>);
<a name='L8225'>    <b>if</b> (nbytes / <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) != (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)(nchars + 1)) <font color='red'>{</font>
<a name='L8226'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L8227'>                        "repeated string is too long");
<a name='L8228'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8229'>    <font color='red'>}</font>
<a name='L8230'>    u = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(nchars);
<a name='L8231'>    <b>if</b> (!u)
<a name='L8232'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8233'>
<a name='L8234'>    p = u-&gt;str;
<a name='L8235'>
<a name='L8236'>    <b>if</b> (str-&gt;length == 1) <font color='red'>{</font>
<a name='L8237'>        <a href='../S/587.html#L356' title='Defined at 356 in Include/unicodeobject.h.'>Py_UNICODE_FILL</a>(p, str-&gt;str[0], len);
<a name='L8238'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L8239'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> done = str-&gt;length; <i><font color='green'>/* number of characters copied this far */</font></i>
<a name='L8240'>        <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(p, str-&gt;str, str-&gt;length);
<a name='L8241'>        <b>while</b> (done &lt; nchars) <font color='red'>{</font>
<a name='L8242'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = (done &lt;= nchars-done) ? done : nchars-done;
<a name='L8243'>            <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(p+done, p, n);
<a name='L8244'>            done += n;
<a name='L8245'>        <font color='red'>}</font>
<a name='L8246'>    <font color='red'>}</font>
<a name='L8247'>
<a name='L8248'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) u;
<a name='L8249'><font color='red'>}</font>
<a name='L8250'>
<a name='L8251'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2574.html#L126' title='Refered from 126 in Modules/_io/stringio.c.'>PyUnicode_Replace</a>(PyObject *obj,
<a name='L8252'>                            PyObject *subobj,
<a name='L8253'>                            PyObject *replobj,
<a name='L8254'>                            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxcount)
<a name='L8255'><font color='red'>{</font>
<a name='L8256'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *self;
<a name='L8257'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str1;
<a name='L8258'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str2;
<a name='L8259'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8260'>
<a name='L8261'>    self = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(obj);
<a name='L8262'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L8263'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8264'>    str1 = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(subobj);
<a name='L8265'>    <b>if</b> (str1 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8266'>        Py_DECREF(self);
<a name='L8267'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8268'>    <font color='red'>}</font>
<a name='L8269'>    str2 = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(replobj);
<a name='L8270'>    <b>if</b> (str2 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8271'>        Py_DECREF(self);
<a name='L8272'>        Py_DECREF(str1);
<a name='L8273'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8274'>    <font color='red'>}</font>
<a name='L8275'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6871' title='Defined at 6871 in Objects/unicodeobject.c.'>replace</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)self,
<a name='L8276'>                     (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)str1,
<a name='L8277'>                     (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)str2,
<a name='L8278'>                     maxcount);
<a name='L8279'>    Py_DECREF(self);
<a name='L8280'>    Py_DECREF(str1);
<a name='L8281'>    Py_DECREF(str2);
<a name='L8282'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8283'><font color='red'>}</font>
<a name='L8284'>
<a name='L8285'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(replace__doc__,
<a name='L8286'>             "S.replace(old, new[, count]) -&gt; str\n\
<a name='L8287'>\n\
<a name='L8288'>Return a copy of S with all occurrences of substring\n\
<a name='L8289'>old replaced by new.  If the optional argument count is\n\
<a name='L8290'>given, only the first count occurrences are replaced.");
<a name='L8291'>
<a name='L8292'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8293'><a href='../S/2828.html#L9108' title='Refered from 9108 in Objects/unicodeobject.c.'>unicode_replace</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8294'><font color='red'>{</font>
<a name='L8295'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *str1;
<a name='L8296'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *str2;
<a name='L8297'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxcount = -1;
<a name='L8298'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8299'>
<a name='L8300'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "OO|n:replace", &amp;str1, &amp;str2, &amp;maxcount))
<a name='L8301'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8302'>    str1 = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)str1);
<a name='L8303'>    <b>if</b> (str1 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L8304'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8305'>    str2 = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)str2);
<a name='L8306'>    <b>if</b> (str2 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8307'>        Py_DECREF(str1);
<a name='L8308'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8309'>    <font color='red'>}</font>
<a name='L8310'>
<a name='L8311'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6871' title='Defined at 6871 in Objects/unicodeobject.c.'>replace</a>(self, str1, str2, maxcount);
<a name='L8312'>
<a name='L8313'>    Py_DECREF(str1);
<a name='L8314'>    Py_DECREF(str2);
<a name='L8315'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8316'><font color='red'>}</font>
<a name='L8317'>
<a name='L8318'><b>static</b>
<a name='L8319'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2828.html#L9891' title='Refered from 9891 in Objects/unicodeobject.c.'>unicode_repr</a>(PyObject *unicode)
<a name='L8320'><font color='red'>{</font>
<a name='L8321'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *repr;
<a name='L8322'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L8323'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *s = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode);
<a name='L8324'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode);
<a name='L8325'>
<a name='L8326'>    <i><font color='green'>/* XXX(nnorwitz): rather than over-allocating, it would be</font></i>
<a name='L8327'><i><font color='green'>       better to choose a different scheme.  Perhaps scan the</font></i>
<a name='L8328'><i><font color='green'>       first N-chars of the string and allocate based on that size.</font></i>
<a name='L8329'><i><font color='green'>    */</font></i>
<a name='L8330'>    <i><font color='green'>/* Initial allocation is based on the longest-possible unichr</font></i>
<a name='L8331'><i><font color='green'>       escape.</font></i>
<a name='L8332'><i><font color='green'></font></i>
<a name='L8333'><i><font color='green'>       In wide (UTF-32) builds '\U00xxxxxx' is 10 chars per source</font></i>
<a name='L8334'><i><font color='green'>       unichr, so in this case it's the longest unichr escape. In</font></i>
<a name='L8335'><i><font color='green'>       narrow (UTF-16) builds this is five chars per source unichr</font></i>
<a name='L8336'><i><font color='green'>       since there are two unichrs in the surrogate pair, so in narrow</font></i>
<a name='L8337'><i><font color='green'>       (UTF-16) builds it's not the longest unichr escape.</font></i>
<a name='L8338'><i><font color='green'></font></i>
<a name='L8339'><i><font color='green'>       In wide or narrow builds '\uxxxx' is 6 chars per source unichr,</font></i>
<a name='L8340'><i><font color='green'>       so in the narrow (UTF-16) build case it's the longest unichr</font></i>
<a name='L8341'><i><font color='green'>       escape.</font></i>
<a name='L8342'><i><font color='green'>    */</font></i>
<a name='L8343'>
<a name='L8344'>    repr = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L8345'>                                 2 <i><font color='green'>/* quotes */</font></i>
<a name='L8346'><font color='darkred'>#ifdef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L8347'>                                 + 10*size
<a name='L8348'><font color='darkred'>#else</font>
<a name='L8349'>                                 + 6*size
<a name='L8350'><font color='darkred'>#endif</font>
<a name='L8351'>                                 + 1);
<a name='L8352'>    <b>if</b> (repr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L8353'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8354'>
<a name='L8355'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repr);
<a name='L8356'>
<a name='L8357'>    <i><font color='green'>/* Add quote */</font></i>
<a name='L8358'>    *p++ = (<a href='../D/8607.html' title='Multiple defined in 2 places.'>findchar</a>(s, size, '\'') &amp;&amp;
<a name='L8359'>            !<a href='../D/8607.html' title='Multiple defined in 2 places.'>findchar</a>(s, size, '"')) ? '"' : '\'';
<a name='L8360'>    <b>while</b> (size-- &gt; 0) <font color='red'>{</font>
<a name='L8361'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = *s++;
<a name='L8362'>
<a name='L8363'>        <i><font color='green'>/* Escape quotes and backslashes */</font></i>
<a name='L8364'>        <b>if</b> ((ch == <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repr)[0]) || (ch == '\\')) <font color='red'>{</font>
<a name='L8365'>            *p++ = '\\';
<a name='L8366'>            *p++ = ch;
<a name='L8367'>            <b>continue</b>;
<a name='L8368'>        <font color='red'>}</font>
<a name='L8369'>
<a name='L8370'>        <i><font color='green'>/* Map special whitespace to '\t', \n', '\r' */</font></i>
<a name='L8371'>        <b>if</b> (ch == '\t') <font color='red'>{</font>
<a name='L8372'>            *p++ = '\\';
<a name='L8373'>            *p++ = 't';
<a name='L8374'>        <font color='red'>}</font>
<a name='L8375'>        <b>else</b> <b>if</b> (ch == '\n') <font color='red'>{</font>
<a name='L8376'>            *p++ = '\\';
<a name='L8377'>            *p++ = 'n';
<a name='L8378'>        <font color='red'>}</font>
<a name='L8379'>        <b>else</b> <b>if</b> (ch == '\r') <font color='red'>{</font>
<a name='L8380'>            *p++ = '\\';
<a name='L8381'>            *p++ = 'r';
<a name='L8382'>        <font color='red'>}</font>
<a name='L8383'>
<a name='L8384'>        <i><font color='green'>/* Map non-printable US ASCII to '\xhh' */</font></i>
<a name='L8385'>        <b>else</b> <b>if</b> (ch &lt; ' ' || ch == 0x7F) <font color='red'>{</font>
<a name='L8386'>            *p++ = '\\';
<a name='L8387'>            *p++ = 'x';
<a name='L8388'>            *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0x000F];
<a name='L8389'>            *p++ = hexdigits[ch &amp; 0x000F];
<a name='L8390'>        <font color='red'>}</font>
<a name='L8391'>
<a name='L8392'>        <i><font color='green'>/* Copy ASCII characters as-is */</font></i>
<a name='L8393'>        <b>else</b> <b>if</b> (ch &lt; 0x7F) <font color='red'>{</font>
<a name='L8394'>            *p++ = ch;
<a name='L8395'>        <font color='red'>}</font>
<a name='L8396'>
<a name='L8397'>        <i><font color='green'>/* Non-ASCII characters */</font></i>
<a name='L8398'>        <b>else</b> <font color='red'>{</font>
<a name='L8399'>            <a href='../D/4261.html' title='Multiple defined in 2 places.'>Py_UCS4</a> ucs = ch;
<a name='L8400'>
<a name='L8401'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L8402'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch2 = 0;
<a name='L8403'>            <i><font color='green'>/* Get code point from surrogate pair */</font></i>
<a name='L8404'>            <b>if</b> (size &gt; 0) <font color='red'>{</font>
<a name='L8405'>                ch2 = *s;
<a name='L8406'>                <b>if</b> (ch &gt;= 0xD800 &amp;&amp; ch &lt; 0xDC00 &amp;&amp; ch2 &gt;= 0xDC00
<a name='L8407'>                    &amp;&amp; ch2 &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L8408'>                    ucs = (((ch &amp; 0x03FF) &lt;&lt; 10) | (ch2 &amp; 0x03FF))
<a name='L8409'>                        + 0x00010000;
<a name='L8410'>                    s++;
<a name='L8411'>                    size--;
<a name='L8412'>                <font color='red'>}</font>
<a name='L8413'>            <font color='red'>}</font>
<a name='L8414'><font color='darkred'>#endif</font>
<a name='L8415'>            <i><font color='green'>/* Map Unicode whitespace and control characters</font></i>
<a name='L8416'><i><font color='green'>               (categories Z* and C* except ASCII space)</font></i>
<a name='L8417'><i><font color='green'>            */</font></i>
<a name='L8418'>            <b>if</b> (!<a href='../S/587.html#L339' title='Defined at 339 in Include/unicodeobject.h.'>Py_UNICODE_ISPRINTABLE</a>(ucs)) <font color='red'>{</font>
<a name='L8419'>                <i><font color='green'>/* Map 8-bit characters to '\xhh' */</font></i>
<a name='L8420'>                <b>if</b> (ucs &lt;= 0xff) <font color='red'>{</font>
<a name='L8421'>                    *p++ = '\\';
<a name='L8422'>                    *p++ = 'x';
<a name='L8423'>                    *p++ = hexdigits[(ch &gt;&gt; 4) &amp; 0x000F];
<a name='L8424'>                    *p++ = hexdigits[ch &amp; 0x000F];
<a name='L8425'>                <font color='red'>}</font>
<a name='L8426'>                <i><font color='green'>/* Map 21-bit characters to '\U00xxxxxx' */</font></i>
<a name='L8427'>                <b>else</b> <b>if</b> (ucs &gt;= 0x10000) <font color='red'>{</font>
<a name='L8428'>                    *p++ = '\\';
<a name='L8429'>                    *p++ = 'U';
<a name='L8430'>                    *p++ = hexdigits[(ucs &gt;&gt; 28) &amp; 0x0000000F];
<a name='L8431'>                    *p++ = hexdigits[(ucs &gt;&gt; 24) &amp; 0x0000000F];
<a name='L8432'>                    *p++ = hexdigits[(ucs &gt;&gt; 20) &amp; 0x0000000F];
<a name='L8433'>                    *p++ = hexdigits[(ucs &gt;&gt; 16) &amp; 0x0000000F];
<a name='L8434'>                    *p++ = hexdigits[(ucs &gt;&gt; 12) &amp; 0x0000000F];
<a name='L8435'>                    *p++ = hexdigits[(ucs &gt;&gt; 8) &amp; 0x0000000F];
<a name='L8436'>                    *p++ = hexdigits[(ucs &gt;&gt; 4) &amp; 0x0000000F];
<a name='L8437'>                    *p++ = hexdigits[ucs &amp; 0x0000000F];
<a name='L8438'>                <font color='red'>}</font>
<a name='L8439'>                <i><font color='green'>/* Map 16-bit characters to '\uxxxx' */</font></i>
<a name='L8440'>                <b>else</b> <font color='red'>{</font>
<a name='L8441'>                    *p++ = '\\';
<a name='L8442'>                    *p++ = 'u';
<a name='L8443'>                    *p++ = hexdigits[(ucs &gt;&gt; 12) &amp; 0x000F];
<a name='L8444'>                    *p++ = hexdigits[(ucs &gt;&gt; 8) &amp; 0x000F];
<a name='L8445'>                    *p++ = hexdigits[(ucs &gt;&gt; 4) &amp; 0x000F];
<a name='L8446'>                    *p++ = hexdigits[ucs &amp; 0x000F];
<a name='L8447'>                <font color='red'>}</font>
<a name='L8448'>            <font color='red'>}</font>
<a name='L8449'>            <i><font color='green'>/* Copy characters as-is */</font></i>
<a name='L8450'>            <b>else</b> <font color='red'>{</font>
<a name='L8451'>                *p++ = ch;
<a name='L8452'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L8453'>                <b>if</b> (ucs &gt;= 0x10000)
<a name='L8454'>                    *p++ = ch2;
<a name='L8455'><font color='darkred'>#endif</font>
<a name='L8456'>            <font color='red'>}</font>
<a name='L8457'>        <font color='red'>}</font>
<a name='L8458'>    <font color='red'>}</font>
<a name='L8459'>    <i><font color='green'>/* Add quote */</font></i>
<a name='L8460'>    *p++ = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repr)[0];
<a name='L8461'>
<a name='L8462'>    *p = '\0';
<a name='L8463'>    <a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(&amp;repr, p - <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(repr));
<a name='L8464'>    <b>return</b> repr;
<a name='L8465'><font color='red'>}</font>
<a name='L8466'>
<a name='L8467'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(rfind__doc__,
<a name='L8468'>             "S.rfind(sub[, start[, end]]) -&gt; int\n\
<a name='L8469'>\n\
<a name='L8470'>Return the highest index in S where substring sub is found,\n\
<a name='L8471'>such that sub is contained within s[start:end].  Optional\n\
<a name='L8472'>arguments start and end are interpreted as in slice notation.\n\
<a name='L8473'>\n\
<a name='L8474'>Return -1 on failure.");
<a name='L8475'>
<a name='L8476'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8477'><a href='../S/2828.html#L9123' title='Refered from 9123 in Objects/unicodeobject.c.'>unicode_rfind</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8478'><font color='red'>{</font>
<a name='L8479'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *substring;
<a name='L8480'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start;
<a name='L8481'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end;
<a name='L8482'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8483'>
<a name='L8484'>    <b>if</b> (!_ParseTupleFinds(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, &amp;substring, &amp;start, &amp;end))
<a name='L8485'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8486'>
<a name='L8487'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = stringlib_rfind_slice(
<a name='L8488'>        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self),
<a name='L8489'>        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(substring), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(substring),
<a name='L8490'>        start, end
<a name='L8491'>        );
<a name='L8492'>
<a name='L8493'>    Py_DECREF(substring);
<a name='L8494'>
<a name='L8495'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L8496'><font color='red'>}</font>
<a name='L8497'>
<a name='L8498'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(rindex__doc__,
<a name='L8499'>             "S.rindex(sub[, start[, end]]) -&gt; int\n\
<a name='L8500'>\n\
<a name='L8501'>Like S.rfind() but raise ValueError when the substring is not found.");
<a name='L8502'>
<a name='L8503'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8504'><a href='../S/2828.html#L9124' title='Refered from 9124 in Objects/unicodeobject.c.'>unicode_rindex</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8505'><font color='red'>{</font>
<a name='L8506'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *substring;
<a name='L8507'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start;
<a name='L8508'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end;
<a name='L8509'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8510'>
<a name='L8511'>    <b>if</b> (!_ParseTupleFinds(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, &amp;substring, &amp;start, &amp;end))
<a name='L8512'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8513'>
<a name='L8514'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = stringlib_rfind_slice(
<a name='L8515'>        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self),
<a name='L8516'>        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(substring), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(substring),
<a name='L8517'>        start, end
<a name='L8518'>        );
<a name='L8519'>
<a name='L8520'>    Py_DECREF(substring);
<a name='L8521'>
<a name='L8522'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt; 0) <font color='red'>{</font>
<a name='L8523'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "substring not found");
<a name='L8524'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8525'>    <font color='red'>}</font>
<a name='L8526'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L8527'><font color='red'>}</font>
<a name='L8528'>
<a name='L8529'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(rjust__doc__,
<a name='L8530'>             "S.rjust(width[, fillchar]) -&gt; str\n\
<a name='L8531'>\n\
<a name='L8532'>Return S right-justified in a string of length width. Padding is\n\
<a name='L8533'>done using the specified fill character (default is a space).");
<a name='L8534'>
<a name='L8535'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8536'><a href='../S/2828.html#L9125' title='Refered from 9125 in Objects/unicodeobject.c.'>unicode_rjust</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8537'><font color='red'>{</font>
<a name='L8538'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> width;
<a name='L8539'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> fillchar = ' ';
<a name='L8540'>
<a name='L8541'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "n|O&amp;:rjust", &amp;width, <a href='../S/2828.html#L7078' title='Defined at 7078 in Objects/unicodeobject.c.'>convert_uc</a>, &amp;fillchar))
<a name='L8542'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8543'>
<a name='L8544'>    <b>if</b> (self-&gt;length &gt;= width &amp;&amp; PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L8545'>        Py_INCREF(self);
<a name='L8546'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self;
<a name='L8547'>    <font color='red'>}</font>
<a name='L8548'>
<a name='L8549'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) <a href='../S/2828.html#L6780' title='Defined at 6780 in Objects/unicodeobject.c.'>pad</a>(self, width - self-&gt;length, 0, fillchar);
<a name='L8550'><font color='red'>}</font>
<a name='L8551'>
<a name='L8552'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2828.html#L8599' title='Refered from 8599 in Objects/unicodeobject.c.'>PyUnicode_Split</a>(PyObject *s,
<a name='L8553'>                          PyObject *sep,
<a name='L8554'>                          <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxsplit)
<a name='L8555'><font color='red'>{</font>
<a name='L8556'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8557'>
<a name='L8558'>    s = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(s);
<a name='L8559'>    <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L8560'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8561'>    <b>if</b> (sep != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8562'>        sep = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(sep);
<a name='L8563'>        <b>if</b> (sep == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8564'>            Py_DECREF(s);
<a name='L8565'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8566'>        <font color='red'>}</font>
<a name='L8567'>    <font color='red'>}</font>
<a name='L8568'>
<a name='L8569'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6831' title='Defined at 6831 in Objects/unicodeobject.c.'>split</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)s, (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)sep, maxsplit);
<a name='L8570'>
<a name='L8571'>    Py_DECREF(s);
<a name='L8572'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(sep);
<a name='L8573'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8574'><font color='red'>}</font>
<a name='L8575'>
<a name='L8576'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(split__doc__,
<a name='L8577'>             "S.split([sep[, maxsplit]]) -&gt; list of strings\n\
<a name='L8578'>\n\
<a name='L8579'>Return a list of the words in S, using sep as the\n\
<a name='L8580'>delimiter string.  If maxsplit is given, at most maxsplit\n\
<a name='L8581'>splits are done. If sep is not specified or is None, any\n\
<a name='L8582'>whitespace string is a separator and empty strings are\n\
<a name='L8583'>removed from the result.");
<a name='L8584'>
<a name='L8585'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8586'><a href='../S/2828.html#L9109' title='Refered from 9109 in Objects/unicodeobject.c.'>unicode_split</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8587'><font color='red'>{</font>
<a name='L8588'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *substring = Py_None;
<a name='L8589'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxcount = -1;
<a name='L8590'>
<a name='L8591'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|On:split", &amp;substring, &amp;maxcount))
<a name='L8592'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8593'>
<a name='L8594'>    <b>if</b> (substring == Py_None)
<a name='L8595'>        <b>return</b> <a href='../S/2828.html#L6831' title='Defined at 6831 in Objects/unicodeobject.c.'>split</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, maxcount);
<a name='L8596'>    <b>else</b> <b>if</b> (PyUnicode_Check(substring))
<a name='L8597'>        <b>return</b> <a href='../S/2828.html#L6831' title='Defined at 6831 in Objects/unicodeobject.c.'>split</a>(self, (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)substring, maxcount);
<a name='L8598'>    <b>else</b>
<a name='L8599'>        <b>return</b> <a href='../D/4033.html' title='Multiple defined in 3 places.'>PyUnicode_Split</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, substring, maxcount);
<a name='L8600'><font color='red'>}</font>
<a name='L8601'>
<a name='L8602'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8603'><a href='../S/2828.html#L8667' title='Refered from 8667 in Objects/unicodeobject.c.'>PyUnicode_Partition</a>(PyObject *str_in, PyObject *sep_in)
<a name='L8604'><font color='red'>{</font>
<a name='L8605'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* str_obj;
<a name='L8606'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* sep_obj;
<a name='L8607'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* out;
<a name='L8608'>
<a name='L8609'>    str_obj = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(str_in);
<a name='L8610'>    <b>if</b> (!str_obj)
<a name='L8611'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8612'>    sep_obj = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(sep_in);
<a name='L8613'>    <b>if</b> (!sep_obj) <font color='red'>{</font>
<a name='L8614'>        Py_DECREF(str_obj);
<a name='L8615'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8616'>    <font color='red'>}</font>
<a name='L8617'>
<a name='L8618'>    out = stringlib_partition(
<a name='L8619'>        str_obj, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str_obj), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(str_obj),
<a name='L8620'>        sep_obj, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(sep_obj), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(sep_obj)
<a name='L8621'>        );
<a name='L8622'>
<a name='L8623'>    Py_DECREF(sep_obj);
<a name='L8624'>    Py_DECREF(str_obj);
<a name='L8625'>
<a name='L8626'>    <b>return</b> out;
<a name='L8627'><font color='red'>}</font>
<a name='L8628'>
<a name='L8629'>
<a name='L8630'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8631'><a href='../S/2828.html#L8680' title='Refered from 8680 in Objects/unicodeobject.c.'>PyUnicode_RPartition</a>(PyObject *str_in, PyObject *sep_in)
<a name='L8632'><font color='red'>{</font>
<a name='L8633'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* str_obj;
<a name='L8634'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* sep_obj;
<a name='L8635'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* out;
<a name='L8636'>
<a name='L8637'>    str_obj = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(str_in);
<a name='L8638'>    <b>if</b> (!str_obj)
<a name='L8639'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8640'>    sep_obj = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(sep_in);
<a name='L8641'>    <b>if</b> (!sep_obj) <font color='red'>{</font>
<a name='L8642'>        Py_DECREF(str_obj);
<a name='L8643'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8644'>    <font color='red'>}</font>
<a name='L8645'>
<a name='L8646'>    out = stringlib_rpartition(
<a name='L8647'>        str_obj, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str_obj), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(str_obj),
<a name='L8648'>        sep_obj, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(sep_obj), <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(sep_obj)
<a name='L8649'>        );
<a name='L8650'>
<a name='L8651'>    Py_DECREF(sep_obj);
<a name='L8652'>    Py_DECREF(str_obj);
<a name='L8653'>
<a name='L8654'>    <b>return</b> out;
<a name='L8655'><font color='red'>}</font>
<a name='L8656'>
<a name='L8657'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(partition__doc__,
<a name='L8658'>             "S.partition(sep) -&gt; (head, sep, tail)\n\
<a name='L8659'>\n\
<a name='L8660'>Search for the separator sep in S, and return the part before it,\n\
<a name='L8661'>the separator itself, and the part after it.  If the separator is not\n\
<a name='L8662'>found, return S and two empty strings.");
<a name='L8663'>
<a name='L8664'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8665'><a href='../S/2828.html#L9118' title='Refered from 9118 in Objects/unicodeobject.c.'>unicode_partition</a>(PyUnicodeObject *self, PyObject *separator)
<a name='L8666'><font color='red'>{</font>
<a name='L8667'>    <b>return</b> <a href='../D/4027.html' title='Multiple defined in 3 places.'>PyUnicode_Partition</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, separator);
<a name='L8668'><font color='red'>}</font>
<a name='L8669'>
<a name='L8670'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(rpartition__doc__,
<a name='L8671'>             "S.rpartition(sep) -&gt; (head, sep, tail)\n\
<a name='L8672'>\n\
<a name='L8673'>Search for the separator sep in S, starting at the end of S, and return\n\
<a name='L8674'>the part before it, the separator itself, and the part after it.  If the\n\
<a name='L8675'>separator is not found, return two empty strings and S.");
<a name='L8676'>
<a name='L8677'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8678'><a href='../S/2828.html#L9127' title='Refered from 9127 in Objects/unicodeobject.c.'>unicode_rpartition</a>(PyUnicodeObject *self, PyObject *separator)
<a name='L8679'><font color='red'>{</font>
<a name='L8680'>    <b>return</b> <a href='../D/4028.html' title='Multiple defined in 3 places.'>PyUnicode_RPartition</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, separator);
<a name='L8681'><font color='red'>}</font>
<a name='L8682'>
<a name='L8683'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2828.html#L8730' title='Refered from 8730 in Objects/unicodeobject.c.'>PyUnicode_RSplit</a>(PyObject *s,
<a name='L8684'>                           PyObject *sep,
<a name='L8685'>                           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxsplit)
<a name='L8686'><font color='red'>{</font>
<a name='L8687'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8688'>
<a name='L8689'>    s = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(s);
<a name='L8690'>    <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L8691'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8692'>    <b>if</b> (sep != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8693'>        sep = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(sep);
<a name='L8694'>        <b>if</b> (sep == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8695'>            Py_DECREF(s);
<a name='L8696'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8697'>        <font color='red'>}</font>
<a name='L8698'>    <font color='red'>}</font>
<a name='L8699'>
<a name='L8700'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6851' title='Defined at 6851 in Objects/unicodeobject.c.'>rsplit</a>((<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)s, (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)sep, maxsplit);
<a name='L8701'>
<a name='L8702'>    Py_DECREF(s);
<a name='L8703'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(sep);
<a name='L8704'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8705'><font color='red'>}</font>
<a name='L8706'>
<a name='L8707'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(rsplit__doc__,
<a name='L8708'>             "S.rsplit([sep[, maxsplit]]) -&gt; list of strings\n\
<a name='L8709'>\n\
<a name='L8710'>Return a list of the words in S, using sep as the\n\
<a name='L8711'>delimiter string, starting at the end of the string and\n\
<a name='L8712'>working to the front.  If maxsplit is given, at most maxsplit\n\
<a name='L8713'>splits are done. If sep is not specified, any whitespace string\n\
<a name='L8714'>is a separator.");
<a name='L8715'>
<a name='L8716'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8717'><a href='../S/2828.html#L9110' title='Refered from 9110 in Objects/unicodeobject.c.'>unicode_rsplit</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8718'><font color='red'>{</font>
<a name='L8719'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *substring = Py_None;
<a name='L8720'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> maxcount = -1;
<a name='L8721'>
<a name='L8722'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|On:rsplit", &amp;substring, &amp;maxcount))
<a name='L8723'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8724'>
<a name='L8725'>    <b>if</b> (substring == Py_None)
<a name='L8726'>        <b>return</b> <a href='../S/2828.html#L6851' title='Defined at 6851 in Objects/unicodeobject.c.'>rsplit</a>(self, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, maxcount);
<a name='L8727'>    <b>else</b> <b>if</b> (PyUnicode_Check(substring))
<a name='L8728'>        <b>return</b> <a href='../S/2828.html#L6851' title='Defined at 6851 in Objects/unicodeobject.c.'>rsplit</a>(self, (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)substring, maxcount);
<a name='L8729'>    <b>else</b>
<a name='L8730'>        <b>return</b> <a href='../D/4029.html' title='Multiple defined in 3 places.'>PyUnicode_RSplit</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, substring, maxcount);
<a name='L8731'><font color='red'>}</font>
<a name='L8732'>
<a name='L8733'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(splitlines__doc__,
<a name='L8734'>             "S.splitlines([keepends]) -&gt; list of strings\n\
<a name='L8735'>\n\
<a name='L8736'>Return a list of the lines in S, breaking at line boundaries.\n\
<a name='L8737'>Line breaks are not included in the resulting list unless keepends\n\
<a name='L8738'>is given and true.");
<a name='L8739'>
<a name='L8740'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8741'><a href='../S/2828.html#L9128' title='Refered from 9128 in Objects/unicodeobject.c.'>unicode_splitlines</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8742'><font color='red'>{</font>
<a name='L8743'>    <b>int</b> keepends = 0;
<a name='L8744'>
<a name='L8745'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|i:splitlines", &amp;keepends))
<a name='L8746'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8747'>
<a name='L8748'>    <b>return</b> <a href='../D/4034.html' title='Multiple defined in 3 places.'>PyUnicode_Splitlines</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self, keepends);
<a name='L8749'><font color='red'>}</font>
<a name='L8750'>
<a name='L8751'><b>static</b>
<a name='L8752'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2828.html#L9897' title='Refered from 9897 in Objects/unicodeobject.c.'>unicode_str</a>(PyObject *self)
<a name='L8753'><font color='red'>{</font>
<a name='L8754'>    <b>if</b> (PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L8755'>        Py_INCREF(self);
<a name='L8756'>        <b>return</b> self;
<a name='L8757'>    <font color='red'>}</font> <b>else</b>
<a name='L8758'>        <i><font color='green'>/* Subtype -- return genuine unicode string with the same value. */</font></i>
<a name='L8759'>        <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self),
<a name='L8760'>                                     <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self));
<a name='L8761'><font color='red'>}</font>
<a name='L8762'>
<a name='L8763'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(swapcase__doc__,
<a name='L8764'>             "S.swapcase() -&gt; str\n\
<a name='L8765'>\n\
<a name='L8766'>Return a copy of S with uppercase characters converted to lowercase\n\
<a name='L8767'>and vice versa.");
<a name='L8768'>
<a name='L8769'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8770'><a href='../S/2828.html#L9130' title='Refered from 9130 in Objects/unicodeobject.c.'>unicode_swapcase</a>(PyUnicodeObject *self)
<a name='L8771'><font color='red'>{</font>
<a name='L8772'>    <b>return</b> <a href='../S/2828.html#L6518' title='Defined at 6518 in Objects/unicodeobject.c.'>fixup</a>(self, <a href='../S/2828.html#L6584' title='Defined at 6584 in Objects/unicodeobject.c.'>fixswapcase</a>);
<a name='L8773'><font color='red'>}</font>
<a name='L8774'>
<a name='L8775'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(maketrans__doc__,
<a name='L8776'>             "str.maketrans(x[, y[, z]]) -&gt; dict (static method)\n\
<a name='L8777'>\n\
<a name='L8778'>Return a translation table usable for str.translate().\n\
<a name='L8779'>If there is only one argument, it must be a dictionary mapping Unicode\n\
<a name='L8780'>ordinals (integers) or characters to Unicode ordinals, strings or None.\n\
<a name='L8781'>Character keys will be then converted to ordinals.\n\
<a name='L8782'>If there are two arguments, they must be strings of equal length, and\n\
<a name='L8783'>in the resulting dictionary, each character in x will be mapped to the\n\
<a name='L8784'>character at the same position in y. If there is a third argument, it\n\
<a name='L8785'>must be a string, whose characters will be mapped to None in the result.");
<a name='L8786'>
<a name='L8787'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8788'><a href='../S/2828.html#L9150' title='Refered from 9150 in Objects/unicodeobject.c.'>unicode_maketrans</a>(PyUnicodeObject *null, PyObject *args)
<a name='L8789'><font color='red'>{</font>
<a name='L8790'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *x, *y = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *z = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8791'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *new = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L8792'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = 0;
<a name='L8793'>    <b>int</b> res;
<a name='L8794'>
<a name='L8795'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "O|UU:maketrans", &amp;x, &amp;y, &amp;z))
<a name='L8796'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8797'>    new = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L8798'>    <b>if</b> (!new)
<a name='L8799'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8800'>    <b>if</b> (y != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8801'>        <i><font color='green'>/* x must be a string too, of equal length */</font></i>
<a name='L8802'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ylen = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(y);
<a name='L8803'>        <b>if</b> (!PyUnicode_Check(x)) <font color='red'>{</font>
<a name='L8804'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "first maketrans argument must "
<a name='L8805'>                            "be a string if there is a second argument");
<a name='L8806'>            <b>goto</b> err;
<a name='L8807'>        <font color='red'>}</font>
<a name='L8808'>        <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(x) != ylen) <font color='red'>{</font>
<a name='L8809'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "the first two maketrans "
<a name='L8810'>                            "arguments must have equal length");
<a name='L8811'>            <b>goto</b> err;
<a name='L8812'>        <font color='red'>}</font>
<a name='L8813'>        <i><font color='green'>/* create entries for translating chars in x to those in y */</font></i>
<a name='L8814'>        <b>for</b> (i = 0; i &lt; <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(x); i++) <font color='red'>{</font>
<a name='L8815'>            <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(x)[i]);
<a name='L8816'>            <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(y)[i]);
<a name='L8817'>            <b>if</b> (!<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> || !<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)
<a name='L8818'>                <b>goto</b> err;
<a name='L8819'>            res = <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(new, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L8820'>            Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L8821'>            Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L8822'>            <b>if</b> (res &lt; 0)
<a name='L8823'>                <b>goto</b> err;
<a name='L8824'>        <font color='red'>}</font>
<a name='L8825'>        <i><font color='green'>/* create entries for deleting chars in z */</font></i>
<a name='L8826'>        <b>if</b> (z != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L8827'>            <b>for</b> (i = 0; i &lt; <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(z); i++) <font color='red'>{</font>
<a name='L8828'>                <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(z)[i]);
<a name='L8829'>                <b>if</b> (!<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)
<a name='L8830'>                    <b>goto</b> err;
<a name='L8831'>                res = <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(new, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, Py_None);
<a name='L8832'>                Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L8833'>                <b>if</b> (res &lt; 0)
<a name='L8834'>                    <b>goto</b> err;
<a name='L8835'>            <font color='red'>}</font>
<a name='L8836'>        <font color='red'>}</font>
<a name='L8837'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L8838'>        <i><font color='green'>/* x must be a dict */</font></i>
<a name='L8839'>        <b>if</b> (!<a href='../D/3104.html' title='Multiple defined in 2 places.'>PyDict_CheckExact</a>(x)) <font color='red'>{</font>
<a name='L8840'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "if you give only one argument "
<a name='L8841'>                            "to maketrans it must be a dict");
<a name='L8842'>            <b>goto</b> err;
<a name='L8843'>        <font color='red'>}</font>
<a name='L8844'>        <i><font color='green'>/* copy entries into the new dict, converting string keys to int keys */</font></i>
<a name='L8845'>        <b>while</b> (<a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(x, &amp;i, &amp;<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, &amp;<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) <font color='red'>{</font>
<a name='L8846'>            <b>if</b> (PyUnicode_Check(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)) <font color='red'>{</font>
<a name='L8847'>                <i><font color='green'>/* convert string keys to integer keys */</font></i>
<a name='L8848'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *newkey;
<a name='L8849'>                <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>) != 1) <font color='red'>{</font>
<a name='L8850'>                    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "string keys in translate "
<a name='L8851'>                                    "table must be of length 1");
<a name='L8852'>                    <b>goto</b> err;
<a name='L8853'>                <font color='red'>}</font>
<a name='L8854'>                newkey = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)[0]);
<a name='L8855'>                <b>if</b> (!newkey)
<a name='L8856'>                    <b>goto</b> err;
<a name='L8857'>                res = <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(new, newkey, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L8858'>                Py_DECREF(newkey);
<a name='L8859'>                <b>if</b> (res &lt; 0)
<a name='L8860'>                    <b>goto</b> err;
<a name='L8861'>            <font color='red'>}</font> <b>else</b> <b>if</b> (PyLong_Check(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)) <font color='red'>{</font>
<a name='L8862'>                <i><font color='green'>/* just keep integer keys */</font></i>
<a name='L8863'>                <b>if</b> (<a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(new, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>) &lt; 0)
<a name='L8864'>                    <b>goto</b> err;
<a name='L8865'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L8866'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "keys in translate table must "
<a name='L8867'>                                "be strings or integers");
<a name='L8868'>                <b>goto</b> err;
<a name='L8869'>            <font color='red'>}</font>
<a name='L8870'>        <font color='red'>}</font>
<a name='L8871'>    <font color='red'>}</font>
<a name='L8872'>    <b>return</b> new;
<a name='L8873'>  err:
<a name='L8874'>    Py_DECREF(new);
<a name='L8875'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8876'><font color='red'>}</font>
<a name='L8877'>
<a name='L8878'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(translate__doc__,
<a name='L8879'>             "S.translate(table) -&gt; str\n\
<a name='L8880'>\n\
<a name='L8881'>Return a copy of the string S, where all characters have been mapped\n\
<a name='L8882'>through the given translation table, which must be a mapping of\n\
<a name='L8883'>Unicode ordinals to Unicode ordinals, strings, or None.\n\
<a name='L8884'>Unmapped characters are left untouched. Characters mapped to None\n\
<a name='L8885'>are deleted.");
<a name='L8886'>
<a name='L8887'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8888'><a href='../S/2828.html#L9131' title='Refered from 9131 in Objects/unicodeobject.c.'>unicode_translate</a>(PyUnicodeObject *self, PyObject *table)
<a name='L8889'><font color='red'>{</font>
<a name='L8890'>    <b>return</b> <a href='../D/4038.html' title='Multiple defined in 3 places.'>PyUnicode_TranslateCharmap</a>(self-&gt;str, self-&gt;length, table, "ignore");
<a name='L8891'><font color='red'>}</font>
<a name='L8892'>
<a name='L8893'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(upper__doc__,
<a name='L8894'>             "S.upper() -&gt; str\n\
<a name='L8895'>\n\
<a name='L8896'>Return a copy of S converted to uppercase.");
<a name='L8897'>
<a name='L8898'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8899'><a href='../S/2828.html#L9132' title='Refered from 9132 in Objects/unicodeobject.c.'>unicode_upper</a>(PyUnicodeObject *self)
<a name='L8900'><font color='red'>{</font>
<a name='L8901'>    <b>return</b> <a href='../S/2828.html#L6518' title='Defined at 6518 in Objects/unicodeobject.c.'>fixup</a>(self, <a href='../S/2828.html#L6542' title='Defined at 6542 in Objects/unicodeobject.c.'>fixupper</a>);
<a name='L8902'><font color='red'>}</font>
<a name='L8903'>
<a name='L8904'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(zfill__doc__,
<a name='L8905'>             "S.zfill(width) -&gt; str\n\
<a name='L8906'>\n\
<a name='L8907'>Pad a numeric string S with zeros on the left, to fill a field\n\
<a name='L8908'>of the specified width. The string S is never truncated.");
<a name='L8909'>
<a name='L8910'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8911'><a href='../S/2828.html#L9146' title='Refered from 9146 in Objects/unicodeobject.c.'>unicode_zfill</a>(PyUnicodeObject *self, PyObject *args)
<a name='L8912'><font color='red'>{</font>
<a name='L8913'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>;
<a name='L8914'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *u;
<a name='L8915'>
<a name='L8916'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> width;
<a name='L8917'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "n:zfill", &amp;width))
<a name='L8918'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8919'>
<a name='L8920'>    <b>if</b> (self-&gt;length &gt;= width) <font color='red'>{</font>
<a name='L8921'>        <b>if</b> (PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L8922'>            Py_INCREF(self);
<a name='L8923'>            <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) self;
<a name='L8924'>        <font color='red'>}</font>
<a name='L8925'>        <b>else</b>
<a name='L8926'>            <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(
<a name='L8927'>                <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self),
<a name='L8928'>                <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self)
<a name='L8929'>                );
<a name='L8930'>    <font color='red'>}</font>
<a name='L8931'>
<a name='L8932'>    <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a> = width - self-&gt;length;
<a name='L8933'>
<a name='L8934'>    u = <a href='../S/2828.html#L6780' title='Defined at 6780 in Objects/unicodeobject.c.'>pad</a>(self, <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>, 0, '0');
<a name='L8935'>
<a name='L8936'>    <b>if</b> (u == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L8937'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8938'>
<a name='L8939'>    <b>if</b> (u-&gt;str[<a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>] == '+' || u-&gt;str[<a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>] == '-') <font color='red'>{</font>
<a name='L8940'>        <i><font color='green'>/* move sign to beginning of string */</font></i>
<a name='L8941'>        u-&gt;str[0] = u-&gt;str[<a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>];
<a name='L8942'>        u-&gt;str[<a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>] = '0';
<a name='L8943'>    <font color='red'>}</font>
<a name='L8944'>
<a name='L8945'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*) u;
<a name='L8946'><font color='red'>}</font>
<a name='L8947'>
<a name='L8948'><font color='darkred'>#if</font> 0
<a name='L8949'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L8950'><a href='../S/2828.html#L9159' title='Refered from 9159 in Objects/unicodeobject.c.'>unicode_freelistsize</a>(PyUnicodeObject *self)
<a name='L8951'><font color='red'>{</font>
<a name='L8952'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(numfree);
<a name='L8953'><font color='red'>}</font>
<a name='L8954'>
<a name='L8955'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8956'><a href='../S/2828.html#L9160' title='Refered from 9160 in Objects/unicodeobject.c.'>unicode__decimal2ascii</a>(PyObject *self)
<a name='L8957'><font color='red'>{</font>
<a name='L8958'>    <b>return</b> <a href='../S/2828.html#L6208' title='Defined at 6208 in Objects/unicodeobject.c.'>PyUnicode_TransformDecimalToASCII</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(self),
<a name='L8959'>                                             <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self));
<a name='L8960'><font color='red'>}</font>
<a name='L8961'><font color='darkred'>#endif</font>
<a name='L8962'>
<a name='L8963'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(startswith__doc__,
<a name='L8964'>             "S.startswith(prefix[, start[, end]]) -&gt; bool\n\
<a name='L8965'>\n\
<a name='L8966'>Return True if S starts with the specified prefix, False otherwise.\n\
<a name='L8967'>With optional start, test S beginning at that position.\n\
<a name='L8968'>With optional end, stop comparing S at that position.\n\
<a name='L8969'>prefix can also be a tuple of strings to try.");
<a name='L8970'>
<a name='L8971'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L8972'><a href='../S/2828.html#L9133' title='Refered from 9133 in Objects/unicodeobject.c.'>unicode_startswith</a>(PyUnicodeObject *self,
<a name='L8973'>                   PyObject *args)
<a name='L8974'><font color='red'>{</font>
<a name='L8975'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *subobj;
<a name='L8976'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *substring;
<a name='L8977'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start = 0;
<a name='L8978'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end = <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>;
<a name='L8979'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L8980'>
<a name='L8981'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "O|O&amp;O&amp;:startswith", &amp;subobj,
<a name='L8982'>                          <a href='../S/3091.html#L4209' title='Defined at 4209 in Python/ceval.c.'>_PyEval_SliceIndex</a>, &amp;start, <a href='../S/3091.html#L4209' title='Defined at 4209 in Python/ceval.c.'>_PyEval_SliceIndex</a>, &amp;end))
<a name='L8983'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8984'>    <b>if</b> (PyTuple_Check(subobj)) <font color='red'>{</font>
<a name='L8985'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L8986'>        <b>for</b> (i = 0; i &lt; PyTuple_GET_SIZE(subobj); i++) <font color='red'>{</font>
<a name='L8987'>            substring = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(
<a name='L8988'>                PyTuple_GET_ITEM(subobj, i));
<a name='L8989'>            <b>if</b> (substring == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L8990'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L8991'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6464' title='Defined at 6464 in Objects/unicodeobject.c.'>tailmatch</a>(self, substring, start, end, -1);
<a name='L8992'>            Py_DECREF(substring);
<a name='L8993'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) <font color='red'>{</font>
<a name='L8994'>                Py_RETURN_TRUE;
<a name='L8995'>            <font color='red'>}</font>
<a name='L8996'>        <font color='red'>}</font>
<a name='L8997'>        <i><font color='green'>/* nothing matched */</font></i>
<a name='L8998'>        Py_RETURN_FALSE;
<a name='L8999'>    <font color='red'>}</font>
<a name='L9000'>    substring = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(subobj);
<a name='L9001'>    <b>if</b> (substring == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9002'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9003'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6464' title='Defined at 6464 in Objects/unicodeobject.c.'>tailmatch</a>(self, substring, start, end, -1);
<a name='L9004'>    Py_DECREF(substring);
<a name='L9005'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L9006'><font color='red'>}</font>
<a name='L9007'>
<a name='L9008'>
<a name='L9009'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(endswith__doc__,
<a name='L9010'>             "S.endswith(suffix[, start[, end]]) -&gt; bool\n\
<a name='L9011'>\n\
<a name='L9012'>Return True if S ends with the specified suffix, False otherwise.\n\
<a name='L9013'>With optional start, test S beginning at that position.\n\
<a name='L9014'>With optional end, stop comparing S at that position.\n\
<a name='L9015'>suffix can also be a tuple of strings to try.");
<a name='L9016'>
<a name='L9017'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9018'><a href='../S/2828.html#L9134' title='Refered from 9134 in Objects/unicodeobject.c.'>unicode_endswith</a>(PyUnicodeObject *self,
<a name='L9019'>                 PyObject *args)
<a name='L9020'><font color='red'>{</font>
<a name='L9021'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *subobj;
<a name='L9022'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *substring;
<a name='L9023'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start = 0;
<a name='L9024'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> end = <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>;
<a name='L9025'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9026'>
<a name='L9027'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "O|O&amp;O&amp;:endswith", &amp;subobj,
<a name='L9028'>                          <a href='../S/3091.html#L4209' title='Defined at 4209 in Python/ceval.c.'>_PyEval_SliceIndex</a>, &amp;start, <a href='../S/3091.html#L4209' title='Defined at 4209 in Python/ceval.c.'>_PyEval_SliceIndex</a>, &amp;end))
<a name='L9029'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9030'>    <b>if</b> (PyTuple_Check(subobj)) <font color='red'>{</font>
<a name='L9031'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L9032'>        <b>for</b> (i = 0; i &lt; PyTuple_GET_SIZE(subobj); i++) <font color='red'>{</font>
<a name='L9033'>            substring = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(
<a name='L9034'>                PyTuple_GET_ITEM(subobj, i));
<a name='L9035'>            <b>if</b> (substring == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9036'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9037'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6464' title='Defined at 6464 in Objects/unicodeobject.c.'>tailmatch</a>(self, substring, start, end, +1);
<a name='L9038'>            Py_DECREF(substring);
<a name='L9039'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) <font color='red'>{</font>
<a name='L9040'>                Py_RETURN_TRUE;
<a name='L9041'>            <font color='red'>}</font>
<a name='L9042'>        <font color='red'>}</font>
<a name='L9043'>        Py_RETURN_FALSE;
<a name='L9044'>    <font color='red'>}</font>
<a name='L9045'>    substring = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(subobj);
<a name='L9046'>    <b>if</b> (substring == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9047'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9048'>
<a name='L9049'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L6464' title='Defined at 6464 in Objects/unicodeobject.c.'>tailmatch</a>(self, substring, start, end, +1);
<a name='L9050'>    Py_DECREF(substring);
<a name='L9051'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L9052'><font color='red'>}</font>
<a name='L9053'>
<a name='L9054'><font color='darkred'>#include</font> "<a href='2818.html'>stringlib/string_format.h</a>"
<a name='L9055'>
<a name='L9056'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(format__doc__,
<a name='L9057'>             "S.format(*args, **kwargs) -&gt; str\n\
<a name='L9058'>\n\
<a name='L9059'>Return a formatted version of S, using substitutions from args and kwargs.\n\
<a name='L9060'>The substitutions are identified by braces ('{' and '}').");
<a name='L9061'>
<a name='L9062'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(format_map__doc__,
<a name='L9063'>             "S.format_map(mapping) -&gt; str\n\
<a name='L9064'>\n\
<a name='L9065'>Return a formatted version of S, using substitutions from mapping.\n\
<a name='L9066'>The substitutions are identified by braces ('{' and '}').");
<a name='L9067'>
<a name='L9068'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9069'><a href='../S/2828.html#L9149' title='Refered from 9149 in Objects/unicodeobject.c.'>unicode__format__</a>(PyObject* self, PyObject* args)
<a name='L9070'><font color='red'>{</font>
<a name='L9071'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *format_spec;
<a name='L9072'>
<a name='L9073'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "U:__format__", &amp;format_spec))
<a name='L9074'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9075'>
<a name='L9076'>    <b>return</b> _PyUnicode_FormatAdvanced(self,
<a name='L9077'>                                     <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(format_spec),
<a name='L9078'>                                     <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(format_spec));
<a name='L9079'><font color='red'>}</font>
<a name='L9080'>
<a name='L9081'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(p_format__doc__,
<a name='L9082'>             "S.__format__(format_spec) -&gt; str\n\
<a name='L9083'>\n\
<a name='L9084'>Return a formatted version of S as described by format_spec.");
<a name='L9085'>
<a name='L9086'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9087'><a href='../S/2828.html#L9152' title='Refered from 9152 in Objects/unicodeobject.c.'>unicode__sizeof__</a>(PyUnicodeObject *v)
<a name='L9088'><font color='red'>{</font>
<a name='L9089'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(<b>sizeof</b>(<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>) +
<a name='L9090'>                              <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) * (v-&gt;length + 1));
<a name='L9091'><font color='red'>}</font>
<a name='L9092'>
<a name='L9093'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(sizeof__doc__,
<a name='L9094'>             "S.__sizeof__() -&gt; size of S in memory, in bytes");
<a name='L9095'>
<a name='L9096'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9097'><a href='../S/2828.html#L9163' title='Refered from 9163 in Objects/unicodeobject.c.'>unicode_getnewargs</a>(PyUnicodeObject *v)
<a name='L9098'><font color='red'>{</font>
<a name='L9099'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(u#)", v-&gt;str, v-&gt;length);
<a name='L9100'><font color='red'>}</font>
<a name='L9101'>
<a name='L9102'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> unicode_methods[] = <font color='red'>{</font>
<a name='L9103'>
<a name='L9104'>    <i><font color='green'>/* Order is according to common usage: often used methods should</font></i>
<a name='L9105'><i><font color='green'>       appear first, since lookup is done sequentially. */</font></i>
<a name='L9106'>
<a name='L9107'>    <font color='red'>{</font>"encode", (PyCFunction) <a href='../S/2828.html#L7444' title='Defined at 7444 in Objects/unicodeobject.c.'>unicode_encode</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS, encode__doc__<font color='red'>}</font>,
<a name='L9108'>    <font color='red'>{</font>"replace", (PyCFunction) <a href='../S/2828.html#L8293' title='Defined at 8293 in Objects/unicodeobject.c.'>unicode_replace</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, replace__doc__<font color='red'>}</font>,
<a name='L9109'>    <font color='red'>{</font>"split", (PyCFunction) <a href='../S/2828.html#L8586' title='Defined at 8586 in Objects/unicodeobject.c.'>unicode_split</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, split__doc__<font color='red'>}</font>,
<a name='L9110'>    <font color='red'>{</font>"rsplit", (PyCFunction) <a href='../S/2828.html#L8717' title='Defined at 8717 in Objects/unicodeobject.c.'>unicode_rsplit</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, rsplit__doc__<font color='red'>}</font>,
<a name='L9111'>    <font color='red'>{</font>"join", (PyCFunction) <a href='../S/2828.html#L8004' title='Defined at 8004 in Objects/unicodeobject.c.'>unicode_join</a>, METH_O, join__doc__<font color='red'>}</font>,
<a name='L9112'>    <font color='red'>{</font>"capitalize", (PyCFunction) <a href='../S/2828.html#L7032' title='Defined at 7032 in Objects/unicodeobject.c.'>unicode_capitalize</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, capitalize__doc__<font color='red'>}</font>,
<a name='L9113'>    <font color='red'>{</font>"title", (PyCFunction) <a href='../S/2828.html#L7020' title='Defined at 7020 in Objects/unicodeobject.c.'>unicode_title</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, title__doc__<font color='red'>}</font>,
<a name='L9114'>    <font color='red'>{</font>"center", (PyCFunction) <a href='../S/2828.html#L7109' title='Defined at 7109 in Objects/unicodeobject.c.'>unicode_center</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, center__doc__<font color='red'>}</font>,
<a name='L9115'>    <font color='red'>{</font>"count", (PyCFunction) <a href='../S/2828.html#L7405' title='Defined at 7405 in Objects/unicodeobject.c.'>unicode_count</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, count__doc__<font color='red'>}</font>,
<a name='L9116'>    <font color='red'>{</font>"expandtabs", (PyCFunction) <a href='../S/2828.html#L7463' title='Defined at 7463 in Objects/unicodeobject.c.'>unicode_expandtabs</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, expandtabs__doc__<font color='red'>}</font>,
<a name='L9117'>    <font color='red'>{</font>"find", (PyCFunction) <a href='../S/2828.html#L7553' title='Defined at 7553 in Objects/unicodeobject.c.'>unicode_find</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, find__doc__<font color='red'>}</font>,
<a name='L9118'>    <font color='red'>{</font>"partition", (PyCFunction) <a href='../S/2828.html#L8665' title='Defined at 8665 in Objects/unicodeobject.c.'>unicode_partition</a>, METH_O, partition__doc__<font color='red'>}</font>,
<a name='L9119'>    <font color='red'>{</font>"index", (PyCFunction) <a href='../S/2828.html#L7614' title='Defined at 7614 in Objects/unicodeobject.c.'>unicode_index</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, index__doc__<font color='red'>}</font>,
<a name='L9120'>    <font color='red'>{</font>"ljust", (PyCFunction) <a href='../S/2828.html#L8022' title='Defined at 8022 in Objects/unicodeobject.c.'>unicode_ljust</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, ljust__doc__<font color='red'>}</font>,
<a name='L9121'>    <font color='red'>{</font>"lower", (PyCFunction) <a href='../S/2828.html#L8044' title='Defined at 8044 in Objects/unicodeobject.c.'>unicode_lower</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, lower__doc__<font color='red'>}</font>,
<a name='L9122'>    <font color='red'>{</font>"lstrip", (PyCFunction) <a href='../S/2828.html#L8171' title='Defined at 8171 in Objects/unicodeobject.c.'>unicode_lstrip</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, lstrip__doc__<font color='red'>}</font>,
<a name='L9123'>    <font color='red'>{</font>"rfind", (PyCFunction) <a href='../S/2828.html#L8477' title='Defined at 8477 in Objects/unicodeobject.c.'>unicode_rfind</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, rfind__doc__<font color='red'>}</font>,
<a name='L9124'>    <font color='red'>{</font>"rindex", (PyCFunction) <a href='../S/2828.html#L8504' title='Defined at 8504 in Objects/unicodeobject.c.'>unicode_rindex</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, rindex__doc__<font color='red'>}</font>,
<a name='L9125'>    <font color='red'>{</font>"rjust", (PyCFunction) <a href='../S/2828.html#L8536' title='Defined at 8536 in Objects/unicodeobject.c.'>unicode_rjust</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, rjust__doc__<font color='red'>}</font>,
<a name='L9126'>    <font color='red'>{</font>"rstrip", (PyCFunction) <a href='../S/2828.html#L8187' title='Defined at 8187 in Objects/unicodeobject.c.'>unicode_rstrip</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, rstrip__doc__<font color='red'>}</font>,
<a name='L9127'>    <font color='red'>{</font>"rpartition", (PyCFunction) <a href='../S/2828.html#L8678' title='Defined at 8678 in Objects/unicodeobject.c.'>unicode_rpartition</a>, METH_O, rpartition__doc__<font color='red'>}</font>,
<a name='L9128'>    <font color='red'>{</font>"splitlines", (PyCFunction) <a href='../S/2828.html#L8741' title='Defined at 8741 in Objects/unicodeobject.c.'>unicode_splitlines</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, splitlines__doc__<font color='red'>}</font>,
<a name='L9129'>    <font color='red'>{</font>"strip", (PyCFunction) <a href='../S/2828.html#L8155' title='Defined at 8155 in Objects/unicodeobject.c.'>unicode_strip</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, strip__doc__<font color='red'>}</font>,
<a name='L9130'>    <font color='red'>{</font>"swapcase", (PyCFunction) <a href='../S/2828.html#L8770' title='Defined at 8770 in Objects/unicodeobject.c.'>unicode_swapcase</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, swapcase__doc__<font color='red'>}</font>,
<a name='L9131'>    <font color='red'>{</font>"translate", (PyCFunction) <a href='../S/2828.html#L8888' title='Defined at 8888 in Objects/unicodeobject.c.'>unicode_translate</a>, METH_O, translate__doc__<font color='red'>}</font>,
<a name='L9132'>    <font color='red'>{</font>"upper", (PyCFunction) <a href='../S/2828.html#L8899' title='Defined at 8899 in Objects/unicodeobject.c.'>unicode_upper</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, upper__doc__<font color='red'>}</font>,
<a name='L9133'>    <font color='red'>{</font>"startswith", (PyCFunction) <a href='../S/2828.html#L8972' title='Defined at 8972 in Objects/unicodeobject.c.'>unicode_startswith</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, startswith__doc__<font color='red'>}</font>,
<a name='L9134'>    <font color='red'>{</font>"endswith", (PyCFunction) <a href='../S/2828.html#L9018' title='Defined at 9018 in Objects/unicodeobject.c.'>unicode_endswith</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, endswith__doc__<font color='red'>}</font>,
<a name='L9135'>    <font color='red'>{</font>"islower", (PyCFunction) <a href='../S/2828.html#L7647' title='Defined at 7647 in Objects/unicodeobject.c.'>unicode_islower</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, islower__doc__<font color='red'>}</font>,
<a name='L9136'>    <font color='red'>{</font>"isupper", (PyCFunction) <a href='../S/2828.html#L7681' title='Defined at 7681 in Objects/unicodeobject.c.'>unicode_isupper</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isupper__doc__<font color='red'>}</font>,
<a name='L9137'>    <font color='red'>{</font>"istitle", (PyCFunction) <a href='../S/2828.html#L7717' title='Defined at 7717 in Objects/unicodeobject.c.'>unicode_istitle</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, istitle__doc__<font color='red'>}</font>,
<a name='L9138'>    <font color='red'>{</font>"isspace", (PyCFunction) <a href='../S/2828.html#L7763' title='Defined at 7763 in Objects/unicodeobject.c.'>unicode_isspace</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isspace__doc__<font color='red'>}</font>,
<a name='L9139'>    <font color='red'>{</font>"isdecimal", (PyCFunction) <a href='../S/2828.html#L7850' title='Defined at 7850 in Objects/unicodeobject.c.'>unicode_isdecimal</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isdecimal__doc__<font color='red'>}</font>,
<a name='L9140'>    <font color='red'>{</font>"isdigit", (PyCFunction) <a href='../S/2828.html#L7879' title='Defined at 7879 in Objects/unicodeobject.c.'>unicode_isdigit</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isdigit__doc__<font color='red'>}</font>,
<a name='L9141'>    <font color='red'>{</font>"isnumeric", (PyCFunction) <a href='../S/2828.html#L7908' title='Defined at 7908 in Objects/unicodeobject.c.'>unicode_isnumeric</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isnumeric__doc__<font color='red'>}</font>,
<a name='L9142'>    <font color='red'>{</font>"isalpha", (PyCFunction) <a href='../S/2828.html#L7792' title='Defined at 7792 in Objects/unicodeobject.c.'>unicode_isalpha</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isalpha__doc__<font color='red'>}</font>,
<a name='L9143'>    <font color='red'>{</font>"isalnum", (PyCFunction) <a href='../S/2828.html#L7821' title='Defined at 7821 in Objects/unicodeobject.c.'>unicode_isalnum</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isalnum__doc__<font color='red'>}</font>,
<a name='L9144'>    <font color='red'>{</font>"isidentifier", (PyCFunction) <a href='../S/2828.html#L7966' title='Defined at 7966 in Objects/unicodeobject.c.'>unicode_isidentifier</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isidentifier__doc__<font color='red'>}</font>,
<a name='L9145'>    <font color='red'>{</font>"isprintable", (PyCFunction) <a href='../S/2828.html#L7978' title='Defined at 7978 in Objects/unicodeobject.c.'>unicode_isprintable</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, isprintable__doc__<font color='red'>}</font>,
<a name='L9146'>    <font color='red'>{</font>"zfill", (PyCFunction) <a href='../S/2828.html#L8911' title='Defined at 8911 in Objects/unicodeobject.c.'>unicode_zfill</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, zfill__doc__<font color='red'>}</font>,
<a name='L9147'>    <font color='red'>{</font>"format", (PyCFunction) <a href='../S/2818.html#L1028' title='Defined at 1028 in Objects/stringlib/string_format.h.'>do_string_format</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS, format__doc__<font color='red'>}</font>,
<a name='L9148'>    <font color='red'>{</font>"format_map", (PyCFunction) <a href='../S/2818.html#L1046' title='Defined at 1046 in Objects/stringlib/string_format.h.'>do_string_format_map</a>, METH_O, format_map__doc__<font color='red'>}</font>,
<a name='L9149'>    <font color='red'>{</font>"__format__", (PyCFunction) <a href='../S/2828.html#L9069' title='Defined at 9069 in Objects/unicodeobject.c.'>unicode__format__</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>, p_format__doc__<font color='red'>}</font>,
<a name='L9150'>    <font color='red'>{</font>"maketrans", (PyCFunction) <a href='../S/2828.html#L8788' title='Defined at 8788 in Objects/unicodeobject.c.'>unicode_maketrans</a>,
<a name='L9151'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_STATIC, maketrans__doc__<font color='red'>}</font>,
<a name='L9152'>    <font color='red'>{</font>"__sizeof__", (PyCFunction) <a href='../S/2828.html#L9087' title='Defined at 9087 in Objects/unicodeobject.c.'>unicode__sizeof__</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, sizeof__doc__<font color='red'>}</font>,
<a name='L9153'><font color='darkred'>#if</font> 0
<a name='L9154'>    <font color='red'>{</font>"capwords", (PyCFunction) <a href='../S/2828.html#L7045' title='Defined at 7045 in Objects/unicodeobject.c.'>unicode_capwords</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>, capwords__doc__<font color='red'>}</font>,
<a name='L9155'><font color='darkred'>#endif</font>
<a name='L9156'>
<a name='L9157'><font color='darkred'>#if</font> 0
<a name='L9158'>    <i><font color='green'>/* These methods are just used for debugging the implementation. */</font></i>
<a name='L9159'>    <font color='red'>{</font>"freelistsize", (PyCFunction) <a href='../S/2828.html#L8950' title='Defined at 8950 in Objects/unicodeobject.c.'>unicode_freelistsize</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L9160'>    <font color='red'>{</font>"_decimal2ascii", (PyCFunction) <a href='../S/2828.html#L8956' title='Defined at 8956 in Objects/unicodeobject.c.'>unicode__decimal2ascii</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L9161'><font color='darkred'>#endif</font>
<a name='L9162'>
<a name='L9163'>    <font color='red'>{</font>"__getnewargs__",  (PyCFunction)<a href='../S/2828.html#L9097' title='Defined at 9097 in Objects/unicodeobject.c.'>unicode_getnewargs</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L9164'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L9165'><font color='red'>}</font>;
<a name='L9166'>
<a name='L9167'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9168'><a href='../S/2828.html#L9181' title='Refered from 9181 in Objects/unicodeobject.c.'>unicode_mod</a>(PyObject *v, PyObject *w)
<a name='L9169'><font color='red'>{</font>
<a name='L9170'>    <b>if</b> (!PyUnicode_Check(v)) <font color='red'>{</font>
<a name='L9171'>        Py_INCREF(Py_NotImplemented);
<a name='L9172'>        <b>return</b> Py_NotImplemented;
<a name='L9173'>    <font color='red'>}</font>
<a name='L9174'>    <b>return</b> <a href='../D/4006.html' title='Multiple defined in 3 places.'>PyUnicode_Format</a>(v, w);
<a name='L9175'><font color='red'>}</font>
<a name='L9176'>
<a name='L9177'><b>static</b> <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> unicode_as_number = <font color='red'>{</font>
<a name='L9178'>    0,              <i><font color='green'>/*nb_add*/</font></i>
<a name='L9179'>    0,              <i><font color='green'>/*nb_subtract*/</font></i>
<a name='L9180'>    0,              <i><font color='green'>/*nb_multiply*/</font></i>
<a name='L9181'>    <a href='../S/2828.html#L9168' title='Defined at 9168 in Objects/unicodeobject.c.'>unicode_mod</a>,            <i><font color='green'>/*nb_remainder*/</font></i>
<a name='L9182'><font color='red'>}</font>;
<a name='L9183'>
<a name='L9184'><b>static</b> <a href='../S/544.html#L261' title='Defined at 261 in Include/object.h.'>PySequenceMethods</a> unicode_as_sequence = <font color='red'>{</font>
<a name='L9185'>    (<a href='../S/2562.html#L105' title='Defined at 105 in Modules/_elementtree.c.'>lenfunc</a>) <a href='../S/2828.html#L8010' title='Defined at 8010 in Objects/unicodeobject.c.'>unicode_length</a>,       <i><font color='green'>/* sq_length */</font></i>
<a name='L9186'>    <a href='../D/3969.html' title='Multiple defined in 3 places.'>PyUnicode_Concat</a>,           <i><font color='green'>/* sq_concat */</font></i>
<a name='L9187'>    (ssizeargfunc) <a href='../S/2828.html#L8197' title='Defined at 8197 in Objects/unicodeobject.c.'>unicode_repeat</a>,  <i><font color='green'>/* sq_repeat */</font></i>
<a name='L9188'>    (ssizeargfunc) <a href='../S/2828.html#L7575' title='Defined at 7575 in Objects/unicodeobject.c.'>unicode_getitem</a>,     <i><font color='green'>/* sq_item */</font></i>
<a name='L9189'>    0,                  <i><font color='green'>/* sq_slice */</font></i>
<a name='L9190'>    0,                  <i><font color='green'>/* sq_ass_item */</font></i>
<a name='L9191'>    0,                  <i><font color='green'>/* sq_ass_slice */</font></i>
<a name='L9192'>    <a href='../D/3970.html' title='Multiple defined in 3 places.'>PyUnicode_Contains</a>,         <i><font color='green'>/* sq_contains */</font></i>
<a name='L9193'><font color='red'>}</font>;
<a name='L9194'>
<a name='L9195'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L9196'><a href='../S/2828.html#L9248' title='Refered from 9248 in Objects/unicodeobject.c.'>unicode_subscript</a>(PyUnicodeObject* self, PyObject* item)
<a name='L9197'><font color='red'>{</font>
<a name='L9198'>    <b>if</b> (PyIndex_Check(item)) <font color='red'>{</font>
<a name='L9199'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = <a href='../S/2775.html#L1227' title='Defined at 1227 in Objects/abstract.c.'>PyNumber_AsSsize_t</a>(item, PyExc_IndexError);
<a name='L9200'>        <b>if</b> (i == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L9201'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9202'>        <b>if</b> (i &lt; 0)
<a name='L9203'>            i += <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self);
<a name='L9204'>        <b>return</b> <a href='../S/2828.html#L7575' title='Defined at 7575 in Objects/unicodeobject.c.'>unicode_getitem</a>(self, i);
<a name='L9205'>    <font color='red'>}</font> <b>else</b> <b>if</b> (PySlice_Check(item)) <font color='red'>{</font>
<a name='L9206'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> start, stop, step, slicelength, cur, i;
<a name='L9207'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>* source_buf;
<a name='L9208'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>* result_buf;
<a name='L9209'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9210'>
<a name='L9211'>        <b>if</b> (<a href='../S/2807.html#L134' title='Defined at 134 in Objects/sliceobject.c.'>PySlice_GetIndicesEx</a>(item, <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(self),
<a name='L9212'>                                 &amp;start, &amp;stop, &amp;step, &amp;slicelength) &lt; 0) <font color='red'>{</font>
<a name='L9213'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9214'>        <font color='red'>}</font>
<a name='L9215'>
<a name='L9216'>        <b>if</b> (slicelength &lt;= 0) <font color='red'>{</font>
<a name='L9217'>            <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L9218'>        <font color='red'>}</font> <b>else</b> <b>if</b> (start == 0 &amp;&amp; step == 1 &amp;&amp; slicelength == self-&gt;length &amp;&amp;
<a name='L9219'>                   PyUnicode_CheckExact(self)) <font color='red'>{</font>
<a name='L9220'>            Py_INCREF(self);
<a name='L9221'>            <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self;
<a name='L9222'>        <font color='red'>}</font> <b>else</b> <b>if</b> (step == 1) <font color='red'>{</font>
<a name='L9223'>            <b>return</b> <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(self-&gt;str + start, slicelength);
<a name='L9224'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L9225'>            source_buf = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)self);
<a name='L9226'>            result_buf = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *)PyObject_MALLOC(slicelength*
<a name='L9227'>                                                       <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>));
<a name='L9228'>
<a name='L9229'>            <b>if</b> (result_buf == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9230'>                <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L9231'>
<a name='L9232'>            <b>for</b> (cur = start, i = 0; i &lt; slicelength; cur += step, i++) <font color='red'>{</font>
<a name='L9233'>                result_buf[i] = source_buf[cur];
<a name='L9234'>            <font color='red'>}</font>
<a name='L9235'>
<a name='L9236'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(result_buf, slicelength);
<a name='L9237'>            PyObject_FREE(result_buf);
<a name='L9238'>            <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9239'>        <font color='red'>}</font>
<a name='L9240'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L9241'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "string indices must be integers");
<a name='L9242'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9243'>    <font color='red'>}</font>
<a name='L9244'><font color='red'>}</font>
<a name='L9245'>
<a name='L9246'><b>static</b> <a href='../S/544.html#L267' title='Defined at 267 in Include/object.h.'>PyMappingMethods</a> unicode_as_mapping = <font color='red'>{</font>
<a name='L9247'>    (<a href='../S/2562.html#L105' title='Defined at 105 in Modules/_elementtree.c.'>lenfunc</a>)<a href='../S/2828.html#L8010' title='Defined at 8010 in Objects/unicodeobject.c.'>unicode_length</a>,        <i><font color='green'>/* mp_length */</font></i>
<a name='L9248'>    (binaryfunc)<a href='../S/2828.html#L9196' title='Defined at 9196 in Objects/unicodeobject.c.'>unicode_subscript</a>,  <i><font color='green'>/* mp_subscript */</font></i>
<a name='L9249'>    (objobjargproc)0,           <i><font color='green'>/* mp_ass_subscript */</font></i>
<a name='L9250'><font color='red'>}</font>;
<a name='L9251'>
<a name='L9252'>
<a name='L9253'><i><font color='green'>/* Helpers for PyUnicode_Format() */</font></i>
<a name='L9254'>
<a name='L9255'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9256'><a href='../R/8158.html' title='Multiple refered from 3 places.'>getnextarg</a>(PyObject *args, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> arglen, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *p_argidx)
<a name='L9257'><font color='red'>{</font>
<a name='L9258'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> argidx = *p_argidx;
<a name='L9259'>    <b>if</b> (argidx &lt; arglen) <font color='red'>{</font>
<a name='L9260'>        (*p_argidx)++;
<a name='L9261'>        <b>if</b> (arglen &lt; 0)
<a name='L9262'>            <b>return</b> <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>;
<a name='L9263'>        <b>else</b>
<a name='L9264'>            <b>return</b> <a href='../S/2823.html#L123' title='Defined at 123 in Objects/tupleobject.c.'>PyTuple_GetItem</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, argidx);
<a name='L9265'>    <font color='red'>}</font>
<a name='L9266'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L9267'>                    "not enough arguments for format string");
<a name='L9268'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9269'><font color='red'>}</font>
<a name='L9270'>
<a name='L9271'><i><font color='green'>/* Returns a new reference to a PyUnicode object, or NULL on failure. */</font></i>
<a name='L9272'>
<a name='L9273'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9274'><a href='../S/2828.html#L9685' title='Refered from 9685 in Objects/unicodeobject.c.'>formatfloat</a>(PyObject *v, <b>int</b> flags, <b>int</b> prec, <b>int</b> type)
<a name='L9275'><font color='red'>{</font>
<a name='L9276'>    <b>char</b> *p;
<a name='L9277'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9278'>    <b>double</b> x;
<a name='L9279'>
<a name='L9280'>    x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L9281'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L9282'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9283'>
<a name='L9284'>    <b>if</b> (prec &lt; 0)
<a name='L9285'>        prec = 6;
<a name='L9286'>
<a name='L9287'>    p = PyOS_double_to_string(x, type, prec,
<a name='L9288'>                              (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; F_ALT) ? Py_DTSF_ALT : 0, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L9289'>    <b>if</b> (p == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9290'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9291'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(p, strlen(p));
<a name='L9292'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(p);
<a name='L9293'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9294'><font color='red'>}</font>
<a name='L9295'>
<a name='L9296'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L9297'><a href='../S/2828.html#L9656' title='Refered from 9656 in Objects/unicodeobject.c.'>formatlong</a>(PyObject *val, <b>int</b> flags, <b>int</b> prec, <b>int</b> type)
<a name='L9298'><font color='red'>{</font>
<a name='L9299'>    <b>char</b> *buf;
<a name='L9300'>    <b>int</b> len;
<a name='L9301'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str; <i><font color='green'>/* temporary string object. */</font></i>
<a name='L9302'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9303'>
<a name='L9304'>    str = <a href='../S/2779.html#L2873' title='Defined at 2873 in Objects/bytesobject.c.'>_PyBytes_FormatLong</a>(val, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, prec, type, &amp;buf, &amp;len);
<a name='L9305'>    <b>if</b> (!str)
<a name='L9306'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9307'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(buf, len);
<a name='L9308'>    Py_DECREF(str);
<a name='L9309'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9310'><font color='red'>}</font>
<a name='L9311'>
<a name='L9312'><b>static</b> <b>int</b>
<a name='L9313'><a href='../S/2828.html#L9697' title='Refered from 9697 in Objects/unicodeobject.c.'>formatchar</a>(Py_UNICODE *buf,
<a name='L9314'>           <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> buflen,
<a name='L9315'>           PyObject *v)
<a name='L9316'><font color='red'>{</font>
<a name='L9317'>    <i><font color='green'>/* presume that the buffer is at least 3 characters long */</font></i>
<a name='L9318'>    <b>if</b> (PyUnicode_Check(v)) <font color='red'>{</font>
<a name='L9319'>        <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(v) == 1) <font color='red'>{</font>
<a name='L9320'>            buf[0] = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v)[0];
<a name='L9321'>            buf[1] = '\0';
<a name='L9322'>            <b>return</b> 1;
<a name='L9323'>        <font color='red'>}</font>
<a name='L9324'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L9325'>        <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(v) == 2) <font color='red'>{</font>
<a name='L9326'>            <i><font color='green'>/* Decode a valid surrogate pair */</font></i>
<a name='L9327'>            <b>int</b> c0 = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v)[0];
<a name='L9328'>            <b>int</b> c1 = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(v)[1];
<a name='L9329'>            <b>if</b> (0xD800 &lt;= c0 &amp;&amp; c0 &lt;= 0xDBFF &amp;&amp;
<a name='L9330'>                0xDC00 &lt;= c1 &amp;&amp; c1 &lt;= 0xDFFF) <font color='red'>{</font>
<a name='L9331'>                buf[0] = c0;
<a name='L9332'>                buf[1] = c1;
<a name='L9333'>                buf[2] = '\0';
<a name='L9334'>                <b>return</b> 2;
<a name='L9335'>            <font color='red'>}</font>
<a name='L9336'>        <font color='red'>}</font>
<a name='L9337'><font color='darkred'>#endif</font>
<a name='L9338'>        <b>goto</b> onError;
<a name='L9339'>    <font color='red'>}</font>
<a name='L9340'>    <b>else</b> <font color='red'>{</font>
<a name='L9341'>        <i><font color='green'>/* Integer input truncated to a character */</font></i>
<a name='L9342'>        <b>long</b> x;
<a name='L9343'>        x = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L9344'>        <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L9345'>            <b>goto</b> onError;
<a name='L9346'>
<a name='L9347'>        <b>if</b> (x &lt; 0 || x &gt; 0x10ffff) <font color='red'>{</font>
<a name='L9348'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L9349'>                            "%c arg not in range(0x110000)");
<a name='L9350'>            <b>return</b> -1;
<a name='L9351'>        <font color='red'>}</font>
<a name='L9352'>
<a name='L9353'><font color='darkred'>#ifndef</font> <a href='../S/587.html#L79' title='Defined at 79 in Include/unicodeobject.h.'>Py_UNICODE_WIDE</a>
<a name='L9354'>        <b>if</b> (x &gt; 0xffff) <font color='red'>{</font>
<a name='L9355'>            x -= 0x10000;
<a name='L9356'>            buf[0] = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)(0xD800 | (x &gt;&gt; 10));
<a name='L9357'>            buf[1] = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)(0xDC00 | (x &amp; 0x3FF));
<a name='L9358'>            <b>return</b> 2;
<a name='L9359'>        <font color='red'>}</font>
<a name='L9360'><font color='darkred'>#endif</font>
<a name='L9361'>        buf[0] = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) x;
<a name='L9362'>        buf[1] = '\0';
<a name='L9363'>        <b>return</b> 1;
<a name='L9364'>    <font color='red'>}</font>
<a name='L9365'>
<a name='L9366'>  onError:
<a name='L9367'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L9368'>                    "%c requires int or char");
<a name='L9369'>    <b>return</b> -1;
<a name='L9370'><font color='red'>}</font>
<a name='L9371'>
<a name='L9372'><i><font color='green'>/* fmt%(v1,v2,...) is roughly equivalent to sprintf(fmt, v1, v2, ...)</font></i>
<a name='L9373'><i><font color='green'>   FORMATBUFLEN is the length of the buffer in which chars are formatted.</font></i>
<a name='L9374'><i><font color='green'>*/</font></i>
<a name='L9375'><font color='darkred'>#define</font> <a href='../S/2828.html#L9440' title='Refered from 9440 in Objects/unicodeobject.c.'>FORMATBUFLEN</a> (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)10
<a name='L9376'>
<a name='L9377'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../R/3582.html' title='Multiple refered from 8 places.'>PyUnicode_Format</a>(PyObject *format,
<a name='L9378'>                           PyObject *args)
<a name='L9379'><font color='red'>{</font>
<a name='L9380'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *fmt, *res;
<a name='L9381'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> fmtcnt, rescnt, reslen, arglen, argidx;
<a name='L9382'>    <b>int</b> args_owned = 0;
<a name='L9383'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9384'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dict = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9385'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *uformat;
<a name='L9386'>
<a name='L9387'>    <b>if</b> (format == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L9388'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L9389'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9390'>    <font color='red'>}</font>
<a name='L9391'>    uformat = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(format);
<a name='L9392'>    <b>if</b> (uformat == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9393'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9394'>    fmt = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(uformat);
<a name='L9395'>    fmtcnt = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(uformat);
<a name='L9396'>
<a name='L9397'>    reslen = rescnt = fmtcnt + 100;
<a name='L9398'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(reslen);
<a name='L9399'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9400'>        <b>goto</b> onError;
<a name='L9401'>    res = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L9402'>
<a name='L9403'>    <b>if</b> (PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L9404'>        arglen = <a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L9405'>        argidx = 0;
<a name='L9406'>    <font color='red'>}</font>
<a name='L9407'>    <b>else</b> <font color='red'>{</font>
<a name='L9408'>        arglen = -1;
<a name='L9409'>        argidx = -2;
<a name='L9410'>    <font color='red'>}</font>
<a name='L9411'>    <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)-&gt;tp_as_mapping &amp;&amp; !PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) &amp;&amp;
<a name='L9412'>        !PyUnicode_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>))
<a name='L9413'>        dict = <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>;
<a name='L9414'>
<a name='L9415'>    <b>while</b> (--fmtcnt &gt;= 0) <font color='red'>{</font>
<a name='L9416'>        <b>if</b> (*fmt != '%') <font color='red'>{</font>
<a name='L9417'>            <b>if</b> (--rescnt &lt; 0) <font color='red'>{</font>
<a name='L9418'>                rescnt = fmtcnt + 100;
<a name='L9419'>                reslen += rescnt;
<a name='L9420'>                <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, reslen) &lt; 0)
<a name='L9421'>                    <b>goto</b> onError;
<a name='L9422'>                res = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) + reslen - rescnt;
<a name='L9423'>                --rescnt;
<a name='L9424'>            <font color='red'>}</font>
<a name='L9425'>            *res++ = *fmt++;
<a name='L9426'>        <font color='red'>}</font>
<a name='L9427'>        <b>else</b> <font color='red'>{</font>
<a name='L9428'>            <i><font color='green'>/* Got a format specifier */</font></i>
<a name='L9429'>            <b>int</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L9430'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> width = -1;
<a name='L9431'>            <b>int</b> prec = -1;
<a name='L9432'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> c = '\0';
<a name='L9433'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>;
<a name='L9434'>            <b>int</b> isnumok;
<a name='L9435'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9436'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *temp = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9437'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *pbuf;
<a name='L9438'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> sign;
<a name='L9439'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L9440'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> formatbuf[<a href='../S/2828.html#L9375' title='Defined at 9375 in Objects/unicodeobject.c.'>FORMATBUFLEN</a>]; <i><font color='green'>/* For formatchar() */</font></i>
<a name='L9441'>
<a name='L9442'>            fmt++;
<a name='L9443'>            <b>if</b> (*fmt == '(') <font color='red'>{</font>
<a name='L9444'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *keystart;
<a name='L9445'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> keylen;
<a name='L9446'>                <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>;
<a name='L9447'>                <b>int</b> pcount = 1;
<a name='L9448'>
<a name='L9449'>                <b>if</b> (dict == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L9450'>                    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L9451'>                                    "format requires a mapping");
<a name='L9452'>                    <b>goto</b> onError;
<a name='L9453'>                <font color='red'>}</font>
<a name='L9454'>                ++fmt;
<a name='L9455'>                --fmtcnt;
<a name='L9456'>                keystart = fmt;
<a name='L9457'>                <i><font color='green'>/* Skip over balanced parentheses */</font></i>
<a name='L9458'>                <b>while</b> (pcount &gt; 0 &amp;&amp; --fmtcnt &gt;= 0) <font color='red'>{</font>
<a name='L9459'>                    <b>if</b> (*fmt == ')')
<a name='L9460'>                        --pcount;
<a name='L9461'>                    <b>else</b> <b>if</b> (*fmt == '(')
<a name='L9462'>                        ++pcount;
<a name='L9463'>                    fmt++;
<a name='L9464'>                <font color='red'>}</font>
<a name='L9465'>                keylen = fmt - keystart - 1;
<a name='L9466'>                <b>if</b> (fmtcnt &lt; 0 || pcount &gt; 0) <font color='red'>{</font>
<a name='L9467'>                    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L9468'>                                    "incomplete format key");
<a name='L9469'>                    <b>goto</b> onError;
<a name='L9470'>                <font color='red'>}</font>
<a name='L9471'><font color='darkred'>#if</font> 0
<a name='L9472'>                <i><font color='green'>/* keys are converted to strings using UTF-8 and</font></i>
<a name='L9473'><i><font color='green'>                   then looked up since Python uses strings to hold</font></i>
<a name='L9474'><i><font color='green'>                   variables names etc. in its namespaces and we</font></i>
<a name='L9475'><i><font color='green'>                   wouldn't want to break common idioms. */</font></i>
<a name='L9476'>                <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../D/4001.html' title='Multiple defined in 3 places.'>PyUnicode_EncodeUTF8</a>(keystart,
<a name='L9477'>                                           keylen,
<a name='L9478'>                                           <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L9479'><font color='darkred'>#else</font>
<a name='L9480'>                <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(keystart, keylen);
<a name='L9481'><font color='darkred'>#endif</font>
<a name='L9482'>                <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9483'>                    <b>goto</b> onError;
<a name='L9484'>                <b>if</b> (args_owned) <font color='red'>{</font>
<a name='L9485'>                    Py_DECREF(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L9486'>                    args_owned = 0;
<a name='L9487'>                <font color='red'>}</font>
<a name='L9488'>                <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> = <a href='../S/2775.html#L113' title='Defined at 113 in Objects/abstract.c.'>PyObject_GetItem</a>(dict, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L9489'>                Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L9490'>                <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L9491'>                    <b>goto</b> onError;
<a name='L9492'>                <font color='red'>}</font>
<a name='L9493'>                args_owned = 1;
<a name='L9494'>                arglen = -1;
<a name='L9495'>                argidx = -2;
<a name='L9496'>            <font color='red'>}</font>
<a name='L9497'>            <b>while</b> (--fmtcnt &gt;= 0) <font color='red'>{</font>
<a name='L9498'>                <b>switch</b> (c = *fmt++) <font color='red'>{</font>
<a name='L9499'>                <b>case</b> '-': <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> |= F_LJUST; <b>continue</b>;
<a name='L9500'>                <b>case</b> '+': <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> |= F_SIGN; <b>continue</b>;
<a name='L9501'>                <b>case</b> ' ': <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> |= F_BLANK; <b>continue</b>;
<a name='L9502'>                <b>case</b> '#': <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> |= F_ALT; <b>continue</b>;
<a name='L9503'>                <b>case</b> '0': <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> |= F_ZERO; <b>continue</b>;
<a name='L9504'>                <font color='red'>}</font>
<a name='L9505'>                <b>break</b>;
<a name='L9506'>            <font color='red'>}</font>
<a name='L9507'>            <b>if</b> (c == '*') <font color='red'>{</font>
<a name='L9508'>                v = <a href='../S/2828.html#L9256' title='Defined at 9256 in Objects/unicodeobject.c.'>getnextarg</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, arglen, &amp;argidx);
<a name='L9509'>                <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9510'>                    <b>goto</b> onError;
<a name='L9511'>                <b>if</b> (!PyLong_Check(v)) <font color='red'>{</font>
<a name='L9512'>                    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L9513'>                                    "* wants int");
<a name='L9514'>                    <b>goto</b> onError;
<a name='L9515'>                <font color='red'>}</font>
<a name='L9516'>                width = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L9517'>                <b>if</b> (width == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L9518'>                    <b>goto</b> onError;
<a name='L9519'>                <b>if</b> (width &lt; 0) <font color='red'>{</font>
<a name='L9520'>                    <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> |= F_LJUST;
<a name='L9521'>                    width = -width;
<a name='L9522'>                <font color='red'>}</font>
<a name='L9523'>                <b>if</b> (--fmtcnt &gt;= 0)
<a name='L9524'>                    c = *fmt++;
<a name='L9525'>            <font color='red'>}</font>
<a name='L9526'>            <b>else</b> <b>if</b> (c &gt;= '0' &amp;&amp; c &lt;= '9') <font color='red'>{</font>
<a name='L9527'>                width = c - '0';
<a name='L9528'>                <b>while</b> (--fmtcnt &gt;= 0) <font color='red'>{</font>
<a name='L9529'>                    c = *fmt++;
<a name='L9530'>                    <b>if</b> (c &lt; '0' || c &gt; '9')
<a name='L9531'>                        <b>break</b>;
<a name='L9532'>                    <b>if</b> ((width*10) / 10 != width) <font color='red'>{</font>
<a name='L9533'>                        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L9534'>                                        "width too big");
<a name='L9535'>                        <b>goto</b> onError;
<a name='L9536'>                    <font color='red'>}</font>
<a name='L9537'>                    width = width*10 + (c - '0');
<a name='L9538'>                <font color='red'>}</font>
<a name='L9539'>            <font color='red'>}</font>
<a name='L9540'>            <b>if</b> (c == '.') <font color='red'>{</font>
<a name='L9541'>                prec = 0;
<a name='L9542'>                <b>if</b> (--fmtcnt &gt;= 0)
<a name='L9543'>                    c = *fmt++;
<a name='L9544'>                <b>if</b> (c == '*') <font color='red'>{</font>
<a name='L9545'>                    v = <a href='../S/2828.html#L9256' title='Defined at 9256 in Objects/unicodeobject.c.'>getnextarg</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, arglen, &amp;argidx);
<a name='L9546'>                    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9547'>                        <b>goto</b> onError;
<a name='L9548'>                    <b>if</b> (!PyLong_Check(v)) <font color='red'>{</font>
<a name='L9549'>                        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L9550'>                                        "* wants int");
<a name='L9551'>                        <b>goto</b> onError;
<a name='L9552'>                    <font color='red'>}</font>
<a name='L9553'>                    prec = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L9554'>                    <b>if</b> (prec == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L9555'>                        <b>goto</b> onError;
<a name='L9556'>                    <b>if</b> (prec &lt; 0)
<a name='L9557'>                        prec = 0;
<a name='L9558'>                    <b>if</b> (--fmtcnt &gt;= 0)
<a name='L9559'>                        c = *fmt++;
<a name='L9560'>                <font color='red'>}</font>
<a name='L9561'>                <b>else</b> <b>if</b> (c &gt;= '0' &amp;&amp; c &lt;= '9') <font color='red'>{</font>
<a name='L9562'>                    prec = c - '0';
<a name='L9563'>                    <b>while</b> (--fmtcnt &gt;= 0) <font color='red'>{</font>
<a name='L9564'>                        c = *fmt++;
<a name='L9565'>                        <b>if</b> (c &lt; '0' || c &gt; '9')
<a name='L9566'>                            <b>break</b>;
<a name='L9567'>                        <b>if</b> ((prec*10) / 10 != prec) <font color='red'>{</font>
<a name='L9568'>                            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L9569'>                                            "prec too big");
<a name='L9570'>                            <b>goto</b> onError;
<a name='L9571'>                        <font color='red'>}</font>
<a name='L9572'>                        prec = prec*10 + (c - '0');
<a name='L9573'>                    <font color='red'>}</font>
<a name='L9574'>                <font color='red'>}</font>
<a name='L9575'>            <font color='red'>}</font> <i><font color='green'>/* prec */</font></i>
<a name='L9576'>            <b>if</b> (fmtcnt &gt;= 0) <font color='red'>{</font>
<a name='L9577'>                <b>if</b> (c == 'h' || c == 'l' || c == 'L') <font color='red'>{</font>
<a name='L9578'>                    <b>if</b> (--fmtcnt &gt;= 0)
<a name='L9579'>                        c = *fmt++;
<a name='L9580'>                <font color='red'>}</font>
<a name='L9581'>            <font color='red'>}</font>
<a name='L9582'>            <b>if</b> (fmtcnt &lt; 0) <font color='red'>{</font>
<a name='L9583'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L9584'>                                "incomplete format");
<a name='L9585'>                <b>goto</b> onError;
<a name='L9586'>            <font color='red'>}</font>
<a name='L9587'>            <b>if</b> (c != '%') <font color='red'>{</font>
<a name='L9588'>                v = <a href='../S/2828.html#L9256' title='Defined at 9256 in Objects/unicodeobject.c.'>getnextarg</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, arglen, &amp;argidx);
<a name='L9589'>                <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9590'>                    <b>goto</b> onError;
<a name='L9591'>            <font color='red'>}</font>
<a name='L9592'>            sign = 0;
<a name='L9593'>            <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a> = ' ';
<a name='L9594'>            <b>switch</b> (c) <font color='red'>{</font>
<a name='L9595'>
<a name='L9596'>            <b>case</b> '%':
<a name='L9597'>                pbuf = formatbuf;
<a name='L9598'>                <i><font color='green'>/* presume that buffer length is at least 1 */</font></i>
<a name='L9599'>                pbuf[0] = '%';
<a name='L9600'>                len = 1;
<a name='L9601'>                <b>break</b>;
<a name='L9602'>
<a name='L9603'>            <b>case</b> 's':
<a name='L9604'>            <b>case</b> 'r':
<a name='L9605'>            <b>case</b> 'a':
<a name='L9606'>                <b>if</b> (PyUnicode_CheckExact(v) &amp;&amp; c == 's') <font color='red'>{</font>
<a name='L9607'>                    temp = v;
<a name='L9608'>                    Py_INCREF(temp);
<a name='L9609'>                <font color='red'>}</font>
<a name='L9610'>                <b>else</b> <font color='red'>{</font>
<a name='L9611'>                    <b>if</b> (c == 's')
<a name='L9612'>                        temp = <a href='../S/2803.html#L396' title='Defined at 396 in Objects/object.c.'>PyObject_Str</a>(v);
<a name='L9613'>                    <b>else</b> <b>if</b> (c == 'r')
<a name='L9614'>                        temp = <a href='../S/2803.html#L368' title='Defined at 368 in Objects/object.c.'>PyObject_Repr</a>(v);
<a name='L9615'>                    <b>else</b>
<a name='L9616'>                        temp = <a href='../S/2803.html#L435' title='Defined at 435 in Objects/object.c.'>PyObject_ASCII</a>(v);
<a name='L9617'>                    <b>if</b> (temp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9618'>                        <b>goto</b> onError;
<a name='L9619'>                    <b>if</b> (PyUnicode_Check(temp))
<a name='L9620'>                        <i><font color='green'>/* nothing to do */</font></i>;
<a name='L9621'>                    <b>else</b> <font color='red'>{</font>
<a name='L9622'>                        Py_DECREF(temp);
<a name='L9623'>                        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L9624'>                                        "%s argument has non-string str()");
<a name='L9625'>                        <b>goto</b> onError;
<a name='L9626'>                    <font color='red'>}</font>
<a name='L9627'>                <font color='red'>}</font>
<a name='L9628'>                pbuf = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(temp);
<a name='L9629'>                len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(temp);
<a name='L9630'>                <b>if</b> (prec &gt;= 0 &amp;&amp; len &gt; prec)
<a name='L9631'>                    len = prec;
<a name='L9632'>                <b>break</b>;
<a name='L9633'>
<a name='L9634'>            <b>case</b> 'i':
<a name='L9635'>            <b>case</b> 'd':
<a name='L9636'>            <b>case</b> 'u':
<a name='L9637'>            <b>case</b> 'o':
<a name='L9638'>            <b>case</b> 'x':
<a name='L9639'>            <b>case</b> 'X':
<a name='L9640'>                <b>if</b> (c == 'i')
<a name='L9641'>                    c = 'd';
<a name='L9642'>                isnumok = 0;
<a name='L9643'>                <b>if</b> (<a href='../S/2775.html#L736' title='Defined at 736 in Objects/abstract.c.'>PyNumber_Check</a>(v)) <font color='red'>{</font>
<a name='L9644'>                    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *iobj=<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9645'>
<a name='L9646'>                    <b>if</b> (PyLong_Check(v)) <font color='red'>{</font>
<a name='L9647'>                        iobj = v;
<a name='L9648'>                        Py_INCREF(iobj);
<a name='L9649'>                    <font color='red'>}</font>
<a name='L9650'>                    <b>else</b> <font color='red'>{</font>
<a name='L9651'>                        iobj = <a href='../S/2775.html#L1325' title='Defined at 1325 in Objects/abstract.c.'>PyNumber_Long</a>(v);
<a name='L9652'>                    <font color='red'>}</font>
<a name='L9653'>                    <b>if</b> (iobj!=<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L9654'>                        <b>if</b> (PyLong_Check(iobj)) <font color='red'>{</font>
<a name='L9655'>                            isnumok = 1;
<a name='L9656'>                            temp = <a href='../S/2828.html#L9297' title='Defined at 9297 in Objects/unicodeobject.c.'>formatlong</a>(iobj, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, prec, c);
<a name='L9657'>                            Py_DECREF(iobj);
<a name='L9658'>                            <b>if</b> (!temp)
<a name='L9659'>                                <b>goto</b> onError;
<a name='L9660'>                            pbuf = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(temp);
<a name='L9661'>                            len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(temp);
<a name='L9662'>                            sign = 1;
<a name='L9663'>                        <font color='red'>}</font>
<a name='L9664'>                        <b>else</b> <font color='red'>{</font>
<a name='L9665'>                            Py_DECREF(iobj);
<a name='L9666'>                        <font color='red'>}</font>
<a name='L9667'>                    <font color='red'>}</font>
<a name='L9668'>                <font color='red'>}</font>
<a name='L9669'>                <b>if</b> (!isnumok) <font color='red'>{</font>
<a name='L9670'>                    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L9671'>                                 "%%%c format: a number is required, "
<a name='L9672'>                                 "not %.200s", (<b>char</b>)c, <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(v)-&gt;tp_name);
<a name='L9673'>                    <b>goto</b> onError;
<a name='L9674'>                <font color='red'>}</font>
<a name='L9675'>                <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; F_ZERO)
<a name='L9676'>                    <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a> = '0';
<a name='L9677'>                <b>break</b>;
<a name='L9678'>
<a name='L9679'>            <b>case</b> 'e':
<a name='L9680'>            <b>case</b> 'E':
<a name='L9681'>            <b>case</b> 'f':
<a name='L9682'>            <b>case</b> 'F':
<a name='L9683'>            <b>case</b> 'g':
<a name='L9684'>            <b>case</b> 'G':
<a name='L9685'>                temp = <a href='../S/2828.html#L9274' title='Defined at 9274 in Objects/unicodeobject.c.'>formatfloat</a>(v, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, prec, c);
<a name='L9686'>                <b>if</b> (!temp)
<a name='L9687'>                    <b>goto</b> onError;
<a name='L9688'>                pbuf = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(temp);
<a name='L9689'>                len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(temp);
<a name='L9690'>                sign = 1;
<a name='L9691'>                <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; F_ZERO)
<a name='L9692'>                    <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a> = '0';
<a name='L9693'>                <b>break</b>;
<a name='L9694'>
<a name='L9695'>            <b>case</b> 'c':
<a name='L9696'>                pbuf = formatbuf;
<a name='L9697'>                len = <a href='../S/2828.html#L9313' title='Defined at 9313 in Objects/unicodeobject.c.'>formatchar</a>(pbuf, <b>sizeof</b>(formatbuf)/<b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>), v);
<a name='L9698'>                <b>if</b> (len &lt; 0)
<a name='L9699'>                    <b>goto</b> onError;
<a name='L9700'>                <b>break</b>;
<a name='L9701'>
<a name='L9702'>            <b>default</b>:
<a name='L9703'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L9704'>                             "unsupported format character '%c' (0x%x) "
<a name='L9705'>                             "at index %zd",
<a name='L9706'>                             (31&lt;=c &amp;&amp; c&lt;=126) ? (<b>char</b>)c : '?',
<a name='L9707'>                             (<b>int</b>)c,
<a name='L9708'>                             (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)(fmt - 1 -
<a name='L9709'>                                          <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(uformat)));
<a name='L9710'>                <b>goto</b> onError;
<a name='L9711'>            <font color='red'>}</font>
<a name='L9712'>            <b>if</b> (sign) <font color='red'>{</font>
<a name='L9713'>                <b>if</b> (*pbuf == '-' || *pbuf == '+') <font color='red'>{</font>
<a name='L9714'>                    sign = *pbuf++;
<a name='L9715'>                    len--;
<a name='L9716'>                <font color='red'>}</font>
<a name='L9717'>                <b>else</b> <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; F_SIGN)
<a name='L9718'>                    sign = '+';
<a name='L9719'>                <b>else</b> <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; F_BLANK)
<a name='L9720'>                    sign = ' ';
<a name='L9721'>                <b>else</b>
<a name='L9722'>                    sign = 0;
<a name='L9723'>            <font color='red'>}</font>
<a name='L9724'>            <b>if</b> (width &lt; len)
<a name='L9725'>                width = len;
<a name='L9726'>            <b>if</b> (rescnt - (sign != 0) &lt; width) <font color='red'>{</font>
<a name='L9727'>                reslen -= rescnt;
<a name='L9728'>                rescnt = width + fmtcnt + 100;
<a name='L9729'>                reslen += rescnt;
<a name='L9730'>                <b>if</b> (reslen &lt; 0) <font color='red'>{</font>
<a name='L9731'>                    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(temp);
<a name='L9732'>                    <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L9733'>                    <b>goto</b> onError;
<a name='L9734'>                <font color='red'>}</font>
<a name='L9735'>                <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, reslen) &lt; 0) <font color='red'>{</font>
<a name='L9736'>                    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(temp);
<a name='L9737'>                    <b>goto</b> onError;
<a name='L9738'>                <font color='red'>}</font>
<a name='L9739'>                res = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>)
<a name='L9740'>                    + reslen - rescnt;
<a name='L9741'>            <font color='red'>}</font>
<a name='L9742'>            <b>if</b> (sign) <font color='red'>{</font>
<a name='L9743'>                <b>if</b> (<a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a> != ' ')
<a name='L9744'>                    *res++ = sign;
<a name='L9745'>                rescnt--;
<a name='L9746'>                <b>if</b> (width &gt; len)
<a name='L9747'>                    width--;
<a name='L9748'>            <font color='red'>}</font>
<a name='L9749'>            <b>if</b> ((<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; F_ALT) &amp;&amp; (c == 'x' || c == 'X' || c == 'o')) <font color='red'>{</font>
<a name='L9750'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(pbuf[0] == '0');
<a name='L9751'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(pbuf[1] == c);
<a name='L9752'>                <b>if</b> (<a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a> != ' ') <font color='red'>{</font>
<a name='L9753'>                    *res++ = *pbuf++;
<a name='L9754'>                    *res++ = *pbuf++;
<a name='L9755'>                <font color='red'>}</font>
<a name='L9756'>                rescnt -= 2;
<a name='L9757'>                width -= 2;
<a name='L9758'>                <b>if</b> (width &lt; 0)
<a name='L9759'>                    width = 0;
<a name='L9760'>                len -= 2;
<a name='L9761'>            <font color='red'>}</font>
<a name='L9762'>            <b>if</b> (width &gt; len &amp;&amp; !(<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; F_LJUST)) <font color='red'>{</font>
<a name='L9763'>                <b>do</b> <font color='red'>{</font>
<a name='L9764'>                    --rescnt;
<a name='L9765'>                    *res++ = <a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a>;
<a name='L9766'>                <font color='red'>}</font> <b>while</b> (--width &gt; len);
<a name='L9767'>            <font color='red'>}</font>
<a name='L9768'>            <b>if</b> (<a href='../S/2814.html#L51' title='Defined at 51 in Objects/stringlib/localeutil.h.'>fill</a> == ' ') <font color='red'>{</font>
<a name='L9769'>                <b>if</b> (sign)
<a name='L9770'>                    *res++ = sign;
<a name='L9771'>                <b>if</b> ((<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; F_ALT) &amp;&amp; (c == 'x' || c == 'X' || c == 'o')) <font color='red'>{</font>
<a name='L9772'>                    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(pbuf[0] == '0');
<a name='L9773'>                    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(pbuf[1] == c);
<a name='L9774'>                    *res++ = *pbuf++;
<a name='L9775'>                    *res++ = *pbuf++;
<a name='L9776'>                <font color='red'>}</font>
<a name='L9777'>            <font color='red'>}</font>
<a name='L9778'>            <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(res, pbuf, len);
<a name='L9779'>            res += len;
<a name='L9780'>            rescnt -= len;
<a name='L9781'>            <b>while</b> (--width &gt;= len) <font color='red'>{</font>
<a name='L9782'>                --rescnt;
<a name='L9783'>                *res++ = ' ';
<a name='L9784'>            <font color='red'>}</font>
<a name='L9785'>            <b>if</b> (dict &amp;&amp; (argidx &lt; arglen) &amp;&amp; c != '%') <font color='red'>{</font>
<a name='L9786'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L9787'>                                "not all arguments converted during string formatting");
<a name='L9788'>                <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(temp);
<a name='L9789'>                <b>goto</b> onError;
<a name='L9790'>            <font color='red'>}</font>
<a name='L9791'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(temp);
<a name='L9792'>        <font color='red'>}</font> <i><font color='green'>/* '%' */</font></i>
<a name='L9793'>    <font color='red'>}</font> <i><font color='green'>/* until end */</font></i>
<a name='L9794'>    <b>if</b> (argidx &lt; arglen &amp;&amp; !dict) <font color='red'>{</font>
<a name='L9795'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L9796'>                        "not all arguments converted during string formatting");
<a name='L9797'>        <b>goto</b> onError;
<a name='L9798'>    <font color='red'>}</font>
<a name='L9799'>
<a name='L9800'>    <b>if</b> (<a href='../S/2828.html#L432' title='Defined at 432 in Objects/unicodeobject.c.'>_PyUnicode_Resize</a>(&amp;<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, reslen - rescnt) &lt; 0)
<a name='L9801'>        <b>goto</b> onError;
<a name='L9802'>    <b>if</b> (args_owned) <font color='red'>{</font>
<a name='L9803'>        Py_DECREF(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L9804'>    <font color='red'>}</font>
<a name='L9805'>    Py_DECREF(uformat);
<a name='L9806'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9807'>
<a name='L9808'>  onError:
<a name='L9809'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L9810'>    Py_DECREF(uformat);
<a name='L9811'>    <b>if</b> (args_owned) <font color='red'>{</font>
<a name='L9812'>        Py_DECREF(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L9813'>    <font color='red'>}</font>
<a name='L9814'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9815'><font color='red'>}</font>
<a name='L9816'>
<a name='L9817'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9818'><a href='../S/2828.html#L9842' title='Defined at 9842 in Objects/unicodeobject.c.'>unicode_subtype_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds);
<a name='L9819'>
<a name='L9820'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9821'><a href='../R/11109.html' title='Multiple refered from 2 places.'>unicode_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L9822'><font color='red'>{</font>
<a name='L9823'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *x = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9824'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"object", "encoding", "errors", 0<font color='red'>}</font>;
<a name='L9825'>    <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9826'>    <b>char</b> *errors = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9827'>
<a name='L9828'>    <b>if</b> (type != &amp;PyUnicode_Type)
<a name='L9829'>        <b>return</b> <a href='../S/2828.html#L9842' title='Defined at 9842 in Objects/unicodeobject.c.'>unicode_subtype_new</a>(type, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds);
<a name='L9830'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "|Oss:str",
<a name='L9831'>                                     kwlist, &amp;x, &amp;<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, &amp;errors))
<a name='L9832'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9833'>    <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9834'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(0);
<a name='L9835'>    <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; errors == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9836'>        <b>return</b> <a href='../S/2803.html#L396' title='Defined at 396 in Objects/object.c.'>PyObject_Str</a>(x);
<a name='L9837'>    <b>else</b>
<a name='L9838'>        <b>return</b> <a href='../D/4007.html' title='Multiple defined in 3 places.'>PyUnicode_FromEncodedObject</a>(x, <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>, errors);
<a name='L9839'><font color='red'>}</font>
<a name='L9840'>
<a name='L9841'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9842'><a href='../R/11127.html' title='Multiple refered from 2 places.'>unicode_subtype_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L9843'><font color='red'>{</font>
<a name='L9844'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *tmp, *pnew;
<a name='L9845'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n;
<a name='L9846'>
<a name='L9847'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2824.html#L1082' title='Defined at 1082 in Objects/typeobject.c.'>PyType_IsSubtype</a>(type, &amp;PyUnicode_Type));
<a name='L9848'>    tmp = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../S/2828.html#L9821' title='Defined at 9821 in Objects/unicodeobject.c.'>unicode_new</a>(&amp;PyUnicode_Type, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds);
<a name='L9849'>    <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L9850'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9851'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyUnicode_Check(tmp));
<a name='L9852'>    pnew = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *) type-&gt;tp_alloc(type, n = tmp-&gt;length);
<a name='L9853'>    <b>if</b> (pnew == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L9854'>        Py_DECREF(tmp);
<a name='L9855'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9856'>    <font color='red'>}</font>
<a name='L9857'>    pnew-&gt;str = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*) PyObject_MALLOC(<b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>) * (n+1));
<a name='L9858'>    <b>if</b> (pnew-&gt;str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L9859'>        <a href='../D/6292.html' title='Multiple defined in 2 places.'>_Py_ForgetReference</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)pnew);
<a name='L9860'>        PyObject_Del(pnew);
<a name='L9861'>        Py_DECREF(tmp);
<a name='L9862'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L9863'>    <font color='red'>}</font>
<a name='L9864'>    <a href='../S/587.html#L353' title='Defined at 353 in Include/unicodeobject.h.'>Py_UNICODE_COPY</a>(pnew-&gt;str, tmp-&gt;str, n+1);
<a name='L9865'>    pnew-&gt;length = n;
<a name='L9866'>    pnew-&gt;<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> = tmp-&gt;<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a>;
<a name='L9867'>    Py_DECREF(tmp);
<a name='L9868'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)pnew;
<a name='L9869'><font color='red'>}</font>
<a name='L9870'>
<a name='L9871'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(unicode_doc,
<a name='L9872'>             "str(string[, encoding[, errors]]) -&gt; str\n\
<a name='L9873'>\n\
<a name='L9874'>Create a new string object from the given encoded string.\n\
<a name='L9875'>encoding defaults to the current default string encoding.\n\
<a name='L9876'>errors can be 'strict', 'replace' or 'ignore' and defaults to 'strict'.");
<a name='L9877'>
<a name='L9878'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2828.html#L10220' title='Defined at 10220 in Objects/unicodeobject.c.'>unicode_iter</a>(PyObject *seq);
<a name='L9879'>
<a name='L9880'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyUnicode_Type = <font color='red'>{</font>
<a name='L9881'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(&amp;PyType_Type, 0)
<a name='L9882'>    "str",              <i><font color='green'>/* tp_name */</font></i>
<a name='L9883'>    <b>sizeof</b>(<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a>),        <i><font color='green'>/* tp_size */</font></i>
<a name='L9884'>    0,                  <i><font color='green'>/* tp_itemsize */</font></i>
<a name='L9885'>    <i><font color='green'>/* Slots */</font></i>
<a name='L9886'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2828.html#L387' title='Defined at 387 in Objects/unicodeobject.c.'>unicode_dealloc</a>,    <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L9887'>    0,                  <i><font color='green'>/* tp_print */</font></i>
<a name='L9888'>    0,                  <i><font color='green'>/* tp_getattr */</font></i>
<a name='L9889'>    0,                  <i><font color='green'>/* tp_setattr */</font></i>
<a name='L9890'>    0,                  <i><font color='green'>/* tp_reserved */</font></i>
<a name='L9891'>    <a href='../S/2828.html#L8319' title='Defined at 8319 in Objects/unicodeobject.c.'>unicode_repr</a>,           <i><font color='green'>/* tp_repr */</font></i>
<a name='L9892'>    &amp;unicode_as_number,         <i><font color='green'>/* tp_as_number */</font></i>
<a name='L9893'>    &amp;unicode_as_sequence,       <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L9894'>    &amp;unicode_as_mapping,        <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L9895'>    (hashfunc) <a href='../S/2828.html#L7588' title='Defined at 7588 in Objects/unicodeobject.c.'>unicode_hash</a>,        <i><font color='green'>/* tp_hash*/</font></i>
<a name='L9896'>    0,                  <i><font color='green'>/* tp_call*/</font></i>
<a name='L9897'>    (reprfunc) <a href='../S/2828.html#L8752' title='Defined at 8752 in Objects/unicodeobject.c.'>unicode_str</a>,     <i><font color='green'>/* tp_str */</font></i>
<a name='L9898'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,        <i><font color='green'>/* tp_getattro */</font></i>
<a name='L9899'>    0,                  <i><font color='green'>/* tp_setattro */</font></i>
<a name='L9900'>    0,                  <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L9901'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE |
<a name='L9902'>    Py_TPFLAGS_UNICODE_SUBCLASS,    <i><font color='green'>/* tp_flags */</font></i>
<a name='L9903'>    unicode_doc,            <i><font color='green'>/* tp_doc */</font></i>
<a name='L9904'>    0,                  <i><font color='green'>/* tp_traverse */</font></i>
<a name='L9905'>    0,                  <i><font color='green'>/* tp_clear */</font></i>
<a name='L9906'>    <a href='../D/4032.html' title='Multiple defined in 3 places.'>PyUnicode_RichCompare</a>,      <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L9907'>    0,                  <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L9908'>    <a href='../S/2828.html#L10220' title='Defined at 10220 in Objects/unicodeobject.c.'>unicode_iter</a>,           <i><font color='green'>/* tp_iter */</font></i>
<a name='L9909'>    0,                  <i><font color='green'>/* tp_iternext */</font></i>
<a name='L9910'>    unicode_methods,            <i><font color='green'>/* tp_methods */</font></i>
<a name='L9911'>    0,                  <i><font color='green'>/* tp_members */</font></i>
<a name='L9912'>    0,                  <i><font color='green'>/* tp_getset */</font></i>
<a name='L9913'>    &amp;PyBaseObject_Type,         <i><font color='green'>/* tp_base */</font></i>
<a name='L9914'>    0,                  <i><font color='green'>/* tp_dict */</font></i>
<a name='L9915'>    0,                  <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L9916'>    0,                  <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L9917'>    0,                  <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L9918'>    0,                  <i><font color='green'>/* tp_init */</font></i>
<a name='L9919'>    0,                  <i><font color='green'>/* tp_alloc */</font></i>
<a name='L9920'>    <a href='../S/2828.html#L9821' title='Defined at 9821 in Objects/unicodeobject.c.'>unicode_new</a>,            <i><font color='green'>/* tp_new */</font></i>
<a name='L9921'>    PyObject_Del,           <i><font color='green'>/* tp_free */</font></i>
<a name='L9922'><font color='red'>}</font>;
<a name='L9923'>
<a name='L9924'><i><font color='green'>/* Initialize the Unicode implementation */</font></i>
<a name='L9925'>
<a name='L9926'><b>void</b> <a href='../R/5511.html' title='Multiple refered from 2 places.'>_PyUnicode_Init</a>(<b>void</b>)
<a name='L9927'><font color='red'>{</font>
<a name='L9928'>    <b>int</b> i;
<a name='L9929'>
<a name='L9930'>    <i><font color='green'>/* XXX - move this array to unicodectype.c ? */</font></i>
<a name='L9931'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> linebreak[] = <font color='red'>{</font>
<a name='L9932'>        0x000A, <i><font color='green'>/* LINE FEED */</font></i>
<a name='L9933'>        0x000D, <i><font color='green'>/* CARRIAGE RETURN */</font></i>
<a name='L9934'>        0x001C, <i><font color='green'>/* FILE SEPARATOR */</font></i>
<a name='L9935'>        0x001D, <i><font color='green'>/* GROUP SEPARATOR */</font></i>
<a name='L9936'>        0x001E, <i><font color='green'>/* RECORD SEPARATOR */</font></i>
<a name='L9937'>        0x0085, <i><font color='green'>/* NEXT LINE */</font></i>
<a name='L9938'>        0x2028, <i><font color='green'>/* LINE SEPARATOR */</font></i>
<a name='L9939'>        0x2029, <i><font color='green'>/* PARAGRAPH SEPARATOR */</font></i>
<a name='L9940'>    <font color='red'>}</font>;
<a name='L9941'>
<a name='L9942'>    <i><font color='green'>/* Init the implementation */</font></i>
<a name='L9943'>    free_list = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9944'>    numfree = 0;
<a name='L9945'>    unicode_empty = <a href='../S/2828.html#L315' title='Defined at 315 in Objects/unicodeobject.c.'>_PyUnicode_New</a>(0);
<a name='L9946'>    <b>if</b> (!unicode_empty)
<a name='L9947'>        <b>return</b>;
<a name='L9948'>
<a name='L9949'>    <b>for</b> (i = 0; i &lt; 256; i++)
<a name='L9950'>        unicode_latin1[i] = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9951'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;PyUnicode_Type) &lt; 0)
<a name='L9952'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("Can't initialize 'unicode'");
<a name='L9953'>
<a name='L9954'>    <i><font color='green'>/* initialize the linebreak bloom filter */</font></i>
<a name='L9955'>    bloom_linebreak = make_bloom_mask(
<a name='L9956'>        linebreak, <b>sizeof</b>(linebreak) / <b>sizeof</b>(linebreak[0])
<a name='L9957'>        );
<a name='L9958'>
<a name='L9959'>    <a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;EncodingMapType);
<a name='L9960'><font color='red'>}</font>
<a name='L9961'>
<a name='L9962'><i><font color='green'>/* Finalize the Unicode implementation */</font></i>
<a name='L9963'>
<a name='L9964'><b>int</b>
<a name='L9965'><a href='../R/3547.html' title='Multiple refered from 2 places.'>PyUnicode_ClearFreeList</a>(<b>void</b>)
<a name='L9966'><font color='red'>{</font>
<a name='L9967'>    <b>int</b> freelist_size = numfree;
<a name='L9968'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *u;
<a name='L9969'>
<a name='L9970'>    <b>for</b> (u = free_list; u != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;) <font color='red'>{</font>
<a name='L9971'>        <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *v = u;
<a name='L9972'>        u = *(<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> **)u;
<a name='L9973'>        <b>if</b> (v-&gt;str)
<a name='L9974'>            <a href='../S/2611.html#L74' title='Defined at 74 in Modules/_sre.c.'>PyObject_DEL</a>(v-&gt;str);
<a name='L9975'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(v-&gt;defenc);
<a name='L9976'>        PyObject_Del(v);
<a name='L9977'>        numfree--;
<a name='L9978'>    <font color='red'>}</font>
<a name='L9979'>    free_list = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9980'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(numfree == 0);
<a name='L9981'>    <b>return</b> freelist_size;
<a name='L9982'><font color='red'>}</font>
<a name='L9983'>
<a name='L9984'><b>void</b>
<a name='L9985'><a href='../R/5510.html' title='Multiple refered from 2 places.'>_PyUnicode_Fini</a>(<b>void</b>)
<a name='L9986'><font color='red'>{</font>
<a name='L9987'>    <b>int</b> i;
<a name='L9988'>
<a name='L9989'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(unicode_empty);
<a name='L9990'>    unicode_empty = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9991'>
<a name='L9992'>    <b>for</b> (i = 0; i &lt; 256; i++) <font color='red'>{</font>
<a name='L9993'>        <b>if</b> (unicode_latin1[i]) <font color='red'>{</font>
<a name='L9994'>            Py_DECREF(unicode_latin1[i]);
<a name='L9995'>            unicode_latin1[i] = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L9996'>        <font color='red'>}</font>
<a name='L9997'>    <font color='red'>}</font>
<a name='L9998'>    (<b>void</b>)<a href='../D/3966.html' title='Multiple defined in 3 places.'>PyUnicode_ClearFreeList</a>();
<a name='L9999'><font color='red'>}</font>
<a name='L10000'>
<a name='L10001'><b>void</b>
<a name='L10002'><a href='../R/3598.html' title='Multiple refered from 14 places.'>PyUnicode_InternInPlace</a>(PyObject **p)
<a name='L10003'><font color='red'>{</font>
<a name='L10004'>    <b>register</b> <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *s = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)(*p);
<a name='L10005'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *t;
<a name='L10006'>    <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyUnicode_Check(s))
<a name='L10007'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>(
<a name='L10008'>            "PyUnicode_InternInPlace: unicode strings only please!");
<a name='L10009'>    <i><font color='green'>/* If it's a subclass, we don't really know what putting</font></i>
<a name='L10010'><i><font color='green'>       it in the interned dict might do. */</font></i>
<a name='L10011'>    <b>if</b> (!PyUnicode_CheckExact(s))
<a name='L10012'>        <b>return</b>;
<a name='L10013'>    <b>if</b> (PyUnicode_CHECK_INTERNED(s))
<a name='L10014'>        <b>return</b>;
<a name='L10015'>    <b>if</b> (interned == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L10016'>        interned = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L10017'>        <b>if</b> (interned == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L10018'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>(); <i><font color='green'>/* Don't leave an exception */</font></i>
<a name='L10019'>            <b>return</b>;
<a name='L10020'>        <font color='red'>}</font>
<a name='L10021'>    <font color='red'>}</font>
<a name='L10022'>    <i><font color='green'>/* It might be that the GetItem call fails even</font></i>
<a name='L10023'><i><font color='green'>       though the key is present in the dictionary,</font></i>
<a name='L10024'><i><font color='green'>       namely when this happens during a stack overflow. */</font></i>
<a name='L10025'>    Py_ALLOW_RECURSION
<a name='L10026'>        t = <a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(interned, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)s);
<a name='L10027'>    <a href='../S/509.html#L104' title='Defined at 104 in Include/ceval.h.'>Py_END_ALLOW_RECURSION</a>
<a name='L10028'>
<a name='L10029'>        <b>if</b> (t) <font color='red'>{</font>
<a name='L10030'>            Py_INCREF(t);
<a name='L10031'>            Py_DECREF(*p);
<a name='L10032'>            *p = t;
<a name='L10033'>            <b>return</b>;
<a name='L10034'>        <font color='red'>}</font>
<a name='L10035'>
<a name='L10036'>    <a href='../S/509.html#L90' title='Defined at 90 in Include/ceval.h.'>PyThreadState_GET</a>()-&gt;recursion_critical = 1;
<a name='L10037'>    <b>if</b> (<a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(interned, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)s, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)s) &lt; 0) <font color='red'>{</font>
<a name='L10038'>        <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L10039'>        <a href='../S/509.html#L90' title='Defined at 90 in Include/ceval.h.'>PyThreadState_GET</a>()-&gt;recursion_critical = 0;
<a name='L10040'>        <b>return</b>;
<a name='L10041'>    <font color='red'>}</font>
<a name='L10042'>    <a href='../S/509.html#L90' title='Defined at 90 in Include/ceval.h.'>PyThreadState_GET</a>()-&gt;recursion_critical = 0;
<a name='L10043'>    <i><font color='green'>/* The two references in interned are not counted by refcnt.</font></i>
<a name='L10044'><i><font color='green'>       The deallocator will take care of this */</font></i>
<a name='L10045'>    <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(s) -= 2;
<a name='L10046'>    PyUnicode_CHECK_INTERNED(s) = SSTATE_INTERNED_MORTAL;
<a name='L10047'><font color='red'>}</font>
<a name='L10048'>
<a name='L10049'><b>void</b>
<a name='L10050'>PyUnicode_InternImmortal(PyObject **p)
<a name='L10051'><font color='red'>{</font>
<a name='L10052'>    <a href='../S/2828.html#L10002' title='Defined at 10002 in Objects/unicodeobject.c.'>PyUnicode_InternInPlace</a>(p);
<a name='L10053'>    <b>if</b> (PyUnicode_CHECK_INTERNED(*p) != SSTATE_INTERNED_IMMORTAL) <font color='red'>{</font>
<a name='L10054'>        PyUnicode_CHECK_INTERNED(*p) = SSTATE_INTERNED_IMMORTAL;
<a name='L10055'>        Py_INCREF(*p);
<a name='L10056'>    <font color='red'>}</font>
<a name='L10057'><font color='red'>}</font>
<a name='L10058'>
<a name='L10059'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L10060'><a href='../R/3597.html' title='Multiple refered from 97 places.'>PyUnicode_InternFromString</a>(<b>const</b> <b>char</b> *cp)
<a name='L10061'><font color='red'>{</font>
<a name='L10062'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(cp);
<a name='L10063'>    <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L10064'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10065'>    <a href='../S/2828.html#L10002' title='Defined at 10002 in Objects/unicodeobject.c.'>PyUnicode_InternInPlace</a>(&amp;s);
<a name='L10066'>    <b>return</b> s;
<a name='L10067'><font color='red'>}</font>
<a name='L10068'>
<a name='L10069'><b>void</b> <a href='../S/2686.html#L723' title='Refered from 723 in Modules/main.c.'>_Py_ReleaseInternedUnicodeStrings</a>(<b>void</b>)
<a name='L10070'><font color='red'>{</font>
<a name='L10071'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *keys;
<a name='L10072'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *s;
<a name='L10073'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, n;
<a name='L10074'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> immortal_size = 0, mortal_size = 0;
<a name='L10075'>
<a name='L10076'>    <b>if</b> (interned == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyDict_Check(interned))
<a name='L10077'>        <b>return</b>;
<a name='L10078'>    keys = <a href='../S/2787.html#L1630' title='Defined at 1630 in Objects/dictobject.c.'>PyDict_Keys</a>(interned);
<a name='L10079'>    <b>if</b> (keys == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyList_Check(keys)) <font color='red'>{</font>
<a name='L10080'>        <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L10081'>        <b>return</b>;
<a name='L10082'>    <font color='red'>}</font>
<a name='L10083'>
<a name='L10084'>    <i><font color='green'>/* Since _Py_ReleaseInternedUnicodeStrings() is intended to help a leak</font></i>
<a name='L10085'><i><font color='green'>       detector, interned unicode strings are not forcibly deallocated;</font></i>
<a name='L10086'><i><font color='green'>       rather, we give them their stolen references back, and then clear</font></i>
<a name='L10087'><i><font color='green'>       and DECREF the interned dict. */</font></i>
<a name='L10088'>
<a name='L10089'>    n = <a href='../S/534.html#L71' title='Defined at 71 in Include/listobject.h.'>PyList_GET_SIZE</a>(keys);
<a name='L10090'>    fprintf(stderr, "releasing %" <a href='../D/2597.html' title='Multiple defined in 4 places.'>PY_FORMAT_SIZE_T</a> "d interned strings\n",
<a name='L10091'>            n);
<a name='L10092'>    <b>for</b> (i = 0; i &lt; n; i++) <font color='red'>{</font>
<a name='L10093'>        s = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *) PyList_GET_ITEM(keys, i);
<a name='L10094'>        <b>switch</b> (s-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>) <font color='red'>{</font>
<a name='L10095'>        <b>case</b> SSTATE_NOT_INTERNED:
<a name='L10096'>            <i><font color='green'>/* XXX Shouldn't happen */</font></i>
<a name='L10097'>            <b>break</b>;
<a name='L10098'>        <b>case</b> SSTATE_INTERNED_IMMORTAL:
<a name='L10099'>            <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(s) += 1;
<a name='L10100'>            immortal_size += s-&gt;length;
<a name='L10101'>            <b>break</b>;
<a name='L10102'>        <b>case</b> SSTATE_INTERNED_MORTAL:
<a name='L10103'>            <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(s) += 2;
<a name='L10104'>            mortal_size += s-&gt;length;
<a name='L10105'>            <b>break</b>;
<a name='L10106'>        <b>default</b>:
<a name='L10107'>            <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("Inconsistent interned string state.");
<a name='L10108'>        <font color='red'>}</font>
<a name='L10109'>        s-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = SSTATE_NOT_INTERNED;
<a name='L10110'>    <font color='red'>}</font>
<a name='L10111'>    fprintf(stderr, "total size of all interned strings: "
<a name='L10112'>            "%" <a href='../D/2597.html' title='Multiple defined in 4 places.'>PY_FORMAT_SIZE_T</a> "d/%" <a href='../D/2597.html' title='Multiple defined in 4 places.'>PY_FORMAT_SIZE_T</a> "d "
<a name='L10113'>            "mortal/immortal\n", mortal_size, immortal_size);
<a name='L10114'>    Py_DECREF(keys);
<a name='L10115'>    <a href='../S/2787.html#L870' title='Defined at 870 in Objects/dictobject.c.'>PyDict_Clear</a>(interned);
<a name='L10116'>    Py_DECREF(interned);
<a name='L10117'>    interned = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10118'><font color='red'>}</font>
<a name='L10119'>
<a name='L10120'>
<a name='L10121'><i><font color='green'>/********************* Unicode Iterator **************************/</font></i>
<a name='L10122'>
<a name='L10123'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L10124'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L10125'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> it_index;
<a name='L10126'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *it_seq; <i><font color='green'>/* Set to NULL when iterator is exhausted */</font></i>
<a name='L10127'><font color='red'>}</font> <a href='../R/11150.html' title='Multiple refered from 3 places.'>unicodeiterobject</a>;
<a name='L10128'>
<a name='L10129'><b>static</b> <b>void</b>
<a name='L10130'><a href='../S/2828.html#L10192' title='Refered from 10192 in Objects/unicodeobject.c.'>unicodeiter_dealloc</a>(unicodeiterobject *it)
<a name='L10131'><font color='red'>{</font>
<a name='L10132'>    <a href='../S/545.html#L281' title='Defined at 281 in Include/objimpl.h.'>_PyObject_GC_UNTRACK</a>(it);
<a name='L10133'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(it-&gt;it_seq);
<a name='L10134'>    <a href='../D/3617.html' title='Multiple defined in 2 places.'>PyObject_GC_Del</a>(it);
<a name='L10135'><font color='red'>}</font>
<a name='L10136'>
<a name='L10137'><b>static</b> <b>int</b>
<a name='L10138'><a href='../S/2828.html#L10209' title='Refered from 10209 in Objects/unicodeobject.c.'>unicodeiter_traverse</a>(unicodeiterobject *it, visitproc visit, <b>void</b> *arg)
<a name='L10139'><font color='red'>{</font>
<a name='L10140'>    Py_VISIT(it-&gt;it_seq);
<a name='L10141'>    <b>return</b> 0;
<a name='L10142'><font color='red'>}</font>
<a name='L10143'>
<a name='L10144'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L10145'><a href='../S/2828.html#L10214' title='Refered from 10214 in Objects/unicodeobject.c.'>unicodeiter_next</a>(unicodeiterobject *it)
<a name='L10146'><font color='red'>{</font>
<a name='L10147'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *seq;
<a name='L10148'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item;
<a name='L10149'>
<a name='L10150'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(it != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L10151'>    seq = it-&gt;it_seq;
<a name='L10152'>    <b>if</b> (seq == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L10153'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10154'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyUnicode_Check(seq));
<a name='L10155'>
<a name='L10156'>    <b>if</b> (it-&gt;it_index &lt; <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(seq)) <font color='red'>{</font>
<a name='L10157'>        item = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(
<a name='L10158'>            <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(seq)+it-&gt;it_index, 1);
<a name='L10159'>        <b>if</b> (item != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L10160'>            ++it-&gt;it_index;
<a name='L10161'>        <b>return</b> item;
<a name='L10162'>    <font color='red'>}</font>
<a name='L10163'>
<a name='L10164'>    Py_DECREF(seq);
<a name='L10165'>    it-&gt;it_seq = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10166'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10167'><font color='red'>}</font>
<a name='L10168'>
<a name='L10169'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L10170'><a href='../S/2828.html#L10181' title='Refered from 10181 in Objects/unicodeobject.c.'>unicodeiter_len</a>(unicodeiterobject *it)
<a name='L10171'><font color='red'>{</font>
<a name='L10172'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = 0;
<a name='L10173'>    <b>if</b> (it-&gt;it_seq)
<a name='L10174'>        len = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(it-&gt;it_seq) - it-&gt;it_index;
<a name='L10175'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(len);
<a name='L10176'><font color='red'>}</font>
<a name='L10177'>
<a name='L10178'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(length_hint_doc, "Private method returning an estimate of len(list(it)).");
<a name='L10179'>
<a name='L10180'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> unicodeiter_methods[] = <font color='red'>{</font>
<a name='L10181'>    <font color='red'>{</font>"__length_hint__", (PyCFunction)<a href='../S/2828.html#L10170' title='Defined at 10170 in Objects/unicodeobject.c.'>unicodeiter_len</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L10182'>     length_hint_doc<font color='red'>}</font>,
<a name='L10183'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,      <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>       <i><font color='green'>/* sentinel */</font></i>
<a name='L10184'><font color='red'>}</font>;
<a name='L10185'>
<a name='L10186'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyUnicodeIter_Type = <font color='red'>{</font>
<a name='L10187'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(&amp;PyType_Type, 0)
<a name='L10188'>    "str_iterator",         <i><font color='green'>/* tp_name */</font></i>
<a name='L10189'>    <b>sizeof</b>(<a href='../S/2828.html#L10127' title='Defined at 10127 in Objects/unicodeobject.c.'>unicodeiterobject</a>),      <i><font color='green'>/* tp_basicsize */</font></i>
<a name='L10190'>    0,                  <i><font color='green'>/* tp_itemsize */</font></i>
<a name='L10191'>    <i><font color='green'>/* methods */</font></i>
<a name='L10192'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2828.html#L10130' title='Defined at 10130 in Objects/unicodeobject.c.'>unicodeiter_dealloc</a>,    <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L10193'>    0,                  <i><font color='green'>/* tp_print */</font></i>
<a name='L10194'>    0,                  <i><font color='green'>/* tp_getattr */</font></i>
<a name='L10195'>    0,                  <i><font color='green'>/* tp_setattr */</font></i>
<a name='L10196'>    0,                  <i><font color='green'>/* tp_reserved */</font></i>
<a name='L10197'>    0,                  <i><font color='green'>/* tp_repr */</font></i>
<a name='L10198'>    0,                  <i><font color='green'>/* tp_as_number */</font></i>
<a name='L10199'>    0,                  <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L10200'>    0,                  <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L10201'>    0,                  <i><font color='green'>/* tp_hash */</font></i>
<a name='L10202'>    0,                  <i><font color='green'>/* tp_call */</font></i>
<a name='L10203'>    0,                  <i><font color='green'>/* tp_str */</font></i>
<a name='L10204'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,        <i><font color='green'>/* tp_getattro */</font></i>
<a name='L10205'>    0,                  <i><font color='green'>/* tp_setattro */</font></i>
<a name='L10206'>    0,                  <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L10207'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,<i><font color='green'>/* tp_flags */</font></i>
<a name='L10208'>    0,                  <i><font color='green'>/* tp_doc */</font></i>
<a name='L10209'>    (traverseproc)<a href='../S/2828.html#L10138' title='Defined at 10138 in Objects/unicodeobject.c.'>unicodeiter_traverse</a>, <i><font color='green'>/* tp_traverse */</font></i>
<a name='L10210'>    0,                  <i><font color='green'>/* tp_clear */</font></i>
<a name='L10211'>    0,                  <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L10212'>    0,                  <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L10213'>    <a href='../S/2803.html#L933' title='Defined at 933 in Objects/object.c.'>PyObject_SelfIter</a>,          <i><font color='green'>/* tp_iter */</font></i>
<a name='L10214'>    (iternextfunc)<a href='../S/2828.html#L10145' title='Defined at 10145 in Objects/unicodeobject.c.'>unicodeiter_next</a>,     <i><font color='green'>/* tp_iternext */</font></i>
<a name='L10215'>    unicodeiter_methods,            <i><font color='green'>/* tp_methods */</font></i>
<a name='L10216'>    0,
<a name='L10217'><font color='red'>}</font>;
<a name='L10218'>
<a name='L10219'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L10220'><a href='../R/11101.html' title='Multiple refered from 2 places.'>unicode_iter</a>(PyObject *seq)
<a name='L10221'><font color='red'>{</font>
<a name='L10222'>    <a href='../S/2828.html#L10127' title='Defined at 10127 in Objects/unicodeobject.c.'>unicodeiterobject</a> *it;
<a name='L10223'>
<a name='L10224'>    <b>if</b> (!PyUnicode_Check(seq)) <font color='red'>{</font>
<a name='L10225'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L10226'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10227'>    <font color='red'>}</font>
<a name='L10228'>    it = PyObject_GC_New(<a href='../S/2828.html#L10127' title='Defined at 10127 in Objects/unicodeobject.c.'>unicodeiterobject</a>, &amp;PyUnicodeIter_Type);
<a name='L10229'>    <b>if</b> (it == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L10230'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10231'>    it-&gt;it_index = 0;
<a name='L10232'>    Py_INCREF(seq);
<a name='L10233'>    it-&gt;it_seq = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)seq;
<a name='L10234'>    <a href='../S/545.html#L266' title='Defined at 266 in Include/objimpl.h.'>_PyObject_GC_TRACK</a>(it);
<a name='L10235'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)it;
<a name='L10236'><font color='red'>}</font>
<a name='L10237'>
<a name='L10238'><a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>
<a name='L10239'><a href='../R/3843.html' title='Multiple refered from 14 places.'>Py_UNICODE_strlen</a>(<b>const</b> Py_UNICODE *u)
<a name='L10240'><font color='red'>{</font>
<a name='L10241'>    <b>int</b> res = 0;
<a name='L10242'>    <b>while</b>(*u++)
<a name='L10243'>        res++;
<a name='L10244'>    <b>return</b> res;
<a name='L10245'><font color='red'>}</font>
<a name='L10246'>
<a name='L10247'><a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*
<a name='L10248'><a href='../R/3842.html' title='Multiple refered from 5 places.'>Py_UNICODE_strcpy</a>(Py_UNICODE *s1, <b>const</b> Py_UNICODE *s2)
<a name='L10249'><font color='red'>{</font>
<a name='L10250'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *u = s1;
<a name='L10251'>    <b>while</b> ((*u++ = *s2++));
<a name='L10252'>    <b>return</b> s1;
<a name='L10253'><font color='red'>}</font>
<a name='L10254'>
<a name='L10255'><a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*
<a name='L10256'><a href='../R/3845.html' title='Multiple refered from 2 places.'>Py_UNICODE_strncpy</a>(Py_UNICODE *s1, <b>const</b> Py_UNICODE *s2, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> n)
<a name='L10257'><font color='red'>{</font>
<a name='L10258'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *u = s1;
<a name='L10259'>    <b>while</b> ((*u++ = *s2++))
<a name='L10260'>        <b>if</b> (n-- == 0)
<a name='L10261'>            <b>break</b>;
<a name='L10262'>    <b>return</b> s1;
<a name='L10263'><font color='red'>}</font>
<a name='L10264'>
<a name='L10265'><a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*
<a name='L10266'>Py_UNICODE_strcat(Py_UNICODE *s1, <b>const</b> Py_UNICODE *s2)
<a name='L10267'><font color='red'>{</font>
<a name='L10268'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *u1 = s1;
<a name='L10269'>    u1 += <a href='../S/2828.html#L10239' title='Defined at 10239 in Objects/unicodeobject.c.'>Py_UNICODE_strlen</a>(u1);
<a name='L10270'>    <a href='../S/2828.html#L10248' title='Defined at 10248 in Objects/unicodeobject.c.'>Py_UNICODE_strcpy</a>(u1, s2);
<a name='L10271'>    <b>return</b> s1;
<a name='L10272'><font color='red'>}</font>
<a name='L10273'>
<a name='L10274'><b>int</b>
<a name='L10275'><a href='../R/3841.html' title='Multiple refered from 2 places.'>Py_UNICODE_strcmp</a>(<b>const</b> Py_UNICODE *s1, <b>const</b> Py_UNICODE *s2)
<a name='L10276'><font color='red'>{</font>
<a name='L10277'>    <b>while</b> (*s1 &amp;&amp; *s2 &amp;&amp; *s1 == *s2)
<a name='L10278'>        s1++, s2++;
<a name='L10279'>    <b>if</b> (*s1 &amp;&amp; *s2)
<a name='L10280'>        <b>return</b> (*s1 &lt; *s2) ? -1 : +1;
<a name='L10281'>    <b>if</b> (*s1)
<a name='L10282'>        <b>return</b> 1;
<a name='L10283'>    <b>if</b> (*s2)
<a name='L10284'>        <b>return</b> -1;
<a name='L10285'>    <b>return</b> 0;
<a name='L10286'><font color='red'>}</font>
<a name='L10287'>
<a name='L10288'><b>int</b>
<a name='L10289'><a href='../S/2729.html#L457' title='Refered from 457 in Modules/zipimport.c.'>Py_UNICODE_strncmp</a>(<b>const</b> Py_UNICODE *s1, <b>const</b> Py_UNICODE *s2, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> n)
<a name='L10290'><font color='red'>{</font>
<a name='L10291'>    <b>register</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> u1, u2;
<a name='L10292'>    <b>for</b> (; n != 0; n--) <font color='red'>{</font>
<a name='L10293'>        u1 = *s1;
<a name='L10294'>        u2 = *s2;
<a name='L10295'>        <b>if</b> (u1 != u2)
<a name='L10296'>            <b>return</b> (u1 &lt; u2) ? -1 : +1;
<a name='L10297'>        <b>if</b> (u1 == '\0')
<a name='L10298'>            <b>return</b> 0;
<a name='L10299'>        s1++;
<a name='L10300'>        s2++;
<a name='L10301'>    <font color='red'>}</font>
<a name='L10302'>    <b>return</b> 0;
<a name='L10303'><font color='red'>}</font>
<a name='L10304'>
<a name='L10305'><a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*
<a name='L10306'><a href='../R/3840.html' title='Multiple refered from 6 places.'>Py_UNICODE_strchr</a>(<b>const</b> Py_UNICODE *s, Py_UNICODE c)
<a name='L10307'><font color='red'>{</font>
<a name='L10308'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L10309'>    <b>for</b> (p = s; *p; p++)
<a name='L10310'>        <b>if</b> (*p == c)
<a name='L10311'>            <b>return</b> (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*)p;
<a name='L10312'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10313'><font color='red'>}</font>
<a name='L10314'>
<a name='L10315'><a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*
<a name='L10316'><a href='../R/3846.html' title='Multiple refered from 2 places.'>Py_UNICODE_strrchr</a>(<b>const</b> Py_UNICODE *s, Py_UNICODE c)
<a name='L10317'><font color='red'>{</font>
<a name='L10318'>    <b>const</b> <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L10319'>    p = s + <a href='../S/2828.html#L10239' title='Defined at 10239 in Objects/unicodeobject.c.'>Py_UNICODE_strlen</a>(s);
<a name='L10320'>    <b>while</b> (p != s) <font color='red'>{</font>
<a name='L10321'>        p--;
<a name='L10322'>        <b>if</b> (*p == c)
<a name='L10323'>            <b>return</b> (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*)p;
<a name='L10324'>    <font color='red'>}</font>
<a name='L10325'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10326'><font color='red'>}</font>
<a name='L10327'>
<a name='L10328'><a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>*
<a name='L10329'>PyUnicode_AsUnicodeCopy(PyObject *object)
<a name='L10330'><font color='red'>{</font>
<a name='L10331'>    <a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *unicode = (<a href='../S/587.html#L388' title='Defined at 388 in Include/unicodeobject.h.'>PyUnicodeObject</a> *)<a href='../S/500.html#L6' title='Defined at 6 in Include/asdl.h.'>object</a>;
<a name='L10332'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *copy;
<a name='L10333'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L10334'>
<a name='L10335'>    <i><font color='green'>/* Ensure we won't overflow the size. */</font></i>
<a name='L10336'>    <b>if</b> (<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode) &gt; ((<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)) - 1)) <font color='red'>{</font>
<a name='L10337'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L10338'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10339'>    <font color='red'>}</font>
<a name='L10340'>    size = <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(unicode) + 1; <i><font color='green'>/* copy the nul character */</font></i>
<a name='L10341'>    size *= <b>sizeof</b>(<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>);
<a name='L10342'>    copy = <a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>(size);
<a name='L10343'>    <b>if</b> (copy == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L10344'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L10345'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L10346'>    <font color='red'>}</font>
<a name='L10347'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(copy, <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(unicode), size);
<a name='L10348'>    <b>return</b> copy;
<a name='L10349'><font color='red'>}</font>
<a name='L10350'>
<a name='L10351'><i><font color='green'>/* A _string module, to export formatter_parser and formatter_field_name_split</font></i>
<a name='L10352'><i><font color='green'>   to the string.Formatter class implemented in Python. */</font></i>
<a name='L10353'>
<a name='L10354'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> _string_methods[] = <font color='red'>{</font>
<a name='L10355'>    <font color='red'>{</font>"formatter_field_name_split", (PyCFunction) <a href='../S/2818.html#L1331' title='Defined at 1331 in Objects/stringlib/string_format.h.'>formatter_field_name_split</a>,
<a name='L10356'>     METH_O, <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("split the argument as a field name")<font color='red'>}</font>,
<a name='L10357'>    <font color='red'>{</font>"formatter_parser", (PyCFunction) <a href='../S/2818.html#L1191' title='Defined at 1191 in Objects/stringlib/string_format.h.'>formatter_parser</a>,
<a name='L10358'>     METH_O, <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("parse the argument as a format string")<font color='red'>}</font>,
<a name='L10359'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L10360'><font color='red'>}</font>;
<a name='L10361'>
<a name='L10362'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> _string_module = <font color='red'>{</font>
<a name='L10363'>    <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L10364'>    "_string",
<a name='L10365'>    <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("string helper module"),
<a name='L10366'>    0,
<a name='L10367'>    _string_methods,
<a name='L10368'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L10369'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L10370'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L10371'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L10372'><font color='red'>}</font>;
<a name='L10373'>
<a name='L10374'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L10375'><a href='../R/3039.html' title='Multiple refered from 2 places.'>PyInit__string</a>(<b>void</b>)
<a name='L10376'><font color='red'>{</font>
<a name='L10377'>    <b>return</b> PyModule_Create(&amp;_string_module);
<a name='L10378'><font color='red'>}</font>
<a name='L10379'>
<a name='L10380'>
<a name='L10381'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L10382'><font color='red'>}</font>
<a name='L10383'><font color='darkred'>#endif</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L186'>[^]</a><a href='#L10375'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
