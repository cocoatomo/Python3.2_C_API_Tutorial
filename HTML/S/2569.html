<html>
<head>
<title>Modules/_io/_iomodule.h</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/<a href='../files/3385.html'>_io</a>/_iomodule.h</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L70'>[^]</a>[v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2><a href='../J/368.html' title='Multiple included from 7 places.'>INCLUDED FROM</a></h2>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L70' title='Defined at 70.'>PyAPI_DATA</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*</font></i>
<a name='L2'><i><font color='green'> * Declarations shared between the different parts of the io module</font></i>
<a name='L3'><i><font color='green'> */</font></i>
<a name='L4'>
<a name='L5'><i><font color='green'>/* ABCs */</font></i>
<a name='L6'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyIOBase_Type;
<a name='L7'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyRawIOBase_Type;
<a name='L8'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyBufferedIOBase_Type;
<a name='L9'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyTextIOBase_Type;
<a name='L10'>
<a name='L11'><i><font color='green'>/* Concrete classes */</font></i>
<a name='L12'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyFileIO_Type;
<a name='L13'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyBytesIO_Type;
<a name='L14'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyStringIO_Type;
<a name='L15'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyBufferedReader_Type;
<a name='L16'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyBufferedWriter_Type;
<a name='L17'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyBufferedRWPair_Type;
<a name='L18'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyBufferedRandom_Type;
<a name='L19'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyTextIOWrapper_Type;
<a name='L20'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyIncrementalNewlineDecoder_Type;
<a name='L21'>
<a name='L22'>
<a name='L23'><b>extern</b> <b>int</b> <a href='../S/2568.html#L580' title='Defined at 580 in Modules/_io/_iomodule.c.'>_PyIO_ConvertSsize_t</a>(PyObject *, <b>void</b> *);
<a name='L24'>
<a name='L25'><i><font color='green'>/* These functions are used as METH_NOARGS methods, are normally called</font></i>
<a name='L26'><i><font color='green'> * with args=NULL, and return a new reference.</font></i>
<a name='L27'><i><font color='green'> * BUT when args=Py_True is passed, they return a borrowed reference.</font></i>
<a name='L28'><i><font color='green'> */</font></i>
<a name='L29'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* <a href='../S/2573.html#L343' title='Defined at 343 in Modules/_io/iobase.c.'>_PyIOBase_check_readable</a>(PyObject *self, PyObject *args);
<a name='L30'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* <a href='../S/2573.html#L372' title='Defined at 372 in Modules/_io/iobase.c.'>_PyIOBase_check_writable</a>(PyObject *self, PyObject *args);
<a name='L31'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* <a href='../S/2573.html#L314' title='Defined at 314 in Modules/_io/iobase.c.'>_PyIOBase_check_seekable</a>(PyObject *self, PyObject *args);
<a name='L32'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* <a href='../S/2573.html#L160' title='Defined at 160 in Modules/_io/iobase.c.'>_PyIOBase_check_closed</a>(PyObject *self, PyObject *args);
<a name='L33'>
<a name='L34'><i><font color='green'>/* Helper for finalization.</font></i>
<a name='L35'><i><font color='green'>   This function will revive an object ready to be deallocated and try to</font></i>
<a name='L36'><i><font color='green'>   close() it. It returns 0 if the object can be destroyed, or -1 if it</font></i>
<a name='L37'><i><font color='green'>   is alive again. */</font></i>
<a name='L38'><b>extern</b> <b>int</b> <a href='../S/2573.html#L196' title='Defined at 196 in Modules/_io/iobase.c.'>_PyIOBase_finalize</a>(PyObject *self);
<a name='L39'>
<a name='L40'><i><font color='green'>/* Returns true if the given FileIO object is closed.</font></i>
<a name='L41'><i><font color='green'>   Doesn't check the argument type, so be careful! */</font></i>
<a name='L42'><b>extern</b> <b>int</b> <a href='../S/2572.html#L69' title='Defined at 69 in Modules/_io/fileio.c.'>_PyFileIO_closed</a>(PyObject *self);
<a name='L43'>
<a name='L44'><i><font color='green'>/* Shortcut to the core of the IncrementalNewlineDecoder.decode method */</font></i>
<a name='L45'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2575.html#L245' title='Defined at 245 in Modules/_io/textio.c.'>_PyIncrementalNewlineDecoder_decode</a>(
<a name='L46'>    PyObject *self, PyObject *input, <b>int</b> final);
<a name='L47'>
<a name='L48'><i><font color='green'>/* Finds the first line ending between `start` and `end`.</font></i>
<a name='L49'><i><font color='green'>   If found, returns the index after the line ending and doesn't touch</font></i>
<a name='L50'><i><font color='green'>   `*consumed`.</font></i>
<a name='L51'><i><font color='green'>   If not found, returns -1 and sets `*consumed` to the number of characters</font></i>
<a name='L52'><i><font color='green'>   which can be safely put aside until another search.</font></i>
<a name='L53'><i><font color='green'>   </font></i>
<a name='L54'><i><font color='green'>   NOTE: for performance reasons, `end` must point to a NUL character ('\0'). </font></i>
<a name='L55'><i><font color='green'>   Otherwise, the function will scan further and return garbage. */</font></i>
<a name='L56'><b>extern</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2575.html#L1590' title='Defined at 1590 in Modules/_io/textio.c.'>_PyIO_find_line_ending</a>(
<a name='L57'>    <b>int</b> translated, <b>int</b> universal, PyObject *readnl,
<a name='L58'>    Py_UNICODE *start, Py_UNICODE *end, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *consumed);
<a name='L59'>
<a name='L60'>
<a name='L61'><font color='darkred'>#define</font> <a href='../R/701.html' title='Multiple refered from 7 places.'>DEFAULT_BUFFER_SIZE</a> (8 * 1024)  <i><font color='green'>/* bytes */</font></i>
<a name='L62'>
<a name='L63'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L64'>    <a href='../S/558.html#L11' title='Defined at 11 in Include/pyerrors.h.'>PyException_HEAD</a>
<a name='L65'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *myerrno;
<a name='L66'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *strerror;
<a name='L67'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *filename; <i><font color='green'>/* Not used, but part of the IOError object */</font></i>
<a name='L68'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> written;
<a name='L69'><font color='red'>}</font> <a href='../R/2509.html' title='Multiple refered from 4 places.'>PyBlockingIOErrorObject</a>;
<a name='L70'><a href='../R/2474.html' title='Multiple refered from 37 places.'>PyAPI_DATA</a>(PyObject *) PyExc_BlockingIOError;
<a name='L71'>
<a name='L72'><i><font color='green'>/*</font></i>
<a name='L73'><i><font color='green'> * Offset type for positioning.</font></i>
<a name='L74'><i><font color='green'> */</font></i>
<a name='L75'>
<a name='L76'><i><font color='green'>/* Printing a variable of type off_t (with e.g., PyString_FromFormat)</font></i>
<a name='L77'><i><font color='green'>   correctly and without producing compiler warnings is surprisingly painful.</font></i>
<a name='L78'><i><font color='green'>   We identify an integer type whose size matches off_t and then: (1) cast the</font></i>
<a name='L79'><i><font color='green'>   off_t to that integer type and (2) use the appropriate conversion</font></i>
<a name='L80'><i><font color='green'>   specification.  The cast is necessary: gcc complains about formatting a</font></i>
<a name='L81'><i><font color='green'>   long with "%lld" even when both long and long long have the same</font></i>
<a name='L82'><i><font color='green'>   precision. */</font></i>
<a name='L83'>
<a name='L84'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L142' title='Defined at 142 in PC/pyconfig.h.'>MS_WIN64</a>) || <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>)
<a name='L85'>
<a name='L86'><i><font color='green'>/* Windows uses long long for offsets */</font></i>
<a name='L87'><b>typedef</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> <a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a>;
<a name='L88'><font color='darkred'># define</font> PyLong_AsOff_t     PyLong_AsLongLong
<a name='L89'><font color='darkred'># define</font> PyLong_FromOff_t   PyLong_FromLongLong
<a name='L90'><font color='darkred'># define</font> PY_OFF_T_MAX       <a href='../D/2602.html' title='Multiple defined in 5 places.'>PY_LLONG_MAX</a>
<a name='L91'><font color='darkred'># define</font> PY_OFF_T_MIN       <a href='../D/2603.html' title='Multiple defined in 5 places.'>PY_LLONG_MIN</a>
<a name='L92'><font color='darkred'># define</font> PY_OFF_T_COMPAT    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> <i><font color='green'>/* type compatible with off_t */</font></i>
<a name='L93'><font color='darkred'># define</font> PY_PRIdOFF         "lld"        <i><font color='green'>/* format to use for that type */</font></i>
<a name='L94'>
<a name='L95'><font color='darkred'>#else</font>
<a name='L96'>
<a name='L97'><i><font color='green'>/* Other platforms use off_t */</font></i>
<a name='L98'><b>typedef</b> <a href='../D/10193.html' title='Multiple defined in 2 places.'>off_t</a> <a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a>;
<a name='L99'><font color='darkred'>#if</font> (<a href='../D/4737.html' title='Multiple defined in 3 places.'>SIZEOF_OFF_T</a> == <a href='../D/4740.html' title='Multiple defined in 6 places.'>SIZEOF_SIZE_T</a>)
<a name='L100'><font color='darkred'># define</font> PyLong_AsOff_t     <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>
<a name='L101'><font color='darkred'># define</font> PyLong_FromOff_t   <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>
<a name='L102'><font color='darkred'># define</font> PY_OFF_T_MAX       <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>
<a name='L103'><font color='darkred'># define</font> PY_OFF_T_MIN       <a href='../D/2626.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MIN</a>
<a name='L104'><font color='darkred'># define</font> PY_OFF_T_COMPAT    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L105'><font color='darkred'># define</font> PY_PRIdOFF         "zd"
<a name='L106'><font color='darkred'>#elif</font> (<a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a> &amp;&amp; <a href='../D/4737.html' title='Multiple defined in 3 places.'>SIZEOF_OFF_T</a> == <a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a>)
<a name='L107'><font color='darkred'># define</font> PyLong_AsOff_t     PyLong_AsLongLong
<a name='L108'><font color='darkred'># define</font> PyLong_FromOff_t   PyLong_FromLongLong
<a name='L109'><font color='darkred'># define</font> PY_OFF_T_MAX       <a href='../D/2602.html' title='Multiple defined in 5 places.'>PY_LLONG_MAX</a>
<a name='L110'><font color='darkred'># define</font> PY_OFF_T_MIN       <a href='../D/2603.html' title='Multiple defined in 5 places.'>PY_LLONG_MIN</a>
<a name='L111'><font color='darkred'># define</font> PY_OFF_T_COMPAT    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>
<a name='L112'><font color='darkred'># define</font> PY_PRIdOFF         "lld"
<a name='L113'><font color='darkred'>#elif</font> (<a href='../D/4737.html' title='Multiple defined in 3 places.'>SIZEOF_OFF_T</a> == <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>)
<a name='L114'><font color='darkred'># define</font> PyLong_AsOff_t     PyLong_AsLong
<a name='L115'><font color='darkred'># define</font> PyLong_FromOff_t   PyLong_FromLong
<a name='L116'><font color='darkred'># define</font> PY_OFF_T_MAX       <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>
<a name='L117'><font color='darkred'># define</font> PY_OFF_T_MIN       <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a>
<a name='L118'><font color='darkred'># define</font> PY_OFF_T_COMPAT    <b>long</b>
<a name='L119'><font color='darkred'># define</font> PY_PRIdOFF         "ld"
<a name='L120'><font color='darkred'>#else</font>
<a name='L121'><font color='darkred'># error</font> <a href='../D/10193.html' title='Multiple defined in 2 places.'>off_t</a> does not match either <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>, <b>long</b>, or <b>long</b> <b>long</b>!
<a name='L122'><font color='darkred'>#endif</font>
<a name='L123'>
<a name='L124'><font color='darkred'>#endif</font>
<a name='L125'>
<a name='L126'><b>extern</b> <a href='../D/4353.html' title='Multiple defined in 3 places.'>Py_off_t</a> <a href='../S/2568.html#L534' title='Defined at 534 in Modules/_io/_iomodule.c.'>PyNumber_AsOff_t</a>(PyObject *item, PyObject *err);
<a name='L127'>
<a name='L128'><i><font color='green'>/* Implementation details */</font></i>
<a name='L129'>
<a name='L130'><i><font color='green'>/* IO module structure */</font></i>
<a name='L131'>
<a name='L132'><b>extern</b> PyModuleDef _PyIO_Module;
<a name='L133'>
<a name='L134'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L135'>    <b>int</b> initialized;
<a name='L136'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *os_module;
<a name='L137'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *locale_module;
<a name='L138'>
<a name='L139'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *unsupported_operation;
<a name='L140'><font color='red'>}</font> _PyIO_State;
<a name='L141'>
<a name='L142'><font color='darkred'>#define</font> <a href='../R/1573.html' title='Multiple refered from 4 places.'>IO_MOD_STATE</a>(mod) ((_PyIO_State *)<a href='../S/2802.html#L237' title='Defined at 237 in Objects/moduleobject.c.'>PyModule_GetState</a>(mod))
<a name='L143'><font color='darkred'>#define</font> <a href='../R/1575.html' title='Multiple refered from 5 places.'>IO_STATE</a> <a href='../S/2569.html#L142' title='Defined at 142 in Modules/_io/_iomodule.h.'>IO_MOD_STATE</a>(<a href='../S/3134.html#L236' title='Defined at 236 in Python/pystate.c.'>PyState_FindModule</a>(&amp;_PyIO_Module))
<a name='L144'>
<a name='L145'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_close;
<a name='L146'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_closed;
<a name='L147'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_decode;
<a name='L148'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_encode;
<a name='L149'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_fileno;
<a name='L150'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_flush;
<a name='L151'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_getstate;
<a name='L152'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_isatty;
<a name='L153'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_newlines;
<a name='L154'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_nl;
<a name='L155'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_read;
<a name='L156'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_read1;
<a name='L157'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_readable;
<a name='L158'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_readinto;
<a name='L159'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_readline;
<a name='L160'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_reset;
<a name='L161'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_seek;
<a name='L162'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_seekable;
<a name='L163'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_setstate;
<a name='L164'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_tell;
<a name='L165'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_truncate;
<a name='L166'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_writable;
<a name='L167'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_str_write;
<a name='L168'>
<a name='L169'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_empty_str;
<a name='L170'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_empty_bytes;
<a name='L171'><b>extern</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *_PyIO_zero;
<a name='L172'>
<a name='L173'><b>extern</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> _PyBytesIOBuffer_Type;
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;][^]<a href='#L70'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
