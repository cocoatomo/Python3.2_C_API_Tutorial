<html>
<head>
<title>Modules/zlibmodule.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/zlibmodule.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L53'>[^]</a><a href='#L1095'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L53' title='Defined at 53.'>zlib_error</a>
<li><a href='#L86' title='Defined at 86.'>newcompobject</a>
<li><a href='#L115' title='Defined at 115.'>PyZlib_compress</a>
<li><a href='#L204' title='Defined at 204.'>PyZlib_decompress</a>
<li><a href='#L314' title='Defined at 314.'>PyZlib_compressobj</a>
<li><a href='#L353' title='Defined at 353.'>PyZlib_decompressobj</a>
<li><a href='#L389' title='Defined at 389.'>Dealloc</a>
<li><a href='#L400' title='Defined at 400.'>Comp_dealloc</a>
<li><a href='#L408' title='Defined at 408.'>Decomp_dealloc</a>
<li><a href='#L424' title='Defined at 424.'>PyZlib_objcompress</a>
<li><a href='#L506' title='Defined at 506.'>PyZlib_objdecompress</a>
<li><a href='#L635' title='Defined at 635.'>PyZlib_flush</a>
<li><a href='#L724' title='Defined at 724.'>PyZlib_copy</a>
<li><a href='#L774' title='Defined at 774.'>PyZlib_uncopy</a>
<li><a href='#L830' title='Defined at 830.'>PyZlib_unflush</a>
<li><a href='#L938' title='Defined at 938.'>PyZlib_adler32</a>
<li><a href='#L965' title='Defined at 965.'>PyZlib_crc32</a>
<li><a href='#L1095' title='Defined at 1095.'>PyInit_zlib</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* zlibmodule.c -- gzip-compatible data compression */</font></i>
<a name='L2'><i><font color='green'>/* See http://www.gzip.org/zlib/ */</font></i>
<a name='L3'>
<a name='L4'><i><font color='green'>/* Windows users:  read Python's PCbuild\readme.txt */</font></i>
<a name='L5'>
<a name='L6'>
<a name='L7'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L8'><font color='darkred'>#include</font> "<a href='577.html'>structmember.h</a>"
<a name='L9'><font color='darkred'>#include</font> "<a href='2769.html'>zlib.h</a>"
<a name='L10'>
<a name='L11'><font color='darkred'>#ifdef</font> <a href='../D/5537.html' title='Multiple defined in 3 places.'>WITH_THREAD</a>
<a name='L12'><font color='darkred'>    #include</font> "<a href='572.html'>pythread.h</a>"
<a name='L13'><font color='darkred'>    #define</font> <a href='../R/873.html' title='Multiple refered from 6 places.'>ENTER_ZLIB</a>(obj) \
<a name='L14'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>; \
<a name='L15'>        <a href='../D/3846.html' title='Multiple defined in 10 places.'>PyThread_acquire_lock</a>((obj)-&gt;<a href='../S/3148.html#L9' title='Defined at 9 in Python/thread_lwp.h.'>lock</a>, 1); \
<a name='L16'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>;
<a name='L17'><font color='darkred'>    #define</font> <a href='../R/1706.html' title='Multiple refered from 8 places.'>LEAVE_ZLIB</a>(obj) <a href='../D/3858.html' title='Multiple defined in 11 places.'>PyThread_release_lock</a>((obj)-&gt;<a href='../S/3148.html#L9' title='Defined at 9 in Python/thread_lwp.h.'>lock</a>);
<a name='L18'><font color='darkred'>#else</font>
<a name='L19'><font color='darkred'>    #define</font> <a href='../R/873.html' title='Multiple refered from 6 places.'>ENTER_ZLIB</a>(obj)
<a name='L20'><font color='darkred'>    #define</font> <a href='../R/1706.html' title='Multiple refered from 8 places.'>LEAVE_ZLIB</a>(obj)
<a name='L21'><font color='darkred'>#endif</font>
<a name='L22'>
<a name='L23'><i><font color='green'>/* The following parameters are copied from zutil.h, version 0.95 */</font></i>
<a name='L24'><font color='darkred'>#define</font> <a href='../R/713.html' title='Multiple refered from 2 places.'>DEFLATED</a>   8
<a name='L25'><font color='darkred'>#if</font> <a href='../D/2069.html' title='Multiple defined in 4 places.'>MAX_MEM_LEVEL</a> &gt;= 8
<a name='L26'><font color='darkred'>#  define</font> <a href='../R/716.html' title='Multiple refered from 4 places.'>DEF_MEM_LEVEL</a> 8
<a name='L27'><font color='darkred'>#else</font>
<a name='L28'><font color='darkred'>#  define</font> <a href='../R/716.html' title='Multiple refered from 4 places.'>DEF_MEM_LEVEL</a>  <a href='../D/2069.html' title='Multiple defined in 4 places.'>MAX_MEM_LEVEL</a>
<a name='L29'><font color='darkred'>#endif</font>
<a name='L30'><font color='darkred'>#define</font> <a href='../R/717.html' title='Multiple refered from 4 places.'>DEF_WBITS</a> <a href='../D/2084.html' title='Multiple defined in 2 places.'>MAX_WBITS</a>
<a name='L31'>
<a name='L32'><i><font color='green'>/* The output buffer will be increased in chunks of DEFAULTALLOC bytes. */</font></i>
<a name='L33'><font color='darkred'>#define</font> <a href='../R/698.html' title='Multiple refered from 5 places.'>DEFAULTALLOC</a> (16*1024)
<a name='L34'>
<a name='L35'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Comptype;
<a name='L36'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Decomptype;
<a name='L37'>
<a name='L38'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ZlibError;
<a name='L39'>
<a name='L40'><b>typedef</b> <b>struct</b>
<a name='L41'><font color='red'>{</font>
<a name='L42'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L43'>    <a href='../S/2769.html#L104' title='Defined at 104 in Modules/zlib/zlib.h.'>z_stream</a> zst;
<a name='L44'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *unused_data;
<a name='L45'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *unconsumed_tail;
<a name='L46'>    <b>int</b> is_initialised;
<a name='L47'><font color='darkred'>    #ifdef</font> <a href='../D/5537.html' title='Multiple defined in 3 places.'>WITH_THREAD</a>
<a name='L48'>        <a href='../S/572.html#L5' title='Defined at 5 in Include/pythread.h.'>PyThread_type_lock</a> <a href='../S/3148.html#L9' title='Defined at 9 in Python/thread_lwp.h.'>lock</a>;
<a name='L49'><font color='darkred'>    #endif</font>
<a name='L50'><font color='red'>}</font> <a href='../R/6939.html' title='Multiple refered from 10 places.'>compobject</a>;
<a name='L51'>
<a name='L52'><b>static</b> <b>void</b>
<a name='L53'><a href='../R/11558.html' title='Multiple refered from 16 places.'>zlib_error</a>(z_stream zst, <b>int</b> err, <b>char</b> *msg)
<a name='L54'><font color='red'>{</font>
<a name='L55'>    <b>const</b> <b>char</b> *zmsg = zst.msg;
<a name='L56'>    <b>if</b> (zmsg == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>) <font color='red'>{</font>
<a name='L57'>        <b>switch</b> (err) <font color='red'>{</font>
<a name='L58'>        <b>case</b> <a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>:
<a name='L59'>            zmsg = "incomplete or truncated stream";
<a name='L60'>            <b>break</b>;
<a name='L61'>        <b>case</b> <a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>:
<a name='L62'>            zmsg = "inconsistent stream state";
<a name='L63'>            <b>break</b>;
<a name='L64'>        <b>case</b> <a href='../S/2769.html#L178' title='Defined at 178 in Modules/zlib/zlib.h.'>Z_DATA_ERROR</a>:
<a name='L65'>            zmsg = "invalid input data";
<a name='L66'>            <b>break</b>;
<a name='L67'>        <font color='red'>}</font>
<a name='L68'>    <font color='red'>}</font>
<a name='L69'>    <b>if</b> (zmsg == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>)
<a name='L70'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(ZlibError, "Error %d %s", err, msg);
<a name='L71'>    <b>else</b>
<a name='L72'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(ZlibError, "Error %d %s: %.200s", err, msg, zmsg);
<a name='L73'><font color='red'>}</font>
<a name='L74'>
<a name='L75'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(compressobj__doc__,
<a name='L76'>"compressobj([level]) -- Return a compressor object.\n"
<a name='L77'>"\n"
<a name='L78'>"Optional arg level is the compression level, in 1-9.");
<a name='L79'>
<a name='L80'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(decompressobj__doc__,
<a name='L81'>"decompressobj([wbits]) -- Return a decompressor object.\n"
<a name='L82'>"\n"
<a name='L83'>"Optional arg wbits is the window buffer size.");
<a name='L84'>
<a name='L85'><b>static</b> <a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a> *
<a name='L86'><a href='../R/9217.html' title='Multiple refered from 4 places.'>newcompobject</a>(PyTypeObject *type)
<a name='L87'><font color='red'>{</font>
<a name='L88'>    <a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a> *self;
<a name='L89'>    self = PyObject_New(<a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a>, type);
<a name='L90'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L91'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L92'>    self-&gt;is_initialised = 0;
<a name='L93'>    self-&gt;unused_data = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>("", 0);
<a name='L94'>    <b>if</b> (self-&gt;unused_data == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L95'>        Py_DECREF(self);
<a name='L96'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L97'>    <font color='red'>}</font>
<a name='L98'>    self-&gt;unconsumed_tail = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>("", 0);
<a name='L99'>    <b>if</b> (self-&gt;unconsumed_tail == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L100'>        Py_DECREF(self);
<a name='L101'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L102'>    <font color='red'>}</font>
<a name='L103'><font color='darkred'>#ifdef</font> <a href='../D/5537.html' title='Multiple defined in 3 places.'>WITH_THREAD</a>
<a name='L104'>    self-&gt;<a href='../S/3148.html#L9' title='Defined at 9 in Python/thread_lwp.h.'>lock</a> = <a href='../D/3848.html' title='Multiple defined in 11 places.'>PyThread_allocate_lock</a>();
<a name='L105'><font color='darkred'>#endif</font>
<a name='L106'>    <b>return</b> self;
<a name='L107'><font color='red'>}</font>
<a name='L108'>
<a name='L109'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(compress__doc__,
<a name='L110'>"compress(string[, level]) -- Returned compressed string.\n"
<a name='L111'>"\n"
<a name='L112'>"Optional arg level is the compression level, in 1-9.");
<a name='L113'>
<a name='L114'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L115'><a href='../S/2774.html#L991' title='Refered from 991 in Modules/zlibmodule.c.'>PyZlib_compress</a>(PyObject *self, PyObject *args)
<a name='L116'><font color='red'>{</font>
<a name='L117'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ReturnVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L118'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pinput;
<a name='L119'>    <a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *input, *output;
<a name='L120'>    <b>unsigned</b> <b>int</b> length;
<a name='L121'>    <b>int</b> level=<a href='../S/2769.html#L189' title='Defined at 189 in Modules/zlib/zlib.h.'>Z_DEFAULT_COMPRESSION</a>, err;
<a name='L122'>    <a href='../S/2769.html#L104' title='Defined at 104 in Modules/zlib/zlib.h.'>z_stream</a> zst;
<a name='L123'>
<a name='L124'>    <i><font color='green'>/* require Python string object, optional 'level' arg */</font></i>
<a name='L125'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*|i:compress", &amp;pinput, &amp;level))
<a name='L126'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L127'>
<a name='L128'>    <b>if</b> (pinput.len &gt; UINT_MAX) <font color='red'>{</font>
<a name='L129'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L130'>            "size does not fit in an unsigned int");
<a name='L131'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L132'>    <font color='red'>}</font>
<a name='L133'>    length = pinput.len;
<a name='L134'>    input = pinput.buf;
<a name='L135'>
<a name='L136'>    zst.avail_out = length + length/1000 + 12 + 1;
<a name='L137'>
<a name='L138'>    output = (<a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a>*)malloc(zst.avail_out);
<a name='L139'>    <b>if</b> (output == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L140'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L141'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_MemoryError,
<a name='L142'>                        "Can't allocate memory to compress data");
<a name='L143'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L144'>    <font color='red'>}</font>
<a name='L145'>
<a name='L146'>    <i><font color='green'>/* Past the point of no return.  From here on out, we need to make sure</font></i>
<a name='L147'><i><font color='green'>       we clean up mallocs &amp; INCREFs. */</font></i>
<a name='L148'>
<a name='L149'>    zst.zalloc = (<a href='../D/6713.html' title='Multiple defined in 2 places.'>alloc_func</a>)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L150'>    zst.zfree = (<a href='../D/8725.html' title='Multiple defined in 2 places.'>free_func</a>)<a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>;
<a name='L151'>    zst.next_out = (<a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *)output;
<a name='L152'>    zst.next_in = (<a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *)input;
<a name='L153'>    zst.avail_in = length;
<a name='L154'>    err = <a href='../S/2769.html#L1546' title='Defined at 1546 in Modules/zlib/zlib.h.'>deflateInit</a>(&amp;zst, level);
<a name='L155'>
<a name='L156'>    <b>switch</b>(err) <font color='red'>{</font>
<a name='L157'>    <b>case</b>(<a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>):
<a name='L158'>        <b>break</b>;
<a name='L159'>    <b>case</b>(<a href='../S/2769.html#L179' title='Defined at 179 in Modules/zlib/zlib.h.'>Z_MEM_ERROR</a>):
<a name='L160'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_MemoryError,
<a name='L161'>                        "Out of memory while compressing data");
<a name='L162'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L163'>    <b>case</b>(<a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>):
<a name='L164'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(ZlibError,
<a name='L165'>                        "Bad compression level");
<a name='L166'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L167'>    <b>default</b>:
<a name='L168'>        <a href='../D/8007.html' title='Multiple defined in 3 places.'>deflateEnd</a>(&amp;zst);
<a name='L169'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(zst, err, "while compressing data");
<a name='L170'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L171'>    <font color='red'>}</font>
<a name='L172'>
<a name='L173'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>;
<a name='L174'>    err = <a href='../D/8004.html' title='Multiple defined in 3 places.'>deflate</a>(&amp;zst, <a href='../S/2769.html#L168' title='Defined at 168 in Modules/zlib/zlib.h.'>Z_FINISH</a>);
<a name='L175'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>;
<a name='L176'>
<a name='L177'>    <b>if</b> (err != <a href='../S/2769.html#L174' title='Defined at 174 in Modules/zlib/zlib.h.'>Z_STREAM_END</a>) <font color='red'>{</font>
<a name='L178'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(zst, err, "while compressing data");
<a name='L179'>        <a href='../D/8007.html' title='Multiple defined in 3 places.'>deflateEnd</a>(&amp;zst);
<a name='L180'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L181'>    <font color='red'>}</font>
<a name='L182'>
<a name='L183'>    err=<a href='../D/8007.html' title='Multiple defined in 3 places.'>deflateEnd</a>(&amp;zst);
<a name='L184'>    <b>if</b> (err == <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>)
<a name='L185'>        ReturnVal = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>((<b>char</b> *)output,
<a name='L186'>                                              zst.total_out);
<a name='L187'>    <b>else</b>
<a name='L188'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(zst, err, "while finishing compression");
<a name='L189'>
<a name='L190'> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L191'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L192'>    free(output);
<a name='L193'>
<a name='L194'>    <b>return</b> ReturnVal;
<a name='L195'><font color='red'>}</font>
<a name='L196'>
<a name='L197'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(decompress__doc__,
<a name='L198'>"decompress(string[, wbits[, bufsize]]) -- Return decompressed string.\n"
<a name='L199'>"\n"
<a name='L200'>"Optional arg wbits is the window buffer size.  Optional arg bufsize is\n"
<a name='L201'>"the initial output buffer size.");
<a name='L202'>
<a name='L203'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L204'><a href='../S/2774.html#L997' title='Refered from 997 in Modules/zlibmodule.c.'>PyZlib_decompress</a>(PyObject *self, PyObject *args)
<a name='L205'><font color='red'>{</font>
<a name='L206'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *result_str;
<a name='L207'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pinput;
<a name='L208'>    <a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *input;
<a name='L209'>    <b>unsigned</b> <b>int</b> length;
<a name='L210'>    <b>int</b> err;
<a name='L211'>    <b>int</b> wsize=<a href='../D/769.html' title='Multiple defined in 2 places.'>DEF_WBITS</a>;
<a name='L212'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> r_strlen=<a href='../S/2774.html#L33' title='Defined at 33 in Modules/zlibmodule.c.'>DEFAULTALLOC</a>;
<a name='L213'>    <a href='../S/2769.html#L104' title='Defined at 104 in Modules/zlib/zlib.h.'>z_stream</a> zst;
<a name='L214'>
<a name='L215'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*|in:decompress",
<a name='L216'>                          &amp;pinput, &amp;wsize, &amp;r_strlen))
<a name='L217'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L218'>
<a name='L219'>    <b>if</b> (pinput.len &gt; UINT_MAX) <font color='red'>{</font>
<a name='L220'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L221'>            "size does not fit in an unsigned int");
<a name='L222'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L223'>    <font color='red'>}</font>
<a name='L224'>    length = pinput.len;
<a name='L225'>    input = pinput.buf;
<a name='L226'>
<a name='L227'>    <b>if</b> (r_strlen &lt;= 0)
<a name='L228'>        r_strlen = 1;
<a name='L229'>
<a name='L230'>    zst.avail_in = length;
<a name='L231'>    zst.avail_out = r_strlen;
<a name='L232'>
<a name='L233'>    <b>if</b> (!(result_str = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, r_strlen))) <font color='red'>{</font>
<a name='L234'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L235'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L236'>    <font color='red'>}</font>
<a name='L237'>
<a name='L238'>    zst.zalloc = (<a href='../D/6713.html' title='Multiple defined in 2 places.'>alloc_func</a>)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L239'>    zst.zfree = (<a href='../D/8725.html' title='Multiple defined in 2 places.'>free_func</a>)<a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>;
<a name='L240'>    zst.next_out = (<a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *)PyBytes_AS_STRING(result_str);
<a name='L241'>    zst.next_in = (<a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *)input;
<a name='L242'>    err = <a href='../S/2769.html#L1553' title='Defined at 1553 in Modules/zlib/zlib.h.'>inflateInit2</a>(&amp;zst, wsize);
<a name='L243'>
<a name='L244'>    <b>switch</b>(err) <font color='red'>{</font>
<a name='L245'>    <b>case</b>(<a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>):
<a name='L246'>        <b>break</b>;
<a name='L247'>    <b>case</b>(<a href='../S/2769.html#L179' title='Defined at 179 in Modules/zlib/zlib.h.'>Z_MEM_ERROR</a>):
<a name='L248'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_MemoryError,
<a name='L249'>                        "Out of memory while decompressing data");
<a name='L250'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L251'>    <b>default</b>:
<a name='L252'>        <a href='../D/9162.html' title='Multiple defined in 3 places.'>inflateEnd</a>(&amp;zst);
<a name='L253'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(zst, err, "while preparing to decompress data");
<a name='L254'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L255'>    <font color='red'>}</font>
<a name='L256'>
<a name='L257'>    <b>do</b> <font color='red'>{</font>
<a name='L258'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L259'>        err=<a href='../D/9156.html' title='Multiple defined in 3 places.'>inflate</a>(&amp;zst, <a href='../S/2769.html#L168' title='Defined at 168 in Modules/zlib/zlib.h.'>Z_FINISH</a>);
<a name='L260'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L261'>
<a name='L262'>        <b>switch</b>(err) <font color='red'>{</font>
<a name='L263'>        <b>case</b>(<a href='../S/2769.html#L174' title='Defined at 174 in Modules/zlib/zlib.h.'>Z_STREAM_END</a>):
<a name='L264'>            <b>break</b>;
<a name='L265'>        <b>case</b>(<a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>):
<a name='L266'>            <i><font color='green'>/*</font></i>
<a name='L267'><i><font color='green'>             * If there is at least 1 byte of room according to zst.avail_out</font></i>
<a name='L268'><i><font color='green'>             * and we get this error, assume that it means zlib cannot</font></i>
<a name='L269'><i><font color='green'>             * process the inflate call() due to an error in the data.</font></i>
<a name='L270'><i><font color='green'>             */</font></i>
<a name='L271'>            <b>if</b> (zst.avail_out &gt; 0) <font color='red'>{</font>
<a name='L272'>                <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(zst, err, "while decompressing data");
<a name='L273'>                <a href='../D/9162.html' title='Multiple defined in 3 places.'>inflateEnd</a>(&amp;zst);
<a name='L274'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L275'>            <font color='red'>}</font>
<a name='L276'>            <i><font color='green'>/* fall through */</font></i>
<a name='L277'>        <b>case</b>(<a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>):
<a name='L278'>            <i><font color='green'>/* need more memory */</font></i>
<a name='L279'>            <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;result_str, r_strlen &lt;&lt; 1) &lt; 0) <font color='red'>{</font>
<a name='L280'>                <a href='../D/9162.html' title='Multiple defined in 3 places.'>inflateEnd</a>(&amp;zst);
<a name='L281'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L282'>            <font color='red'>}</font>
<a name='L283'>            zst.next_out =
<a name='L284'>                (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(result_str) + r_strlen;
<a name='L285'>            zst.avail_out = r_strlen;
<a name='L286'>            r_strlen = r_strlen &lt;&lt; 1;
<a name='L287'>            <b>break</b>;
<a name='L288'>        <b>default</b>:
<a name='L289'>            <a href='../D/9162.html' title='Multiple defined in 3 places.'>inflateEnd</a>(&amp;zst);
<a name='L290'>            <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(zst, err, "while decompressing data");
<a name='L291'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L292'>        <font color='red'>}</font>
<a name='L293'>    <font color='red'>}</font> <b>while</b> (err != <a href='../S/2769.html#L174' title='Defined at 174 in Modules/zlib/zlib.h.'>Z_STREAM_END</a>);
<a name='L294'>
<a name='L295'>    err = <a href='../D/9162.html' title='Multiple defined in 3 places.'>inflateEnd</a>(&amp;zst);
<a name='L296'>    <b>if</b> (err != <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>) <font color='red'>{</font>
<a name='L297'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(zst, err, "while finishing data decompression");
<a name='L298'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L299'>    <font color='red'>}</font>
<a name='L300'>
<a name='L301'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;result_str, zst.total_out) &lt; 0)
<a name='L302'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L303'>
<a name='L304'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L305'>    <b>return</b> result_str;
<a name='L306'>
<a name='L307'> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L308'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L309'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(result_str);
<a name='L310'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L311'><font color='red'>}</font>
<a name='L312'>
<a name='L313'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L314'><a href='../S/2774.html#L993' title='Refered from 993 in Modules/zlibmodule.c.'>PyZlib_compressobj</a>(PyObject *selfptr, PyObject *args)
<a name='L315'><font color='red'>{</font>
<a name='L316'>    <a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a> *self;
<a name='L317'>    <b>int</b> level=<a href='../S/2769.html#L189' title='Defined at 189 in Modules/zlib/zlib.h.'>Z_DEFAULT_COMPRESSION</a>, method=<a href='../S/2774.html#L24' title='Defined at 24 in Modules/zlibmodule.c.'>DEFLATED</a>;
<a name='L318'>    <b>int</b> wbits=<a href='../D/2084.html' title='Multiple defined in 2 places.'>MAX_WBITS</a>, memLevel=<a href='../D/768.html' title='Multiple defined in 4 places.'>DEF_MEM_LEVEL</a>, strategy=0, err;
<a name='L319'>
<a name='L320'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|iiiii:compressobj", &amp;level, &amp;method, &amp;wbits,
<a name='L321'>                          &amp;memLevel, &amp;strategy))
<a name='L322'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L323'>
<a name='L324'>    self = <a href='../S/2774.html#L86' title='Defined at 86 in Modules/zlibmodule.c.'>newcompobject</a>(&amp;Comptype);
<a name='L325'>    <b>if</b> (self==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L326'>        <b>return</b>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L327'>    self-&gt;zst.zalloc = (<a href='../D/6713.html' title='Multiple defined in 2 places.'>alloc_func</a>)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L328'>    self-&gt;zst.zfree = (<a href='../D/8725.html' title='Multiple defined in 2 places.'>free_func</a>)<a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>;
<a name='L329'>    self-&gt;zst.next_in = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L330'>    self-&gt;zst.avail_in = 0;
<a name='L331'>    err = <a href='../S/2769.html#L1550' title='Defined at 1550 in Modules/zlib/zlib.h.'>deflateInit2</a>(&amp;self-&gt;zst, level, method, wbits, memLevel, strategy);
<a name='L332'>    <b>switch</b>(err) <font color='red'>{</font>
<a name='L333'>    <b>case</b> (<a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>):
<a name='L334'>        self-&gt;is_initialised = 1;
<a name='L335'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)self;
<a name='L336'>    <b>case</b> (<a href='../S/2769.html#L179' title='Defined at 179 in Modules/zlib/zlib.h.'>Z_MEM_ERROR</a>):
<a name='L337'>        Py_DECREF(self);
<a name='L338'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_MemoryError,
<a name='L339'>                        "Can't allocate memory for compression object");
<a name='L340'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L341'>    <b>case</b>(<a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>):
<a name='L342'>        Py_DECREF(self);
<a name='L343'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "Invalid initialization option");
<a name='L344'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L345'>    <b>default</b>:
<a name='L346'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "while creating compression object");
<a name='L347'>        Py_DECREF(self);
<a name='L348'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L349'>    <font color='red'>}</font>
<a name='L350'><font color='red'>}</font>
<a name='L351'>
<a name='L352'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L353'><a href='../S/2774.html#L999' title='Refered from 999 in Modules/zlibmodule.c.'>PyZlib_decompressobj</a>(PyObject *selfptr, PyObject *args)
<a name='L354'><font color='red'>{</font>
<a name='L355'>    <b>int</b> wbits=<a href='../D/769.html' title='Multiple defined in 2 places.'>DEF_WBITS</a>, err;
<a name='L356'>    <a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a> *self;
<a name='L357'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|i:decompressobj", &amp;wbits))
<a name='L358'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L359'>
<a name='L360'>    self = <a href='../S/2774.html#L86' title='Defined at 86 in Modules/zlibmodule.c.'>newcompobject</a>(&amp;Decomptype);
<a name='L361'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L362'>        <b>return</b>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L363'>    self-&gt;zst.zalloc = (<a href='../D/6713.html' title='Multiple defined in 2 places.'>alloc_func</a>)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L364'>    self-&gt;zst.zfree = (<a href='../D/8725.html' title='Multiple defined in 2 places.'>free_func</a>)<a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>;
<a name='L365'>    self-&gt;zst.next_in = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L366'>    self-&gt;zst.avail_in = 0;
<a name='L367'>    err = <a href='../S/2769.html#L1553' title='Defined at 1553 in Modules/zlib/zlib.h.'>inflateInit2</a>(&amp;self-&gt;zst, wbits);
<a name='L368'>    <b>switch</b>(err) <font color='red'>{</font>
<a name='L369'>    <b>case</b> (<a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>):
<a name='L370'>        self-&gt;is_initialised = 1;
<a name='L371'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)self;
<a name='L372'>    <b>case</b>(<a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>):
<a name='L373'>        Py_DECREF(self);
<a name='L374'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "Invalid initialization option");
<a name='L375'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L376'>    <b>case</b> (<a href='../S/2769.html#L179' title='Defined at 179 in Modules/zlib/zlib.h.'>Z_MEM_ERROR</a>):
<a name='L377'>        Py_DECREF(self);
<a name='L378'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_MemoryError,
<a name='L379'>                        "Can't allocate memory for decompression object");
<a name='L380'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L381'>    <b>default</b>:
<a name='L382'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "while creating decompression object");
<a name='L383'>        Py_DECREF(self);
<a name='L384'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L385'>    <font color='red'>}</font>
<a name='L386'><font color='red'>}</font>
<a name='L387'>
<a name='L388'><b>static</b> <b>void</b>
<a name='L389'><a href='../R/784.html' title='Multiple refered from 2 places.'>Dealloc</a>(compobject *self)
<a name='L390'><font color='red'>{</font>
<a name='L391'><font color='darkred'>#ifdef</font> <a href='../D/5537.html' title='Multiple defined in 3 places.'>WITH_THREAD</a>
<a name='L392'>    <a href='../D/3853.html' title='Multiple defined in 11 places.'>PyThread_free_lock</a>(self-&gt;<a href='../S/3148.html#L9' title='Defined at 9 in Python/thread_lwp.h.'>lock</a>);
<a name='L393'><font color='darkred'>#endif</font>
<a name='L394'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;unused_data);
<a name='L395'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;unconsumed_tail);
<a name='L396'>    PyObject_Del(self);
<a name='L397'><font color='red'>}</font>
<a name='L398'>
<a name='L399'><b>static</b> <b>void</b>
<a name='L400'><a href='../S/2774.html#L1009' title='Refered from 1009 in Modules/zlibmodule.c.'>Comp_dealloc</a>(compobject *self)
<a name='L401'><font color='red'>{</font>
<a name='L402'>    <b>if</b> (self-&gt;is_initialised)
<a name='L403'>        <a href='../D/8007.html' title='Multiple defined in 3 places.'>deflateEnd</a>(&amp;self-&gt;zst);
<a name='L404'>    <a href='../S/2774.html#L389' title='Defined at 389 in Modules/zlibmodule.c.'>Dealloc</a>(self);
<a name='L405'><font color='red'>}</font>
<a name='L406'>
<a name='L407'><b>static</b> <b>void</b>
<a name='L408'><a href='../S/2774.html#L1040' title='Refered from 1040 in Modules/zlibmodule.c.'>Decomp_dealloc</a>(compobject *self)
<a name='L409'><font color='red'>{</font>
<a name='L410'>    <b>if</b> (self-&gt;is_initialised)
<a name='L411'>        <a href='../D/9162.html' title='Multiple defined in 3 places.'>inflateEnd</a>(&amp;self-&gt;zst);
<a name='L412'>    <a href='../S/2774.html#L389' title='Defined at 389 in Modules/zlibmodule.c.'>Dealloc</a>(self);
<a name='L413'><font color='red'>}</font>
<a name='L414'>
<a name='L415'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(comp_compress__doc__,
<a name='L416'>"compress(data) -- Return a string containing data compressed.\n"
<a name='L417'>"\n"
<a name='L418'>"After calling this function, some of the input data may still\n"
<a name='L419'>"be stored in internal buffers for later processing.\n"
<a name='L420'>"Call the flush() method to clear these buffers.");
<a name='L421'>
<a name='L422'>
<a name='L423'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L424'><a href='../S/2774.html#L900' title='Refered from 900 in Modules/zlibmodule.c.'>PyZlib_objcompress</a>(compobject *self, PyObject *args)
<a name='L425'><font color='red'>{</font>
<a name='L426'>    <b>int</b> err, inplen;
<a name='L427'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length = <a href='../S/2774.html#L33' title='Defined at 33 in Modules/zlibmodule.c.'>DEFAULTALLOC</a>;
<a name='L428'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *RetVal;
<a name='L429'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pinput;
<a name='L430'>    <a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *input;
<a name='L431'>    <b>unsigned</b> <b>long</b> start_total_out;
<a name='L432'>
<a name='L433'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*:compress", &amp;pinput))
<a name='L434'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L435'>    input = pinput.buf;
<a name='L436'>    inplen = pinput.len;
<a name='L437'>
<a name='L438'>    <b>if</b> (!(RetVal = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, length))) <font color='red'>{</font>
<a name='L439'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L440'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L441'>    <font color='red'>}</font>
<a name='L442'>
<a name='L443'>    <a href='../D/948.html' title='Multiple defined in 2 places.'>ENTER_ZLIB</a>(self);
<a name='L444'>
<a name='L445'>    start_total_out = self-&gt;zst.total_out;
<a name='L446'>    self-&gt;zst.avail_in = inplen;
<a name='L447'>    self-&gt;zst.next_in = input;
<a name='L448'>    self-&gt;zst.avail_out = length;
<a name='L449'>    self-&gt;zst.next_out = (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(RetVal);
<a name='L450'>
<a name='L451'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L452'>    err = <a href='../D/8004.html' title='Multiple defined in 3 places.'>deflate</a>(&amp;(self-&gt;zst), <a href='../S/2769.html#L164' title='Defined at 164 in Modules/zlib/zlib.h.'>Z_NO_FLUSH</a>);
<a name='L453'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L454'>
<a name='L455'>    <i><font color='green'>/* while Z_OK and the output buffer is full, there might be more output,</font></i>
<a name='L456'><i><font color='green'>       so extend the output buffer and try again */</font></i>
<a name='L457'>    <b>while</b> (err == <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a> &amp;&amp; self-&gt;zst.avail_out == 0) <font color='red'>{</font>
<a name='L458'>        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;RetVal, length &lt;&lt; 1) &lt; 0) <font color='red'>{</font>
<a name='L459'>            Py_DECREF(RetVal);
<a name='L460'>            RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L461'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L462'>        <font color='red'>}</font>
<a name='L463'>        self-&gt;zst.next_out =
<a name='L464'>            (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(RetVal) + length;
<a name='L465'>        self-&gt;zst.avail_out = length;
<a name='L466'>        length = length &lt;&lt; 1;
<a name='L467'>
<a name='L468'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L469'>        err = <a href='../D/8004.html' title='Multiple defined in 3 places.'>deflate</a>(&amp;(self-&gt;zst), <a href='../S/2769.html#L164' title='Defined at 164 in Modules/zlib/zlib.h.'>Z_NO_FLUSH</a>);
<a name='L470'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L471'>    <font color='red'>}</font>
<a name='L472'>    <i><font color='green'>/* We will only get Z_BUF_ERROR if the output buffer was full but</font></i>
<a name='L473'><i><font color='green'>       there wasn't more output when we tried again, so it is not an error</font></i>
<a name='L474'><i><font color='green'>       condition.</font></i>
<a name='L475'><i><font color='green'>    */</font></i>
<a name='L476'>
<a name='L477'>    <b>if</b> (err != <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a> &amp;&amp; err != <a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>) <font color='red'>{</font>
<a name='L478'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "while compressing");
<a name='L479'>        Py_DECREF(RetVal);
<a name='L480'>        RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L481'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L482'>    <font color='red'>}</font>
<a name='L483'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;RetVal, self-&gt;zst.total_out - start_total_out) &lt; 0) <font color='red'>{</font>
<a name='L484'>        Py_DECREF(RetVal);
<a name='L485'>        RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L486'>    <font color='red'>}</font>
<a name='L487'>
<a name='L488'> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L489'>    <a href='../D/1899.html' title='Multiple defined in 2 places.'>LEAVE_ZLIB</a>(self);
<a name='L490'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L491'>    <b>return</b> RetVal;
<a name='L492'><font color='red'>}</font>
<a name='L493'>
<a name='L494'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(decomp_decompress__doc__,
<a name='L495'>"decompress(data, max_length) -- Return a string containing the decompressed\n"
<a name='L496'>"version of the data.\n"
<a name='L497'>"\n"
<a name='L498'>"After calling this function, some of the input data may still be stored in\n"
<a name='L499'>"internal buffers for later processing.\n"
<a name='L500'>"Call the flush() method to clear these buffers.\n"
<a name='L501'>"If the max_length parameter is specified then the return value will be\n"
<a name='L502'>"no longer than max_length.  Unconsumed input data will be stored in\n"
<a name='L503'>"the unconsumed_tail attribute.");
<a name='L504'>
<a name='L505'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L506'><a href='../S/2774.html#L913' title='Refered from 913 in Modules/zlibmodule.c.'>PyZlib_objdecompress</a>(compobject *self, PyObject *args)
<a name='L507'><font color='red'>{</font>
<a name='L508'>    <b>int</b> err, inplen, max_length = 0;
<a name='L509'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> old_length, length = <a href='../S/2774.html#L33' title='Defined at 33 in Modules/zlibmodule.c.'>DEFAULTALLOC</a>;
<a name='L510'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *RetVal;
<a name='L511'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pinput;
<a name='L512'>    <a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *input;
<a name='L513'>    <b>unsigned</b> <b>long</b> start_total_out;
<a name='L514'>
<a name='L515'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*|i:decompress", &amp;pinput,
<a name='L516'>                          &amp;max_length))
<a name='L517'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L518'>    input = pinput.buf;
<a name='L519'>    inplen = pinput.len;
<a name='L520'>    <b>if</b> (max_length &lt; 0) <font color='red'>{</font>
<a name='L521'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L522'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L523'>                        "max_length must be greater than zero");
<a name='L524'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L525'>    <font color='red'>}</font>
<a name='L526'>
<a name='L527'>    <i><font color='green'>/* limit amount of data allocated to max_length */</font></i>
<a name='L528'>    <b>if</b> (max_length &amp;&amp; length &gt; max_length)
<a name='L529'>        length = max_length;
<a name='L530'>    <b>if</b> (!(RetVal = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, length))) <font color='red'>{</font>
<a name='L531'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L532'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L533'>    <font color='red'>}</font>
<a name='L534'>
<a name='L535'>    <a href='../D/948.html' title='Multiple defined in 2 places.'>ENTER_ZLIB</a>(self);
<a name='L536'>
<a name='L537'>    start_total_out = self-&gt;zst.total_out;
<a name='L538'>    self-&gt;zst.avail_in = inplen;
<a name='L539'>    self-&gt;zst.next_in = input;
<a name='L540'>    self-&gt;zst.avail_out = length;
<a name='L541'>    self-&gt;zst.next_out = (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(RetVal);
<a name='L542'>
<a name='L543'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L544'>    err = <a href='../D/9156.html' title='Multiple defined in 3 places.'>inflate</a>(&amp;(self-&gt;zst), <a href='../S/2769.html#L166' title='Defined at 166 in Modules/zlib/zlib.h.'>Z_SYNC_FLUSH</a>);
<a name='L545'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L546'>
<a name='L547'>    <i><font color='green'>/* While Z_OK and the output buffer is full, there might be more output.</font></i>
<a name='L548'><i><font color='green'>       So extend the output buffer and try again.</font></i>
<a name='L549'><i><font color='green'>    */</font></i>
<a name='L550'>    <b>while</b> (err == <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a> &amp;&amp; self-&gt;zst.avail_out == 0) <font color='red'>{</font>
<a name='L551'>        <i><font color='green'>/* If max_length set, don't continue decompressing if we've already</font></i>
<a name='L552'><i><font color='green'>           reached the limit.</font></i>
<a name='L553'><i><font color='green'>        */</font></i>
<a name='L554'>        <b>if</b> (max_length &amp;&amp; length &gt;= max_length)
<a name='L555'>            <b>break</b>;
<a name='L556'>
<a name='L557'>        <i><font color='green'>/* otherwise, ... */</font></i>
<a name='L558'>        old_length = length;
<a name='L559'>        length = length &lt;&lt; 1;
<a name='L560'>        <b>if</b> (max_length &amp;&amp; length &gt; max_length)
<a name='L561'>            length = max_length;
<a name='L562'>
<a name='L563'>        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;RetVal, length) &lt; 0) <font color='red'>{</font>
<a name='L564'>            Py_DECREF(RetVal);
<a name='L565'>            RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L566'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L567'>        <font color='red'>}</font>
<a name='L568'>        self-&gt;zst.next_out =
<a name='L569'>            (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(RetVal) + old_length;
<a name='L570'>        self-&gt;zst.avail_out = length - old_length;
<a name='L571'>
<a name='L572'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L573'>        err = <a href='../D/9156.html' title='Multiple defined in 3 places.'>inflate</a>(&amp;(self-&gt;zst), <a href='../S/2769.html#L166' title='Defined at 166 in Modules/zlib/zlib.h.'>Z_SYNC_FLUSH</a>);
<a name='L574'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L575'>    <font color='red'>}</font>
<a name='L576'>
<a name='L577'>    <i><font color='green'>/* Not all of the compressed data could be accommodated in the output buffer</font></i>
<a name='L578'><i><font color='green'>       of specified size. Return the unconsumed tail in an attribute.*/</font></i>
<a name='L579'>    <b>if</b>(max_length) <font color='red'>{</font>
<a name='L580'>        Py_DECREF(self-&gt;unconsumed_tail);
<a name='L581'>        self-&gt;unconsumed_tail = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>((<b>char</b> *)self-&gt;zst.next_in,
<a name='L582'>                                                           self-&gt;zst.avail_in);
<a name='L583'>        <b>if</b>(!self-&gt;unconsumed_tail) <font color='red'>{</font>
<a name='L584'>            Py_DECREF(RetVal);
<a name='L585'>            RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L586'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L587'>        <font color='red'>}</font>
<a name='L588'>    <font color='red'>}</font>
<a name='L589'>
<a name='L590'>    <i><font color='green'>/* The end of the compressed data has been reached, so set the</font></i>
<a name='L591'><i><font color='green'>       unused_data attribute to a string containing the remainder of the</font></i>
<a name='L592'><i><font color='green'>       data in the string.  Note that this is also a logical place to call</font></i>
<a name='L593'><i><font color='green'>       inflateEnd, but the old behaviour of only calling it on flush() is</font></i>
<a name='L594'><i><font color='green'>       preserved.</font></i>
<a name='L595'><i><font color='green'>    */</font></i>
<a name='L596'>    <b>if</b> (err == <a href='../S/2769.html#L174' title='Defined at 174 in Modules/zlib/zlib.h.'>Z_STREAM_END</a>) <font color='red'>{</font>
<a name='L597'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;unused_data);  <i><font color='green'>/* Free original empty string */</font></i>
<a name='L598'>        self-&gt;unused_data = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(
<a name='L599'>            (<b>char</b> *)self-&gt;zst.next_in, self-&gt;zst.avail_in);
<a name='L600'>        <b>if</b> (self-&gt;unused_data == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L601'>            Py_DECREF(RetVal);
<a name='L602'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L603'>        <font color='red'>}</font>
<a name='L604'>        <i><font color='green'>/* We will only get Z_BUF_ERROR if the output buffer was full</font></i>
<a name='L605'><i><font color='green'>           but there wasn't more output when we tried again, so it is</font></i>
<a name='L606'><i><font color='green'>           not an error condition.</font></i>
<a name='L607'><i><font color='green'>        */</font></i>
<a name='L608'>    <font color='red'>}</font> <b>else</b> <b>if</b> (err != <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a> &amp;&amp; err != <a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>) <font color='red'>{</font>
<a name='L609'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "while decompressing");
<a name='L610'>        Py_DECREF(RetVal);
<a name='L611'>        RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L612'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L613'>    <font color='red'>}</font>
<a name='L614'>
<a name='L615'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;RetVal, self-&gt;zst.total_out - start_total_out) &lt; 0) <font color='red'>{</font>
<a name='L616'>        Py_DECREF(RetVal);
<a name='L617'>        RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L618'>    <font color='red'>}</font>
<a name='L619'>
<a name='L620'> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L621'>    <a href='../D/1899.html' title='Multiple defined in 2 places.'>LEAVE_ZLIB</a>(self);
<a name='L622'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pinput);
<a name='L623'>    <b>return</b> RetVal;
<a name='L624'><font color='red'>}</font>
<a name='L625'>
<a name='L626'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(comp_flush__doc__,
<a name='L627'>"flush( [mode] ) -- Return a string containing any remaining compressed data.\n"
<a name='L628'>"\n"
<a name='L629'>"mode can be one of the constants Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH; the\n"
<a name='L630'>"default value used when mode is not specified is Z_FINISH.\n"
<a name='L631'>"If mode == Z_FINISH, the compressor object can no longer be used after\n"
<a name='L632'>"calling the flush() method.  Otherwise, more data can still be compressed.");
<a name='L633'>
<a name='L634'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L635'><a href='../S/2774.html#L902' title='Refered from 902 in Modules/zlibmodule.c.'>PyZlib_flush</a>(compobject *self, PyObject *args)
<a name='L636'><font color='red'>{</font>
<a name='L637'>    <b>int</b> err, length = <a href='../S/2774.html#L33' title='Defined at 33 in Modules/zlibmodule.c.'>DEFAULTALLOC</a>;
<a name='L638'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *RetVal;
<a name='L639'>    <b>int</b> flushmode = <a href='../S/2769.html#L168' title='Defined at 168 in Modules/zlib/zlib.h.'>Z_FINISH</a>;
<a name='L640'>    <b>unsigned</b> <b>long</b> start_total_out;
<a name='L641'>
<a name='L642'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|i:flush", &amp;flushmode))
<a name='L643'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L644'>
<a name='L645'>    <i><font color='green'>/* Flushing with Z_NO_FLUSH is a no-op, so there's no point in</font></i>
<a name='L646'><i><font color='green'>       doing any work at all; just return an empty string. */</font></i>
<a name='L647'>    <b>if</b> (flushmode == <a href='../S/2769.html#L164' title='Defined at 164 in Modules/zlib/zlib.h.'>Z_NO_FLUSH</a>) <font color='red'>{</font>
<a name='L648'>        <b>return</b> <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0);
<a name='L649'>    <font color='red'>}</font>
<a name='L650'>
<a name='L651'>    <b>if</b> (!(RetVal = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, length)))
<a name='L652'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L653'>
<a name='L654'>    <a href='../D/948.html' title='Multiple defined in 2 places.'>ENTER_ZLIB</a>(self);
<a name='L655'>
<a name='L656'>    start_total_out = self-&gt;zst.total_out;
<a name='L657'>    self-&gt;zst.avail_in = 0;
<a name='L658'>    self-&gt;zst.avail_out = length;
<a name='L659'>    self-&gt;zst.next_out = (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(RetVal);
<a name='L660'>
<a name='L661'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L662'>    err = <a href='../D/8004.html' title='Multiple defined in 3 places.'>deflate</a>(&amp;(self-&gt;zst), flushmode);
<a name='L663'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L664'>
<a name='L665'>    <i><font color='green'>/* while Z_OK and the output buffer is full, there might be more output,</font></i>
<a name='L666'><i><font color='green'>       so extend the output buffer and try again */</font></i>
<a name='L667'>    <b>while</b> (err == <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a> &amp;&amp; self-&gt;zst.avail_out == 0) <font color='red'>{</font>
<a name='L668'>        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;RetVal, length &lt;&lt; 1) &lt; 0) <font color='red'>{</font>
<a name='L669'>            Py_DECREF(RetVal);
<a name='L670'>            RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L671'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L672'>        <font color='red'>}</font>
<a name='L673'>        self-&gt;zst.next_out =
<a name='L674'>            (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(RetVal) + length;
<a name='L675'>        self-&gt;zst.avail_out = length;
<a name='L676'>        length = length &lt;&lt; 1;
<a name='L677'>
<a name='L678'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L679'>        err = <a href='../D/8004.html' title='Multiple defined in 3 places.'>deflate</a>(&amp;(self-&gt;zst), flushmode);
<a name='L680'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L681'>    <font color='red'>}</font>
<a name='L682'>
<a name='L683'>    <i><font color='green'>/* If flushmode is Z_FINISH, we also have to call deflateEnd() to free</font></i>
<a name='L684'><i><font color='green'>       various data structures. Note we should only get Z_STREAM_END when</font></i>
<a name='L685'><i><font color='green'>       flushmode is Z_FINISH, but checking both for safety*/</font></i>
<a name='L686'>    <b>if</b> (err == <a href='../S/2769.html#L174' title='Defined at 174 in Modules/zlib/zlib.h.'>Z_STREAM_END</a> &amp;&amp; flushmode == <a href='../S/2769.html#L168' title='Defined at 168 in Modules/zlib/zlib.h.'>Z_FINISH</a>) <font color='red'>{</font>
<a name='L687'>        err = <a href='../D/8007.html' title='Multiple defined in 3 places.'>deflateEnd</a>(&amp;(self-&gt;zst));
<a name='L688'>        <b>if</b> (err != <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>) <font color='red'>{</font>
<a name='L689'>            <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "from deflateEnd()");
<a name='L690'>            Py_DECREF(RetVal);
<a name='L691'>            RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L692'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L693'>        <font color='red'>}</font>
<a name='L694'>        <b>else</b>
<a name='L695'>            self-&gt;is_initialised = 0;
<a name='L696'>
<a name='L697'>        <i><font color='green'>/* We will only get Z_BUF_ERROR if the output buffer was full</font></i>
<a name='L698'><i><font color='green'>           but there wasn't more output when we tried again, so it is</font></i>
<a name='L699'><i><font color='green'>           not an error condition.</font></i>
<a name='L700'><i><font color='green'>        */</font></i>
<a name='L701'>    <font color='red'>}</font> <b>else</b> <b>if</b> (err!=<a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a> &amp;&amp; err!=<a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>) <font color='red'>{</font>
<a name='L702'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "while flushing");
<a name='L703'>        Py_DECREF(RetVal);
<a name='L704'>        RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L705'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L706'>    <font color='red'>}</font>
<a name='L707'>
<a name='L708'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;RetVal, self-&gt;zst.total_out - start_total_out) &lt; 0) <font color='red'>{</font>
<a name='L709'>        Py_DECREF(RetVal);
<a name='L710'>        RetVal = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L711'>    <font color='red'>}</font>
<a name='L712'>
<a name='L713'> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L714'>    <a href='../D/1899.html' title='Multiple defined in 2 places.'>LEAVE_ZLIB</a>(self);
<a name='L715'>
<a name='L716'>    <b>return</b> RetVal;
<a name='L717'><font color='red'>}</font>
<a name='L718'>
<a name='L719'><font color='darkred'>#ifdef</font> HAVE_ZLIB_COPY
<a name='L720'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(comp_copy__doc__,
<a name='L721'>"copy() -- Return a copy of the compression object.");
<a name='L722'>
<a name='L723'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L724'><a href='../S/2774.html#L905' title='Refered from 905 in Modules/zlibmodule.c.'>PyZlib_copy</a>(compobject *self)
<a name='L725'><font color='red'>{</font>
<a name='L726'>    <a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a> *retval = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L727'>    <b>int</b> err;
<a name='L728'>
<a name='L729'>    retval = <a href='../S/2774.html#L86' title='Defined at 86 in Modules/zlibmodule.c.'>newcompobject</a>(&amp;Comptype);
<a name='L730'>    <b>if</b> (!retval) <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L731'>
<a name='L732'>    <i><font color='green'>/* Copy the zstream state</font></i>
<a name='L733'><i><font color='green'>     * We use ENTER_ZLIB / LEAVE_ZLIB to make this thread-safe</font></i>
<a name='L734'><i><font color='green'>     */</font></i>
<a name='L735'>    <a href='../D/948.html' title='Multiple defined in 2 places.'>ENTER_ZLIB</a>(self);
<a name='L736'>    err = <a href='../D/8006.html' title='Multiple defined in 3 places.'>deflateCopy</a>(&amp;retval-&gt;zst, &amp;self-&gt;zst);
<a name='L737'>    <b>switch</b>(err) <font color='red'>{</font>
<a name='L738'>    <b>case</b>(<a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>):
<a name='L739'>        <b>break</b>;
<a name='L740'>    <b>case</b>(<a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>):
<a name='L741'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "Inconsistent stream state");
<a name='L742'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L743'>    <b>case</b>(<a href='../S/2769.html#L179' title='Defined at 179 in Modules/zlib/zlib.h.'>Z_MEM_ERROR</a>):
<a name='L744'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_MemoryError,
<a name='L745'>                        "Can't allocate memory for compression object");
<a name='L746'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L747'>    <b>default</b>:
<a name='L748'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "while copying compression object");
<a name='L749'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L750'>    <font color='red'>}</font>
<a name='L751'>    Py_INCREF(self-&gt;unused_data);
<a name='L752'>    Py_INCREF(self-&gt;unconsumed_tail);
<a name='L753'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(retval-&gt;unused_data);
<a name='L754'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(retval-&gt;unconsumed_tail);
<a name='L755'>    retval-&gt;unused_data = self-&gt;unused_data;
<a name='L756'>    retval-&gt;unconsumed_tail = self-&gt;unconsumed_tail;
<a name='L757'>
<a name='L758'>    <i><font color='green'>/* Mark it as being initialized */</font></i>
<a name='L759'>    retval-&gt;is_initialised = 1;
<a name='L760'>
<a name='L761'>    <a href='../D/1899.html' title='Multiple defined in 2 places.'>LEAVE_ZLIB</a>(self);
<a name='L762'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)retval;
<a name='L763'>
<a name='L764'><a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L765'>    <a href='../D/1899.html' title='Multiple defined in 2 places.'>LEAVE_ZLIB</a>(self);
<a name='L766'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(retval);
<a name='L767'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L768'><font color='red'>}</font>
<a name='L769'>
<a name='L770'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(decomp_copy__doc__,
<a name='L771'>"copy() -- Return a copy of the decompression object.");
<a name='L772'>
<a name='L773'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L774'><a href='../S/2774.html#L918' title='Refered from 918 in Modules/zlibmodule.c.'>PyZlib_uncopy</a>(compobject *self)
<a name='L775'><font color='red'>{</font>
<a name='L776'>    <a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a> *retval = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L777'>    <b>int</b> err;
<a name='L778'>
<a name='L779'>    retval = <a href='../S/2774.html#L86' title='Defined at 86 in Modules/zlibmodule.c.'>newcompobject</a>(&amp;Decomptype);
<a name='L780'>    <b>if</b> (!retval) <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L781'>
<a name='L782'>    <i><font color='green'>/* Copy the zstream state</font></i>
<a name='L783'><i><font color='green'>     * We use ENTER_ZLIB / LEAVE_ZLIB to make this thread-safe</font></i>
<a name='L784'><i><font color='green'>     */</font></i>
<a name='L785'>    <a href='../D/948.html' title='Multiple defined in 2 places.'>ENTER_ZLIB</a>(self);
<a name='L786'>    err = <a href='../D/9161.html' title='Multiple defined in 3 places.'>inflateCopy</a>(&amp;retval-&gt;zst, &amp;self-&gt;zst);
<a name='L787'>    <b>switch</b>(err) <font color='red'>{</font>
<a name='L788'>    <b>case</b>(<a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>):
<a name='L789'>        <b>break</b>;
<a name='L790'>    <b>case</b>(<a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>):
<a name='L791'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "Inconsistent stream state");
<a name='L792'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L793'>    <b>case</b>(<a href='../S/2769.html#L179' title='Defined at 179 in Modules/zlib/zlib.h.'>Z_MEM_ERROR</a>):
<a name='L794'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_MemoryError,
<a name='L795'>                        "Can't allocate memory for decompression object");
<a name='L796'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L797'>    <b>default</b>:
<a name='L798'>        <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "while copying decompression object");
<a name='L799'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L800'>    <font color='red'>}</font>
<a name='L801'>
<a name='L802'>    Py_INCREF(self-&gt;unused_data);
<a name='L803'>    Py_INCREF(self-&gt;unconsumed_tail);
<a name='L804'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(retval-&gt;unused_data);
<a name='L805'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(retval-&gt;unconsumed_tail);
<a name='L806'>    retval-&gt;unused_data = self-&gt;unused_data;
<a name='L807'>    retval-&gt;unconsumed_tail = self-&gt;unconsumed_tail;
<a name='L808'>
<a name='L809'>    <i><font color='green'>/* Mark it as being initialized */</font></i>
<a name='L810'>    retval-&gt;is_initialised = 1;
<a name='L811'>
<a name='L812'>    <a href='../D/1899.html' title='Multiple defined in 2 places.'>LEAVE_ZLIB</a>(self);
<a name='L813'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)retval;
<a name='L814'>
<a name='L815'><a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L816'>    <a href='../D/1899.html' title='Multiple defined in 2 places.'>LEAVE_ZLIB</a>(self);
<a name='L817'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(retval);
<a name='L818'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L819'><font color='red'>}</font>
<a name='L820'><font color='darkred'>#endif</font>
<a name='L821'>
<a name='L822'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(decomp_flush__doc__,
<a name='L823'>"flush( [length] ) -- Return a string containing any remaining\n"
<a name='L824'>"decompressed data. length, if given, is the initial size of the\n"
<a name='L825'>"output buffer.\n"
<a name='L826'>"\n"
<a name='L827'>"The decompressor object can no longer be used after this call.");
<a name='L828'>
<a name='L829'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L830'><a href='../S/2774.html#L915' title='Refered from 915 in Modules/zlibmodule.c.'>PyZlib_unflush</a>(compobject *self, PyObject *args)
<a name='L831'><font color='red'>{</font>
<a name='L832'>    <b>int</b> err, length = <a href='../S/2774.html#L33' title='Defined at 33 in Modules/zlibmodule.c.'>DEFAULTALLOC</a>;
<a name='L833'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> * retval = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L834'>    <b>unsigned</b> <b>long</b> start_total_out;
<a name='L835'>
<a name='L836'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|i:flush", &amp;length))
<a name='L837'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L838'>    <b>if</b> (length &lt;= 0) <font color='red'>{</font>
<a name='L839'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "length must be greater than zero");
<a name='L840'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L841'>    <font color='red'>}</font>
<a name='L842'>    <b>if</b> (!(retval = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, length)))
<a name='L843'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L844'>
<a name='L845'>
<a name='L846'>    <a href='../D/948.html' title='Multiple defined in 2 places.'>ENTER_ZLIB</a>(self);
<a name='L847'>
<a name='L848'>    start_total_out = self-&gt;zst.total_out;
<a name='L849'>    self-&gt;zst.avail_out = length;
<a name='L850'>    self-&gt;zst.next_out = (<a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *)PyBytes_AS_STRING(retval);
<a name='L851'>
<a name='L852'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L853'>    err = <a href='../D/9156.html' title='Multiple defined in 3 places.'>inflate</a>(&amp;(self-&gt;zst), <a href='../S/2769.html#L168' title='Defined at 168 in Modules/zlib/zlib.h.'>Z_FINISH</a>);
<a name='L854'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L855'>
<a name='L856'>    <i><font color='green'>/* while Z_OK and the output buffer is full, there might be more output,</font></i>
<a name='L857'><i><font color='green'>       so extend the output buffer and try again */</font></i>
<a name='L858'>    <b>while</b> ((err == <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a> || err == <a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>) &amp;&amp; self-&gt;zst.avail_out == 0) <font color='red'>{</font>
<a name='L859'>        <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;retval, length &lt;&lt; 1) &lt; 0) <font color='red'>{</font>
<a name='L860'>            Py_DECREF(retval);
<a name='L861'>            retval = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L862'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L863'>        <font color='red'>}</font>
<a name='L864'>        self-&gt;zst.next_out = (<a href='../D/458.html' title='Multiple defined in 4 places.'>Byte</a> *)PyBytes_AS_STRING(retval) + length;
<a name='L865'>        self-&gt;zst.avail_out = length;
<a name='L866'>        length = length &lt;&lt; 1;
<a name='L867'>
<a name='L868'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L869'>        err = <a href='../D/9156.html' title='Multiple defined in 3 places.'>inflate</a>(&amp;(self-&gt;zst), <a href='../S/2769.html#L168' title='Defined at 168 in Modules/zlib/zlib.h.'>Z_FINISH</a>);
<a name='L870'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L871'>    <font color='red'>}</font>
<a name='L872'>
<a name='L873'>    <i><font color='green'>/* If flushmode is Z_FINISH, we also have to call deflateEnd() to free</font></i>
<a name='L874'><i><font color='green'>       various data structures. Note we should only get Z_STREAM_END when</font></i>
<a name='L875'><i><font color='green'>       flushmode is Z_FINISH */</font></i>
<a name='L876'>    <b>if</b> (err == <a href='../S/2769.html#L174' title='Defined at 174 in Modules/zlib/zlib.h.'>Z_STREAM_END</a>) <font color='red'>{</font>
<a name='L877'>        err = <a href='../D/9162.html' title='Multiple defined in 3 places.'>inflateEnd</a>(&amp;(self-&gt;zst));
<a name='L878'>        self-&gt;is_initialised = 0;
<a name='L879'>        <b>if</b> (err != <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>) <font color='red'>{</font>
<a name='L880'>            <a href='../S/2774.html#L53' title='Defined at 53 in Modules/zlibmodule.c.'>zlib_error</a>(self-&gt;zst, err, "from inflateEnd()");
<a name='L881'>            Py_DECREF(retval);
<a name='L882'>            retval = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L883'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L884'>        <font color='red'>}</font>
<a name='L885'>    <font color='red'>}</font>
<a name='L886'>    <b>if</b> (<a href='../S/2779.html#L2822' title='Defined at 2822 in Objects/bytesobject.c.'>_PyBytes_Resize</a>(&amp;retval, self-&gt;zst.total_out - start_total_out) &lt; 0) <font color='red'>{</font>
<a name='L887'>        Py_DECREF(retval);
<a name='L888'>        retval = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L889'>    <font color='red'>}</font>
<a name='L890'>
<a name='L891'><a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L892'>
<a name='L893'>    <a href='../D/1899.html' title='Multiple defined in 2 places.'>LEAVE_ZLIB</a>(self);
<a name='L894'>
<a name='L895'>    <b>return</b> retval;
<a name='L896'><font color='red'>}</font>
<a name='L897'>
<a name='L898'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> comp_methods[] =
<a name='L899'><font color='red'>{</font>
<a name='L900'>    <font color='red'>{</font>"compress", (binaryfunc)<a href='../S/2774.html#L424' title='Defined at 424 in Modules/zlibmodule.c.'>PyZlib_objcompress</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L901'>                 comp_compress__doc__<font color='red'>}</font>,
<a name='L902'>    <font color='red'>{</font>"flush", (binaryfunc)<a href='../S/2774.html#L635' title='Defined at 635 in Modules/zlibmodule.c.'>PyZlib_flush</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L903'>              comp_flush__doc__<font color='red'>}</font>,
<a name='L904'><font color='darkred'>#ifdef</font> HAVE_ZLIB_COPY
<a name='L905'>    <font color='red'>{</font>"copy",  (PyCFunction)<a href='../S/2774.html#L724' title='Defined at 724 in Modules/zlibmodule.c.'>PyZlib_copy</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L906'>              comp_copy__doc__<font color='red'>}</font>,
<a name='L907'><font color='darkred'>#endif</font>
<a name='L908'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L909'><font color='red'>}</font>;
<a name='L910'>
<a name='L911'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> Decomp_methods[] =
<a name='L912'><font color='red'>{</font>
<a name='L913'>    <font color='red'>{</font>"decompress", (binaryfunc)<a href='../S/2774.html#L506' title='Defined at 506 in Modules/zlibmodule.c.'>PyZlib_objdecompress</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L914'>                   decomp_decompress__doc__<font color='red'>}</font>,
<a name='L915'>    <font color='red'>{</font>"flush", (binaryfunc)<a href='../S/2774.html#L830' title='Defined at 830 in Modules/zlibmodule.c.'>PyZlib_unflush</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L916'>              decomp_flush__doc__<font color='red'>}</font>,
<a name='L917'><font color='darkred'>#ifdef</font> HAVE_ZLIB_COPY
<a name='L918'>    <font color='red'>{</font>"copy",  (PyCFunction)<a href='../S/2774.html#L774' title='Defined at 774 in Modules/zlibmodule.c.'>PyZlib_uncopy</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L919'>              decomp_copy__doc__<font color='red'>}</font>,
<a name='L920'><font color='darkred'>#endif</font>
<a name='L921'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L922'><font color='red'>}</font>;
<a name='L923'>
<a name='L924'><font color='darkred'>#define</font> <a href='../R/556.html' title='Multiple refered from 2 places.'>COMP_OFF</a>(x) <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a>, x)
<a name='L925'><b>static</b> <a href='../D/3506.html' title='Multiple defined in 2 places.'>PyMemberDef</a> Decomp_members[] = <font color='red'>{</font>
<a name='L926'>    <font color='red'>{</font>"unused_data",     <a href='../S/577.html#L44' title='Defined at 44 in Include/structmember.h.'>T_OBJECT</a>, <a href='../S/2774.html#L924' title='Defined at 924 in Modules/zlibmodule.c.'>COMP_OFF</a>(unused_data), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a><font color='red'>}</font>,
<a name='L927'>    <font color='red'>{</font>"unconsumed_tail", <a href='../S/577.html#L44' title='Defined at 44 in Include/structmember.h.'>T_OBJECT</a>, <a href='../S/2774.html#L924' title='Defined at 924 in Modules/zlibmodule.c.'>COMP_OFF</a>(unconsumed_tail), <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a><font color='red'>}</font>,
<a name='L928'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L929'><font color='red'>}</font>;
<a name='L930'>
<a name='L931'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(adler32__doc__,
<a name='L932'>"adler32(string[, start]) -- Compute an Adler-32 checksum of string.\n"
<a name='L933'>"\n"
<a name='L934'>"An optional starting value can be specified.  The returned checksum is\n"
<a name='L935'>"an integer.");
<a name='L936'>
<a name='L937'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L938'><a href='../S/2774.html#L989' title='Refered from 989 in Modules/zlibmodule.c.'>PyZlib_adler32</a>(PyObject *self, PyObject *args)
<a name='L939'><font color='red'>{</font>
<a name='L940'>    <b>unsigned</b> <b>int</b> adler32val = 1;  <i><font color='green'>/* adler32(0L, Z_NULL, 0) */</font></i>
<a name='L941'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuf;
<a name='L942'>
<a name='L943'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*|I:adler32", &amp;pbuf, &amp;adler32val))
<a name='L944'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L945'>    <i><font color='green'>/* Releasing the GIL for very small buffers is inefficient</font></i>
<a name='L946'><i><font color='green'>       and may lower performance */</font></i>
<a name='L947'>    <b>if</b> (pbuf.len &gt; 1024*5) <font color='red'>{</font>
<a name='L948'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L949'>        adler32val = <a href='../D/6692.html' title='Multiple defined in 3 places.'>adler32</a>(adler32val, pbuf.buf, pbuf.len);
<a name='L950'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L951'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L952'>        adler32val = <a href='../D/6692.html' title='Multiple defined in 3 places.'>adler32</a>(adler32val, pbuf.buf, pbuf.len);
<a name='L953'>    <font color='red'>}</font>
<a name='L954'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L955'>    <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(adler32val &amp; 0xffffffffU);
<a name='L956'><font color='red'>}</font>
<a name='L957'>
<a name='L958'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(crc32__doc__,
<a name='L959'>"crc32(string[, start]) -- Compute a CRC-32 checksum of string.\n"
<a name='L960'>"\n"
<a name='L961'>"An optional starting value can be specified.  The returned checksum is\n"
<a name='L962'>"an integer.");
<a name='L963'>
<a name='L964'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L965'><a href='../S/2774.html#L995' title='Refered from 995 in Modules/zlibmodule.c.'>PyZlib_crc32</a>(PyObject *self, PyObject *args)
<a name='L966'><font color='red'>{</font>
<a name='L967'>    <b>unsigned</b> <b>int</b> crc32val = 0;  <i><font color='green'>/* crc32(0L, Z_NULL, 0) */</font></i>
<a name='L968'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuf;
<a name='L969'>    <b>int</b> signed_val;
<a name='L970'>
<a name='L971'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "y*|I:crc32", &amp;pbuf, &amp;crc32val))
<a name='L972'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L973'>    <i><font color='green'>/* Releasing the GIL for very small buffers is inefficient</font></i>
<a name='L974'><i><font color='green'>       and may lower performance */</font></i>
<a name='L975'>    <b>if</b> (pbuf.len &gt; 1024*5) <font color='red'>{</font>
<a name='L976'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L977'>        signed_val = <a href='../D/7813.html' title='Multiple defined in 3 places.'>crc32</a>(crc32val, pbuf.buf, pbuf.len);
<a name='L978'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L979'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L980'>        signed_val = <a href='../D/7813.html' title='Multiple defined in 3 places.'>crc32</a>(crc32val, pbuf.buf, pbuf.len);
<a name='L981'>    <font color='red'>}</font>
<a name='L982'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L983'>    <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(signed_val &amp; 0xffffffffU);
<a name='L984'><font color='red'>}</font>
<a name='L985'>
<a name='L986'>
<a name='L987'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> zlib_methods[] =
<a name='L988'><font color='red'>{</font>
<a name='L989'>    <font color='red'>{</font>"adler32", (PyCFunction)<a href='../S/2774.html#L938' title='Defined at 938 in Modules/zlibmodule.c.'>PyZlib_adler32</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L990'>                adler32__doc__<font color='red'>}</font>,
<a name='L991'>    <font color='red'>{</font>"compress", (PyCFunction)<a href='../S/2774.html#L115' title='Defined at 115 in Modules/zlibmodule.c.'>PyZlib_compress</a>,  <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L992'>                 compress__doc__<font color='red'>}</font>,
<a name='L993'>    <font color='red'>{</font>"compressobj", (PyCFunction)<a href='../S/2774.html#L314' title='Defined at 314 in Modules/zlibmodule.c.'>PyZlib_compressobj</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L994'>                    compressobj__doc__<font color='red'>}</font>,
<a name='L995'>    <font color='red'>{</font>"crc32", (PyCFunction)<a href='../S/2774.html#L965' title='Defined at 965 in Modules/zlibmodule.c.'>PyZlib_crc32</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L996'>              crc32__doc__<font color='red'>}</font>,
<a name='L997'>    <font color='red'>{</font>"decompress", (PyCFunction)<a href='../S/2774.html#L204' title='Defined at 204 in Modules/zlibmodule.c.'>PyZlib_decompress</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L998'>                   decompress__doc__<font color='red'>}</font>,
<a name='L999'>    <font color='red'>{</font>"decompressobj", (PyCFunction)<a href='../S/2774.html#L353' title='Defined at 353 in Modules/zlibmodule.c.'>PyZlib_decompressobj</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L1000'>                   decompressobj__doc__<font color='red'>}</font>,
<a name='L1001'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L1002'><font color='red'>}</font>;
<a name='L1003'>
<a name='L1004'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Comptype = <font color='red'>{</font>
<a name='L1005'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(0, 0)
<a name='L1006'>    "zlib.Compress",
<a name='L1007'>    <b>sizeof</b>(<a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a>),
<a name='L1008'>    0,
<a name='L1009'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2774.html#L400' title='Defined at 400 in Modules/zlibmodule.c.'>Comp_dealloc</a>,       <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L1010'>    0,                              <i><font color='green'>/*tp_print*/</font></i>
<a name='L1011'>    0,                              <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L1012'>    0,                              <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L1013'>    0,                              <i><font color='green'>/*tp_reserved*/</font></i>
<a name='L1014'>    0,                              <i><font color='green'>/*tp_repr*/</font></i>
<a name='L1015'>    0,                              <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L1016'>    0,                              <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L1017'>    0,                              <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L1018'>    0,                              <i><font color='green'>/*tp_hash*/</font></i>
<a name='L1019'>    0,                              <i><font color='green'>/*tp_call*/</font></i>
<a name='L1020'>    0,                              <i><font color='green'>/*tp_str*/</font></i>
<a name='L1021'>    0,                              <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L1022'>    0,                              <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L1023'>    0,                              <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L1024'>    Py_TPFLAGS_DEFAULT,             <i><font color='green'>/*tp_flags*/</font></i>
<a name='L1025'>    0,                              <i><font color='green'>/*tp_doc*/</font></i>
<a name='L1026'>    0,                              <i><font color='green'>/*tp_traverse*/</font></i>
<a name='L1027'>    0,                              <i><font color='green'>/*tp_clear*/</font></i>
<a name='L1028'>    0,                              <i><font color='green'>/*tp_richcompare*/</font></i>
<a name='L1029'>    0,                              <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L1030'>    0,                              <i><font color='green'>/*tp_iter*/</font></i>
<a name='L1031'>    0,                              <i><font color='green'>/*tp_iternext*/</font></i>
<a name='L1032'>    comp_methods,                   <i><font color='green'>/*tp_methods*/</font></i>
<a name='L1033'><font color='red'>}</font>;
<a name='L1034'>
<a name='L1035'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Decomptype = <font color='red'>{</font>
<a name='L1036'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(0, 0)
<a name='L1037'>    "zlib.Decompress",
<a name='L1038'>    <b>sizeof</b>(<a href='../S/2774.html#L50' title='Defined at 50 in Modules/zlibmodule.c.'>compobject</a>),
<a name='L1039'>    0,
<a name='L1040'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2774.html#L408' title='Defined at 408 in Modules/zlibmodule.c.'>Decomp_dealloc</a>,     <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L1041'>    0,                              <i><font color='green'>/*tp_print*/</font></i>
<a name='L1042'>    0,                              <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L1043'>    0,                              <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L1044'>    0,                              <i><font color='green'>/*tp_reserved*/</font></i>
<a name='L1045'>    0,                              <i><font color='green'>/*tp_repr*/</font></i>
<a name='L1046'>    0,                              <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L1047'>    0,                              <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L1048'>    0,                              <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L1049'>    0,                              <i><font color='green'>/*tp_hash*/</font></i>
<a name='L1050'>    0,                              <i><font color='green'>/*tp_call*/</font></i>
<a name='L1051'>    0,                              <i><font color='green'>/*tp_str*/</font></i>
<a name='L1052'>    0,                              <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L1053'>    0,                              <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L1054'>    0,                              <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L1055'>    Py_TPFLAGS_DEFAULT,             <i><font color='green'>/*tp_flags*/</font></i>
<a name='L1056'>    0,                              <i><font color='green'>/*tp_doc*/</font></i>
<a name='L1057'>    0,                              <i><font color='green'>/*tp_traverse*/</font></i>
<a name='L1058'>    0,                              <i><font color='green'>/*tp_clear*/</font></i>
<a name='L1059'>    0,                              <i><font color='green'>/*tp_richcompare*/</font></i>
<a name='L1060'>    0,                              <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L1061'>    0,                              <i><font color='green'>/*tp_iter*/</font></i>
<a name='L1062'>    0,                              <i><font color='green'>/*tp_iternext*/</font></i>
<a name='L1063'>    Decomp_methods,                 <i><font color='green'>/*tp_methods*/</font></i>
<a name='L1064'>    Decomp_members,                 <i><font color='green'>/*tp_members*/</font></i>
<a name='L1065'><font color='red'>}</font>;
<a name='L1066'>
<a name='L1067'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(zlib_module_documentation,
<a name='L1068'>"The functions in this module allow compression and decompression using the\n"
<a name='L1069'>"zlib library, which is based on GNU zip.\n"
<a name='L1070'>"\n"
<a name='L1071'>"adler32(string[, start]) -- Compute an Adler-32 checksum.\n"
<a name='L1072'>"compress(string[, level]) -- Compress string, with compression level in 1-9.\n"
<a name='L1073'>"compressobj([level]) -- Return a compressor object.\n"
<a name='L1074'>"crc32(string[, start]) -- Compute a CRC-32 checksum.\n"
<a name='L1075'>"decompress(string,[wbits],[bufsize]) -- Decompresses a compressed string.\n"
<a name='L1076'>"decompressobj([wbits]) -- Return a decompressor object.\n"
<a name='L1077'>"\n"
<a name='L1078'>"'wbits' is window buffer size.\n"
<a name='L1079'>"Compressor objects support compress() and flush() methods; decompressor\n"
<a name='L1080'>"objects support decompress() and flush().");
<a name='L1081'>
<a name='L1082'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> zlibmodule = <font color='red'>{</font>
<a name='L1083'>        <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L1084'>        "zlib",
<a name='L1085'>        zlib_module_documentation,
<a name='L1086'>        -1,
<a name='L1087'>        zlib_methods,
<a name='L1088'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1089'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1090'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1091'>        <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L1092'><font color='red'>}</font>;
<a name='L1093'>
<a name='L1094'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L1095'><a href='../R/3067.html' title='Multiple refered from 2 places.'>PyInit_zlib</a>(<b>void</b>)
<a name='L1096'><font color='red'>{</font>
<a name='L1097'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *m, *ver;
<a name='L1098'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;Comptype) &lt; 0)
<a name='L1099'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1100'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;Decomptype) &lt; 0)
<a name='L1101'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1102'>    m = PyModule_Create(&amp;zlibmodule);
<a name='L1103'>    <b>if</b> (m == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1104'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1105'>
<a name='L1106'>    ZlibError = <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("zlib.error", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1107'>    <b>if</b> (ZlibError != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1108'>        Py_INCREF(ZlibError);
<a name='L1109'>        <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "error", ZlibError);
<a name='L1110'>    <font color='red'>}</font>
<a name='L1111'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "MAX_WBITS", <a href='../D/2084.html' title='Multiple defined in 2 places.'>MAX_WBITS</a>);
<a name='L1112'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "DEFLATED", <a href='../S/2774.html#L24' title='Defined at 24 in Modules/zlibmodule.c.'>DEFLATED</a>);
<a name='L1113'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "DEF_MEM_LEVEL", <a href='../D/768.html' title='Multiple defined in 4 places.'>DEF_MEM_LEVEL</a>);
<a name='L1114'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_BEST_SPEED", <a href='../S/2769.html#L187' title='Defined at 187 in Modules/zlib/zlib.h.'>Z_BEST_SPEED</a>);
<a name='L1115'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_BEST_COMPRESSION", <a href='../S/2769.html#L188' title='Defined at 188 in Modules/zlib/zlib.h.'>Z_BEST_COMPRESSION</a>);
<a name='L1116'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_DEFAULT_COMPRESSION", <a href='../S/2769.html#L189' title='Defined at 189 in Modules/zlib/zlib.h.'>Z_DEFAULT_COMPRESSION</a>);
<a name='L1117'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_FILTERED", <a href='../S/2769.html#L192' title='Defined at 192 in Modules/zlib/zlib.h.'>Z_FILTERED</a>);
<a name='L1118'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_HUFFMAN_ONLY", <a href='../S/2769.html#L193' title='Defined at 193 in Modules/zlib/zlib.h.'>Z_HUFFMAN_ONLY</a>);
<a name='L1119'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_DEFAULT_STRATEGY", <a href='../S/2769.html#L196' title='Defined at 196 in Modules/zlib/zlib.h.'>Z_DEFAULT_STRATEGY</a>);
<a name='L1120'>
<a name='L1121'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_FINISH", <a href='../S/2769.html#L168' title='Defined at 168 in Modules/zlib/zlib.h.'>Z_FINISH</a>);
<a name='L1122'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_NO_FLUSH", <a href='../S/2769.html#L164' title='Defined at 164 in Modules/zlib/zlib.h.'>Z_NO_FLUSH</a>);
<a name='L1123'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_SYNC_FLUSH", <a href='../S/2769.html#L166' title='Defined at 166 in Modules/zlib/zlib.h.'>Z_SYNC_FLUSH</a>);
<a name='L1124'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "Z_FULL_FLUSH", <a href='../S/2769.html#L167' title='Defined at 167 in Modules/zlib/zlib.h.'>Z_FULL_FLUSH</a>);
<a name='L1125'>
<a name='L1126'>    ver = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(<a href='../S/2769.html#L40' title='Defined at 40 in Modules/zlib/zlib.h.'>ZLIB_VERSION</a>);
<a name='L1127'>    <b>if</b> (ver != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1128'>        <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "ZLIB_VERSION", ver);
<a name='L1129'>
<a name='L1130'>    <a href='../S/3125.html#L566' title='Defined at 566 in Python/modsupport.c.'>PyModule_AddStringConstant</a>(m, "__version__", "1.0");
<a name='L1131'>
<a name='L1132'>    <b>return</b> m;
<a name='L1133'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L53'>[^]</a><a href='#L1095'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
