<html>
<head>
<title>Modules/mathmodule.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/mathmodule.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L75'>[^]</a><a href='#L1933'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L75' title='Defined at 75.'>sinpi</a>
<li><a href='#L203' title='Defined at 203.'>lanczos_sum</a>
<li><a href='#L232' title='Defined at 232.'>m_tgamma</a>
<li><a href='#L332' title='Defined at 332.'>m_lgamma</a>
<li><a href='#L425' title='Defined at 425.'>m_erf_series</a>
<li><a href='#L455' title='Defined at 455.'>m_erfc_contfrac</a>
<li><a href='#L487' title='Defined at 487.'>m_erf</a>
<li><a href='#L505' title='Defined at 505.'>m_erfc</a>
<li><a href='#L529' title='Defined at 529.'>m_atan2</a>
<li><a href='#L564' title='Defined at 564.'>m_log</a>
<li><a href='#L586' title='Defined at 586.'>m_log10</a>
<li><a href='#L613' title='Defined at 613.'>is_error</a>
<li><a href='#L679' title='Defined at 679.'>math_1_to_whatever</a>
<li><a href='#L717' title='Defined at 717.'>math_1a</a>
<li><a href='#L760' title='Defined at 760.'>math_1</a>
<li><a href='#L766' title='Defined at 766.'>math_1_to_int</a>
<li><a href='#L772' title='Defined at 772.'>math_2</a>
<li><a href='#L822' title='Defined at 822.'>FUNC1</a>
<li><a href='#L857' title='Defined at 857.'>FUNC2</a>
<li><a href='#L895' title='Defined at 895.'>FUNC1A</a>
<li><a href='#L1010' title='Defined at 1010.'>math_fsum</a>
<li><a href='#L1146' title='Defined at 1146.'>bit_length</a>
<li><a href='#L1157' title='Defined at 1157.'>count_set_bits</a>
<li><a href='#L1237' title='Defined at 1237.'>factorial_partial_product</a>
<li><a href='#L1290' title='Defined at 1290.'>factorial_odd_part</a>
<li><a href='#L1356' title='Defined at 1356.'>math_factorial</a>
<li><a href='#L1412' title='Defined at 1412.'>math_trunc</a>
<li><a href='#L1441' title='Defined at 1441.'>math_frexp</a>
<li><a href='#L1468' title='Defined at 1468.'>math_ldexp</a>
<li><a href='#L1524' title='Defined at 1524.'>math_modf</a>
<li><a href='#L1561' title='Defined at 1561.'>loghelper</a>
<li><a href='#L1599' title='Defined at 1599.'>math_log</a>
<li><a href='#L1631' title='Defined at 1631.'>math_log10</a>
<li><a href='#L1640' title='Defined at 1640.'>math_fmod</a>
<li><a href='#L1674' title='Defined at 1674.'>math_hypot</a>
<li><a href='#L1721' title='Defined at 1721.'>math_pow</a>
<li><a href='#L1805' title='Defined at 1805.'>math_degrees</a>
<li><a href='#L1818' title='Defined at 1818.'>math_radians</a>
<li><a href='#L1831' title='Defined at 1831.'>math_isfinite</a>
<li><a href='#L1844' title='Defined at 1844.'>math_isnan</a>
<li><a href='#L1857' title='Defined at 1857.'>math_isinf</a>
<li><a href='#L1933' title='Defined at 1933.'>PyInit_math</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* Math module -- standard C math library functions, pi and e */</font></i>
<a name='L2'>
<a name='L3'><i><font color='green'>/* Here are some comments from Tim Peters, extracted from the</font></i>
<a name='L4'><i><font color='green'>   discussion attached to http://bugs.python.org/issue1640.  They</font></i>
<a name='L5'><i><font color='green'>   describe the general aims of the math module with respect to</font></i>
<a name='L6'><i><font color='green'>   special values, IEEE-754 floating-point exceptions, and Python</font></i>
<a name='L7'><i><font color='green'>   exceptions.</font></i>
<a name='L8'><i><font color='green'></font></i>
<a name='L9'><i><font color='green'>These are the "spirit of 754" rules:</font></i>
<a name='L10'><i><font color='green'></font></i>
<a name='L11'><i><font color='green'>1. If the mathematical result is a real number, but of magnitude too</font></i>
<a name='L12'><i><font color='green'>large to approximate by a machine float, overflow is signaled and the</font></i>
<a name='L13'><i><font color='green'>result is an infinity (with the appropriate sign).</font></i>
<a name='L14'><i><font color='green'></font></i>
<a name='L15'><i><font color='green'>2. If the mathematical result is a real number, but of magnitude too</font></i>
<a name='L16'><i><font color='green'>small to approximate by a machine float, underflow is signaled and the</font></i>
<a name='L17'><i><font color='green'>result is a zero (with the appropriate sign).</font></i>
<a name='L18'><i><font color='green'></font></i>
<a name='L19'><i><font color='green'>3. At a singularity (a value x such that the limit of f(y) as y</font></i>
<a name='L20'><i><font color='green'>approaches x exists and is an infinity), "divide by zero" is signaled</font></i>
<a name='L21'><i><font color='green'>and the result is an infinity (with the appropriate sign).  This is</font></i>
<a name='L22'><i><font color='green'>complicated a little by that the left-side and right-side limits may</font></i>
<a name='L23'><i><font color='green'>not be the same; e.g., 1/x approaches +inf or -inf as x approaches 0</font></i>
<a name='L24'><i><font color='green'>from the positive or negative directions.  In that specific case, the</font></i>
<a name='L25'><i><font color='green'>sign of the zero determines the result of 1/0.</font></i>
<a name='L26'><i><font color='green'></font></i>
<a name='L27'><i><font color='green'>4. At a point where a function has no defined result in the extended</font></i>
<a name='L28'><i><font color='green'>reals (i.e., the reals plus an infinity or two), invalid operation is</font></i>
<a name='L29'><i><font color='green'>signaled and a NaN is returned.</font></i>
<a name='L30'><i><font color='green'></font></i>
<a name='L31'><i><font color='green'>And these are what Python has historically /tried/ to do (but not</font></i>
<a name='L32'><i><font color='green'>always successfully, as platform libm behavior varies a lot):</font></i>
<a name='L33'><i><font color='green'></font></i>
<a name='L34'><i><font color='green'>For #1, raise OverflowError.</font></i>
<a name='L35'><i><font color='green'></font></i>
<a name='L36'><i><font color='green'>For #2, return a zero (with the appropriate sign if that happens by</font></i>
<a name='L37'><i><font color='green'>accident ;-)).</font></i>
<a name='L38'><i><font color='green'></font></i>
<a name='L39'><i><font color='green'>For #3 and #4, raise ValueError.  It may have made sense to raise</font></i>
<a name='L40'><i><font color='green'>Python's ZeroDivisionError in #3, but historically that's only been</font></i>
<a name='L41'><i><font color='green'>raised for division by zero and mod by zero.</font></i>
<a name='L42'><i><font color='green'></font></i>
<a name='L43'><i><font color='green'>*/</font></i>
<a name='L44'>
<a name='L45'><i><font color='green'>/*</font></i>
<a name='L46'><i><font color='green'>   In general, on an IEEE-754 platform the aim is to follow the C99</font></i>
<a name='L47'><i><font color='green'>   standard, including Annex 'F', whenever possible.  Where the</font></i>
<a name='L48'><i><font color='green'>   standard recommends raising the 'divide-by-zero' or 'invalid'</font></i>
<a name='L49'><i><font color='green'>   floating-point exceptions, Python should raise a ValueError.  Where</font></i>
<a name='L50'><i><font color='green'>   the standard recommends raising 'overflow', Python should raise an</font></i>
<a name='L51'><i><font color='green'>   OverflowError.  In all other circumstances a value should be</font></i>
<a name='L52'><i><font color='green'>   returned.</font></i>
<a name='L53'><i><font color='green'> */</font></i>
<a name='L54'>
<a name='L55'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L56'><font color='darkred'>#include</font> "<a href='2580.html'>_math.h</a>"
<a name='L57'>
<a name='L58'><font color='darkred'>#ifdef</font> _OSF_SOURCE
<a name='L59'><i><font color='green'>/* OSF1 5.1 doesn't make this available with XOPEN_SOURCE_EXTENDED defined */</font></i>
<a name='L60'><b>extern</b> <b>double</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(<b>double</b>, <b>double</b>);
<a name='L61'><font color='darkred'>#endif</font>
<a name='L62'>
<a name='L63'><i><font color='green'>/*</font></i>
<a name='L64'><i><font color='green'>   sin(pi*x), giving accurate results for all finite x (especially x</font></i>
<a name='L65'><i><font color='green'>   integral or close to an integer).  This is here for use in the</font></i>
<a name='L66'><i><font color='green'>   reflection formula for the gamma function.  It conforms to IEEE</font></i>
<a name='L67'><i><font color='green'>   754-2008 for finite arguments, but not for infinities or nans.</font></i>
<a name='L68'><i><font color='green'>*/</font></i>
<a name='L69'>
<a name='L70'><b>static</b> <b>const</b> <b>double</b> pi = 3.141592653589793238462643383279502884197;
<a name='L71'><b>static</b> <b>const</b> <b>double</b> sqrtpi = 1.772453850905516027298167483341145182798;
<a name='L72'><b>static</b> <b>const</b> <b>double</b> logpi = 1.144729885849400174143427351353058711647;
<a name='L73'>
<a name='L74'><b>static</b> <b>double</b>
<a name='L75'><a href='../R/10321.html' title='Multiple refered from 3 places.'>sinpi</a>(<b>double</b> x)
<a name='L76'><font color='red'>{</font>
<a name='L77'>    <b>double</b> y, r;
<a name='L78'>    <b>int</b> n;
<a name='L79'>    <i><font color='green'>/* this function should only ever be called for finite arguments */</font></i>
<a name='L80'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x));
<a name='L81'>    y = fmod(fabs(x), 2.0);
<a name='L82'>    n = (<b>int</b>)<a href='../S/3133.html#L70' title='Defined at 70 in Python/pymath.c.'>round</a>(2.0*y);
<a name='L83'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0 &lt;= n &amp;&amp; n &lt;= 4);
<a name='L84'>    <b>switch</b> (n) <font color='red'>{</font>
<a name='L85'>    <b>case</b> 0:
<a name='L86'>        r = sin(pi*y);
<a name='L87'>        <b>break</b>;
<a name='L88'>    <b>case</b> 1:
<a name='L89'>        r = cos(pi*(y-0.5));
<a name='L90'>        <b>break</b>;
<a name='L91'>    <b>case</b> 2:
<a name='L92'>        <i><font color='green'>/* N.B. -sin(pi*(y-1.0)) is *not* equivalent: it would give</font></i>
<a name='L93'><i><font color='green'>           -0.0 instead of 0.0 when y == 1.0. */</font></i>
<a name='L94'>        r = sin(pi*(1.0-y));
<a name='L95'>        <b>break</b>;
<a name='L96'>    <b>case</b> 3:
<a name='L97'>        r = -cos(pi*(y-1.5));
<a name='L98'>        <b>break</b>;
<a name='L99'>    <b>case</b> 4:
<a name='L100'>        r = sin(pi*(y-2.0));
<a name='L101'>        <b>break</b>;
<a name='L102'>    <b>default</b>:
<a name='L103'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0);  <i><font color='green'>/* should never get here */</font></i>
<a name='L104'>        r = -1.23e200; <i><font color='green'>/* silence gcc warning */</font></i>
<a name='L105'>    <font color='red'>}</font>
<a name='L106'>    <b>return</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(1.0, x)*r;
<a name='L107'><font color='red'>}</font>
<a name='L108'>
<a name='L109'><i><font color='green'>/* Implementation of the real gamma function.  In extensive but non-exhaustive</font></i>
<a name='L110'><i><font color='green'>   random tests, this function proved accurate to within &lt;= 10 ulps across the</font></i>
<a name='L111'><i><font color='green'>   entire float domain.  Note that accuracy may depend on the quality of the</font></i>
<a name='L112'><i><font color='green'>   system math functions, the pow function in particular.  Special cases</font></i>
<a name='L113'><i><font color='green'>   follow C99 annex F.  The parameters and method are tailored to platforms</font></i>
<a name='L114'><i><font color='green'>   whose double format is the IEEE 754 binary64 format.</font></i>
<a name='L115'><i><font color='green'></font></i>
<a name='L116'><i><font color='green'>   Method: for x &gt; 0.0 we use the Lanczos approximation with parameters N=13</font></i>
<a name='L117'><i><font color='green'>   and g=6.024680040776729583740234375; these parameters are amongst those</font></i>
<a name='L118'><i><font color='green'>   used by the Boost library.  Following Boost (again), we re-express the</font></i>
<a name='L119'><i><font color='green'>   Lanczos sum as a rational function, and compute it that way.  The</font></i>
<a name='L120'><i><font color='green'>   coefficients below were computed independently using MPFR, and have been</font></i>
<a name='L121'><i><font color='green'>   double-checked against the coefficients in the Boost source code.</font></i>
<a name='L122'><i><font color='green'></font></i>
<a name='L123'><i><font color='green'>   For x &lt; 0.0 we use the reflection formula.</font></i>
<a name='L124'><i><font color='green'></font></i>
<a name='L125'><i><font color='green'>   There's one minor tweak that deserves explanation: Lanczos' formula for</font></i>
<a name='L126'><i><font color='green'>   Gamma(x) involves computing pow(x+g-0.5, x-0.5) / exp(x+g-0.5).  For many x</font></i>
<a name='L127'><i><font color='green'>   values, x+g-0.5 can be represented exactly.  However, in cases where it</font></i>
<a name='L128'><i><font color='green'>   can't be represented exactly the small error in x+g-0.5 can be magnified</font></i>
<a name='L129'><i><font color='green'>   significantly by the pow and exp calls, especially for large x.  A cheap</font></i>
<a name='L130'><i><font color='green'>   correction is to multiply by (1 + e*g/(x+g-0.5)), where e is the error</font></i>
<a name='L131'><i><font color='green'>   involved in the computation of x+g-0.5 (that is, e = computed value of</font></i>
<a name='L132'><i><font color='green'>   x+g-0.5 - exact value of x+g-0.5).  Here's the proof:</font></i>
<a name='L133'><i><font color='green'></font></i>
<a name='L134'><i><font color='green'>   Correction factor</font></i>
<a name='L135'><i><font color='green'>   -----------------</font></i>
<a name='L136'><i><font color='green'>   Write x+g-0.5 = y-e, where y is exactly representable as an IEEE 754</font></i>
<a name='L137'><i><font color='green'>   double, and e is tiny.  Then:</font></i>
<a name='L138'><i><font color='green'></font></i>
<a name='L139'><i><font color='green'>     pow(x+g-0.5,x-0.5)/exp(x+g-0.5) = pow(y-e, x-0.5)/exp(y-e)</font></i>
<a name='L140'><i><font color='green'>     = pow(y, x-0.5)/exp(y) * C,</font></i>
<a name='L141'><i><font color='green'></font></i>
<a name='L142'><i><font color='green'>   where the correction_factor C is given by</font></i>
<a name='L143'><i><font color='green'></font></i>
<a name='L144'><i><font color='green'>     C = pow(1-e/y, x-0.5) * exp(e)</font></i>
<a name='L145'><i><font color='green'></font></i>
<a name='L146'><i><font color='green'>   Since e is tiny, pow(1-e/y, x-0.5) ~ 1-(x-0.5)*e/y, and exp(x) ~ 1+e, so:</font></i>
<a name='L147'><i><font color='green'></font></i>
<a name='L148'><i><font color='green'>     C ~ (1-(x-0.5)*e/y) * (1+e) ~ 1 + e*(y-(x-0.5))/y</font></i>
<a name='L149'><i><font color='green'></font></i>
<a name='L150'><i><font color='green'>   But y-(x-0.5) = g+e, and g+e ~ g.  So we get C ~ 1 + e*g/y, and</font></i>
<a name='L151'><i><font color='green'></font></i>
<a name='L152'><i><font color='green'>     pow(x+g-0.5,x-0.5)/exp(x+g-0.5) ~ pow(y, x-0.5)/exp(y) * (1 + e*g/y),</font></i>
<a name='L153'><i><font color='green'></font></i>
<a name='L154'><i><font color='green'>   Note that for accuracy, when computing r*C it's better to do</font></i>
<a name='L155'><i><font color='green'></font></i>
<a name='L156'><i><font color='green'>     r + e*g/y*r;</font></i>
<a name='L157'><i><font color='green'></font></i>
<a name='L158'><i><font color='green'>   than</font></i>
<a name='L159'><i><font color='green'></font></i>
<a name='L160'><i><font color='green'>     r * (1 + e*g/y);</font></i>
<a name='L161'><i><font color='green'></font></i>
<a name='L162'><i><font color='green'>   since the addition in the latter throws away most of the bits of</font></i>
<a name='L163'><i><font color='green'>   information in e*g/y.</font></i>
<a name='L164'><i><font color='green'>*/</font></i>
<a name='L165'>
<a name='L166'><font color='darkred'>#define</font> <a href='../R/1691.html' title='Multiple refered from 4 places.'>LANCZOS_N</a> 13
<a name='L167'><b>static</b> <b>const</b> <b>double</b> lanczos_g = 6.024680040776729583740234375;
<a name='L168'><b>static</b> <b>const</b> <b>double</b> lanczos_g_minus_half = 5.524680040776729583740234375;
<a name='L169'><b>static</b> <b>const</b> <b>double</b> lanczos_num_coeffs[<a href='../S/2689.html#L166' title='Defined at 166 in Modules/mathmodule.c.'>LANCZOS_N</a>] = <font color='red'>{</font>
<a name='L170'>    23531376880.410759688572007674451636754734846804940,
<a name='L171'>    42919803642.649098768957899047001988850926355848959,
<a name='L172'>    35711959237.355668049440185451547166705960488635843,
<a name='L173'>    17921034426.037209699919755754458931112671403265390,
<a name='L174'>    6039542586.3520280050642916443072979210699388420708,
<a name='L175'>    1439720407.3117216736632230727949123939715485786772,
<a name='L176'>    248874557.86205415651146038641322942321632125127801,
<a name='L177'>    31426415.585400194380614231628318205362874684987640,
<a name='L178'>    2876370.6289353724412254090516208496135991145378768,
<a name='L179'>    186056.26539522349504029498971604569928220784236328,
<a name='L180'>    8071.6720023658162106380029022722506138218516325024,
<a name='L181'>    210.82427775157934587250973392071336271166969580291,
<a name='L182'>    2.5066282746310002701649081771338373386264310793408
<a name='L183'><font color='red'>}</font>;
<a name='L184'>
<a name='L185'><i><font color='green'>/* denominator is x*(x+1)*...*(x+LANCZOS_N-2) */</font></i>
<a name='L186'><b>static</b> <b>const</b> <b>double</b> lanczos_den_coeffs[<a href='../S/2689.html#L166' title='Defined at 166 in Modules/mathmodule.c.'>LANCZOS_N</a>] = <font color='red'>{</font>
<a name='L187'>    0.0, 39916800.0, 120543840.0, 150917976.0, 105258076.0, 45995730.0,
<a name='L188'>    13339535.0, 2637558.0, 357423.0, 32670.0, 1925.0, 66.0, 1.0<font color='red'>}</font>;
<a name='L189'>
<a name='L190'><i><font color='green'>/* gamma values for small positive integers, 1 though NGAMMA_INTEGRAL */</font></i>
<a name='L191'><font color='darkred'>#define</font> <a href='../R/2084.html' title='Multiple refered from 2 places.'>NGAMMA_INTEGRAL</a> 23
<a name='L192'><b>static</b> <b>const</b> <b>double</b> gamma_integral[<a href='../S/2689.html#L191' title='Defined at 191 in Modules/mathmodule.c.'>NGAMMA_INTEGRAL</a>] = <font color='red'>{</font>
<a name='L193'>    1.0, 1.0, 2.0, 6.0, 24.0, 120.0, 720.0, 5040.0, 40320.0, 362880.0,
<a name='L194'>    3628800.0, 39916800.0, 479001600.0, 6227020800.0, 87178291200.0,
<a name='L195'>    1307674368000.0, 20922789888000.0, 355687428096000.0,
<a name='L196'>    6402373705728000.0, 121645100408832000.0, 2432902008176640000.0,
<a name='L197'>    51090942171709440000.0, 1124000727777607680000.0,
<a name='L198'><font color='red'>}</font>;
<a name='L199'>
<a name='L200'><i><font color='green'>/* Lanczos' sum L_g(x), for positive x */</font></i>
<a name='L201'>
<a name='L202'><b>static</b> <b>double</b>
<a name='L203'><a href='../R/8615.html' title='Multiple refered from 3 places.'>lanczos_sum</a>(<b>double</b> x)
<a name='L204'><font color='red'>{</font>
<a name='L205'>    <b>double</b> num = 0.0, den = 0.0;
<a name='L206'>    <b>int</b> i;
<a name='L207'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(x &gt; 0.0);
<a name='L208'>    <i><font color='green'>/* evaluate the rational function lanczos_sum(x).  For large</font></i>
<a name='L209'><i><font color='green'>       x, the obvious algorithm risks overflow, so we instead</font></i>
<a name='L210'><i><font color='green'>       rescale the denominator and numerator of the rational</font></i>
<a name='L211'><i><font color='green'>       function by x**(1-LANCZOS_N) and treat this as a</font></i>
<a name='L212'><i><font color='green'>       rational function in 1/x.  This also reduces the error for</font></i>
<a name='L213'><i><font color='green'>       larger x values.  The choice of cutoff point (5.0 below) is</font></i>
<a name='L214'><i><font color='green'>       somewhat arbitrary; in tests, smaller cutoff values than</font></i>
<a name='L215'><i><font color='green'>       this resulted in lower accuracy. */</font></i>
<a name='L216'>    <b>if</b> (x &lt; 5.0) <font color='red'>{</font>
<a name='L217'>        <b>for</b> (i = <a href='../S/2689.html#L166' title='Defined at 166 in Modules/mathmodule.c.'>LANCZOS_N</a>; --i &gt;= 0; ) <font color='red'>{</font>
<a name='L218'>            num = num * x + lanczos_num_coeffs[i];
<a name='L219'>            den = den * x + lanczos_den_coeffs[i];
<a name='L220'>        <font color='red'>}</font>
<a name='L221'>    <font color='red'>}</font>
<a name='L222'>    <b>else</b> <font color='red'>{</font>
<a name='L223'>        <b>for</b> (i = 0; i &lt; <a href='../S/2689.html#L166' title='Defined at 166 in Modules/mathmodule.c.'>LANCZOS_N</a>; i++) <font color='red'>{</font>
<a name='L224'>            num = num / x + lanczos_num_coeffs[i];
<a name='L225'>            den = den / x + lanczos_den_coeffs[i];
<a name='L226'>        <font color='red'>}</font>
<a name='L227'>    <font color='red'>}</font>
<a name='L228'>    <b>return</b> num/den;
<a name='L229'><font color='red'>}</font>
<a name='L230'>
<a name='L231'><b>static</b> <b>double</b>
<a name='L232'>m_tgamma(<b>double</b> x)
<a name='L233'><font color='red'>{</font>
<a name='L234'>    <b>double</b> absx, r, y, z, sqrtpow;
<a name='L235'>
<a name='L236'>    <i><font color='green'>/* special cases */</font></i>
<a name='L237'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x)) <font color='red'>{</font>
<a name='L238'>        <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x) || x &gt; 0.0)
<a name='L239'>            <b>return</b> x;  <i><font color='green'>/* tgamma(nan) = nan, tgamma(inf) = inf */</font></i>
<a name='L240'>        <b>else</b> <font color='red'>{</font>
<a name='L241'>            errno = EDOM;
<a name='L242'>            <b>return</b> <a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>;  <i><font color='green'>/* tgamma(-inf) = nan, invalid */</font></i>
<a name='L243'>        <font color='red'>}</font>
<a name='L244'>    <font color='red'>}</font>
<a name='L245'>    <b>if</b> (x == 0.0) <font color='red'>{</font>
<a name='L246'>        errno = EDOM;
<a name='L247'>        <b>return</b> 1.0/x; <i><font color='green'>/* tgamma(+-0.0) = +-inf, divide-by-zero */</font></i>
<a name='L248'>    <font color='red'>}</font>
<a name='L249'>
<a name='L250'>    <i><font color='green'>/* integer arguments */</font></i>
<a name='L251'>    <b>if</b> (x == floor(x)) <font color='red'>{</font>
<a name='L252'>        <b>if</b> (x &lt; 0.0) <font color='red'>{</font>
<a name='L253'>            errno = EDOM;  <i><font color='green'>/* tgamma(n) = nan, invalid for */</font></i>
<a name='L254'>            <b>return</b> <a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>; <i><font color='green'>/* negative integers n */</font></i>
<a name='L255'>        <font color='red'>}</font>
<a name='L256'>        <b>if</b> (x &lt;= <a href='../S/2689.html#L191' title='Defined at 191 in Modules/mathmodule.c.'>NGAMMA_INTEGRAL</a>)
<a name='L257'>            <b>return</b> gamma_integral[(<b>int</b>)x - 1];
<a name='L258'>    <font color='red'>}</font>
<a name='L259'>    absx = fabs(x);
<a name='L260'>
<a name='L261'>    <i><font color='green'>/* tiny arguments:  tgamma(x) ~ 1/x for x near 0 */</font></i>
<a name='L262'>    <b>if</b> (absx &lt; 1e-20) <font color='red'>{</font>
<a name='L263'>        r = 1.0/x;
<a name='L264'>        <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(r))
<a name='L265'>            errno = ERANGE;
<a name='L266'>        <b>return</b> r;
<a name='L267'>    <font color='red'>}</font>
<a name='L268'>
<a name='L269'>    <i><font color='green'>/* large arguments: assuming IEEE 754 doubles, tgamma(x) overflows for</font></i>
<a name='L270'><i><font color='green'>       x &gt; 200, and underflows to +-0.0 for x &lt; -200, not a negative</font></i>
<a name='L271'><i><font color='green'>       integer. */</font></i>
<a name='L272'>    <b>if</b> (absx &gt; 200.0) <font color='red'>{</font>
<a name='L273'>        <b>if</b> (x &lt; 0.0) <font color='red'>{</font>
<a name='L274'>            <b>return</b> 0.0/<a href='../S/2689.html#L75' title='Defined at 75 in Modules/mathmodule.c.'>sinpi</a>(x);
<a name='L275'>        <font color='red'>}</font>
<a name='L276'>        <b>else</b> <font color='red'>{</font>
<a name='L277'>            errno = ERANGE;
<a name='L278'>            <b>return</b> <a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a>;
<a name='L279'>        <font color='red'>}</font>
<a name='L280'>    <font color='red'>}</font>
<a name='L281'>
<a name='L282'>    y = absx + lanczos_g_minus_half;
<a name='L283'>    <i><font color='green'>/* compute error in sum */</font></i>
<a name='L284'>    <b>if</b> (absx &gt; lanczos_g_minus_half) <font color='red'>{</font>
<a name='L285'>        <i><font color='green'>/* note: the correction can be foiled by an optimizing</font></i>
<a name='L286'><i><font color='green'>           compiler that (incorrectly) thinks that an expression like</font></i>
<a name='L287'><i><font color='green'>           a + b - a - b can be optimized to 0.0.  This shouldn't</font></i>
<a name='L288'><i><font color='green'>           happen in a standards-conforming compiler. */</font></i>
<a name='L289'>        <b>double</b> q = y - absx;
<a name='L290'>        z = q - lanczos_g_minus_half;
<a name='L291'>    <font color='red'>}</font>
<a name='L292'>    <b>else</b> <font color='red'>{</font>
<a name='L293'>        <b>double</b> q = y - lanczos_g_minus_half;
<a name='L294'>        z = q - absx;
<a name='L295'>    <font color='red'>}</font>
<a name='L296'>    z = z * lanczos_g / y;
<a name='L297'>    <b>if</b> (x &lt; 0.0) <font color='red'>{</font>
<a name='L298'>        r = -pi / <a href='../S/2689.html#L75' title='Defined at 75 in Modules/mathmodule.c.'>sinpi</a>(absx) / absx * exp(y) / <a href='../S/2689.html#L203' title='Defined at 203 in Modules/mathmodule.c.'>lanczos_sum</a>(absx);
<a name='L299'>        r -= z * r;
<a name='L300'>        <b>if</b> (absx &lt; 140.0) <font color='red'>{</font>
<a name='L301'>            r /= pow(y, absx - 0.5);
<a name='L302'>        <font color='red'>}</font>
<a name='L303'>        <b>else</b> <font color='red'>{</font>
<a name='L304'>            sqrtpow = pow(y, absx / 2.0 - 0.25);
<a name='L305'>            r /= sqrtpow;
<a name='L306'>            r /= sqrtpow;
<a name='L307'>        <font color='red'>}</font>
<a name='L308'>    <font color='red'>}</font>
<a name='L309'>    <b>else</b> <font color='red'>{</font>
<a name='L310'>        r = <a href='../S/2689.html#L203' title='Defined at 203 in Modules/mathmodule.c.'>lanczos_sum</a>(absx) / exp(y);
<a name='L311'>        r += z * r;
<a name='L312'>        <b>if</b> (absx &lt; 140.0) <font color='red'>{</font>
<a name='L313'>            r *= pow(y, absx - 0.5);
<a name='L314'>        <font color='red'>}</font>
<a name='L315'>        <b>else</b> <font color='red'>{</font>
<a name='L316'>            sqrtpow = pow(y, absx / 2.0 - 0.25);
<a name='L317'>            r *= sqrtpow;
<a name='L318'>            r *= sqrtpow;
<a name='L319'>        <font color='red'>}</font>
<a name='L320'>    <font color='red'>}</font>
<a name='L321'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(r))
<a name='L322'>        errno = ERANGE;
<a name='L323'>    <b>return</b> r;
<a name='L324'><font color='red'>}</font>
<a name='L325'>
<a name='L326'><i><font color='green'>/*</font></i>
<a name='L327'><i><font color='green'>   lgamma:  natural log of the absolute value of the Gamma function.</font></i>
<a name='L328'><i><font color='green'>   For large arguments, Lanczos' formula works extremely well here.</font></i>
<a name='L329'><i><font color='green'>*/</font></i>
<a name='L330'>
<a name='L331'><b>static</b> <b>double</b>
<a name='L332'>m_lgamma(<b>double</b> x)
<a name='L333'><font color='red'>{</font>
<a name='L334'>    <b>double</b> r, absx;
<a name='L335'>
<a name='L336'>    <i><font color='green'>/* special cases */</font></i>
<a name='L337'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x)) <font color='red'>{</font>
<a name='L338'>        <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x))
<a name='L339'>            <b>return</b> x;  <i><font color='green'>/* lgamma(nan) = nan */</font></i>
<a name='L340'>        <b>else</b>
<a name='L341'>            <b>return</b> <a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a>; <i><font color='green'>/* lgamma(+-inf) = +inf */</font></i>
<a name='L342'>    <font color='red'>}</font>
<a name='L343'>
<a name='L344'>    <i><font color='green'>/* integer arguments */</font></i>
<a name='L345'>    <b>if</b> (x == floor(x) &amp;&amp; x &lt;= 2.0) <font color='red'>{</font>
<a name='L346'>        <b>if</b> (x &lt;= 0.0) <font color='red'>{</font>
<a name='L347'>            errno = EDOM;  <i><font color='green'>/* lgamma(n) = inf, divide-by-zero for */</font></i>
<a name='L348'>            <b>return</b> <a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a>; <i><font color='green'>/* integers n &lt;= 0 */</font></i>
<a name='L349'>        <font color='red'>}</font>
<a name='L350'>        <b>else</b> <font color='red'>{</font>
<a name='L351'>            <b>return</b> 0.0; <i><font color='green'>/* lgamma(1) = lgamma(2) = 0.0 */</font></i>
<a name='L352'>        <font color='red'>}</font>
<a name='L353'>    <font color='red'>}</font>
<a name='L354'>
<a name='L355'>    absx = fabs(x);
<a name='L356'>    <i><font color='green'>/* tiny arguments: lgamma(x) ~ -log(fabs(x)) for small x */</font></i>
<a name='L357'>    <b>if</b> (absx &lt; 1e-20)
<a name='L358'>        <b>return</b> -log(absx);
<a name='L359'>
<a name='L360'>    <i><font color='green'>/* Lanczos' formula.  We could save a fraction of a ulp in accuracy by</font></i>
<a name='L361'><i><font color='green'>       having a second set of numerator coefficients for lanczos_sum that</font></i>
<a name='L362'><i><font color='green'>       absorbed the exp(-lanczos_g) term, and throwing out the lanczos_g</font></i>
<a name='L363'><i><font color='green'>       subtraction below; it's probably not worth it. */</font></i>
<a name='L364'>    r = log(<a href='../S/2689.html#L203' title='Defined at 203 in Modules/mathmodule.c.'>lanczos_sum</a>(absx)) - lanczos_g;
<a name='L365'>    r += (absx - 0.5) * (log(absx + lanczos_g - 0.5) - 1);
<a name='L366'>    <b>if</b> (x &lt; 0.0)
<a name='L367'>        <i><font color='green'>/* Use reflection formula to get value for negative x. */</font></i>
<a name='L368'>        r = logpi - log(fabs(<a href='../S/2689.html#L75' title='Defined at 75 in Modules/mathmodule.c.'>sinpi</a>(absx))) - log(absx) - r;
<a name='L369'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(r))
<a name='L370'>        errno = ERANGE;
<a name='L371'>    <b>return</b> r;
<a name='L372'><font color='red'>}</font>
<a name='L373'>
<a name='L374'><i><font color='green'>/*</font></i>
<a name='L375'><i><font color='green'>   Implementations of the error function erf(x) and the complementary error</font></i>
<a name='L376'><i><font color='green'>   function erfc(x).</font></i>
<a name='L377'><i><font color='green'></font></i>
<a name='L378'><i><font color='green'>   Method: following 'Numerical Recipes' by Flannery, Press et. al. (2nd ed.,</font></i>
<a name='L379'><i><font color='green'>   Cambridge University Press), we use a series approximation for erf for</font></i>
<a name='L380'><i><font color='green'>   small x, and a continued fraction approximation for erfc(x) for larger x;</font></i>
<a name='L381'><i><font color='green'>   combined with the relations erf(-x) = -erf(x) and erfc(x) = 1.0 - erf(x),</font></i>
<a name='L382'><i><font color='green'>   this gives us erf(x) and erfc(x) for all x.</font></i>
<a name='L383'><i><font color='green'></font></i>
<a name='L384'><i><font color='green'>   The series expansion used is:</font></i>
<a name='L385'><i><font color='green'></font></i>
<a name='L386'><i><font color='green'>      erf(x) = x*exp(-x*x)/sqrt(pi) * [</font></i>
<a name='L387'><i><font color='green'>                     2/1 + 4/3 x**2 + 8/15 x**4 + 16/105 x**6 + ...]</font></i>
<a name='L388'><i><font color='green'></font></i>
<a name='L389'><i><font color='green'>   The coefficient of x**(2k-2) here is 4**k*factorial(k)/factorial(2*k).</font></i>
<a name='L390'><i><font color='green'>   This series converges well for smallish x, but slowly for larger x.</font></i>
<a name='L391'><i><font color='green'></font></i>
<a name='L392'><i><font color='green'>   The continued fraction expansion used is:</font></i>
<a name='L393'><i><font color='green'></font></i>
<a name='L394'><i><font color='green'>      erfc(x) = x*exp(-x*x)/sqrt(pi) * [1/(0.5 + x**2 -) 0.5/(2.5 + x**2 - )</font></i>
<a name='L395'><i><font color='green'>                              3.0/(4.5 + x**2 - ) 7.5/(6.5 + x**2 - ) ...]</font></i>
<a name='L396'><i><font color='green'></font></i>
<a name='L397'><i><font color='green'>   after the first term, the general term has the form:</font></i>
<a name='L398'><i><font color='green'></font></i>
<a name='L399'><i><font color='green'>      k*(k-0.5)/(2*k+0.5 + x**2 - ...).</font></i>
<a name='L400'><i><font color='green'></font></i>
<a name='L401'><i><font color='green'>   This expansion converges fast for larger x, but convergence becomes</font></i>
<a name='L402'><i><font color='green'>   infinitely slow as x approaches 0.0.  The (somewhat naive) continued</font></i>
<a name='L403'><i><font color='green'>   fraction evaluation algorithm used below also risks overflow for large x;</font></i>
<a name='L404'><i><font color='green'>   but for large x, erfc(x) == 0.0 to within machine precision.  (For</font></i>
<a name='L405'><i><font color='green'>   example, erfc(30.0) is approximately 2.56e-393).</font></i>
<a name='L406'><i><font color='green'></font></i>
<a name='L407'><i><font color='green'>   Parameters: use series expansion for abs(x) &lt; ERF_SERIES_CUTOFF and</font></i>
<a name='L408'><i><font color='green'>   continued fraction expansion for ERF_SERIES_CUTOFF &lt;= abs(x) &lt;</font></i>
<a name='L409'><i><font color='green'>   ERFC_CONTFRAC_CUTOFF.  ERFC_SERIES_TERMS and ERFC_CONTFRAC_TERMS are the</font></i>
<a name='L410'><i><font color='green'>   numbers of terms to use for the relevant expansions.  */</font></i>
<a name='L411'>
<a name='L412'><font color='darkred'>#define</font> <a href='../R/880.html' title='Multiple refered from 2 places.'>ERF_SERIES_CUTOFF</a> 1.5
<a name='L413'><font color='darkred'>#define</font> <a href='../R/881.html' title='Multiple refered from 2 places.'>ERF_SERIES_TERMS</a> 25
<a name='L414'><font color='darkred'>#define</font> <a href='../S/2689.html#L460' title='Refered from 460 in Modules/mathmodule.c.'>ERFC_CONTFRAC_CUTOFF</a> 30.0
<a name='L415'><font color='darkred'>#define</font> <a href='../S/2689.html#L468' title='Refered from 468 in Modules/mathmodule.c.'>ERFC_CONTFRAC_TERMS</a> 50
<a name='L416'>
<a name='L417'><i><font color='green'>/*</font></i>
<a name='L418'><i><font color='green'>   Error function, via power series.</font></i>
<a name='L419'><i><font color='green'></font></i>
<a name='L420'><i><font color='green'>   Given a finite float x, return an approximation to erf(x).</font></i>
<a name='L421'><i><font color='green'>   Converges reasonably fast for small x.</font></i>
<a name='L422'><i><font color='green'>*/</font></i>
<a name='L423'>
<a name='L424'><b>static</b> <b>double</b>
<a name='L425'><a href='../R/8824.html' title='Multiple refered from 2 places.'>m_erf_series</a>(<b>double</b> x)
<a name='L426'><font color='red'>{</font>
<a name='L427'>    <b>double</b> x2, acc, fk, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L428'>    <b>int</b> i, saved_errno;
<a name='L429'>
<a name='L430'>    x2 = x * x;
<a name='L431'>    acc = 0.0;
<a name='L432'>    fk = (<b>double</b>)<a href='../S/2689.html#L413' title='Defined at 413 in Modules/mathmodule.c.'>ERF_SERIES_TERMS</a> + 0.5;
<a name='L433'>    <b>for</b> (i = 0; i &lt; <a href='../S/2689.html#L413' title='Defined at 413 in Modules/mathmodule.c.'>ERF_SERIES_TERMS</a>; i++) <font color='red'>{</font>
<a name='L434'>        acc = 2.0 + x2 * acc / fk;
<a name='L435'>        fk -= 1.0;
<a name='L436'>    <font color='red'>}</font>
<a name='L437'>    <i><font color='green'>/* Make sure the exp call doesn't affect errno;</font></i>
<a name='L438'><i><font color='green'>       see m_erfc_contfrac for more. */</font></i>
<a name='L439'>    saved_errno = errno;
<a name='L440'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = acc * x * exp(-x2) / sqrtpi;
<a name='L441'>    errno = saved_errno;
<a name='L442'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L443'><font color='red'>}</font>
<a name='L444'>
<a name='L445'><i><font color='green'>/*</font></i>
<a name='L446'><i><font color='green'>   Complementary error function, via continued fraction expansion.</font></i>
<a name='L447'><i><font color='green'></font></i>
<a name='L448'><i><font color='green'>   Given a positive float x, return an approximation to erfc(x).  Converges</font></i>
<a name='L449'><i><font color='green'>   reasonably fast for x large (say, x &gt; 2.0), and should be safe from</font></i>
<a name='L450'><i><font color='green'>   overflow if x and nterms are not too large.  On an IEEE 754 machine, with x</font></i>
<a name='L451'><i><font color='green'>   &lt;= 30.0, we're safe up to nterms = 100.  For x &gt;= 30.0, erfc(x) is smaller</font></i>
<a name='L452'><i><font color='green'>   than the smallest representable nonzero float.  */</font></i>
<a name='L453'>
<a name='L454'><b>static</b> <b>double</b>
<a name='L455'><a href='../R/8825.html' title='Multiple refered from 2 places.'>m_erfc_contfrac</a>(<b>double</b> x)
<a name='L456'><font color='red'>{</font>
<a name='L457'>    <b>double</b> x2, a, da, p, p_last, q, q_last, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L458'>    <b>int</b> i, saved_errno;
<a name='L459'>
<a name='L460'>    <b>if</b> (x &gt;= <a href='../S/2689.html#L414' title='Defined at 414 in Modules/mathmodule.c.'>ERFC_CONTFRAC_CUTOFF</a>)
<a name='L461'>        <b>return</b> 0.0;
<a name='L462'>
<a name='L463'>    x2 = x*x;
<a name='L464'>    a = 0.0;
<a name='L465'>    da = 0.5;
<a name='L466'>    p = 1.0; p_last = 0.0;
<a name='L467'>    q = da + x2; q_last = 1.0;
<a name='L468'>    <b>for</b> (i = 0; i &lt; <a href='../S/2689.html#L415' title='Defined at 415 in Modules/mathmodule.c.'>ERFC_CONTFRAC_TERMS</a>; i++) <font color='red'>{</font>
<a name='L469'>        <b>double</b> temp;
<a name='L470'>        a += da;
<a name='L471'>        da += 2.0;
<a name='L472'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = da + x2;
<a name='L473'>        temp = p; p = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>*p - a*p_last; p_last = temp;
<a name='L474'>        temp = q; q = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>*q - a*q_last; q_last = temp;
<a name='L475'>    <font color='red'>}</font>
<a name='L476'>    <i><font color='green'>/* Issue #8986: On some platforms, exp sets errno on underflow to zero;</font></i>
<a name='L477'><i><font color='green'>       save the current errno value so that we can restore it later. */</font></i>
<a name='L478'>    saved_errno = errno;
<a name='L479'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = p / q * x * exp(-x2) / sqrtpi;
<a name='L480'>    errno = saved_errno;
<a name='L481'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L482'><font color='red'>}</font>
<a name='L483'>
<a name='L484'><i><font color='green'>/* Error function erf(x), for general x */</font></i>
<a name='L485'>
<a name='L486'><b>static</b> <b>double</b>
<a name='L487'>m_erf(<b>double</b> x)
<a name='L488'><font color='red'>{</font>
<a name='L489'>    <b>double</b> absx, cf;
<a name='L490'>
<a name='L491'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x))
<a name='L492'>        <b>return</b> x;
<a name='L493'>    absx = fabs(x);
<a name='L494'>    <b>if</b> (absx &lt; <a href='../S/2689.html#L412' title='Defined at 412 in Modules/mathmodule.c.'>ERF_SERIES_CUTOFF</a>)
<a name='L495'>        <b>return</b> <a href='../S/2689.html#L425' title='Defined at 425 in Modules/mathmodule.c.'>m_erf_series</a>(x);
<a name='L496'>    <b>else</b> <font color='red'>{</font>
<a name='L497'>        cf = <a href='../S/2689.html#L455' title='Defined at 455 in Modules/mathmodule.c.'>m_erfc_contfrac</a>(absx);
<a name='L498'>        <b>return</b> x &gt; 0.0 ? 1.0 - cf : cf - 1.0;
<a name='L499'>    <font color='red'>}</font>
<a name='L500'><font color='red'>}</font>
<a name='L501'>
<a name='L502'><i><font color='green'>/* Complementary error function erfc(x), for general x. */</font></i>
<a name='L503'>
<a name='L504'><b>static</b> <b>double</b>
<a name='L505'>m_erfc(<b>double</b> x)
<a name='L506'><font color='red'>{</font>
<a name='L507'>    <b>double</b> absx, cf;
<a name='L508'>
<a name='L509'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x))
<a name='L510'>        <b>return</b> x;
<a name='L511'>    absx = fabs(x);
<a name='L512'>    <b>if</b> (absx &lt; <a href='../S/2689.html#L412' title='Defined at 412 in Modules/mathmodule.c.'>ERF_SERIES_CUTOFF</a>)
<a name='L513'>        <b>return</b> 1.0 - <a href='../S/2689.html#L425' title='Defined at 425 in Modules/mathmodule.c.'>m_erf_series</a>(x);
<a name='L514'>    <b>else</b> <font color='red'>{</font>
<a name='L515'>        cf = <a href='../S/2689.html#L455' title='Defined at 455 in Modules/mathmodule.c.'>m_erfc_contfrac</a>(absx);
<a name='L516'>        <b>return</b> x &gt; 0.0 ? cf : 2.0 - cf;
<a name='L517'>    <font color='red'>}</font>
<a name='L518'><font color='red'>}</font>
<a name='L519'>
<a name='L520'><i><font color='green'>/*</font></i>
<a name='L521'><i><font color='green'>   wrapper for atan2 that deals directly with special cases before</font></i>
<a name='L522'><i><font color='green'>   delegating to the platform libm for the remaining cases.  This</font></i>
<a name='L523'><i><font color='green'>   is necessary to get consistent behaviour across platforms.</font></i>
<a name='L524'><i><font color='green'>   Windows, FreeBSD and alpha Tru64 are amongst platforms that don't</font></i>
<a name='L525'><i><font color='green'>   always follow C99.</font></i>
<a name='L526'><i><font color='green'>*/</font></i>
<a name='L527'>
<a name='L528'><b>static</b> <b>double</b>
<a name='L529'>m_atan2(<b>double</b> y, <b>double</b> x)
<a name='L530'><font color='red'>{</font>
<a name='L531'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x) || <a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(y))
<a name='L532'>        <b>return</b> <a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>;
<a name='L533'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(y)) <font color='red'>{</font>
<a name='L534'>        <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x)) <font color='red'>{</font>
<a name='L535'>            <b>if</b> (<a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(1., x) == 1.)
<a name='L536'>                <i><font color='green'>/* atan2(+-inf, +inf) == +-pi/4 */</font></i>
<a name='L537'>                <b>return</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0.25*<a href='../S/563.html#L53' title='Defined at 53 in Include/pymath.h.'>Py_MATH_PI</a>, y);
<a name='L538'>            <b>else</b>
<a name='L539'>                <i><font color='green'>/* atan2(+-inf, -inf) == +-pi*3/4 */</font></i>
<a name='L540'>                <b>return</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0.75*<a href='../S/563.html#L53' title='Defined at 53 in Include/pymath.h.'>Py_MATH_PI</a>, y);
<a name='L541'>        <font color='red'>}</font>
<a name='L542'>        <i><font color='green'>/* atan2(+-inf, x) == +-pi/2 for finite x */</font></i>
<a name='L543'>        <b>return</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0.5*<a href='../S/563.html#L53' title='Defined at 53 in Include/pymath.h.'>Py_MATH_PI</a>, y);
<a name='L544'>    <font color='red'>}</font>
<a name='L545'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x) || y == 0.) <font color='red'>{</font>
<a name='L546'>        <b>if</b> (<a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(1., x) == 1.)
<a name='L547'>            <i><font color='green'>/* atan2(+-y, +inf) = atan2(+-0, +x) = +-0. */</font></i>
<a name='L548'>            <b>return</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0., y);
<a name='L549'>        <b>else</b>
<a name='L550'>            <i><font color='green'>/* atan2(+-y, -inf) = atan2(+-0., -x) = +-pi. */</font></i>
<a name='L551'>            <b>return</b> <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(<a href='../S/563.html#L53' title='Defined at 53 in Include/pymath.h.'>Py_MATH_PI</a>, y);
<a name='L552'>    <font color='red'>}</font>
<a name='L553'>    <b>return</b> atan2(y, x);
<a name='L554'><font color='red'>}</font>
<a name='L555'>
<a name='L556'><i><font color='green'>/*</font></i>
<a name='L557'><i><font color='green'>    Various platforms (Solaris, OpenBSD) do nonstandard things for log(0),</font></i>
<a name='L558'><i><font color='green'>    log(-ve), log(NaN).  Here are wrappers for log and log10 that deal with</font></i>
<a name='L559'><i><font color='green'>    special values directly, passing positive non-special values through to</font></i>
<a name='L560'><i><font color='green'>    the system log/log10.</font></i>
<a name='L561'><i><font color='green'> */</font></i>
<a name='L562'>
<a name='L563'><b>static</b> <b>double</b>
<a name='L564'><a href='../R/8826.html' title='Multiple refered from 2 places.'>m_log</a>(<b>double</b> x)
<a name='L565'><font color='red'>{</font>
<a name='L566'>    <b>if</b> (<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x)) <font color='red'>{</font>
<a name='L567'>        <b>if</b> (x &gt; 0.0)
<a name='L568'>            <b>return</b> log(x);
<a name='L569'>        errno = EDOM;
<a name='L570'>        <b>if</b> (x == 0.0)
<a name='L571'>            <b>return</b> -<a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a>; <i><font color='green'>/* log(0) = -inf */</font></i>
<a name='L572'>        <b>else</b>
<a name='L573'>            <b>return</b> <a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>; <i><font color='green'>/* log(-ve) = nan */</font></i>
<a name='L574'>    <font color='red'>}</font>
<a name='L575'>    <b>else</b> <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x))
<a name='L576'>        <b>return</b> x; <i><font color='green'>/* log(nan) = nan */</font></i>
<a name='L577'>    <b>else</b> <b>if</b> (x &gt; 0.0)
<a name='L578'>        <b>return</b> x; <i><font color='green'>/* log(inf) = inf */</font></i>
<a name='L579'>    <b>else</b> <font color='red'>{</font>
<a name='L580'>        errno = EDOM;
<a name='L581'>        <b>return</b> <a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>; <i><font color='green'>/* log(-inf) = nan */</font></i>
<a name='L582'>    <font color='red'>}</font>
<a name='L583'><font color='red'>}</font>
<a name='L584'>
<a name='L585'><b>static</b> <b>double</b>
<a name='L586'><a href='../S/2689.html#L1633' title='Refered from 1633 in Modules/mathmodule.c.'>m_log10</a>(<b>double</b> x)
<a name='L587'><font color='red'>{</font>
<a name='L588'>    <b>if</b> (<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x)) <font color='red'>{</font>
<a name='L589'>        <b>if</b> (x &gt; 0.0)
<a name='L590'>            <b>return</b> log10(x);
<a name='L591'>        errno = EDOM;
<a name='L592'>        <b>if</b> (x == 0.0)
<a name='L593'>            <b>return</b> -<a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a>; <i><font color='green'>/* log10(0) = -inf */</font></i>
<a name='L594'>        <b>else</b>
<a name='L595'>            <b>return</b> <a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>; <i><font color='green'>/* log10(-ve) = nan */</font></i>
<a name='L596'>    <font color='red'>}</font>
<a name='L597'>    <b>else</b> <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x))
<a name='L598'>        <b>return</b> x; <i><font color='green'>/* log10(nan) = nan */</font></i>
<a name='L599'>    <b>else</b> <b>if</b> (x &gt; 0.0)
<a name='L600'>        <b>return</b> x; <i><font color='green'>/* log10(inf) = inf */</font></i>
<a name='L601'>    <b>else</b> <font color='red'>{</font>
<a name='L602'>        errno = EDOM;
<a name='L603'>        <b>return</b> <a href='../S/563.html#L159' title='Defined at 159 in Include/pymath.h.'>Py_NAN</a>; <i><font color='green'>/* log10(-inf) = nan */</font></i>
<a name='L604'>    <font color='red'>}</font>
<a name='L605'><font color='red'>}</font>
<a name='L606'>
<a name='L607'>
<a name='L608'><i><font color='green'>/* Call is_error when errno != 0, and where x is the result libm</font></i>
<a name='L609'><i><font color='green'> * returned.  is_error will usually set up an exception and return</font></i>
<a name='L610'><i><font color='green'> * true (1), but may return false (0) without setting up an exception.</font></i>
<a name='L611'><i><font color='green'> */</font></i>
<a name='L612'><b>static</b> <b>int</b>
<a name='L613'><a href='../R/8497.html' title='Multiple refered from 7 places.'>is_error</a>(<b>double</b> x)
<a name='L614'><font color='red'>{</font>
<a name='L615'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 1;     <i><font color='green'>/* presumption of guilt */</font></i>
<a name='L616'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(errno);      <i><font color='green'>/* non-zero errno is a precondition for calling */</font></i>
<a name='L617'>    <b>if</b> (errno == EDOM)
<a name='L618'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "math domain error");
<a name='L619'>
<a name='L620'>    <b>else</b> <b>if</b> (errno == ERANGE) <font color='red'>{</font>
<a name='L621'>        <i><font color='green'>/* ANSI C generally requires libm functions to set ERANGE</font></i>
<a name='L622'><i><font color='green'>         * on overflow, but also generally *allows* them to set</font></i>
<a name='L623'><i><font color='green'>         * ERANGE on underflow too.  There's no consistency about</font></i>
<a name='L624'><i><font color='green'>         * the latter across platforms.</font></i>
<a name='L625'><i><font color='green'>         * Alas, C99 never requires that errno be set.</font></i>
<a name='L626'><i><font color='green'>         * Here we suppress the underflow errors (libm functions</font></i>
<a name='L627'><i><font color='green'>         * should return a zero on underflow, and +- HUGE_VAL on</font></i>
<a name='L628'><i><font color='green'>         * overflow, so testing the result for zero suffices to</font></i>
<a name='L629'><i><font color='green'>         * distinguish the cases).</font></i>
<a name='L630'><i><font color='green'>         *</font></i>
<a name='L631'><i><font color='green'>         * On some platforms (Ubuntu/ia64) it seems that errno can be</font></i>
<a name='L632'><i><font color='green'>         * set to ERANGE for subnormal results that do *not* underflow</font></i>
<a name='L633'><i><font color='green'>         * to zero.  So to be safe, we'll ignore ERANGE whenever the</font></i>
<a name='L634'><i><font color='green'>         * function result is less than one in absolute value.</font></i>
<a name='L635'><i><font color='green'>         */</font></i>
<a name='L636'>        <b>if</b> (fabs(x) &lt; 1.0)
<a name='L637'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 0;
<a name='L638'>        <b>else</b>
<a name='L639'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L640'>                            "math range error");
<a name='L641'>    <font color='red'>}</font>
<a name='L642'>    <b>else</b>
<a name='L643'>        <i><font color='green'>/* Unexpected math error */</font></i>
<a name='L644'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_ValueError);
<a name='L645'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L646'><font color='red'>}</font>
<a name='L647'>
<a name='L648'><i><font color='green'>/*</font></i>
<a name='L649'><i><font color='green'>   math_1 is used to wrap a libm function f that takes a double</font></i>
<a name='L650'><i><font color='green'>   arguments and returns a double.</font></i>
<a name='L651'><i><font color='green'></font></i>
<a name='L652'><i><font color='green'>   The error reporting follows these rules, which are designed to do</font></i>
<a name='L653'><i><font color='green'>   the right thing on C89/C99 platforms and IEEE 754/non IEEE 754</font></i>
<a name='L654'><i><font color='green'>   platforms.</font></i>
<a name='L655'><i><font color='green'></font></i>
<a name='L656'><i><font color='green'>   - a NaN result from non-NaN inputs causes ValueError to be raised</font></i>
<a name='L657'><i><font color='green'>   - an infinite result from finite inputs causes OverflowError to be</font></i>
<a name='L658'><i><font color='green'>     raised if can_overflow is 1, or raises ValueError if can_overflow</font></i>
<a name='L659'><i><font color='green'>     is 0.</font></i>
<a name='L660'><i><font color='green'>   - if the result is finite and errno == EDOM then ValueError is</font></i>
<a name='L661'><i><font color='green'>     raised</font></i>
<a name='L662'><i><font color='green'>   - if the result is finite and nonzero and errno == ERANGE then</font></i>
<a name='L663'><i><font color='green'>     OverflowError is raised</font></i>
<a name='L664'><i><font color='green'></font></i>
<a name='L665'><i><font color='green'>   The last rule is used to catch overflow on platforms which follow</font></i>
<a name='L666'><i><font color='green'>   C89 but for which HUGE_VAL is not an infinity.</font></i>
<a name='L667'><i><font color='green'></font></i>
<a name='L668'><i><font color='green'>   For the majority of one-argument functions these rules are enough</font></i>
<a name='L669'><i><font color='green'>   to ensure that Python's functions behave as specified in 'Annex F'</font></i>
<a name='L670'><i><font color='green'>   of the C99 standard, with the 'invalid' and 'divide-by-zero'</font></i>
<a name='L671'><i><font color='green'>   floating-point exceptions mapping to Python's ValueError and the</font></i>
<a name='L672'><i><font color='green'>   'overflow' floating-point exception mapping to OverflowError.</font></i>
<a name='L673'><i><font color='green'>   math_1 only works for functions that don't have singularities *and*</font></i>
<a name='L674'><i><font color='green'>   the possibility of overflow; fortunately, that covers everything we</font></i>
<a name='L675'><i><font color='green'>   care about right now.</font></i>
<a name='L676'><i><font color='green'>*/</font></i>
<a name='L677'>
<a name='L678'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L679'><a href='../R/8906.html' title='Multiple refered from 2 places.'>math_1_to_whatever</a>(PyObject *arg, <b>double</b> (*func) (<b>double</b>),
<a name='L680'>                   PyObject *(*from_double_func) (<b>double</b>),
<a name='L681'>                   <b>int</b> can_overflow)
<a name='L682'><font color='red'>{</font>
<a name='L683'>    <b>double</b> x, r;
<a name='L684'>    x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L685'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L686'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L687'>    errno = 0;
<a name='L688'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_1", <b>return</b> 0);
<a name='L689'>    r = (*func)(x);
<a name='L690'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(r);
<a name='L691'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(r) &amp;&amp; !<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x)) <font color='red'>{</font>
<a name='L692'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L693'>                        "math domain error"); <i><font color='green'>/* invalid arg */</font></i>
<a name='L694'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L695'>    <font color='red'>}</font>
<a name='L696'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(r) &amp;&amp; <a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x)) <font color='red'>{</font>
<a name='L697'>                    <b>if</b> (can_overflow)
<a name='L698'>                            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L699'>                                    "math range error"); <i><font color='green'>/* overflow */</font></i>
<a name='L700'>            <b>else</b>
<a name='L701'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L702'>                    "math domain error"); <i><font color='green'>/* singularity */</font></i>
<a name='L703'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L704'>    <font color='red'>}</font>
<a name='L705'>    <b>if</b> (<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(r) &amp;&amp; errno &amp;&amp; <a href='../S/2689.html#L613' title='Defined at 613 in Modules/mathmodule.c.'>is_error</a>(r))
<a name='L706'>        <i><font color='green'>/* this branch unnecessary on most platforms */</font></i>
<a name='L707'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L708'>
<a name='L709'>    <b>return</b> (*from_double_func)(r);
<a name='L710'><font color='red'>}</font>
<a name='L711'>
<a name='L712'><i><font color='green'>/* variant of math_1, to be used when the function being wrapped is known to</font></i>
<a name='L713'><i><font color='green'>   set errno properly (that is, errno = EDOM for invalid or divide-by-zero,</font></i>
<a name='L714'><i><font color='green'>   errno = ERANGE for overflow). */</font></i>
<a name='L715'>
<a name='L716'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L717'><a href='../S/2689.html#L812' title='Refered from 812 in Modules/mathmodule.c.'>math_1a</a>(PyObject *arg, <b>double</b> (*func) (<b>double</b>))
<a name='L718'><font color='red'>{</font>
<a name='L719'>    <b>double</b> x, r;
<a name='L720'>    x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L721'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L722'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L723'>    errno = 0;
<a name='L724'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_1a", <b>return</b> 0);
<a name='L725'>    r = (*func)(x);
<a name='L726'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(r);
<a name='L727'>    <b>if</b> (errno &amp;&amp; <a href='../S/2689.html#L613' title='Defined at 613 in Modules/mathmodule.c.'>is_error</a>(r))
<a name='L728'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L729'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(r);
<a name='L730'><font color='red'>}</font>
<a name='L731'>
<a name='L732'><i><font color='green'>/*</font></i>
<a name='L733'><i><font color='green'>   math_2 is used to wrap a libm function f that takes two double</font></i>
<a name='L734'><i><font color='green'>   arguments and returns a double.</font></i>
<a name='L735'><i><font color='green'></font></i>
<a name='L736'><i><font color='green'>   The error reporting follows these rules, which are designed to do</font></i>
<a name='L737'><i><font color='green'>   the right thing on C89/C99 platforms and IEEE 754/non IEEE 754</font></i>
<a name='L738'><i><font color='green'>   platforms.</font></i>
<a name='L739'><i><font color='green'></font></i>
<a name='L740'><i><font color='green'>   - a NaN result from non-NaN inputs causes ValueError to be raised</font></i>
<a name='L741'><i><font color='green'>   - an infinite result from finite inputs causes OverflowError to be</font></i>
<a name='L742'><i><font color='green'>     raised.</font></i>
<a name='L743'><i><font color='green'>   - if the result is finite and errno == EDOM then ValueError is</font></i>
<a name='L744'><i><font color='green'>     raised</font></i>
<a name='L745'><i><font color='green'>   - if the result is finite and nonzero and errno == ERANGE then</font></i>
<a name='L746'><i><font color='green'>     OverflowError is raised</font></i>
<a name='L747'><i><font color='green'></font></i>
<a name='L748'><i><font color='green'>   The last rule is used to catch overflow on platforms which follow</font></i>
<a name='L749'><i><font color='green'>   C89 but for which HUGE_VAL is not an infinity.</font></i>
<a name='L750'><i><font color='green'></font></i>
<a name='L751'><i><font color='green'>   For most two-argument functions (copysign, fmod, hypot, atan2)</font></i>
<a name='L752'><i><font color='green'>   these rules are enough to ensure that Python's functions behave as</font></i>
<a name='L753'><i><font color='green'>   specified in 'Annex F' of the C99 standard, with the 'invalid' and</font></i>
<a name='L754'><i><font color='green'>   'divide-by-zero' floating-point exceptions mapping to Python's</font></i>
<a name='L755'><i><font color='green'>   ValueError and the 'overflow' floating-point exception mapping to</font></i>
<a name='L756'><i><font color='green'>   OverflowError.</font></i>
<a name='L757'><i><font color='green'>*/</font></i>
<a name='L758'>
<a name='L759'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L760'><a href='../R/8904.html' title='Multiple refered from 3 places.'>math_1</a>(PyObject *arg, <b>double</b> (*func) (<b>double</b>), <b>int</b> can_overflow)
<a name='L761'><font color='red'>{</font>
<a name='L762'>    <b>return</b> <a href='../S/2689.html#L679' title='Defined at 679 in Modules/mathmodule.c.'>math_1_to_whatever</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, func, <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>, can_overflow);
<a name='L763'><font color='red'>}</font>
<a name='L764'>
<a name='L765'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L766'><a href='../R/8905.html' title='Multiple refered from 2 places.'>math_1_to_int</a>(PyObject *arg, <b>double</b> (*func) (<b>double</b>), <b>int</b> can_overflow)
<a name='L767'><font color='red'>{</font>
<a name='L768'>    <b>return</b> <a href='../S/2689.html#L679' title='Defined at 679 in Modules/mathmodule.c.'>math_1_to_whatever</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, func, <a href='../S/2799.html#L274' title='Defined at 274 in Objects/longobject.c.'>PyLong_FromDouble</a>, can_overflow);
<a name='L769'><font color='red'>}</font>
<a name='L770'>
<a name='L771'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L772'><a href='../S/2689.html#L818' title='Refered from 818 in Modules/mathmodule.c.'>math_2</a>(PyObject *args, <b>double</b> (*func) (<b>double</b>, <b>double</b>), <b>char</b> *funcname)
<a name='L773'><font color='red'>{</font>
<a name='L774'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ox, *oy;
<a name='L775'>    <b>double</b> x, y, r;
<a name='L776'>    <b>if</b> (! <a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, funcname, 2, 2, &amp;ox, &amp;oy))
<a name='L777'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L778'>    x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(ox);
<a name='L779'>    y = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(oy);
<a name='L780'>    <b>if</b> ((x == -1.0 || y == -1.0) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L781'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L782'>    errno = 0;
<a name='L783'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_2", <b>return</b> 0);
<a name='L784'>    r = (*func)(x, y);
<a name='L785'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(r);
<a name='L786'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(r)) <font color='red'>{</font>
<a name='L787'>        <b>if</b> (!<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x) &amp;&amp; !<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(y))
<a name='L788'>            errno = EDOM;
<a name='L789'>        <b>else</b>
<a name='L790'>            errno = 0;
<a name='L791'>    <font color='red'>}</font>
<a name='L792'>    <b>else</b> <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(r)) <font color='red'>{</font>
<a name='L793'>        <b>if</b> (<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x) &amp;&amp; <a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(y))
<a name='L794'>            errno = ERANGE;
<a name='L795'>        <b>else</b>
<a name='L796'>            errno = 0;
<a name='L797'>    <font color='red'>}</font>
<a name='L798'>    <b>if</b> (errno &amp;&amp; <a href='../S/2689.html#L613' title='Defined at 613 in Modules/mathmodule.c.'>is_error</a>(r))
<a name='L799'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L800'>    <b>else</b>
<a name='L801'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(r);
<a name='L802'><font color='red'>}</font>
<a name='L803'>
<a name='L804'><font color='darkred'>#define</font> <a href='../R/1166.html' title='Multiple refered from 30 places.'>FUNC1</a>(funcname, func, can_overflow, docstring)                  \
<a name='L805'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> * math_##funcname(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *self, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) <font color='red'>{</font> \
<a name='L806'>        <b>return</b> <a href='../D/9733.html' title='Multiple defined in 2 places.'>math_1</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, func, can_overflow);                            \
<a name='L807'>    <font color='red'>}</font>\
<a name='L808'>    <a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_##funcname##_doc, docstring);
<a name='L809'>
<a name='L810'><font color='darkred'>#define</font> <a href='../R/1167.html' title='Multiple refered from 3 places.'>FUNC1A</a>(funcname, func, docstring)                               \
<a name='L811'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> * math_##funcname(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *self, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) <font color='red'>{</font> \
<a name='L812'>        <b>return</b> <a href='../S/2689.html#L717' title='Defined at 717 in Modules/mathmodule.c.'>math_1a</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, func);                                     \
<a name='L813'>    <font color='red'>}</font>\
<a name='L814'>    <a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_##funcname##_doc, docstring);
<a name='L815'>
<a name='L816'><font color='darkred'>#define</font> <a href='../S/2689.html#L832' title='Refered from 832 in Modules/mathmodule.c.'>FUNC2</a>(funcname, func, docstring) \
<a name='L817'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> * math_##funcname(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *self, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) <font color='red'>{</font> \
<a name='L818'>        <b>return</b> <a href='../S/2689.html#L772' title='Defined at 772 in Modules/mathmodule.c.'>math_2</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, func, #funcname); \
<a name='L819'>    <font color='red'>}</font>\
<a name='L820'>    <a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_##funcname##_doc, docstring);
<a name='L821'>
<a name='L822'><a href='../R/1166.html' title='Multiple refered from 30 places.'>FUNC1</a>(acos, acos, 0,
<a name='L823'>      "acos(x)\n\nReturn the arc cosine (measured in radians) of x.")
<a name='L824'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(acosh, m_acosh, 0,
<a name='L825'>      "acosh(x)\n\nReturn the hyperbolic arc cosine (measured in radians) of x.")
<a name='L826'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(asin, asin, 0,
<a name='L827'>      "asin(x)\n\nReturn the arc sine (measured in radians) of x.")
<a name='L828'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(asinh, m_asinh, 0,
<a name='L829'>      "asinh(x)\n\nReturn the hyperbolic arc sine (measured in radians) of x.")
<a name='L830'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(atan, atan, 0,
<a name='L831'>      "atan(x)\n\nReturn the arc tangent (measured in radians) of x.")
<a name='L832'><a href='../D/1310.html' title='Multiple defined in 2 places.'>FUNC2</a>(atan2, m_atan2,
<a name='L833'>      "atan2(y, x)\n\nReturn the arc tangent (measured in radians) of y/x.\n"
<a name='L834'>      "Unlike atan(y/x), the signs of both x and y are considered.")
<a name='L835'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(atanh, m_atanh, 0,
<a name='L836'>      "atanh(x)\n\nReturn the hyperbolic arc tangent (measured in radians) of x.")
<a name='L837'>
<a name='L838'><b>static</b> PyObject * math_ceil(PyObject *self, PyObject *number) <font color='red'>{</font>
<a name='L839'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ceil_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L840'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *method, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L841'>
<a name='L842'>    method = <a href='../S/2824.html#L1158' title='Defined at 1158 in Objects/typeobject.c.'>_PyObject_LookupSpecial</a>(number, "__ceil__", &amp;ceil_str);
<a name='L843'>    <b>if</b> (method == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L844'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L845'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L846'>        <b>return</b> <a href='../S/2689.html#L766' title='Defined at 766 in Modules/mathmodule.c.'>math_1_to_int</a>(number, ceil, 0);
<a name='L847'>    <font color='red'>}</font>
<a name='L848'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(method, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L849'>    Py_DECREF(method);
<a name='L850'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L851'><font color='red'>}</font>
<a name='L852'>
<a name='L853'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_ceil_doc,
<a name='L854'>             "ceil(x)\n\nReturn the ceiling of x as an int.\n"
<a name='L855'>             "This is the smallest integral value &gt;= x.");
<a name='L856'>
<a name='L857'><a href='../S/2689.html#L832' title='Refered from 832 in Modules/mathmodule.c.'>FUNC2</a>(copysign, copysign,
<a name='L858'>      "copysign(x, y)\n\nReturn x with the sign of y.")
<a name='L859'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(cos, cos, 0,
<a name='L860'>      "cos(x)\n\nReturn the cosine of x (measured in radians).")
<a name='L861'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(cosh, cosh, 1,
<a name='L862'>      "cosh(x)\n\nReturn the hyperbolic cosine of x.")
<a name='L863'><a href='../D/1309.html' title='Multiple defined in 2 places.'>FUNC1A</a>(erf, m_erf,
<a name='L864'>       "erf(x)\n\nError function at x.")
<a name='L865'><a href='../D/1309.html' title='Multiple defined in 2 places.'>FUNC1A</a>(erfc, m_erfc,
<a name='L866'>       "erfc(x)\n\nComplementary error function at x.")
<a name='L867'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(exp, exp, 1,
<a name='L868'>      "exp(x)\n\nReturn e raised to the power of x.")
<a name='L869'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(expm1, m_expm1, 1,
<a name='L870'>      "expm1(x)\n\nReturn exp(x)-1.\n"
<a name='L871'>      "This function avoids the loss of precision involved in the direct "
<a name='L872'>      "evaluation of exp(x)-1 for small x.")
<a name='L873'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(fabs, fabs, 0,
<a name='L874'>      "fabs(x)\n\nReturn the absolute value of the float x.")
<a name='L875'>
<a name='L876'><b>static</b> PyObject * math_floor(PyObject *self, PyObject *number) <font color='red'>{</font>
<a name='L877'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *floor_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L878'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *method, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L879'>
<a name='L880'>    method = <a href='../S/2824.html#L1158' title='Defined at 1158 in Objects/typeobject.c.'>_PyObject_LookupSpecial</a>(number, "__floor__", &amp;floor_str);
<a name='L881'>    <b>if</b> (method == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L882'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L883'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L884'>        <b>return</b> <a href='../S/2689.html#L766' title='Defined at 766 in Modules/mathmodule.c.'>math_1_to_int</a>(number, floor, 0);
<a name='L885'>    <font color='red'>}</font>
<a name='L886'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(method, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L887'>    Py_DECREF(method);
<a name='L888'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L889'><font color='red'>}</font>
<a name='L890'>
<a name='L891'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_floor_doc,
<a name='L892'>             "floor(x)\n\nReturn the floor of x as an int.\n"
<a name='L893'>             "This is the largest integral value &lt;= x.");
<a name='L894'>
<a name='L895'><a href='../R/1167.html' title='Multiple refered from 3 places.'>FUNC1A</a>(gamma, m_tgamma,
<a name='L896'>      "gamma(x)\n\nGamma function at x.")
<a name='L897'><a href='../D/1309.html' title='Multiple defined in 2 places.'>FUNC1A</a>(lgamma, m_lgamma,
<a name='L898'>      "lgamma(x)\n\nNatural logarithm of absolute value of Gamma function at x.")
<a name='L899'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(log1p, m_log1p, 0,
<a name='L900'>      "log1p(x)\n\nReturn the natural logarithm of 1+x (base e).\n"
<a name='L901'>      "The result is computed in a way which is accurate for x near zero.")
<a name='L902'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(sin, sin, 0,
<a name='L903'>      "sin(x)\n\nReturn the sine of x (measured in radians).")
<a name='L904'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(sinh, sinh, 1,
<a name='L905'>      "sinh(x)\n\nReturn the hyperbolic sine of x.")
<a name='L906'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(sqrt, sqrt, 0,
<a name='L907'>      "sqrt(x)\n\nReturn the square root of x.")
<a name='L908'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(tan, tan, 0,
<a name='L909'>      "tan(x)\n\nReturn the tangent of x (measured in radians).")
<a name='L910'><a href='../D/1308.html' title='Multiple defined in 4 places.'>FUNC1</a>(tanh, tanh, 0,
<a name='L911'>      "tanh(x)\n\nReturn the hyperbolic tangent of x.")
<a name='L912'>
<a name='L913'><i><font color='green'>/* Precision summation function as msum() by Raymond Hettinger in</font></i>
<a name='L914'><i><font color='green'>   &lt;http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/393090&gt;,</font></i>
<a name='L915'><i><font color='green'>   enhanced with the exact partials sum and roundoff from Mark</font></i>
<a name='L916'><i><font color='green'>   Dickinson's post at &lt;http://bugs.python.org/file10357/msum4.py&gt;.</font></i>
<a name='L917'><i><font color='green'>   See those links for more details, proofs and other references.</font></i>
<a name='L918'><i><font color='green'></font></i>
<a name='L919'><i><font color='green'>   Note 1: IEEE 754R floating point semantics are assumed,</font></i>
<a name='L920'><i><font color='green'>   but the current implementation does not re-establish special</font></i>
<a name='L921'><i><font color='green'>   value semantics across iterations (i.e. handling -Inf + Inf).</font></i>
<a name='L922'><i><font color='green'></font></i>
<a name='L923'><i><font color='green'>   Note 2:  No provision is made for intermediate overflow handling;</font></i>
<a name='L924'><i><font color='green'>   therefore, sum([1e+308, 1e-308, 1e+308]) returns 1e+308 while</font></i>
<a name='L925'><i><font color='green'>   sum([1e+308, 1e+308, 1e-308]) raises an OverflowError due to the</font></i>
<a name='L926'><i><font color='green'>   overflow of the first partial sum.</font></i>
<a name='L927'><i><font color='green'></font></i>
<a name='L928'><i><font color='green'>   Note 3: The intermediate values lo, yr, and hi are declared volatile so</font></i>
<a name='L929'><i><font color='green'>   aggressive compilers won't algebraically reduce lo to always be exactly 0.0.</font></i>
<a name='L930'><i><font color='green'>   Also, the volatile declaration forces the values to be stored in memory as</font></i>
<a name='L931'><i><font color='green'>   regular doubles instead of extended long precision (80-bit) values.  This</font></i>
<a name='L932'><i><font color='green'>   prevents double rounding because any addition or subtraction of two doubles</font></i>
<a name='L933'><i><font color='green'>   can be resolved exactly into double-sized hi and lo values.  As long as the</font></i>
<a name='L934'><i><font color='green'>   hi value gets forced into a double before yr and lo are computed, the extra</font></i>
<a name='L935'><i><font color='green'>   bits in downstream extended precision operations (x87 for example) will be</font></i>
<a name='L936'><i><font color='green'>   exactly zero and therefore can be losslessly stored back into a double,</font></i>
<a name='L937'><i><font color='green'>   thereby preventing double rounding.</font></i>
<a name='L938'><i><font color='green'></font></i>
<a name='L939'><i><font color='green'>   Note 4: A similar implementation is in Modules/cmathmodule.c.</font></i>
<a name='L940'><i><font color='green'>   Be sure to update both when making changes.</font></i>
<a name='L941'><i><font color='green'></font></i>
<a name='L942'><i><font color='green'>   Note 5: The signature of math.fsum() differs from __builtin__.sum()</font></i>
<a name='L943'><i><font color='green'>   because the start argument doesn't make sense in the context of</font></i>
<a name='L944'><i><font color='green'>   accurate summation.  Since the partials table is collapsed before</font></i>
<a name='L945'><i><font color='green'>   returning a result, sum(seq2, start=sum(seq1)) may not equal the</font></i>
<a name='L946'><i><font color='green'>   accurate result returned by sum(itertools.chain(seq1, seq2)).</font></i>
<a name='L947'><i><font color='green'>*/</font></i>
<a name='L948'>
<a name='L949'><font color='darkred'>#define</font> <a href='../S/2689.html#L1127' title='Defined at 1127 in Modules/mathmodule.c.'>NUM_PARTIALS</a>  32  <i><font color='green'>/* initial partials array size, on stack */</font></i>
<a name='L950'>
<a name='L951'><i><font color='green'>/* Extend the partials array p[] by doubling its size. */</font></i>
<a name='L952'><b>static</b> <b>int</b>                          <i><font color='green'>/* non-zero on error */</font></i>
<a name='L953'>_fsum_realloc(<b>double</b> **p_ptr, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>  n,
<a name='L954'>             <b>double</b>  *ps,    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *m_ptr)
<a name='L955'><font color='red'>{</font>
<a name='L956'>    <b>void</b> *v = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L957'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> m = *m_ptr;
<a name='L958'>
<a name='L959'>    m += m;  <i><font color='green'>/* double */</font></i>
<a name='L960'>    <b>if</b> (n &lt; m &amp;&amp; m &lt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / <b>sizeof</b>(<b>double</b>))) <font color='red'>{</font>
<a name='L961'>        <b>double</b> *p = *p_ptr;
<a name='L962'>        <b>if</b> (p == ps) <font color='red'>{</font>
<a name='L963'>            v = <a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>(<b>sizeof</b>(<b>double</b>) * m);
<a name='L964'>            <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L965'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(v, ps, <b>sizeof</b>(<b>double</b>) * n);
<a name='L966'>        <font color='red'>}</font>
<a name='L967'>        <b>else</b>
<a name='L968'>            v = <a href='../S/2803.html#L1775' title='Defined at 1775 in Objects/object.c.'>PyMem_Realloc</a>(p, <b>sizeof</b>(<b>double</b>) * m);
<a name='L969'>    <font color='red'>}</font>
<a name='L970'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>        <i><font color='green'>/* size overflow or no memory */</font></i>
<a name='L971'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_MemoryError, "math.fsum partials");
<a name='L972'>        <b>return</b> 1;
<a name='L973'>    <font color='red'>}</font>
<a name='L974'>    *p_ptr = (<b>double</b>*) v;
<a name='L975'>    *m_ptr = m;
<a name='L976'>    <b>return</b> 0;
<a name='L977'><font color='red'>}</font>
<a name='L978'>
<a name='L979'><i><font color='green'>/* Full precision summation of a sequence of floats.</font></i>
<a name='L980'><i><font color='green'></font></i>
<a name='L981'><i><font color='green'>   def msum(iterable):</font></i>
<a name='L982'><i><font color='green'>       partials = []  # sorted, non-overlapping partial sums</font></i>
<a name='L983'><i><font color='green'>       for x in iterable:</font></i>
<a name='L984'><i><font color='green'>           i = 0</font></i>
<a name='L985'><i><font color='green'>           for y in partials:</font></i>
<a name='L986'><i><font color='green'>               if abs(x) &lt; abs(y):</font></i>
<a name='L987'><i><font color='green'>                   x, y = y, x</font></i>
<a name='L988'><i><font color='green'>               hi = x + y</font></i>
<a name='L989'><i><font color='green'>               lo = y - (hi - x)</font></i>
<a name='L990'><i><font color='green'>               if lo:</font></i>
<a name='L991'><i><font color='green'>                   partials[i] = lo</font></i>
<a name='L992'><i><font color='green'>                   i += 1</font></i>
<a name='L993'><i><font color='green'>               x = hi</font></i>
<a name='L994'><i><font color='green'>           partials[i:] = [x]</font></i>
<a name='L995'><i><font color='green'>       return sum_exact(partials)</font></i>
<a name='L996'><i><font color='green'></font></i>
<a name='L997'><i><font color='green'>   Rounded x+y stored in hi with the roundoff stored in lo.  Together hi+lo</font></i>
<a name='L998'><i><font color='green'>   are exactly equal to x+y.  The inner loop applies hi/lo summation to each</font></i>
<a name='L999'><i><font color='green'>   partial so that the list of partial sums remains exact.</font></i>
<a name='L1000'><i><font color='green'></font></i>
<a name='L1001'><i><font color='green'>   Sum_exact() adds the partial sums exactly and correctly rounds the final</font></i>
<a name='L1002'><i><font color='green'>   result (using the round-half-to-even rule).  The items in partials remain</font></i>
<a name='L1003'><i><font color='green'>   non-zero, non-special, non-overlapping and strictly increasing in</font></i>
<a name='L1004'><i><font color='green'>   magnitude, but possibly not all having the same sign.</font></i>
<a name='L1005'><i><font color='green'></font></i>
<a name='L1006'><i><font color='green'>   Depends on IEEE 754 arithmetic guarantees and half-even rounding.</font></i>
<a name='L1007'><i><font color='green'>*/</font></i>
<a name='L1008'>
<a name='L1009'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L1010'><a href='../S/2689.html#L1891' title='Refered from 1891 in Modules/mathmodule.c.'>math_fsum</a>(PyObject *self, PyObject *seq)
<a name='L1011'><font color='red'>{</font>
<a name='L1012'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item, *iter, *sum = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1013'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, j, n = 0, m = <a href='../S/2689.html#L1127' title='Defined at 1127 in Modules/mathmodule.c.'>NUM_PARTIALS</a>;
<a name='L1014'>    <b>double</b> x, y, t, ps[<a href='../S/2689.html#L1127' title='Defined at 1127 in Modules/mathmodule.c.'>NUM_PARTIALS</a>], *p = ps;
<a name='L1015'>    <b>double</b> xsave, special_sum = 0.0, inf_sum = 0.0;
<a name='L1016'>    <b>volatile</b> <b>double</b> hi, yr, lo;
<a name='L1017'>
<a name='L1018'>    iter = <a href='../S/2775.html#L2668' title='Defined at 2668 in Objects/abstract.c.'>PyObject_GetIter</a>(seq);
<a name='L1019'>    <b>if</b> (iter == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1020'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1021'>
<a name='L1022'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("fsum", Py_DECREF(iter); <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1023'>
<a name='L1024'>    <b>for</b>(;;) <font color='red'>{</font>           <i><font color='green'>/* for x in iterable */</font></i>
<a name='L1025'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0 &lt;= n &amp;&amp; n &lt;= m);
<a name='L1026'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>((m == <a href='../S/2689.html#L1127' title='Defined at 1127 in Modules/mathmodule.c.'>NUM_PARTIALS</a> &amp;&amp; p == ps) ||
<a name='L1027'>               (m &gt;  <a href='../S/2689.html#L1127' title='Defined at 1127 in Modules/mathmodule.c.'>NUM_PARTIALS</a> &amp;&amp; p != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>));
<a name='L1028'>
<a name='L1029'>        item = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(iter);
<a name='L1030'>        <b>if</b> (item == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1031'>            <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1032'>                <b>goto</b> _fsum_error;
<a name='L1033'>            <b>break</b>;
<a name='L1034'>        <font color='red'>}</font>
<a name='L1035'>        x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(item);
<a name='L1036'>        Py_DECREF(item);
<a name='L1037'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1038'>            <b>goto</b> _fsum_error;
<a name='L1039'>
<a name='L1040'>        xsave = x;
<a name='L1041'>        <b>for</b> (i = j = 0; j &lt; n; j++) <font color='red'>{</font>       <i><font color='green'>/* for y in partials */</font></i>
<a name='L1042'>            y = p[j];
<a name='L1043'>            <b>if</b> (fabs(x) &lt; fabs(y)) <font color='red'>{</font>
<a name='L1044'>                t = x; x = y; y = t;
<a name='L1045'>            <font color='red'>}</font>
<a name='L1046'>            hi = x + y;
<a name='L1047'>            yr = hi - x;
<a name='L1048'>            lo = y - yr;
<a name='L1049'>            <b>if</b> (lo != 0.0)
<a name='L1050'>                p[i++] = lo;
<a name='L1051'>            x = hi;
<a name='L1052'>        <font color='red'>}</font>
<a name='L1053'>
<a name='L1054'>        n = i;                              <i><font color='green'>/* ps[i:] = [x] */</font></i>
<a name='L1055'>        <b>if</b> (x != 0.0) <font color='red'>{</font>
<a name='L1056'>            <b>if</b> (! <a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x)) <font color='red'>{</font>
<a name='L1057'>                <i><font color='green'>/* a nonfinite x could arise either as</font></i>
<a name='L1058'><i><font color='green'>                   a result of intermediate overflow, or</font></i>
<a name='L1059'><i><font color='green'>                   as a result of a nan or inf in the</font></i>
<a name='L1060'><i><font color='green'>                   summands */</font></i>
<a name='L1061'>                <b>if</b> (<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(xsave)) <font color='red'>{</font>
<a name='L1062'>                    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L1063'>                          "intermediate overflow in fsum");
<a name='L1064'>                    <b>goto</b> _fsum_error;
<a name='L1065'>                <font color='red'>}</font>
<a name='L1066'>                <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(xsave))
<a name='L1067'>                    inf_sum += xsave;
<a name='L1068'>                special_sum += xsave;
<a name='L1069'>                <i><font color='green'>/* reset partials */</font></i>
<a name='L1070'>                n = 0;
<a name='L1071'>            <font color='red'>}</font>
<a name='L1072'>            <b>else</b> <b>if</b> (n &gt;= m &amp;&amp; _fsum_realloc(&amp;p, n, ps, &amp;m))
<a name='L1073'>                <b>goto</b> _fsum_error;
<a name='L1074'>            <b>else</b>
<a name='L1075'>                p[n++] = x;
<a name='L1076'>        <font color='red'>}</font>
<a name='L1077'>    <font color='red'>}</font>
<a name='L1078'>
<a name='L1079'>    <b>if</b> (special_sum != 0.0) <font color='red'>{</font>
<a name='L1080'>        <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(inf_sum))
<a name='L1081'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1082'>                            "-inf + inf in fsum");
<a name='L1083'>        <b>else</b>
<a name='L1084'>            sum = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(special_sum);
<a name='L1085'>        <b>goto</b> _fsum_error;
<a name='L1086'>    <font color='red'>}</font>
<a name='L1087'>
<a name='L1088'>    hi = 0.0;
<a name='L1089'>    <b>if</b> (n &gt; 0) <font color='red'>{</font>
<a name='L1090'>        hi = p[--n];
<a name='L1091'>        <i><font color='green'>/* sum_exact(ps, hi) from the top, stop when the sum becomes</font></i>
<a name='L1092'><i><font color='green'>           inexact. */</font></i>
<a name='L1093'>        <b>while</b> (n &gt; 0) <font color='red'>{</font>
<a name='L1094'>            x = hi;
<a name='L1095'>            y = p[--n];
<a name='L1096'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(fabs(y) &lt; fabs(x));
<a name='L1097'>            hi = x + y;
<a name='L1098'>            yr = hi - x;
<a name='L1099'>            lo = y - yr;
<a name='L1100'>            <b>if</b> (lo != 0.0)
<a name='L1101'>                <b>break</b>;
<a name='L1102'>        <font color='red'>}</font>
<a name='L1103'>        <i><font color='green'>/* Make half-even rounding work across multiple partials.</font></i>
<a name='L1104'><i><font color='green'>           Needed so that sum([1e-16, 1, 1e16]) will round-up the last</font></i>
<a name='L1105'><i><font color='green'>           digit to two instead of down to zero (the 1e-16 makes the 1</font></i>
<a name='L1106'><i><font color='green'>           slightly closer to two).  With a potential 1 ULP rounding</font></i>
<a name='L1107'><i><font color='green'>           error fixed-up, math.fsum() can guarantee commutativity. */</font></i>
<a name='L1108'>        <b>if</b> (n &gt; 0 &amp;&amp; ((lo &lt; 0.0 &amp;&amp; p[n-1] &lt; 0.0) ||
<a name='L1109'>                      (lo &gt; 0.0 &amp;&amp; p[n-1] &gt; 0.0))) <font color='red'>{</font>
<a name='L1110'>            y = lo * 2.0;
<a name='L1111'>            x = hi + y;
<a name='L1112'>            yr = x - hi;
<a name='L1113'>            <b>if</b> (y == yr)
<a name='L1114'>                hi = x;
<a name='L1115'>        <font color='red'>}</font>
<a name='L1116'>    <font color='red'>}</font>
<a name='L1117'>    sum = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(hi);
<a name='L1118'>
<a name='L1119'>_fsum_error:
<a name='L1120'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(hi)
<a name='L1121'>    Py_DECREF(iter);
<a name='L1122'>    <b>if</b> (p != ps)
<a name='L1123'>        <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(p);
<a name='L1124'>    <b>return</b> sum;
<a name='L1125'><font color='red'>}</font>
<a name='L1126'>
<a name='L1127'><font color='darkred'>#undef</font> <a href='../R/2141.html' title='Multiple refered from 5 places.'>NUM_PARTIALS</a>
<a name='L1128'>
<a name='L1129'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_fsum_doc,
<a name='L1130'>"fsum(iterable)\n\n\
<a name='L1131'>Return an accurate floating point sum of values in the iterable.\n\
<a name='L1132'>Assumes IEEE-754 floating point arithmetic.");
<a name='L1133'>
<a name='L1134'><i><font color='green'>/* Return the smallest integer k such that n &lt; 2**k, or 0 if n == 0.</font></i>
<a name='L1135'><i><font color='green'> * Equivalent to floor(lg(x))+1.  Also equivalent to: bitwidth_of_type -</font></i>
<a name='L1136'><i><font color='green'> * count_leading_zero_bits(x)</font></i>
<a name='L1137'><i><font color='green'> */</font></i>
<a name='L1138'>
<a name='L1139'><i><font color='green'>/* XXX: This routine does more or less the same thing as</font></i>
<a name='L1140'><i><font color='green'> * bits_in_digit() in Objects/longobject.c.  Someday it would be nice to</font></i>
<a name='L1141'><i><font color='green'> * consolidate them.  On BSD, there's a library function called fls()</font></i>
<a name='L1142'><i><font color='green'> * that we could use, and GCC provides __builtin_clz().</font></i>
<a name='L1143'><i><font color='green'> */</font></i>
<a name='L1144'>
<a name='L1145'><b>static</b> <b>unsigned</b> <b>long</b>
<a name='L1146'><a href='../R/6242.html' title='Multiple refered from 3 places.'>bit_length</a>(<b>unsigned</b> <b>long</b> n)
<a name='L1147'><font color='red'>{</font>
<a name='L1148'>    <b>unsigned</b> <b>long</b> len = 0;
<a name='L1149'>    <b>while</b> (n != 0) <font color='red'>{</font>
<a name='L1150'>        ++len;
<a name='L1151'>        n &gt;&gt;= 1;
<a name='L1152'>    <font color='red'>}</font>
<a name='L1153'>    <b>return</b> len;
<a name='L1154'><font color='red'>}</font>
<a name='L1155'>
<a name='L1156'><b>static</b> <b>unsigned</b> <b>long</b>
<a name='L1157'><a href='../S/2689.html#L1395' title='Refered from 1395 in Modules/mathmodule.c.'>count_set_bits</a>(<b>unsigned</b> <b>long</b> n)
<a name='L1158'><font color='red'>{</font>
<a name='L1159'>    <b>unsigned</b> <b>long</b> count = 0;
<a name='L1160'>    <b>while</b> (n != 0) <font color='red'>{</font>
<a name='L1161'>        ++count;
<a name='L1162'>        n &amp;= n - 1; <i><font color='green'>/* clear least significant bit */</font></i>
<a name='L1163'>    <font color='red'>}</font>
<a name='L1164'>    <b>return</b> count;
<a name='L1165'><font color='red'>}</font>
<a name='L1166'>
<a name='L1167'><i><font color='green'>/* Divide-and-conquer factorial algorithm</font></i>
<a name='L1168'><i><font color='green'> *</font></i>
<a name='L1169'><i><font color='green'> * Based on the formula and psuedo-code provided at:</font></i>
<a name='L1170'><i><font color='green'> * http://www.luschny.de/math/factorial/binarysplitfact.html</font></i>
<a name='L1171'><i><font color='green'> *</font></i>
<a name='L1172'><i><font color='green'> * Faster algorithms exist, but they're more complicated and depend on</font></i>
<a name='L1173'><i><font color='green'> * a fast prime factorization algorithm.</font></i>
<a name='L1174'><i><font color='green'> *</font></i>
<a name='L1175'><i><font color='green'> * Notes on the algorithm</font></i>
<a name='L1176'><i><font color='green'> * ----------------------</font></i>
<a name='L1177'><i><font color='green'> *</font></i>
<a name='L1178'><i><font color='green'> * factorial(n) is written in the form 2**k * m, with m odd.  k and m are</font></i>
<a name='L1179'><i><font color='green'> * computed separately, and then combined using a left shift.</font></i>
<a name='L1180'><i><font color='green'> *</font></i>
<a name='L1181'><i><font color='green'> * The function factorial_odd_part computes the odd part m (i.e., the greatest</font></i>
<a name='L1182'><i><font color='green'> * odd divisor) of factorial(n), using the formula:</font></i>
<a name='L1183'><i><font color='green'> *</font></i>
<a name='L1184'><i><font color='green'> *   factorial_odd_part(n) =</font></i>
<a name='L1185'><i><font color='green'> *</font></i>
<a name='L1186'><i><font color='green'> *        product_{i &gt;= 0} product_{0 &lt; j &lt;= n / 2**i, j odd} j</font></i>
<a name='L1187'><i><font color='green'> *</font></i>
<a name='L1188'><i><font color='green'> * Example: factorial_odd_part(20) =</font></i>
<a name='L1189'><i><font color='green'> *</font></i>
<a name='L1190'><i><font color='green'> *        (1) *</font></i>
<a name='L1191'><i><font color='green'> *        (1) *</font></i>
<a name='L1192'><i><font color='green'> *        (1 * 3 * 5) *</font></i>
<a name='L1193'><i><font color='green'> *        (1 * 3 * 5 * 7 * 9)</font></i>
<a name='L1194'><i><font color='green'> *        (1 * 3 * 5 * 7 * 9 * 11 * 13 * 15 * 17 * 19)</font></i>
<a name='L1195'><i><font color='green'> *</font></i>
<a name='L1196'><i><font color='green'> * Here i goes from large to small: the first term corresponds to i=4 (any</font></i>
<a name='L1197'><i><font color='green'> * larger i gives an empty product), and the last term corresponds to i=0.</font></i>
<a name='L1198'><i><font color='green'> * Each term can be computed from the last by multiplying by the extra odd</font></i>
<a name='L1199'><i><font color='green'> * numbers required: e.g., to get from the penultimate term to the last one,</font></i>
<a name='L1200'><i><font color='green'> * we multiply by (11 * 13 * 15 * 17 * 19).</font></i>
<a name='L1201'><i><font color='green'> *</font></i>
<a name='L1202'><i><font color='green'> * To see a hint of why this formula works, here are the same numbers as above</font></i>
<a name='L1203'><i><font color='green'> * but with the even parts (i.e., the appropriate powers of 2) included.  For</font></i>
<a name='L1204'><i><font color='green'> * each subterm in the product for i, we multiply that subterm by 2**i:</font></i>
<a name='L1205'><i><font color='green'> *</font></i>
<a name='L1206'><i><font color='green'> *   factorial(20) =</font></i>
<a name='L1207'><i><font color='green'> *</font></i>
<a name='L1208'><i><font color='green'> *        (16) *</font></i>
<a name='L1209'><i><font color='green'> *        (8) *</font></i>
<a name='L1210'><i><font color='green'> *        (4 * 12 * 20) *</font></i>
<a name='L1211'><i><font color='green'> *        (2 * 6 * 10 * 14 * 18) *</font></i>
<a name='L1212'><i><font color='green'> *        (1 * 3 * 5 * 7 * 9 * 11 * 13 * 15 * 17 * 19)</font></i>
<a name='L1213'><i><font color='green'> *</font></i>
<a name='L1214'><i><font color='green'> * The factorial_partial_product function computes the product of all odd j in</font></i>
<a name='L1215'><i><font color='green'> * range(start, stop) for given start and stop.  It's used to compute the</font></i>
<a name='L1216'><i><font color='green'> * partial products like (11 * 13 * 15 * 17 * 19) in the example above.  It</font></i>
<a name='L1217'><i><font color='green'> * operates recursively, repeatedly splitting the range into two roughly equal</font></i>
<a name='L1218'><i><font color='green'> * pieces until the subranges are small enough to be computed using only C</font></i>
<a name='L1219'><i><font color='green'> * integer arithmetic.</font></i>
<a name='L1220'><i><font color='green'> *</font></i>
<a name='L1221'><i><font color='green'> * The two-valuation k (i.e., the exponent of the largest power of 2 dividing</font></i>
<a name='L1222'><i><font color='green'> * the factorial) is computed independently in the main math_factorial</font></i>
<a name='L1223'><i><font color='green'> * function.  By standard results, its value is:</font></i>
<a name='L1224'><i><font color='green'> *</font></i>
<a name='L1225'><i><font color='green'> *    two_valuation = n//2 + n//4 + n//8 + ....</font></i>
<a name='L1226'><i><font color='green'> *</font></i>
<a name='L1227'><i><font color='green'> * It can be shown (e.g., by complete induction on n) that two_valuation is</font></i>
<a name='L1228'><i><font color='green'> * equal to n - count_set_bits(n), where count_set_bits(n) gives the number of</font></i>
<a name='L1229'><i><font color='green'> * '1'-bits in the binary expansion of n.</font></i>
<a name='L1230'><i><font color='green'> */</font></i>
<a name='L1231'>
<a name='L1232'><i><font color='green'>/* factorial_partial_product: Compute product(range(start, stop, 2)) using</font></i>
<a name='L1233'><i><font color='green'> * divide and conquer.  Assumes start and stop are odd and stop &gt; start.</font></i>
<a name='L1234'><i><font color='green'> * max_bits must be &gt;= bit_length(stop - 2). */</font></i>
<a name='L1235'>
<a name='L1236'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1237'><a href='../R/7660.html' title='Multiple refered from 3 places.'>factorial_partial_product</a>(<b>unsigned</b> <b>long</b> start, <b>unsigned</b> <b>long</b> stop,
<a name='L1238'>                          <b>unsigned</b> <b>long</b> max_bits)
<a name='L1239'><font color='red'>{</font>
<a name='L1240'>    <b>unsigned</b> <b>long</b> midpoint, num_operands;
<a name='L1241'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *left = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *right = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1242'>
<a name='L1243'>    <i><font color='green'>/* If the return value will fit an unsigned long, then we can</font></i>
<a name='L1244'><i><font color='green'>     * multiply in a tight, fast loop where each multiply is O(1).</font></i>
<a name='L1245'><i><font color='green'>     * Compute an upper bound on the number of bits required to store</font></i>
<a name='L1246'><i><font color='green'>     * the answer.</font></i>
<a name='L1247'><i><font color='green'>     *</font></i>
<a name='L1248'><i><font color='green'>     * Storing some integer z requires floor(lg(z))+1 bits, which is</font></i>
<a name='L1249'><i><font color='green'>     * conveniently the value returned by bit_length(z).  The</font></i>
<a name='L1250'><i><font color='green'>     * product x*y will require at most</font></i>
<a name='L1251'><i><font color='green'>     * bit_length(x) + bit_length(y) bits to store, based</font></i>
<a name='L1252'><i><font color='green'>     * on the idea that lg product = lg x + lg y.</font></i>
<a name='L1253'><i><font color='green'>     *</font></i>
<a name='L1254'><i><font color='green'>     * We know that stop - 2 is the largest number to be multiplied.  From</font></i>
<a name='L1255'><i><font color='green'>     * there, we have: bit_length(answer) &lt;= num_operands *</font></i>
<a name='L1256'><i><font color='green'>     * bit_length(stop - 2)</font></i>
<a name='L1257'><i><font color='green'>     */</font></i>
<a name='L1258'>
<a name='L1259'>    num_operands = (stop - start) / 2;
<a name='L1260'>    <i><font color='green'>/* The "num_operands &lt;= 8 * SIZEOF_LONG" check guards against the</font></i>
<a name='L1261'><i><font color='green'>     * unlikely case of an overflow in num_operands * max_bits. */</font></i>
<a name='L1262'>    <b>if</b> (num_operands &lt;= 8 * <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &amp;&amp;
<a name='L1263'>        num_operands * max_bits &lt;= 8 * <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>) <font color='red'>{</font>
<a name='L1264'>        <b>unsigned</b> <b>long</b> j, total;
<a name='L1265'>        <b>for</b> (total = start, j = start + 2; j &lt; stop; j += 2)
<a name='L1266'>            total *= j;
<a name='L1267'>        <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(total);
<a name='L1268'>    <font color='red'>}</font>
<a name='L1269'>
<a name='L1270'>    <i><font color='green'>/* find midpoint of range(start, stop), rounded up to next odd number. */</font></i>
<a name='L1271'>    midpoint = (start + num_operands) | 1;
<a name='L1272'>    left = <a href='../S/2689.html#L1237' title='Defined at 1237 in Modules/mathmodule.c.'>factorial_partial_product</a>(start, midpoint,
<a name='L1273'>                                     <a href='../S/2689.html#L1146' title='Defined at 1146 in Modules/mathmodule.c.'>bit_length</a>(midpoint - 2));
<a name='L1274'>    <b>if</b> (left == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1275'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1276'>    right = <a href='../S/2689.html#L1237' title='Defined at 1237 in Modules/mathmodule.c.'>factorial_partial_product</a>(midpoint, stop, max_bits);
<a name='L1277'>    <b>if</b> (right == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1278'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1279'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L949' title='Defined at 949 in Objects/abstract.c.'>PyNumber_Multiply</a>(left, right);
<a name='L1280'>
<a name='L1281'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1282'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(left);
<a name='L1283'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(right);
<a name='L1284'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1285'><font color='red'>}</font>
<a name='L1286'>
<a name='L1287'><i><font color='green'>/* factorial_odd_part:  compute the odd part of factorial(n). */</font></i>
<a name='L1288'>
<a name='L1289'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1290'><a href='../S/2689.html#L1392' title='Refered from 1392 in Modules/mathmodule.c.'>factorial_odd_part</a>(<b>unsigned</b> <b>long</b> n)
<a name='L1291'><font color='red'>{</font>
<a name='L1292'>    <b>long</b> i;
<a name='L1293'>    <b>unsigned</b> <b>long</b> v, lower, upper;
<a name='L1294'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *partial, *tmp, *inner, *outer;
<a name='L1295'>
<a name='L1296'>    inner = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(1);
<a name='L1297'>    <b>if</b> (inner == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1298'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1299'>    outer = inner;
<a name='L1300'>    Py_INCREF(outer);
<a name='L1301'>
<a name='L1302'>    upper = 3;
<a name='L1303'>    <b>for</b> (i = <a href='../S/2689.html#L1146' title='Defined at 1146 in Modules/mathmodule.c.'>bit_length</a>(n) - 2; i &gt;= 0; i--) <font color='red'>{</font>
<a name='L1304'>        v = n &gt;&gt; i;
<a name='L1305'>        <b>if</b> (v &lt;= 2)
<a name='L1306'>            <b>continue</b>;
<a name='L1307'>        lower = upper;
<a name='L1308'>        <i><font color='green'>/* (v + 1) | 1 = least odd integer strictly larger than n / 2**i */</font></i>
<a name='L1309'>        upper = (v + 1) | 1;
<a name='L1310'>        <i><font color='green'>/* Here inner is the product of all odd integers j in the range (0,</font></i>
<a name='L1311'><i><font color='green'>           n/2**(i+1)].  The factorial_partial_product call below gives the</font></i>
<a name='L1312'><i><font color='green'>           product of all odd integers j in the range (n/2**(i+1), n/2**i]. */</font></i>
<a name='L1313'>        partial = <a href='../S/2689.html#L1237' title='Defined at 1237 in Modules/mathmodule.c.'>factorial_partial_product</a>(lower, upper, <a href='../S/2689.html#L1146' title='Defined at 1146 in Modules/mathmodule.c.'>bit_length</a>(upper-2));
<a name='L1314'>        <i><font color='green'>/* inner *= partial */</font></i>
<a name='L1315'>        <b>if</b> (partial == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1316'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1317'>        tmp = <a href='../S/2775.html#L949' title='Defined at 949 in Objects/abstract.c.'>PyNumber_Multiply</a>(inner, partial);
<a name='L1318'>        Py_DECREF(partial);
<a name='L1319'>        <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1320'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1321'>        Py_DECREF(inner);
<a name='L1322'>        inner = tmp;
<a name='L1323'>        <i><font color='green'>/* Now inner is the product of all odd integers j in the range (0,</font></i>
<a name='L1324'><i><font color='green'>           n/2**i], giving the inner product in the formula above. */</font></i>
<a name='L1325'>
<a name='L1326'>        <i><font color='green'>/* outer *= inner; */</font></i>
<a name='L1327'>        tmp = <a href='../S/2775.html#L949' title='Defined at 949 in Objects/abstract.c.'>PyNumber_Multiply</a>(outer, inner);
<a name='L1328'>        <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1329'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1330'>        Py_DECREF(outer);
<a name='L1331'>        outer = tmp;
<a name='L1332'>    <font color='red'>}</font>
<a name='L1333'>
<a name='L1334'>    <b>goto</b> done;
<a name='L1335'>
<a name='L1336'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1337'>    Py_DECREF(outer);
<a name='L1338'>  done:
<a name='L1339'>    Py_DECREF(inner);
<a name='L1340'>    <b>return</b> outer;
<a name='L1341'><font color='red'>}</font>
<a name='L1342'>
<a name='L1343'><i><font color='green'>/* Lookup table for small factorial values */</font></i>
<a name='L1344'>
<a name='L1345'><b>static</b> <b>const</b> <b>unsigned</b> <b>long</b> SmallFactorials[] = <font color='red'>{</font>
<a name='L1346'>    1, 1, 2, 6, 24, 120, 720, 5040, 40320,
<a name='L1347'>    362880, 3628800, 39916800, 479001600,
<a name='L1348'><font color='darkred'>#if</font> <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a> &gt;= 8
<a name='L1349'>    6227020800, 87178291200, 1307674368000,
<a name='L1350'>    20922789888000, 355687428096000, 6402373705728000,
<a name='L1351'>    121645100408832000, 2432902008176640000
<a name='L1352'><font color='darkred'>#endif</font>
<a name='L1353'><font color='red'>}</font>;
<a name='L1354'>
<a name='L1355'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1356'><a href='../S/2689.html#L1887' title='Refered from 1887 in Modules/mathmodule.c.'>math_factorial</a>(PyObject *self, PyObject *arg)
<a name='L1357'><font color='red'>{</font>
<a name='L1358'>    <b>long</b> x;
<a name='L1359'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, *odd_part, *two_valuation;
<a name='L1360'>
<a name='L1361'>    <b>if</b> (PyFloat_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L1362'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *lx;
<a name='L1363'>        <b>double</b> dx = PyFloat_AS_DOUBLE((<a href='../S/525.html#L18' title='Defined at 18 in Include/floatobject.h.'>PyFloatObject</a> *)<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1364'>        <b>if</b> (!(<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(dx) &amp;&amp; dx == floor(dx))) <font color='red'>{</font>
<a name='L1365'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1366'>                            "factorial() only accepts integral values");
<a name='L1367'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1368'>        <font color='red'>}</font>
<a name='L1369'>        lx = <a href='../S/2799.html#L274' title='Defined at 274 in Objects/longobject.c.'>PyLong_FromDouble</a>(dx);
<a name='L1370'>        <b>if</b> (lx == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1371'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1372'>        x = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(lx);
<a name='L1373'>        Py_DECREF(lx);
<a name='L1374'>    <font color='red'>}</font>
<a name='L1375'>    <b>else</b>
<a name='L1376'>        x = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1377'>
<a name='L1378'>    <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1379'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1380'>    <b>if</b> (x &lt; 0) <font color='red'>{</font>
<a name='L1381'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1382'>                        "factorial() not defined for negative values");
<a name='L1383'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1384'>    <font color='red'>}</font>
<a name='L1385'>
<a name='L1386'>    <i><font color='green'>/* use lookup table if x is small */</font></i>
<a name='L1387'>    <b>if</b> (x &lt; (<b>long</b>)(<b>sizeof</b>(SmallFactorials)/<b>sizeof</b>(SmallFactorials[0])))
<a name='L1388'>        <b>return</b> <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(SmallFactorials[x]);
<a name='L1389'>
<a name='L1390'>    <i><font color='green'>/* else express in the form odd_part * 2**two_valuation, and compute as</font></i>
<a name='L1391'><i><font color='green'>       odd_part &lt;&lt; two_valuation. */</font></i>
<a name='L1392'>    odd_part = <a href='../S/2689.html#L1290' title='Defined at 1290 in Modules/mathmodule.c.'>factorial_odd_part</a>(x);
<a name='L1393'>    <b>if</b> (odd_part == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1394'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1395'>    two_valuation = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(x - <a href='../S/2689.html#L1157' title='Defined at 1157 in Modules/mathmodule.c.'>count_set_bits</a>(x));
<a name='L1396'>    <b>if</b> (two_valuation == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1397'>        Py_DECREF(odd_part);
<a name='L1398'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1399'>    <font color='red'>}</font>
<a name='L1400'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = PyNumber_Lshift(odd_part, two_valuation);
<a name='L1401'>    Py_DECREF(two_valuation);
<a name='L1402'>    Py_DECREF(odd_part);
<a name='L1403'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1404'><font color='red'>}</font>
<a name='L1405'>
<a name='L1406'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_factorial_doc,
<a name='L1407'>"factorial(x) -&gt; Integral\n"
<a name='L1408'>"\n"
<a name='L1409'>"Find x!. Raise a ValueError if x is negative or non-integral.");
<a name='L1410'>
<a name='L1411'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1412'><a href='../S/2689.html#L1910' title='Refered from 1910 in Modules/mathmodule.c.'>math_trunc</a>(PyObject *self, PyObject *number)
<a name='L1413'><font color='red'>{</font>
<a name='L1414'>    <b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *trunc_str = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1415'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *trunc, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1416'>
<a name='L1417'>    <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(number)-&gt;tp_dict == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1418'>        <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(number)) &lt; 0)
<a name='L1419'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1420'>    <font color='red'>}</font>
<a name='L1421'>
<a name='L1422'>    trunc = <a href='../S/2824.html#L1158' title='Defined at 1158 in Objects/typeobject.c.'>_PyObject_LookupSpecial</a>(number, "__trunc__", &amp;trunc_str);
<a name='L1423'>    <b>if</b> (trunc == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1424'>        <b>if</b> (!<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1425'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1426'>                         "type %.100s doesn't define __trunc__ method",
<a name='L1427'>                         <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(number)-&gt;tp_name);
<a name='L1428'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1429'>    <font color='red'>}</font>
<a name='L1430'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(trunc, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1431'>    Py_DECREF(trunc);
<a name='L1432'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1433'><font color='red'>}</font>
<a name='L1434'>
<a name='L1435'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_trunc_doc,
<a name='L1436'>"trunc(x:Real) -&gt; Integral\n"
<a name='L1437'>"\n"
<a name='L1438'>"Truncates x to the nearest Integral toward 0. Uses the __trunc__ magic method.");
<a name='L1439'>
<a name='L1440'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1441'><a href='../S/2689.html#L1890' title='Refered from 1890 in Modules/mathmodule.c.'>math_frexp</a>(PyObject *self, PyObject *arg)
<a name='L1442'><font color='red'>{</font>
<a name='L1443'>    <b>int</b> i;
<a name='L1444'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1445'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1446'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1447'>    <i><font color='green'>/* deal with special cases directly, to sidestep platform</font></i>
<a name='L1448'><i><font color='green'>       differences */</font></i>
<a name='L1449'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x) || <a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x) || !x) <font color='red'>{</font>
<a name='L1450'>        i = 0;
<a name='L1451'>    <font color='red'>}</font>
<a name='L1452'>    <b>else</b> <font color='red'>{</font>
<a name='L1453'>        <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_frexp", <b>return</b> 0);
<a name='L1454'>        x = frexp(x, &amp;i);
<a name='L1455'>        <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(x);
<a name='L1456'>    <font color='red'>}</font>
<a name='L1457'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(di)", x, i);
<a name='L1458'><font color='red'>}</font>
<a name='L1459'>
<a name='L1460'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_frexp_doc,
<a name='L1461'>"frexp(x)\n"
<a name='L1462'>"\n"
<a name='L1463'>"Return the mantissa and exponent of x, as pair (m, e).\n"
<a name='L1464'>"m is a float and e is an int, such that x = m * 2.**e.\n"
<a name='L1465'>"If x is 0, m and e are both 0.  Else 0.5 &lt;= abs(m) &lt; 1.0.");
<a name='L1466'>
<a name='L1467'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1468'><a href='../S/2689.html#L1897' title='Refered from 1897 in Modules/mathmodule.c.'>math_ldexp</a>(PyObject *self, PyObject *args)
<a name='L1469'><font color='red'>{</font>
<a name='L1470'>    <b>double</b> x, r;
<a name='L1471'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *oexp;
<a name='L1472'>    <b>long</b> exp;
<a name='L1473'>    <b>int</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L1474'>    <b>if</b> (! <a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "dO:ldexp", &amp;x, &amp;oexp))
<a name='L1475'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1476'>
<a name='L1477'>    <b>if</b> (PyLong_Check(oexp)) <font color='red'>{</font>
<a name='L1478'>        <i><font color='green'>/* on overflow, replace exponent with either LONG_MAX</font></i>
<a name='L1479'><i><font color='green'>           or LONG_MIN, depending on the sign. */</font></i>
<a name='L1480'>        exp = <a href='../S/2799.html#L329' title='Defined at 329 in Objects/longobject.c.'>PyLong_AsLongAndOverflow</a>(oexp, &amp;<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>);
<a name='L1481'>        <b>if</b> (exp == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1482'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1483'>        <b>if</b> (<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>)
<a name='L1484'>            exp = <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a> &lt; 0 ? <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a> : <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>;
<a name='L1485'>    <font color='red'>}</font>
<a name='L1486'>    <b>else</b> <font color='red'>{</font>
<a name='L1487'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1488'>                        "Expected an int or long as second argument "
<a name='L1489'>                        "to ldexp.");
<a name='L1490'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1491'>    <font color='red'>}</font>
<a name='L1492'>
<a name='L1493'>    <b>if</b> (x == 0. || !<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x)) <font color='red'>{</font>
<a name='L1494'>        <i><font color='green'>/* NaNs, zeros and infinities are returned unchanged */</font></i>
<a name='L1495'>        r = x;
<a name='L1496'>        errno = 0;
<a name='L1497'>    <font color='red'>}</font> <b>else</b> <b>if</b> (exp &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>) <font color='red'>{</font>
<a name='L1498'>        <i><font color='green'>/* overflow */</font></i>
<a name='L1499'>        r = <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(<a href='../S/563.html#L150' title='Defined at 150 in Include/pymath.h.'>Py_HUGE_VAL</a>, x);
<a name='L1500'>        errno = ERANGE;
<a name='L1501'>    <font color='red'>}</font> <b>else</b> <b>if</b> (exp &lt; INT_MIN) <font color='red'>{</font>
<a name='L1502'>        <i><font color='green'>/* underflow to +-0 */</font></i>
<a name='L1503'>        r = <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0., x);
<a name='L1504'>        errno = 0;
<a name='L1505'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1506'>        errno = 0;
<a name='L1507'>        <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_ldexp", <b>return</b> 0);
<a name='L1508'>        r = ldexp(x, (<b>int</b>)exp);
<a name='L1509'>        <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(r);
<a name='L1510'>        <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(r))
<a name='L1511'>            errno = ERANGE;
<a name='L1512'>    <font color='red'>}</font>
<a name='L1513'>
<a name='L1514'>    <b>if</b> (errno &amp;&amp; <a href='../S/2689.html#L613' title='Defined at 613 in Modules/mathmodule.c.'>is_error</a>(r))
<a name='L1515'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1516'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(r);
<a name='L1517'><font color='red'>}</font>
<a name='L1518'>
<a name='L1519'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_ldexp_doc,
<a name='L1520'>"ldexp(x, i)\n\n\
<a name='L1521'>Return x * (2**i).");
<a name='L1522'>
<a name='L1523'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1524'><a href='../S/2689.html#L1902' title='Refered from 1902 in Modules/mathmodule.c.'>math_modf</a>(PyObject *self, PyObject *arg)
<a name='L1525'><font color='red'>{</font>
<a name='L1526'>    <b>double</b> y, x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1527'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1528'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1529'>    <i><font color='green'>/* some platforms don't do the right thing for NaNs and</font></i>
<a name='L1530'><i><font color='green'>       infinities, so we take care of special cases directly. */</font></i>
<a name='L1531'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x)) <font color='red'>{</font>
<a name='L1532'>        <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x))
<a name='L1533'>            <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(dd)", <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0., x), x);
<a name='L1534'>        <b>else</b> <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x))
<a name='L1535'>            <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(dd)", x, x);
<a name='L1536'>    <font color='red'>}</font>
<a name='L1537'>
<a name='L1538'>    errno = 0;
<a name='L1539'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_modf", <b>return</b> 0);
<a name='L1540'>    x = modf(x, &amp;y);
<a name='L1541'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(x);
<a name='L1542'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(dd)", x, y);
<a name='L1543'><font color='red'>}</font>
<a name='L1544'>
<a name='L1545'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_modf_doc,
<a name='L1546'>"modf(x)\n"
<a name='L1547'>"\n"
<a name='L1548'>"Return the fractional and integer parts of x.  Both results carry the sign\n"
<a name='L1549'>"of x and are floats.");
<a name='L1550'>
<a name='L1551'><i><font color='green'>/* A decent logarithm is easy to compute even for huge longs, but libm can't</font></i>
<a name='L1552'><i><font color='green'>   do that by itself -- loghelper can.  func is log or log10, and name is</font></i>
<a name='L1553'><i><font color='green'>   "log" or "log10".  Note that overflow of the result isn't possible: a long</font></i>
<a name='L1554'><i><font color='green'>   can contain no more than INT_MAX * SHIFT bits, so has value certainly less</font></i>
<a name='L1555'><i><font color='green'>   than 2**(2**64 * 2**16) == 2**2**80, and log2 of that is 2**80, which is</font></i>
<a name='L1556'><i><font color='green'>   small enough to fit in an IEEE single.  log and log10 are even smaller.</font></i>
<a name='L1557'><i><font color='green'>   However, intermediate overflow is possible for a long if the number of bits</font></i>
<a name='L1558'><i><font color='green'>   in that long is larger than PY_SSIZE_T_MAX. */</font></i>
<a name='L1559'>
<a name='L1560'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L1561'><a href='../R/8754.html' title='Multiple refered from 3 places.'>loghelper</a>(PyObject* arg, <b>double</b> (*func)(<b>double</b>), <b>char</b> *funcname)
<a name='L1562'><font color='red'>{</font>
<a name='L1563'>    <i><font color='green'>/* If it is long, do it ourselves. */</font></i>
<a name='L1564'>    <b>if</b> (PyLong_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L1565'>        <b>double</b> x, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1566'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> e;
<a name='L1567'>
<a name='L1568'>        <i><font color='green'>/* Negative or zero inputs give a ValueError. */</font></i>
<a name='L1569'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) &lt;= 0) <font color='red'>{</font>
<a name='L1570'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1571'>                            "math domain error");
<a name='L1572'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1573'>        <font color='red'>}</font>
<a name='L1574'>
<a name='L1575'>        x = <a href='../S/2799.html#L2481' title='Defined at 2481 in Objects/longobject.c.'>PyLong_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1576'>        <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L1577'>            <b>if</b> (!<a href='../S/3106.html#L189' title='Defined at 189 in Python/errors.c.'>PyErr_ExceptionMatches</a>(PyExc_OverflowError))
<a name='L1578'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1579'>            <i><font color='green'>/* Here the conversion to double overflowed, but it's possible</font></i>
<a name='L1580'><i><font color='green'>               to compute the log anyway.  Clear the exception and continue. */</font></i>
<a name='L1581'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1582'>            x = <a href='../S/2799.html#L2367' title='Defined at 2367 in Objects/longobject.c.'>_PyLong_Frexp</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, &amp;e);
<a name='L1583'>            <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1584'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1585'>            <i><font color='green'>/* Value is ~= x * 2**e, so the log ~= log(x) + log(2) * e. */</font></i>
<a name='L1586'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = func(x) + func(2.0) * e;
<a name='L1587'>        <font color='red'>}</font>
<a name='L1588'>        <b>else</b>
<a name='L1589'>            <i><font color='green'>/* Successfully converted x to a double. */</font></i>
<a name='L1590'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = func(x);
<a name='L1591'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1592'>    <font color='red'>}</font>
<a name='L1593'>
<a name='L1594'>    <i><font color='green'>/* Else let libm handle it by itself. */</font></i>
<a name='L1595'>    <b>return</b> <a href='../D/9733.html' title='Multiple defined in 2 places.'>math_1</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, func, 0);
<a name='L1596'><font color='red'>}</font>
<a name='L1597'>
<a name='L1598'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1599'><a href='../S/2689.html#L1899' title='Refered from 1899 in Modules/mathmodule.c.'>math_log</a>(PyObject *self, PyObject *args)
<a name='L1600'><font color='red'>{</font>
<a name='L1601'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1602'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *base = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1603'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *num, *den;
<a name='L1604'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ans;
<a name='L1605'>
<a name='L1606'>    <b>if</b> (!<a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "log", 1, 2, &amp;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, &amp;base))
<a name='L1607'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1608'>
<a name='L1609'>    num = <a href='../S/2689.html#L1561' title='Defined at 1561 in Modules/mathmodule.c.'>loghelper</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, <a href='../S/2689.html#L564' title='Defined at 564 in Modules/mathmodule.c.'>m_log</a>, "log");
<a name='L1610'>    <b>if</b> (num == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || base == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1611'>        <b>return</b> num;
<a name='L1612'>
<a name='L1613'>    den = <a href='../S/2689.html#L1561' title='Defined at 1561 in Modules/mathmodule.c.'>loghelper</a>(base, <a href='../S/2689.html#L564' title='Defined at 564 in Modules/mathmodule.c.'>m_log</a>, "log");
<a name='L1614'>    <b>if</b> (den == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1615'>        Py_DECREF(num);
<a name='L1616'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1617'>    <font color='red'>}</font>
<a name='L1618'>
<a name='L1619'>    ans = <a href='../S/2775.html#L974' title='Defined at 974 in Objects/abstract.c.'>PyNumber_TrueDivide</a>(num, den);
<a name='L1620'>    Py_DECREF(num);
<a name='L1621'>    Py_DECREF(den);
<a name='L1622'>    <b>return</b> ans;
<a name='L1623'><font color='red'>}</font>
<a name='L1624'>
<a name='L1625'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_log_doc,
<a name='L1626'>"log(x[, base])\n\n\
<a name='L1627'>Return the logarithm of x to the given base.\n\
<a name='L1628'>If the base not specified, returns the natural logarithm (base e) of x.");
<a name='L1629'>
<a name='L1630'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1631'><a href='../S/2689.html#L1901' title='Refered from 1901 in Modules/mathmodule.c.'>math_log10</a>(PyObject *self, PyObject *arg)
<a name='L1632'><font color='red'>{</font>
<a name='L1633'>    <b>return</b> <a href='../S/2689.html#L1561' title='Defined at 1561 in Modules/mathmodule.c.'>loghelper</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, <a href='../S/2689.html#L586' title='Defined at 586 in Modules/mathmodule.c.'>m_log10</a>, "log10");
<a name='L1634'><font color='red'>}</font>
<a name='L1635'>
<a name='L1636'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_log10_doc,
<a name='L1637'>"log10(x)\n\nReturn the base 10 logarithm of x.");
<a name='L1638'>
<a name='L1639'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1640'><a href='../S/2689.html#L1889' title='Refered from 1889 in Modules/mathmodule.c.'>math_fmod</a>(PyObject *self, PyObject *args)
<a name='L1641'><font color='red'>{</font>
<a name='L1642'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ox, *oy;
<a name='L1643'>    <b>double</b> r, x, y;
<a name='L1644'>    <b>if</b> (! <a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "fmod", 2, 2, &amp;ox, &amp;oy))
<a name='L1645'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1646'>    x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(ox);
<a name='L1647'>    y = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(oy);
<a name='L1648'>    <b>if</b> ((x == -1.0 || y == -1.0) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1649'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1650'>    <i><font color='green'>/* fmod(x, +/-Inf) returns x for finite x. */</font></i>
<a name='L1651'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(y) &amp;&amp; <a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x))
<a name='L1652'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x);
<a name='L1653'>    errno = 0;
<a name='L1654'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_fmod", <b>return</b> 0);
<a name='L1655'>    r = fmod(x, y);
<a name='L1656'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(r);
<a name='L1657'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(r)) <font color='red'>{</font>
<a name='L1658'>        <b>if</b> (!<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x) &amp;&amp; !<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(y))
<a name='L1659'>            errno = EDOM;
<a name='L1660'>        <b>else</b>
<a name='L1661'>            errno = 0;
<a name='L1662'>    <font color='red'>}</font>
<a name='L1663'>    <b>if</b> (errno &amp;&amp; <a href='../S/2689.html#L613' title='Defined at 613 in Modules/mathmodule.c.'>is_error</a>(r))
<a name='L1664'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1665'>    <b>else</b>
<a name='L1666'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(r);
<a name='L1667'><font color='red'>}</font>
<a name='L1668'>
<a name='L1669'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_fmod_doc,
<a name='L1670'>"fmod(x, y)\n\nReturn fmod(x, y), according to platform C."
<a name='L1671'>"  x % y may differ.");
<a name='L1672'>
<a name='L1673'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1674'><a href='../S/2689.html#L1893' title='Refered from 1893 in Modules/mathmodule.c.'>math_hypot</a>(PyObject *self, PyObject *args)
<a name='L1675'><font color='red'>{</font>
<a name='L1676'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ox, *oy;
<a name='L1677'>    <b>double</b> r, x, y;
<a name='L1678'>    <b>if</b> (! <a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "hypot", 2, 2, &amp;ox, &amp;oy))
<a name='L1679'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1680'>    x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(ox);
<a name='L1681'>    y = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(oy);
<a name='L1682'>    <b>if</b> ((x == -1.0 || y == -1.0) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1683'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1684'>    <i><font color='green'>/* hypot(x, +/-Inf) returns Inf, even if x is a NaN. */</font></i>
<a name='L1685'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x))
<a name='L1686'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(fabs(x));
<a name='L1687'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(y))
<a name='L1688'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(fabs(y));
<a name='L1689'>    errno = 0;
<a name='L1690'>    <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_hypot", <b>return</b> 0);
<a name='L1691'>    r = <a href='../D/9086.html' title='Multiple defined in 3 places.'>hypot</a>(x, y);
<a name='L1692'>    <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(r);
<a name='L1693'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(r)) <font color='red'>{</font>
<a name='L1694'>        <b>if</b> (!<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x) &amp;&amp; !<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(y))
<a name='L1695'>            errno = EDOM;
<a name='L1696'>        <b>else</b>
<a name='L1697'>            errno = 0;
<a name='L1698'>    <font color='red'>}</font>
<a name='L1699'>    <b>else</b> <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(r)) <font color='red'>{</font>
<a name='L1700'>        <b>if</b> (<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x) &amp;&amp; <a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(y))
<a name='L1701'>            errno = ERANGE;
<a name='L1702'>        <b>else</b>
<a name='L1703'>            errno = 0;
<a name='L1704'>    <font color='red'>}</font>
<a name='L1705'>    <b>if</b> (errno &amp;&amp; <a href='../S/2689.html#L613' title='Defined at 613 in Modules/mathmodule.c.'>is_error</a>(r))
<a name='L1706'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1707'>    <b>else</b>
<a name='L1708'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(r);
<a name='L1709'><font color='red'>}</font>
<a name='L1710'>
<a name='L1711'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_hypot_doc,
<a name='L1712'>"hypot(x, y)\n\nReturn the Euclidean distance, sqrt(x*x + y*y).");
<a name='L1713'>
<a name='L1714'><i><font color='green'>/* pow can't use math_2, but needs its own wrapper: the problem is</font></i>
<a name='L1715'><i><font color='green'>   that an infinite result can arise either as a result of overflow</font></i>
<a name='L1716'><i><font color='green'>   (in which case OverflowError should be raised) or as a result of</font></i>
<a name='L1717'><i><font color='green'>   e.g. 0.**-5. (for which ValueError needs to be raised.)</font></i>
<a name='L1718'><i><font color='green'>*/</font></i>
<a name='L1719'>
<a name='L1720'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1721'><a href='../S/2689.html#L1903' title='Refered from 1903 in Modules/mathmodule.c.'>math_pow</a>(PyObject *self, PyObject *args)
<a name='L1722'><font color='red'>{</font>
<a name='L1723'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ox, *oy;
<a name='L1724'>    <b>double</b> r, x, y;
<a name='L1725'>    <b>int</b> odd_y;
<a name='L1726'>
<a name='L1727'>    <b>if</b> (! <a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "pow", 2, 2, &amp;ox, &amp;oy))
<a name='L1728'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1729'>    x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(ox);
<a name='L1730'>    y = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(oy);
<a name='L1731'>    <b>if</b> ((x == -1.0 || y == -1.0) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1732'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1733'>
<a name='L1734'>    <i><font color='green'>/* deal directly with IEEE specials, to cope with problems on various</font></i>
<a name='L1735'><i><font color='green'>       platforms whose semantics don't exactly match C99 */</font></i>
<a name='L1736'>    r = 0.; <i><font color='green'>/* silence compiler warning */</font></i>
<a name='L1737'>    <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x) || !<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(y)) <font color='red'>{</font>
<a name='L1738'>        errno = 0;
<a name='L1739'>        <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x))
<a name='L1740'>            r = y == 0. ? 1. : x; <i><font color='green'>/* NaN**0 = 1 */</font></i>
<a name='L1741'>        <b>else</b> <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(y))
<a name='L1742'>            r = x == 1. ? 1. : y; <i><font color='green'>/* 1**NaN = 1 */</font></i>
<a name='L1743'>        <b>else</b> <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x)) <font color='red'>{</font>
<a name='L1744'>            odd_y = <a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(y) &amp;&amp; fmod(fabs(y), 2.0) == 1.0;
<a name='L1745'>            <b>if</b> (y &gt; 0.)
<a name='L1746'>                r = odd_y ? x : fabs(x);
<a name='L1747'>            <b>else</b> <b>if</b> (y == 0.)
<a name='L1748'>                r = 1.;
<a name='L1749'>            <b>else</b> <i><font color='green'>/* y &lt; 0. */</font></i>
<a name='L1750'>                r = odd_y ? <a href='../D/7796.html' title='Multiple defined in 2 places.'>copysign</a>(0., x) : 0.;
<a name='L1751'>        <font color='red'>}</font>
<a name='L1752'>        <b>else</b> <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(y)) <font color='red'>{</font>
<a name='L1753'>            <b>if</b> (fabs(x) == 1.0)
<a name='L1754'>                r = 1.;
<a name='L1755'>            <b>else</b> <b>if</b> (y &gt; 0. &amp;&amp; fabs(x) &gt; 1.0)
<a name='L1756'>                r = y;
<a name='L1757'>            <b>else</b> <b>if</b> (y &lt; 0. &amp;&amp; fabs(x) &lt; 1.0) <font color='red'>{</font>
<a name='L1758'>                r = -y; <i><font color='green'>/* result is +inf */</font></i>
<a name='L1759'>                <b>if</b> (x == 0.) <i><font color='green'>/* 0**-inf: divide-by-zero */</font></i>
<a name='L1760'>                    errno = EDOM;
<a name='L1761'>            <font color='red'>}</font>
<a name='L1762'>            <b>else</b>
<a name='L1763'>                r = 0.;
<a name='L1764'>        <font color='red'>}</font>
<a name='L1765'>    <font color='red'>}</font>
<a name='L1766'>    <b>else</b> <font color='red'>{</font>
<a name='L1767'>        <i><font color='green'>/* let libm handle finite**finite */</font></i>
<a name='L1768'>        errno = 0;
<a name='L1769'>        <a href='../D/3220.html' title='Multiple defined in 2 places.'>PyFPE_START_PROTECT</a>("in math_pow", <b>return</b> 0);
<a name='L1770'>        r = pow(x, y);
<a name='L1771'>        <a href='../D/3219.html' title='Multiple defined in 2 places.'>PyFPE_END_PROTECT</a>(r);
<a name='L1772'>        <i><font color='green'>/* a NaN result should arise only from (-ve)**(finite</font></i>
<a name='L1773'><i><font color='green'>           non-integer); in this case we want to raise ValueError. */</font></i>
<a name='L1774'>        <b>if</b> (!<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(r)) <font color='red'>{</font>
<a name='L1775'>            <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(r)) <font color='red'>{</font>
<a name='L1776'>                errno = EDOM;
<a name='L1777'>            <font color='red'>}</font>
<a name='L1778'>            <i><font color='green'>/*</font></i>
<a name='L1779'><i><font color='green'>               an infinite result here arises either from:</font></i>
<a name='L1780'><i><font color='green'>               (A) (+/-0.)**negative (-&gt; divide-by-zero)</font></i>
<a name='L1781'><i><font color='green'>               (B) overflow of x**y with x and y finite</font></i>
<a name='L1782'><i><font color='green'>            */</font></i>
<a name='L1783'>            <b>else</b> <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(r)) <font color='red'>{</font>
<a name='L1784'>                <b>if</b> (x == 0.)
<a name='L1785'>                    errno = EDOM;
<a name='L1786'>                <b>else</b>
<a name='L1787'>                    errno = ERANGE;
<a name='L1788'>            <font color='red'>}</font>
<a name='L1789'>        <font color='red'>}</font>
<a name='L1790'>    <font color='red'>}</font>
<a name='L1791'>
<a name='L1792'>    <b>if</b> (errno &amp;&amp; <a href='../S/2689.html#L613' title='Defined at 613 in Modules/mathmodule.c.'>is_error</a>(r))
<a name='L1793'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1794'>    <b>else</b>
<a name='L1795'>        <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(r);
<a name='L1796'><font color='red'>}</font>
<a name='L1797'>
<a name='L1798'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_pow_doc,
<a name='L1799'>"pow(x, y)\n\nReturn x**y (x to the power of y).");
<a name='L1800'>
<a name='L1801'><b>static</b> <b>const</b> <b>double</b> degToRad = <a href='../S/563.html#L53' title='Defined at 53 in Include/pymath.h.'>Py_MATH_PI</a> / 180.0;
<a name='L1802'><b>static</b> <b>const</b> <b>double</b> radToDeg = 180.0 / <a href='../S/563.html#L53' title='Defined at 53 in Include/pymath.h.'>Py_MATH_PI</a>;
<a name='L1803'>
<a name='L1804'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1805'><a href='../S/2689.html#L1881' title='Refered from 1881 in Modules/mathmodule.c.'>math_degrees</a>(PyObject *self, PyObject *arg)
<a name='L1806'><font color='red'>{</font>
<a name='L1807'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1808'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1809'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1810'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x * radToDeg);
<a name='L1811'><font color='red'>}</font>
<a name='L1812'>
<a name='L1813'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_degrees_doc,
<a name='L1814'>"degrees(x)\n\n\
<a name='L1815'>Convert angle x from radians to degrees.");
<a name='L1816'>
<a name='L1817'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1818'><a href='../S/2689.html#L1904' title='Refered from 1904 in Modules/mathmodule.c.'>math_radians</a>(PyObject *self, PyObject *arg)
<a name='L1819'><font color='red'>{</font>
<a name='L1820'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1821'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1822'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1823'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(x * degToRad);
<a name='L1824'><font color='red'>}</font>
<a name='L1825'>
<a name='L1826'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_radians_doc,
<a name='L1827'>"radians(x)\n\n\
<a name='L1828'>Convert angle x from degrees to radians.");
<a name='L1829'>
<a name='L1830'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1831'><a href='../S/2689.html#L1894' title='Refered from 1894 in Modules/mathmodule.c.'>math_isfinite</a>(PyObject *self, PyObject *arg)
<a name='L1832'><font color='red'>{</font>
<a name='L1833'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1834'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1835'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1836'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)<a href='../D/4164.html' title='Multiple defined in 5 places.'>Py_IS_FINITE</a>(x));
<a name='L1837'><font color='red'>}</font>
<a name='L1838'>
<a name='L1839'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_isfinite_doc,
<a name='L1840'>"isfinite(x) -&gt; bool\n\n\
<a name='L1841'>Return True if x is neither an infinity nor a NaN, and False otherwise.");
<a name='L1842'>
<a name='L1843'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1844'><a href='../S/2689.html#L1896' title='Refered from 1896 in Modules/mathmodule.c.'>math_isnan</a>(PyObject *self, PyObject *arg)
<a name='L1845'><font color='red'>{</font>
<a name='L1846'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1847'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1848'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1849'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(x));
<a name='L1850'><font color='red'>}</font>
<a name='L1851'>
<a name='L1852'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_isnan_doc,
<a name='L1853'>"isnan(x) -&gt; bool\n\n\
<a name='L1854'>Return True if x is a NaN (not a number), and False otherwise.");
<a name='L1855'>
<a name='L1856'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1857'><a href='../S/2689.html#L1895' title='Refered from 1895 in Modules/mathmodule.c.'>math_isinf</a>(PyObject *self, PyObject *arg)
<a name='L1858'><font color='red'>{</font>
<a name='L1859'>    <b>double</b> x = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1860'>    <b>if</b> (x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1861'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1862'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(x));
<a name='L1863'><font color='red'>}</font>
<a name='L1864'>
<a name='L1865'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(math_isinf_doc,
<a name='L1866'>"isinf(x) -&gt; bool\n\n\
<a name='L1867'>Return True if x is a positive or negative infinity, and False otherwise.");
<a name='L1868'>
<a name='L1869'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> math_methods[] = <font color='red'>{</font>
<a name='L1870'>    <font color='red'>{</font>"acos",            math_acos,      METH_O,         math_acos_doc<font color='red'>}</font>,
<a name='L1871'>    <font color='red'>{</font>"acosh",           math_acosh,     METH_O,         math_acosh_doc<font color='red'>}</font>,
<a name='L1872'>    <font color='red'>{</font>"asin",            math_asin,      METH_O,         math_asin_doc<font color='red'>}</font>,
<a name='L1873'>    <font color='red'>{</font>"asinh",           math_asinh,     METH_O,         math_asinh_doc<font color='red'>}</font>,
<a name='L1874'>    <font color='red'>{</font>"atan",            math_atan,      METH_O,         math_atan_doc<font color='red'>}</font>,
<a name='L1875'>    <font color='red'>{</font>"atan2",           math_atan2,     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   math_atan2_doc<font color='red'>}</font>,
<a name='L1876'>    <font color='red'>{</font>"atanh",           math_atanh,     METH_O,         math_atanh_doc<font color='red'>}</font>,
<a name='L1877'>    <font color='red'>{</font>"ceil",            math_ceil,      METH_O,         math_ceil_doc<font color='red'>}</font>,
<a name='L1878'>    <font color='red'>{</font>"copysign",        math_copysign,  <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   math_copysign_doc<font color='red'>}</font>,
<a name='L1879'>    <font color='red'>{</font>"cos",             math_cos,       METH_O,         math_cos_doc<font color='red'>}</font>,
<a name='L1880'>    <font color='red'>{</font>"cosh",            math_cosh,      METH_O,         math_cosh_doc<font color='red'>}</font>,
<a name='L1881'>    <font color='red'>{</font>"degrees",         <a href='../S/2689.html#L1805' title='Defined at 1805 in Modules/mathmodule.c.'>math_degrees</a>,   METH_O,         math_degrees_doc<font color='red'>}</font>,
<a name='L1882'>    <font color='red'>{</font>"erf",             math_erf,       METH_O,         math_erf_doc<font color='red'>}</font>,
<a name='L1883'>    <font color='red'>{</font>"erfc",            math_erfc,      METH_O,         math_erfc_doc<font color='red'>}</font>,
<a name='L1884'>    <font color='red'>{</font>"exp",             math_exp,       METH_O,         math_exp_doc<font color='red'>}</font>,
<a name='L1885'>    <font color='red'>{</font>"expm1",           math_expm1,     METH_O,         math_expm1_doc<font color='red'>}</font>,
<a name='L1886'>    <font color='red'>{</font>"fabs",            math_fabs,      METH_O,         math_fabs_doc<font color='red'>}</font>,
<a name='L1887'>    <font color='red'>{</font>"factorial",       <a href='../S/2689.html#L1356' title='Defined at 1356 in Modules/mathmodule.c.'>math_factorial</a>, METH_O,         math_factorial_doc<font color='red'>}</font>,
<a name='L1888'>    <font color='red'>{</font>"floor",           math_floor,     METH_O,         math_floor_doc<font color='red'>}</font>,
<a name='L1889'>    <font color='red'>{</font>"fmod",            <a href='../S/2689.html#L1640' title='Defined at 1640 in Modules/mathmodule.c.'>math_fmod</a>,      <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   math_fmod_doc<font color='red'>}</font>,
<a name='L1890'>    <font color='red'>{</font>"frexp",           <a href='../S/2689.html#L1441' title='Defined at 1441 in Modules/mathmodule.c.'>math_frexp</a>,     METH_O,         math_frexp_doc<font color='red'>}</font>,
<a name='L1891'>    <font color='red'>{</font>"fsum",            <a href='../S/2689.html#L1010' title='Defined at 1010 in Modules/mathmodule.c.'>math_fsum</a>,      METH_O,         math_fsum_doc<font color='red'>}</font>,
<a name='L1892'>    <font color='red'>{</font>"gamma",           math_gamma,     METH_O,         math_gamma_doc<font color='red'>}</font>,
<a name='L1893'>    <font color='red'>{</font>"hypot",           <a href='../S/2689.html#L1674' title='Defined at 1674 in Modules/mathmodule.c.'>math_hypot</a>,     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   math_hypot_doc<font color='red'>}</font>,
<a name='L1894'>    <font color='red'>{</font>"isfinite",        <a href='../S/2689.html#L1831' title='Defined at 1831 in Modules/mathmodule.c.'>math_isfinite</a>,  METH_O,         math_isfinite_doc<font color='red'>}</font>,
<a name='L1895'>    <font color='red'>{</font>"isinf",           <a href='../S/2689.html#L1857' title='Defined at 1857 in Modules/mathmodule.c.'>math_isinf</a>,     METH_O,         math_isinf_doc<font color='red'>}</font>,
<a name='L1896'>    <font color='red'>{</font>"isnan",           <a href='../S/2689.html#L1844' title='Defined at 1844 in Modules/mathmodule.c.'>math_isnan</a>,     METH_O,         math_isnan_doc<font color='red'>}</font>,
<a name='L1897'>    <font color='red'>{</font>"ldexp",           <a href='../S/2689.html#L1468' title='Defined at 1468 in Modules/mathmodule.c.'>math_ldexp</a>,     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   math_ldexp_doc<font color='red'>}</font>,
<a name='L1898'>    <font color='red'>{</font>"lgamma",          math_lgamma,    METH_O,         math_lgamma_doc<font color='red'>}</font>,
<a name='L1899'>    <font color='red'>{</font>"log",             <a href='../S/2689.html#L1599' title='Defined at 1599 in Modules/mathmodule.c.'>math_log</a>,       <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   math_log_doc<font color='red'>}</font>,
<a name='L1900'>    <font color='red'>{</font>"log1p",           math_log1p,     METH_O,         math_log1p_doc<font color='red'>}</font>,
<a name='L1901'>    <font color='red'>{</font>"log10",           <a href='../S/2689.html#L1631' title='Defined at 1631 in Modules/mathmodule.c.'>math_log10</a>,     METH_O,         math_log10_doc<font color='red'>}</font>,
<a name='L1902'>    <font color='red'>{</font>"modf",            <a href='../S/2689.html#L1524' title='Defined at 1524 in Modules/mathmodule.c.'>math_modf</a>,      METH_O,         math_modf_doc<font color='red'>}</font>,
<a name='L1903'>    <font color='red'>{</font>"pow",             <a href='../S/2689.html#L1721' title='Defined at 1721 in Modules/mathmodule.c.'>math_pow</a>,       <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   math_pow_doc<font color='red'>}</font>,
<a name='L1904'>    <font color='red'>{</font>"radians",         <a href='../S/2689.html#L1818' title='Defined at 1818 in Modules/mathmodule.c.'>math_radians</a>,   METH_O,         math_radians_doc<font color='red'>}</font>,
<a name='L1905'>    <font color='red'>{</font>"sin",             math_sin,       METH_O,         math_sin_doc<font color='red'>}</font>,
<a name='L1906'>    <font color='red'>{</font>"sinh",            math_sinh,      METH_O,         math_sinh_doc<font color='red'>}</font>,
<a name='L1907'>    <font color='red'>{</font>"sqrt",            math_sqrt,      METH_O,         math_sqrt_doc<font color='red'>}</font>,
<a name='L1908'>    <font color='red'>{</font>"tan",             math_tan,       METH_O,         math_tan_doc<font color='red'>}</font>,
<a name='L1909'>    <font color='red'>{</font>"tanh",            math_tanh,      METH_O,         math_tanh_doc<font color='red'>}</font>,
<a name='L1910'>    <font color='red'>{</font>"trunc",           <a href='../S/2689.html#L1412' title='Defined at 1412 in Modules/mathmodule.c.'>math_trunc</a>,     METH_O,         math_trunc_doc<font color='red'>}</font>,
<a name='L1911'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>           <i><font color='green'>/* sentinel */</font></i>
<a name='L1912'><font color='red'>}</font>;
<a name='L1913'>
<a name='L1914'>
<a name='L1915'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(module_doc,
<a name='L1916'>"This module is always available.  It provides access to the\n"
<a name='L1917'>"mathematical functions defined by the C standard.");
<a name='L1918'>
<a name='L1919'>
<a name='L1920'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> mathmodule = <font color='red'>{</font>
<a name='L1921'>    <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L1922'>    "math",
<a name='L1923'>    module_doc,
<a name='L1924'>    -1,
<a name='L1925'>    math_methods,
<a name='L1926'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1927'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1928'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1929'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L1930'><font color='red'>}</font>;
<a name='L1931'>
<a name='L1932'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L1933'><a href='../R/3056.html' title='Multiple refered from 2 places.'>PyInit_math</a>(<b>void</b>)
<a name='L1934'><font color='red'>{</font>
<a name='L1935'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *m;
<a name='L1936'>
<a name='L1937'>    m = PyModule_Create(&amp;mathmodule);
<a name='L1938'>    <b>if</b> (m == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1939'>        <b>goto</b> finally;
<a name='L1940'>
<a name='L1941'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "pi", <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(<a href='../S/563.html#L53' title='Defined at 53 in Include/pymath.h.'>Py_MATH_PI</a>));
<a name='L1942'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "e", <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(<a href='../S/563.html#L61' title='Defined at 61 in Include/pymath.h.'>Py_MATH_E</a>));
<a name='L1943'>
<a name='L1944'>    finally:
<a name='L1945'>    <b>return</b> m;
<a name='L1946'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L75'>[^]</a><a href='#L1933'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
