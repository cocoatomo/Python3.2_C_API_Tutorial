<html>
<head>
<title>Python/structmember.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3402.html'>Python</a>/structmember.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L9'>[^]</a><a href='#L103'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L9' title='Defined at 9.'>PyMember_GetOne</a>
<li><a href='#L103' title='Defined at 103.'>PyMember_SetOne</a>
</ol>
<hr>
<pre>
<a name='L1'>
<a name='L2'><i><font color='green'>/* Map C struct members to Python object attributes */</font></i>
<a name='L3'>
<a name='L4'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L5'>
<a name='L6'><font color='darkred'>#include</font> "<a href='577.html'>structmember.h</a>"
<a name='L7'>
<a name='L8'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L9'><a href='../S/2785.html#L137' title='Refered from 137 in Objects/descrobject.c.'>PyMember_GetOne</a>(<b>const</b> <b>char</b> *addr, PyMemberDef *l)
<a name='L10'><font color='red'>{</font>
<a name='L11'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L12'>
<a name='L13'>    addr += l-&gt;offset;
<a name='L14'>    <b>switch</b> (l-&gt;type) <font color='red'>{</font>
<a name='L15'>    <b>case</b> <a href='../S/577.html#L58' title='Defined at 58 in Include/structmember.h.'>T_BOOL</a>:
<a name='L16'>        v = <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>(*(<b>char</b>*)addr);
<a name='L17'>        <b>break</b>;
<a name='L18'>    <b>case</b> <a href='../S/577.html#L47' title='Defined at 47 in Include/structmember.h.'>T_BYTE</a>:
<a name='L19'>        v = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(*(<b>char</b>*)addr);
<a name='L20'>        <b>break</b>;
<a name='L21'>    <b>case</b> <a href='../S/577.html#L49' title='Defined at 49 in Include/structmember.h.'>T_UBYTE</a>:
<a name='L22'>        v = <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(*(<b>unsigned</b> <b>char</b>*)addr);
<a name='L23'>        <b>break</b>;
<a name='L24'>    <b>case</b> <a href='../S/577.html#L38' title='Defined at 38 in Include/structmember.h.'>T_SHORT</a>:
<a name='L25'>        v = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(*(<b>short</b>*)addr);
<a name='L26'>        <b>break</b>;
<a name='L27'>    <b>case</b> <a href='../S/577.html#L50' title='Defined at 50 in Include/structmember.h.'>T_USHORT</a>:
<a name='L28'>        v = <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(*(<b>unsigned</b> <b>short</b>*)addr);
<a name='L29'>        <b>break</b>;
<a name='L30'>    <b>case</b> <a href='../S/577.html#L39' title='Defined at 39 in Include/structmember.h.'>T_INT</a>:
<a name='L31'>        v = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(*(<b>int</b>*)addr);
<a name='L32'>        <b>break</b>;
<a name='L33'>    <b>case</b> <a href='../S/577.html#L51' title='Defined at 51 in Include/structmember.h.'>T_UINT</a>:
<a name='L34'>        v = <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(*(<b>unsigned</b> <b>int</b>*)addr);
<a name='L35'>        <b>break</b>;
<a name='L36'>    <b>case</b> <a href='../S/577.html#L40' title='Defined at 40 in Include/structmember.h.'>T_LONG</a>:
<a name='L37'>        v = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(*(<b>long</b>*)addr);
<a name='L38'>        <b>break</b>;
<a name='L39'>    <b>case</b> <a href='../S/577.html#L52' title='Defined at 52 in Include/structmember.h.'>T_ULONG</a>:
<a name='L40'>        v = <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(*(<b>unsigned</b> <b>long</b>*)addr);
<a name='L41'>        <b>break</b>;
<a name='L42'>    <b>case</b> <a href='../S/577.html#L68' title='Defined at 68 in Include/structmember.h.'>T_PYSSIZET</a>:
<a name='L43'>        v = <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(*(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>*)addr);
<a name='L44'>        <b>break</b>;
<a name='L45'>    <b>case</b> <a href='../S/577.html#L41' title='Defined at 41 in Include/structmember.h.'>T_FLOAT</a>:
<a name='L46'>        v = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>((<b>double</b>)*(<b>float</b>*)addr);
<a name='L47'>        <b>break</b>;
<a name='L48'>    <b>case</b> <a href='../S/577.html#L42' title='Defined at 42 in Include/structmember.h.'>T_DOUBLE</a>:
<a name='L49'>        v = <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(*(<b>double</b>*)addr);
<a name='L50'>        <b>break</b>;
<a name='L51'>    <b>case</b> <a href='../S/577.html#L43' title='Defined at 43 in Include/structmember.h.'>T_STRING</a>:
<a name='L52'>        <b>if</b> (*(<b>char</b>**)addr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L53'>            Py_INCREF(Py_None);
<a name='L54'>            v = Py_None;
<a name='L55'>        <font color='red'>}</font>
<a name='L56'>        <b>else</b>
<a name='L57'>            v = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(*(<b>char</b>**)addr);
<a name='L58'>        <b>break</b>;
<a name='L59'>    <b>case</b> <a href='../S/577.html#L55' title='Defined at 55 in Include/structmember.h.'>T_STRING_INPLACE</a>:
<a name='L60'>        v = <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>((<b>char</b>*)addr);
<a name='L61'>        <b>break</b>;
<a name='L62'>    <b>case</b> <a href='../S/577.html#L46' title='Defined at 46 in Include/structmember.h.'>T_CHAR</a>:
<a name='L63'>        v = <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>((<b>char</b>*)addr, 1);
<a name='L64'>        <b>break</b>;
<a name='L65'>    <b>case</b> <a href='../S/577.html#L44' title='Defined at 44 in Include/structmember.h.'>T_OBJECT</a>:
<a name='L66'>        v = *(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **)addr;
<a name='L67'>        <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L68'>            v = Py_None;
<a name='L69'>        Py_INCREF(v);
<a name='L70'>        <b>break</b>;
<a name='L71'>    <b>case</b> <a href='../S/577.html#L60' title='Defined at 60 in Include/structmember.h.'>T_OBJECT_EX</a>:
<a name='L72'>        v = *(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **)addr;
<a name='L73'>        <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L74'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_AttributeError, l-&gt;name);
<a name='L75'>        <a href='../S/544.html#L766' title='Defined at 766 in Include/object.h.'>Py_XINCREF</a>(v);
<a name='L76'>        <b>break</b>;
<a name='L77'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L78'>    <b>case</b> <a href='../S/577.html#L64' title='Defined at 64 in Include/structmember.h.'>T_LONGLONG</a>:
<a name='L79'>        v = <a href='../S/2799.html#L994' title='Defined at 994 in Objects/longobject.c.'>PyLong_FromLongLong</a>(*(<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> *)addr);
<a name='L80'>        <b>break</b>;
<a name='L81'>    <b>case</b> <a href='../S/577.html#L65' title='Defined at 65 in Include/structmember.h.'>T_ULONGLONG</a>:
<a name='L82'>        v = <a href='../S/2799.html#L1038' title='Defined at 1038 in Objects/longobject.c.'>PyLong_FromUnsignedLongLong</a>(*(<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> *)addr);
<a name='L83'>        <b>break</b>;
<a name='L84'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_LONG_LONG */</font></i>
<a name='L85'>    <b>case</b> <a href='../S/577.html#L69' title='Defined at 69 in Include/structmember.h.'>T_NONE</a>:
<a name='L86'>        v = Py_None;
<a name='L87'>        Py_INCREF(v);
<a name='L88'>        <b>break</b>;
<a name='L89'>    <b>default</b>:
<a name='L90'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError, "bad memberdescr type");
<a name='L91'>        v = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L92'>    <font color='red'>}</font>
<a name='L93'>    <b>return</b> v;
<a name='L94'><font color='red'>}</font>
<a name='L95'>
<a name='L96'><font color='darkred'>#define</font> <a href='../R/4877.html' title='Multiple refered from 8 places.'>WARN</a>(msg)                                               \
<a name='L97'>    <b>do</b> <font color='red'>{</font>                                                        \
<a name='L98'>    <b>if</b> (<a href='../S/3087.html#L756' title='Defined at 756 in Python/_warnings.c.'>PyErr_WarnEx</a>(PyExc_RuntimeWarning, msg, 1) &lt; 0)         \
<a name='L99'>        <b>return</b> -1;                                              \
<a name='L100'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L101'>
<a name='L102'><b>int</b>
<a name='L103'><a href='../S/2785.html#L191' title='Refered from 191 in Objects/descrobject.c.'>PyMember_SetOne</a>(<b>char</b> *addr, PyMemberDef *l, PyObject *v)
<a name='L104'><font color='red'>{</font>
<a name='L105'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *oldv;
<a name='L106'>
<a name='L107'>    addr += l-&gt;offset;
<a name='L108'>
<a name='L109'>    <b>if</b> ((l-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/577.html#L73' title='Defined at 73 in Include/structmember.h.'>READONLY</a>))
<a name='L110'>    <font color='red'>{</font>
<a name='L111'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_AttributeError, "readonly attribute");
<a name='L112'>        <b>return</b> -1;
<a name='L113'>    <font color='red'>}</font>
<a name='L114'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L115'>        <b>if</b> (l-&gt;type == <a href='../S/577.html#L60' title='Defined at 60 in Include/structmember.h.'>T_OBJECT_EX</a>) <font color='red'>{</font>
<a name='L116'>            <i><font color='green'>/* Check if the attribute is set. */</font></i>
<a name='L117'>            <b>if</b> (*(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **)addr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L118'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_AttributeError, l-&gt;name);
<a name='L119'>                <b>return</b> -1;
<a name='L120'>            <font color='red'>}</font>
<a name='L121'>        <font color='red'>}</font>
<a name='L122'>        <b>else</b> <b>if</b> (l-&gt;type != <a href='../S/577.html#L44' title='Defined at 44 in Include/structmember.h.'>T_OBJECT</a>) <font color='red'>{</font>
<a name='L123'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L124'>                            "can't delete numeric/char attribute");
<a name='L125'>            <b>return</b> -1;
<a name='L126'>        <font color='red'>}</font>
<a name='L127'>    <font color='red'>}</font>
<a name='L128'>    <b>switch</b> (l-&gt;type) <font color='red'>{</font>
<a name='L129'>    <b>case</b> <a href='../S/577.html#L58' title='Defined at 58 in Include/structmember.h.'>T_BOOL</a>:<font color='red'>{</font>
<a name='L130'>        <b>if</b> (!<a href='../S/2618.html#L46' title='Defined at 46 in Modules/_tkinter.c.'>PyBool_Check</a>(v)) <font color='red'>{</font>
<a name='L131'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L132'>                            "attribute value type must be bool");
<a name='L133'>            <b>return</b> -1;
<a name='L134'>        <font color='red'>}</font>
<a name='L135'>        <b>if</b> (v == Py_True)
<a name='L136'>            *(<b>char</b>*)addr = (<b>char</b>) 1;
<a name='L137'>        <b>else</b>
<a name='L138'>            *(<b>char</b>*)addr = (<b>char</b>) 0;
<a name='L139'>        <b>break</b>;
<a name='L140'>        <font color='red'>}</font>
<a name='L141'>    <b>case</b> <a href='../S/577.html#L47' title='Defined at 47 in Include/structmember.h.'>T_BYTE</a>:<font color='red'>{</font>
<a name='L142'>        <b>long</b> long_val = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L143'>        <b>if</b> ((long_val == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L144'>            <b>return</b> -1;
<a name='L145'>        *(<b>char</b>*)addr = (<b>char</b>)long_val;
<a name='L146'>        <i><font color='green'>/* XXX: For compatibility, only warn about truncations</font></i>
<a name='L147'><i><font color='green'>           for now. */</font></i>
<a name='L148'>        <b>if</b> ((long_val &gt; CHAR_MAX) || (long_val &lt; CHAR_MIN))
<a name='L149'>            <a href='../S/3142.html#L96' title='Defined at 96 in Python/structmember.c.'>WARN</a>("Truncation of value to char");
<a name='L150'>        <b>break</b>;
<a name='L151'>        <font color='red'>}</font>
<a name='L152'>    <b>case</b> <a href='../S/577.html#L49' title='Defined at 49 in Include/structmember.h.'>T_UBYTE</a>:<font color='red'>{</font>
<a name='L153'>        <b>long</b> long_val = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L154'>        <b>if</b> ((long_val == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L155'>            <b>return</b> -1;
<a name='L156'>        *(<b>unsigned</b> <b>char</b>*)addr = (<b>unsigned</b> <b>char</b>)long_val;
<a name='L157'>        <b>if</b> ((long_val &gt; UCHAR_MAX) || (long_val &lt; 0))
<a name='L158'>            <a href='../S/3142.html#L96' title='Defined at 96 in Python/structmember.c.'>WARN</a>("Truncation of value to unsigned char");
<a name='L159'>        <b>break</b>;
<a name='L160'>        <font color='red'>}</font>
<a name='L161'>    <b>case</b> <a href='../S/577.html#L38' title='Defined at 38 in Include/structmember.h.'>T_SHORT</a>:<font color='red'>{</font>
<a name='L162'>        <b>long</b> long_val = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L163'>        <b>if</b> ((long_val == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L164'>            <b>return</b> -1;
<a name='L165'>        *(<b>short</b>*)addr = (<b>short</b>)long_val;
<a name='L166'>        <b>if</b> ((long_val &gt; SHRT_MAX) || (long_val &lt; SHRT_MIN))
<a name='L167'>            <a href='../S/3142.html#L96' title='Defined at 96 in Python/structmember.c.'>WARN</a>("Truncation of value to short");
<a name='L168'>        <b>break</b>;
<a name='L169'>        <font color='red'>}</font>
<a name='L170'>    <b>case</b> <a href='../S/577.html#L50' title='Defined at 50 in Include/structmember.h.'>T_USHORT</a>:<font color='red'>{</font>
<a name='L171'>        <b>long</b> long_val = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L172'>        <b>if</b> ((long_val == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L173'>            <b>return</b> -1;
<a name='L174'>        *(<b>unsigned</b> <b>short</b>*)addr = (<b>unsigned</b> <b>short</b>)long_val;
<a name='L175'>        <b>if</b> ((long_val &gt; USHRT_MAX) || (long_val &lt; 0))
<a name='L176'>            <a href='../S/3142.html#L96' title='Defined at 96 in Python/structmember.c.'>WARN</a>("Truncation of value to unsigned short");
<a name='L177'>        <b>break</b>;
<a name='L178'>        <font color='red'>}</font>
<a name='L179'>    <b>case</b> <a href='../S/577.html#L39' title='Defined at 39 in Include/structmember.h.'>T_INT</a>:<font color='red'>{</font>
<a name='L180'>        <b>long</b> long_val = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L181'>        <b>if</b> ((long_val == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L182'>            <b>return</b> -1;
<a name='L183'>        *(<b>int</b> *)addr = (<b>int</b>)long_val;
<a name='L184'>        <b>if</b> ((long_val &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>) || (long_val &lt; INT_MIN))
<a name='L185'>            <a href='../S/3142.html#L96' title='Defined at 96 in Python/structmember.c.'>WARN</a>("Truncation of value to int");
<a name='L186'>        <b>break</b>;
<a name='L187'>        <font color='red'>}</font>
<a name='L188'>    <b>case</b> <a href='../S/577.html#L51' title='Defined at 51 in Include/structmember.h.'>T_UINT</a>:<font color='red'>{</font>
<a name='L189'>        <b>unsigned</b> <b>long</b> ulong_val = <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>(v);
<a name='L190'>        <b>if</b> ((ulong_val == (<b>unsigned</b> <b>long</b>)-1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L191'>            <i><font color='green'>/* XXX: For compatibility, accept negative int values</font></i>
<a name='L192'><i><font color='green'>               as well. */</font></i>
<a name='L193'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L194'>            ulong_val = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L195'>            <b>if</b> ((ulong_val == (<b>unsigned</b> <b>long</b>)-1) &amp;&amp;
<a name='L196'>                <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L197'>                <b>return</b> -1;
<a name='L198'>            *(<b>unsigned</b> <b>int</b> *)addr = (<b>unsigned</b> <b>int</b>)ulong_val;
<a name='L199'>            <a href='../S/3142.html#L96' title='Defined at 96 in Python/structmember.c.'>WARN</a>("Writing negative value into unsigned field");
<a name='L200'>        <font color='red'>}</font> <b>else</b>
<a name='L201'>            *(<b>unsigned</b> <b>int</b> *)addr = (<b>unsigned</b> <b>int</b>)ulong_val;
<a name='L202'>        <b>if</b> (ulong_val &gt; UINT_MAX)
<a name='L203'>            <a href='../S/3142.html#L96' title='Defined at 96 in Python/structmember.c.'>WARN</a>("Truncation of value to unsigned int");
<a name='L204'>        <b>break</b>;
<a name='L205'>        <font color='red'>}</font>
<a name='L206'>    <b>case</b> <a href='../S/577.html#L40' title='Defined at 40 in Include/structmember.h.'>T_LONG</a>:<font color='red'>{</font>
<a name='L207'>        *(<b>long</b>*)addr = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L208'>        <b>if</b> ((*(<b>long</b>*)addr == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L209'>            <b>return</b> -1;
<a name='L210'>        <b>break</b>;
<a name='L211'>        <font color='red'>}</font>
<a name='L212'>    <b>case</b> <a href='../S/577.html#L52' title='Defined at 52 in Include/structmember.h.'>T_ULONG</a>:<font color='red'>{</font>
<a name='L213'>        *(<b>unsigned</b> <b>long</b>*)addr = <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>(v);
<a name='L214'>        <b>if</b> ((*(<b>unsigned</b> <b>long</b>*)addr == (<b>unsigned</b> <b>long</b>)-1)
<a name='L215'>            &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L216'>            <i><font color='green'>/* XXX: For compatibility, accept negative int values</font></i>
<a name='L217'><i><font color='green'>               as well. */</font></i>
<a name='L218'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L219'>            *(<b>unsigned</b> <b>long</b>*)addr = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L220'>            <b>if</b> ((*(<b>unsigned</b> <b>long</b>*)addr == (<b>unsigned</b> <b>long</b>)-1)
<a name='L221'>                &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L222'>                <b>return</b> -1;
<a name='L223'>            <a href='../S/3142.html#L96' title='Defined at 96 in Python/structmember.c.'>WARN</a>("Writing negative value into unsigned field");
<a name='L224'>        <font color='red'>}</font>
<a name='L225'>        <b>break</b>;
<a name='L226'>        <font color='red'>}</font>
<a name='L227'>    <b>case</b> <a href='../S/577.html#L68' title='Defined at 68 in Include/structmember.h.'>T_PYSSIZET</a>:<font color='red'>{</font>
<a name='L228'>        *(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>*)addr = <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>(v);
<a name='L229'>        <b>if</b> ((*(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>*)addr == (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)-1)
<a name='L230'>            &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L231'>                        <b>return</b> -1;
<a name='L232'>        <b>break</b>;
<a name='L233'>        <font color='red'>}</font>
<a name='L234'>    <b>case</b> <a href='../S/577.html#L41' title='Defined at 41 in Include/structmember.h.'>T_FLOAT</a>:<font color='red'>{</font>
<a name='L235'>        <b>double</b> double_val = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L236'>        <b>if</b> ((double_val == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L237'>            <b>return</b> -1;
<a name='L238'>        *(<b>float</b>*)addr = (<b>float</b>)double_val;
<a name='L239'>        <b>break</b>;
<a name='L240'>        <font color='red'>}</font>
<a name='L241'>    <b>case</b> <a href='../S/577.html#L42' title='Defined at 42 in Include/structmember.h.'>T_DOUBLE</a>:
<a name='L242'>        *(<b>double</b>*)addr = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(v);
<a name='L243'>        <b>if</b> ((*(<b>double</b>*)addr == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L244'>            <b>return</b> -1;
<a name='L245'>        <b>break</b>;
<a name='L246'>    <b>case</b> <a href='../S/577.html#L44' title='Defined at 44 in Include/structmember.h.'>T_OBJECT</a>:
<a name='L247'>    <b>case</b> <a href='../S/577.html#L60' title='Defined at 60 in Include/structmember.h.'>T_OBJECT_EX</a>:
<a name='L248'>        <a href='../S/544.html#L766' title='Defined at 766 in Include/object.h.'>Py_XINCREF</a>(v);
<a name='L249'>        oldv = *(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **)addr;
<a name='L250'>        *(<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **)addr = v;
<a name='L251'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(oldv);
<a name='L252'>        <b>break</b>;
<a name='L253'>    <b>case</b> <a href='../S/577.html#L46' title='Defined at 46 in Include/structmember.h.'>T_CHAR</a>: <font color='red'>{</font>
<a name='L254'>        <b>char</b> *<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>;
<a name='L255'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len;
<a name='L256'>
<a name='L257'>        <b>if</b> (!PyUnicode_Check(v)) <font color='red'>{</font>
<a name='L258'>            <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L259'>            <b>return</b> -1;
<a name='L260'>        <font color='red'>}</font>
<a name='L261'>        <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a> = <a href='../S/2828.html#L1903' title='Defined at 1903 in Objects/unicodeobject.c.'>_PyUnicode_AsStringAndSize</a>(v, &amp;len);
<a name='L262'>        <b>if</b> (len != 1) <font color='red'>{</font>
<a name='L263'>            <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L264'>            <b>return</b> -1;
<a name='L265'>        <font color='red'>}</font>
<a name='L266'>        *(<b>char</b>*)addr = <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>[0];
<a name='L267'>        <b>break</b>;
<a name='L268'>        <font color='red'>}</font>
<a name='L269'>    <b>case</b> <a href='../S/577.html#L43' title='Defined at 43 in Include/structmember.h.'>T_STRING</a>:
<a name='L270'>    <b>case</b> <a href='../S/577.html#L55' title='Defined at 55 in Include/structmember.h.'>T_STRING_INPLACE</a>:
<a name='L271'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "readonly attribute");
<a name='L272'>        <b>return</b> -1;
<a name='L273'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L274'>    <b>case</b> <a href='../S/577.html#L64' title='Defined at 64 in Include/structmember.h.'>T_LONGLONG</a>:<font color='red'>{</font>
<a name='L275'>        <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L276'>        *(<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>*)addr = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L1137' title='Defined at 1137 in Objects/longobject.c.'>PyLong_AsLongLong</a>(v);
<a name='L277'>        <b>if</b> ((<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == -1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L278'>            <b>return</b> -1;
<a name='L279'>        <b>break</b>;
<a name='L280'>        <font color='red'>}</font>
<a name='L281'>    <b>case</b> <a href='../S/577.html#L65' title='Defined at 65 in Include/structmember.h.'>T_ULONGLONG</a>:<font color='red'>{</font>
<a name='L282'>        <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L283'>        <i><font color='green'>/* ??? PyLong_AsLongLong accepts an int, but PyLong_AsUnsignedLongLong</font></i>
<a name='L284'><i><font color='green'>            doesn't ??? */</font></i>
<a name='L285'>        <b>if</b> (PyLong_Check(v))
<a name='L286'>            *(<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>*)addr = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L1189' title='Defined at 1189 in Objects/longobject.c.'>PyLong_AsUnsignedLongLong</a>(v);
<a name='L287'>        <b>else</b>
<a name='L288'>            *(<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>*)addr = <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(v);
<a name='L289'>        <b>if</b> ((<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1) &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L290'>            <b>return</b> -1;
<a name='L291'>        <b>break</b>;
<a name='L292'>        <font color='red'>}</font>
<a name='L293'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_LONG_LONG */</font></i>
<a name='L294'>    <b>default</b>:
<a name='L295'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_SystemError,
<a name='L296'>                     "bad memberdescr type for %s", l-&gt;name);
<a name='L297'>        <b>return</b> -1;
<a name='L298'>    <font color='red'>}</font>
<a name='L299'>    <b>return</b> 0;
<a name='L300'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L9'>[^]</a><a href='#L103'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
