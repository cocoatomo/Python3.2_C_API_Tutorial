<html>
<head>
<title>Modules/zlib/infback.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/<a href='../files/3390.html'>zlib</a>/infback.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L28'>[^]</a><a href='#L623'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L28' title='Defined at 28.'>inflateBackInit_</a>
<li><a href='#L73' title='Defined at 73.'>fixedtables</a>
<li><a href='#L241' title='Defined at 241.'>inflateBack</a>
<li><a href='#L623' title='Defined at 623.'>inflateBackEnd</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* infback.c -- inflate using a call-back interface</font></i>
<a name='L2'><i><font color='green'> * Copyright (C) 1995-2009 Mark Adler</font></i>
<a name='L3'><i><font color='green'> * For conditions of distribution and use, see copyright notice in zlib.h</font></i>
<a name='L4'><i><font color='green'> */</font></i>
<a name='L5'>
<a name='L6'><i><font color='green'>/*</font></i>
<a name='L7'><i><font color='green'>   This code is largely copied from inflate.c.  Normally either infback.o or</font></i>
<a name='L8'><i><font color='green'>   inflate.o would be linked into an application--not both.  The interface</font></i>
<a name='L9'><i><font color='green'>   with inffast.c is retained so that optimized assembler-coded versions of</font></i>
<a name='L10'><i><font color='green'>   inflate_fast() can be used with either inflate.c or infback.c.</font></i>
<a name='L11'><i><font color='green'> */</font></i>
<a name='L12'>
<a name='L13'><font color='darkred'>#include</font> "<a href='2773.html'>zutil.h</a>"
<a name='L14'><font color='darkred'>#include</font> "<a href='2755.html'>inftrees.h</a>"
<a name='L15'><font color='darkred'>#include</font> "<a href='2753.html'>inflate.h</a>"
<a name='L16'><font color='darkred'>#include</font> "<a href='2750.html'>inffast.h</a>"
<a name='L17'>
<a name='L18'><i><font color='green'>/* function prototypes */</font></i>
<a name='L19'><a href='../D/9558.html' title='Multiple defined in 6 places.'>local</a> <b>void</b> <a href='../D/8615.html' title='Multiple defined in 2 places.'>fixedtables</a> <a href='../D/2401.html' title='Multiple defined in 9 places.'>OF</a>((<b>struct</b> inflate_state <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *state));
<a name='L20'>
<a name='L21'><i><font color='green'>/*</font></i>
<a name='L22'><i><font color='green'>   strm provides memory allocation functions in zalloc and zfree, or</font></i>
<a name='L23'><i><font color='green'>   Z_NULL to use the library memory allocation functions.</font></i>
<a name='L24'><i><font color='green'></font></i>
<a name='L25'><i><font color='green'>   windowBits is in the range 8..15, and window is a user-supplied</font></i>
<a name='L26'><i><font color='green'>   window and output buffer that is 2**windowBits bytes.</font></i>
<a name='L27'><i><font color='green'> */</font></i>
<a name='L28'><b>int</b> <a href='../D/5922.html' title='Multiple defined in 8 places.'>ZEXPORT</a> <a href='../R/8351.html' title='Multiple refered from 2 places.'>inflateBackInit_</a>(strm, windowBits, window, version, stream_size)
<a name='L29'>z_streamp strm;
<a name='L30'><b>int</b> windowBits;
<a name='L31'><b>unsigned</b> <b>char</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *window;
<a name='L32'><b>const</b> <b>char</b> *version;
<a name='L33'><b>int</b> stream_size;
<a name='L34'><font color='red'>{</font>
<a name='L35'>    <b>struct</b> <a href='../S/2753.html#L81' title='Defined at 81 in Modules/zlib/inflate.h.'>inflate_state</a> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L36'>
<a name='L37'>    <b>if</b> (version == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a> || version[0] != <a href='../S/2769.html#L40' title='Defined at 40 in Modules/zlib/zlib.h.'>ZLIB_VERSION</a>[0] ||
<a name='L38'>        stream_size != (<b>int</b>)(<b>sizeof</b>(<a href='../S/2769.html#L104' title='Defined at 104 in Modules/zlib/zlib.h.'>z_stream</a>)))
<a name='L39'>        <b>return</b> <a href='../S/2769.html#L181' title='Defined at 181 in Modules/zlib/zlib.h.'>Z_VERSION_ERROR</a>;
<a name='L40'>    <b>if</b> (strm == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a> || window == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a> ||
<a name='L41'>        windowBits &lt; 8 || windowBits &gt; 15)
<a name='L42'>        <b>return</b> <a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>;
<a name='L43'>    strm-&gt;msg = <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>;                 <i><font color='green'>/* in case we return an error */</font></i>
<a name='L44'>    <b>if</b> (strm-&gt;zalloc == (<a href='../D/6713.html' title='Multiple defined in 2 places.'>alloc_func</a>)0) <font color='red'>{</font>
<a name='L45'>        strm-&gt;zalloc = <a href='../D/12443.html' title='Multiple defined in 4 places.'>zcalloc</a>;
<a name='L46'>        strm-&gt;opaque = (<a href='../D/12267.html' title='Multiple defined in 6 places.'>voidpf</a>)0;
<a name='L47'>    <font color='red'>}</font>
<a name='L48'>    <b>if</b> (strm-&gt;zfree == (<a href='../D/8725.html' title='Multiple defined in 2 places.'>free_func</a>)0) strm-&gt;zfree = <a href='../D/12444.html' title='Multiple defined in 4 places.'>zcfree</a>;
<a name='L49'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = (<b>struct</b> <a href='../S/2753.html#L81' title='Defined at 81 in Modules/zlib/inflate.h.'>inflate_state</a> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *)<a href='../S/2773.html#L269' title='Defined at 269 in Modules/zlib/zutil.h.'>ZALLOC</a>(strm, 1,
<a name='L50'>                                               <b>sizeof</b>(<b>struct</b> <a href='../S/2753.html#L81' title='Defined at 81 in Modules/zlib/inflate.h.'>inflate_state</a>));
<a name='L51'>    <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>) <b>return</b> <a href='../S/2769.html#L179' title='Defined at 179 in Modules/zlib/zlib.h.'>Z_MEM_ERROR</a>;
<a name='L52'>    <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate: allocated\n"));
<a name='L53'>    strm-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = (<b>struct</b> <a href='../D/9267.html' title='Multiple defined in 5 places.'>internal_state</a> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *)<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L54'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;dmax = 32768U;
<a name='L55'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wbits = windowBits;
<a name='L56'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize = 1U &lt;&lt; windowBits;
<a name='L57'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;window = window;
<a name='L58'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wnext = 0;
<a name='L59'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;whave = 0;
<a name='L60'>    <b>return</b> <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>;
<a name='L61'><font color='red'>}</font>
<a name='L62'>
<a name='L63'><i><font color='green'>/*</font></i>
<a name='L64'><i><font color='green'>   Return state with length and distance decoding tables and index sizes set to</font></i>
<a name='L65'><i><font color='green'>   fixed code decoding.  Normally this returns fixed tables from inffixed.h.</font></i>
<a name='L66'><i><font color='green'>   If BUILDFIXED is defined, then instead this routine builds the tables the</font></i>
<a name='L67'><i><font color='green'>   first time it's called, and returns those tables the first time and</font></i>
<a name='L68'><i><font color='green'>   thereafter.  This reduces the size of the code by about 2K bytes, in</font></i>
<a name='L69'><i><font color='green'>   exchange for a little execution time.  However, BUILDFIXED should not be</font></i>
<a name='L70'><i><font color='green'>   used for threaded applications, since the rewriting of the tables and virgin</font></i>
<a name='L71'><i><font color='green'>   may not be thread-safe.</font></i>
<a name='L72'><i><font color='green'> */</font></i>
<a name='L73'><a href='../D/9558.html' title='Multiple defined in 6 places.'>local</a> <b>void</b> <a href='../R/7816.html' title='Multiple refered from 5 places.'>fixedtables</a>(state)
<a name='L74'><b>struct</b> inflate_state <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *state;
<a name='L75'><font color='red'>{</font>
<a name='L76'><font color='darkred'>#ifdef</font> <a href='../S/2752.html#L90' title='Defined at 90 in Modules/zlib/inflate.c.'>BUILDFIXED</a>
<a name='L77'>    <b>static</b> <b>int</b> virgin = 1;
<a name='L78'>    <b>static</b> <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> *lenfix, *distfix;
<a name='L79'>    <b>static</b> <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> fixed[544];
<a name='L80'>
<a name='L81'>    <i><font color='green'>/* build fixed huffman tables if first call (may not be thread safe) */</font></i>
<a name='L82'>    <b>if</b> (virgin) <font color='red'>{</font>
<a name='L83'>        <b>unsigned</b> sym, bits;
<a name='L84'>        <b>static</b> <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> *next;
<a name='L85'>
<a name='L86'>        <i><font color='green'>/* literal/length table */</font></i>
<a name='L87'>        sym = 0;
<a name='L88'>        <b>while</b> (sym &lt; 144) <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[sym++] = 8;
<a name='L89'>        <b>while</b> (sym &lt; 256) <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[sym++] = 9;
<a name='L90'>        <b>while</b> (sym &lt; 280) <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[sym++] = 7;
<a name='L91'>        <b>while</b> (sym &lt; 288) <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[sym++] = 8;
<a name='L92'>        next = fixed;
<a name='L93'>        lenfix = next;
<a name='L94'>        bits = 9;
<a name='L95'>        <a href='../D/9180.html' title='Multiple defined in 2 places.'>inflate_table</a>(<a href='../S/2755.html#L56' title='Defined at 56 in Modules/zlib/inftrees.h.'>LENS</a>, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens, 288, &amp;(next), &amp;(bits), <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;work);
<a name='L96'>
<a name='L97'>        <i><font color='green'>/* distance table */</font></i>
<a name='L98'>        sym = 0;
<a name='L99'>        <b>while</b> (sym &lt; 32) <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[sym++] = 5;
<a name='L100'>        distfix = next;
<a name='L101'>        bits = 5;
<a name='L102'>        <a href='../D/9180.html' title='Multiple defined in 2 places.'>inflate_table</a>(<a href='../S/2755.html#L57' title='Defined at 57 in Modules/zlib/inftrees.h.'>DISTS</a>, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens, 32, &amp;(next), &amp;(bits), <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;work);
<a name='L103'>
<a name='L104'>        <i><font color='green'>/* do this just once */</font></i>
<a name='L105'>        virgin = 0;
<a name='L106'>    <font color='red'>}</font>
<a name='L107'><font color='darkred'>#else</font> <i><font color='green'>/* !BUILDFIXED */</font></i>
<a name='L108'><font color='darkred'>#   include</font> "<a href='2751.html'>inffixed.h</a>"
<a name='L109'><font color='darkred'>#endif</font> <i><font color='green'>/* BUILDFIXED */</font></i>
<a name='L110'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lencode = lenfix;
<a name='L111'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lenbits = 9;
<a name='L112'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;distcode = distfix;
<a name='L113'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;distbits = 5;
<a name='L114'><font color='red'>}</font>
<a name='L115'>
<a name='L116'><i><font color='green'>/* Macros for inflateBack(): */</font></i>
<a name='L117'>
<a name='L118'><i><font color='green'>/* Load returned state from inflate_fast() */</font></i>
<a name='L119'><font color='darkred'>#define</font> <a href='../R/1737.html' title='Multiple refered from 3 places.'>LOAD</a>() \
<a name='L120'>    <b>do</b> <font color='red'>{</font> \
<a name='L121'>        put = strm-&gt;next_out; \
<a name='L122'>        left = strm-&gt;avail_out; \
<a name='L123'>        next = strm-&gt;next_in; \
<a name='L124'>        have = strm-&gt;avail_in; \
<a name='L125'>        hold = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;hold; \
<a name='L126'>        bits = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;bits; \
<a name='L127'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L128'>
<a name='L129'><i><font color='green'>/* Set state from registers for inflate_fast() */</font></i>
<a name='L130'><font color='darkred'>#define</font> <a href='../R/3951.html' title='Multiple refered from 4 places.'>RESTORE</a>() \
<a name='L131'>    <b>do</b> <font color='red'>{</font> \
<a name='L132'>        strm-&gt;next_out = put; \
<a name='L133'>        strm-&gt;avail_out = left; \
<a name='L134'>        strm-&gt;next_in = next; \
<a name='L135'>        strm-&gt;avail_in = have; \
<a name='L136'>        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;hold = hold; \
<a name='L137'>        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;bits = bits; \
<a name='L138'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L139'>
<a name='L140'><i><font color='green'>/* Clear the input bit accumulator */</font></i>
<a name='L141'><font color='darkred'>#define</font> <a href='../R/1514.html' title='Multiple refered from 12 places.'>INITBITS</a>() \
<a name='L142'>    <b>do</b> <font color='red'>{</font> \
<a name='L143'>        hold = 0; \
<a name='L144'>        bits = 0; \
<a name='L145'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L146'>
<a name='L147'><i><font color='green'>/* Assure that some input is available.  If input is requested, but denied,</font></i>
<a name='L148'><i><font color='green'>   then return a Z_BUF_ERROR from inflateBack(). */</font></i>
<a name='L149'><font color='darkred'>#define</font> <a href='../R/2318.html' title='Multiple refered from 2 places.'>PULL</a>() \
<a name='L150'>    <b>do</b> <font color='red'>{</font> \
<a name='L151'>        <b>if</b> (have == 0) <font color='red'>{</font> \
<a name='L152'>            have = in(in_desc, &amp;next); \
<a name='L153'>            <b>if</b> (have == 0) <font color='red'>{</font> \
<a name='L154'>                next = <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>; \
<a name='L155'>                ret = <a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>; \
<a name='L156'>                <b>goto</b> inf_leave; \
<a name='L157'>            <font color='red'>}</font> \
<a name='L158'>        <font color='red'>}</font> \
<a name='L159'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L160'>
<a name='L161'><i><font color='green'>/* Get a byte of input into the bit accumulator, or return from inflateBack()</font></i>
<a name='L162'><i><font color='green'>   with an error if there is no input available. */</font></i>
<a name='L163'><font color='darkred'>#define</font> <a href='../R/2319.html' title='Multiple refered from 12 places.'>PULLBYTE</a>() \
<a name='L164'>    <b>do</b> <font color='red'>{</font> \
<a name='L165'>        <a href='../S/2748.html#L149' title='Defined at 149 in Modules/zlib/infback.c.'>PULL</a>(); \
<a name='L166'>        have--; \
<a name='L167'>        hold += (<b>unsigned</b> <b>long</b>)(*next++) &lt;&lt; bits; \
<a name='L168'>        bits += 8; \
<a name='L169'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L170'>
<a name='L171'><i><font color='green'>/* Assure that there are at least n bits in the bit accumulator.  If there is</font></i>
<a name='L172'><i><font color='green'>   not enough available input to do that, then return from inflateBack() with</font></i>
<a name='L173'><i><font color='green'>   an error. */</font></i>
<a name='L174'><font color='darkred'>#define</font> <a href='../R/2063.html' title='Multiple refered from 29 places.'>NEEDBITS</a>(n) \
<a name='L175'>    <b>do</b> <font color='red'>{</font> \
<a name='L176'>        <b>while</b> (bits &lt; (<b>unsigned</b>)(n)) \
<a name='L177'>            <a href='../D/2555.html' title='Multiple defined in 2 places.'>PULLBYTE</a>(); \
<a name='L178'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L179'>
<a name='L180'><i><font color='green'>/* Return the low n bits of the bit accumulator (n &lt; 16) */</font></i>
<a name='L181'><font color='darkred'>#define</font> <a href='../R/265.html' title='Multiple refered from 38 places.'>BITS</a>(n) \
<a name='L182'>    ((<b>unsigned</b>)hold &amp; ((1U &lt;&lt; (n)) - 1))
<a name='L183'>
<a name='L184'><i><font color='green'>/* Remove n bits from the bit accumulator */</font></i>
<a name='L185'><font color='darkred'>#define</font> <a href='../R/769.html' title='Multiple refered from 40 places.'>DROPBITS</a>(n) \
<a name='L186'>    <b>do</b> <font color='red'>{</font> \
<a name='L187'>        hold &gt;&gt;= (n); \
<a name='L188'>        bits -= (<b>unsigned</b>)(n); \
<a name='L189'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L190'>
<a name='L191'><i><font color='green'>/* Remove zero to seven bits as needed to go to a byte boundary */</font></i>
<a name='L192'><font color='darkred'>#define</font> <a href='../R/340.html' title='Multiple refered from 4 places.'>BYTEBITS</a>() \
<a name='L193'>    <b>do</b> <font color='red'>{</font> \
<a name='L194'>        hold &gt;&gt;= bits &amp; 7; \
<a name='L195'>        bits -= bits &amp; 7; \
<a name='L196'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L197'>
<a name='L198'><i><font color='green'>/* Assure that some output space is available, by writing out the window</font></i>
<a name='L199'><i><font color='green'>   if it's full.  If the write fails, return from inflateBack() with a</font></i>
<a name='L200'><i><font color='green'>   Z_BUF_ERROR. */</font></i>
<a name='L201'><font color='darkred'>#define</font> <a href='../R/3976.html' title='Multiple refered from 3 places.'>ROOM</a>() \
<a name='L202'>    <b>do</b> <font color='red'>{</font> \
<a name='L203'>        <b>if</b> (left == 0) <font color='red'>{</font> \
<a name='L204'>            put = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;window; \
<a name='L205'>            left = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize; \
<a name='L206'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;whave = left; \
<a name='L207'>            <b>if</b> (out(out_desc, put, left)) <font color='red'>{</font> \
<a name='L208'>                ret = <a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>; \
<a name='L209'>                <b>goto</b> inf_leave; \
<a name='L210'>            <font color='red'>}</font> \
<a name='L211'>        <font color='red'>}</font> \
<a name='L212'>    <font color='red'>}</font> <b>while</b> (0)
<a name='L213'>
<a name='L214'><i><font color='green'>/*</font></i>
<a name='L215'><i><font color='green'>   strm provides the memory allocation functions and window buffer on input,</font></i>
<a name='L216'><i><font color='green'>   and provides information on the unused input on return.  For Z_DATA_ERROR</font></i>
<a name='L217'><i><font color='green'>   returns, strm will also provide an error message.</font></i>
<a name='L218'><i><font color='green'></font></i>
<a name='L219'><i><font color='green'>   in() and out() are the call-back input and output functions.  When</font></i>
<a name='L220'><i><font color='green'>   inflateBack() needs more input, it calls in().  When inflateBack() has</font></i>
<a name='L221'><i><font color='green'>   filled the window with output, or when it completes with data in the</font></i>
<a name='L222'><i><font color='green'>   window, it calls out() to write out the data.  The application must not</font></i>
<a name='L223'><i><font color='green'>   change the provided input until in() is called again or inflateBack()</font></i>
<a name='L224'><i><font color='green'>   returns.  The application must not change the window/output buffer until</font></i>
<a name='L225'><i><font color='green'>   inflateBack() returns.</font></i>
<a name='L226'><i><font color='green'></font></i>
<a name='L227'><i><font color='green'>   in() and out() are called with a descriptor parameter provided in the</font></i>
<a name='L228'><i><font color='green'>   inflateBack() call.  This parameter can be a structure that provides the</font></i>
<a name='L229'><i><font color='green'>   information required to do the read or write, as well as accumulated</font></i>
<a name='L230'><i><font color='green'>   information on the input and output such as totals and check values.</font></i>
<a name='L231'><i><font color='green'></font></i>
<a name='L232'><i><font color='green'>   in() should return zero on failure.  out() should return non-zero on</font></i>
<a name='L233'><i><font color='green'>   failure.  If either in() or out() fails, than inflateBack() returns a</font></i>
<a name='L234'><i><font color='green'>   Z_BUF_ERROR.  strm-&gt;next_in can be checked for Z_NULL to see whether it</font></i>
<a name='L235'><i><font color='green'>   was in() or out() that caused in the error.  Otherwise,  inflateBack()</font></i>
<a name='L236'><i><font color='green'>   returns Z_STREAM_END on success, Z_DATA_ERROR for an deflate format</font></i>
<a name='L237'><i><font color='green'>   error, or Z_MEM_ERROR if it could not allocate memory for the state.</font></i>
<a name='L238'><i><font color='green'>   inflateBack() can also return Z_STREAM_ERROR if the input parameters</font></i>
<a name='L239'><i><font color='green'>   are not correct, i.e. strm is Z_NULL or the state was not initialized.</font></i>
<a name='L240'><i><font color='green'> */</font></i>
<a name='L241'><b>int</b> <a href='../D/5922.html' title='Multiple defined in 8 places.'>ZEXPORT</a> <a href='../S/2769.html#L973' title='Refered from 973 in Modules/zlib/zlib.h.'>inflateBack</a>(strm, in, in_desc, out, out_desc)
<a name='L242'>z_streamp strm;
<a name='L243'>in_func in;
<a name='L244'><b>void</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *in_desc;
<a name='L245'>out_func out;
<a name='L246'><b>void</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *out_desc;
<a name='L247'><font color='red'>{</font>
<a name='L248'>    <b>struct</b> <a href='../S/2753.html#L81' title='Defined at 81 in Modules/zlib/inflate.h.'>inflate_state</a> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L249'>    <b>unsigned</b> <b>char</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *next;    <i><font color='green'>/* next input */</font></i>
<a name='L250'>    <b>unsigned</b> <b>char</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *put;     <i><font color='green'>/* next output */</font></i>
<a name='L251'>    <b>unsigned</b> have, left;        <i><font color='green'>/* available input and output */</font></i>
<a name='L252'>    <b>unsigned</b> <b>long</b> hold;         <i><font color='green'>/* bit buffer */</font></i>
<a name='L253'>    <b>unsigned</b> bits;              <i><font color='green'>/* bits in bit buffer */</font></i>
<a name='L254'>    <b>unsigned</b> copy;              <i><font color='green'>/* number of stored or match bytes to copy */</font></i>
<a name='L255'>    <b>unsigned</b> <b>char</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *from;    <i><font color='green'>/* where to copy match bytes from */</font></i>
<a name='L256'>    <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> here;                  <i><font color='green'>/* current decoding table entry */</font></i>
<a name='L257'>    <a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> last;                  <i><font color='green'>/* parent table entry */</font></i>
<a name='L258'>    <b>unsigned</b> len;               <i><font color='green'>/* length to copy for repeats, bits to drop */</font></i>
<a name='L259'>    <b>int</b> ret;                    <i><font color='green'>/* return code */</font></i>
<a name='L260'>    <b>static</b> <b>const</b> <b>unsigned</b> <b>short</b> order[19] = <i><font color='green'>/* permutation of code lengths */</font></i>
<a name='L261'>        <font color='red'>{</font>16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15<font color='red'>}</font>;
<a name='L262'>
<a name='L263'>    <i><font color='green'>/* Check that the strm exists and that the state was initialized */</font></i>
<a name='L264'>    <b>if</b> (strm == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a> || strm-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>)
<a name='L265'>        <b>return</b> <a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>;
<a name='L266'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = (<b>struct</b> <a href='../S/2753.html#L81' title='Defined at 81 in Modules/zlib/inflate.h.'>inflate_state</a> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *)strm-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L267'>
<a name='L268'>    <i><font color='green'>/* Reset the state */</font></i>
<a name='L269'>    strm-&gt;msg = <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>;
<a name='L270'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L32' title='Defined at 32 in Modules/zlib/inflate.h.'>TYPE</a>;
<a name='L271'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;last = 0;
<a name='L272'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;whave = 0;
<a name='L273'>    next = strm-&gt;next_in;
<a name='L274'>    have = next != <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a> ? strm-&gt;avail_in : 0;
<a name='L275'>    hold = 0;
<a name='L276'>    bits = 0;
<a name='L277'>    put = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;window;
<a name='L278'>    left = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize;
<a name='L279'>
<a name='L280'>    <i><font color='green'>/* Inflate until end of block marked as last */</font></i>
<a name='L281'>    <b>for</b> (;;)
<a name='L282'>        <b>switch</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode) <font color='red'>{</font>
<a name='L283'>        <b>case</b> <a href='../S/2753.html#L32' title='Defined at 32 in Modules/zlib/inflate.h.'>TYPE</a>:
<a name='L284'>            <i><font color='green'>/* determine and dispatch block type */</font></i>
<a name='L285'>            <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;last) <font color='red'>{</font>
<a name='L286'>                <a href='../D/366.html' title='Multiple defined in 2 places.'>BYTEBITS</a>();
<a name='L287'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../D/809.html' title='Multiple defined in 2 places.'>DONE</a>;
<a name='L288'>                <b>break</b>;
<a name='L289'>            <font color='red'>}</font>
<a name='L290'>            <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(3);
<a name='L291'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;last = <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(1);
<a name='L292'>            <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(1);
<a name='L293'>            <b>switch</b> (<a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(2)) <font color='red'>{</font>
<a name='L294'>            <b>case</b> 0:                             <i><font color='green'>/* stored block */</font></i>
<a name='L295'>                <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate:     stored block%s\n",
<a name='L296'>                        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;last ? " (last)" : ""));
<a name='L297'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L34' title='Defined at 34 in Modules/zlib/inflate.h.'>STORED</a>;
<a name='L298'>                <b>break</b>;
<a name='L299'>            <b>case</b> 1:                             <i><font color='green'>/* fixed block */</font></i>
<a name='L300'>                <a href='../D/8615.html' title='Multiple defined in 2 places.'>fixedtables</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L301'>                <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate:     fixed codes block%s\n",
<a name='L302'>                        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;last ? " (last)" : ""));
<a name='L303'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L41' title='Defined at 41 in Modules/zlib/inflate.h.'>LEN</a>;              <i><font color='green'>/* decode codes */</font></i>
<a name='L304'>                <b>break</b>;
<a name='L305'>            <b>case</b> 2:                             <i><font color='green'>/* dynamic block */</font></i>
<a name='L306'>                <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate:     dynamic codes block%s\n",
<a name='L307'>                        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;last ? " (last)" : ""));
<a name='L308'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L37' title='Defined at 37 in Modules/zlib/inflate.h.'>TABLE</a>;
<a name='L309'>                <b>break</b>;
<a name='L310'>            <b>case</b> 3:
<a name='L311'>                strm-&gt;msg = (<b>char</b> *)"invalid block type";
<a name='L312'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L313'>            <font color='red'>}</font>
<a name='L314'>            <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(2);
<a name='L315'>            <b>break</b>;
<a name='L316'>
<a name='L317'>        <b>case</b> <a href='../S/2753.html#L34' title='Defined at 34 in Modules/zlib/inflate.h.'>STORED</a>:
<a name='L318'>            <i><font color='green'>/* get and verify stored block length */</font></i>
<a name='L319'>            <a href='../D/366.html' title='Multiple defined in 2 places.'>BYTEBITS</a>();                         <i><font color='green'>/* go to byte boundary */</font></i>
<a name='L320'>            <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(32);
<a name='L321'>            <b>if</b> ((hold &amp; 0xffff) != ((hold &gt;&gt; 16) ^ 0xffff)) <font color='red'>{</font>
<a name='L322'>                strm-&gt;msg = (<b>char</b> *)"invalid stored block lengths";
<a name='L323'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L324'>                <b>break</b>;
<a name='L325'>            <font color='red'>}</font>
<a name='L326'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length = (<b>unsigned</b>)hold &amp; 0xffff;
<a name='L327'>            <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate:       stored length %u\n",
<a name='L328'>                    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length));
<a name='L329'>            <a href='../D/1702.html' title='Multiple defined in 2 places.'>INITBITS</a>();
<a name='L330'>
<a name='L331'>            <i><font color='green'>/* copy stored block from input to output */</font></i>
<a name='L332'>            <b>while</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length != 0) <font color='red'>{</font>
<a name='L333'>                copy = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length;
<a name='L334'>                <a href='../S/2748.html#L149' title='Defined at 149 in Modules/zlib/infback.c.'>PULL</a>();
<a name='L335'>                <a href='../S/2748.html#L201' title='Defined at 201 in Modules/zlib/infback.c.'>ROOM</a>();
<a name='L336'>                <b>if</b> (copy &gt; have) copy = have;
<a name='L337'>                <b>if</b> (copy &gt; left) copy = left;
<a name='L338'>                <a href='../D/12472.html' title='Multiple defined in 3 places.'>zmemcpy</a>(put, next, copy);
<a name='L339'>                have -= copy;
<a name='L340'>                next += copy;
<a name='L341'>                left -= copy;
<a name='L342'>                put += copy;
<a name='L343'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length -= copy;
<a name='L344'>            <font color='red'>}</font>
<a name='L345'>            <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate:       stored end\n"));
<a name='L346'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L32' title='Defined at 32 in Modules/zlib/inflate.h.'>TYPE</a>;
<a name='L347'>            <b>break</b>;
<a name='L348'>
<a name='L349'>        <b>case</b> <a href='../S/2753.html#L37' title='Defined at 37 in Modules/zlib/inflate.h.'>TABLE</a>:
<a name='L350'>            <i><font color='green'>/* get dynamic table entries descriptor */</font></i>
<a name='L351'>            <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(14);
<a name='L352'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;nlen = <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(5) + 257;
<a name='L353'>            <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(5);
<a name='L354'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;ndist = <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(5) + 1;
<a name='L355'>            <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(5);
<a name='L356'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;ncode = <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(4) + 4;
<a name='L357'>            <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(4);
<a name='L358'><font color='darkred'>#ifndef</font> PKZIP_BUG_WORKAROUND
<a name='L359'>            <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;nlen &gt; 286 || <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;ndist &gt; 30) <font color='red'>{</font>
<a name='L360'>                strm-&gt;msg = (<b>char</b> *)"too many length or distance symbols";
<a name='L361'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L362'>                <b>break</b>;
<a name='L363'>            <font color='red'>}</font>
<a name='L364'><font color='darkred'>#endif</font>
<a name='L365'>            <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate:       table sizes ok\n"));
<a name='L366'>
<a name='L367'>            <i><font color='green'>/* get code length code lengths (not a typo) */</font></i>
<a name='L368'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have = 0;
<a name='L369'>            <b>while</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have &lt; <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;ncode) <font color='red'>{</font>
<a name='L370'>                <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(3);
<a name='L371'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[order[<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have++]] = (<b>unsigned</b> <b>short</b>)<a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(3);
<a name='L372'>                <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(3);
<a name='L373'>            <font color='red'>}</font>
<a name='L374'>            <b>while</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have &lt; 19)
<a name='L375'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[order[<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have++]] = 0;
<a name='L376'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;next = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;codes;
<a name='L377'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lencode = (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> <b>const</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *)(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;next);
<a name='L378'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lenbits = 7;
<a name='L379'>            ret = <a href='../D/9180.html' title='Multiple defined in 2 places.'>inflate_table</a>(<a href='../S/2755.html#L55' title='Defined at 55 in Modules/zlib/inftrees.h.'>CODES</a>, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens, 19, &amp;(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;next),
<a name='L380'>                                &amp;(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lenbits), <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;work);
<a name='L381'>            <b>if</b> (ret) <font color='red'>{</font>
<a name='L382'>                strm-&gt;msg = (<b>char</b> *)"invalid code lengths set";
<a name='L383'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L384'>                <b>break</b>;
<a name='L385'>            <font color='red'>}</font>
<a name='L386'>            <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate:       code lengths ok\n"));
<a name='L387'>
<a name='L388'>            <i><font color='green'>/* get length and distance code code lengths */</font></i>
<a name='L389'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have = 0;
<a name='L390'>            <b>while</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have &lt; <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;nlen + <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;ndist) <font color='red'>{</font>
<a name='L391'>                <b>for</b> (;;) <font color='red'>{</font>
<a name='L392'>                    here = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lencode[<a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lenbits)];
<a name='L393'>                    <b>if</b> ((<b>unsigned</b>)(here.bits) &lt;= bits) <b>break</b>;
<a name='L394'>                    <a href='../D/2555.html' title='Multiple defined in 2 places.'>PULLBYTE</a>();
<a name='L395'>                <font color='red'>}</font>
<a name='L396'>                <b>if</b> (here.val &lt; 16) <font color='red'>{</font>
<a name='L397'>                    <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(here.bits);
<a name='L398'>                    <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(here.bits);
<a name='L399'>                    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have++] = here.val;
<a name='L400'>                <font color='red'>}</font>
<a name='L401'>                <b>else</b> <font color='red'>{</font>
<a name='L402'>                    <b>if</b> (here.val == 16) <font color='red'>{</font>
<a name='L403'>                        <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(here.bits + 2);
<a name='L404'>                        <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(here.bits);
<a name='L405'>                        <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have == 0) <font color='red'>{</font>
<a name='L406'>                            strm-&gt;msg = (<b>char</b> *)"invalid bit length repeat";
<a name='L407'>                            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L408'>                            <b>break</b>;
<a name='L409'>                        <font color='red'>}</font>
<a name='L410'>                        len = (<b>unsigned</b>)(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have - 1]);
<a name='L411'>                        copy = 3 + <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(2);
<a name='L412'>                        <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(2);
<a name='L413'>                    <font color='red'>}</font>
<a name='L414'>                    <b>else</b> <b>if</b> (here.val == 17) <font color='red'>{</font>
<a name='L415'>                        <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(here.bits + 3);
<a name='L416'>                        <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(here.bits);
<a name='L417'>                        len = 0;
<a name='L418'>                        copy = 3 + <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(3);
<a name='L419'>                        <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(3);
<a name='L420'>                    <font color='red'>}</font>
<a name='L421'>                    <b>else</b> <font color='red'>{</font>
<a name='L422'>                        <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(here.bits + 7);
<a name='L423'>                        <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(here.bits);
<a name='L424'>                        len = 0;
<a name='L425'>                        copy = 11 + <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(7);
<a name='L426'>                        <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(7);
<a name='L427'>                    <font color='red'>}</font>
<a name='L428'>                    <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have + copy &gt; <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;nlen + <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;ndist) <font color='red'>{</font>
<a name='L429'>                        strm-&gt;msg = (<b>char</b> *)"invalid bit length repeat";
<a name='L430'>                        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L431'>                        <b>break</b>;
<a name='L432'>                    <font color='red'>}</font>
<a name='L433'>                    <b>while</b> (copy--)
<a name='L434'>                        <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;have++] = (<b>unsigned</b> <b>short</b>)len;
<a name='L435'>                <font color='red'>}</font>
<a name='L436'>            <font color='red'>}</font>
<a name='L437'>
<a name='L438'>            <i><font color='green'>/* handle error breaks in while */</font></i>
<a name='L439'>            <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode == <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>) <b>break</b>;
<a name='L440'>
<a name='L441'>            <i><font color='green'>/* check for end-of-block code (better have one) */</font></i>
<a name='L442'>            <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens[256] == 0) <font color='red'>{</font>
<a name='L443'>                strm-&gt;msg = (<b>char</b> *)"invalid code -- missing end-of-block";
<a name='L444'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L445'>                <b>break</b>;
<a name='L446'>            <font color='red'>}</font>
<a name='L447'>
<a name='L448'>            <i><font color='green'>/* build code tables -- note: do not change the lenbits or distbits</font></i>
<a name='L449'><i><font color='green'>               values here (9 and 6) without reading the comments in inftrees.h</font></i>
<a name='L450'><i><font color='green'>               concerning the ENOUGH constants, which depend on those values */</font></i>
<a name='L451'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;next = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;codes;
<a name='L452'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lencode = (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> <b>const</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *)(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;next);
<a name='L453'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lenbits = 9;
<a name='L454'>            ret = <a href='../D/9180.html' title='Multiple defined in 2 places.'>inflate_table</a>(<a href='../S/2755.html#L56' title='Defined at 56 in Modules/zlib/inftrees.h.'>LENS</a>, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;nlen, &amp;(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;next),
<a name='L455'>                                &amp;(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lenbits), <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;work);
<a name='L456'>            <b>if</b> (ret) <font color='red'>{</font>
<a name='L457'>                strm-&gt;msg = (<b>char</b> *)"invalid literal/lengths set";
<a name='L458'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L459'>                <b>break</b>;
<a name='L460'>            <font color='red'>}</font>
<a name='L461'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;distcode = (<a href='../S/2755.html#L28' title='Defined at 28 in Modules/zlib/inftrees.h.'>code</a> <b>const</b> <a href='../D/1088.html' title='Multiple defined in 13 places.'>FAR</a> *)(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;next);
<a name='L462'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;distbits = 6;
<a name='L463'>            ret = <a href='../D/9180.html' title='Multiple defined in 2 places.'>inflate_table</a>(<a href='../S/2755.html#L57' title='Defined at 57 in Modules/zlib/inftrees.h.'>DISTS</a>, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lens + <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;nlen, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;ndist,
<a name='L464'>                            &amp;(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;next), &amp;(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;distbits), <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;work);
<a name='L465'>            <b>if</b> (ret) <font color='red'>{</font>
<a name='L466'>                strm-&gt;msg = (<b>char</b> *)"invalid distances set";
<a name='L467'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L468'>                <b>break</b>;
<a name='L469'>            <font color='red'>}</font>
<a name='L470'>            <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate:       codes ok\n"));
<a name='L471'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L41' title='Defined at 41 in Modules/zlib/inflate.h.'>LEN</a>;
<a name='L472'>
<a name='L473'>        <b>case</b> <a href='../S/2753.html#L41' title='Defined at 41 in Modules/zlib/inflate.h.'>LEN</a>:
<a name='L474'>            <i><font color='green'>/* use inflate_fast() if we have enough input and output */</font></i>
<a name='L475'>            <b>if</b> (have &gt;= 6 &amp;&amp; left &gt;= 258) <font color='red'>{</font>
<a name='L476'>                <a href='../D/4481.html' title='Multiple defined in 2 places.'>RESTORE</a>();
<a name='L477'>                <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;whave &lt; <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize)
<a name='L478'>                    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;whave = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize - left;
<a name='L479'>                <a href='../D/9177.html' title='Multiple defined in 2 places.'>inflate_fast</a>(strm, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize);
<a name='L480'>                <a href='../D/1933.html' title='Multiple defined in 2 places.'>LOAD</a>();
<a name='L481'>                <b>break</b>;
<a name='L482'>            <font color='red'>}</font>
<a name='L483'>
<a name='L484'>            <i><font color='green'>/* get a literal, length, or end-of-block code */</font></i>
<a name='L485'>            <b>for</b> (;;) <font color='red'>{</font>
<a name='L486'>                here = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lencode[<a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lenbits)];
<a name='L487'>                <b>if</b> ((<b>unsigned</b>)(here.bits) &lt;= bits) <b>break</b>;
<a name='L488'>                <a href='../D/2555.html' title='Multiple defined in 2 places.'>PULLBYTE</a>();
<a name='L489'>            <font color='red'>}</font>
<a name='L490'>            <b>if</b> (here.op &amp;&amp; (here.op &amp; 0xf0) == 0) <font color='red'>{</font>
<a name='L491'>                last = here;
<a name='L492'>                <b>for</b> (;;) <font color='red'>{</font>
<a name='L493'>                    here = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;lencode[last.val +
<a name='L494'>                            (<a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(last.bits + last.op) &gt;&gt; last.bits)];
<a name='L495'>                    <b>if</b> ((<b>unsigned</b>)(last.bits + here.bits) &lt;= bits) <b>break</b>;
<a name='L496'>                    <a href='../D/2555.html' title='Multiple defined in 2 places.'>PULLBYTE</a>();
<a name='L497'>                <font color='red'>}</font>
<a name='L498'>                <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(last.bits);
<a name='L499'>            <font color='red'>}</font>
<a name='L500'>            <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(here.bits);
<a name='L501'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length = (<b>unsigned</b>)here.val;
<a name='L502'>
<a name='L503'>            <i><font color='green'>/* process literal */</font></i>
<a name='L504'>            <b>if</b> (here.op == 0) <font color='red'>{</font>
<a name='L505'>                <a href='../D/5314.html' title='Multiple defined in 2 places.'>Tracevv</a>((stderr, here.val &gt;= 0x20 &amp;&amp; here.val &lt; 0x7f ?
<a name='L506'>                        "inflate:         literal '%c'\n" :
<a name='L507'>                        "inflate:         literal 0x%02x\n", here.val));
<a name='L508'>                <a href='../S/2748.html#L201' title='Defined at 201 in Modules/zlib/infback.c.'>ROOM</a>();
<a name='L509'>                *put++ = (<b>unsigned</b> <b>char</b>)(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length);
<a name='L510'>                left--;
<a name='L511'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L41' title='Defined at 41 in Modules/zlib/inflate.h.'>LEN</a>;
<a name='L512'>                <b>break</b>;
<a name='L513'>            <font color='red'>}</font>
<a name='L514'>
<a name='L515'>            <i><font color='green'>/* process end of block */</font></i>
<a name='L516'>            <b>if</b> (here.op &amp; 32) <font color='red'>{</font>
<a name='L517'>                <a href='../D/5314.html' title='Multiple defined in 2 places.'>Tracevv</a>((stderr, "inflate:         end of block\n"));
<a name='L518'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L32' title='Defined at 32 in Modules/zlib/inflate.h.'>TYPE</a>;
<a name='L519'>                <b>break</b>;
<a name='L520'>            <font color='red'>}</font>
<a name='L521'>
<a name='L522'>            <i><font color='green'>/* invalid code */</font></i>
<a name='L523'>            <b>if</b> (here.op &amp; 64) <font color='red'>{</font>
<a name='L524'>                strm-&gt;msg = (<b>char</b> *)"invalid literal/length code";
<a name='L525'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L526'>                <b>break</b>;
<a name='L527'>            <font color='red'>}</font>
<a name='L528'>
<a name='L529'>            <i><font color='green'>/* length code -- get extra bits, if any */</font></i>
<a name='L530'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra = (<b>unsigned</b>)(here.op) &amp; 15;
<a name='L531'>            <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra != 0) <font color='red'>{</font>
<a name='L532'>                <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra);
<a name='L533'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length += <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra);
<a name='L534'>                <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra);
<a name='L535'>            <font color='red'>}</font>
<a name='L536'>            <a href='../D/5314.html' title='Multiple defined in 2 places.'>Tracevv</a>((stderr, "inflate:         length %u\n", <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length));
<a name='L537'>
<a name='L538'>            <i><font color='green'>/* get distance code */</font></i>
<a name='L539'>            <b>for</b> (;;) <font color='red'>{</font>
<a name='L540'>                here = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;distcode[<a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;distbits)];
<a name='L541'>                <b>if</b> ((<b>unsigned</b>)(here.bits) &lt;= bits) <b>break</b>;
<a name='L542'>                <a href='../D/2555.html' title='Multiple defined in 2 places.'>PULLBYTE</a>();
<a name='L543'>            <font color='red'>}</font>
<a name='L544'>            <b>if</b> ((here.op &amp; 0xf0) == 0) <font color='red'>{</font>
<a name='L545'>                last = here;
<a name='L546'>                <b>for</b> (;;) <font color='red'>{</font>
<a name='L547'>                    here = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;distcode[last.val +
<a name='L548'>                            (<a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(last.bits + last.op) &gt;&gt; last.bits)];
<a name='L549'>                    <b>if</b> ((<b>unsigned</b>)(last.bits + here.bits) &lt;= bits) <b>break</b>;
<a name='L550'>                    <a href='../D/2555.html' title='Multiple defined in 2 places.'>PULLBYTE</a>();
<a name='L551'>                <font color='red'>}</font>
<a name='L552'>                <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(last.bits);
<a name='L553'>            <font color='red'>}</font>
<a name='L554'>            <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(here.bits);
<a name='L555'>            <b>if</b> (here.op &amp; 64) <font color='red'>{</font>
<a name='L556'>                strm-&gt;msg = (<b>char</b> *)"invalid distance code";
<a name='L557'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L558'>                <b>break</b>;
<a name='L559'>            <font color='red'>}</font>
<a name='L560'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;offset = (<b>unsigned</b>)here.val;
<a name='L561'>
<a name='L562'>            <i><font color='green'>/* get distance extra bits, if any */</font></i>
<a name='L563'>            <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra = (<b>unsigned</b>)(here.op) &amp; 15;
<a name='L564'>            <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra != 0) <font color='red'>{</font>
<a name='L565'>                <a href='../D/2269.html' title='Multiple defined in 2 places.'>NEEDBITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra);
<a name='L566'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;offset += <a href='../D/289.html' title='Multiple defined in 2 places.'>BITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra);
<a name='L567'>                <a href='../D/827.html' title='Multiple defined in 2 places.'>DROPBITS</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;extra);
<a name='L568'>            <font color='red'>}</font>
<a name='L569'>            <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;offset &gt; <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize - (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;whave &lt; <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize ?
<a name='L570'>                                                left : 0)) <font color='red'>{</font>
<a name='L571'>                strm-&gt;msg = (<b>char</b> *)"invalid distance too far back";
<a name='L572'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;mode = <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>;
<a name='L573'>                <b>break</b>;
<a name='L574'>            <font color='red'>}</font>
<a name='L575'>            <a href='../D/5314.html' title='Multiple defined in 2 places.'>Tracevv</a>((stderr, "inflate:         distance %u\n", <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;offset));
<a name='L576'>
<a name='L577'>            <i><font color='green'>/* copy match from window to output */</font></i>
<a name='L578'>            <b>do</b> <font color='red'>{</font>
<a name='L579'>                <a href='../S/2748.html#L201' title='Defined at 201 in Modules/zlib/infback.c.'>ROOM</a>();
<a name='L580'>                copy = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize - <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;offset;
<a name='L581'>                <b>if</b> (copy &lt; left) <font color='red'>{</font>
<a name='L582'>                    from = put + copy;
<a name='L583'>                    copy = left - copy;
<a name='L584'>                <font color='red'>}</font>
<a name='L585'>                <b>else</b> <font color='red'>{</font>
<a name='L586'>                    from = put - <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;offset;
<a name='L587'>                    copy = left;
<a name='L588'>                <font color='red'>}</font>
<a name='L589'>                <b>if</b> (copy &gt; <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length) copy = <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length;
<a name='L590'>                <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length -= copy;
<a name='L591'>                left -= copy;
<a name='L592'>                <b>do</b> <font color='red'>{</font>
<a name='L593'>                    *put++ = *from++;
<a name='L594'>                <font color='red'>}</font> <b>while</b> (--copy);
<a name='L595'>            <font color='red'>}</font> <b>while</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;length != 0);
<a name='L596'>            <b>break</b>;
<a name='L597'>
<a name='L598'>        <b>case</b> <a href='../D/809.html' title='Multiple defined in 2 places.'>DONE</a>:
<a name='L599'>            <i><font color='green'>/* inflate stream terminated properly -- write leftover output */</font></i>
<a name='L600'>            ret = <a href='../S/2769.html#L174' title='Defined at 174 in Modules/zlib/zlib.h.'>Z_STREAM_END</a>;
<a name='L601'>            <b>if</b> (left &lt; <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize) <font color='red'>{</font>
<a name='L602'>                <b>if</b> (out(out_desc, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;window, <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>-&gt;wsize - left))
<a name='L603'>                    ret = <a href='../S/2769.html#L180' title='Defined at 180 in Modules/zlib/zlib.h.'>Z_BUF_ERROR</a>;
<a name='L604'>            <font color='red'>}</font>
<a name='L605'>            <b>goto</b> inf_leave;
<a name='L606'>
<a name='L607'>        <b>case</b> <a href='../S/2753.html#L50' title='Defined at 50 in Modules/zlib/inflate.h.'>BAD</a>:
<a name='L608'>            ret = <a href='../S/2769.html#L178' title='Defined at 178 in Modules/zlib/zlib.h.'>Z_DATA_ERROR</a>;
<a name='L609'>            <b>goto</b> inf_leave;
<a name='L610'>
<a name='L611'>        <b>default</b>:                <i><font color='green'>/* can't happen, but makes compilers happy */</font></i>
<a name='L612'>            ret = <a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>;
<a name='L613'>            <b>goto</b> inf_leave;
<a name='L614'>        <font color='red'>}</font>
<a name='L615'>
<a name='L616'>    <i><font color='green'>/* Return unused input */</font></i>
<a name='L617'>  inf_leave:
<a name='L618'>    strm-&gt;next_in = next;
<a name='L619'>    strm-&gt;avail_in = have;
<a name='L620'>    <b>return</b> ret;
<a name='L621'><font color='red'>}</font>
<a name='L622'>
<a name='L623'><b>int</b> <a href='../D/5922.html' title='Multiple defined in 8 places.'>ZEXPORT</a> <a href='../S/2769.html#L1042' title='Refered from 1042 in Modules/zlib/zlib.h.'>inflateBackEnd</a>(strm)
<a name='L624'>z_streamp strm;
<a name='L625'><font color='red'>{</font>
<a name='L626'>    <b>if</b> (strm == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a> || strm-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a> || strm-&gt;zfree == (<a href='../D/8725.html' title='Multiple defined in 2 places.'>free_func</a>)0)
<a name='L627'>        <b>return</b> <a href='../S/2769.html#L177' title='Defined at 177 in Modules/zlib/zlib.h.'>Z_STREAM_ERROR</a>;
<a name='L628'>    <a href='../S/2773.html#L271' title='Defined at 271 in Modules/zlib/zutil.h.'>ZFREE</a>(strm, strm-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L629'>    strm-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = <a href='../S/2769.html#L208' title='Defined at 208 in Modules/zlib/zlib.h.'>Z_NULL</a>;
<a name='L630'>    <a href='../D/5313.html' title='Multiple defined in 2 places.'>Tracev</a>((stderr, "inflate: end\n"));
<a name='L631'>    <b>return</b> <a href='../S/2769.html#L173' title='Defined at 173 in Modules/zlib/zlib.h.'>Z_OK</a>;
<a name='L632'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L28'>[^]</a><a href='#L623'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
