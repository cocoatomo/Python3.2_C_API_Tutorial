<html>
<head>
<title>Modules/_randommodule.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/_randommodule.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L95'>[^]</a><a href='#L513'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L95' title='Defined at 95.'>genrand_int32</a>
<li><a href='#L138' title='Defined at 138.'>random_random</a>
<li><a href='#L146' title='Defined at 146.'>init_genrand</a>
<li><a href='#L171' title='Defined at 171.'>init_by_array</a>
<li><a href='#L207' title='Defined at 207.'>random_seed</a>
<li><a href='#L312' title='Defined at 312.'>random_getstate</a>
<li><a href='#L339' title='Defined at 339.'>random_setstate</a>
<li><a href='#L373' title='Defined at 373.'>random_getrandbits</a>
<li><a href='#L414' title='Defined at 414.'>random_new</a>
<li><a href='#L513' title='Defined at 513.'>PyInit__random</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* Random objects */</font></i>
<a name='L2'>
<a name='L3'><i><font color='green'>/* ------------------------------------------------------------------</font></i>
<a name='L4'><i><font color='green'>   The code in this module was based on a download from:</font></i>
<a name='L5'><i><font color='green'>      http://www.math.keio.ac.jp/~matumoto/MT2002/emt19937ar.html</font></i>
<a name='L6'><i><font color='green'></font></i>
<a name='L7'><i><font color='green'>   It was modified in 2002 by Raymond Hettinger as follows:</font></i>
<a name='L8'><i><font color='green'></font></i>
<a name='L9'><i><font color='green'>    * the principal computational lines untouched.</font></i>
<a name='L10'><i><font color='green'></font></i>
<a name='L11'><i><font color='green'>    * renamed genrand_res53() to random_random() and wrapped</font></i>
<a name='L12'><i><font color='green'>      in python calling/return code.</font></i>
<a name='L13'><i><font color='green'></font></i>
<a name='L14'><i><font color='green'>    * genrand_int32() and the helper functions, init_genrand()</font></i>
<a name='L15'><i><font color='green'>      and init_by_array(), were declared static, wrapped in</font></i>
<a name='L16'><i><font color='green'>      Python calling/return code.  also, their global data</font></i>
<a name='L17'><i><font color='green'>      references were replaced with structure references.</font></i>
<a name='L18'><i><font color='green'></font></i>
<a name='L19'><i><font color='green'>    * unused functions from the original were deleted.</font></i>
<a name='L20'><i><font color='green'>      new, original C python code was added to implement the</font></i>
<a name='L21'><i><font color='green'>      Random() interface.</font></i>
<a name='L22'><i><font color='green'></font></i>
<a name='L23'><i><font color='green'>   The following are the verbatim comments from the original code:</font></i>
<a name='L24'><i><font color='green'></font></i>
<a name='L25'><i><font color='green'>   A C-program for MT19937, with initialization improved 2002/1/26.</font></i>
<a name='L26'><i><font color='green'>   Coded by Takuji Nishimura and Makoto Matsumoto.</font></i>
<a name='L27'><i><font color='green'></font></i>
<a name='L28'><i><font color='green'>   Before using, initialize the state by using init_genrand(seed)</font></i>
<a name='L29'><i><font color='green'>   or init_by_array(init_key, key_length).</font></i>
<a name='L30'><i><font color='green'></font></i>
<a name='L31'><i><font color='green'>   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,</font></i>
<a name='L32'><i><font color='green'>   All rights reserved.</font></i>
<a name='L33'><i><font color='green'></font></i>
<a name='L34'><i><font color='green'>   Redistribution and use in source and binary forms, with or without</font></i>
<a name='L35'><i><font color='green'>   modification, are permitted provided that the following conditions</font></i>
<a name='L36'><i><font color='green'>   are met:</font></i>
<a name='L37'><i><font color='green'></font></i>
<a name='L38'><i><font color='green'>     1. Redistributions of source code must retain the above copyright</font></i>
<a name='L39'><i><font color='green'>    notice, this list of conditions and the following disclaimer.</font></i>
<a name='L40'><i><font color='green'></font></i>
<a name='L41'><i><font color='green'>     2. Redistributions in binary form must reproduce the above copyright</font></i>
<a name='L42'><i><font color='green'>    notice, this list of conditions and the following disclaimer in the</font></i>
<a name='L43'><i><font color='green'>    documentation and/or other materials provided with the distribution.</font></i>
<a name='L44'><i><font color='green'></font></i>
<a name='L45'><i><font color='green'>     3. The names of its contributors may not be used to endorse or promote</font></i>
<a name='L46'><i><font color='green'>    products derived from this software without specific prior written</font></i>
<a name='L47'><i><font color='green'>    permission.</font></i>
<a name='L48'><i><font color='green'></font></i>
<a name='L49'><i><font color='green'>   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</font></i>
<a name='L50'><i><font color='green'>   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</font></i>
<a name='L51'><i><font color='green'>   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</font></i>
<a name='L52'><i><font color='green'>   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR</font></i>
<a name='L53'><i><font color='green'>   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</font></i>
<a name='L54'><i><font color='green'>   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</font></i>
<a name='L55'><i><font color='green'>   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR</font></i>
<a name='L56'><i><font color='green'>   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF</font></i>
<a name='L57'><i><font color='green'>   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</font></i>
<a name='L58'><i><font color='green'>   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</font></i>
<a name='L59'><i><font color='green'>   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</font></i>
<a name='L60'><i><font color='green'></font></i>
<a name='L61'><i><font color='green'></font></i>
<a name='L62'><i><font color='green'>   Any feedback is very welcome.</font></i>
<a name='L63'><i><font color='green'>   http://www.math.keio.ac.jp/matumoto/emt.html</font></i>
<a name='L64'><i><font color='green'>   email: matumoto@math.keio.ac.jp</font></i>
<a name='L65'><i><font color='green'>*/</font></i>
<a name='L66'>
<a name='L67'><i><font color='green'>/* ---------------------------------------------------------------*/</font></i>
<a name='L68'>
<a name='L69'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L70'><font color='darkred'>#include</font> &lt;time.h&gt;               <i><font color='green'>/* for seeding to current time */</font></i>
<a name='L71'>
<a name='L72'><i><font color='green'>/* Period parameters -- These are all magic.  Don't change. */</font></i>
<a name='L73'><font color='darkred'>#define</font> <a href='../R/2045.html' title='Multiple refered from 6557 places.'>N</a> 624
<a name='L74'><font color='darkred'>#define</font> <a href='../R/1803.html' title='Multiple refered from 100 places.'>M</a> 397
<a name='L75'><font color='darkred'>#define</font> <a href='../S/2590.html#L98' title='Refered from 98 in Modules/_randommodule.c.'>MATRIX_A</a> 0x9908b0dfUL   <i><font color='green'>/* constant vector a */</font></i>
<a name='L76'><font color='darkred'>#define</font> <a href='../R/4757.html' title='Multiple refered from 4 places.'>UPPER_MASK</a> 0x80000000UL <i><font color='green'>/* most significant w-r bits */</font></i>
<a name='L77'><font color='darkred'>#define</font> <a href='../R/1773.html' title='Multiple refered from 4 places.'>LOWER_MASK</a> 0x7fffffffUL <i><font color='green'>/* least significant r bits */</font></i>
<a name='L78'>
<a name='L79'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L80'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L81'>    <b>unsigned</b> <b>long</b> <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>[<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>];
<a name='L82'>    <b>int</b> index;
<a name='L83'><font color='red'>}</font> <a href='../R/3998.html' title='Multiple refered from 3 places.'>RandomObject</a>;
<a name='L84'>
<a name='L85'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Random_Type;
<a name='L86'>
<a name='L87'><font color='darkred'>#define</font> RandomObject_Check(v)      (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(v) == &amp;Random_Type)
<a name='L88'>
<a name='L89'>
<a name='L90'><i><font color='green'>/* Random methods */</font></i>
<a name='L91'>
<a name='L92'>
<a name='L93'><i><font color='green'>/* generates a random number on [0,0xffffffff]-interval */</font></i>
<a name='L94'><b>static</b> <b>unsigned</b> <b>long</b>
<a name='L95'><a href='../R/8016.html' title='Multiple refered from 2 places.'>genrand_int32</a>(RandomObject *self)
<a name='L96'><font color='red'>{</font>
<a name='L97'>    <b>unsigned</b> <b>long</b> y;
<a name='L98'>    <b>static</b> <b>unsigned</b> <b>long</b> mag01[2]=<font color='red'>{</font>0x0UL, <a href='../S/2590.html#L75' title='Defined at 75 in Modules/_randommodule.c.'>MATRIX_A</a><font color='red'>}</font>;
<a name='L99'>    <i><font color='green'>/* mag01[x] = x * MATRIX_A  for x=0,1 */</font></i>
<a name='L100'>    <b>unsigned</b> <b>long</b> *mt;
<a name='L101'>
<a name='L102'>    mt = self-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L103'>    <b>if</b> (self-&gt;index &gt;= <a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>) <font color='red'>{</font> <i><font color='green'>/* generate N words at one time */</font></i>
<a name='L104'>        <b>int</b> kk;
<a name='L105'>
<a name='L106'>        <b>for</b> (kk=0;kk&lt;<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>-<a href='../D/2001.html' title='Multiple defined in 2 places.'>M</a>;kk++) <font color='red'>{</font>
<a name='L107'>            y = (mt[kk]&amp;<a href='../D/5378.html' title='Multiple defined in 2 places.'>UPPER_MASK</a>)|(mt[kk+1]&amp;<a href='../D/1970.html' title='Multiple defined in 2 places.'>LOWER_MASK</a>);
<a name='L108'>            mt[kk] = mt[kk+<a href='../D/2001.html' title='Multiple defined in 2 places.'>M</a>] ^ (y &gt;&gt; 1) ^ mag01[y &amp; 0x1UL];
<a name='L109'>        <font color='red'>}</font>
<a name='L110'>        <b>for</b> (;kk&lt;<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>-1;kk++) <font color='red'>{</font>
<a name='L111'>            y = (mt[kk]&amp;<a href='../D/5378.html' title='Multiple defined in 2 places.'>UPPER_MASK</a>)|(mt[kk+1]&amp;<a href='../D/1970.html' title='Multiple defined in 2 places.'>LOWER_MASK</a>);
<a name='L112'>            mt[kk] = mt[kk+(<a href='../D/2001.html' title='Multiple defined in 2 places.'>M</a>-<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>)] ^ (y &gt;&gt; 1) ^ mag01[y &amp; 0x1UL];
<a name='L113'>        <font color='red'>}</font>
<a name='L114'>        y = (mt[<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>-1]&amp;<a href='../D/5378.html' title='Multiple defined in 2 places.'>UPPER_MASK</a>)|(mt[0]&amp;<a href='../D/1970.html' title='Multiple defined in 2 places.'>LOWER_MASK</a>);
<a name='L115'>        mt[<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>-1] = mt[<a href='../D/2001.html' title='Multiple defined in 2 places.'>M</a>-1] ^ (y &gt;&gt; 1) ^ mag01[y &amp; 0x1UL];
<a name='L116'>
<a name='L117'>        self-&gt;index = 0;
<a name='L118'>    <font color='red'>}</font>
<a name='L119'>
<a name='L120'>    y = mt[self-&gt;index++];
<a name='L121'>    y ^= (y &gt;&gt; 11);
<a name='L122'>    y ^= (y &lt;&lt; 7) &amp; 0x9d2c5680UL;
<a name='L123'>    y ^= (y &lt;&lt; 15) &amp; 0xefc60000UL;
<a name='L124'>    y ^= (y &gt;&gt; 18);
<a name='L125'>    <b>return</b> y;
<a name='L126'><font color='red'>}</font>
<a name='L127'>
<a name='L128'><i><font color='green'>/* random_random is the function named genrand_res53 in the original code;</font></i>
<a name='L129'><i><font color='green'> * generates a random number on [0,1) with 53-bit resolution; note that</font></i>
<a name='L130'><i><font color='green'> * 9007199254740992 == 2**53; I assume they're spelling "/2**53" as</font></i>
<a name='L131'><i><font color='green'> * multiply-by-reciprocal in the (likely vain) hope that the compiler will</font></i>
<a name='L132'><i><font color='green'> * optimize the division away at compile-time.  67108864 is 2**26.  In</font></i>
<a name='L133'><i><font color='green'> * effect, a contains 27 random bits shifted left 26, and b fills in the</font></i>
<a name='L134'><i><font color='green'> * lower 26 bits of the 53-bit numerator.</font></i>
<a name='L135'><i><font color='green'> * The orginal code credited Isaku Wada for this algorithm, 2002/01/09.</font></i>
<a name='L136'><i><font color='green'> */</font></i>
<a name='L137'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L138'><a href='../S/2590.html#L435' title='Refered from 435 in Modules/_randommodule.c.'>random_random</a>(RandomObject *self)
<a name='L139'><font color='red'>{</font>
<a name='L140'>    <b>unsigned</b> <b>long</b> a=<a href='../S/2590.html#L95' title='Defined at 95 in Modules/_randommodule.c.'>genrand_int32</a>(self)&gt;&gt;5, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>=<a href='../S/2590.html#L95' title='Defined at 95 in Modules/_randommodule.c.'>genrand_int32</a>(self)&gt;&gt;6;
<a name='L141'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>((a*67108864.0+<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>)*(1.0/9007199254740992.0));
<a name='L142'><font color='red'>}</font>
<a name='L143'>
<a name='L144'><i><font color='green'>/* initializes mt[N] with a seed */</font></i>
<a name='L145'><b>static</b> <b>void</b>
<a name='L146'><a href='../R/8384.html' title='Multiple refered from 2 places.'>init_genrand</a>(RandomObject *self, <b>unsigned</b> <b>long</b> s)
<a name='L147'><font color='red'>{</font>
<a name='L148'>    <b>int</b> mti;
<a name='L149'>    <b>unsigned</b> <b>long</b> *mt;
<a name='L150'>
<a name='L151'>    mt = self-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L152'>    mt[0]= s &amp; 0xffffffffUL;
<a name='L153'>    <b>for</b> (mti=1; mti&lt;<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>; mti++) <font color='red'>{</font>
<a name='L154'>        mt[mti] =
<a name='L155'>        (1812433253UL * (mt[mti-1] ^ (mt[mti-1] &gt;&gt; 30)) + mti);
<a name='L156'>        <i><font color='green'>/* See Knuth TAOCP Vol2. 3rd Ed. P.106 for multiplier. */</font></i>
<a name='L157'>        <i><font color='green'>/* In the previous versions, MSBs of the seed affect   */</font></i>
<a name='L158'>        <i><font color='green'>/* only MSBs of the array mt[].                                */</font></i>
<a name='L159'>        <i><font color='green'>/* 2002/01/09 modified by Makoto Matsumoto                     */</font></i>
<a name='L160'>        mt[mti] &amp;= 0xffffffffUL;
<a name='L161'>        <i><font color='green'>/* for &gt;32 bit machines */</font></i>
<a name='L162'>    <font color='red'>}</font>
<a name='L163'>    self-&gt;index = mti;
<a name='L164'>    <b>return</b>;
<a name='L165'><font color='red'>}</font>
<a name='L166'>
<a name='L167'><i><font color='green'>/* initialize by an array with array-length */</font></i>
<a name='L168'><i><font color='green'>/* init_key is the array for initializing keys */</font></i>
<a name='L169'><i><font color='green'>/* key_length is its length */</font></i>
<a name='L170'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L171'><a href='../S/2590.html#L302' title='Refered from 302 in Modules/_randommodule.c.'>init_by_array</a>(RandomObject *self, <b>unsigned</b> <b>long</b> init_key[], <b>unsigned</b> <b>long</b> key_length)
<a name='L172'><font color='red'>{</font>
<a name='L173'>    <b>unsigned</b> <b>int</b> i, j, k;       <i><font color='green'>/* was signed in the original code. RDH 12/16/2002 */</font></i>
<a name='L174'>    <b>unsigned</b> <b>long</b> *mt;
<a name='L175'>
<a name='L176'>    mt = self-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L177'>    <a href='../S/2590.html#L146' title='Defined at 146 in Modules/_randommodule.c.'>init_genrand</a>(self, 19650218UL);
<a name='L178'>    i=1; j=0;
<a name='L179'>    k = (<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>&gt;key_length ? <a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a> : key_length);
<a name='L180'>    <b>for</b> (; k; k--) <font color='red'>{</font>
<a name='L181'>        mt[i] = (mt[i] ^ ((mt[i-1] ^ (mt[i-1] &gt;&gt; 30)) * 1664525UL))
<a name='L182'>                 + init_key[j] + j; <i><font color='green'>/* non linear */</font></i>
<a name='L183'>        mt[i] &amp;= 0xffffffffUL; <i><font color='green'>/* for WORDSIZE &gt; 32 machines */</font></i>
<a name='L184'>        i++; j++;
<a name='L185'>        <b>if</b> (i&gt;=<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>) <font color='red'>{</font> mt[0] = mt[<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>-1]; i=1; <font color='red'>}</font>
<a name='L186'>        <b>if</b> (j&gt;=key_length) j=0;
<a name='L187'>    <font color='red'>}</font>
<a name='L188'>    <b>for</b> (k=<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>-1; k; k--) <font color='red'>{</font>
<a name='L189'>        mt[i] = (mt[i] ^ ((mt[i-1] ^ (mt[i-1] &gt;&gt; 30)) * 1566083941UL))
<a name='L190'>                 - i; <i><font color='green'>/* non linear */</font></i>
<a name='L191'>        mt[i] &amp;= 0xffffffffUL; <i><font color='green'>/* for WORDSIZE &gt; 32 machines */</font></i>
<a name='L192'>        i++;
<a name='L193'>        <b>if</b> (i&gt;=<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>) <font color='red'>{</font> mt[0] = mt[<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>-1]; i=1; <font color='red'>}</font>
<a name='L194'>    <font color='red'>}</font>
<a name='L195'>
<a name='L196'>    mt[0] = 0x80000000UL; <i><font color='green'>/* MSB is 1; assuring non-zero initial array */</font></i>
<a name='L197'>    Py_INCREF(Py_None);
<a name='L198'>    <b>return</b> Py_None;
<a name='L199'><font color='red'>}</font>
<a name='L200'>
<a name='L201'><i><font color='green'>/*</font></i>
<a name='L202'><i><font color='green'> * The rest is Python-specific code, neither part of, nor derived from, the</font></i>
<a name='L203'><i><font color='green'> * Twister download.</font></i>
<a name='L204'><i><font color='green'> */</font></i>
<a name='L205'>
<a name='L206'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L207'><a href='../R/9942.html' title='Multiple refered from 2 places.'>random_seed</a>(RandomObject *self, PyObject *args)
<a name='L208'><font color='red'>{</font>
<a name='L209'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;            <i><font color='green'>/* guilty until proved innocent */</font></i>
<a name='L210'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *masklower = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L211'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *thirtytwo = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L212'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *n = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L213'>    <b>unsigned</b> <b>long</b> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L214'>    <b>unsigned</b> <b>long</b> keymax;               <i><font color='green'>/* # of allocated slots in key */</font></i>
<a name='L215'>    <b>unsigned</b> <b>long</b> keyused;              <i><font color='green'>/* # of used slots in key */</font></i>
<a name='L216'>    <b>int</b> err;
<a name='L217'>
<a name='L218'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L219'>
<a name='L220'>    <b>if</b> (!<a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "seed", 0, 1, &amp;<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L221'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L222'>
<a name='L223'>    <b>if</b> (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None) <font color='red'>{</font>
<a name='L224'>        time_t now;
<a name='L225'>
<a name='L226'>        time(&amp;now);
<a name='L227'>        <a href='../S/2590.html#L146' title='Defined at 146 in Modules/_randommodule.c.'>init_genrand</a>(self, (<b>unsigned</b> <b>long</b>)now);
<a name='L228'>        Py_INCREF(Py_None);
<a name='L229'>        <b>return</b> Py_None;
<a name='L230'>    <font color='red'>}</font>
<a name='L231'>    <i><font color='green'>/* If the arg is an int or long, use its absolute value; else use</font></i>
<a name='L232'><i><font color='green'>     * the absolute value of its hash code.</font></i>
<a name='L233'><i><font color='green'>     */</font></i>
<a name='L234'>    <b>if</b> (PyLong_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L235'>        n = <a href='../S/2775.html#L1178' title='Defined at 1178 in Objects/abstract.c.'>PyNumber_Absolute</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L236'>    <b>else</b> <font color='red'>{</font>
<a name='L237'>        <b>long</b> <a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> = <a href='../S/2803.html#L758' title='Defined at 758 in Objects/object.c.'>PyObject_Hash</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L238'>        <b>if</b> (<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a> == -1)
<a name='L239'>            <b>goto</b> Done;
<a name='L240'>        n = <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>((<b>unsigned</b> <b>long</b>)<a href='../S/2664.html#L5830' title='Defined at 5830 in Modules/expat/xmlparse.c.'>hash</a>);
<a name='L241'>    <font color='red'>}</font>
<a name='L242'>    <b>if</b> (n == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L243'>        <b>goto</b> Done;
<a name='L244'>
<a name='L245'>    <i><font color='green'>/* Now split n into 32-bit chunks, from the right.  Each piece is</font></i>
<a name='L246'><i><font color='green'>     * stored into key, which has a capacity of keymax chunks, of which</font></i>
<a name='L247'><i><font color='green'>     * keyused are filled.  Alas, the repeated shifting makes this a</font></i>
<a name='L248'><i><font color='green'>     * quadratic-time algorithm; we'd really like to use</font></i>
<a name='L249'><i><font color='green'>     * _PyLong_AsByteArray here, but then we'd have to break into the</font></i>
<a name='L250'><i><font color='green'>     * long representation to figure out how big an array was needed</font></i>
<a name='L251'><i><font color='green'>     * in advance.</font></i>
<a name='L252'><i><font color='green'>     */</font></i>
<a name='L253'>    keymax = 8;         <i><font color='green'>/* arbitrary; grows later if needed */</font></i>
<a name='L254'>    keyused = 0;
<a name='L255'>    <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = (<b>unsigned</b> <b>long</b> *)<a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>(keymax * <b>sizeof</b>(*<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>));
<a name='L256'>    <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L257'>        <b>goto</b> Done;
<a name='L258'>
<a name='L259'>    masklower = <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(0xffffffffU);
<a name='L260'>    <b>if</b> (masklower == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L261'>        <b>goto</b> Done;
<a name='L262'>    thirtytwo = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(32L);
<a name='L263'>    <b>if</b> (thirtytwo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L264'>        <b>goto</b> Done;
<a name='L265'>    <b>while</b> ((err=<a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(n))) <font color='red'>{</font>
<a name='L266'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *newn;
<a name='L267'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pychunk;
<a name='L268'>        <b>unsigned</b> <b>long</b> chunk;
<a name='L269'>
<a name='L270'>        <b>if</b> (err == -1)
<a name='L271'>            <b>goto</b> Done;
<a name='L272'>        pychunk = PyNumber_And(n, masklower);
<a name='L273'>        <b>if</b> (pychunk == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L274'>            <b>goto</b> Done;
<a name='L275'>        chunk = <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>(pychunk);
<a name='L276'>        Py_DECREF(pychunk);
<a name='L277'>        <b>if</b> (chunk == (<b>unsigned</b> <b>long</b>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L278'>            <b>goto</b> Done;
<a name='L279'>        newn = PyNumber_Rshift(n, thirtytwo);
<a name='L280'>        <b>if</b> (newn == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L281'>            <b>goto</b> Done;
<a name='L282'>        Py_DECREF(n);
<a name='L283'>        n = newn;
<a name='L284'>        <b>if</b> (keyused &gt;= keymax) <font color='red'>{</font>
<a name='L285'>            <b>unsigned</b> <b>long</b> bigger = keymax &lt;&lt; 1;
<a name='L286'>            <b>if</b> ((bigger &gt;&gt; 1) != keymax) <font color='red'>{</font>
<a name='L287'>                <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L288'>                <b>goto</b> Done;
<a name='L289'>            <font color='red'>}</font>
<a name='L290'>            <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = (<b>unsigned</b> <b>long</b> *)<a href='../S/2803.html#L1775' title='Defined at 1775 in Objects/object.c.'>PyMem_Realloc</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>,
<a name='L291'>                                    bigger * <b>sizeof</b>(*<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>));
<a name='L292'>            <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L293'>                <b>goto</b> Done;
<a name='L294'>            keymax = bigger;
<a name='L295'>        <font color='red'>}</font>
<a name='L296'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(keyused &lt; keymax);
<a name='L297'>        <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>[keyused++] = chunk;
<a name='L298'>    <font color='red'>}</font>
<a name='L299'>
<a name='L300'>    <b>if</b> (keyused == 0)
<a name='L301'>        <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>[keyused++] = 0UL;
<a name='L302'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2590.html#L171' title='Defined at 171 in Modules/_randommodule.c.'>init_by_array</a>(self, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, keyused);
<a name='L303'>Done:
<a name='L304'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(masklower);
<a name='L305'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(thirtytwo);
<a name='L306'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(n);
<a name='L307'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L308'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L309'><font color='red'>}</font>
<a name='L310'>
<a name='L311'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L312'><a href='../S/2590.html#L439' title='Refered from 439 in Modules/_randommodule.c.'>random_getstate</a>(RandomObject *self)
<a name='L313'><font color='red'>{</font>
<a name='L314'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L315'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a>;
<a name='L316'>    <b>int</b> i;
<a name='L317'>
<a name='L318'>    <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>+1);
<a name='L319'>    <b>if</b> (<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L320'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L321'>    <b>for</b> (i=0; i&lt;<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a> ; i++) <font color='red'>{</font>
<a name='L322'>        <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> = <a href='../S/2799.html#L245' title='Defined at 245 in Objects/longobject.c.'>PyLong_FromUnsignedLong</a>(self-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>[i]);
<a name='L323'>        <b>if</b> (<a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L324'>            <b>goto</b> Fail;
<a name='L325'>        PyTuple_SET_ITEM(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, i, <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a>);
<a name='L326'>    <font color='red'>}</font>
<a name='L327'>    <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)(self-&gt;index));
<a name='L328'>    <b>if</b> (<a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L329'>        <b>goto</b> Fail;
<a name='L330'>    PyTuple_SET_ITEM(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, i, <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a>);
<a name='L331'>    <b>return</b> <a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>;
<a name='L332'>
<a name='L333'>Fail:
<a name='L334'>    Py_DECREF(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>);
<a name='L335'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L336'><font color='red'>}</font>
<a name='L337'>
<a name='L338'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L339'><a href='../S/2590.html#L441' title='Refered from 441 in Modules/_randommodule.c.'>random_setstate</a>(RandomObject *self, PyObject *state)
<a name='L340'><font color='red'>{</font>
<a name='L341'>    <b>int</b> i;
<a name='L342'>    <b>unsigned</b> <b>long</b> <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a>;
<a name='L343'>    <b>long</b> index;
<a name='L344'>
<a name='L345'>    <b>if</b> (!PyTuple_Check(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>)) <font color='red'>{</font>
<a name='L346'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L347'>            "state vector must be a tuple");
<a name='L348'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L349'>    <font color='red'>}</font>
<a name='L350'>    <b>if</b> (<a href='../S/2823.html#L112' title='Defined at 112 in Objects/tupleobject.c.'>PyTuple_Size</a>(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>) != <a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a>+1) <font color='red'>{</font>
<a name='L351'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L352'>            "state vector is the wrong size");
<a name='L353'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L354'>    <font color='red'>}</font>
<a name='L355'>
<a name='L356'>    <b>for</b> (i=0; i&lt;<a href='../D/2250.html' title='Multiple defined in 3 places.'>N</a> ; i++) <font color='red'>{</font>
<a name='L357'>        <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> = <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>(PyTuple_GET_ITEM(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, i));
<a name='L358'>        <b>if</b> (<a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> == (<b>unsigned</b> <b>long</b>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L359'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L360'>        self-&gt;<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>[i] = <a href='../S/2562.html#L467' title='Defined at 467 in Modules/_elementtree.c.'>element</a> &amp; 0xffffffffUL; <i><font color='green'>/* Make sure we get sane state */</font></i>
<a name='L361'>    <font color='red'>}</font>
<a name='L362'>
<a name='L363'>    index = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(PyTuple_GET_ITEM(<a href='../S/530.html#L46' title='Defined at 46 in Include/grammar.h.'>state</a>, i));
<a name='L364'>    <b>if</b> (index == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L365'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L366'>    self-&gt;index = (<b>int</b>)index;
<a name='L367'>
<a name='L368'>    Py_INCREF(Py_None);
<a name='L369'>    <b>return</b> Py_None;
<a name='L370'><font color='red'>}</font>
<a name='L371'>
<a name='L372'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L373'><a href='../S/2590.html#L443' title='Refered from 443 in Modules/_randommodule.c.'>random_getrandbits</a>(RandomObject *self, PyObject *args)
<a name='L374'><font color='red'>{</font>
<a name='L375'>    <b>int</b> k, i, <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L376'>    <b>unsigned</b> <b>long</b> r;
<a name='L377'>    <b>unsigned</b> <b>char</b> *bytearray;
<a name='L378'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L379'>
<a name='L380'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "i:getrandbits", &amp;k))
<a name='L381'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L382'>
<a name='L383'>    <b>if</b> (k &lt;= 0) <font color='red'>{</font>
<a name='L384'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L385'>                        "number of bits must be greater than zero");
<a name='L386'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L387'>    <font color='red'>}</font>
<a name='L388'>
<a name='L389'>    <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = ((k - 1) / 32 + 1) * 4;
<a name='L390'>    bytearray = (<b>unsigned</b> <b>char</b> *)<a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L391'>    <b>if</b> (bytearray == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L392'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L393'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L394'>    <font color='red'>}</font>
<a name='L395'>
<a name='L396'>    <i><font color='green'>/* Fill-out whole words, byte-by-byte to avoid endianness issues */</font></i>
<a name='L397'>    <b>for</b> (i=0 ; i&lt;<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> ; i+=4, k-=32) <font color='red'>{</font>
<a name='L398'>        r = <a href='../S/2590.html#L95' title='Defined at 95 in Modules/_randommodule.c.'>genrand_int32</a>(self);
<a name='L399'>        <b>if</b> (k &lt; 32)
<a name='L400'>            r &gt;&gt;= (32 - k);
<a name='L401'>        bytearray[i+0] = (<b>unsigned</b> <b>char</b>)r;
<a name='L402'>        bytearray[i+1] = (<b>unsigned</b> <b>char</b>)(r &gt;&gt; 8);
<a name='L403'>        bytearray[i+2] = (<b>unsigned</b> <b>char</b>)(r &gt;&gt; 16);
<a name='L404'>        bytearray[i+3] = (<b>unsigned</b> <b>char</b>)(r &gt;&gt; 24);
<a name='L405'>    <font color='red'>}</font>
<a name='L406'>
<a name='L407'>    <i><font color='green'>/* little endian order to match bytearray assignment order */</font></i>
<a name='L408'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2799.html#L683' title='Defined at 683 in Objects/longobject.c.'>_PyLong_FromByteArray</a>(bytearray, <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>, 1, 0);
<a name='L409'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(bytearray);
<a name='L410'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L411'><font color='red'>}</font>
<a name='L412'>
<a name='L413'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L414'><a href='../S/2590.html#L491' title='Refered from 491 in Modules/_randommodule.c.'>random_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L415'><font color='red'>{</font>
<a name='L416'>    <a href='../S/2590.html#L83' title='Defined at 83 in Modules/_randommodule.c.'>RandomObject</a> *self;
<a name='L417'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tmp;
<a name='L418'>
<a name='L419'>    <b>if</b> (type == &amp;Random_Type &amp;&amp; !<a href='../S/3112.html#L1777' title='Defined at 1777 in Python/getargs.c.'>_PyArg_NoKeywords</a>("Random()", kwds))
<a name='L420'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L421'>
<a name='L422'>    self = (<a href='../S/2590.html#L83' title='Defined at 83 in Modules/_randommodule.c.'>RandomObject</a> *)type-&gt;tp_alloc(type, 0);
<a name='L423'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L424'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L425'>    tmp = <a href='../S/2590.html#L207' title='Defined at 207 in Modules/_randommodule.c.'>random_seed</a>(self, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L426'>    <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L427'>        Py_DECREF(self);
<a name='L428'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L429'>    <font color='red'>}</font>
<a name='L430'>    Py_DECREF(tmp);
<a name='L431'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self;
<a name='L432'><font color='red'>}</font>
<a name='L433'>
<a name='L434'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> random_methods[] = <font color='red'>{</font>
<a name='L435'>    <font color='red'>{</font>"random",          (PyCFunction)<a href='../S/2590.html#L138' title='Defined at 138 in Modules/_randommodule.c.'>random_random</a>,  <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L436'>        <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("random() -&gt; x in the interval [0, 1).")<font color='red'>}</font>,
<a name='L437'>    <font color='red'>{</font>"seed",            (PyCFunction)<a href='../S/2590.html#L207' title='Defined at 207 in Modules/_randommodule.c.'>random_seed</a>,  <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L438'>        <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("seed([n]) -&gt; None.  Defaults to current time.")<font color='red'>}</font>,
<a name='L439'>    <font color='red'>{</font>"getstate",        (PyCFunction)<a href='../S/2590.html#L312' title='Defined at 312 in Modules/_randommodule.c.'>random_getstate</a>,  <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L440'>        <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("getstate() -&gt; tuple containing the current state.")<font color='red'>}</font>,
<a name='L441'>    <font color='red'>{</font>"setstate",          (PyCFunction)<a href='../S/2590.html#L339' title='Defined at 339 in Modules/_randommodule.c.'>random_setstate</a>,  METH_O,
<a name='L442'>        <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("setstate(state) -&gt; None.  Restores generator state.")<font color='red'>}</font>,
<a name='L443'>    <font color='red'>{</font>"getrandbits",     (PyCFunction)<a href='../S/2590.html#L373' title='Defined at 373 in Modules/_randommodule.c.'>random_getrandbits</a>,  <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L444'>        <a href='../D/3130.html' title='Multiple defined in 4 places.'>PyDoc_STR</a>("getrandbits(k) -&gt; x.  Generates a long int with "
<a name='L445'>                  "k random bits.")<font color='red'>}</font>,
<a name='L446'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>           <i><font color='green'>/* sentinel */</font></i>
<a name='L447'><font color='red'>}</font>;
<a name='L448'>
<a name='L449'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(random_doc,
<a name='L450'>"Random() -&gt; create a random number generator with its own internal state.");
<a name='L451'>
<a name='L452'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Random_Type = <font color='red'>{</font>
<a name='L453'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L454'>    "_random.Random",                   <i><font color='green'>/*tp_name*/</font></i>
<a name='L455'>    <b>sizeof</b>(<a href='../S/2590.html#L83' title='Defined at 83 in Modules/_randommodule.c.'>RandomObject</a>),               <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L456'>    0,                                  <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L457'>    <i><font color='green'>/* methods */</font></i>
<a name='L458'>    0,                                  <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L459'>    0,                                  <i><font color='green'>/*tp_print*/</font></i>
<a name='L460'>    0,                                  <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L461'>    0,                                  <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L462'>    0,                                  <i><font color='green'>/*tp_reserved*/</font></i>
<a name='L463'>    0,                                  <i><font color='green'>/*tp_repr*/</font></i>
<a name='L464'>    0,                                  <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L465'>    0,                                  <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L466'>    0,                                  <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L467'>    0,                                  <i><font color='green'>/*tp_hash*/</font></i>
<a name='L468'>    0,                                  <i><font color='green'>/*tp_call*/</font></i>
<a name='L469'>    0,                                  <i><font color='green'>/*tp_str*/</font></i>
<a name='L470'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,            <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L471'>    0,                                  <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L472'>    0,                                  <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L473'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE,           <i><font color='green'>/*tp_flags*/</font></i>
<a name='L474'>    random_doc,                         <i><font color='green'>/*tp_doc*/</font></i>
<a name='L475'>    0,                                  <i><font color='green'>/*tp_traverse*/</font></i>
<a name='L476'>    0,                                  <i><font color='green'>/*tp_clear*/</font></i>
<a name='L477'>    0,                                  <i><font color='green'>/*tp_richcompare*/</font></i>
<a name='L478'>    0,                                  <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L479'>    0,                                  <i><font color='green'>/*tp_iter*/</font></i>
<a name='L480'>    0,                                  <i><font color='green'>/*tp_iternext*/</font></i>
<a name='L481'>    random_methods,                     <i><font color='green'>/*tp_methods*/</font></i>
<a name='L482'>    0,                                  <i><font color='green'>/*tp_members*/</font></i>
<a name='L483'>    0,                                  <i><font color='green'>/*tp_getset*/</font></i>
<a name='L484'>    0,                                  <i><font color='green'>/*tp_base*/</font></i>
<a name='L485'>    0,                                  <i><font color='green'>/*tp_dict*/</font></i>
<a name='L486'>    0,                                  <i><font color='green'>/*tp_descr_get*/</font></i>
<a name='L487'>    0,                                  <i><font color='green'>/*tp_descr_set*/</font></i>
<a name='L488'>    0,                                  <i><font color='green'>/*tp_dictoffset*/</font></i>
<a name='L489'>    0,                                  <i><font color='green'>/*tp_init*/</font></i>
<a name='L490'>    0,                                  <i><font color='green'>/*tp_alloc*/</font></i>
<a name='L491'>    <a href='../S/2590.html#L414' title='Defined at 414 in Modules/_randommodule.c.'>random_new</a>,                         <i><font color='green'>/*tp_new*/</font></i>
<a name='L492'>    <a href='../D/3616.html' title='Multiple defined in 3 places.'>PyObject_Free</a>,                      <i><font color='green'>/*tp_free*/</font></i>
<a name='L493'>    0,                                  <i><font color='green'>/*tp_is_gc*/</font></i>
<a name='L494'><font color='red'>}</font>;
<a name='L495'>
<a name='L496'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(module_doc,
<a name='L497'>"Module implements the Mersenne Twister random number generator.");
<a name='L498'>
<a name='L499'>
<a name='L500'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> _randommodule = <font color='red'>{</font>
<a name='L501'>    <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L502'>    "_random",
<a name='L503'>    module_doc,
<a name='L504'>    -1,
<a name='L505'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L506'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L507'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L508'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L509'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L510'><font color='red'>}</font>;
<a name='L511'>
<a name='L512'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L513'><a href='../R/3034.html' title='Multiple refered from 2 places.'>PyInit__random</a>(<b>void</b>)
<a name='L514'><font color='red'>{</font>
<a name='L515'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *m;
<a name='L516'>
<a name='L517'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;Random_Type) &lt; 0)
<a name='L518'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L519'>    m = PyModule_Create(&amp;_randommodule);
<a name='L520'>    <b>if</b> (m == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L521'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L522'>    Py_INCREF(&amp;Random_Type);
<a name='L523'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "Random", (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;Random_Type);
<a name='L524'>    <b>return</b> m;
<a name='L525'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L95'>[^]</a><a href='#L513'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
