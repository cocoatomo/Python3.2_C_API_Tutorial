<html>
<head>
<title>Modules/_ctypes/libffi/src/mips/ffi.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/<a href='../files/3354.html'>_ctypes</a>/<a href='../files/3356.html'>libffi</a>/<a href='../files/3358.html'>src</a>/<a href='../files/3367.html'>mips</a>/ffi.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L65'>[^]</a><a href='#L898'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L65' title='Defined at 65.'>ffi_prep_args</a>
<li><a href='#L224' title='Defined at 224.'>calc_n32_struct_flags</a>
<li><a href='#L259' title='Defined at 259.'>calc_n32_return_struct_flags</a>
<li><a href='#L313' title='Defined at 313.'>ffi_prep_cif_machdep</a>
<li><a href='#L579' title='Defined at 579.'>ffi_call</a>
<li><a href='#L654' title='Defined at 654.'>ffi_prep_closure_loc</a>
<li><a href='#L744' title='Defined at 744.'>ffi_closure_mips_inner_O32</a>
<li><a href='#L845' title='Defined at 845.'>copy_struct_N32</a>
<li><a href='#L898' title='Defined at 898.'>ffi_closure_mips_inner_N32</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* -----------------------------------------------------------------------</font></i>
<a name='L2'><i><font color='green'>   ffi.c - Copyright (c) 1996, 2007, 2008  Red Hat, Inc.</font></i>
<a name='L3'><i><font color='green'>           Copyright (c) 2008       David Daney</font></i>
<a name='L4'><i><font color='green'>   </font></i>
<a name='L5'><i><font color='green'>   MIPS Foreign Function Interface </font></i>
<a name='L6'><i><font color='green'></font></i>
<a name='L7'><i><font color='green'>   Permission is hereby granted, free of charge, to any person obtaining</font></i>
<a name='L8'><i><font color='green'>   a copy of this software and associated documentation files (the</font></i>
<a name='L9'><i><font color='green'>   ``Software''), to deal in the Software without restriction, including</font></i>
<a name='L10'><i><font color='green'>   without limitation the rights to use, copy, modify, merge, publish,</font></i>
<a name='L11'><i><font color='green'>   distribute, sublicense, and/or sell copies of the Software, and to</font></i>
<a name='L12'><i><font color='green'>   permit persons to whom the Software is furnished to do so, subject to</font></i>
<a name='L13'><i><font color='green'>   the following conditions:</font></i>
<a name='L14'><i><font color='green'></font></i>
<a name='L15'><i><font color='green'>   The above copyright notice and this permission notice shall be included</font></i>
<a name='L16'><i><font color='green'>   in all copies or substantial portions of the Software.</font></i>
<a name='L17'><i><font color='green'></font></i>
<a name='L18'><i><font color='green'>   THE SOFTWARE IS PROVIDED ``AS IS'', WITHOUT WARRANTY OF ANY KIND,</font></i>
<a name='L19'><i><font color='green'>   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</font></i>
<a name='L20'><i><font color='green'>   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</font></i>
<a name='L21'><i><font color='green'>   NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</font></i>
<a name='L22'><i><font color='green'>   HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</font></i>
<a name='L23'><i><font color='green'>   WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</font></i>
<a name='L24'><i><font color='green'>   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</font></i>
<a name='L25'><i><font color='green'>   DEALINGS IN THE SOFTWARE.</font></i>
<a name='L26'><i><font color='green'>   ----------------------------------------------------------------------- */</font></i>
<a name='L27'>
<a name='L28'><font color='darkred'>#include</font> &lt;<a href='../I/325.html'>ffi.h</a>&gt;
<a name='L29'><font color='darkred'>#include</font> &lt;<a href='../I/119.html'>ffi_common.h</a>&gt;
<a name='L30'>
<a name='L31'><font color='darkred'>#include</font> &lt;stdlib.h&gt;
<a name='L32'>
<a name='L33'><font color='darkred'>#ifdef</font> __GNUC__
<a name='L34'><font color='darkred'>#  if</font> (__GNUC__ &gt; 4) || ((__GNUC__ == 4) &amp;&amp; (__GNUC_MINOR__ &gt;= 3))
<a name='L35'><font color='darkred'>#    define</font> <a href='../R/4779.html' title='Multiple refered from 2 places.'>USE__BUILTIN___CLEAR_CACHE</a> 1
<a name='L36'><font color='darkred'>#  endif</font>
<a name='L37'><font color='darkred'>#endif</font>
<a name='L38'>
<a name='L39'><font color='darkred'>#ifndef</font> <a href='../S/2332.html#L35' title='Defined at 35 in Modules/_ctypes/libffi/src/mips/ffi.c.'>USE__BUILTIN___CLEAR_CACHE</a>
<a name='L40'><font color='darkred'>#include</font> &lt;sys/cachectl.h&gt;
<a name='L41'><font color='darkred'>#endif</font>
<a name='L42'>
<a name='L43'><font color='darkred'>#ifdef</font> <a href='../D/1130.html' title='Multiple defined in 2 places.'>FFI_DEBUG</a>
<a name='L44'><font color='darkred'># define</font> <a href='../S/2332.html#L55' title='Refered from 55 in Modules/_ctypes/libffi/src/mips/ffi.c.'>FFI_MIPS_STOP_HERE</a>() <a href='../D/8531.html' title='Multiple defined in 2 places.'>ffi_stop_here</a>()
<a name='L45'><font color='darkred'>#else</font>
<a name='L46'><font color='darkred'># define</font> <a href='../S/2332.html#L55' title='Refered from 55 in Modules/_ctypes/libffi/src/mips/ffi.c.'>FFI_MIPS_STOP_HERE</a>() <b>do</b> <font color='red'>{</font><font color='red'>}</font> <b>while</b>(0)
<a name='L47'><font color='darkred'>#endif</font>
<a name='L48'>
<a name='L49'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L49' title='Defined at 49 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_N32</a>
<a name='L50'><font color='darkred'>#define</font> <a href='../R/1120.html' title='Multiple refered from 3 places.'>FIX_ARGP</a> \
<a name='L51'><a href='../D/1120.html' title='Multiple defined in 8 places.'>FFI_ASSERT</a>(argp &lt;= &amp;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>[<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>]); \
<a name='L52'><b>if</b> (argp == &amp;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>[<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>]) \
<a name='L53'><font color='red'>{</font> \
<a name='L54'>  argp = <a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>; \
<a name='L55'>  <a href='../D/1154.html' title='Multiple defined in 2 places.'>FFI_MIPS_STOP_HERE</a>(); \
<a name='L56'><font color='red'>}</font>
<a name='L57'><font color='darkred'>#else</font>
<a name='L58'><font color='darkred'>#define</font> <a href='../R/1120.html' title='Multiple refered from 3 places.'>FIX_ARGP</a> 
<a name='L59'><font color='darkred'>#endif</font>
<a name='L60'>
<a name='L61'>
<a name='L62'><i><font color='green'>/* ffi_prep_args is called by the assembly routine once stack space</font></i>
<a name='L63'><i><font color='green'>   has been allocated for the function's arguments */</font></i>
<a name='L64'>
<a name='L65'><b>static</b> <b>void</b> <a href='../R/7708.html' title='Multiple refered from 25 places.'>ffi_prep_args</a>(<b>char</b> *stack, 
<a name='L66'>                          extended_cif *ecif,
<a name='L67'>                          <b>int</b> bytes,
<a name='L68'>                          <b>int</b> flags)
<a name='L69'><font color='red'>{</font>
<a name='L70'>  <b>int</b> i;
<a name='L71'>  <b>void</b> **p_argv;
<a name='L72'>  <b>char</b> *argp;
<a name='L73'>  <a href='../D/8534.html' title='Multiple defined in 3 places.'>ffi_type</a> **p_arg;
<a name='L74'>
<a name='L75'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L49' title='Defined at 49 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_N32</a>
<a name='L76'>  <i><font color='green'>/* If more than 8 double words are used, the remainder go</font></i>
<a name='L77'><i><font color='green'>     on the stack. We reorder stuff on the stack here to </font></i>
<a name='L78'><i><font color='green'>     support this easily. */</font></i>
<a name='L79'>  <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> &gt; 8 * <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>))
<a name='L80'>    argp = &amp;<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>[<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> - (8 * <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>))];
<a name='L81'>  <b>else</b>
<a name='L82'>    argp = <a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>;
<a name='L83'><font color='darkred'>#else</font>
<a name='L84'>  argp = <a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>;
<a name='L85'><font color='darkred'>#endif</font>
<a name='L86'>
<a name='L87'>  memset(<a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>, 0, <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L88'>
<a name='L89'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L49' title='Defined at 49 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_N32</a>
<a name='L90'>  <b>if</b> ( ecif-&gt;cif-&gt;rstruct_flag != 0 )
<a name='L91'><font color='darkred'>#else</font>
<a name='L92'>  <b>if</b> ( ecif-&gt;cif-&gt;rtype-&gt;type == <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a> )
<a name='L93'><font color='darkred'>#endif</font>  
<a name='L94'>    <font color='red'>{</font>
<a name='L95'>      *(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *) argp = (<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>) ecif-&gt;rvalue;
<a name='L96'>      argp += <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>);
<a name='L97'>      <a href='../D/1244.html' title='Multiple defined in 2 places.'>FIX_ARGP</a>;
<a name='L98'>    <font color='red'>}</font>
<a name='L99'>
<a name='L100'>  p_argv = ecif-&gt;avalue;
<a name='L101'>
<a name='L102'>  <b>for</b> (i = 0, p_arg = ecif-&gt;cif-&gt;arg_types; i &lt; ecif-&gt;cif-&gt;nargs; i++, p_arg++)
<a name='L103'>    <font color='red'>{</font>
<a name='L104'>      <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> z;
<a name='L105'>      <b>unsigned</b> <b>int</b> a;
<a name='L106'>
<a name='L107'>      <i><font color='green'>/* Align if necessary.  */</font></i>
<a name='L108'>      a = (*p_arg)-&gt;alignment;
<a name='L109'>      <b>if</b> (a &lt; <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>))
<a name='L110'>        a = <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>);
<a name='L111'>      
<a name='L112'>      <b>if</b> ((a - 1) &amp; (<b>unsigned</b> <b>long</b>) argp)
<a name='L113'>        <font color='red'>{</font>
<a name='L114'>          argp = (<b>char</b> *) <a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(argp, a);
<a name='L115'>          <a href='../D/1244.html' title='Multiple defined in 2 places.'>FIX_ARGP</a>;
<a name='L116'>        <font color='red'>}</font>
<a name='L117'>
<a name='L118'>      z = (*p_arg)-&gt;size;
<a name='L119'>      <b>if</b> (z &lt;= <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>))
<a name='L120'>        <font color='red'>{</font>
<a name='L121'>          <b>int</b> type = (*p_arg)-&gt;type;
<a name='L122'>          z = <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>);
<a name='L123'>
<a name='L124'>          <i><font color='green'>/* The size of a pointer depends on the ABI */</font></i>
<a name='L125'>          <b>if</b> (type == <a href='../D/1185.html' title='Multiple defined in 3 places.'>FFI_TYPE_POINTER</a>)
<a name='L126'>            type = (ecif-&gt;cif-&gt;abi == <a href='../D/1159.html' title='Multiple defined in 2 places.'>FFI_N64</a>
<a name='L127'>                    || ecif-&gt;cif-&gt;abi == <a href='../D/1160.html' title='Multiple defined in 2 places.'>FFI_N64_SOFT_FLOAT</a>)
<a name='L128'>              ? <a href='../D/1188.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT64</a> : <a href='../D/1187.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT32</a>;
<a name='L129'>
<a name='L130'>        <b>if</b> (i &lt; 8 &amp;&amp; (ecif-&gt;cif-&gt;abi == <a href='../D/1158.html' title='Multiple defined in 2 places.'>FFI_N32_SOFT_FLOAT</a>
<a name='L131'>                      || ecif-&gt;cif-&gt;abi == <a href='../D/1160.html' title='Multiple defined in 2 places.'>FFI_N64_SOFT_FLOAT</a>))
<a name='L132'>          <font color='red'>{</font>
<a name='L133'>            <b>switch</b> (type)
<a name='L134'>              <font color='red'>{</font>
<a name='L135'>              <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L136'>                type = <a href='../D/1220.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT32</a>;
<a name='L137'>                <b>break</b>;
<a name='L138'>              <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L139'>                type = <a href='../D/1221.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT64</a>;
<a name='L140'>                <b>break</b>;
<a name='L141'>              <b>default</b>:
<a name='L142'>                <b>break</b>;
<a name='L143'>              <font color='red'>}</font>
<a name='L144'>          <font color='red'>}</font>
<a name='L145'>          <b>switch</b> (type)
<a name='L146'>            <font color='red'>{</font>
<a name='L147'>              <b>case</b> <a href='../D/1189.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT8</a>:
<a name='L148'>                *(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *)argp = *(<a href='../D/4724.html' title='Multiple defined in 6 places.'>SINT8</a> *)(* p_argv);
<a name='L149'>                <b>break</b>;
<a name='L150'>
<a name='L151'>              <b>case</b> <a href='../D/1222.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT8</a>:
<a name='L152'>                *(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *)argp = *(<a href='../D/5332.html' title='Multiple defined in 6 places.'>UINT8</a> *)(* p_argv);
<a name='L153'>                <b>break</b>;
<a name='L154'>                  
<a name='L155'>              <b>case</b> <a href='../D/1186.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT16</a>:
<a name='L156'>                *(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *)argp = *(<a href='../D/4721.html' title='Multiple defined in 6 places.'>SINT16</a> *)(* p_argv);
<a name='L157'>                <b>break</b>;
<a name='L158'>                  
<a name='L159'>              <b>case</b> <a href='../D/1219.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT16</a>:
<a name='L160'>                *(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *)argp = *(<a href='../D/5329.html' title='Multiple defined in 6 places.'>UINT16</a> *)(* p_argv);
<a name='L161'>                <b>break</b>;
<a name='L162'>                  
<a name='L163'>              <b>case</b> <a href='../D/1187.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT32</a>:
<a name='L164'>                *(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *)argp = *(<a href='../D/4722.html' title='Multiple defined in 6 places.'>SINT32</a> *)(* p_argv);
<a name='L165'>                <b>break</b>;
<a name='L166'>                  
<a name='L167'>              <b>case</b> <a href='../D/1220.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT32</a>:
<a name='L168'>                *(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *)argp = *(<a href='../D/5330.html' title='Multiple defined in 7 places.'>UINT32</a> *)(* p_argv);
<a name='L169'>                <b>break</b>;
<a name='L170'>
<a name='L171'>              <i><font color='green'>/* This can only happen with 64bit slots.  */</font></i>
<a name='L172'>              <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L173'>                *(<b>float</b> *) argp = *(<b>float</b> *)(* p_argv);
<a name='L174'>                <b>break</b>;
<a name='L175'>
<a name='L176'>              <i><font color='green'>/* Handle structures.  */</font></i>
<a name='L177'>              <b>default</b>:
<a name='L178'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(argp, *p_argv, (*p_arg)-&gt;size);
<a name='L179'>                <b>break</b>;
<a name='L180'>            <font color='red'>}</font>
<a name='L181'>        <font color='red'>}</font>
<a name='L182'>      <b>else</b>
<a name='L183'>        <font color='red'>{</font>
<a name='L184'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L52' title='Defined at 52 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_O32</a>
<a name='L185'>          <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(argp, *p_argv, z);
<a name='L186'><font color='darkred'>#else</font>
<a name='L187'>          <font color='red'>{</font>
<a name='L188'>            <b>unsigned</b> <b>long</b> end = (<b>unsigned</b> <b>long</b>) argp + z;
<a name='L189'>            <b>unsigned</b> <b>long</b> cap = (<b>unsigned</b> <b>long</b>) <a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a> + <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L190'>
<a name='L191'>            <i><font color='green'>/* Check if the data will fit within the register space.</font></i>
<a name='L192'><i><font color='green'>               Handle it if it doesn't.  */</font></i>
<a name='L193'>
<a name='L194'>            <b>if</b> (end &lt;= cap)
<a name='L195'>              <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(argp, *p_argv, z);
<a name='L196'>            <b>else</b>
<a name='L197'>              <font color='red'>{</font>
<a name='L198'>                <b>unsigned</b> <b>long</b> portion = cap - (<b>unsigned</b> <b>long</b>)argp;
<a name='L199'>
<a name='L200'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(argp, *p_argv, portion);
<a name='L201'>                argp = <a href='../S/2844.html#L22' title='Defined at 22 in Parser/parser.h.'>stack</a>;
<a name='L202'>                z -= portion;
<a name='L203'>                <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(argp, (<b>void</b>*)((<b>unsigned</b> <b>long</b>)(*p_argv) + portion),
<a name='L204'>                       z);
<a name='L205'>              <font color='red'>}</font>
<a name='L206'>          <font color='red'>}</font>
<a name='L207'><font color='darkred'>#endif</font>
<a name='L208'>      <font color='red'>}</font>
<a name='L209'>      p_argv++;
<a name='L210'>      argp += z;
<a name='L211'>      <a href='../D/1244.html' title='Multiple defined in 2 places.'>FIX_ARGP</a>;
<a name='L212'>    <font color='red'>}</font>
<a name='L213'><font color='red'>}</font>
<a name='L214'>
<a name='L215'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L49' title='Defined at 49 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_N32</a>
<a name='L216'>
<a name='L217'><i><font color='green'>/* The n32 spec says that if "a chunk consists solely of a double </font></i>
<a name='L218'><i><font color='green'>   float field (but not a double, which is part of a union), it</font></i>
<a name='L219'><i><font color='green'>   is passed in a floating point register. Any other chunk is</font></i>
<a name='L220'><i><font color='green'>   passed in an integer register". This code traverses structure</font></i>
<a name='L221'><i><font color='green'>   definitions and generates the appropriate flags. */</font></i>
<a name='L222'>
<a name='L223'><b>static</b> <b>unsigned</b>
<a name='L224'><a href='../S/2332.html#L484' title='Refered from 484 in Modules/_ctypes/libffi/src/mips/ffi.c.'>calc_n32_struct_flags</a>(<b>int</b> soft_float, ffi_type *arg,
<a name='L225'>                      <b>unsigned</b> *loc, <b>unsigned</b> *arg_reg)
<a name='L226'><font color='red'>{</font>
<a name='L227'>  <b>unsigned</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L228'>  <b>unsigned</b> index = 0;
<a name='L229'>
<a name='L230'>  <a href='../D/8534.html' title='Multiple defined in 3 places.'>ffi_type</a> *e;
<a name='L231'>
<a name='L232'>  <b>if</b> (soft_float)
<a name='L233'>    <b>return</b> 0;
<a name='L234'>
<a name='L235'>  <b>while</b> ((e = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;elements[index]))
<a name='L236'>    <font color='red'>{</font>
<a name='L237'>      <i><font color='green'>/* Align this object.  */</font></i>
<a name='L238'>      *loc = <a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(*loc, e-&gt;alignment);
<a name='L239'>      <b>if</b> (e-&gt;type == <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>)
<a name='L240'>        <font color='red'>{</font>
<a name='L241'>          <i><font color='green'>/* Already aligned to FFI_SIZEOF_ARG.  */</font></i>
<a name='L242'>          *arg_reg = *loc / <a href='../D/1169.html' title='Multiple defined in 9 places.'>FFI_SIZEOF_ARG</a>;
<a name='L243'>          <b>if</b> (*arg_reg &gt; 7)
<a name='L244'>            <b>break</b>;
<a name='L245'>          <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += (<a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a> &lt;&lt; (*arg_reg * <a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a>));
<a name='L246'>          *loc += e-&gt;size;
<a name='L247'>        <font color='red'>}</font>
<a name='L248'>      <b>else</b>
<a name='L249'>        *loc += e-&gt;size;
<a name='L250'>      index++;
<a name='L251'>    <font color='red'>}</font>
<a name='L252'>  <i><font color='green'>/* Next Argument register at alignment of FFI_SIZEOF_ARG.  */</font></i>
<a name='L253'>  *arg_reg = <a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(*loc, <a href='../D/1169.html' title='Multiple defined in 9 places.'>FFI_SIZEOF_ARG</a>) / <a href='../D/1169.html' title='Multiple defined in 9 places.'>FFI_SIZEOF_ARG</a>;
<a name='L254'>
<a name='L255'>  <b>return</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>;
<a name='L256'><font color='red'>}</font>
<a name='L257'>
<a name='L258'><b>static</b> <b>unsigned</b>
<a name='L259'><a href='../S/2332.html#L420' title='Refered from 420 in Modules/_ctypes/libffi/src/mips/ffi.c.'>calc_n32_return_struct_flags</a>(<b>int</b> soft_float, ffi_type *arg)
<a name='L260'><font color='red'>{</font>
<a name='L261'>  <b>unsigned</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L262'>  <b>unsigned</b> small = <a href='../S/2333.html#L83' title='Defined at 83 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_TYPE_SMALLSTRUCT</a>;
<a name='L263'>  <a href='../D/8534.html' title='Multiple defined in 3 places.'>ffi_type</a> *e;
<a name='L264'>
<a name='L265'>  <i><font color='green'>/* Returning structures under n32 is a tricky thing.</font></i>
<a name='L266'><i><font color='green'>     A struct with only one or two floating point fields </font></i>
<a name='L267'><i><font color='green'>     is returned in $f0 (and $f2 if necessary). Any other</font></i>
<a name='L268'><i><font color='green'>     struct results at most 128 bits are returned in $2</font></i>
<a name='L269'><i><font color='green'>     (the first 64 bits) and $3 (remainder, if necessary).</font></i>
<a name='L270'><i><font color='green'>     Larger structs are handled normally. */</font></i>
<a name='L271'>  
<a name='L272'>  <b>if</b> (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;size &gt; 16)
<a name='L273'>    <b>return</b> 0;
<a name='L274'>
<a name='L275'>  <b>if</b> (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;size &gt; 8)
<a name='L276'>    small = <a href='../S/2333.html#L84' title='Defined at 84 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_TYPE_SMALLSTRUCT2</a>;
<a name='L277'>
<a name='L278'>  e = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;elements[0];
<a name='L279'>
<a name='L280'>  <b>if</b> (e-&gt;type == <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>)
<a name='L281'>    <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>;
<a name='L282'>  <b>else</b> <b>if</b> (e-&gt;type == <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>)
<a name='L283'>    <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>;
<a name='L284'>
<a name='L285'>  <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp;&amp; (e = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;elements[1]))
<a name='L286'>    <font color='red'>{</font>
<a name='L287'>      <b>if</b> (e-&gt;type == <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>)
<a name='L288'>        <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a> &lt;&lt; <a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a>;
<a name='L289'>      <b>else</b> <b>if</b> (e-&gt;type == <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>)
<a name='L290'>        <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a> &lt;&lt; <a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a>;
<a name='L291'>      <b>else</b> 
<a name='L292'>        <b>return</b> small;
<a name='L293'>
<a name='L294'>      <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp;&amp; (<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;elements[2]))
<a name='L295'>        <font color='red'>{</font>
<a name='L296'>          <i><font color='green'>/* There are three arguments and the first two are </font></i>
<a name='L297'><i><font color='green'>             floats! This must be passed the old way. */</font></i>
<a name='L298'>          <b>return</b> small;
<a name='L299'>        <font color='red'>}</font>
<a name='L300'>      <b>if</b> (soft_float)
<a name='L301'>        <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../S/2333.html#L108' title='Defined at 108 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_TYPE_STRUCT_SOFT</a>;
<a name='L302'>    <font color='red'>}</font>
<a name='L303'>  <b>else</b>
<a name='L304'>    <b>if</b> (!<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>)
<a name='L305'>      <b>return</b> small;
<a name='L306'>
<a name='L307'>  <b>return</b> <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>;
<a name='L308'><font color='red'>}</font>
<a name='L309'>
<a name='L310'><font color='darkred'>#endif</font>
<a name='L311'>
<a name='L312'><i><font color='green'>/* Perform machine dependent cif processing */</font></i>
<a name='L313'><a href='../D/8530.html' title='Multiple defined in 4 places.'>ffi_status</a> <a href='../R/7714.html' title='Multiple refered from 9 places.'>ffi_prep_cif_machdep</a>(ffi_cif *cif)
<a name='L314'><font color='red'>{</font>
<a name='L315'>  cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L316'>
<a name='L317'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L52' title='Defined at 52 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_O32</a>
<a name='L318'>  <i><font color='green'>/* Set the flags necessary for O32 processing.  FFI_O32_SOFT_FLOAT</font></i>
<a name='L319'><i><font color='green'>   * does not have special handling for floating point args.</font></i>
<a name='L320'><i><font color='green'>   */</font></i>
<a name='L321'>
<a name='L322'>  <b>if</b> (cif-&gt;rtype-&gt;type != <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a> &amp;&amp; cif-&gt;abi == <a href='../D/1163.html' title='Multiple defined in 2 places.'>FFI_O32</a>)
<a name='L323'>    <font color='red'>{</font>
<a name='L324'>      <b>if</b> (cif-&gt;nargs &gt; 0)
<a name='L325'>        <font color='red'>{</font>
<a name='L326'>          <b>switch</b> ((cif-&gt;arg_types)[0]-&gt;type)
<a name='L327'>            <font color='red'>{</font>
<a name='L328'>            <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L329'>            <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L330'>              cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += (cif-&gt;arg_types)[0]-&gt;type;
<a name='L331'>              <b>break</b>;
<a name='L332'>              
<a name='L333'>            <b>default</b>:
<a name='L334'>              <b>break</b>;
<a name='L335'>            <font color='red'>}</font>
<a name='L336'>
<a name='L337'>          <b>if</b> (cif-&gt;nargs &gt; 1)
<a name='L338'>            <font color='red'>{</font>
<a name='L339'>              <i><font color='green'>/* Only handle the second argument if the first</font></i>
<a name='L340'><i><font color='green'>                 is a float or double. */</font></i>
<a name='L341'>              <b>if</b> (cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>)
<a name='L342'>                <font color='red'>{</font>
<a name='L343'>                  <b>switch</b> ((cif-&gt;arg_types)[1]-&gt;type)
<a name='L344'>                    <font color='red'>{</font>
<a name='L345'>                    <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L346'>                    <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L347'>                      cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += (cif-&gt;arg_types)[1]-&gt;type &lt;&lt; <a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a>;
<a name='L348'>                      <b>break</b>;
<a name='L349'>                      
<a name='L350'>                    <b>default</b>:
<a name='L351'>                      <b>break</b>;
<a name='L352'>                    <font color='red'>}</font>
<a name='L353'>                <font color='red'>}</font>
<a name='L354'>            <font color='red'>}</font>
<a name='L355'>        <font color='red'>}</font>
<a name='L356'>    <font color='red'>}</font>
<a name='L357'>      
<a name='L358'>  <i><font color='green'>/* Set the return type flag */</font></i>
<a name='L359'>
<a name='L360'>  <b>if</b> (cif-&gt;abi == <a href='../D/1164.html' title='Multiple defined in 2 places.'>FFI_O32_SOFT_FLOAT</a>)
<a name='L361'>    <font color='red'>{</font>
<a name='L362'>      <b>switch</b> (cif-&gt;rtype-&gt;type)
<a name='L363'>        <font color='red'>{</font>
<a name='L364'>        <b>case</b> <a href='../D/1223.html' title='Multiple defined in 3 places.'>FFI_TYPE_VOID</a>:
<a name='L365'>        <b>case</b> <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a>:
<a name='L366'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += cif-&gt;rtype-&gt;type &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 2);
<a name='L367'>          <b>break</b>;
<a name='L368'>
<a name='L369'>        <b>case</b> <a href='../D/1188.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT64</a>:
<a name='L370'>        <b>case</b> <a href='../D/1221.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT64</a>:
<a name='L371'>        <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L372'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1221.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT64</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 2);
<a name='L373'>          <b>break</b>;
<a name='L374'>      
<a name='L375'>        <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L376'>        <b>default</b>:
<a name='L377'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1182.html' title='Multiple defined in 3 places.'>FFI_TYPE_INT</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 2);
<a name='L378'>          <b>break</b>;
<a name='L379'>        <font color='red'>}</font>
<a name='L380'>    <font color='red'>}</font>
<a name='L381'>  <b>else</b>
<a name='L382'>    <font color='red'>{</font>
<a name='L383'>      <i><font color='green'>/* FFI_O32 */</font></i>      
<a name='L384'>      <b>switch</b> (cif-&gt;rtype-&gt;type)
<a name='L385'>        <font color='red'>{</font>
<a name='L386'>        <b>case</b> <a href='../D/1223.html' title='Multiple defined in 3 places.'>FFI_TYPE_VOID</a>:
<a name='L387'>        <b>case</b> <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a>:
<a name='L388'>        <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L389'>        <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L390'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += cif-&gt;rtype-&gt;type &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 2);
<a name='L391'>          <b>break</b>;
<a name='L392'>
<a name='L393'>        <b>case</b> <a href='../D/1188.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT64</a>:
<a name='L394'>        <b>case</b> <a href='../D/1221.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT64</a>:
<a name='L395'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1221.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT64</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 2);
<a name='L396'>          <b>break</b>;
<a name='L397'>      
<a name='L398'>        <b>default</b>:
<a name='L399'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1182.html' title='Multiple defined in 3 places.'>FFI_TYPE_INT</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 2);
<a name='L400'>          <b>break</b>;
<a name='L401'>        <font color='red'>}</font>
<a name='L402'>    <font color='red'>}</font>
<a name='L403'><font color='darkred'>#endif</font>
<a name='L404'>
<a name='L405'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L49' title='Defined at 49 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_N32</a>
<a name='L406'>  <i><font color='green'>/* Set the flags necessary for N32 processing */</font></i>
<a name='L407'>  <font color='red'>{</font>
<a name='L408'>    <b>int</b> type;
<a name='L409'>    <b>unsigned</b> arg_reg = 0;
<a name='L410'>    <b>unsigned</b> loc = 0;
<a name='L411'>    <b>unsigned</b> count = (cif-&gt;nargs &lt; 8) ? cif-&gt;nargs : 8;
<a name='L412'>    <b>unsigned</b> index = 0;
<a name='L413'>
<a name='L414'>    <b>unsigned</b> struct_flags = 0;
<a name='L415'>    <b>int</b> soft_float = (cif-&gt;abi == <a href='../D/1158.html' title='Multiple defined in 2 places.'>FFI_N32_SOFT_FLOAT</a>
<a name='L416'>                      || cif-&gt;abi == <a href='../D/1160.html' title='Multiple defined in 2 places.'>FFI_N64_SOFT_FLOAT</a>);
<a name='L417'>
<a name='L418'>    <b>if</b> (cif-&gt;rtype-&gt;type == <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a>)
<a name='L419'>      <font color='red'>{</font>
<a name='L420'>        struct_flags = <a href='../S/2332.html#L259' title='Defined at 259 in Modules/_ctypes/libffi/src/mips/ffi.c.'>calc_n32_return_struct_flags</a>(soft_float, cif-&gt;rtype);
<a name='L421'>
<a name='L422'>        <b>if</b> (struct_flags == 0)
<a name='L423'>          <font color='red'>{</font>
<a name='L424'>            <i><font color='green'>/* This means that the structure is being passed as</font></i>
<a name='L425'><i><font color='green'>               a hidden argument */</font></i>
<a name='L426'>
<a name='L427'>            arg_reg = 1;
<a name='L428'>            count = (cif-&gt;nargs &lt; 7) ? cif-&gt;nargs : 7;
<a name='L429'>
<a name='L430'>            cif-&gt;rstruct_flag = !0;
<a name='L431'>          <font color='red'>}</font>
<a name='L432'>        <b>else</b>
<a name='L433'>            cif-&gt;rstruct_flag = 0;
<a name='L434'>      <font color='red'>}</font>
<a name='L435'>    <b>else</b>
<a name='L436'>      cif-&gt;rstruct_flag = 0;
<a name='L437'>
<a name='L438'>    <b>while</b> (count-- &gt; 0 &amp;&amp; arg_reg &lt; 8)
<a name='L439'>      <font color='red'>{</font>
<a name='L440'>        type = (cif-&gt;arg_types)[index]-&gt;type;
<a name='L441'>        <b>if</b> (soft_float)
<a name='L442'>          <font color='red'>{</font>
<a name='L443'>            <b>switch</b> (type)
<a name='L444'>              <font color='red'>{</font>
<a name='L445'>              <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L446'>                type = <a href='../D/1220.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT32</a>;
<a name='L447'>                <b>break</b>;
<a name='L448'>              <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L449'>                type = <a href='../D/1221.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT64</a>;
<a name='L450'>                <b>break</b>;
<a name='L451'>              <b>default</b>:
<a name='L452'>                <b>break</b>;
<a name='L453'>              <font color='red'>}</font>
<a name='L454'>          <font color='red'>}</font>
<a name='L455'>        <b>switch</b> (type)
<a name='L456'>          <font color='red'>{</font>
<a name='L457'>          <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L458'>          <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L459'>            cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> +=
<a name='L460'>              ((cif-&gt;arg_types)[index]-&gt;type &lt;&lt; (arg_reg * <a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a>));
<a name='L461'>            arg_reg++;
<a name='L462'>            <b>break</b>;
<a name='L463'>          <b>case</b> <a href='../D/1184.html' title='Multiple defined in 8 places.'>FFI_TYPE_LONGDOUBLE</a>:
<a name='L464'>            <i><font color='green'>/* Align it.  */</font></i>
<a name='L465'>            arg_reg = <a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(arg_reg, 2);
<a name='L466'>            <i><font color='green'>/* Treat it as two adjacent doubles.  */</font></i>
<a name='L467'>            <b>if</b> (soft_float) 
<a name='L468'>              <font color='red'>{</font>
<a name='L469'>                arg_reg += 2;
<a name='L470'>              <font color='red'>}</font>
<a name='L471'>            <b>else</b>
<a name='L472'>              <font color='red'>{</font>
<a name='L473'>                cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> +=
<a name='L474'>                  (<a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a> &lt;&lt; (arg_reg * <a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a>));
<a name='L475'>                arg_reg++;
<a name='L476'>                cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> +=
<a name='L477'>                  (<a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a> &lt;&lt; (arg_reg * <a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a>));
<a name='L478'>                arg_reg++;
<a name='L479'>              <font color='red'>}</font>
<a name='L480'>            <b>break</b>;
<a name='L481'>
<a name='L482'>          <b>case</b> <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a>:
<a name='L483'>            loc = arg_reg * <a href='../D/1169.html' title='Multiple defined in 9 places.'>FFI_SIZEOF_ARG</a>;
<a name='L484'>            cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../S/2332.html#L224' title='Defined at 224 in Modules/_ctypes/libffi/src/mips/ffi.c.'>calc_n32_struct_flags</a>(soft_float,
<a name='L485'>                                                (cif-&gt;arg_types)[index],
<a name='L486'>                                                &amp;loc, &amp;arg_reg);
<a name='L487'>            <b>break</b>;
<a name='L488'>
<a name='L489'>          <b>default</b>:
<a name='L490'>            arg_reg++;
<a name='L491'>            <b>break</b>;
<a name='L492'>          <font color='red'>}</font>
<a name='L493'>
<a name='L494'>        index++;
<a name='L495'>      <font color='red'>}</font>
<a name='L496'>
<a name='L497'>  <i><font color='green'>/* Set the return type flag */</font></i>
<a name='L498'>    <b>switch</b> (cif-&gt;rtype-&gt;type)
<a name='L499'>      <font color='red'>{</font>
<a name='L500'>      <b>case</b> <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a>:
<a name='L501'>        <font color='red'>{</font>
<a name='L502'>          <b>if</b> (struct_flags == 0)
<a name='L503'>            <font color='red'>{</font>
<a name='L504'>              <i><font color='green'>/* The structure is returned through a hidden</font></i>
<a name='L505'><i><font color='green'>                 first argument. Do nothing, 'cause FFI_TYPE_VOID </font></i>
<a name='L506'><i><font color='green'>                 is 0 */</font></i>
<a name='L507'>            <font color='red'>}</font>
<a name='L508'>          <b>else</b>
<a name='L509'>            <font color='red'>{</font>
<a name='L510'>              <i><font color='green'>/* The structure is returned via some tricky</font></i>
<a name='L511'><i><font color='green'>                 mechanism */</font></i>
<a name='L512'>              cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L513'>              cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += struct_flags &lt;&lt; (4 + (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8));
<a name='L514'>            <font color='red'>}</font>
<a name='L515'>          <b>break</b>;
<a name='L516'>        <font color='red'>}</font>
<a name='L517'>      
<a name='L518'>      <b>case</b> <a href='../D/1223.html' title='Multiple defined in 3 places.'>FFI_TYPE_VOID</a>:
<a name='L519'>        <i><font color='green'>/* Do nothing, 'cause FFI_TYPE_VOID is 0 */</font></i>
<a name='L520'>        <b>break</b>;
<a name='L521'>
<a name='L522'>      <b>case</b> <a href='../D/1185.html' title='Multiple defined in 3 places.'>FFI_TYPE_POINTER</a>:
<a name='L523'>        <b>if</b> (cif-&gt;abi == <a href='../D/1158.html' title='Multiple defined in 2 places.'>FFI_N32_SOFT_FLOAT</a> || cif-&gt;abi == <a href='../D/1157.html' title='Multiple defined in 2 places.'>FFI_N32</a>)
<a name='L524'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1187.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT32</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L525'>        <b>else</b>
<a name='L526'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1182.html' title='Multiple defined in 3 places.'>FFI_TYPE_INT</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L527'>        <b>break</b>;
<a name='L528'>
<a name='L529'>      <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L530'>        <b>if</b> (soft_float)
<a name='L531'>          <font color='red'>{</font>
<a name='L532'>            cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1187.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT32</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L533'>            <b>break</b>;
<a name='L534'>          <font color='red'>}</font>
<a name='L535'>        <i><font color='green'>/* else fall through */</font></i>
<a name='L536'>      <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L537'>        <b>if</b> (soft_float)
<a name='L538'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1182.html' title='Multiple defined in 3 places.'>FFI_TYPE_INT</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L539'>        <b>else</b>
<a name='L540'>          cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += cif-&gt;rtype-&gt;type &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L541'>        <b>break</b>;
<a name='L542'>
<a name='L543'>      <b>case</b> <a href='../D/1184.html' title='Multiple defined in 8 places.'>FFI_TYPE_LONGDOUBLE</a>:
<a name='L544'>        <i><font color='green'>/* Long double is returned as if it were a struct containing</font></i>
<a name='L545'><i><font color='green'>           two doubles.  */</font></i>
<a name='L546'>        <b>if</b> (soft_float)
<a name='L547'>          <font color='red'>{</font>
<a name='L548'>            cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L549'>            cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../S/2333.html#L84' title='Defined at 84 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_TYPE_SMALLSTRUCT2</a> &lt;&lt; (4 + (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8));
<a name='L550'>          <font color='red'>}</font>
<a name='L551'>        <b>else</b>
<a name='L552'>          <font color='red'>{</font>
<a name='L553'>            cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L554'>            cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += (<a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>
<a name='L555'>                           + (<a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a> &lt;&lt; <a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a>))
<a name='L556'>                                              &lt;&lt; (4 + (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8));
<a name='L557'>          <font color='red'>}</font>
<a name='L558'>        <b>break</b>;
<a name='L559'>      <b>default</b>:
<a name='L560'>        cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> += <a href='../D/1182.html' title='Multiple defined in 3 places.'>FFI_TYPE_INT</a> &lt;&lt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L561'>        <b>break</b>;
<a name='L562'>      <font color='red'>}</font>
<a name='L563'>  <font color='red'>}</font>
<a name='L564'><font color='darkred'>#endif</font>
<a name='L565'>  
<a name='L566'>  <b>return</b> <a href='../D/1165.html' title='Multiple defined in 3 places.'>FFI_OK</a>;
<a name='L567'><font color='red'>}</font>
<a name='L568'>
<a name='L569'><i><font color='green'>/* Low level routine for calling O32 functions */</font></i>
<a name='L570'><b>extern</b> <b>int</b> ffi_call_O32(<b>void</b> (*)(<b>char</b> *, extended_cif *, <b>int</b>, <b>int</b>), 
<a name='L571'>                        extended_cif *, <b>unsigned</b>, 
<a name='L572'>                        <b>unsigned</b>, <b>unsigned</b> *, <b>void</b> (*)(<b>void</b>));
<a name='L573'>
<a name='L574'><i><font color='green'>/* Low level routine for calling N32 functions */</font></i>
<a name='L575'><b>extern</b> <b>int</b> ffi_call_N32(<b>void</b> (*)(<b>char</b> *, extended_cif *, <b>int</b>, <b>int</b>), 
<a name='L576'>                        extended_cif *, <b>unsigned</b>, 
<a name='L577'>                        <b>unsigned</b>, <b>void</b> *, <b>void</b> (*)(<b>void</b>));
<a name='L578'>
<a name='L579'><b>void</b> <a href='../R/7684.html' title='Multiple refered from 112 places.'>ffi_call</a>(ffi_cif *cif, <b>void</b> (*fn)(<b>void</b>), <b>void</b> *rvalue, <b>void</b> **avalue)
<a name='L580'><font color='red'>{</font>
<a name='L581'>  <a href='../D/8426.html' title='Multiple defined in 5 places.'>extended_cif</a> ecif;
<a name='L582'>
<a name='L583'>  ecif.cif = cif;
<a name='L584'>  ecif.avalue = avalue;
<a name='L585'>  
<a name='L586'>  <i><font color='green'>/* If the return value is a struct and we don't have a return */</font></i>
<a name='L587'>  <i><font color='green'>/* value address then we need to make one                     */</font></i>
<a name='L588'>  
<a name='L589'>  <b>if</b> ((rvalue == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) &amp;&amp; 
<a name='L590'>      (cif-&gt;rtype-&gt;type == <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a>))
<a name='L591'>    ecif.rvalue = <a href='../D/6714.html' title='Multiple defined in 6 places.'>alloca</a>(cif-&gt;rtype-&gt;size);
<a name='L592'>  <b>else</b>
<a name='L593'>    ecif.rvalue = rvalue;
<a name='L594'>    
<a name='L595'>  <b>switch</b> (cif-&gt;abi) 
<a name='L596'>    <font color='red'>{</font>
<a name='L597'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L52' title='Defined at 52 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_O32</a>
<a name='L598'>    <b>case</b> <a href='../D/1163.html' title='Multiple defined in 2 places.'>FFI_O32</a>:
<a name='L599'>    <b>case</b> <a href='../D/1164.html' title='Multiple defined in 2 places.'>FFI_O32_SOFT_FLOAT</a>:
<a name='L600'>      ffi_call_O32(<a href='../D/8505.html' title='Multiple defined in 17 places.'>ffi_prep_args</a>, &amp;ecif, cif-&gt;<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>, 
<a name='L601'>                   cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, ecif.rvalue, <a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a>);
<a name='L602'>      <b>break</b>;
<a name='L603'><font color='darkred'>#endif</font>
<a name='L604'>
<a name='L605'><font color='darkred'>#ifdef</font> <a href='../S/2333.html#L49' title='Defined at 49 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_N32</a>
<a name='L606'>    <b>case</b> <a href='../D/1157.html' title='Multiple defined in 2 places.'>FFI_N32</a>:
<a name='L607'>    <b>case</b> <a href='../D/1158.html' title='Multiple defined in 2 places.'>FFI_N32_SOFT_FLOAT</a>:
<a name='L608'>    <b>case</b> <a href='../D/1159.html' title='Multiple defined in 2 places.'>FFI_N64</a>:
<a name='L609'>    <b>case</b> <a href='../D/1160.html' title='Multiple defined in 2 places.'>FFI_N64_SOFT_FLOAT</a>:
<a name='L610'>      <font color='red'>{</font>
<a name='L611'>        <b>int</b> copy_rvalue = 0;
<a name='L612'>        <b>int</b> copy_offset = 0;
<a name='L613'>        <b>char</b> *rvalue_copy = ecif.rvalue;
<a name='L614'>        <b>if</b> (cif-&gt;rtype-&gt;type == <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a> &amp;&amp; cif-&gt;rtype-&gt;size &lt; 16)
<a name='L615'>          <font color='red'>{</font>
<a name='L616'>            <i><font color='green'>/* For structures smaller than 16 bytes we clobber memory</font></i>
<a name='L617'><i><font color='green'>               in 8 byte increments.  Make a copy so we don't clobber</font></i>
<a name='L618'><i><font color='green'>               the callers memory outside of the struct bounds.  */</font></i>
<a name='L619'>            rvalue_copy = <a href='../D/6714.html' title='Multiple defined in 6 places.'>alloca</a>(16);
<a name='L620'>            copy_rvalue = 1;
<a name='L621'>          <font color='red'>}</font>
<a name='L622'>        <b>else</b> <b>if</b> (cif-&gt;rtype-&gt;type == <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>
<a name='L623'>                 &amp;&amp; (cif-&gt;abi == <a href='../D/1160.html' title='Multiple defined in 2 places.'>FFI_N64_SOFT_FLOAT</a>
<a name='L624'>                     || cif-&gt;abi == <a href='../D/1158.html' title='Multiple defined in 2 places.'>FFI_N32_SOFT_FLOAT</a>))
<a name='L625'>          <font color='red'>{</font>
<a name='L626'>            rvalue_copy = <a href='../D/6714.html' title='Multiple defined in 6 places.'>alloca</a> (8);
<a name='L627'>            copy_rvalue = 1;
<a name='L628'><font color='darkred'>#if</font> <b>defined</b>(__MIPSEB__) || <b>defined</b>(_MIPSEB)
<a name='L629'>            copy_offset = 4;
<a name='L630'><font color='darkred'>#endif</font>
<a name='L631'>          <font color='red'>}</font>
<a name='L632'>        ffi_call_N32(<a href='../D/8505.html' title='Multiple defined in 17 places.'>ffi_prep_args</a>, &amp;ecif, cif-&gt;<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>,
<a name='L633'>                     cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, rvalue_copy, <a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a>);
<a name='L634'>        <b>if</b> (copy_rvalue)
<a name='L635'>          <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(ecif.rvalue, rvalue_copy + copy_offset, cif-&gt;rtype-&gt;size);
<a name='L636'>      <font color='red'>}</font>
<a name='L637'>      <b>break</b>;
<a name='L638'><font color='darkred'>#endif</font>
<a name='L639'>
<a name='L640'>    <b>default</b>:
<a name='L641'>      <a href='../D/1120.html' title='Multiple defined in 8 places.'>FFI_ASSERT</a>(0);
<a name='L642'>      <b>break</b>;
<a name='L643'>    <font color='red'>}</font>
<a name='L644'><font color='red'>}</font>
<a name='L645'>
<a name='L646'><font color='darkred'>#if</font> <a href='../D/1125.html' title='Multiple defined in 22 places.'>FFI_CLOSURES</a>
<a name='L647'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2333.html#L52' title='Defined at 52 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_O32</a>)
<a name='L648'><b>extern</b> <b>void</b> ffi_closure_O32(<b>void</b>);
<a name='L649'><font color='darkred'>#else</font>
<a name='L650'><b>extern</b> <b>void</b> ffi_closure_N32(<b>void</b>);
<a name='L651'><font color='darkred'>#endif</font> <i><font color='green'>/* FFI_MIPS_O32 */</font></i>
<a name='L652'>
<a name='L653'><a href='../D/8530.html' title='Multiple defined in 4 places.'>ffi_status</a>
<a name='L654'><a href='../R/7717.html' title='Multiple refered from 92 places.'>ffi_prep_closure_loc</a> (ffi_closure *closure,
<a name='L655'>                      ffi_cif *cif,
<a name='L656'>                      <b>void</b> (*fun)(ffi_cif*,<b>void</b>*,<b>void</b>**,<b>void</b>*),
<a name='L657'>                      <b>void</b> *user_data,
<a name='L658'>                      <b>void</b> *codeloc)
<a name='L659'><font color='red'>{</font>
<a name='L660'>  <b>unsigned</b> <b>int</b> *tramp = (<b>unsigned</b> <b>int</b> *) &amp;closure-&gt;tramp[0];
<a name='L661'>  <b>void</b> * <a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a>;
<a name='L662'>  <b>char</b> *clear_location = (<b>char</b> *) codeloc;
<a name='L663'>
<a name='L664'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2333.html#L52' title='Defined at 52 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_O32</a>)
<a name='L665'>  <a href='../D/1120.html' title='Multiple defined in 8 places.'>FFI_ASSERT</a>(cif-&gt;abi == <a href='../D/1163.html' title='Multiple defined in 2 places.'>FFI_O32</a> || cif-&gt;abi == <a href='../D/1164.html' title='Multiple defined in 2 places.'>FFI_O32_SOFT_FLOAT</a>);
<a name='L666'>  <a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a> = ffi_closure_O32;
<a name='L667'><font color='darkred'>#else</font> <i><font color='green'>/* FFI_MIPS_N32 */</font></i>
<a name='L668'>  <a href='../D/1120.html' title='Multiple defined in 8 places.'>FFI_ASSERT</a>(cif-&gt;abi == <a href='../D/1157.html' title='Multiple defined in 2 places.'>FFI_N32</a> || cif-&gt;abi == <a href='../D/1159.html' title='Multiple defined in 2 places.'>FFI_N64</a>);
<a name='L669'>  <a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a> = ffi_closure_N32;
<a name='L670'><font color='darkred'>#endif</font> <i><font color='green'>/* FFI_MIPS_O32 */</font></i>
<a name='L671'>
<a name='L672'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2333.html#L52' title='Defined at 52 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_O32</a>) || (_MIPS_SIM ==<a href='../S/2333.html#L36' title='Defined at 36 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>_ABIN32</a>)
<a name='L673'>  <i><font color='green'>/* lui  $25,high(fn) */</font></i>
<a name='L674'>  tramp[0] = 0x3c190000 | ((<b>unsigned</b>)<a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a> &gt;&gt; 16);
<a name='L675'>  <i><font color='green'>/* ori  $25,low(fn)  */</font></i>
<a name='L676'>  tramp[1] = 0x37390000 | ((<b>unsigned</b>)<a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a> &amp; 0xffff);
<a name='L677'>  <i><font color='green'>/* lui  $12,high(codeloc) */</font></i>
<a name='L678'>  tramp[2] = 0x3c0c0000 | ((<b>unsigned</b>)codeloc &gt;&gt; 16);
<a name='L679'>  <i><font color='green'>/* jr   $25          */</font></i>
<a name='L680'>  tramp[3] = 0x03200008;
<a name='L681'>  <i><font color='green'>/* ori  $12,low(codeloc)  */</font></i>
<a name='L682'>  tramp[4] = 0x358c0000 | ((<b>unsigned</b>)codeloc &amp; 0xffff);
<a name='L683'><font color='darkred'>#else</font>
<a name='L684'>  <i><font color='green'>/* N64 has a somewhat larger trampoline.  */</font></i>
<a name='L685'>  <i><font color='green'>/* lui  $25,high(fn) */</font></i>
<a name='L686'>  tramp[0] = 0x3c190000 | ((<b>unsigned</b> <b>long</b>)<a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a> &gt;&gt; 48);
<a name='L687'>  <i><font color='green'>/* lui  $12,high(codeloc) */</font></i>
<a name='L688'>  tramp[1] = 0x3c0c0000 | ((<b>unsigned</b> <b>long</b>)codeloc &gt;&gt; 48);
<a name='L689'>  <i><font color='green'>/* ori  $25,mid-high(fn)  */</font></i>
<a name='L690'>  tramp[2] = 0x37390000 | (((<b>unsigned</b> <b>long</b>)<a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a> &gt;&gt; 32 ) &amp; 0xffff);
<a name='L691'>  <i><font color='green'>/* ori  $12,mid-high(codeloc)  */</font></i>
<a name='L692'>  tramp[3] = 0x358c0000 | (((<b>unsigned</b> <b>long</b>)codeloc &gt;&gt; 32) &amp; 0xffff);
<a name='L693'>  <i><font color='green'>/* dsll $25,$25,16 */</font></i>
<a name='L694'>  tramp[4] = 0x0019cc38;
<a name='L695'>  <i><font color='green'>/* dsll $12,$12,16 */</font></i>
<a name='L696'>  tramp[5] = 0x000c6438;
<a name='L697'>  <i><font color='green'>/* ori  $25,mid-low(fn)  */</font></i>
<a name='L698'>  tramp[6] = 0x37390000 | (((<b>unsigned</b> <b>long</b>)<a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a> &gt;&gt; 16 ) &amp; 0xffff);
<a name='L699'>  <i><font color='green'>/* ori  $12,mid-low(codeloc)  */</font></i>
<a name='L700'>  tramp[7] = 0x358c0000 | (((<b>unsigned</b> <b>long</b>)codeloc &gt;&gt; 16) &amp; 0xffff);
<a name='L701'>  <i><font color='green'>/* dsll $25,$25,16 */</font></i>
<a name='L702'>  tramp[8] = 0x0019cc38;
<a name='L703'>  <i><font color='green'>/* dsll $12,$12,16 */</font></i>
<a name='L704'>  tramp[9] = 0x000c6438;
<a name='L705'>  <i><font color='green'>/* ori  $25,low(fn)  */</font></i>
<a name='L706'>  tramp[10] = 0x37390000 | ((<b>unsigned</b> <b>long</b>)<a href='../S/2334.html#L39' title='Defined at 39 in Modules/_ctypes/libffi/src/mips/n32.S.'>fn</a>  &amp; 0xffff);
<a name='L707'>  <i><font color='green'>/* jr   $25          */</font></i>
<a name='L708'>  tramp[11] = 0x03200008;
<a name='L709'>  <i><font color='green'>/* ori  $12,low(codeloc)  */</font></i>
<a name='L710'>  tramp[12] = 0x358c0000 | ((<b>unsigned</b> <b>long</b>)codeloc &amp; 0xffff);
<a name='L711'>
<a name='L712'><font color='darkred'>#endif</font>
<a name='L713'>
<a name='L714'>  closure-&gt;cif = cif;
<a name='L715'>  closure-&gt;fun = fun;
<a name='L716'>  closure-&gt;user_data = user_data;
<a name='L717'>
<a name='L718'><font color='darkred'>#ifdef</font> <a href='../S/2332.html#L35' title='Defined at 35 in Modules/_ctypes/libffi/src/mips/ffi.c.'>USE__BUILTIN___CLEAR_CACHE</a>
<a name='L719'>  __builtin___clear_cache(clear_location, clear_location + <a href='../D/1174.html' title='Multiple defined in 35 places.'>FFI_TRAMPOLINE_SIZE</a>);
<a name='L720'><font color='darkred'>#else</font>
<a name='L721'>  cacheflush (clear_location, <a href='../D/1174.html' title='Multiple defined in 35 places.'>FFI_TRAMPOLINE_SIZE</a>, ICACHE);
<a name='L722'><font color='darkred'>#endif</font>
<a name='L723'>  <b>return</b> <a href='../D/1165.html' title='Multiple defined in 3 places.'>FFI_OK</a>;
<a name='L724'><font color='red'>}</font>
<a name='L725'>
<a name='L726'><i><font color='green'>/*</font></i>
<a name='L727'><i><font color='green'> * Decodes the arguments to a function, which will be stored on the</font></i>
<a name='L728'><i><font color='green'> * stack. AR is the pointer to the beginning of the integer arguments</font></i>
<a name='L729'><i><font color='green'> * (and, depending upon the arguments, some floating-point arguments</font></i>
<a name='L730'><i><font color='green'> * as well). FPR is a pointer to the area where floating point</font></i>
<a name='L731'><i><font color='green'> * registers have been saved, if any.</font></i>
<a name='L732'><i><font color='green'> *</font></i>
<a name='L733'><i><font color='green'> * RVALUE is the location where the function return value will be</font></i>
<a name='L734'><i><font color='green'> * stored. CLOSURE is the prepared closure to invoke.</font></i>
<a name='L735'><i><font color='green'> *</font></i>
<a name='L736'><i><font color='green'> * This function should only be called from assembly, which is in</font></i>
<a name='L737'><i><font color='green'> * turn called from a trampoline.</font></i>
<a name='L738'><i><font color='green'> *</font></i>
<a name='L739'><i><font color='green'> * Returns the function return type.</font></i>
<a name='L740'><i><font color='green'> *</font></i>
<a name='L741'><i><font color='green'> * Based on the similar routine for sparc.</font></i>
<a name='L742'><i><font color='green'> */</font></i>
<a name='L743'><b>int</b>
<a name='L744'>ffi_closure_mips_inner_O32 (ffi_closure *closure,
<a name='L745'>                            <b>void</b> *rvalue, ffi_arg *ar,
<a name='L746'>                            <b>double</b> *fpr)
<a name='L747'><font color='red'>{</font>
<a name='L748'>  <a href='../D/8477.html' title='Multiple defined in 4 places.'>ffi_cif</a> *cif;
<a name='L749'>  <b>void</b> **avaluep;
<a name='L750'>  <a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *avalue;
<a name='L751'>  <a href='../D/8534.html' title='Multiple defined in 3 places.'>ffi_type</a> **arg_types;
<a name='L752'>  <b>int</b> i, avn, argn, seen_int;
<a name='L753'>
<a name='L754'>  cif = closure-&gt;cif;
<a name='L755'>  avalue = <a href='../D/6714.html' title='Multiple defined in 6 places.'>alloca</a> (cif-&gt;nargs * <b>sizeof</b> (<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>));
<a name='L756'>  avaluep = <a href='../D/6714.html' title='Multiple defined in 6 places.'>alloca</a> (cif-&gt;nargs * <b>sizeof</b> (<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>));
<a name='L757'>
<a name='L758'>  seen_int = (cif-&gt;abi == <a href='../D/1164.html' title='Multiple defined in 2 places.'>FFI_O32_SOFT_FLOAT</a>);
<a name='L759'>  argn = 0;
<a name='L760'>
<a name='L761'>  <b>if</b> ((cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &gt;&gt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 2)) == <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a>)
<a name='L762'>    <font color='red'>{</font>
<a name='L763'>      rvalue = (<b>void</b> *)(<a href='../D/5330.html' title='Multiple defined in 7 places.'>UINT32</a>)ar[0];
<a name='L764'>      argn = 1;
<a name='L765'>    <font color='red'>}</font>
<a name='L766'>
<a name='L767'>  i = 0;
<a name='L768'>  avn = cif-&gt;nargs;
<a name='L769'>  arg_types = cif-&gt;arg_types;
<a name='L770'>
<a name='L771'>  <b>while</b> (i &lt; avn)
<a name='L772'>    <font color='red'>{</font>
<a name='L773'>      <b>if</b> (i &lt; 2 &amp;&amp; !seen_int &amp;&amp;
<a name='L774'>          (arg_types[i]-&gt;type == <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a> ||
<a name='L775'>           arg_types[i]-&gt;type == <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a> ||
<a name='L776'>           arg_types[i]-&gt;type == <a href='../D/1184.html' title='Multiple defined in 8 places.'>FFI_TYPE_LONGDOUBLE</a>))
<a name='L777'>        <font color='red'>{</font>
<a name='L778'><font color='darkred'>#if</font> <b>defined</b>(__MIPSEB__) || <b>defined</b>(_MIPSEB)
<a name='L779'>          <b>if</b> (arg_types[i]-&gt;type == <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>)
<a name='L780'>            avaluep[i] = ((<b>char</b> *) &amp;fpr[i]) + <b>sizeof</b> (<b>float</b>);
<a name='L781'>          <b>else</b>
<a name='L782'><font color='darkred'>#endif</font>
<a name='L783'>            avaluep[i] = (<b>char</b> *) &amp;fpr[i];
<a name='L784'>        <font color='red'>}</font>
<a name='L785'>      <b>else</b>
<a name='L786'>        <font color='red'>{</font>
<a name='L787'>          <b>if</b> (arg_types[i]-&gt;alignment == 8 &amp;&amp; (argn &amp; 0x1))
<a name='L788'>            argn++;
<a name='L789'>          <b>switch</b> (arg_types[i]-&gt;type)
<a name='L790'>            <font color='red'>{</font>
<a name='L791'>              <b>case</b> <a href='../D/1189.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT8</a>:
<a name='L792'>                avaluep[i] = &amp;avalue[i];
<a name='L793'>                *(<a href='../D/4724.html' title='Multiple defined in 6 places.'>SINT8</a> *) &amp;avalue[i] = (<a href='../D/4724.html' title='Multiple defined in 6 places.'>SINT8</a>) ar[argn];
<a name='L794'>                <b>break</b>;
<a name='L795'>
<a name='L796'>              <b>case</b> <a href='../D/1222.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT8</a>:
<a name='L797'>                avaluep[i] = &amp;avalue[i];
<a name='L798'>                *(<a href='../D/5332.html' title='Multiple defined in 6 places.'>UINT8</a> *) &amp;avalue[i] = (<a href='../D/5332.html' title='Multiple defined in 6 places.'>UINT8</a>) ar[argn];
<a name='L799'>                <b>break</b>;
<a name='L800'>                  
<a name='L801'>              <b>case</b> <a href='../D/1186.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT16</a>:
<a name='L802'>                avaluep[i] = &amp;avalue[i];
<a name='L803'>                *(<a href='../D/4721.html' title='Multiple defined in 6 places.'>SINT16</a> *) &amp;avalue[i] = (<a href='../D/4721.html' title='Multiple defined in 6 places.'>SINT16</a>) ar[argn];
<a name='L804'>                <b>break</b>;
<a name='L805'>                  
<a name='L806'>              <b>case</b> <a href='../D/1219.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT16</a>:
<a name='L807'>                avaluep[i] = &amp;avalue[i];
<a name='L808'>                *(<a href='../D/5329.html' title='Multiple defined in 6 places.'>UINT16</a> *) &amp;avalue[i] = (<a href='../D/5329.html' title='Multiple defined in 6 places.'>UINT16</a>) ar[argn];
<a name='L809'>                <b>break</b>;
<a name='L810'>
<a name='L811'>              <b>default</b>:
<a name='L812'>                avaluep[i] = (<b>char</b> *) &amp;ar[argn];
<a name='L813'>                <b>break</b>;
<a name='L814'>            <font color='red'>}</font>
<a name='L815'>          seen_int = 1;
<a name='L816'>        <font color='red'>}</font>
<a name='L817'>      argn += <a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(arg_types[i]-&gt;size, <a href='../D/1169.html' title='Multiple defined in 9 places.'>FFI_SIZEOF_ARG</a>) / <a href='../D/1169.html' title='Multiple defined in 9 places.'>FFI_SIZEOF_ARG</a>;
<a name='L818'>      i++;
<a name='L819'>    <font color='red'>}</font>
<a name='L820'>
<a name='L821'>  <i><font color='green'>/* Invoke the closure. */</font></i>
<a name='L822'>  (closure-&gt;fun) (cif, rvalue, avaluep, closure-&gt;user_data);
<a name='L823'>
<a name='L824'>  <b>if</b> (cif-&gt;abi == <a href='../D/1164.html' title='Multiple defined in 2 places.'>FFI_O32_SOFT_FLOAT</a>)
<a name='L825'>    <font color='red'>{</font>
<a name='L826'>      <b>switch</b> (cif-&gt;rtype-&gt;type)
<a name='L827'>        <font color='red'>{</font>
<a name='L828'>        <b>case</b> <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>:
<a name='L829'>          <b>return</b> <a href='../D/1182.html' title='Multiple defined in 3 places.'>FFI_TYPE_INT</a>;
<a name='L830'>        <b>case</b> <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>:
<a name='L831'>          <b>return</b> <a href='../D/1221.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT64</a>;
<a name='L832'>        <b>default</b>:
<a name='L833'>          <b>return</b> cif-&gt;rtype-&gt;type;
<a name='L834'>        <font color='red'>}</font>
<a name='L835'>    <font color='red'>}</font>
<a name='L836'>  <b>else</b>
<a name='L837'>    <font color='red'>{</font>
<a name='L838'>      <b>return</b> cif-&gt;rtype-&gt;type;
<a name='L839'>    <font color='red'>}</font>
<a name='L840'><font color='red'>}</font>
<a name='L841'>
<a name='L842'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2333.html#L49' title='Defined at 49 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_MIPS_N32</a>)
<a name='L843'>
<a name='L844'><b>static</b> <b>void</b>
<a name='L845'><a href='../S/2332.html#L1006' title='Refered from 1006 in Modules/_ctypes/libffi/src/mips/ffi.c.'>copy_struct_N32</a>(<b>char</b> *target, <b>unsigned</b> offset, ffi_abi abi, ffi_type *type,
<a name='L846'>                <b>int</b> argn, <b>unsigned</b> arg_offset, ffi_arg *ar,
<a name='L847'>                ffi_arg *fpr, <b>int</b> soft_float)
<a name='L848'><font color='red'>{</font>
<a name='L849'>  <a href='../D/8534.html' title='Multiple defined in 3 places.'>ffi_type</a> **elt_typep = type-&gt;elements;
<a name='L850'>  <b>while</b>(*elt_typep)
<a name='L851'>    <font color='red'>{</font>
<a name='L852'>      <a href='../D/8534.html' title='Multiple defined in 3 places.'>ffi_type</a> *elt_type = *elt_typep;
<a name='L853'>      <b>unsigned</b> o;
<a name='L854'>      <b>char</b> *tp;
<a name='L855'>      <b>char</b> *argp;
<a name='L856'>      <b>char</b> *fpp;
<a name='L857'>
<a name='L858'>      o = <a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(offset, elt_type-&gt;alignment);
<a name='L859'>      arg_offset += o - offset;
<a name='L860'>      offset = o;
<a name='L861'>      argn += arg_offset / <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>);
<a name='L862'>      arg_offset = arg_offset % <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>);
<a name='L863'>
<a name='L864'>      argp = (<b>char</b> *)(ar + argn);
<a name='L865'>      fpp = (<b>char</b> *)(argn &gt;= 8 ? ar + argn : fpr + argn);
<a name='L866'>
<a name='L867'>      tp = target + offset;
<a name='L868'>
<a name='L869'>      <b>if</b> (elt_type-&gt;type == <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a> &amp;&amp; !soft_float)
<a name='L870'>        *(<b>double</b> *)tp = *(<b>double</b> *)fpp;
<a name='L871'>      <b>else</b>
<a name='L872'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(tp, argp + arg_offset, elt_type-&gt;size);
<a name='L873'>
<a name='L874'>      offset += elt_type-&gt;size;
<a name='L875'>      arg_offset += elt_type-&gt;size;
<a name='L876'>      elt_typep++;
<a name='L877'>      argn += arg_offset / <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>);
<a name='L878'>      arg_offset = arg_offset % <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>);
<a name='L879'>    <font color='red'>}</font>
<a name='L880'><font color='red'>}</font>
<a name='L881'>
<a name='L882'><i><font color='green'>/*</font></i>
<a name='L883'><i><font color='green'> * Decodes the arguments to a function, which will be stored on the</font></i>
<a name='L884'><i><font color='green'> * stack. AR is the pointer to the beginning of the integer</font></i>
<a name='L885'><i><font color='green'> * arguments. FPR is a pointer to the area where floating point</font></i>
<a name='L886'><i><font color='green'> * registers have been saved.</font></i>
<a name='L887'><i><font color='green'> *</font></i>
<a name='L888'><i><font color='green'> * RVALUE is the location where the function return value will be</font></i>
<a name='L889'><i><font color='green'> * stored. CLOSURE is the prepared closure to invoke.</font></i>
<a name='L890'><i><font color='green'> *</font></i>
<a name='L891'><i><font color='green'> * This function should only be called from assembly, which is in</font></i>
<a name='L892'><i><font color='green'> * turn called from a trampoline.</font></i>
<a name='L893'><i><font color='green'> *</font></i>
<a name='L894'><i><font color='green'> * Returns the function return flags.</font></i>
<a name='L895'><i><font color='green'> *</font></i>
<a name='L896'><i><font color='green'> */</font></i>
<a name='L897'><b>int</b>
<a name='L898'>ffi_closure_mips_inner_N32 (ffi_closure *closure,
<a name='L899'>                            <b>void</b> *rvalue, ffi_arg *ar,
<a name='L900'>                            ffi_arg *fpr)
<a name='L901'><font color='red'>{</font>
<a name='L902'>  <a href='../D/8477.html' title='Multiple defined in 4 places.'>ffi_cif</a> *cif;
<a name='L903'>  <b>void</b> **avaluep;
<a name='L904'>  <a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *avalue;
<a name='L905'>  <a href='../D/8534.html' title='Multiple defined in 3 places.'>ffi_type</a> **arg_types;
<a name='L906'>  <b>int</b> i, avn, argn;
<a name='L907'>  <b>int</b> soft_float;
<a name='L908'>  <a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a> *argp;
<a name='L909'>
<a name='L910'>  cif = closure-&gt;cif;
<a name='L911'>  soft_float = cif-&gt;abi == <a href='../D/1160.html' title='Multiple defined in 2 places.'>FFI_N64_SOFT_FLOAT</a>
<a name='L912'>    || cif-&gt;abi == <a href='../D/1158.html' title='Multiple defined in 2 places.'>FFI_N32_SOFT_FLOAT</a>;
<a name='L913'>  avalue = <a href='../D/6714.html' title='Multiple defined in 6 places.'>alloca</a> (cif-&gt;nargs * <b>sizeof</b> (<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>));
<a name='L914'>  avaluep = <a href='../D/6714.html' title='Multiple defined in 6 places.'>alloca</a> (cif-&gt;nargs * <b>sizeof</b> (<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>));
<a name='L915'>
<a name='L916'>  argn = 0;
<a name='L917'>
<a name='L918'>  <b>if</b> (cif-&gt;rstruct_flag)
<a name='L919'>    <font color='red'>{</font>
<a name='L920'><font color='darkred'>#if</font> _MIPS_SIM==<a href='../S/2333.html#L36' title='Defined at 36 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>_ABIN32</a>
<a name='L921'>      rvalue = (<b>void</b> *)(<a href='../D/5330.html' title='Multiple defined in 7 places.'>UINT32</a>)ar[0];
<a name='L922'><font color='darkred'>#else</font> <i><font color='green'>/* N64 */</font></i>
<a name='L923'>      rvalue = (<b>void</b> *)ar[0];
<a name='L924'><font color='darkred'>#endif</font>
<a name='L925'>      argn = 1;
<a name='L926'>    <font color='red'>}</font>
<a name='L927'>
<a name='L928'>  i = 0;
<a name='L929'>  avn = cif-&gt;nargs;
<a name='L930'>  arg_types = cif-&gt;arg_types;
<a name='L931'>
<a name='L932'>  <b>while</b> (i &lt; avn)
<a name='L933'>    <font color='red'>{</font>
<a name='L934'>      <b>if</b> (arg_types[i]-&gt;type == <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>
<a name='L935'>          || arg_types[i]-&gt;type == <a href='../D/1180.html' title='Multiple defined in 3 places.'>FFI_TYPE_DOUBLE</a>
<a name='L936'>          || arg_types[i]-&gt;type == <a href='../D/1184.html' title='Multiple defined in 8 places.'>FFI_TYPE_LONGDOUBLE</a>)
<a name='L937'>        <font color='red'>{</font>
<a name='L938'>          argp = (argn &gt;= 8 || soft_float) ? ar + argn : fpr + argn;
<a name='L939'>          <b>if</b> ((arg_types[i]-&gt;type == <a href='../D/1184.html' title='Multiple defined in 8 places.'>FFI_TYPE_LONGDOUBLE</a>) &amp;&amp; ((<b>unsigned</b>)argp &amp; (arg_types[i]-&gt;alignment-1)))
<a name='L940'>            <font color='red'>{</font>
<a name='L941'>              argp=(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>*)<a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(argp,arg_types[i]-&gt;alignment);
<a name='L942'>              argn++;
<a name='L943'>            <font color='red'>}</font>
<a name='L944'><font color='darkred'>#if</font> <b>defined</b>(__MIPSEB__) || <b>defined</b>(_MIPSEB)
<a name='L945'>          <b>if</b> (arg_types[i]-&gt;type == <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a> &amp;&amp; argn &lt; 8)
<a name='L946'>            avaluep[i] = ((<b>char</b> *) argp) + <b>sizeof</b> (<b>float</b>);
<a name='L947'>          <b>else</b>
<a name='L948'><font color='darkred'>#endif</font>
<a name='L949'>            avaluep[i] = (<b>char</b> *) argp;
<a name='L950'>        <font color='red'>}</font>
<a name='L951'>      <b>else</b>
<a name='L952'>        <font color='red'>{</font>
<a name='L953'>          <b>unsigned</b> type = arg_types[i]-&gt;type;
<a name='L954'>
<a name='L955'>          <b>if</b> (arg_types[i]-&gt;alignment &gt; <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>))
<a name='L956'>            argn = <a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(argn, arg_types[i]-&gt;alignment / <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>));
<a name='L957'>
<a name='L958'>          argp = ar + argn;
<a name='L959'>
<a name='L960'>          <i><font color='green'>/* The size of a pointer depends on the ABI */</font></i>
<a name='L961'>          <b>if</b> (type == <a href='../D/1185.html' title='Multiple defined in 3 places.'>FFI_TYPE_POINTER</a>)
<a name='L962'>            type = (cif-&gt;abi == <a href='../D/1159.html' title='Multiple defined in 2 places.'>FFI_N64</a> || cif-&gt;abi == <a href='../D/1160.html' title='Multiple defined in 2 places.'>FFI_N64_SOFT_FLOAT</a>)
<a name='L963'>              ? <a href='../D/1188.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT64</a> : <a href='../D/1187.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT32</a>;
<a name='L964'>
<a name='L965'>          <b>if</b> (soft_float &amp;&amp; type ==  <a href='../D/1181.html' title='Multiple defined in 3 places.'>FFI_TYPE_FLOAT</a>)
<a name='L966'>            type = <a href='../D/1220.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT32</a>;
<a name='L967'>
<a name='L968'>          <b>switch</b> (type)
<a name='L969'>            <font color='red'>{</font>
<a name='L970'>            <b>case</b> <a href='../D/1189.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT8</a>:
<a name='L971'>              avaluep[i] = &amp;avalue[i];
<a name='L972'>              *(<a href='../D/4724.html' title='Multiple defined in 6 places.'>SINT8</a> *) &amp;avalue[i] = (<a href='../D/4724.html' title='Multiple defined in 6 places.'>SINT8</a>) *argp;
<a name='L973'>              <b>break</b>;
<a name='L974'>
<a name='L975'>            <b>case</b> <a href='../D/1222.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT8</a>:
<a name='L976'>              avaluep[i] = &amp;avalue[i];
<a name='L977'>              *(<a href='../D/5332.html' title='Multiple defined in 6 places.'>UINT8</a> *) &amp;avalue[i] = (<a href='../D/5332.html' title='Multiple defined in 6 places.'>UINT8</a>) *argp;
<a name='L978'>              <b>break</b>;
<a name='L979'>
<a name='L980'>            <b>case</b> <a href='../D/1186.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT16</a>:
<a name='L981'>              avaluep[i] = &amp;avalue[i];
<a name='L982'>              *(<a href='../D/4721.html' title='Multiple defined in 6 places.'>SINT16</a> *) &amp;avalue[i] = (<a href='../D/4721.html' title='Multiple defined in 6 places.'>SINT16</a>) *argp;
<a name='L983'>              <b>break</b>;
<a name='L984'>
<a name='L985'>            <b>case</b> <a href='../D/1219.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT16</a>:
<a name='L986'>              avaluep[i] = &amp;avalue[i];
<a name='L987'>              *(<a href='../D/5329.html' title='Multiple defined in 6 places.'>UINT16</a> *) &amp;avalue[i] = (<a href='../D/5329.html' title='Multiple defined in 6 places.'>UINT16</a>) *argp;
<a name='L988'>              <b>break</b>;
<a name='L989'>
<a name='L990'>            <b>case</b> <a href='../D/1187.html' title='Multiple defined in 3 places.'>FFI_TYPE_SINT32</a>:
<a name='L991'>              avaluep[i] = &amp;avalue[i];
<a name='L992'>              *(<a href='../D/4722.html' title='Multiple defined in 6 places.'>SINT32</a> *) &amp;avalue[i] = (<a href='../D/4722.html' title='Multiple defined in 6 places.'>SINT32</a>) *argp;
<a name='L993'>              <b>break</b>;
<a name='L994'>
<a name='L995'>            <b>case</b> <a href='../D/1220.html' title='Multiple defined in 3 places.'>FFI_TYPE_UINT32</a>:
<a name='L996'>              avaluep[i] = &amp;avalue[i];
<a name='L997'>              *(<a href='../D/5330.html' title='Multiple defined in 7 places.'>UINT32</a> *) &amp;avalue[i] = (<a href='../D/5330.html' title='Multiple defined in 7 places.'>UINT32</a>) *argp;
<a name='L998'>              <b>break</b>;
<a name='L999'>
<a name='L1000'>            <b>case</b> <a href='../D/1202.html' title='Multiple defined in 3 places.'>FFI_TYPE_STRUCT</a>:
<a name='L1001'>              <b>if</b> (argn &lt; 8)
<a name='L1002'>                <font color='red'>{</font>
<a name='L1003'>                  <i><font color='green'>/* Allocate space for the struct as at least part of</font></i>
<a name='L1004'><i><font color='green'>                     it was passed in registers.  */</font></i>
<a name='L1005'>                  avaluep[i] = <a href='../D/6714.html' title='Multiple defined in 6 places.'>alloca</a>(arg_types[i]-&gt;size);
<a name='L1006'>                  <a href='../S/2332.html#L845' title='Defined at 845 in Modules/_ctypes/libffi/src/mips/ffi.c.'>copy_struct_N32</a>(avaluep[i], 0, cif-&gt;abi, arg_types[i],
<a name='L1007'>                                  argn, 0, ar, fpr, soft_float);
<a name='L1008'>
<a name='L1009'>                  <b>break</b>;
<a name='L1010'>                <font color='red'>}</font>
<a name='L1011'>              <i><font color='green'>/* Else fall through.  */</font></i>
<a name='L1012'>            <b>default</b>:
<a name='L1013'>              avaluep[i] = (<b>char</b> *) argp;
<a name='L1014'>              <b>break</b>;
<a name='L1015'>            <font color='red'>}</font>
<a name='L1016'>        <font color='red'>}</font>
<a name='L1017'>      argn += <a href='../D/55.html' title='Multiple defined in 4 places.'>ALIGN</a>(arg_types[i]-&gt;size, <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>)) / <b>sizeof</b>(<a href='../D/8471.html' title='Multiple defined in 27 places.'>ffi_arg</a>);
<a name='L1018'>      i++;
<a name='L1019'>    <font color='red'>}</font>
<a name='L1020'>
<a name='L1021'>  <i><font color='green'>/* Invoke the closure. */</font></i>
<a name='L1022'>  (closure-&gt;fun) (cif, rvalue, avaluep, closure-&gt;user_data);
<a name='L1023'>
<a name='L1024'>  <b>return</b> cif-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &gt;&gt; (<a href='../S/2333.html#L70' title='Defined at 70 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>FFI_FLAG_BITS</a> * 8);
<a name='L1025'><font color='red'>}</font>
<a name='L1026'>
<a name='L1027'><font color='darkred'>#endif</font> <i><font color='green'>/* FFI_MIPS_N32 */</font></i>
<a name='L1028'>
<a name='L1029'><font color='darkred'>#endif</font> <i><font color='green'>/* FFI_CLOSURES */</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L65'>[^]</a><a href='#L898'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
