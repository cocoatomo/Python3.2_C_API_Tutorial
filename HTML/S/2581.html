<html>
<head>
<title>Modules/_multiprocessing/connection.h</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/<a href='../files/3386.html'>_multiprocessing</a>/connection.h</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L37'>[^]</a><a href='#L433'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2><a href='../J/380.html' title='Multiple included from 9 places.'>INCLUDED FROM</a></h2>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L37' title='Defined at 37.'>connection_new</a>
<li><a href='#L79' title='Defined at 79.'>connection_dealloc</a>
<li><a href='#L97' title='Defined at 97.'>connection_sendbytes</a>
<li><a href='#L153' title='Defined at 153.'>connection_recvbytes</a>
<li><a href='#L197' title='Defined at 197.'>connection_recvbytes_into</a>
<li><a href='#L268' title='Defined at 268.'>connection_send_obj</a>
<li><a href='#L301' title='Defined at 301.'>connection_recv_obj</a>
<li><a href='#L345' title='Defined at 345.'>connection_poll</a>
<li><a href='#L383' title='Defined at 383.'>connection_fileno</a>
<li><a href='#L393' title='Defined at 393.'>connection_close</a>
<li><a href='#L406' title='Defined at 406.'>connection_repr</a>
<li><a href='#L421' title='Defined at 421.'>connection_closed</a>
<li><a href='#L427' title='Defined at 427.'>connection_readable</a>
<li><a href='#L433' title='Defined at 433.'>connection_writable</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*</font></i>
<a name='L2'><i><font color='green'> * Definition of a `Connection` type.</font></i>
<a name='L3'><i><font color='green'> * Used by `socket_connection.c` and `pipe_connection.c`.</font></i>
<a name='L4'><i><font color='green'> *</font></i>
<a name='L5'><i><font color='green'> * connection.h</font></i>
<a name='L6'><i><font color='green'> *</font></i>
<a name='L7'><i><font color='green'> * Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt</font></i>
<a name='L8'><i><font color='green'> */</font></i>
<a name='L9'>
<a name='L10'><font color='darkred'>#ifndef</font> <a href='../S/2581.html#L11' title='Defined at 11 in Modules/_multiprocessing/connection.h.'>CONNECTION_H</a>
<a name='L11'><font color='darkred'>#define</font> <a href='../S/2581.html#L10' title='Refered from 10 in Modules/_multiprocessing/connection.h.'>CONNECTION_H</a>
<a name='L12'>
<a name='L13'><i><font color='green'>/*</font></i>
<a name='L14'><i><font color='green'> * Read/write flags</font></i>
<a name='L15'><i><font color='green'> */</font></i>
<a name='L16'>
<a name='L17'><font color='darkred'>#define</font> <a href='../R/3903.html' title='Multiple refered from 3 places.'>READABLE</a> 1
<a name='L18'><font color='darkred'>#define</font> <a href='../R/4915.html' title='Multiple refered from 9 places.'>WRITABLE</a> 2
<a name='L19'>
<a name='L20'><font color='darkred'>#define</font> <a href='../R/499.html' title='Multiple refered from 4 places.'>CHECK_READABLE</a>(self) \
<a name='L21'>    <b>if</b> (!(self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/2581.html#L17' title='Defined at 17 in Modules/_multiprocessing/connection.h.'>READABLE</a>)) <font color='red'>{</font> \
<a name='L22'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_IOError, "connection is write-only"); \
<a name='L23'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; \
<a name='L24'>    <font color='red'>}</font>
<a name='L25'>
<a name='L26'><font color='darkred'>#define</font> <a href='../R/508.html' title='Multiple refered from 2 places.'>CHECK_WRITABLE</a>(self) \
<a name='L27'>    <b>if</b> (!(self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>)) <font color='red'>{</font> \
<a name='L28'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_IOError, "connection is read-only"); \
<a name='L29'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>; \
<a name='L30'>    <font color='red'>}</font>
<a name='L31'>
<a name='L32'><i><font color='green'>/*</font></i>
<a name='L33'><i><font color='green'> * Allocation and deallocation</font></i>
<a name='L34'><i><font color='green'> */</font></i>
<a name='L35'>
<a name='L36'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L37'><a href='../S/2581.html#L524' title='Refered from 524 in Modules/_multiprocessing/connection.h.'>connection_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L38'><font color='red'>{</font>
<a name='L39'>    <a href='../S/2583.html#L176' title='Defined at 176 in Modules/_multiprocessing/multiprocessing.h.'>ConnectionObject</a> *self;
<a name='L40'>    <a href='../S/2583.html#L40' title='Defined at 40 in Modules/_multiprocessing/multiprocessing.h.'>HANDLE</a> handle;
<a name='L41'>    <a href='../S/2583.html#L42' title='Defined at 42 in Modules/_multiprocessing/multiprocessing.h.'>BOOL</a> readable = <a href='../D/5177.html' title='Multiple defined in 3 places.'>TRUE</a>, writable = <a href='../D/5177.html' title='Multiple defined in 3 places.'>TRUE</a>;
<a name='L42'>
<a name='L43'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"handle", "readable", "writable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L44'>
<a name='L45'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, <a href='../D/1330.html' title='Multiple defined in 2 places.'>F_HANDLE</a> "|ii", kwlist,
<a name='L46'>                                     &amp;handle, &amp;readable, &amp;writable))
<a name='L47'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L48'>
<a name='L49'>    <b>if</b> (handle == <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a> || (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)handle &lt; 0) <font color='red'>{</font>
<a name='L50'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_IOError, "invalid handle %zd",
<a name='L51'>                     (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)handle);
<a name='L52'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L53'>    <font color='red'>}</font>
<a name='L54'>
<a name='L55'>    <b>if</b> (!readable &amp;&amp; !writable) <font color='red'>{</font>
<a name='L56'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L57'>                        "either readable or writable must be true");
<a name='L58'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L59'>    <font color='red'>}</font>
<a name='L60'>
<a name='L61'>    self = PyObject_New(<a href='../S/2583.html#L176' title='Defined at 176 in Modules/_multiprocessing/multiprocessing.h.'>ConnectionObject</a>, type);
<a name='L62'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L63'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L64'>
<a name='L65'>    self-&gt;weakreflist = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L66'>    self-&gt;handle = handle;
<a name='L67'>    self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = 0;
<a name='L68'>
<a name='L69'>    <b>if</b> (readable)
<a name='L70'>        self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> |= <a href='../S/2581.html#L17' title='Defined at 17 in Modules/_multiprocessing/connection.h.'>READABLE</a>;
<a name='L71'>    <b>if</b> (writable)
<a name='L72'>        self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> |= <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>;
<a name='L73'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &gt;= 1 &amp;&amp; self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &lt;= 3);
<a name='L74'>
<a name='L75'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)self;
<a name='L76'><font color='red'>}</font>
<a name='L77'>
<a name='L78'><b>static</b> <b>void</b>
<a name='L79'><a href='../S/2581.html#L490' title='Refered from 490 in Modules/_multiprocessing/connection.h.'>connection_dealloc</a>(ConnectionObject* self)
<a name='L80'><font color='red'>{</font>
<a name='L81'>    <b>if</b> (self-&gt;weakreflist != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L82'>        <a href='../S/2830.html#L872' title='Defined at 872 in Objects/weakrefobject.c.'>PyObject_ClearWeakRefs</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)self);
<a name='L83'>
<a name='L84'>    <b>if</b> (self-&gt;handle != <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a>) <font color='red'>{</font>
<a name='L85'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L86'>        <a href='../D/565.html' title='Multiple defined in 3 places.'>CLOSE</a>(self-&gt;handle);
<a name='L87'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L88'>    <font color='red'>}</font>
<a name='L89'>    PyObject_Del(self);
<a name='L90'><font color='red'>}</font>
<a name='L91'>
<a name='L92'><i><font color='green'>/*</font></i>
<a name='L93'><i><font color='green'> * Functions for transferring buffers</font></i>
<a name='L94'><i><font color='green'> */</font></i>
<a name='L95'>
<a name='L96'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L97'><a href='../S/2581.html#L443' title='Refered from 443 in Modules/_multiprocessing/connection.h.'>connection_sendbytes</a>(ConnectionObject *self, PyObject *args)
<a name='L98'><font color='red'>{</font>
<a name='L99'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuffer;
<a name='L100'>    <b>char</b> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L101'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length, offset=0, size=<a href='../D/2626.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MIN</a>;
<a name='L102'>    <b>int</b> res;
<a name='L103'>
<a name='L104'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, <a href='../D/1337.html' title='Multiple defined in 2 places.'>F_RBUFFER</a> "*|" <a href='../D/1334.html' title='Multiple defined in 2 places.'>F_PY_SSIZE_T</a> <a href='../D/1334.html' title='Multiple defined in 2 places.'>F_PY_SSIZE_T</a>,
<a name='L105'>                          &amp;pbuffer, &amp;offset, &amp;size))
<a name='L106'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L107'>    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = pbuffer.buf;
<a name='L108'>    length = pbuffer.len;
<a name='L109'>
<a name='L110'>    <a href='../S/2581.html#L26' title='Defined at 26 in Modules/_multiprocessing/connection.h.'>CHECK_WRITABLE</a>(self); <i><font color='green'>/* XXX release buffer in case of failure */</font></i>
<a name='L111'>
<a name='L112'>    <b>if</b> (offset &lt; 0) <font color='red'>{</font>
<a name='L113'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuffer);
<a name='L114'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "offset is negative");
<a name='L115'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L116'>    <font color='red'>}</font>
<a name='L117'>    <b>if</b> (length &lt; offset) <font color='red'>{</font>
<a name='L118'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuffer);
<a name='L119'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "buffer length &lt; offset");
<a name='L120'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L121'>    <font color='red'>}</font>
<a name='L122'>
<a name='L123'>    <b>if</b> (size == <a href='../D/2626.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MIN</a>) <font color='red'>{</font>
<a name='L124'>        size = length - offset;
<a name='L125'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L126'>        <b>if</b> (size &lt; 0) <font color='red'>{</font>
<a name='L127'>            <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuffer);
<a name='L128'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "size is negative");
<a name='L129'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L130'>        <font color='red'>}</font>
<a name='L131'>        <b>if</b> (offset + size &gt; length) <font color='red'>{</font>
<a name='L132'>            <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuffer);
<a name='L133'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L134'>                            "buffer length &lt; offset + size");
<a name='L135'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L136'>        <font color='red'>}</font>
<a name='L137'>    <font color='red'>}</font>
<a name='L138'>
<a name='L139'>    res = <a href='../D/7744.html' title='Multiple defined in 2 places.'>conn_send_string</a>(self, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + offset, size);
<a name='L140'>
<a name='L141'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuffer);
<a name='L142'>    <b>if</b> (res &lt; 0) <font color='red'>{</font>
<a name='L143'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L144'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L145'>        <b>else</b>
<a name='L146'>            <b>return</b> <a href='../S/2582.html#L27' title='Defined at 27 in Modules/_multiprocessing/multiprocessing.c.'>mp_SetError</a>(PyExc_IOError, res);
<a name='L147'>    <font color='red'>}</font>
<a name='L148'>
<a name='L149'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L150'><font color='red'>}</font>
<a name='L151'>
<a name='L152'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L153'><a href='../S/2581.html#L445' title='Refered from 445 in Modules/_multiprocessing/connection.h.'>connection_recvbytes</a>(ConnectionObject *self, PyObject *args)
<a name='L154'><font color='red'>{</font>
<a name='L155'>    <b>char</b> *freeme = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L156'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> res, maxlength = <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>;
<a name='L157'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L158'>
<a name='L159'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|" <a href='../D/1334.html' title='Multiple defined in 2 places.'>F_PY_SSIZE_T</a>, &amp;maxlength))
<a name='L160'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L161'>
<a name='L162'>    <a href='../S/2581.html#L20' title='Defined at 20 in Modules/_multiprocessing/connection.h.'>CHECK_READABLE</a>(self);
<a name='L163'>
<a name='L164'>    <b>if</b> (maxlength &lt; 0) <font color='red'>{</font>
<a name='L165'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "maxlength &lt; 0");
<a name='L166'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L167'>    <font color='red'>}</font>
<a name='L168'>
<a name='L169'>    res = <a href='../D/7743.html' title='Multiple defined in 2 places.'>conn_recv_string</a>(self, self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, <a href='../S/2583.html#L168' title='Defined at 168 in Modules/_multiprocessing/multiprocessing.h.'>CONNECTION_BUFFER_SIZE</a>,
<a name='L170'>                           &amp;freeme, maxlength);
<a name='L171'>
<a name='L172'>    <b>if</b> (res &lt; 0) <font color='red'>{</font>
<a name='L173'>        <b>if</b> (res == <a href='../S/2583.html#L123' title='Defined at 123 in Modules/_multiprocessing/multiprocessing.h.'>MP_BAD_MESSAGE_LENGTH</a>) <font color='red'>{</font>
<a name='L174'>            <b>if</b> ((self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>) == 0) <font color='red'>{</font>
<a name='L175'>                <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L176'>                <a href='../D/565.html' title='Multiple defined in 3 places.'>CLOSE</a>(self-&gt;handle);
<a name='L177'>                <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L178'>                self-&gt;handle = <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a>;
<a name='L179'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L180'>                self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>;
<a name='L181'>            <font color='red'>}</font>
<a name='L182'>        <font color='red'>}</font>
<a name='L183'>        <a href='../S/2582.html#L27' title='Defined at 27 in Modules/_multiprocessing/multiprocessing.c.'>mp_SetError</a>(PyExc_IOError, res);
<a name='L184'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L185'>        <b>if</b> (freeme == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L186'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, res);
<a name='L187'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L188'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(freeme, res);
<a name='L189'>            <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(freeme);
<a name='L190'>        <font color='red'>}</font>
<a name='L191'>    <font color='red'>}</font>
<a name='L192'>
<a name='L193'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L194'><font color='red'>}</font>
<a name='L195'>
<a name='L196'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L197'><a href='../S/2581.html#L447' title='Refered from 447 in Modules/_multiprocessing/connection.h.'>connection_recvbytes_into</a>(ConnectionObject *self, PyObject *args)
<a name='L198'><font color='red'>{</font>
<a name='L199'>    <b>char</b> *freeme = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L200'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> res, length, offset = 0;
<a name='L201'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L202'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> pbuf;
<a name='L203'>
<a name='L204'>    <a href='../S/2581.html#L20' title='Defined at 20 in Modules/_multiprocessing/connection.h.'>CHECK_READABLE</a>(self);
<a name='L205'>
<a name='L206'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "w*|" <a href='../D/1334.html' title='Multiple defined in 2 places.'>F_PY_SSIZE_T</a>,
<a name='L207'>                          &amp;pbuf, &amp;offset))
<a name='L208'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L209'>
<a name='L210'>    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = pbuf.buf;
<a name='L211'>    length = pbuf.len;
<a name='L212'>
<a name='L213'>    <b>if</b> (offset &lt; 0) <font color='red'>{</font>
<a name='L214'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "negative offset");
<a name='L215'>        <b>goto</b> _error;
<a name='L216'>    <font color='red'>}</font>
<a name='L217'>
<a name='L218'>    <b>if</b> (offset &gt; length) <font color='red'>{</font>
<a name='L219'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "offset too large");
<a name='L220'>        <b>goto</b> _error;
<a name='L221'>    <font color='red'>}</font>
<a name='L222'>
<a name='L223'>    res = <a href='../D/7743.html' title='Multiple defined in 2 places.'>conn_recv_string</a>(self, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>+offset, length-offset,
<a name='L224'>                           &amp;freeme, <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>);
<a name='L225'>
<a name='L226'>    <b>if</b> (res &lt; 0) <font color='red'>{</font>
<a name='L227'>        <b>if</b> (res == <a href='../S/2583.html#L123' title='Defined at 123 in Modules/_multiprocessing/multiprocessing.h.'>MP_BAD_MESSAGE_LENGTH</a>) <font color='red'>{</font>
<a name='L228'>            <b>if</b> ((self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>) == 0) <font color='red'>{</font>
<a name='L229'>                <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L230'>                <a href='../D/565.html' title='Multiple defined in 3 places.'>CLOSE</a>(self-&gt;handle);
<a name='L231'>                <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L232'>                self-&gt;handle = <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a>;
<a name='L233'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L234'>                self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>;
<a name='L235'>            <font color='red'>}</font>
<a name='L236'>        <font color='red'>}</font>
<a name='L237'>        <a href='../S/2582.html#L27' title='Defined at 27 in Modules/_multiprocessing/multiprocessing.c.'>mp_SetError</a>(PyExc_IOError, res);
<a name='L238'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L239'>        <b>if</b> (freeme == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L240'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/3409.html' title='Multiple defined in 3 places.'>PyInt_FromSsize_t</a>(res);
<a name='L241'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L242'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../D/3601.html' title='Multiple defined in 2 places.'>PyObject_CallFunction</a>(BufferTooShort,
<a name='L243'>                                           <a href='../D/1337.html' title='Multiple defined in 2 places.'>F_RBUFFER</a> "#",
<a name='L244'>                                           freeme, res);
<a name='L245'>            <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(freeme);
<a name='L246'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) <font color='red'>{</font>
<a name='L247'>                <a href='../S/3106.html#L53' title='Defined at 53 in Python/errors.c.'>PyErr_SetObject</a>(BufferTooShort, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L248'>                Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L249'>            <font color='red'>}</font>
<a name='L250'>            <b>goto</b> _error;
<a name='L251'>        <font color='red'>}</font>
<a name='L252'>    <font color='red'>}</font>
<a name='L253'>
<a name='L254'>_cleanup:
<a name='L255'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;pbuf);
<a name='L256'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L257'>
<a name='L258'>_error:
<a name='L259'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L260'>    <b>goto</b> _cleanup;
<a name='L261'><font color='red'>}</font>
<a name='L262'>
<a name='L263'><i><font color='green'>/*</font></i>
<a name='L264'><i><font color='green'> * Functions for transferring objects</font></i>
<a name='L265'><i><font color='green'> */</font></i>
<a name='L266'>
<a name='L267'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L268'><a href='../S/2581.html#L451' title='Refered from 451 in Modules/_multiprocessing/connection.h.'>connection_send_obj</a>(ConnectionObject *self, PyObject *obj)
<a name='L269'><font color='red'>{</font>
<a name='L270'>    <b>char</b> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L271'>    <b>int</b> res;
<a name='L272'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length;
<a name='L273'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pickled_string = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L274'>
<a name='L275'>    <a href='../S/2581.html#L26' title='Defined at 26 in Modules/_multiprocessing/connection.h.'>CHECK_WRITABLE</a>(self);
<a name='L276'>
<a name='L277'>    pickled_string = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(<a href='../S/2588.html#L6006' title='Defined at 6006 in Modules/_pickle.c.'>pickle_dumps</a>, obj,
<a name='L278'>                                                  pickle_protocol, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L279'>    <b>if</b> (!pickled_string)
<a name='L280'>        <b>goto</b> failure;
<a name='L281'>
<a name='L282'>    <b>if</b> (<a href='../S/2779.html#L528' title='Defined at 528 in Objects/bytesobject.c.'>PyBytes_AsStringAndSize</a>(pickled_string, &amp;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, &amp;length) &lt; 0)
<a name='L283'>        <b>goto</b> failure;
<a name='L284'>
<a name='L285'>    res = <a href='../D/7744.html' title='Multiple defined in 2 places.'>conn_send_string</a>(self, <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, (<b>int</b>)length);
<a name='L286'>
<a name='L287'>    <b>if</b> (res &lt; 0) <font color='red'>{</font>
<a name='L288'>        <a href='../S/2582.html#L27' title='Defined at 27 in Modules/_multiprocessing/multiprocessing.c.'>mp_SetError</a>(PyExc_IOError, res);
<a name='L289'>        <b>goto</b> failure;
<a name='L290'>    <font color='red'>}</font>
<a name='L291'>
<a name='L292'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(pickled_string);
<a name='L293'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L294'>
<a name='L295'>  failure:
<a name='L296'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(pickled_string);
<a name='L297'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L298'><font color='red'>}</font>
<a name='L299'>
<a name='L300'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L301'><a href='../S/2581.html#L453' title='Refered from 453 in Modules/_multiprocessing/connection.h.'>connection_recv_obj</a>(ConnectionObject *self)
<a name='L302'><font color='red'>{</font>
<a name='L303'>    <b>char</b> *freeme = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L304'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> res;
<a name='L305'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *temp = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L306'>
<a name='L307'>    <a href='../S/2581.html#L20' title='Defined at 20 in Modules/_multiprocessing/connection.h.'>CHECK_READABLE</a>(self);
<a name='L308'>
<a name='L309'>    res = <a href='../D/7743.html' title='Multiple defined in 2 places.'>conn_recv_string</a>(self, self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, <a href='../S/2583.html#L168' title='Defined at 168 in Modules/_multiprocessing/multiprocessing.h.'>CONNECTION_BUFFER_SIZE</a>,
<a name='L310'>                           &amp;freeme, <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>);
<a name='L311'>
<a name='L312'>    <b>if</b> (res &lt; 0) <font color='red'>{</font>
<a name='L313'>        <b>if</b> (res == <a href='../S/2583.html#L123' title='Defined at 123 in Modules/_multiprocessing/multiprocessing.h.'>MP_BAD_MESSAGE_LENGTH</a>) <font color='red'>{</font>
<a name='L314'>            <b>if</b> ((self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>) == 0) <font color='red'>{</font>
<a name='L315'>                <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L316'>                <a href='../D/565.html' title='Multiple defined in 3 places.'>CLOSE</a>(self-&gt;handle);
<a name='L317'>                <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L318'>                self-&gt;handle = <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a>;
<a name='L319'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L320'>                self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>;
<a name='L321'>            <font color='red'>}</font>
<a name='L322'>        <font color='red'>}</font>
<a name='L323'>        <a href='../S/2582.html#L27' title='Defined at 27 in Modules/_multiprocessing/multiprocessing.c.'>mp_SetError</a>(PyExc_IOError, res);
<a name='L324'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L325'>        <b>if</b> (freeme == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L326'>            temp = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(self-&gt;<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, res);
<a name='L327'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L328'>            temp = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(freeme, res);
<a name='L329'>            <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(freeme);
<a name='L330'>        <font color='red'>}</font>
<a name='L331'>    <font color='red'>}</font>
<a name='L332'>
<a name='L333'>    <b>if</b> (temp)
<a name='L334'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2775.html#L2358' title='Defined at 2358 in Objects/abstract.c.'>PyObject_CallFunctionObjArgs</a>(<a href='../S/2588.html#L6134' title='Defined at 6134 in Modules/_pickle.c.'>pickle_loads</a>,
<a name='L335'>                                              temp, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L336'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(temp);
<a name='L337'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L338'><font color='red'>}</font>
<a name='L339'>
<a name='L340'><i><font color='green'>/*</font></i>
<a name='L341'><i><font color='green'> * Other functions</font></i>
<a name='L342'><i><font color='green'> */</font></i>
<a name='L343'>
<a name='L344'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L345'><a href='../S/2581.html#L456' title='Refered from 456 in Modules/_multiprocessing/connection.h.'>connection_poll</a>(ConnectionObject *self, PyObject *args)
<a name='L346'><font color='red'>{</font>
<a name='L347'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *timeout_obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L348'>    <b>double</b> timeout = 0.0;
<a name='L349'>    <b>int</b> res;
<a name='L350'>
<a name='L351'>    <a href='../S/2581.html#L20' title='Defined at 20 in Modules/_multiprocessing/connection.h.'>CHECK_READABLE</a>(self);
<a name='L352'>
<a name='L353'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|O", &amp;timeout_obj))
<a name='L354'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L355'>
<a name='L356'>    <b>if</b> (timeout_obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L357'>        timeout = 0.0;
<a name='L358'>    <font color='red'>}</font> <b>else</b> <b>if</b> (timeout_obj == Py_None) <font color='red'>{</font>
<a name='L359'>        timeout = -1.0;                                 <i><font color='green'>/* block forever */</font></i>
<a name='L360'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L361'>        timeout = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(timeout_obj);
<a name='L362'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L363'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L364'>        <b>if</b> (timeout &lt; 0.0)
<a name='L365'>            timeout = 0.0;
<a name='L366'>    <font color='red'>}</font>
<a name='L367'>
<a name='L368'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L369'>    res = <a href='../D/7742.html' title='Multiple defined in 2 places.'>conn_poll</a>(self, timeout, _save);
<a name='L370'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L371'>
<a name='L372'>    <b>switch</b> (res) <font color='red'>{</font>
<a name='L373'>    <b>case</b> <a href='../D/5177.html' title='Multiple defined in 3 places.'>TRUE</a>:
<a name='L374'>        Py_RETURN_TRUE;
<a name='L375'>    <b>case</b> <a href='../D/1087.html' title='Multiple defined in 3 places.'>FALSE</a>:
<a name='L376'>        Py_RETURN_FALSE;
<a name='L377'>    <b>default</b>:
<a name='L378'>        <b>return</b> <a href='../S/2582.html#L27' title='Defined at 27 in Modules/_multiprocessing/multiprocessing.c.'>mp_SetError</a>(PyExc_IOError, res);
<a name='L379'>    <font color='red'>}</font>
<a name='L380'><font color='red'>}</font>
<a name='L381'>
<a name='L382'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L383'><a href='../S/2581.html#L458' title='Refered from 458 in Modules/_multiprocessing/connection.h.'>connection_fileno</a>(ConnectionObject* self)
<a name='L384'><font color='red'>{</font>
<a name='L385'>    <b>if</b> (self-&gt;handle == <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a>) <font color='red'>{</font>
<a name='L386'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_IOError, "handle is invalid");
<a name='L387'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L388'>    <font color='red'>}</font>
<a name='L389'>    <b>return</b> <a href='../S/2583.html#L149' title='Defined at 149 in Modules/_multiprocessing/multiprocessing.h.'>PyInt_FromLong</a>((<b>long</b>)self-&gt;handle);
<a name='L390'><font color='red'>}</font>
<a name='L391'>
<a name='L392'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L393'><a href='../S/2581.html#L460' title='Refered from 460 in Modules/_multiprocessing/connection.h.'>connection_close</a>(ConnectionObject *self)
<a name='L394'><font color='red'>{</font>
<a name='L395'>    <b>if</b> (self-&gt;handle != <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a>) <font color='red'>{</font>
<a name='L396'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L397'>        <a href='../D/565.html' title='Multiple defined in 3 places.'>CLOSE</a>(self-&gt;handle);
<a name='L398'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L399'>        self-&gt;handle = <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a>;
<a name='L400'>    <font color='red'>}</font>
<a name='L401'>
<a name='L402'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L403'><font color='red'>}</font>
<a name='L404'>
<a name='L405'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L406'><a href='../S/2581.html#L495' title='Refered from 495 in Modules/_multiprocessing/connection.h.'>connection_repr</a>(ConnectionObject *self)
<a name='L407'><font color='red'>{</font>
<a name='L408'>    <b>static</b> <b>char</b> *conn_type[] = <font color='red'>{</font>"read-only", "write-only", "read-write"<font color='red'>}</font>;
<a name='L409'>
<a name='L410'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &gt;= 1 &amp;&amp; self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &lt;= 3);
<a name='L411'>    <b>return</b> <a href='../D/1305.html' title='Multiple defined in 2 places.'>FROM_FORMAT</a>("&lt;%s %s, handle %zd&gt;",
<a name='L412'>                       conn_type[self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> - 1],
<a name='L413'>                       <a href='../D/613.html' title='Multiple defined in 2 places.'>CONNECTION_NAME</a>, (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)self-&gt;handle);
<a name='L414'><font color='red'>}</font>
<a name='L415'>
<a name='L416'><i><font color='green'>/*</font></i>
<a name='L417'><i><font color='green'> * Getters and setters</font></i>
<a name='L418'><i><font color='green'> */</font></i>
<a name='L419'>
<a name='L420'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L421'><a href='../S/2581.html#L467' title='Refered from 467 in Modules/_multiprocessing/connection.h.'>connection_closed</a>(ConnectionObject *self, <b>void</b> *closure)
<a name='L422'><font color='red'>{</font>
<a name='L423'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)(self-&gt;handle == <a href='../S/2583.html#L47' title='Defined at 47 in Modules/_multiprocessing/multiprocessing.h.'>INVALID_HANDLE_VALUE</a>));
<a name='L424'><font color='red'>}</font>
<a name='L425'>
<a name='L426'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L427'><a href='../S/2581.html#L469' title='Refered from 469 in Modules/_multiprocessing/connection.h.'>connection_readable</a>(ConnectionObject *self, <b>void</b> *closure)
<a name='L428'><font color='red'>{</font>
<a name='L429'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)(self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/2581.html#L17' title='Defined at 17 in Modules/_multiprocessing/connection.h.'>READABLE</a>));
<a name='L430'><font color='red'>}</font>
<a name='L431'>
<a name='L432'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L433'><a href='../S/2581.html#L471' title='Refered from 471 in Modules/_multiprocessing/connection.h.'>connection_writable</a>(ConnectionObject *self, <b>void</b> *closure)
<a name='L434'><font color='red'>{</font>
<a name='L435'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)(self-&gt;<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/2581.html#L18' title='Defined at 18 in Modules/_multiprocessing/connection.h.'>WRITABLE</a>));
<a name='L436'><font color='red'>}</font>
<a name='L437'>
<a name='L438'><i><font color='green'>/*</font></i>
<a name='L439'><i><font color='green'> * Tables</font></i>
<a name='L440'><i><font color='green'> */</font></i>
<a name='L441'>
<a name='L442'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> connection_methods[] = <font color='red'>{</font>
<a name='L443'>    <font color='red'>{</font>"send_bytes", (PyCFunction)<a href='../S/2581.html#L97' title='Defined at 97 in Modules/_multiprocessing/connection.h.'>connection_sendbytes</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L444'>     "send the byte data from a readable buffer-like object"<font color='red'>}</font>,
<a name='L445'>    <font color='red'>{</font>"recv_bytes", (PyCFunction)<a href='../S/2581.html#L153' title='Defined at 153 in Modules/_multiprocessing/connection.h.'>connection_recvbytes</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L446'>     "receive byte data as a string"<font color='red'>}</font>,
<a name='L447'>    <font color='red'>{</font>"recv_bytes_into",(PyCFunction)<a href='../S/2581.html#L197' title='Defined at 197 in Modules/_multiprocessing/connection.h.'>connection_recvbytes_into</a>,<a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L448'>     "receive byte data into a writeable buffer-like object\n"
<a name='L449'>     "returns the number of bytes read"<font color='red'>}</font>,
<a name='L450'>
<a name='L451'>    <font color='red'>{</font>"send", (PyCFunction)<a href='../S/2581.html#L268' title='Defined at 268 in Modules/_multiprocessing/connection.h.'>connection_send_obj</a>, METH_O,
<a name='L452'>     "send a (picklable) object"<font color='red'>}</font>,
<a name='L453'>    <font color='red'>{</font>"recv", (PyCFunction)<a href='../S/2581.html#L301' title='Defined at 301 in Modules/_multiprocessing/connection.h.'>connection_recv_obj</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L454'>     "receive a (picklable) object"<font color='red'>}</font>,
<a name='L455'>
<a name='L456'>    <font color='red'>{</font>"poll", (PyCFunction)<a href='../S/2581.html#L345' title='Defined at 345 in Modules/_multiprocessing/connection.h.'>connection_poll</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L457'>     "whether there is any input available to be read"<font color='red'>}</font>,
<a name='L458'>    <font color='red'>{</font>"fileno", (PyCFunction)<a href='../S/2581.html#L383' title='Defined at 383 in Modules/_multiprocessing/connection.h.'>connection_fileno</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L459'>     "file descriptor or handle of the connection"<font color='red'>}</font>,
<a name='L460'>    <font color='red'>{</font>"close", (PyCFunction)<a href='../S/2581.html#L393' title='Defined at 393 in Modules/_multiprocessing/connection.h.'>connection_close</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L461'>     "close the connection"<font color='red'>}</font>,
<a name='L462'>
<a name='L463'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>  <i><font color='green'>/* Sentinel */</font></i>
<a name='L464'><font color='red'>}</font>;
<a name='L465'>
<a name='L466'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> connection_getset[] = <font color='red'>{</font>
<a name='L467'>    <font color='red'>{</font>"closed", (getter)<a href='../S/2581.html#L421' title='Defined at 421 in Modules/_multiprocessing/connection.h.'>connection_closed</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L468'>     "True if the connection is closed", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L469'>    <font color='red'>{</font>"readable", (getter)<a href='../S/2581.html#L427' title='Defined at 427 in Modules/_multiprocessing/connection.h.'>connection_readable</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L470'>     "True if the connection is readable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L471'>    <font color='red'>{</font>"writable", (getter)<a href='../S/2581.html#L433' title='Defined at 433 in Modules/_multiprocessing/connection.h.'>connection_writable</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L472'>     "True if the connection is writable", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L473'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L474'><font color='red'>}</font>;
<a name='L475'>
<a name='L476'><i><font color='green'>/*</font></i>
<a name='L477'><i><font color='green'> * Connection type</font></i>
<a name='L478'><i><font color='green'> */</font></i>
<a name='L479'>
<a name='L480'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(connection_doc,
<a name='L481'>             "Connection type whose constructor signature is\n\n"
<a name='L482'>             "    Connection(handle, readable=True, writable=True).\n\n"
<a name='L483'>             "The constructor does *not* duplicate the handle.");
<a name='L484'>
<a name='L485'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> <a href='../D/614.html' title='Multiple defined in 2 places.'>CONNECTION_TYPE</a> = <font color='red'>{</font>
<a name='L486'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L487'>    <i><font color='green'>/* tp_name           */</font></i> "_multiprocessing." <a href='../D/613.html' title='Multiple defined in 2 places.'>CONNECTION_NAME</a>,
<a name='L488'>    <i><font color='green'>/* tp_basicsize      */</font></i> <b>sizeof</b>(<a href='../S/2583.html#L176' title='Defined at 176 in Modules/_multiprocessing/multiprocessing.h.'>ConnectionObject</a>),
<a name='L489'>    <i><font color='green'>/* tp_itemsize       */</font></i> 0,
<a name='L490'>    <i><font color='green'>/* tp_dealloc        */</font></i> (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2581.html#L79' title='Defined at 79 in Modules/_multiprocessing/connection.h.'>connection_dealloc</a>,
<a name='L491'>    <i><font color='green'>/* tp_print          */</font></i> 0,
<a name='L492'>    <i><font color='green'>/* tp_getattr        */</font></i> 0,
<a name='L493'>    <i><font color='green'>/* tp_setattr        */</font></i> 0,
<a name='L494'>    <i><font color='green'>/* tp_reserved       */</font></i> 0,
<a name='L495'>    <i><font color='green'>/* tp_repr           */</font></i> (reprfunc)<a href='../S/2581.html#L406' title='Defined at 406 in Modules/_multiprocessing/connection.h.'>connection_repr</a>,
<a name='L496'>    <i><font color='green'>/* tp_as_number      */</font></i> 0,
<a name='L497'>    <i><font color='green'>/* tp_as_sequence    */</font></i> 0,
<a name='L498'>    <i><font color='green'>/* tp_as_mapping     */</font></i> 0,
<a name='L499'>    <i><font color='green'>/* tp_hash           */</font></i> 0,
<a name='L500'>    <i><font color='green'>/* tp_call           */</font></i> 0,
<a name='L501'>    <i><font color='green'>/* tp_str            */</font></i> 0,
<a name='L502'>    <i><font color='green'>/* tp_getattro       */</font></i> 0,
<a name='L503'>    <i><font color='green'>/* tp_setattro       */</font></i> 0,
<a name='L504'>    <i><font color='green'>/* tp_as_buffer      */</font></i> 0,
<a name='L505'>    <i><font color='green'>/* tp_flags          */</font></i> Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE |
<a name='L506'>                            <a href='../S/2583.html#L161' title='Defined at 161 in Modules/_multiprocessing/multiprocessing.h.'>Py_TPFLAGS_HAVE_WEAKREFS</a>,
<a name='L507'>    <i><font color='green'>/* tp_doc            */</font></i> connection_doc,
<a name='L508'>    <i><font color='green'>/* tp_traverse       */</font></i> 0,
<a name='L509'>    <i><font color='green'>/* tp_clear          */</font></i> 0,
<a name='L510'>    <i><font color='green'>/* tp_richcompare    */</font></i> 0,
<a name='L511'>    <i><font color='green'>/* tp_weaklistoffset */</font></i> <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2583.html#L176' title='Defined at 176 in Modules/_multiprocessing/multiprocessing.h.'>ConnectionObject</a>, weakreflist),
<a name='L512'>    <i><font color='green'>/* tp_iter           */</font></i> 0,
<a name='L513'>    <i><font color='green'>/* tp_iternext       */</font></i> 0,
<a name='L514'>    <i><font color='green'>/* tp_methods        */</font></i> connection_methods,
<a name='L515'>    <i><font color='green'>/* tp_members        */</font></i> 0,
<a name='L516'>    <i><font color='green'>/* tp_getset         */</font></i> connection_getset,
<a name='L517'>    <i><font color='green'>/* tp_base           */</font></i> 0,
<a name='L518'>    <i><font color='green'>/* tp_dict           */</font></i> 0,
<a name='L519'>    <i><font color='green'>/* tp_descr_get      */</font></i> 0,
<a name='L520'>    <i><font color='green'>/* tp_descr_set      */</font></i> 0,
<a name='L521'>    <i><font color='green'>/* tp_dictoffset     */</font></i> 0,
<a name='L522'>    <i><font color='green'>/* tp_init           */</font></i> 0,
<a name='L523'>    <i><font color='green'>/* tp_alloc          */</font></i> 0,
<a name='L524'>    <i><font color='green'>/* tp_new            */</font></i> <a href='../S/2581.html#L37' title='Defined at 37 in Modules/_multiprocessing/connection.h.'>connection_new</a>,
<a name='L525'><font color='red'>}</font>;
<a name='L526'>
<a name='L527'><font color='darkred'>#endif</font> <i><font color='green'>/* CONNECTION_H */</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L37'>[^]</a><a href='#L433'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
