<html>
<head>
<title>Python/getargs.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3402.html'>Python</a>/getargs.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L23'>[^]</a><a href='#L1777'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L23' title='Defined at 23.'>PyAPI_FUNC</a>
<li><a href='#L66' title='Defined at 66.'>_PyArg_Parse_SizeT</a>
<li><a href='#L79' title='Defined at 79.'>PyArg_ParseTuple</a>
<li><a href='#L91' title='Defined at 91.'>_PyArg_ParseTuple_SizeT</a>
<li><a href='#L104' title='Defined at 104.'>PyArg_VaParse</a>
<li><a href='#L114' title='Defined at 114.'>_PyArg_VaParse_SizeT</a>
<li><a href='#L131' title='Defined at 131.'>cleanup_ptr</a>
<li><a href='#L140' title='Defined at 140.'>cleanup_buffer</a>
<li><a href='#L149' title='Defined at 149.'>addcleanup</a>
<li><a href='#L185' title='Defined at 185.'>cleanup_convert</a>
<li><a href='#L196' title='Defined at 196.'>addcleanup_convert</a>
<li><a href='#L225' title='Defined at 225.'>cleanreturn</a>
<li><a href='#L240' title='Defined at 240.'>vgetargs1</a>
<li><a href='#L395' title='Defined at 395.'>seterror</a>
<li><a href='#L451' title='Defined at 451.'>converttuple</a>
<li><a href='#L527' title='Defined at 527.'>convertitem</a>
<li><a href='#L559' title='Defined at 559.'>converterr</a>
<li><a href='#L574' title='Defined at 574.'>float_argument_error</a>
<li><a href='#L595' title='Defined at 595.'>convertsimple</a>
<li><a href='#L1270' title='Defined at 1270.'>convertbuffer</a>
<li><a href='#L1292' title='Defined at 1292.'>getbuffer</a>
<li><a href='#L1311' title='Defined at 1311.'>PyArg_ParseTupleAndKeywords</a>
<li><a href='#L1335' title='Defined at 1335.'>_PyArg_ParseTupleAndKeywords_SizeT</a>
<li><a href='#L1361' title='Defined at 1361.'>PyArg_VaParseTupleAndKeywords</a>
<li><a href='#L1385' title='Defined at 1385.'>_PyArg_VaParseTupleAndKeywords_SizeT</a>
<li><a href='#L1410' title='Defined at 1410.'>PyArg_ValidateKeywordArguments</a>
<li><a href='#L1427' title='Defined at 1427.'>vgetargskeywords</a>
<li><a href='#L1582' title='Defined at 1582.'>skipitem</a>
<li><a href='#L1712' title='Defined at 1712.'>PyArg_UnpackTuple</a>
<li><a href='#L1777' title='Defined at 1777.'>_PyArg_NoKeywords</a>
</ol>
<hr>
<pre>
<a name='L1'>
<a name='L2'><i><font color='green'>/* New getargs implementation */</font></i>
<a name='L3'>
<a name='L4'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L5'>
<a name='L6'><font color='darkred'>#include</font> &lt;<a href='2809.html'>ctype.h</a>&gt;
<a name='L7'>
<a name='L8'>
<a name='L9'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L10'><b>extern</b> "C" <font color='red'>{</font>
<a name='L11'><font color='darkred'>#endif</font>
<a name='L12'><b>int</b> <a href='../S/541.html#L15' title='Defined at 15 in Include/modsupport.h.'>PyArg_Parse</a>(PyObject *, <b>const</b> <b>char</b> *, ...);
<a name='L13'><b>int</b> <a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(PyObject *, <b>const</b> <b>char</b> *, ...);
<a name='L14'><b>int</b> <a href='../D/2734.html' title='Multiple defined in 2 places.'>PyArg_VaParse</a>(PyObject *, <b>const</b> <b>char</b> *, va_list);
<a name='L15'>
<a name='L16'><b>int</b> <a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(PyObject *, PyObject *,
<a name='L17'>                                <b>const</b> <b>char</b> *, <b>char</b> **, ...);
<a name='L18'><b>int</b> <a href='../D/2735.html' title='Multiple defined in 2 places.'>PyArg_VaParseTupleAndKeywords</a>(PyObject *, PyObject *,
<a name='L19'>                                <b>const</b> <b>char</b> *, <b>char</b> **, va_list);
<a name='L20'>
<a name='L21'><font color='darkred'>#ifdef</font> <a href='../D/1473.html' title='Multiple defined in 2 places.'>HAVE_DECLSPEC_DLL</a>
<a name='L22'><i><font color='green'>/* Export functions */</font></i>
<a name='L23'><a href='../R/2475.html' title='Multiple refered from 87 places.'>PyAPI_FUNC</a>(<b>int</b>) _PyArg_Parse_SizeT(PyObject *, <b>char</b> *, ...);
<a name='L24'>PyAPI_FUNC(<b>int</b>) _PyArg_ParseTuple_SizeT(PyObject *, <b>char</b> *, ...);
<a name='L25'>PyAPI_FUNC(<b>int</b>) _PyArg_ParseTupleAndKeywords_SizeT(PyObject *, PyObject *,
<a name='L26'>                                                  <b>const</b> <b>char</b> *, <b>char</b> **, ...);
<a name='L27'>PyAPI_FUNC(PyObject *) _Py_BuildValue_SizeT(<b>const</b> <b>char</b> *, ...);
<a name='L28'>PyAPI_FUNC(<b>int</b>) _PyArg_VaParse_SizeT(PyObject *, <b>char</b> *, va_list);
<a name='L29'>PyAPI_FUNC(<b>int</b>) _PyArg_VaParseTupleAndKeywords_SizeT(PyObject *, PyObject *,
<a name='L30'>                                              <b>const</b> <b>char</b> *, <b>char</b> **, va_list);
<a name='L31'><font color='darkred'>#endif</font>
<a name='L32'>
<a name='L33'><font color='darkred'>#define</font> FLAG_COMPAT 1
<a name='L34'><font color='darkred'>#define</font> <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a> 2
<a name='L35'>
<a name='L36'>
<a name='L37'><i><font color='green'>/* Forward */</font></i>
<a name='L38'><b>static</b> <b>int</b> vgetargs1(PyObject *, <b>const</b> <b>char</b> *, va_list *, <b>int</b>);
<a name='L39'><b>static</b> <b>void</b> seterror(<b>int</b>, <b>const</b> <b>char</b> *, <b>int</b> *, <b>const</b> <b>char</b> *, <b>const</b> <b>char</b> *);
<a name='L40'><b>static</b> <b>char</b> *convertitem(PyObject *, <b>const</b> <b>char</b> **, va_list *, <b>int</b>, <b>int</b> *,
<a name='L41'>                         <b>char</b> *, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>, PyObject **);
<a name='L42'><b>static</b> <b>char</b> *converttuple(PyObject *, <b>const</b> <b>char</b> **, va_list *, <b>int</b>,
<a name='L43'>                          <b>int</b> *, <b>char</b> *, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>, <b>int</b>, PyObject **);
<a name='L44'><b>static</b> <b>char</b> *convertsimple(PyObject *, <b>const</b> <b>char</b> **, va_list *, <b>int</b>, <b>char</b> *,
<a name='L45'>                           <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>, PyObject **);
<a name='L46'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> convertbuffer(PyObject *, <b>void</b> **p, <b>char</b> **);
<a name='L47'><b>static</b> <b>int</b> getbuffer(PyObject *, Py_buffer *, <b>char</b>**);
<a name='L48'>
<a name='L49'><b>static</b> <b>int</b> vgetargskeywords(PyObject *, PyObject *,
<a name='L50'>                            <b>const</b> <b>char</b> *, <b>char</b> **, va_list *, <b>int</b>);
<a name='L51'><b>static</b> <b>char</b> *skipitem(<b>const</b> <b>char</b> **, va_list *, <b>int</b>);
<a name='L52'>
<a name='L53'><b>int</b>
<a name='L54'>PyArg_Parse(PyObject *args, <b>const</b> <b>char</b> *format, ...)
<a name='L55'><font color='red'>{</font>
<a name='L56'>    <b>int</b> retval;
<a name='L57'>    va_list va;
<a name='L58'>
<a name='L59'>    va_start(va, format);
<a name='L60'>    retval = <a href='../S/3112.html#L240' title='Defined at 240 in Python/getargs.c.'>vgetargs1</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, format, &amp;va, FLAG_COMPAT);
<a name='L61'>    va_end(va);
<a name='L62'>    <b>return</b> retval;
<a name='L63'><font color='red'>}</font>
<a name='L64'>
<a name='L65'><b>int</b>
<a name='L66'><a href='../S/541.html#L15' title='Refered from 15 in Include/modsupport.h.'>_PyArg_Parse_SizeT</a>(PyObject *args, <b>char</b> *format, ...)
<a name='L67'><font color='red'>{</font>
<a name='L68'>    <b>int</b> retval;
<a name='L69'>    va_list va;
<a name='L70'>
<a name='L71'>    va_start(va, format);
<a name='L72'>    retval = <a href='../S/3112.html#L240' title='Defined at 240 in Python/getargs.c.'>vgetargs1</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, format, &amp;va, FLAG_COMPAT|<a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>);
<a name='L73'>    va_end(va);
<a name='L74'>    <b>return</b> retval;
<a name='L75'><font color='red'>}</font>
<a name='L76'>
<a name='L77'>
<a name='L78'><b>int</b>
<a name='L79'><a href='../R/2490.html' title='Multiple refered from 932 places.'>PyArg_ParseTuple</a>(PyObject *args, <b>const</b> <b>char</b> *format, ...)
<a name='L80'><font color='red'>{</font>
<a name='L81'>    <b>int</b> retval;
<a name='L82'>    va_list va;
<a name='L83'>
<a name='L84'>    va_start(va, format);
<a name='L85'>    retval = <a href='../S/3112.html#L240' title='Defined at 240 in Python/getargs.c.'>vgetargs1</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, format, &amp;va, 0);
<a name='L86'>    va_end(va);
<a name='L87'>    <b>return</b> retval;
<a name='L88'><font color='red'>}</font>
<a name='L89'>
<a name='L90'><b>int</b>
<a name='L91'><a href='../S/541.html#L16' title='Refered from 16 in Include/modsupport.h.'>_PyArg_ParseTuple_SizeT</a>(PyObject *args, <b>char</b> *format, ...)
<a name='L92'><font color='red'>{</font>
<a name='L93'>    <b>int</b> retval;
<a name='L94'>    va_list va;
<a name='L95'>
<a name='L96'>    va_start(va, format);
<a name='L97'>    retval = <a href='../S/3112.html#L240' title='Defined at 240 in Python/getargs.c.'>vgetargs1</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, format, &amp;va, <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>);
<a name='L98'>    va_end(va);
<a name='L99'>    <b>return</b> retval;
<a name='L100'><font color='red'>}</font>
<a name='L101'>
<a name='L102'>
<a name='L103'><b>int</b>
<a name='L104'><a href='../S/3112.html#L14' title='Refered from 14 in Python/getargs.c.'>PyArg_VaParse</a>(PyObject *args, <b>const</b> <b>char</b> *format, va_list va)
<a name='L105'><font color='red'>{</font>
<a name='L106'>    va_list lva;
<a name='L107'>
<a name='L108'>        <a href='../D/4300.html' title='Multiple defined in 3 places.'>Py_VA_COPY</a>(lva, va);
<a name='L109'>
<a name='L110'>    <b>return</b> <a href='../S/3112.html#L240' title='Defined at 240 in Python/getargs.c.'>vgetargs1</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, format, &amp;lva, 0);
<a name='L111'><font color='red'>}</font>
<a name='L112'>
<a name='L113'><b>int</b>
<a name='L114'><a href='../S/541.html#L18' title='Refered from 18 in Include/modsupport.h.'>_PyArg_VaParse_SizeT</a>(PyObject *args, <b>char</b> *format, va_list va)
<a name='L115'><font color='red'>{</font>
<a name='L116'>    va_list lva;
<a name='L117'>
<a name='L118'>        <a href='../D/4300.html' title='Multiple defined in 3 places.'>Py_VA_COPY</a>(lva, va);
<a name='L119'>
<a name='L120'>    <b>return</b> <a href='../S/3112.html#L240' title='Defined at 240 in Python/getargs.c.'>vgetargs1</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, format, &amp;lva, <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>);
<a name='L121'><font color='red'>}</font>
<a name='L122'>
<a name='L123'>
<a name='L124'><i><font color='green'>/* Handle cleanup of allocated memory in case of exception */</font></i>
<a name='L125'>
<a name='L126'><font color='darkred'>#define</font> <a href='../R/1235.html' title='Multiple refered from 2 places.'>GETARGS_CAPSULE_NAME_CLEANUP_PTR</a> "getargs.cleanup_ptr"
<a name='L127'><font color='darkred'>#define</font> <a href='../R/1233.html' title='Multiple refered from 2 places.'>GETARGS_CAPSULE_NAME_CLEANUP_BUFFER</a> "getargs.cleanup_buffer"
<a name='L128'><font color='darkred'>#define</font> <a href='../R/1234.html' title='Multiple refered from 2 places.'>GETARGS_CAPSULE_NAME_CLEANUP_CONVERT</a> "getargs.cleanup_convert"
<a name='L129'>
<a name='L130'><b>static</b> <b>void</b>
<a name='L131'><a href='../S/3112.html#L159' title='Refered from 159 in Python/getargs.c.'>cleanup_ptr</a>(PyObject *self)
<a name='L132'><font color='red'>{</font>
<a name='L133'>    <b>void</b> *ptr = <a href='../S/2780.html#L80' title='Defined at 80 in Objects/capsule.c.'>PyCapsule_GetPointer</a>(self, <a href='../S/3112.html#L126' title='Defined at 126 in Python/getargs.c.'>GETARGS_CAPSULE_NAME_CLEANUP_PTR</a>);
<a name='L134'>    <b>if</b> (ptr) <font color='red'>{</font>
<a name='L135'>        PyMem_FREE(ptr);
<a name='L136'>    <font color='red'>}</font>
<a name='L137'><font color='red'>}</font>
<a name='L138'>
<a name='L139'><b>static</b> <b>void</b>
<a name='L140'><a href='../S/3112.html#L156' title='Refered from 156 in Python/getargs.c.'>cleanup_buffer</a>(PyObject *self)
<a name='L141'><font color='red'>{</font>
<a name='L142'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> *ptr = (<a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> *)<a href='../S/2780.html#L80' title='Defined at 80 in Objects/capsule.c.'>PyCapsule_GetPointer</a>(self, <a href='../S/3112.html#L127' title='Defined at 127 in Python/getargs.c.'>GETARGS_CAPSULE_NAME_CLEANUP_BUFFER</a>);
<a name='L143'>    <b>if</b> (ptr) <font color='red'>{</font>
<a name='L144'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(ptr);
<a name='L145'>    <font color='red'>}</font>
<a name='L146'><font color='red'>}</font>
<a name='L147'>
<a name='L148'><b>static</b> <b>int</b>
<a name='L149'><a href='../R/5929.html' title='Multiple refered from 5 places.'>addcleanup</a>(<b>void</b> *ptr, PyObject **freelist, <b>int</b> is_buffer)
<a name='L150'><font color='red'>{</font>
<a name='L151'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cobj;
<a name='L152'>    <b>const</b> <b>char</b> *name;
<a name='L153'>    PyCapsule_Destructor destr;
<a name='L154'>
<a name='L155'>    <b>if</b> (is_buffer) <font color='red'>{</font>
<a name='L156'>        destr = <a href='../S/3112.html#L140' title='Defined at 140 in Python/getargs.c.'>cleanup_buffer</a>;
<a name='L157'>        name = <a href='../S/3112.html#L127' title='Defined at 127 in Python/getargs.c.'>GETARGS_CAPSULE_NAME_CLEANUP_BUFFER</a>;
<a name='L158'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L159'>        destr = <a href='../S/3112.html#L131' title='Defined at 131 in Python/getargs.c.'>cleanup_ptr</a>;
<a name='L160'>        name = <a href='../S/3112.html#L126' title='Defined at 126 in Python/getargs.c.'>GETARGS_CAPSULE_NAME_CLEANUP_PTR</a>;
<a name='L161'>    <font color='red'>}</font>
<a name='L162'>
<a name='L163'>    <b>if</b> (!*freelist) <font color='red'>{</font>
<a name='L164'>        *freelist = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0);
<a name='L165'>        <b>if</b> (!*freelist) <font color='red'>{</font>
<a name='L166'>            destr(ptr);
<a name='L167'>            <b>return</b> -1;
<a name='L168'>        <font color='red'>}</font>
<a name='L169'>    <font color='red'>}</font>
<a name='L170'>
<a name='L171'>    cobj = <a href='../S/2780.html#L44' title='Defined at 44 in Objects/capsule.c.'>PyCapsule_New</a>(ptr, name, destr);
<a name='L172'>    <b>if</b> (!cobj) <font color='red'>{</font>
<a name='L173'>        destr(ptr);
<a name='L174'>        <b>return</b> -1;
<a name='L175'>    <font color='red'>}</font>
<a name='L176'>    <b>if</b> (<a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(*freelist, cobj)) <font color='red'>{</font>
<a name='L177'>        Py_DECREF(cobj);
<a name='L178'>        <b>return</b> -1;
<a name='L179'>    <font color='red'>}</font>
<a name='L180'>    Py_DECREF(cobj);
<a name='L181'>    <b>return</b> 0;
<a name='L182'><font color='red'>}</font>
<a name='L183'>
<a name='L184'><b>static</b> <b>void</b>
<a name='L185'><a href='../S/3112.html#L207' title='Refered from 207 in Python/getargs.c.'>cleanup_convert</a>(PyObject *self)
<a name='L186'><font color='red'>{</font>
<a name='L187'>    <b>typedef</b> <b>int</b> (*destr_t)(PyObject *, <b>void</b> *);
<a name='L188'>    destr_t destr = (destr_t)<a href='../S/2780.html#L122' title='Defined at 122 in Objects/capsule.c.'>PyCapsule_GetContext</a>(self);
<a name='L189'>    <b>void</b> *ptr = <a href='../S/2780.html#L80' title='Defined at 80 in Objects/capsule.c.'>PyCapsule_GetPointer</a>(self,
<a name='L190'>                                     <a href='../S/3112.html#L128' title='Defined at 128 in Python/getargs.c.'>GETARGS_CAPSULE_NAME_CLEANUP_CONVERT</a>);
<a name='L191'>    <b>if</b> (ptr &amp;&amp; destr)
<a name='L192'>        destr(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, ptr);
<a name='L193'><font color='red'>}</font>
<a name='L194'>
<a name='L195'><b>static</b> <b>int</b>
<a name='L196'><a href='../S/3112.html#L1216' title='Refered from 1216 in Python/getargs.c.'>addcleanup_convert</a>(<b>void</b> *ptr, PyObject **freelist, <b>int</b> (*destr)(PyObject*,<b>void</b>*))
<a name='L197'><font color='red'>{</font>
<a name='L198'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *cobj;
<a name='L199'>    <b>if</b> (!*freelist) <font color='red'>{</font>
<a name='L200'>        *freelist = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(0);
<a name='L201'>        <b>if</b> (!*freelist) <font color='red'>{</font>
<a name='L202'>            destr(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, ptr);
<a name='L203'>            <b>return</b> -1;
<a name='L204'>        <font color='red'>}</font>
<a name='L205'>    <font color='red'>}</font>
<a name='L206'>    cobj = <a href='../S/2780.html#L44' title='Defined at 44 in Objects/capsule.c.'>PyCapsule_New</a>(ptr, <a href='../S/3112.html#L128' title='Defined at 128 in Python/getargs.c.'>GETARGS_CAPSULE_NAME_CLEANUP_CONVERT</a>,
<a name='L207'>                         <a href='../S/3112.html#L185' title='Defined at 185 in Python/getargs.c.'>cleanup_convert</a>);
<a name='L208'>    <b>if</b> (!cobj) <font color='red'>{</font>
<a name='L209'>        destr(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, ptr);
<a name='L210'>        <b>return</b> -1;
<a name='L211'>    <font color='red'>}</font>
<a name='L212'>    <b>if</b> (<a href='../S/2780.html#L181' title='Defined at 181 in Objects/capsule.c.'>PyCapsule_SetContext</a>(cobj, destr) == -1) <font color='red'>{</font>
<a name='L213'>        <i><font color='green'>/* This really should not happen. */</font></i>
<a name='L214'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("capsule refused setting of context.");
<a name='L215'>    <font color='red'>}</font>
<a name='L216'>    <b>if</b> (<a href='../S/2796.html#L286' title='Defined at 286 in Objects/listobject.c.'>PyList_Append</a>(*freelist, cobj)) <font color='red'>{</font>
<a name='L217'>        Py_DECREF(cobj); <i><font color='green'>/* This will also call destr. */</font></i>
<a name='L218'>        <b>return</b> -1;
<a name='L219'>    <font color='red'>}</font>
<a name='L220'>    Py_DECREF(cobj);
<a name='L221'>    <b>return</b> 0;
<a name='L222'><font color='red'>}</font>
<a name='L223'>
<a name='L224'><b>static</b> <b>int</b>
<a name='L225'><a href='../R/6664.html' title='Multiple refered from 16 places.'>cleanreturn</a>(<b>int</b> retval, PyObject *freelist)
<a name='L226'><font color='red'>{</font>
<a name='L227'>    <b>if</b> (freelist &amp;&amp; retval != 0) <font color='red'>{</font>
<a name='L228'>        <i><font color='green'>/* We were successful, reset the destructors so that they</font></i>
<a name='L229'><i><font color='green'>           don't get called. */</font></i>
<a name='L230'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> len = <a href='../S/534.html#L71' title='Defined at 71 in Include/listobject.h.'>PyList_GET_SIZE</a>(freelist), i;
<a name='L231'>        <b>for</b> (i = 0; i &lt; len; i++)
<a name='L232'>            <a href='../S/2780.html#L167' title='Defined at 167 in Objects/capsule.c.'>PyCapsule_SetDestructor</a>(PyList_GET_ITEM(freelist, i), <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L233'>    <font color='red'>}</font>
<a name='L234'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(freelist);
<a name='L235'>    <b>return</b> retval;
<a name='L236'><font color='red'>}</font>
<a name='L237'>
<a name='L238'>
<a name='L239'><b>static</b> <b>int</b>
<a name='L240'><a href='../R/11359.html' title='Multiple refered from 6 places.'>vgetargs1</a>(PyObject *args, <b>const</b> <b>char</b> *format, va_list *p_va, <b>int</b> flags)
<a name='L241'><font color='red'>{</font>
<a name='L242'>    <b>char</b> msgbuf[256];
<a name='L243'>    <b>int</b> levels[32];
<a name='L244'>    <b>const</b> <b>char</b> *fname = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L245'>    <b>const</b> <b>char</b> *message = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L246'>    <b>int</b> <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> = -1;
<a name='L247'>    <b>int</b> <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> = 0;
<a name='L248'>    <b>int</b> level = 0;
<a name='L249'>    <b>int</b> endfmt = 0;
<a name='L250'>    <b>const</b> <b>char</b> *formatsave = format;
<a name='L251'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, len;
<a name='L252'>    <b>char</b> *msg;
<a name='L253'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *freelist = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L254'>    <b>int</b> compat = <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; FLAG_COMPAT;
<a name='L255'>
<a name='L256'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(compat || (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> != (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>));
<a name='L257'>    <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> = <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; ~FLAG_COMPAT;
<a name='L258'>
<a name='L259'>    <b>while</b> (endfmt == 0) <font color='red'>{</font>
<a name='L260'>        <b>int</b> c = *format++;
<a name='L261'>        <b>switch</b> (c) <font color='red'>{</font>
<a name='L262'>        <b>case</b> '(':
<a name='L263'>            <b>if</b> (level == 0)
<a name='L264'>                <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>++;
<a name='L265'>            level++;
<a name='L266'>            <b>if</b> (level &gt;= 30)
<a name='L267'>                <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("too many tuple nesting levels "
<a name='L268'>                              "in argument format string");
<a name='L269'>            <b>break</b>;
<a name='L270'>        <b>case</b> ')':
<a name='L271'>            <b>if</b> (level == 0)
<a name='L272'>                <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>("excess ')' in getargs format");
<a name='L273'>            <b>else</b>
<a name='L274'>                level--;
<a name='L275'>            <b>break</b>;
<a name='L276'>        <b>case</b> '\0':
<a name='L277'>            endfmt = 1;
<a name='L278'>            <b>break</b>;
<a name='L279'>        <b>case</b> ':':
<a name='L280'>            fname = format;
<a name='L281'>            endfmt = 1;
<a name='L282'>            <b>break</b>;
<a name='L283'>        <b>case</b> ';':
<a name='L284'>            message = format;
<a name='L285'>            endfmt = 1;
<a name='L286'>            <b>break</b>;
<a name='L287'>        <b>default</b>:
<a name='L288'>            <b>if</b> (level == 0) <font color='red'>{</font>
<a name='L289'>                <b>if</b> (c == 'O')
<a name='L290'>                    <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>++;
<a name='L291'>                <b>else</b> <b>if</b> (<a href='../D/9331.html' title='Multiple defined in 2 places.'>isalpha</a>(<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(c))) <font color='red'>{</font>
<a name='L292'>                    <b>if</b> (c != 'e') <i><font color='green'>/* skip encoded */</font></i>
<a name='L293'>                        <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>++;
<a name='L294'>                <font color='red'>}</font> <b>else</b> <b>if</b> (c == '|')
<a name='L295'>                    <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> = <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>;
<a name='L296'>            <font color='red'>}</font>
<a name='L297'>            <b>break</b>;
<a name='L298'>        <font color='red'>}</font>
<a name='L299'>    <font color='red'>}</font>
<a name='L300'>
<a name='L301'>    <b>if</b> (level != 0)
<a name='L302'>        <a href='../D/4129.html' title='Multiple defined in 2 places.'>Py_FatalError</a>(<i><font color='green'>/* '(' */</font></i> "missing ')' in getargs format");
<a name='L303'>
<a name='L304'>    <b>if</b> (<a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> &lt; 0)
<a name='L305'>        <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> = <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>;
<a name='L306'>
<a name='L307'>    format = formatsave;
<a name='L308'>
<a name='L309'>    <b>if</b> (compat) <font color='red'>{</font>
<a name='L310'>        <b>if</b> (<a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> == 0) <font color='red'>{</font>
<a name='L311'>            <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L312'>                <b>return</b> 1;
<a name='L313'>            <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(msgbuf, <b>sizeof</b>(msgbuf),
<a name='L314'>                          "%.200s%s takes no arguments",
<a name='L315'>                          fname==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ? "function" : fname,
<a name='L316'>                          fname==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ? "" : "()");
<a name='L317'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, msgbuf);
<a name='L318'>            <b>return</b> 0;
<a name='L319'>        <font color='red'>}</font>
<a name='L320'>        <b>else</b> <b>if</b> (<a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> == 1 &amp;&amp; <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> == 1) <font color='red'>{</font>
<a name='L321'>            <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L322'>                <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(msgbuf, <b>sizeof</b>(msgbuf),
<a name='L323'>                      "%.200s%s takes at least one argument",
<a name='L324'>                          fname==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ? "function" : fname,
<a name='L325'>                          fname==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ? "" : "()");
<a name='L326'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, msgbuf);
<a name='L327'>                <b>return</b> 0;
<a name='L328'>            <font color='red'>}</font>
<a name='L329'>            msg = <a href='../S/3112.html#L527' title='Defined at 527 in Python/getargs.c.'>convertitem</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, &amp;format, p_va, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, levels,
<a name='L330'>                              msgbuf, <b>sizeof</b>(msgbuf), &amp;freelist);
<a name='L331'>            <b>if</b> (msg == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L332'>                <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(1, freelist);
<a name='L333'>            <a href='../S/3112.html#L395' title='Defined at 395 in Python/getargs.c.'>seterror</a>(levels[0], msg, levels+1, fname, message);
<a name='L334'>            <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L335'>        <font color='red'>}</font>
<a name='L336'>        <b>else</b> <font color='red'>{</font>
<a name='L337'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L338'>                "old style getargs format uses new features");
<a name='L339'>            <b>return</b> 0;
<a name='L340'>        <font color='red'>}</font>
<a name='L341'>    <font color='red'>}</font>
<a name='L342'>
<a name='L343'>    <b>if</b> (!PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L344'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L345'>            "new style getargs format but argument is not a tuple");
<a name='L346'>        <b>return</b> 0;
<a name='L347'>    <font color='red'>}</font>
<a name='L348'>
<a name='L349'>    len = PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L350'>
<a name='L351'>    <b>if</b> (len &lt; <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> || <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> &lt; len) <font color='red'>{</font>
<a name='L352'>        <b>if</b> (message == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L353'>            <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(msgbuf, <b>sizeof</b>(msgbuf),
<a name='L354'>                          "%.150s%s takes %s %d argument%s "
<a name='L355'>                          "(%ld given)",
<a name='L356'>                          fname==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ? "function" : fname,
<a name='L357'>                          fname==<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ? "" : "()",
<a name='L358'>                          <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a>==<a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> ? "exactly"
<a name='L359'>                          : len &lt; <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> ? "at least" : "at most",
<a name='L360'>                          len &lt; <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> ? <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> : <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>,
<a name='L361'>                          (len &lt; <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> ? <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> : <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>) == 1 ? "" : "s",
<a name='L362'>                          <a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(len, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>, <b>long</b>));
<a name='L363'>            message = msgbuf;
<a name='L364'>        <font color='red'>}</font>
<a name='L365'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, message);
<a name='L366'>        <b>return</b> 0;
<a name='L367'>    <font color='red'>}</font>
<a name='L368'>
<a name='L369'>    <b>for</b> (i = 0; i &lt; len; i++) <font color='red'>{</font>
<a name='L370'>        <b>if</b> (*format == '|')
<a name='L371'>            format++;
<a name='L372'>        msg = <a href='../S/3112.html#L527' title='Defined at 527 in Python/getargs.c.'>convertitem</a>(PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, i), &amp;format, p_va,
<a name='L373'>                          <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, levels, msgbuf,
<a name='L374'>                          <b>sizeof</b>(msgbuf), &amp;freelist);
<a name='L375'>        <b>if</b> (msg) <font color='red'>{</font>
<a name='L376'>            <a href='../S/3112.html#L395' title='Defined at 395 in Python/getargs.c.'>seterror</a>(i+1, msg, levels, fname, msg);
<a name='L377'>            <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L378'>        <font color='red'>}</font>
<a name='L379'>    <font color='red'>}</font>
<a name='L380'>
<a name='L381'>    <b>if</b> (*format != '\0' &amp;&amp; !<a href='../D/9331.html' title='Multiple defined in 2 places.'>isalpha</a>(<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*format)) &amp;&amp;
<a name='L382'>        *format != '(' &amp;&amp;
<a name='L383'>        *format != '|' &amp;&amp; *format != ':' &amp;&amp; *format != ';') <font color='red'>{</font>
<a name='L384'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_SystemError,
<a name='L385'>                     "bad format string: %.200s", formatsave);
<a name='L386'>        <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L387'>    <font color='red'>}</font>
<a name='L388'>
<a name='L389'>    <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(1, freelist);
<a name='L390'><font color='red'>}</font>
<a name='L391'>
<a name='L392'>
<a name='L393'>
<a name='L394'><b>static</b> <b>void</b>
<a name='L395'><a href='../R/10266.html' title='Multiple refered from 3 places.'>seterror</a>(<b>int</b> iarg, <b>const</b> <b>char</b> *msg, <b>int</b> *levels, <b>const</b> <b>char</b> *fname,
<a name='L396'>         <b>const</b> <b>char</b> *message)
<a name='L397'><font color='red'>{</font>
<a name='L398'>    <b>char</b> buf[512];
<a name='L399'>    <b>int</b> i;
<a name='L400'>    <b>char</b> *p = buf;
<a name='L401'>
<a name='L402'>    <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L403'>        <b>return</b>;
<a name='L404'>    <b>else</b> <b>if</b> (message == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L405'>        <b>if</b> (fname != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L406'>            <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(p, <b>sizeof</b>(buf), "%.200s() ", fname);
<a name='L407'>            p += strlen(p);
<a name='L408'>        <font color='red'>}</font>
<a name='L409'>        <b>if</b> (iarg != 0) <font color='red'>{</font>
<a name='L410'>            <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(p, <b>sizeof</b>(buf) - (p - buf),
<a name='L411'>                          "argument %d", iarg);
<a name='L412'>            i = 0;
<a name='L413'>            p += strlen(p);
<a name='L414'>            <b>while</b> (levels[i] &gt; 0 &amp;&amp; i &lt; 32 &amp;&amp; (<b>int</b>)(p-buf) &lt; 220) <font color='red'>{</font>
<a name='L415'>                <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(p, <b>sizeof</b>(buf) - (p - buf),
<a name='L416'>                              ", item %d", levels[i]-1);
<a name='L417'>                p += strlen(p);
<a name='L418'>                i++;
<a name='L419'>            <font color='red'>}</font>
<a name='L420'>        <font color='red'>}</font>
<a name='L421'>        <b>else</b> <font color='red'>{</font>
<a name='L422'>            <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(p, <b>sizeof</b>(buf) - (p - buf), "argument");
<a name='L423'>            p += strlen(p);
<a name='L424'>        <font color='red'>}</font>
<a name='L425'>        <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(p, <b>sizeof</b>(buf) - (p - buf), " %.256s", msg);
<a name='L426'>        message = buf;
<a name='L427'>    <font color='red'>}</font>
<a name='L428'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, message);
<a name='L429'><font color='red'>}</font>
<a name='L430'>
<a name='L431'>
<a name='L432'><i><font color='green'>/* Convert a tuple argument.</font></i>
<a name='L433'><i><font color='green'>   On entry, *p_format points to the character _after_ the opening '('.</font></i>
<a name='L434'><i><font color='green'>   On successful exit, *p_format points to the closing ')'.</font></i>
<a name='L435'><i><font color='green'>   If successful:</font></i>
<a name='L436'><i><font color='green'>      *p_format and *p_va are updated,</font></i>
<a name='L437'><i><font color='green'>      *levels and *msgbuf are untouched,</font></i>
<a name='L438'><i><font color='green'>      and NULL is returned.</font></i>
<a name='L439'><i><font color='green'>   If the argument is invalid:</font></i>
<a name='L440'><i><font color='green'>      *p_format is unchanged,</font></i>
<a name='L441'><i><font color='green'>      *p_va is undefined,</font></i>
<a name='L442'><i><font color='green'>      *levels is a 0-terminated list of item numbers,</font></i>
<a name='L443'><i><font color='green'>      *msgbuf contains an error message, whose format is:</font></i>
<a name='L444'><i><font color='green'>     "must be &lt;typename1&gt;, not &lt;typename2&gt;", where:</font></i>
<a name='L445'><i><font color='green'>        &lt;typename1&gt; is the name of the expected type, and</font></i>
<a name='L446'><i><font color='green'>        &lt;typename2&gt; is the name of the actual type,</font></i>
<a name='L447'><i><font color='green'>      and msgbuf is returned.</font></i>
<a name='L448'><i><font color='green'>*/</font></i>
<a name='L449'>
<a name='L450'><b>static</b> <b>char</b> *
<a name='L451'><a href='../S/3112.html#L535' title='Refered from 535 in Python/getargs.c.'>converttuple</a>(PyObject *arg, <b>const</b> <b>char</b> **p_format, va_list *p_va, <b>int</b> flags,
<a name='L452'>             <b>int</b> *levels, <b>char</b> *msgbuf, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> bufsize, <b>int</b> toplevel,
<a name='L453'>             PyObject **freelist)
<a name='L454'><font color='red'>{</font>
<a name='L455'>    <b>int</b> level = 0;
<a name='L456'>    <b>int</b> n = 0;
<a name='L457'>    <b>const</b> <b>char</b> *format = *p_format;
<a name='L458'>    <b>int</b> i;
<a name='L459'>
<a name='L460'>    <b>for</b> (;;) <font color='red'>{</font>
<a name='L461'>        <b>int</b> c = *format++;
<a name='L462'>        <b>if</b> (c == '(') <font color='red'>{</font>
<a name='L463'>            <b>if</b> (level == 0)
<a name='L464'>                n++;
<a name='L465'>            level++;
<a name='L466'>        <font color='red'>}</font>
<a name='L467'>        <b>else</b> <b>if</b> (c == ')') <font color='red'>{</font>
<a name='L468'>            <b>if</b> (level == 0)
<a name='L469'>                <b>break</b>;
<a name='L470'>            level--;
<a name='L471'>        <font color='red'>}</font>
<a name='L472'>        <b>else</b> <b>if</b> (c == ':' || c == ';' || c == '\0')
<a name='L473'>            <b>break</b>;
<a name='L474'>        <b>else</b> <b>if</b> (level == 0 &amp;&amp; <a href='../D/9331.html' title='Multiple defined in 2 places.'>isalpha</a>(<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(c)))
<a name='L475'>            n++;
<a name='L476'>    <font color='red'>}</font>
<a name='L477'>
<a name='L478'>    <b>if</b> (!<a href='../S/2775.html#L1443' title='Defined at 1443 in Objects/abstract.c.'>PySequence_Check</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) || PyBytes_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L479'>        levels[0] = 0;
<a name='L480'>        <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(msgbuf, bufsize,
<a name='L481'>                      toplevel ? "expected %d arguments, not %.50s" :
<a name='L482'>                      "must be %d-item sequence, not %.50s",
<a name='L483'>                  n,
<a name='L484'>                  <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None ? "None" : <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;ob_type-&gt;tp_name);
<a name='L485'>        <b>return</b> msgbuf;
<a name='L486'>    <font color='red'>}</font>
<a name='L487'>
<a name='L488'>    <b>if</b> ((i = <a href='../S/2775.html#L1452' title='Defined at 1452 in Objects/abstract.c.'>PySequence_Size</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) != n) <font color='red'>{</font>
<a name='L489'>        levels[0] = 0;
<a name='L490'>        <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(msgbuf, bufsize,
<a name='L491'>                      toplevel ? "expected %d arguments, not %d" :
<a name='L492'>                     "must be sequence of length %d, not %d",
<a name='L493'>                  n, i);
<a name='L494'>        <b>return</b> msgbuf;
<a name='L495'>    <font color='red'>}</font>
<a name='L496'>
<a name='L497'>    format = *p_format;
<a name='L498'>    <b>for</b> (i = 0; i &lt; n; i++) <font color='red'>{</font>
<a name='L499'>        <b>char</b> *msg;
<a name='L500'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *item;
<a name='L501'>        item = <a href='../S/2775.html#L1584' title='Defined at 1584 in Objects/abstract.c.'>PySequence_GetItem</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, i);
<a name='L502'>        <b>if</b> (item == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L503'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L504'>            levels[0] = i+1;
<a name='L505'>            levels[1] = 0;
<a name='L506'>            strncpy(msgbuf, "is not retrievable", bufsize);
<a name='L507'>            <b>return</b> msgbuf;
<a name='L508'>        <font color='red'>}</font>
<a name='L509'>        msg = <a href='../S/3112.html#L527' title='Defined at 527 in Python/getargs.c.'>convertitem</a>(item, &amp;format, p_va, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, levels+1,
<a name='L510'>                          msgbuf, bufsize, freelist);
<a name='L511'>        <i><font color='green'>/* PySequence_GetItem calls tp-&gt;sq_item, which INCREFs */</font></i>
<a name='L512'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(item);
<a name='L513'>        <b>if</b> (msg != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L514'>            levels[0] = i+1;
<a name='L515'>            <b>return</b> msg;
<a name='L516'>        <font color='red'>}</font>
<a name='L517'>    <font color='red'>}</font>
<a name='L518'>
<a name='L519'>    *p_format = format;
<a name='L520'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L521'><font color='red'>}</font>
<a name='L522'>
<a name='L523'>
<a name='L524'><i><font color='green'>/* Convert a single item. */</font></i>
<a name='L525'>
<a name='L526'><b>static</b> <b>char</b> *
<a name='L527'><a href='../R/7008.html' title='Multiple refered from 4 places.'>convertitem</a>(PyObject *arg, <b>const</b> <b>char</b> **p_format, va_list *p_va, <b>int</b> flags,
<a name='L528'>            <b>int</b> *levels, <b>char</b> *msgbuf, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> bufsize, PyObject **freelist)
<a name='L529'><font color='red'>{</font>
<a name='L530'>    <b>char</b> *msg;
<a name='L531'>    <b>const</b> <b>char</b> *format = *p_format;
<a name='L532'>
<a name='L533'>    <b>if</b> (*format == '(' <i><font color='green'>/* ')' */</font></i>) <font color='red'>{</font>
<a name='L534'>        format++;
<a name='L535'>        msg = <a href='../S/3112.html#L451' title='Defined at 451 in Python/getargs.c.'>converttuple</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, &amp;format, p_va, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>, levels, msgbuf,
<a name='L536'>                           bufsize, 0, freelist);
<a name='L537'>        <b>if</b> (msg == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L538'>            format++;
<a name='L539'>    <font color='red'>}</font>
<a name='L540'>    <b>else</b> <font color='red'>{</font>
<a name='L541'>        msg = <a href='../S/3112.html#L595' title='Defined at 595 in Python/getargs.c.'>convertsimple</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, &amp;format, p_va, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>,
<a name='L542'>                            msgbuf, bufsize, freelist);
<a name='L543'>        <b>if</b> (msg != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L544'>            levels[0] = 0;
<a name='L545'>    <font color='red'>}</font>
<a name='L546'>    <b>if</b> (msg == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L547'>        *p_format = format;
<a name='L548'>    <b>return</b> msg;
<a name='L549'><font color='red'>}</font>
<a name='L550'>
<a name='L551'>
<a name='L552'>
<a name='L553'><font color='darkred'>#define</font> <a href='../R/4730.html' title='Multiple refered from 3 places.'>UNICODE_DEFAULT_ENCODING</a>(arg) \
<a name='L554'>    <a href='../D/6200.html' title='Multiple defined in 3 places.'>_PyUnicode_AsDefaultEncodedString</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L555'>
<a name='L556'><i><font color='green'>/* Format an error message generated by convertsimple(). */</font></i>
<a name='L557'>
<a name='L558'><b>static</b> <b>char</b> *
<a name='L559'><a href='../R/7005.html' title='Multiple refered from 42 places.'>converterr</a>(<b>const</b> <b>char</b> *expected, PyObject *arg, <b>char</b> *msgbuf, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> bufsize)
<a name='L560'><font color='red'>{</font>
<a name='L561'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(expected != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L562'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L563'>    <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(msgbuf, bufsize,
<a name='L564'>                  "must be %.50s, not %.50s", expected,
<a name='L565'>                  <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None ? "None" : <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;ob_type-&gt;tp_name);
<a name='L566'>    <b>return</b> msgbuf;
<a name='L567'><font color='red'>}</font>
<a name='L568'>
<a name='L569'><font color='darkred'>#define</font> <a href='../R/581.html' title='Multiple refered from 3 places.'>CONV_UNICODE</a> "(unicode conversion error)"
<a name='L570'>
<a name='L571'><i><font color='green'>/* Explicitly check for float arguments when integers are expected.</font></i>
<a name='L572'><i><font color='green'>   Return 1 for error, 0 if ok. */</font></i>
<a name='L573'><b>static</b> <b>int</b>
<a name='L574'><a href='../R/7834.html' title='Multiple refered from 9 places.'>float_argument_error</a>(PyObject *arg)
<a name='L575'><font color='red'>{</font>
<a name='L576'>    <b>if</b> (PyFloat_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L577'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L578'>                        "integer argument expected, got float" );
<a name='L579'>        <b>return</b> 1;
<a name='L580'>    <font color='red'>}</font>
<a name='L581'>    <b>else</b>
<a name='L582'>        <b>return</b> 0;
<a name='L583'><font color='red'>}</font>
<a name='L584'>
<a name='L585'><i><font color='green'>/* Convert a non-tuple argument.  Return NULL if conversion went OK,</font></i>
<a name='L586'><i><font color='green'>   or a string with a message describing the failure.  The message is</font></i>
<a name='L587'><i><font color='green'>   formatted as "must be &lt;desired type&gt;, not &lt;actual type&gt;".</font></i>
<a name='L588'><i><font color='green'>   When failing, an exception may or may not have been raised.</font></i>
<a name='L589'><i><font color='green'>   Don't call if a tuple is expected.</font></i>
<a name='L590'><i><font color='green'></font></i>
<a name='L591'><i><font color='green'>   When you add new format codes, please don't forget poor skipitem() below.</font></i>
<a name='L592'><i><font color='green'>*/</font></i>
<a name='L593'>
<a name='L594'><b>static</b> <b>char</b> *
<a name='L595'><a href='../S/3112.html#L541' title='Refered from 541 in Python/getargs.c.'>convertsimple</a>(PyObject *arg, <b>const</b> <b>char</b> **p_format, va_list *p_va, <b>int</b> flags,
<a name='L596'>              <b>char</b> *msgbuf, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> bufsize, PyObject **freelist)
<a name='L597'><font color='red'>{</font>
<a name='L598'>    <i><font color='green'>/* For # codes */</font></i>
<a name='L599'><font color='darkred'>#define</font> <a href='../R/1004.html' title='Multiple refered from 4 places.'>FETCH_SIZE</a>      <b>int</b> *q=<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *q2=<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;\
<a name='L600'>    <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>) q2=va_arg(*p_va, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>*); \
<a name='L601'>    <b>else</b> q=va_arg(*p_va, <b>int</b>*);
<a name='L602'><font color='darkred'>#define</font> <a href='../R/4381.html' title='Multiple refered from 7 places.'>STORE_SIZE</a>(s)   \
<a name='L603'>    <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>) \
<a name='L604'>        *q2=s; \
<a name='L605'>    <b>else</b> <font color='red'>{</font> \
<a name='L606'>        <b>if</b> (<a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a> &lt; s) <font color='red'>{</font> \
<a name='L607'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError, \
<a name='L608'>                "size does not fit in an int"); \
<a name='L609'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize); \
<a name='L610'>        <font color='red'>}</font> \
<a name='L611'>        *q=s; \
<a name='L612'>    <font color='red'>}</font>
<a name='L613'><font color='darkred'>#define</font> <a href='../S/3112.html#L1120' title='Refered from 1120 in Python/getargs.c.'>BUFFER_LEN</a>      ((<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>) ? *q2:*q)
<a name='L614'><font color='darkred'>#define</font> <a href='../R/3957.html' title='Multiple refered from 29 places.'>RETURN_ERR_OCCURRED</a> <b>return</b> msgbuf
<a name='L615'>
<a name='L616'>    <b>const</b> <b>char</b> *format = *p_format;
<a name='L617'>    <b>char</b> c = *format++;
<a name='L618'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *uarg;
<a name='L619'>
<a name='L620'>    <b>switch</b> (c) <font color='red'>{</font>
<a name='L621'>
<a name='L622'>    <b>case</b> 'b': <font color='red'>{</font> <i><font color='green'>/* unsigned byte -- very short int */</font></i>
<a name='L623'>        <b>char</b> *p = va_arg(*p_va, <b>char</b> *);
<a name='L624'>        <b>long</b> ival;
<a name='L625'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L626'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L627'>        ival = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L628'>        <b>if</b> (ival == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L629'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L630'>        <b>else</b> <b>if</b> (ival &lt; 0) <font color='red'>{</font>
<a name='L631'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L632'>                            "unsigned byte integer is less than minimum");
<a name='L633'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L634'>        <font color='red'>}</font>
<a name='L635'>        <b>else</b> <b>if</b> (ival &gt; UCHAR_MAX) <font color='red'>{</font>
<a name='L636'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L637'>                            "unsigned byte integer is greater than maximum");
<a name='L638'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L639'>        <font color='red'>}</font>
<a name='L640'>        <b>else</b>
<a name='L641'>            *p = (<b>unsigned</b> <b>char</b>) ival;
<a name='L642'>        <b>break</b>;
<a name='L643'>    <font color='red'>}</font>
<a name='L644'>
<a name='L645'>    <b>case</b> 'B': <font color='red'>{</font><i><font color='green'>/* byte sized bitfield - both signed and unsigned</font></i>
<a name='L646'><i><font color='green'>                  values allowed */</font></i>
<a name='L647'>        <b>char</b> *p = va_arg(*p_va, <b>char</b> *);
<a name='L648'>        <b>long</b> ival;
<a name='L649'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L650'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L651'>        ival = <a href='../S/2799.html#L605' title='Defined at 605 in Objects/longobject.c.'>PyLong_AsUnsignedLongMask</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L652'>        <b>if</b> (ival == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L653'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L654'>        <b>else</b>
<a name='L655'>            *p = (<b>unsigned</b> <b>char</b>) ival;
<a name='L656'>        <b>break</b>;
<a name='L657'>    <font color='red'>}</font>
<a name='L658'>
<a name='L659'>    <b>case</b> 'h': <font color='red'>{</font><i><font color='green'>/* signed short int */</font></i>
<a name='L660'>        <b>short</b> *p = va_arg(*p_va, <b>short</b> *);
<a name='L661'>        <b>long</b> ival;
<a name='L662'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L663'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L664'>        ival = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L665'>        <b>if</b> (ival == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L666'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L667'>        <b>else</b> <b>if</b> (ival &lt; SHRT_MIN) <font color='red'>{</font>
<a name='L668'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L669'>                            "signed short integer is less than minimum");
<a name='L670'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L671'>        <font color='red'>}</font>
<a name='L672'>        <b>else</b> <b>if</b> (ival &gt; SHRT_MAX) <font color='red'>{</font>
<a name='L673'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L674'>                            "signed short integer is greater than maximum");
<a name='L675'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L676'>        <font color='red'>}</font>
<a name='L677'>        <b>else</b>
<a name='L678'>            *p = (<b>short</b>) ival;
<a name='L679'>        <b>break</b>;
<a name='L680'>    <font color='red'>}</font>
<a name='L681'>
<a name='L682'>    <b>case</b> 'H': <font color='red'>{</font> <i><font color='green'>/* short int sized bitfield, both signed and</font></i>
<a name='L683'><i><font color='green'>                   unsigned allowed */</font></i>
<a name='L684'>        <b>unsigned</b> <b>short</b> *p = va_arg(*p_va, <b>unsigned</b> <b>short</b> *);
<a name='L685'>        <b>long</b> ival;
<a name='L686'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L687'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L688'>        ival = <a href='../S/2799.html#L605' title='Defined at 605 in Objects/longobject.c.'>PyLong_AsUnsignedLongMask</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L689'>        <b>if</b> (ival == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L690'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L691'>        <b>else</b>
<a name='L692'>            *p = (<b>unsigned</b> <b>short</b>) ival;
<a name='L693'>        <b>break</b>;
<a name='L694'>    <font color='red'>}</font>
<a name='L695'>
<a name='L696'>    <b>case</b> 'i': <font color='red'>{</font><i><font color='green'>/* signed int */</font></i>
<a name='L697'>        <b>int</b> *p = va_arg(*p_va, <b>int</b> *);
<a name='L698'>        <b>long</b> ival;
<a name='L699'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L700'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L701'>        ival = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L702'>        <b>if</b> (ival == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L703'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L704'>        <b>else</b> <b>if</b> (ival &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>) <font color='red'>{</font>
<a name='L705'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L706'>                            "signed integer is greater than maximum");
<a name='L707'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L708'>        <font color='red'>}</font>
<a name='L709'>        <b>else</b> <b>if</b> (ival &lt; INT_MIN) <font color='red'>{</font>
<a name='L710'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L711'>                            "signed integer is less than minimum");
<a name='L712'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L713'>        <font color='red'>}</font>
<a name='L714'>        <b>else</b>
<a name='L715'>            *p = ival;
<a name='L716'>        <b>break</b>;
<a name='L717'>    <font color='red'>}</font>
<a name='L718'>
<a name='L719'>    <b>case</b> 'I': <font color='red'>{</font> <i><font color='green'>/* int sized bitfield, both signed and</font></i>
<a name='L720'><i><font color='green'>                   unsigned allowed */</font></i>
<a name='L721'>        <b>unsigned</b> <b>int</b> *p = va_arg(*p_va, <b>unsigned</b> <b>int</b> *);
<a name='L722'>        <b>unsigned</b> <b>int</b> ival;
<a name='L723'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L724'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L725'>        ival = (<b>unsigned</b> <b>int</b>)<a href='../S/2799.html#L605' title='Defined at 605 in Objects/longobject.c.'>PyLong_AsUnsignedLongMask</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L726'>        <b>if</b> (ival == (<b>unsigned</b> <b>int</b>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L727'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L728'>        <b>else</b>
<a name='L729'>            *p = ival;
<a name='L730'>        <b>break</b>;
<a name='L731'>    <font color='red'>}</font>
<a name='L732'>
<a name='L733'>    <b>case</b> 'n': <i><font color='green'>/* Py_ssize_t */</font></i>
<a name='L734'>    <font color='red'>{</font>
<a name='L735'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *iobj;
<a name='L736'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *p = va_arg(*p_va, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *);
<a name='L737'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ival = -1;
<a name='L738'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L739'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L740'>        iobj = <a href='../S/2775.html#L1196' title='Defined at 1196 in Objects/abstract.c.'>PyNumber_Index</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L741'>        <b>if</b> (iobj != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L742'>            ival = <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>(iobj);
<a name='L743'>            Py_DECREF(iobj);
<a name='L744'>        <font color='red'>}</font>
<a name='L745'>        <b>if</b> (ival == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L746'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L747'>        *p = ival;
<a name='L748'>        <b>break</b>;
<a name='L749'>    <font color='red'>}</font>
<a name='L750'>    <b>case</b> 'l': <font color='red'>{</font><i><font color='green'>/* long int */</font></i>
<a name='L751'>        <b>long</b> *p = va_arg(*p_va, <b>long</b> *);
<a name='L752'>        <b>long</b> ival;
<a name='L753'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L754'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L755'>        ival = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L756'>        <b>if</b> (ival == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L757'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L758'>        <b>else</b>
<a name='L759'>            *p = ival;
<a name='L760'>        <b>break</b>;
<a name='L761'>    <font color='red'>}</font>
<a name='L762'>
<a name='L763'>    <b>case</b> 'k': <font color='red'>{</font> <i><font color='green'>/* long sized bitfield */</font></i>
<a name='L764'>        <b>unsigned</b> <b>long</b> *p = va_arg(*p_va, <b>unsigned</b> <b>long</b> *);
<a name='L765'>        <b>unsigned</b> <b>long</b> ival;
<a name='L766'>        <b>if</b> (PyLong_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L767'>            ival = <a href='../S/2799.html#L605' title='Defined at 605 in Objects/longobject.c.'>PyLong_AsUnsignedLongMask</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L768'>        <b>else</b>
<a name='L769'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("integer&lt;k&gt;", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L770'>        *p = ival;
<a name='L771'>        <b>break</b>;
<a name='L772'>    <font color='red'>}</font>
<a name='L773'>
<a name='L774'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L775'>    <b>case</b> 'L': <font color='red'>{</font><i><font color='green'>/* PY_LONG_LONG */</font></i>
<a name='L776'>        <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> *p = va_arg( *p_va, <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> * );
<a name='L777'>        <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> ival;
<a name='L778'>        <b>if</b> (<a href='../S/3112.html#L574' title='Defined at 574 in Python/getargs.c.'>float_argument_error</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L779'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L780'>        ival = <a href='../S/2799.html#L1137' title='Defined at 1137 in Objects/longobject.c.'>PyLong_AsLongLong</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L781'>        <b>if</b> (ival == (<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L782'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L783'>        <b>else</b>
<a name='L784'>            *p = ival;
<a name='L785'>        <b>break</b>;
<a name='L786'>    <font color='red'>}</font>
<a name='L787'>
<a name='L788'>    <b>case</b> 'K': <font color='red'>{</font> <i><font color='green'>/* long long sized bitfield */</font></i>
<a name='L789'>        <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> *p = va_arg(*p_va, <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> *);
<a name='L790'>        <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> ival;
<a name='L791'>        <b>if</b> (PyLong_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L792'>            ival = <a href='../S/2799.html#L1251' title='Defined at 1251 in Objects/longobject.c.'>PyLong_AsUnsignedLongLongMask</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L793'>        <b>else</b>
<a name='L794'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("integer&lt;K&gt;", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L795'>        *p = ival;
<a name='L796'>        <b>break</b>;
<a name='L797'>    <font color='red'>}</font>
<a name='L798'><font color='darkred'>#endif</font>
<a name='L799'>
<a name='L800'>    <b>case</b> 'f': <font color='red'>{</font><i><font color='green'>/* float */</font></i>
<a name='L801'>        <b>float</b> *p = va_arg(*p_va, <b>float</b> *);
<a name='L802'>        <b>double</b> <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a> = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L803'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L804'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L805'>        <b>else</b>
<a name='L806'>            *p = (<b>float</b>) <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>;
<a name='L807'>        <b>break</b>;
<a name='L808'>    <font color='red'>}</font>
<a name='L809'>
<a name='L810'>    <b>case</b> 'd': <font color='red'>{</font><i><font color='green'>/* double */</font></i>
<a name='L811'>        <b>double</b> *p = va_arg(*p_va, <b>double</b> *);
<a name='L812'>        <b>double</b> <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a> = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L813'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L814'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L815'>        <b>else</b>
<a name='L816'>            *p = <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>;
<a name='L817'>        <b>break</b>;
<a name='L818'>    <font color='red'>}</font>
<a name='L819'>
<a name='L820'>    <b>case</b> 'D': <font color='red'>{</font><i><font color='green'>/* complex double */</font></i>
<a name='L821'>        <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> *p = va_arg(*p_va, <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> *);
<a name='L822'>        <a href='../S/514.html#L13' title='Defined at 13 in Include/complexobject.h.'>Py_complex</a> cval;
<a name='L823'>        cval = <a href='../S/2784.html#L280' title='Defined at 280 in Objects/complexobject.c.'>PyComplex_AsCComplex</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L824'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L825'>            <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L826'>        <b>else</b>
<a name='L827'>            *p = cval;
<a name='L828'>        <b>break</b>;
<a name='L829'>    <font color='red'>}</font>
<a name='L830'>
<a name='L831'>    <b>case</b> 'c': <font color='red'>{</font><i><font color='green'>/* char */</font></i>
<a name='L832'>        <b>char</b> *p = va_arg(*p_va, <b>char</b> *);
<a name='L833'>        <b>if</b> (PyBytes_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) &amp;&amp; <a href='../S/2779.html#L506' title='Defined at 506 in Objects/bytesobject.c.'>PyBytes_Size</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) == 1)
<a name='L834'>            *p = PyBytes_AS_STRING(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)[0];
<a name='L835'>        <b>else</b>
<a name='L836'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("a byte string of length 1", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L837'>        <b>break</b>;
<a name='L838'>    <font color='red'>}</font>
<a name='L839'>
<a name='L840'>    <b>case</b> 'C': <font color='red'>{</font><i><font color='green'>/* unicode char */</font></i>
<a name='L841'>        <b>int</b> *p = va_arg(*p_va, <b>int</b> *);
<a name='L842'>        <b>if</b> (PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) &amp;&amp;
<a name='L843'>            <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) == 1)
<a name='L844'>            *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)[0];
<a name='L845'>        <b>else</b>
<a name='L846'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("a unicode character", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L847'>        <b>break</b>;
<a name='L848'>    <font color='red'>}</font>
<a name='L849'>
<a name='L850'>    <i><font color='green'>/* XXX WAAAAH!  's', 'y', 'z', 'u', 'Z', 'e', 'w' codes all</font></i>
<a name='L851'><i><font color='green'>       need to be cleaned up! */</font></i>
<a name='L852'>
<a name='L853'>    <b>case</b> 'y': <font color='red'>{</font><i><font color='green'>/* any buffer-like object, but not PyUnicode */</font></i>
<a name='L854'>        <b>void</b> **p = (<b>void</b> **)va_arg(*p_va, <b>char</b> **);
<a name='L855'>        <b>char</b> *buf;
<a name='L856'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> count;
<a name='L857'>        <b>if</b> (*format == '*') <font color='red'>{</font>
<a name='L858'>            <b>if</b> (<a href='../S/3112.html#L1292' title='Defined at 1292 in Python/getargs.c.'>getbuffer</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, (<a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a>*)p, &amp;buf) &lt; 0)
<a name='L859'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(buf, <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L860'>            format++;
<a name='L861'>            <b>if</b> (<a href='../S/3112.html#L149' title='Defined at 149 in Python/getargs.c.'>addcleanup</a>(p, freelist, 1)) <font color='red'>{</font>
<a name='L862'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L863'>                    "(cleanup problem)",
<a name='L864'>                    <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L865'>            <font color='red'>}</font>
<a name='L866'>            <b>break</b>;
<a name='L867'>        <font color='red'>}</font>
<a name='L868'>        count = <a href='../S/3112.html#L1270' title='Defined at 1270 in Python/getargs.c.'>convertbuffer</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, p, &amp;buf);
<a name='L869'>        <b>if</b> (count &lt; 0)
<a name='L870'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(buf, <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L871'>        <b>if</b> (*format == '#') <font color='red'>{</font>
<a name='L872'>            <a href='../D/1103.html' title='Multiple defined in 2 places.'>FETCH_SIZE</a>;
<a name='L873'>            <a href='../D/4970.html' title='Multiple defined in 2 places.'>STORE_SIZE</a>(count);
<a name='L874'>            format++;
<a name='L875'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L876'>            <b>if</b> (strlen(*p) != count)
<a name='L877'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L878'>                    "bytes without null bytes",
<a name='L879'>                    <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L880'>        <font color='red'>}</font>
<a name='L881'>        <b>break</b>;
<a name='L882'>    <font color='red'>}</font>
<a name='L883'>
<a name='L884'>    <b>case</b> 's': <i><font color='green'>/* text string */</font></i>
<a name='L885'>    <b>case</b> 'z': <i><font color='green'>/* text string or None */</font></i>
<a name='L886'>    <font color='red'>{</font>
<a name='L887'>        <b>if</b> (*format == '*') <font color='red'>{</font>
<a name='L888'>            <i><font color='green'>/* "s*" or "z*" */</font></i>
<a name='L889'>            <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> *p = (<a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> *)va_arg(*p_va, <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> *);
<a name='L890'>
<a name='L891'>            <b>if</b> (c == 'z' &amp;&amp; <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None)
<a name='L892'>                <a href='../S/2775.html#L650' title='Defined at 650 in Objects/abstract.c.'>PyBuffer_FillInfo</a>(p, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0, 1, 0);
<a name='L893'>            <b>else</b> <b>if</b> (PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L894'>                uarg = <a href='../S/3112.html#L553' title='Defined at 553 in Python/getargs.c.'>UNICODE_DEFAULT_ENCODING</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L895'>                <b>if</b> (uarg == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L896'>                    <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(<a href='../S/3112.html#L569' title='Defined at 569 in Python/getargs.c.'>CONV_UNICODE</a>,
<a name='L897'>                                      <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L898'>                <a href='../S/2775.html#L650' title='Defined at 650 in Objects/abstract.c.'>PyBuffer_FillInfo</a>(p, <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>,
<a name='L899'>                                  PyBytes_AS_STRING(uarg), PyBytes_GET_SIZE(uarg),
<a name='L900'>                                  1, 0);
<a name='L901'>            <font color='red'>}</font>
<a name='L902'>            <b>else</b> <font color='red'>{</font> <i><font color='green'>/* any buffer-like object */</font></i>
<a name='L903'>                <b>char</b> *buf;
<a name='L904'>                <b>if</b> (<a href='../S/3112.html#L1292' title='Defined at 1292 in Python/getargs.c.'>getbuffer</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, p, &amp;buf) &lt; 0)
<a name='L905'>                    <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(buf, <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L906'>            <font color='red'>}</font>
<a name='L907'>            <b>if</b> (<a href='../S/3112.html#L149' title='Defined at 149 in Python/getargs.c.'>addcleanup</a>(p, freelist, 1)) <font color='red'>{</font>
<a name='L908'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L909'>                    "(cleanup problem)",
<a name='L910'>                    <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L911'>            <font color='red'>}</font>
<a name='L912'>            format++;
<a name='L913'>        <font color='red'>}</font> <b>else</b> <b>if</b> (*format == '#') <font color='red'>{</font> <i><font color='green'>/* any buffer-like object */</font></i>
<a name='L914'>            <i><font color='green'>/* "s#" or "z#" */</font></i>
<a name='L915'>            <b>void</b> **p = (<b>void</b> **)va_arg(*p_va, <b>char</b> **);
<a name='L916'>            <a href='../D/1103.html' title='Multiple defined in 2 places.'>FETCH_SIZE</a>;
<a name='L917'>
<a name='L918'>            <b>if</b> (c == 'z' &amp;&amp; <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None) <font color='red'>{</font>
<a name='L919'>                *p = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L920'>                <a href='../D/4970.html' title='Multiple defined in 2 places.'>STORE_SIZE</a>(0);
<a name='L921'>            <font color='red'>}</font>
<a name='L922'>            <b>else</b> <b>if</b> (PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L923'>                uarg = <a href='../S/3112.html#L553' title='Defined at 553 in Python/getargs.c.'>UNICODE_DEFAULT_ENCODING</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L924'>                <b>if</b> (uarg == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L925'>                    <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(<a href='../S/3112.html#L569' title='Defined at 569 in Python/getargs.c.'>CONV_UNICODE</a>,
<a name='L926'>                                      <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L927'>                *p = PyBytes_AS_STRING(uarg);
<a name='L928'>                <a href='../D/4970.html' title='Multiple defined in 2 places.'>STORE_SIZE</a>(PyBytes_GET_SIZE(uarg));
<a name='L929'>            <font color='red'>}</font>
<a name='L930'>            <b>else</b> <font color='red'>{</font> <i><font color='green'>/* any buffer-like object */</font></i>
<a name='L931'>                <i><font color='green'>/* XXX Really? */</font></i>
<a name='L932'>                <b>char</b> *buf;
<a name='L933'>                <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> count = <a href='../S/3112.html#L1270' title='Defined at 1270 in Python/getargs.c.'>convertbuffer</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, p, &amp;buf);
<a name='L934'>                <b>if</b> (count &lt; 0)
<a name='L935'>                    <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(buf, <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L936'>                <a href='../D/4970.html' title='Multiple defined in 2 places.'>STORE_SIZE</a>(count);
<a name='L937'>            <font color='red'>}</font>
<a name='L938'>            format++;
<a name='L939'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L940'>            <i><font color='green'>/* "s" or "z" */</font></i>
<a name='L941'>            <b>char</b> **p = va_arg(*p_va, <b>char</b> **);
<a name='L942'>            uarg = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L943'>
<a name='L944'>            <b>if</b> (c == 'z' &amp;&amp; <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None)
<a name='L945'>                *p = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L946'>            <b>else</b> <b>if</b> (PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L947'>                uarg = <a href='../S/3112.html#L553' title='Defined at 553 in Python/getargs.c.'>UNICODE_DEFAULT_ENCODING</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L948'>                <b>if</b> (uarg == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L949'>                    <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(<a href='../S/3112.html#L569' title='Defined at 569 in Python/getargs.c.'>CONV_UNICODE</a>,
<a name='L950'>                                      <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L951'>                *p = PyBytes_AS_STRING(uarg);
<a name='L952'>            <font color='red'>}</font>
<a name='L953'>            <b>else</b>
<a name='L954'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(c == 'z' ? "str or None" : "str",
<a name='L955'>                                  <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L956'>            <b>if</b> (*p != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; uarg != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp;
<a name='L957'>                (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>) strlen(*p) != PyBytes_GET_SIZE(uarg))
<a name='L958'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L959'>                    c == 'z' ? "str without null bytes or None"
<a name='L960'>                             : "str without null bytes",
<a name='L961'>                    <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L962'>        <font color='red'>}</font>
<a name='L963'>        <b>break</b>;
<a name='L964'>    <font color='red'>}</font>
<a name='L965'>
<a name='L966'>    <b>case</b> 'u': <i><font color='green'>/* raw unicode buffer (Py_UNICODE *) */</font></i>
<a name='L967'>    <b>case</b> 'Z': <i><font color='green'>/* raw unicode buffer or None */</font></i>
<a name='L968'>    <font color='red'>{</font>
<a name='L969'>        <b>if</b> (*format == '#') <font color='red'>{</font> <i><font color='green'>/* any buffer-like object */</font></i>
<a name='L970'>            <i><font color='green'>/* "s#" or "Z#" */</font></i>
<a name='L971'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> **p = va_arg(*p_va, <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> **);
<a name='L972'>            <a href='../D/1103.html' title='Multiple defined in 2 places.'>FETCH_SIZE</a>;
<a name='L973'>
<a name='L974'>            <b>if</b> (c == 'Z' &amp;&amp; <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None) <font color='red'>{</font>
<a name='L975'>                *p = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L976'>                <a href='../D/4970.html' title='Multiple defined in 2 places.'>STORE_SIZE</a>(0);
<a name='L977'>            <font color='red'>}</font>
<a name='L978'>            <b>else</b> <b>if</b> (PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L979'>                *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L980'>                <a href='../D/4970.html' title='Multiple defined in 2 places.'>STORE_SIZE</a>(<a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>));
<a name='L981'>            <font color='red'>}</font>
<a name='L982'>            <b>else</b>
<a name='L983'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("str or None", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L984'>            format++;
<a name='L985'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L986'>            <i><font color='green'>/* "s" or "Z" */</font></i>
<a name='L987'>            <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> **p = va_arg(*p_va, <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> **);
<a name='L988'>
<a name='L989'>            <b>if</b> (c == 'Z' &amp;&amp; <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a> == Py_None)
<a name='L990'>                *p = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L991'>            <b>else</b> <b>if</b> (PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)) <font color='red'>{</font>
<a name='L992'>                *p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L993'>                <b>if</b> (<a href='../S/2828.html#L10239' title='Defined at 10239 in Objects/unicodeobject.c.'>Py_UNICODE_strlen</a>(*p) != <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L994'>                    <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L995'>                        "str without null character or None",
<a name='L996'>                        <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L997'>            <font color='red'>}</font> <b>else</b>
<a name='L998'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(c == 'Z' ? "str or None" : "str",
<a name='L999'>                                  <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1000'>        <font color='red'>}</font>
<a name='L1001'>        <b>break</b>;
<a name='L1002'>    <font color='red'>}</font>
<a name='L1003'>
<a name='L1004'>    <b>case</b> 'e': <font color='red'>{</font><i><font color='green'>/* encoded string */</font></i>
<a name='L1005'>        <b>char</b> **<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>;
<a name='L1006'>        <b>const</b> <b>char</b> *<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>;
<a name='L1007'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *s;
<a name='L1008'>        <b>int</b> recode_strings;
<a name='L1009'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size;
<a name='L1010'>        <b>const</b> <b>char</b> *ptr;
<a name='L1011'>
<a name='L1012'>        <i><font color='green'>/* Get 'e' parameter: the encoding name */</font></i>
<a name='L1013'>        <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = (<b>const</b> <b>char</b> *)va_arg(*p_va, <b>const</b> <b>char</b> *);
<a name='L1014'>        <b>if</b> (<a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1015'>            <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a> = <a href='../D/4018.html' title='Multiple defined in 3 places.'>PyUnicode_GetDefaultEncoding</a>();
<a name='L1016'>
<a name='L1017'>        <i><font color='green'>/* Get output buffer parameter:</font></i>
<a name='L1018'><i><font color='green'>           's' (recode all objects via Unicode) or</font></i>
<a name='L1019'><i><font color='green'>           't' (only recode non-string objects)</font></i>
<a name='L1020'><i><font color='green'>        */</font></i>
<a name='L1021'>        <b>if</b> (*format == 's')
<a name='L1022'>            recode_strings = 1;
<a name='L1023'>        <b>else</b> <b>if</b> (*format == 't')
<a name='L1024'>            recode_strings = 0;
<a name='L1025'>        <b>else</b>
<a name='L1026'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1027'>                "(unknown parser marker combination)",
<a name='L1028'>                <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1029'>        <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = (<b>char</b> **)va_arg(*p_va, <b>char</b> **);
<a name='L1030'>        format++;
<a name='L1031'>        <b>if</b> (<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1032'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("(buffer is NULL)",
<a name='L1033'>                              <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1034'>
<a name='L1035'>        <i><font color='green'>/* Encode object */</font></i>
<a name='L1036'>        <b>if</b> (!recode_strings &amp;&amp;
<a name='L1037'>            (PyBytes_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>) || PyByteArray_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))) <font color='red'>{</font>
<a name='L1038'>            s = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1039'>            Py_INCREF(s);
<a name='L1040'>            <b>if</b> (<a href='../S/2775.html#L226' title='Defined at 226 in Objects/abstract.c.'>PyObject_AsCharBuffer</a>(s, &amp;ptr, &amp;size) &lt; 0)
<a name='L1041'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("(AsCharBuffer failed)",
<a name='L1042'>                                  <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1043'>        <font color='red'>}</font>
<a name='L1044'>        <b>else</b> <font color='red'>{</font>
<a name='L1045'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *u;
<a name='L1046'>
<a name='L1047'>            <i><font color='green'>/* Convert object to Unicode */</font></i>
<a name='L1048'>            u = <a href='../D/4010.html' title='Multiple defined in 3 places.'>PyUnicode_FromObject</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>);
<a name='L1049'>            <b>if</b> (u == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1050'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1051'>                    "string or unicode or text buffer",
<a name='L1052'>                    <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1053'>
<a name='L1054'>            <i><font color='green'>/* Encode object; use default error handling */</font></i>
<a name='L1055'>            s = <a href='../D/3952.html' title='Multiple defined in 3 places.'>PyUnicode_AsEncodedString</a>(u,
<a name='L1056'>                                          <a href='../D/8346.html' title='Multiple defined in 2 places.'>encoding</a>,
<a name='L1057'>                                          <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1058'>            Py_DECREF(u);
<a name='L1059'>            <b>if</b> (s == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1060'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("(encoding failed)",
<a name='L1061'>                                  <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1062'>            <b>if</b> (!PyBytes_Check(s)) <font color='red'>{</font>
<a name='L1063'>                Py_DECREF(s);
<a name='L1064'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1065'>                    "(encoder failed to return bytes)",
<a name='L1066'>                    <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1067'>            <font color='red'>}</font>
<a name='L1068'>            size = PyBytes_GET_SIZE(s);
<a name='L1069'>            ptr = PyBytes_AS_STRING(s);
<a name='L1070'>            <b>if</b> (ptr == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1071'>                ptr = "";
<a name='L1072'>        <font color='red'>}</font>
<a name='L1073'>
<a name='L1074'>        <i><font color='green'>/* Write output; output is guaranteed to be 0-terminated */</font></i>
<a name='L1075'>        <b>if</b> (*format == '#') <font color='red'>{</font>
<a name='L1076'>            <i><font color='green'>/* Using buffer length parameter '#':</font></i>
<a name='L1077'><i><font color='green'></font></i>
<a name='L1078'><i><font color='green'>               - if *buffer is NULL, a new buffer of the</font></i>
<a name='L1079'><i><font color='green'>               needed size is allocated and the data</font></i>
<a name='L1080'><i><font color='green'>               copied into it; *buffer is updated to point</font></i>
<a name='L1081'><i><font color='green'>               to the new buffer; the caller is</font></i>
<a name='L1082'><i><font color='green'>               responsible for PyMem_Free()ing it after</font></i>
<a name='L1083'><i><font color='green'>               usage</font></i>
<a name='L1084'><i><font color='green'></font></i>
<a name='L1085'><i><font color='green'>               - if *buffer is not NULL, the data is</font></i>
<a name='L1086'><i><font color='green'>               copied to *buffer; *buffer_len has to be</font></i>
<a name='L1087'><i><font color='green'>               set to the size of the buffer on input;</font></i>
<a name='L1088'><i><font color='green'>               buffer overflow is signalled with an error;</font></i>
<a name='L1089'><i><font color='green'>               buffer has to provide enough room for the</font></i>
<a name='L1090'><i><font color='green'>               encoded string plus the trailing 0-byte</font></i>
<a name='L1091'><i><font color='green'></font></i>
<a name='L1092'><i><font color='green'>               - in both cases, *buffer_len is updated to</font></i>
<a name='L1093'><i><font color='green'>               the size of the buffer /excluding/ the</font></i>
<a name='L1094'><i><font color='green'>               trailing 0-byte</font></i>
<a name='L1095'><i><font color='green'></font></i>
<a name='L1096'><i><font color='green'>            */</font></i>
<a name='L1097'>            <a href='../D/1103.html' title='Multiple defined in 2 places.'>FETCH_SIZE</a>;
<a name='L1098'>
<a name='L1099'>            format++;
<a name='L1100'>            <b>if</b> (q == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; q2 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1101'>                Py_DECREF(s);
<a name='L1102'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1103'>                    "(buffer_len is NULL)",
<a name='L1104'>                    <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1105'>            <font color='red'>}</font>
<a name='L1106'>            <b>if</b> (*<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1107'>                *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = PyMem_NEW(<b>char</b>, size + 1);
<a name='L1108'>                <b>if</b> (*<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1109'>                    Py_DECREF(s);
<a name='L1110'>                    <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1111'>                    <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L1112'>                <font color='red'>}</font>
<a name='L1113'>                <b>if</b> (<a href='../S/3112.html#L149' title='Defined at 149 in Python/getargs.c.'>addcleanup</a>(*<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, freelist, 0)) <font color='red'>{</font>
<a name='L1114'>                    Py_DECREF(s);
<a name='L1115'>                    <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1116'>                        "(cleanup problem)",
<a name='L1117'>                        <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1118'>                <font color='red'>}</font>
<a name='L1119'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1120'>                <b>if</b> (size + 1 &gt; <a href='../D/352.html' title='Multiple defined in 2 places.'>BUFFER_LEN</a>) <font color='red'>{</font>
<a name='L1121'>                    Py_DECREF(s);
<a name='L1122'>                    <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1123'>                        "(buffer overflow)",
<a name='L1124'>                        <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1125'>                <font color='red'>}</font>
<a name='L1126'>            <font color='red'>}</font>
<a name='L1127'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(*<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, ptr, size+1);
<a name='L1128'>            <a href='../D/4970.html' title='Multiple defined in 2 places.'>STORE_SIZE</a>(size);
<a name='L1129'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1130'>            <i><font color='green'>/* Using a 0-terminated buffer:</font></i>
<a name='L1131'><i><font color='green'></font></i>
<a name='L1132'><i><font color='green'>               - the encoded string has to be 0-terminated</font></i>
<a name='L1133'><i><font color='green'>               for this variant to work; if it is not, an</font></i>
<a name='L1134'><i><font color='green'>               error raised</font></i>
<a name='L1135'><i><font color='green'></font></i>
<a name='L1136'><i><font color='green'>               - a new buffer of the needed size is</font></i>
<a name='L1137'><i><font color='green'>               allocated and the data copied into it;</font></i>
<a name='L1138'><i><font color='green'>               *buffer is updated to point to the new</font></i>
<a name='L1139'><i><font color='green'>               buffer; the caller is responsible for</font></i>
<a name='L1140'><i><font color='green'>               PyMem_Free()ing it after usage</font></i>
<a name='L1141'><i><font color='green'></font></i>
<a name='L1142'><i><font color='green'>            */</font></i>
<a name='L1143'>            <b>if</b> ((<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)strlen(ptr) != size) <font color='red'>{</font>
<a name='L1144'>                Py_DECREF(s);
<a name='L1145'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1146'>                    "encoded string without NULL bytes",
<a name='L1147'>                    <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1148'>            <font color='red'>}</font>
<a name='L1149'>            *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = PyMem_NEW(<b>char</b>, size + 1);
<a name='L1150'>            <b>if</b> (*<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1151'>                Py_DECREF(s);
<a name='L1152'>                <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1153'>                <a href='../D/4489.html' title='Multiple defined in 2 places.'>RETURN_ERR_OCCURRED</a>;
<a name='L1154'>            <font color='red'>}</font>
<a name='L1155'>            <b>if</b> (<a href='../S/3112.html#L149' title='Defined at 149 in Python/getargs.c.'>addcleanup</a>(*<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, freelist, 0)) <font color='red'>{</font>
<a name='L1156'>                Py_DECREF(s);
<a name='L1157'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("(cleanup problem)",
<a name='L1158'>                                <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1159'>            <font color='red'>}</font>
<a name='L1160'>            <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(*<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, ptr, size+1);
<a name='L1161'>        <font color='red'>}</font>
<a name='L1162'>        Py_DECREF(s);
<a name='L1163'>        <b>break</b>;
<a name='L1164'>    <font color='red'>}</font>
<a name='L1165'>
<a name='L1166'>    <b>case</b> 'S': <font color='red'>{</font> <i><font color='green'>/* PyBytes object */</font></i>
<a name='L1167'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **p = va_arg(*p_va, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1168'>        <b>if</b> (PyBytes_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L1169'>            *p = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1170'>        <b>else</b>
<a name='L1171'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("bytes", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1172'>        <b>break</b>;
<a name='L1173'>    <font color='red'>}</font>
<a name='L1174'>
<a name='L1175'>    <b>case</b> 'Y': <font color='red'>{</font> <i><font color='green'>/* PyByteArray object */</font></i>
<a name='L1176'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **p = va_arg(*p_va, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1177'>        <b>if</b> (PyByteArray_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L1178'>            *p = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1179'>        <b>else</b>
<a name='L1180'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("bytearray", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1181'>        <b>break</b>;
<a name='L1182'>    <font color='red'>}</font>
<a name='L1183'>
<a name='L1184'>    <b>case</b> 'U': <font color='red'>{</font> <i><font color='green'>/* PyUnicode object */</font></i>
<a name='L1185'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **p = va_arg(*p_va, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1186'>        <b>if</b> (PyUnicode_Check(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>))
<a name='L1187'>            *p = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1188'>        <b>else</b>
<a name='L1189'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("str", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1190'>        <b>break</b>;
<a name='L1191'>    <font color='red'>}</font>
<a name='L1192'>
<a name='L1193'>    <b>case</b> 'O': <font color='red'>{</font> <i><font color='green'>/* object */</font></i>
<a name='L1194'>        <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> *type;
<a name='L1195'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **p;
<a name='L1196'>        <b>if</b> (*format == '!') <font color='red'>{</font>
<a name='L1197'>            type = va_arg(*p_va, <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a>*);
<a name='L1198'>            p = va_arg(*p_va, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1199'>            format++;
<a name='L1200'>            <b>if</b> (<a href='../S/2824.html#L1082' title='Defined at 1082 in Objects/typeobject.c.'>PyType_IsSubtype</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>-&gt;ob_type, type))
<a name='L1201'>                *p = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1202'>            <b>else</b>
<a name='L1203'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(type-&gt;tp_name, <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1204'>
<a name='L1205'>        <font color='red'>}</font>
<a name='L1206'>        <b>else</b> <b>if</b> (*format == '&amp;') <font color='red'>{</font>
<a name='L1207'>            <b>typedef</b> <b>int</b> (*converter)(PyObject *, <b>void</b> *);
<a name='L1208'>            <a href='../S/2250.html#L1603' title='Defined at 1603 in Modules/_ctypes/callproc.c.'>converter</a> <a href='../S/2846.html#L599' title='Defined at 599 in Parser/pgen.c.'>convert</a> = va_arg(*p_va, <a href='../S/2250.html#L1603' title='Defined at 1603 in Modules/_ctypes/callproc.c.'>converter</a>);
<a name='L1209'>            <b>void</b> *addr = va_arg(*p_va, <b>void</b> *);
<a name='L1210'>            <b>int</b> res;
<a name='L1211'>            format++;
<a name='L1212'>            <b>if</b> (! (res = (*<a href='../S/2846.html#L599' title='Defined at 599 in Parser/pgen.c.'>convert</a>)(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, addr)))
<a name='L1213'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("(unspecified)",
<a name='L1214'>                                  <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1215'>            <b>if</b> (res == Py_CLEANUP_SUPPORTED &amp;&amp;
<a name='L1216'>                <a href='../S/3112.html#L196' title='Defined at 196 in Python/getargs.c.'>addcleanup_convert</a>(addr, freelist, <a href='../S/2846.html#L599' title='Defined at 599 in Parser/pgen.c.'>convert</a>) == -1)
<a name='L1217'>                <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("(cleanup problem)",
<a name='L1218'>                                <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1219'>        <font color='red'>}</font>
<a name='L1220'>        <b>else</b> <font color='red'>{</font>
<a name='L1221'>            p = va_arg(*p_va, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1222'>            *p = <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>;
<a name='L1223'>        <font color='red'>}</font>
<a name='L1224'>        <b>break</b>;
<a name='L1225'>    <font color='red'>}</font>
<a name='L1226'>
<a name='L1227'>
<a name='L1228'>    <b>case</b> 'w': <font color='red'>{</font> <i><font color='green'>/* "w*": memory buffer, read-write access */</font></i>
<a name='L1229'>        <b>void</b> **p = va_arg(*p_va, <b>void</b> **);
<a name='L1230'>
<a name='L1231'>        <b>if</b> (*format != '*')
<a name='L1232'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1233'>                "invalid use of 'w' format character",
<a name='L1234'>                <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1235'>        format++;
<a name='L1236'>
<a name='L1237'>        <i><font color='green'>/* Caller is interested in Py_buffer, and the object</font></i>
<a name='L1238'><i><font color='green'>           supports it directly. */</font></i>
<a name='L1239'>        <b>if</b> (<a href='../S/2775.html#L330' title='Defined at 330 in Objects/abstract.c.'>PyObject_GetBuffer</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, (<a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a>*)p, <a href='../S/544.html#L170' title='Defined at 170 in Include/object.h.'>PyBUF_WRITABLE</a>) &lt; 0) <font color='red'>{</font>
<a name='L1240'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1241'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("read-write buffer", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1242'>        <font color='red'>}</font>
<a name='L1243'>        <b>if</b> (!<a href='../S/2775.html#L384' title='Defined at 384 in Objects/abstract.c.'>PyBuffer_IsContiguous</a>((<a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a>*)p, 'C')) <font color='red'>{</font>
<a name='L1244'>            <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>((<a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a>*)p);
<a name='L1245'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("contiguous buffer", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1246'>        <font color='red'>}</font>
<a name='L1247'>        <b>if</b> (<a href='../S/3112.html#L149' title='Defined at 149 in Python/getargs.c.'>addcleanup</a>(p, freelist, 1)) <font color='red'>{</font>
<a name='L1248'>            <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>(
<a name='L1249'>                "(cleanup problem)",
<a name='L1250'>                <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1251'>        <font color='red'>}</font>
<a name='L1252'>        <b>break</b>;
<a name='L1253'>    <font color='red'>}</font>
<a name='L1254'>
<a name='L1255'>    <b>default</b>:
<a name='L1256'>        <b>return</b> <a href='../S/3112.html#L559' title='Defined at 559 in Python/getargs.c.'>converterr</a>("impossible&lt;bad format char&gt;", <a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, msgbuf, bufsize);
<a name='L1257'>
<a name='L1258'>    <font color='red'>}</font>
<a name='L1259'>
<a name='L1260'>    *p_format = format;
<a name='L1261'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1262'>
<a name='L1263'><font color='darkred'>#undef</font> <a href='../R/1004.html' title='Multiple refered from 4 places.'>FETCH_SIZE</a>
<a name='L1264'><font color='darkred'>#undef</font> <a href='../R/4381.html' title='Multiple refered from 7 places.'>STORE_SIZE</a>
<a name='L1265'><font color='darkred'>#undef</font> <a href='../S/3112.html#L1120' title='Refered from 1120 in Python/getargs.c.'>BUFFER_LEN</a>
<a name='L1266'><font color='darkred'>#undef</font> <a href='../R/3957.html' title='Multiple refered from 29 places.'>RETURN_ERR_OCCURRED</a>
<a name='L1267'><font color='red'>}</font>
<a name='L1268'>
<a name='L1269'><b>static</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L1270'><a href='../R/7002.html' title='Multiple refered from 2 places.'>convertbuffer</a>(PyObject *arg, <b>void</b> **p, <b>char</b> **errmsg)
<a name='L1271'><font color='red'>{</font>
<a name='L1272'>    <a href='../S/544.html#L273' title='Defined at 273 in Include/object.h.'>PyBufferProcs</a> *pb = <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>)-&gt;tp_as_buffer;
<a name='L1273'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> count;
<a name='L1274'>    <a href='../S/544.html#L163' title='Defined at 163 in Include/object.h.'>Py_buffer</a> view;
<a name='L1275'>
<a name='L1276'>    *errmsg = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1277'>    *p = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1278'>    <b>if</b> (pb != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; pb-&gt;bf_releasebuffer != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1279'>        *errmsg = "read-only pinned buffer";
<a name='L1280'>        <b>return</b> -1;
<a name='L1281'>    <font color='red'>}</font>
<a name='L1282'>
<a name='L1283'>    <b>if</b> (<a href='../S/3112.html#L1292' title='Defined at 1292 in Python/getargs.c.'>getbuffer</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, &amp;view, errmsg) &lt; 0)
<a name='L1284'>        <b>return</b> -1;
<a name='L1285'>    count = view.len;
<a name='L1286'>    *p = view.buf;
<a name='L1287'>    <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(&amp;view);
<a name='L1288'>    <b>return</b> count;
<a name='L1289'><font color='red'>}</font>
<a name='L1290'>
<a name='L1291'><b>static</b> <b>int</b>
<a name='L1292'><a href='../R/8140.html' title='Multiple refered from 3 places.'>getbuffer</a>(PyObject *arg, Py_buffer *view, <b>char</b> **errmsg)
<a name='L1293'><font color='red'>{</font>
<a name='L1294'>    <b>if</b> (<a href='../S/2775.html#L330' title='Defined at 330 in Objects/abstract.c.'>PyObject_GetBuffer</a>(<a href='../D/6730.html' title='Multiple defined in 2 places.'>arg</a>, view, <a href='../S/544.html#L169' title='Defined at 169 in Include/object.h.'>PyBUF_SIMPLE</a>) != 0) <font color='red'>{</font>
<a name='L1295'>        *errmsg = "bytes or buffer";
<a name='L1296'>        <b>return</b> -1;
<a name='L1297'>    <font color='red'>}</font>
<a name='L1298'>    <b>if</b> (!<a href='../S/2775.html#L384' title='Defined at 384 in Objects/abstract.c.'>PyBuffer_IsContiguous</a>(view, 'C')) <font color='red'>{</font>
<a name='L1299'>        <a href='../S/2775.html#L684' title='Defined at 684 in Objects/abstract.c.'>PyBuffer_Release</a>(view);
<a name='L1300'>        *errmsg = "contiguous buffer";
<a name='L1301'>        <b>return</b> -1;
<a name='L1302'>    <font color='red'>}</font>
<a name='L1303'>    <b>return</b> 0;
<a name='L1304'><font color='red'>}</font>
<a name='L1305'>
<a name='L1306'><i><font color='green'>/* Support for keyword arguments donated by</font></i>
<a name='L1307'><i><font color='green'>   Geoff Philbrick &lt;philbric@delphi.hks.com&gt; */</font></i>
<a name='L1308'>
<a name='L1309'><i><font color='green'>/* Return false (0) for error, else true. */</font></i>
<a name='L1310'><b>int</b>
<a name='L1311'><a href='../R/2491.html' title='Multiple refered from 182 places.'>PyArg_ParseTupleAndKeywords</a>(PyObject *args,
<a name='L1312'>                            PyObject *keywords,
<a name='L1313'>                            <b>const</b> <b>char</b> *format,
<a name='L1314'>                            <b>char</b> **kwlist, ...)
<a name='L1315'><font color='red'>{</font>
<a name='L1316'>    <b>int</b> retval;
<a name='L1317'>    va_list va;
<a name='L1318'>
<a name='L1319'>    <b>if</b> ((<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) ||
<a name='L1320'>        (keywords != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; !PyDict_Check(keywords)) ||
<a name='L1321'>        format == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L1322'>        kwlist == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1323'>    <font color='red'>{</font>
<a name='L1324'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1325'>        <b>return</b> 0;
<a name='L1326'>    <font color='red'>}</font>
<a name='L1327'>
<a name='L1328'>    va_start(va, kwlist);
<a name='L1329'>    retval = <a href='../S/3112.html#L1427' title='Defined at 1427 in Python/getargs.c.'>vgetargskeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, keywords, format, kwlist, &amp;va, 0);
<a name='L1330'>    va_end(va);
<a name='L1331'>    <b>return</b> retval;
<a name='L1332'><font color='red'>}</font>
<a name='L1333'>
<a name='L1334'><b>int</b>
<a name='L1335'><a href='../S/541.html#L17' title='Refered from 17 in Include/modsupport.h.'>_PyArg_ParseTupleAndKeywords_SizeT</a>(PyObject *args,
<a name='L1336'>                                  PyObject *keywords,
<a name='L1337'>                                  <b>const</b> <b>char</b> *format,
<a name='L1338'>                                  <b>char</b> **kwlist, ...)
<a name='L1339'><font color='red'>{</font>
<a name='L1340'>    <b>int</b> retval;
<a name='L1341'>    va_list va;
<a name='L1342'>
<a name='L1343'>    <b>if</b> ((<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) ||
<a name='L1344'>        (keywords != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; !PyDict_Check(keywords)) ||
<a name='L1345'>        format == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L1346'>        kwlist == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1347'>    <font color='red'>{</font>
<a name='L1348'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1349'>        <b>return</b> 0;
<a name='L1350'>    <font color='red'>}</font>
<a name='L1351'>
<a name='L1352'>    va_start(va, kwlist);
<a name='L1353'>    retval = <a href='../S/3112.html#L1427' title='Defined at 1427 in Python/getargs.c.'>vgetargskeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, keywords, format,
<a name='L1354'>                              kwlist, &amp;va, <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>);
<a name='L1355'>    va_end(va);
<a name='L1356'>    <b>return</b> retval;
<a name='L1357'><font color='red'>}</font>
<a name='L1358'>
<a name='L1359'>
<a name='L1360'><b>int</b>
<a name='L1361'><a href='../S/3112.html#L18' title='Refered from 18 in Python/getargs.c.'>PyArg_VaParseTupleAndKeywords</a>(PyObject *args,
<a name='L1362'>                              PyObject *keywords,
<a name='L1363'>                              <b>const</b> <b>char</b> *format,
<a name='L1364'>                              <b>char</b> **kwlist, va_list va)
<a name='L1365'><font color='red'>{</font>
<a name='L1366'>    <b>int</b> retval;
<a name='L1367'>    va_list lva;
<a name='L1368'>
<a name='L1369'>    <b>if</b> ((<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) ||
<a name='L1370'>        (keywords != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; !PyDict_Check(keywords)) ||
<a name='L1371'>        format == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L1372'>        kwlist == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1373'>    <font color='red'>{</font>
<a name='L1374'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1375'>        <b>return</b> 0;
<a name='L1376'>    <font color='red'>}</font>
<a name='L1377'>
<a name='L1378'>        <a href='../D/4300.html' title='Multiple defined in 3 places.'>Py_VA_COPY</a>(lva, va);
<a name='L1379'>
<a name='L1380'>    retval = <a href='../S/3112.html#L1427' title='Defined at 1427 in Python/getargs.c.'>vgetargskeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, keywords, format, kwlist, &amp;lva, 0);
<a name='L1381'>    <b>return</b> retval;
<a name='L1382'><font color='red'>}</font>
<a name='L1383'>
<a name='L1384'><b>int</b>
<a name='L1385'><a href='../S/541.html#L19' title='Refered from 19 in Include/modsupport.h.'>_PyArg_VaParseTupleAndKeywords_SizeT</a>(PyObject *args,
<a name='L1386'>                                    PyObject *keywords,
<a name='L1387'>                                    <b>const</b> <b>char</b> *format,
<a name='L1388'>                                    <b>char</b> **kwlist, va_list va)
<a name='L1389'><font color='red'>{</font>
<a name='L1390'>    <b>int</b> retval;
<a name='L1391'>    va_list lva;
<a name='L1392'>
<a name='L1393'>    <b>if</b> ((<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) ||
<a name='L1394'>        (keywords != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; !PyDict_Check(keywords)) ||
<a name='L1395'>        format == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L1396'>        kwlist == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1397'>    <font color='red'>{</font>
<a name='L1398'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1399'>        <b>return</b> 0;
<a name='L1400'>    <font color='red'>}</font>
<a name='L1401'>
<a name='L1402'>        <a href='../D/4300.html' title='Multiple defined in 3 places.'>Py_VA_COPY</a>(lva, va);
<a name='L1403'>
<a name='L1404'>    retval = <a href='../S/3112.html#L1427' title='Defined at 1427 in Python/getargs.c.'>vgetargskeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, keywords, format,
<a name='L1405'>                              kwlist, &amp;lva, <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>);
<a name='L1406'>    <b>return</b> retval;
<a name='L1407'><font color='red'>}</font>
<a name='L1408'>
<a name='L1409'><b>int</b>
<a name='L1410'><a href='../S/2787.html#L1396' title='Refered from 1396 in Objects/dictobject.c.'>PyArg_ValidateKeywordArguments</a>(PyObject *kwargs)
<a name='L1411'><font color='red'>{</font>
<a name='L1412'>    <b>if</b> (!PyDict_Check(kwargs)) <font color='red'>{</font>
<a name='L1413'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1414'>        <b>return</b> 0;
<a name='L1415'>    <font color='red'>}</font>
<a name='L1416'>    <b>if</b> (!<a href='../S/2787.html#L453' title='Defined at 453 in Objects/dictobject.c.'>_PyDict_HasOnlyStringKeys</a>(kwargs)) <font color='red'>{</font>
<a name='L1417'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1418'>                        "keyword arguments must be strings");
<a name='L1419'>        <b>return</b> 0;
<a name='L1420'>    <font color='red'>}</font>
<a name='L1421'>    <b>return</b> 1;
<a name='L1422'><font color='red'>}</font>
<a name='L1423'>
<a name='L1424'><font color='darkred'>#define</font> <a href='../R/1590.html' title='Multiple refered from 3 places.'>IS_END_OF_FORMAT</a>(c) (c == '\0' || c == ';' || c == ':')
<a name='L1425'>
<a name='L1426'><b>static</b> <b>int</b>
<a name='L1427'><a href='../R/11360.html' title='Multiple refered from 4 places.'>vgetargskeywords</a>(PyObject *args, PyObject *keywords, <b>const</b> <b>char</b> *format,
<a name='L1428'>                 <b>char</b> **kwlist, va_list *p_va, <b>int</b> flags)
<a name='L1429'><font color='red'>{</font>
<a name='L1430'>    <b>char</b> msgbuf[512];
<a name='L1431'>    <b>int</b> levels[32];
<a name='L1432'>    <b>const</b> <b>char</b> *fname, *msg, *custom_msg, *<a href='../D/9394.html' title='Multiple defined in 2 places.'>keyword</a>;
<a name='L1433'>    <b>int</b> <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> = <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>;
<a name='L1434'>    <b>int</b> i, len, nargs, nkeywords;
<a name='L1435'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *freelist = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *current_arg;
<a name='L1436'>
<a name='L1437'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>));
<a name='L1438'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(keywords == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || PyDict_Check(keywords));
<a name='L1439'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(format != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1440'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(kwlist != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1441'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(p_va != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1442'>
<a name='L1443'>    <i><font color='green'>/* grab the function name or custom error msg first (mutually exclusive) */</font></i>
<a name='L1444'>    fname = strchr(format, ':');
<a name='L1445'>    <b>if</b> (fname) <font color='red'>{</font>
<a name='L1446'>        fname++;
<a name='L1447'>        custom_msg = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1448'>    <font color='red'>}</font>
<a name='L1449'>    <b>else</b> <font color='red'>{</font>
<a name='L1450'>        custom_msg = strchr(format,';');
<a name='L1451'>        <b>if</b> (custom_msg)
<a name='L1452'>            custom_msg++;
<a name='L1453'>    <font color='red'>}</font>
<a name='L1454'>
<a name='L1455'>    <i><font color='green'>/* scan kwlist and get greatest possible nbr of args */</font></i>
<a name='L1456'>    <b>for</b> (len=0; kwlist[len]; len++)
<a name='L1457'>        <b>continue</b>;
<a name='L1458'>
<a name='L1459'>    nargs = PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L1460'>    nkeywords = (keywords == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) ? 0 : <a href='../S/2787.html#L1620' title='Defined at 1620 in Objects/dictobject.c.'>PyDict_Size</a>(keywords);
<a name='L1461'>    <b>if</b> (nargs + nkeywords &gt; len) <font color='red'>{</font>
<a name='L1462'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError, "%s%s takes at most %d "
<a name='L1463'>                     "argument%s (%d given)",
<a name='L1464'>                     (fname == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) ? "function" : fname,
<a name='L1465'>                     (fname == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) ? "" : "()",
<a name='L1466'>                     len,
<a name='L1467'>                     (len == 1) ? "" : "s",
<a name='L1468'>                     nargs + nkeywords);
<a name='L1469'>        <b>return</b> 0;
<a name='L1470'>    <font color='red'>}</font>
<a name='L1471'>
<a name='L1472'>    <i><font color='green'>/* convert tuple args and keyword args in same loop, using kwlist to drive process */</font></i>
<a name='L1473'>    <b>for</b> (i = 0; i &lt; len; i++) <font color='red'>{</font>
<a name='L1474'>        <a href='../D/9394.html' title='Multiple defined in 2 places.'>keyword</a> = kwlist[i];
<a name='L1475'>        <b>if</b> (*format == '|') <font color='red'>{</font>
<a name='L1476'>            <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> = i;
<a name='L1477'>            format++;
<a name='L1478'>        <font color='red'>}</font>
<a name='L1479'>        <b>if</b> (<a href='../S/3112.html#L1424' title='Defined at 1424 in Python/getargs.c.'>IS_END_OF_FORMAT</a>(*format)) <font color='red'>{</font>
<a name='L1480'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L1481'>                         "More keyword list entries (%d) than "
<a name='L1482'>                         "format specifiers (%d)", len, i);
<a name='L1483'>            <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1484'>        <font color='red'>}</font>
<a name='L1485'>        current_arg = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1486'>        <b>if</b> (nkeywords) <font color='red'>{</font>
<a name='L1487'>            current_arg = <a href='../S/2787.html#L2168' title='Defined at 2168 in Objects/dictobject.c.'>PyDict_GetItemString</a>(keywords, <a href='../D/9394.html' title='Multiple defined in 2 places.'>keyword</a>);
<a name='L1488'>        <font color='red'>}</font>
<a name='L1489'>        <b>if</b> (current_arg) <font color='red'>{</font>
<a name='L1490'>            --nkeywords;
<a name='L1491'>            <b>if</b> (i &lt; nargs) <font color='red'>{</font>
<a name='L1492'>                <i><font color='green'>/* arg present in tuple and in dict */</font></i>
<a name='L1493'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1494'>                             "Argument given by name ('%s') "
<a name='L1495'>                             "and position (%d)",
<a name='L1496'>                             <a href='../D/9394.html' title='Multiple defined in 2 places.'>keyword</a>, i+1);
<a name='L1497'>                <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1498'>            <font color='red'>}</font>
<a name='L1499'>        <font color='red'>}</font>
<a name='L1500'>        <b>else</b> <b>if</b> (nkeywords &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1501'>            <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1502'>        <b>else</b> <b>if</b> (i &lt; nargs)
<a name='L1503'>            current_arg = PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, i);
<a name='L1504'>
<a name='L1505'>        <b>if</b> (current_arg) <font color='red'>{</font>
<a name='L1506'>            msg = <a href='../S/3112.html#L527' title='Defined at 527 in Python/getargs.c.'>convertitem</a>(current_arg, &amp;format, p_va, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>,
<a name='L1507'>                levels, msgbuf, <b>sizeof</b>(msgbuf), &amp;freelist);
<a name='L1508'>            <b>if</b> (msg) <font color='red'>{</font>
<a name='L1509'>                <a href='../S/3112.html#L395' title='Defined at 395 in Python/getargs.c.'>seterror</a>(i+1, msg, levels, fname, custom_msg);
<a name='L1510'>                <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1511'>            <font color='red'>}</font>
<a name='L1512'>            <b>continue</b>;
<a name='L1513'>        <font color='red'>}</font>
<a name='L1514'>
<a name='L1515'>        <b>if</b> (i &lt; <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a>) <font color='red'>{</font>
<a name='L1516'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError, "Required argument "
<a name='L1517'>                         "'%s' (pos %d) not found",
<a name='L1518'>                         <a href='../D/9394.html' title='Multiple defined in 2 places.'>keyword</a>, i+1);
<a name='L1519'>            <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1520'>        <font color='red'>}</font>
<a name='L1521'>        <i><font color='green'>/* current code reports success when all required args</font></i>
<a name='L1522'><i><font color='green'>         * fulfilled and no keyword args left, with no further</font></i>
<a name='L1523'><i><font color='green'>         * validation. XXX Maybe skip this in debug build ?</font></i>
<a name='L1524'><i><font color='green'>         */</font></i>
<a name='L1525'>        <b>if</b> (!nkeywords)
<a name='L1526'>            <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(1, freelist);
<a name='L1527'>
<a name='L1528'>        <i><font color='green'>/* We are into optional args, skip thru to any remaining</font></i>
<a name='L1529'><i><font color='green'>         * keyword args */</font></i>
<a name='L1530'>        msg = <a href='../S/3112.html#L1582' title='Defined at 1582 in Python/getargs.c.'>skipitem</a>(&amp;format, p_va, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L1531'>        <b>if</b> (msg) <font color='red'>{</font>
<a name='L1532'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError, "%s: '%s'", msg,
<a name='L1533'>                         format);
<a name='L1534'>            <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1535'>        <font color='red'>}</font>
<a name='L1536'>    <font color='red'>}</font>
<a name='L1537'>
<a name='L1538'>    <b>if</b> (!<a href='../S/3112.html#L1424' title='Defined at 1424 in Python/getargs.c.'>IS_END_OF_FORMAT</a>(*format) &amp;&amp; *format != '|') <font color='red'>{</font>
<a name='L1539'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_RuntimeError,
<a name='L1540'>            "more argument specifiers than keyword list entries "
<a name='L1541'>            "(remaining format:'%s')", format);
<a name='L1542'>        <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1543'>    <font color='red'>}</font>
<a name='L1544'>
<a name='L1545'>    <i><font color='green'>/* make sure there are no extraneous keyword arguments */</font></i>
<a name='L1546'>    <b>if</b> (nkeywords &gt; 0) <font color='red'>{</font>
<a name='L1547'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L1548'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> pos = 0;
<a name='L1549'>        <b>while</b> (<a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(keywords, &amp;pos, &amp;<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, &amp;<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) <font color='red'>{</font>
<a name='L1550'>            <b>int</b> match = 0;
<a name='L1551'>            <b>char</b> *ks;
<a name='L1552'>            <b>if</b> (!PyUnicode_Check(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>)) <font color='red'>{</font>
<a name='L1553'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1554'>                                "keywords must be strings");
<a name='L1555'>                <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1556'>            <font color='red'>}</font>
<a name='L1557'>            <i><font color='green'>/* check that _PyUnicode_AsString() result is not NULL */</font></i>
<a name='L1558'>            ks = <a href='../S/2828.html#L1919' title='Defined at 1919 in Objects/unicodeobject.c.'>_PyUnicode_AsString</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1559'>            <b>if</b> (ks != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1560'>                <b>for</b> (i = 0; i &lt; len; i++) <font color='red'>{</font>
<a name='L1561'>                    <b>if</b> (!strcmp(ks, kwlist[i])) <font color='red'>{</font>
<a name='L1562'>                        match = 1;
<a name='L1563'>                        <b>break</b>;
<a name='L1564'>                    <font color='red'>}</font>
<a name='L1565'>                <font color='red'>}</font>
<a name='L1566'>            <font color='red'>}</font>
<a name='L1567'>            <b>if</b> (!match) <font color='red'>{</font>
<a name='L1568'>                <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1569'>                             "'%U' is an invalid keyword "
<a name='L1570'>                             "argument for this function",
<a name='L1571'>                             <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L1572'>                <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(0, freelist);
<a name='L1573'>            <font color='red'>}</font>
<a name='L1574'>        <font color='red'>}</font>
<a name='L1575'>    <font color='red'>}</font>
<a name='L1576'>
<a name='L1577'>    <b>return</b> <a href='../S/3112.html#L225' title='Defined at 225 in Python/getargs.c.'>cleanreturn</a>(1, freelist);
<a name='L1578'><font color='red'>}</font>
<a name='L1579'>
<a name='L1580'>
<a name='L1581'><b>static</b> <b>char</b> *
<a name='L1582'><a href='../R/10325.html' title='Multiple refered from 2 places.'>skipitem</a>(<b>const</b> <b>char</b> **p_format, va_list *p_va, <b>int</b> flags)
<a name='L1583'><font color='red'>{</font>
<a name='L1584'>    <b>const</b> <b>char</b> *format = *p_format;
<a name='L1585'>    <b>char</b> c = *format++;
<a name='L1586'>
<a name='L1587'>    <b>switch</b> (c) <font color='red'>{</font>
<a name='L1588'>
<a name='L1589'>    <i><font color='green'>/* simple codes</font></i>
<a name='L1590'><i><font color='green'>     * The individual types (second arg of va_arg) are irrelevant */</font></i>
<a name='L1591'>
<a name='L1592'>    <b>case</b> 'b': <i><font color='green'>/* byte -- very short int */</font></i>
<a name='L1593'>    <b>case</b> 'B': <i><font color='green'>/* byte as bitfield */</font></i>
<a name='L1594'>    <b>case</b> 'h': <i><font color='green'>/* short int */</font></i>
<a name='L1595'>    <b>case</b> 'H': <i><font color='green'>/* short int as bitfield */</font></i>
<a name='L1596'>    <b>case</b> 'i': <i><font color='green'>/* int */</font></i>
<a name='L1597'>    <b>case</b> 'I': <i><font color='green'>/* int sized bitfield */</font></i>
<a name='L1598'>    <b>case</b> 'l': <i><font color='green'>/* long int */</font></i>
<a name='L1599'>    <b>case</b> 'k': <i><font color='green'>/* long int sized bitfield */</font></i>
<a name='L1600'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L1601'>    <b>case</b> 'L': <i><font color='green'>/* PY_LONG_LONG */</font></i>
<a name='L1602'>    <b>case</b> 'K': <i><font color='green'>/* PY_LONG_LONG sized bitfield */</font></i>
<a name='L1603'><font color='darkred'>#endif</font>
<a name='L1604'>    <b>case</b> 'f': <i><font color='green'>/* float */</font></i>
<a name='L1605'>    <b>case</b> 'd': <i><font color='green'>/* double */</font></i>
<a name='L1606'>    <b>case</b> 'D': <i><font color='green'>/* complex double */</font></i>
<a name='L1607'>    <b>case</b> 'c': <i><font color='green'>/* char */</font></i>
<a name='L1608'>    <b>case</b> 'C': <i><font color='green'>/* unicode char */</font></i>
<a name='L1609'>        <font color='red'>{</font>
<a name='L1610'>            (<b>void</b>) va_arg(*p_va, <b>void</b> *);
<a name='L1611'>            <b>break</b>;
<a name='L1612'>        <font color='red'>}</font>
<a name='L1613'>
<a name='L1614'>    <b>case</b> 'n': <i><font color='green'>/* Py_ssize_t */</font></i>
<a name='L1615'>        <font color='red'>{</font>
<a name='L1616'>            (<b>void</b>) va_arg(*p_va, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *);
<a name='L1617'>            <b>break</b>;
<a name='L1618'>        <font color='red'>}</font>
<a name='L1619'>
<a name='L1620'>    <i><font color='green'>/* string codes */</font></i>
<a name='L1621'>
<a name='L1622'>    <b>case</b> 'e': <i><font color='green'>/* string with encoding */</font></i>
<a name='L1623'>        <font color='red'>{</font>
<a name='L1624'>            (<b>void</b>) va_arg(*p_va, <b>const</b> <b>char</b> *);
<a name='L1625'>            <b>if</b> (!(*format == 's' || *format == 't'))
<a name='L1626'>                <i><font color='green'>/* after 'e', only 's' and 't' is allowed */</font></i>
<a name='L1627'>                <b>goto</b> err;
<a name='L1628'>            format++;
<a name='L1629'>            <i><font color='green'>/* explicit fallthrough to string cases */</font></i>
<a name='L1630'>        <font color='red'>}</font>
<a name='L1631'>
<a name='L1632'>    <b>case</b> 's': <i><font color='green'>/* string */</font></i>
<a name='L1633'>    <b>case</b> 'z': <i><font color='green'>/* string or None */</font></i>
<a name='L1634'>    <b>case</b> 'y': <i><font color='green'>/* bytes */</font></i>
<a name='L1635'>    <b>case</b> 'u': <i><font color='green'>/* unicode string */</font></i>
<a name='L1636'>    <b>case</b> 'w': <i><font color='green'>/* buffer, read-write */</font></i>
<a name='L1637'>        <font color='red'>{</font>
<a name='L1638'>            (<b>void</b>) va_arg(*p_va, <b>char</b> **);
<a name='L1639'>            <b>if</b> (*format == '#') <font color='red'>{</font>
<a name='L1640'>                <b>if</b> (<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> &amp; <a href='../S/3125.html#L6' title='Defined at 6 in Python/modsupport.c.'>FLAG_SIZE_T</a>)
<a name='L1641'>                    (<b>void</b>) va_arg(*p_va, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *);
<a name='L1642'>                <b>else</b>
<a name='L1643'>                    (<b>void</b>) va_arg(*p_va, <b>int</b> *);
<a name='L1644'>                format++;
<a name='L1645'>            <font color='red'>}</font> <b>else</b> <b>if</b> ((c == 's' || c == 'z' || c == 'y') &amp;&amp; *format == '*') <font color='red'>{</font>
<a name='L1646'>                format++;
<a name='L1647'>            <font color='red'>}</font>
<a name='L1648'>            <b>break</b>;
<a name='L1649'>        <font color='red'>}</font>
<a name='L1650'>
<a name='L1651'>    <i><font color='green'>/* object codes */</font></i>
<a name='L1652'>
<a name='L1653'>    <b>case</b> 'S': <i><font color='green'>/* string object */</font></i>
<a name='L1654'>    <b>case</b> 'Y': <i><font color='green'>/* string object */</font></i>
<a name='L1655'>    <b>case</b> 'U': <i><font color='green'>/* unicode string object */</font></i>
<a name='L1656'>        <font color='red'>{</font>
<a name='L1657'>            (<b>void</b>) va_arg(*p_va, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1658'>            <b>break</b>;
<a name='L1659'>        <font color='red'>}</font>
<a name='L1660'>
<a name='L1661'>    <b>case</b> 'O': <i><font color='green'>/* object */</font></i>
<a name='L1662'>        <font color='red'>{</font>
<a name='L1663'>            <b>if</b> (*format == '!') <font color='red'>{</font>
<a name='L1664'>                format++;
<a name='L1665'>                (<b>void</b>) va_arg(*p_va, <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a>*);
<a name='L1666'>                (<b>void</b>) va_arg(*p_va, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1667'>            <font color='red'>}</font>
<a name='L1668'>            <b>else</b> <b>if</b> (*format == '&amp;') <font color='red'>{</font>
<a name='L1669'>                <b>typedef</b> <b>int</b> (*converter)(PyObject *, <b>void</b> *);
<a name='L1670'>                (<b>void</b>) va_arg(*p_va, <a href='../S/2250.html#L1603' title='Defined at 1603 in Modules/_ctypes/callproc.c.'>converter</a>);
<a name='L1671'>                (<b>void</b>) va_arg(*p_va, <b>void</b> *);
<a name='L1672'>                format++;
<a name='L1673'>            <font color='red'>}</font>
<a name='L1674'>            <b>else</b> <font color='red'>{</font>
<a name='L1675'>                (<b>void</b>) va_arg(*p_va, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1676'>            <font color='red'>}</font>
<a name='L1677'>            <b>break</b>;
<a name='L1678'>        <font color='red'>}</font>
<a name='L1679'>
<a name='L1680'>    <b>case</b> '(':           <i><font color='green'>/* bypass tuple, not handled at all previously */</font></i>
<a name='L1681'>        <font color='red'>{</font>
<a name='L1682'>            <b>char</b> *msg;
<a name='L1683'>            <b>for</b> (;;) <font color='red'>{</font>
<a name='L1684'>                <b>if</b> (*format==')')
<a name='L1685'>                    <b>break</b>;
<a name='L1686'>                <b>if</b> (<a href='../S/3112.html#L1424' title='Defined at 1424 in Python/getargs.c.'>IS_END_OF_FORMAT</a>(*format))
<a name='L1687'>                    <b>return</b> "Unmatched left paren in format "
<a name='L1688'>                           "string";
<a name='L1689'>                msg = <a href='../S/3112.html#L1582' title='Defined at 1582 in Python/getargs.c.'>skipitem</a>(&amp;format, p_va, <a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>);
<a name='L1690'>                <b>if</b> (msg)
<a name='L1691'>                    <b>return</b> msg;
<a name='L1692'>            <font color='red'>}</font>
<a name='L1693'>            format++;
<a name='L1694'>            <b>break</b>;
<a name='L1695'>        <font color='red'>}</font>
<a name='L1696'>
<a name='L1697'>    <b>case</b> ')':
<a name='L1698'>        <b>return</b> "Unmatched right paren in format string";
<a name='L1699'>
<a name='L1700'>    <b>default</b>:
<a name='L1701'>err:
<a name='L1702'>        <b>return</b> "impossible&lt;bad format char&gt;";
<a name='L1703'>
<a name='L1704'>    <font color='red'>}</font>
<a name='L1705'>
<a name='L1706'>    *p_format = format;
<a name='L1707'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1708'><font color='red'>}</font>
<a name='L1709'>
<a name='L1710'>
<a name='L1711'><b>int</b>
<a name='L1712'><a href='../R/2492.html' title='Multiple refered from 109 places.'>PyArg_UnpackTuple</a>(PyObject *args, <b>const</b> <b>char</b> *name, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> min, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> max, ...)
<a name='L1713'><font color='red'>{</font>
<a name='L1714'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, l;
<a name='L1715'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **o;
<a name='L1716'>    va_list vargs;
<a name='L1717'>
<a name='L1718'><font color='darkred'>#ifdef</font> <a href='../D/1566.html' title='Multiple defined in 3 places.'>HAVE_STDARG_PROTOTYPES</a>
<a name='L1719'>    va_start(vargs, <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>);
<a name='L1720'><font color='darkred'>#else</font>
<a name='L1721'>    va_start(vargs);
<a name='L1722'><font color='darkred'>#endif</font>
<a name='L1723'>
<a name='L1724'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> &gt;= 0);
<a name='L1725'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> &lt;= <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>);
<a name='L1726'>    <b>if</b> (!PyTuple_Check(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) <font color='red'>{</font>
<a name='L1727'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L1728'>            "PyArg_UnpackTuple() argument list is not a tuple");
<a name='L1729'>        <b>return</b> 0;
<a name='L1730'>    <font color='red'>}</font>
<a name='L1731'>    l = PyTuple_GET_SIZE(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>);
<a name='L1732'>    <b>if</b> (l &lt; <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a>) <font color='red'>{</font>
<a name='L1733'>        <b>if</b> (name != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1734'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1735'>                PyExc_TypeError,
<a name='L1736'>                "%s expected %s%zd arguments, got %zd",
<a name='L1737'>                name, (<a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> == <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> ? "" : "at least "), <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a>, l);
<a name='L1738'>        <b>else</b>
<a name='L1739'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1740'>                PyExc_TypeError,
<a name='L1741'>                "unpacked tuple should have %s%zd elements,"
<a name='L1742'>                " but has %zd",
<a name='L1743'>                (<a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> == <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> ? "" : "at least "), <a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a>, l);
<a name='L1744'>        va_end(vargs);
<a name='L1745'>        <b>return</b> 0;
<a name='L1746'>    <font color='red'>}</font>
<a name='L1747'>    <b>if</b> (l &gt; <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>) <font color='red'>{</font>
<a name='L1748'>        <b>if</b> (name != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1749'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1750'>                PyExc_TypeError,
<a name='L1751'>                "%s expected %s%zd arguments, got %zd",
<a name='L1752'>                name, (<a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> == <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> ? "" : "at most "), <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>, l);
<a name='L1753'>        <b>else</b>
<a name='L1754'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(
<a name='L1755'>                PyExc_TypeError,
<a name='L1756'>                "unpacked tuple should have %s%zd elements,"
<a name='L1757'>                " but has %zd",
<a name='L1758'>                (<a href='../S/2252.html#L7' title='Defined at 7 in Modules/_ctypes/ctypes.h.'>min</a> == <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> ? "" : "at most "), <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>, l);
<a name='L1759'>        va_end(vargs);
<a name='L1760'>        <b>return</b> 0;
<a name='L1761'>    <font color='red'>}</font>
<a name='L1762'>    <b>for</b> (i = 0; i &lt; l; i++) <font color='red'>{</font>
<a name='L1763'>        o = va_arg(vargs, <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> **);
<a name='L1764'>        *o = PyTuple_GET_ITEM(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, i);
<a name='L1765'>    <font color='red'>}</font>
<a name='L1766'>    va_end(vargs);
<a name='L1767'>    <b>return</b> 1;
<a name='L1768'><font color='red'>}</font>
<a name='L1769'>
<a name='L1770'>
<a name='L1771'><i><font color='green'>/* For type constructors that don't take keyword args</font></i>
<a name='L1772'><i><font color='green'> *</font></i>
<a name='L1773'><i><font color='green'> * Sets a TypeError and returns 0 if the kwds dict is</font></i>
<a name='L1774'><i><font color='green'> * not empty, returns 1 otherwise</font></i>
<a name='L1775'><i><font color='green'> */</font></i>
<a name='L1776'><b>int</b>
<a name='L1777'><a href='../R/5358.html' title='Multiple refered from 31 places.'>_PyArg_NoKeywords</a>(<b>const</b> <b>char</b> *funcname, PyObject *kw)
<a name='L1778'><font color='red'>{</font>
<a name='L1779'>    <b>if</b> (kw == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1780'>        <b>return</b> 1;
<a name='L1781'>    <b>if</b> (!<a href='../D/3104.html' title='Multiple defined in 2 places.'>PyDict_CheckExact</a>(kw)) <font color='red'>{</font>
<a name='L1782'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1783'>        <b>return</b> 0;
<a name='L1784'>    <font color='red'>}</font>
<a name='L1785'>    <b>if</b> (<a href='../S/2787.html#L1620' title='Defined at 1620 in Objects/dictobject.c.'>PyDict_Size</a>(kw) == 0)
<a name='L1786'>        <b>return</b> 1;
<a name='L1787'>
<a name='L1788'>    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError, "%s does not take keyword arguments",
<a name='L1789'>                    funcname);
<a name='L1790'>    <b>return</b> 0;
<a name='L1791'><font color='red'>}</font>
<a name='L1792'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L1793'><font color='red'>}</font>;
<a name='L1794'><font color='darkred'>#endif</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L23'>[^]</a><a href='#L1777'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
