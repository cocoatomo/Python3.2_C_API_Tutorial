<html>
<head>
<title>Objects/longobject.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3391.html'>Objects</a>/longobject.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L37'>[^]</a><a href='#L4876'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L37' title='Defined at 37.'>get_small_int</a>
<li><a href='#L55' title='Defined at 55.'>maybe_small_long</a>
<li><a href='#L107' title='Defined at 107.'>long_normalize</a>
<li><a href='#L126' title='Defined at 126.'>_PyLong_New</a>
<li><a href='#L149' title='Defined at 149.'>_PyLong_Copy</a>
<li><a href='#L176' title='Defined at 176.'>PyLong_FromLong</a>
<li><a href='#L245' title='Defined at 245.'>PyLong_FromUnsignedLong</a>
<li><a href='#L274' title='Defined at 274.'>PyLong_FromDouble</a>
<li><a href='#L329' title='Defined at 329.'>PyLong_AsLongAndOverflow</a>
<li><a href='#L416' title='Defined at 416.'>PyLong_AsLong</a>
<li><a href='#L433' title='Defined at 433.'>PyLong_AsSsize_t</a>
<li><a href='#L488' title='Defined at 488.'>PyLong_AsUnsignedLong</a>
<li><a href='#L532' title='Defined at 532.'>PyLong_AsSize_t</a>
<li><a href='#L575' title='Defined at 575.'>_PyLong_AsUnsignedLongMask</a>
<li><a href='#L605' title='Defined at 605.'>PyLong_AsUnsignedLongMask</a>
<li><a href='#L640' title='Defined at 640.'>_PyLong_Sign</a>
<li><a href='#L651' title='Defined at 651.'>_PyLong_NumBits</a>
<li><a href='#L683' title='Defined at 683.'>_PyLong_FromByteArray</a>
<li><a href='#L794' title='Defined at 794.'>_PyLong_AsByteArray</a>
<li><a href='#L929' title='Defined at 929.'>PyLong_FromVoidPtr</a>
<li><a href='#L947' title='Defined at 947.'>PyLong_AsVoidPtr</a>
<li><a href='#L994' title='Defined at 994.'>PyLong_FromLongLong</a>
<li><a href='#L1038' title='Defined at 1038.'>PyLong_FromUnsignedLongLong</a>
<li><a href='#L1067' title='Defined at 1067.'>PyLong_FromSsize_t</a>
<li><a href='#L1107' title='Defined at 1107.'>PyLong_FromSize_t</a>
<li><a href='#L1137' title='Defined at 1137.'>PyLong_AsLongLong</a>
<li><a href='#L1189' title='Defined at 1189.'>PyLong_AsUnsignedLongLong</a>
<li><a href='#L1221' title='Defined at 1221.'>_PyLong_AsUnsignedLongLongMask</a>
<li><a href='#L1251' title='Defined at 1251.'>PyLong_AsUnsignedLongLongMask</a>
<li><a href='#L1295' title='Defined at 1295.'>PyLong_AsLongLongAndOverflow</a>
<li><a href='#L1400' title='Defined at 1400.'>bits_in_digit</a>
<li><a href='#L1416' title='Defined at 1416.'>v_iadd</a>
<li><a href='#L1442' title='Defined at 1442.'>v_isub</a>
<li><a href='#L1467' title='Defined at 1467.'>v_lshift</a>
<li><a href='#L1485' title='Defined at 1485.'>v_rshift</a>
<li><a href='#L1507' title='Defined at 1507.'>inplace_divrem1</a>
<li><a href='#L1528' title='Defined at 1528.'>divrem1</a>
<li><a href='#L1546' title='Defined at 1546.'>long_to_decimal_string</a>
<li><a href='#L1660' title='Defined at 1660.'>_PyLong_Format</a>
<li><a href='#L1793' title='Defined at 1793.'>long_from_binary_base</a>
<li><a href='#L1853' title='Defined at 1853.'>PyLong_FromString</a>
<li><a href='#L2133' title='Defined at 2133.'>PyLong_FromUnicode</a>
<li><a href='#L2175' title='Defined at 2175.'>long_divrem</a>
<li><a href='#L2229' title='Defined at 2229.'>x_divrem</a>
<li><a href='#L2367' title='Defined at 2367.'>_PyLong_Frexp</a>
<li><a href='#L2481' title='Defined at 2481.'>PyLong_AsDouble</a>
<li><a href='#L2502' title='Defined at 2502.'>long_dealloc</a>
<li><a href='#L2508' title='Defined at 2508.'>long_compare</a>
<li><a href='#L2534' title='Defined at 2534.'>long_richcompare</a>
<li><a href='#L2572' title='Defined at 2572.'>long_hash</a>
<li><a href='#L2632' title='Defined at 2632.'>x_add</a>
<li><a href='#L2666' title='Defined at 2666.'>x_sub</a>
<li><a href='#L2719' title='Defined at 2719.'>long_add</a>
<li><a href='#L2749' title='Defined at 2749.'>long_sub</a>
<li><a href='#L2781' title='Defined at 2781.'>x_mul</a>
<li><a href='#L2872' title='Defined at 2872.'>kmul_split</a>
<li><a href='#L2906' title='Defined at 2906.'>k_mul</a>
<li><a href='#L3127' title='Defined at 3127.'>k_lopsided_mul</a>
<li><a href='#L3181' title='Defined at 3181.'>long_mul</a>
<li><a href='#L3232' title='Defined at 3232.'>l_divmod</a>
<li><a href='#L3276' title='Defined at 3276.'>long_div</a>
<li><a href='#L3292' title='Defined at 3292.'>long_true_divide</a>
<li><a href='#L3550' title='Defined at 3550.'>long_mod</a>
<li><a href='#L3562' title='Defined at 3562.'>long_divmod</a>
<li><a href='#L3586' title='Defined at 3586.'>long_pow</a>
<li><a href='#L3772' title='Defined at 3772.'>long_invert</a>
<li><a href='#L3791' title='Defined at 3791.'>long_neg</a>
<li><a href='#L3803' title='Defined at 3803.'>long_abs</a>
<li><a href='#L3812' title='Defined at 3812.'>long_bool</a>
<li><a href='#L3818' title='Defined at 3818.'>long_rshift</a>
<li><a href='#L3874' title='Defined at 3874.'>long_lshift</a>
<li><a href='#L3927' title='Defined at 3927.'>v_complement</a>
<li><a href='#L3942' title='Defined at 3942.'>long_bitwise</a>
<li><a href='#L4065' title='Defined at 4065.'>long_and</a>
<li><a href='#L4074' title='Defined at 4074.'>long_xor</a>
<li><a href='#L4083' title='Defined at 4083.'>long_or</a>
<li><a href='#L4092' title='Defined at 4092.'>long_long</a>
<li><a href='#L4102' title='Defined at 4102.'>long_float</a>
<li><a href='#L4115' title='Defined at 4115.'>long_new</a>
<li><a href='#L4177' title='Defined at 4177.'>long_subtype_new</a>
<li><a href='#L4204' title='Defined at 4204.'>long_getnewargs</a>
<li><a href='#L4210' title='Defined at 4210.'>long_get0</a>
<li><a href='#L4215' title='Defined at 4215.'>long_get1</a>
<li><a href='#L4220' title='Defined at 4220.'>long__format__</a>
<li><a href='#L4237' title='Defined at 4237.'>_PyLong_DivmodNear</a>
<li><a href='#L4329' title='Defined at 4329.'>long_round</a>
<li><a href='#L4397' title='Defined at 4397.'>long_sizeof</a>
<li><a href='#L4406' title='Defined at 4406.'>long_bit_length</a>
<li><a href='#L4471' title='Defined at 4471.'>long_is_finite</a>
<li><a href='#L4479' title='Defined at 4479.'>long_to_bytes</a>
<li><a href='#L4561' title='Defined at 4561.'>long_from_bytes</a>
<li><a href='#L4818' title='Defined at 4818.'>PyLong_GetInfo</a>
<li><a href='#L4837' title='Defined at 4837.'>_PyLong_Init</a>
<li><a href='#L4876' title='Defined at 4876.'>PyLong_Fini</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* Long (arbitrary precision) integer object implementation */</font></i>
<a name='L2'>
<a name='L3'><i><font color='green'>/* XXX The functional organization of this file is terrible */</font></i>
<a name='L4'>
<a name='L5'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L6'><font color='darkred'>#include</font> "<a href='535.html'>longintrepr.h</a>"
<a name='L7'>
<a name='L8'><font color='darkred'>#include</font> &lt;float.h&gt;
<a name='L9'><font color='darkred'>#include</font> &lt;<a href='2809.html'>ctype.h</a>&gt;
<a name='L10'><font color='darkred'>#include</font> &lt;stddef.h&gt;
<a name='L11'>
<a name='L12'><font color='darkred'>#ifndef</font> <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a>
<a name='L13'><font color='darkred'>#define</font> <a href='../R/2123.html' title='Multiple refered from 9 places.'>NSMALLPOSINTS</a>           257
<a name='L14'><font color='darkred'>#endif</font>
<a name='L15'><font color='darkred'>#ifndef</font> <a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a>
<a name='L16'><font color='darkred'>#define</font> <a href='../R/2122.html' title='Multiple refered from 10 places.'>NSMALLNEGINTS</a>           5
<a name='L17'><font color='darkred'>#endif</font>
<a name='L18'>
<a name='L19'><i><font color='green'>/* convert a PyLong of size 1, 0 or -1 to an sdigit */</font></i>
<a name='L20'><font color='darkred'>#define</font> <a href='../R/1913.html' title='Multiple refered from 8 places.'>MEDIUM_VALUE</a>(x) (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x) &lt; 0 ? -(<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)(x)-&gt;ob_digit[0] :   \
<a name='L21'>             (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x) == 0 ? (<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)0 :                             \
<a name='L22'>              (<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)(x)-&gt;ob_digit[0]))
<a name='L23'><font color='darkred'>#define</font> <a href='../R/4.html' title='Multiple refered from 38 places.'>ABS</a>(x) ((x) &lt; 0 ? -(x) : (x))
<a name='L24'>
<a name='L25'><font color='darkred'>#if</font> <a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a> + <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a> &gt; 0
<a name='L26'><i><font color='green'>/* Small integers are preallocated in this array so that they</font></i>
<a name='L27'><i><font color='green'>   can be shared.</font></i>
<a name='L28'><i><font color='green'>   The integers that are preallocated are those in the range</font></i>
<a name='L29'><i><font color='green'>   -NSMALLNEGINTS (inclusive) to NSMALLPOSINTS (not inclusive).</font></i>
<a name='L30'><i><font color='green'>*/</font></i>
<a name='L31'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> small_ints[<a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a> + <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a>];
<a name='L32'><font color='darkred'>#ifdef</font> COUNT_ALLOCS
<a name='L33'><b>int</b> quick_int_allocs, quick_neg_int_allocs;
<a name='L34'><font color='darkred'>#endif</font>
<a name='L35'>
<a name='L36'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L37'><a href='../R/8094.html' title='Multiple refered from 2 places.'>get_small_int</a>(sdigit ival)
<a name='L38'><font color='red'>{</font>
<a name='L39'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)(small_ints + ival + <a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a>);
<a name='L40'>    Py_INCREF(v);
<a name='L41'><font color='darkred'>#ifdef</font> COUNT_ALLOCS
<a name='L42'>    <b>if</b> (ival &gt;= 0)
<a name='L43'>        quick_int_allocs++;
<a name='L44'>    <b>else</b>
<a name='L45'>        quick_neg_int_allocs++;
<a name='L46'><font color='darkred'>#endif</font>
<a name='L47'>    <b>return</b> v;
<a name='L48'><font color='red'>}</font>
<a name='L49'><font color='darkred'>#define</font> <a href='../R/503.html' title='Multiple refered from 4 places.'>CHECK_SMALL_INT</a>(ival) \
<a name='L50'>    <b>do</b> <b>if</b> (-<a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a> &lt;= ival &amp;&amp; ival &lt; <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a>) <font color='red'>{</font> \
<a name='L51'>        <b>return</b> <a href='../S/2799.html#L37' title='Defined at 37 in Objects/longobject.c.'>get_small_int</a>((<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)ival); \
<a name='L52'>    <font color='red'>}</font> <b>while</b>(0)
<a name='L53'>
<a name='L54'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L55'><a href='../R/8929.html' title='Multiple refered from 6 places.'>maybe_small_long</a>(PyLongObject *v)
<a name='L56'><font color='red'>{</font>
<a name='L57'>    <b>if</b> (v &amp;&amp; <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v)) &lt;= 1) <font color='red'>{</font>
<a name='L58'>        <a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a> ival = <a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(v);
<a name='L59'>        <b>if</b> (-<a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a> &lt;= ival &amp;&amp; ival &lt; <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a>) <font color='red'>{</font>
<a name='L60'>            Py_DECREF(v);
<a name='L61'>            <b>return</b> (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L37' title='Defined at 37 in Objects/longobject.c.'>get_small_int</a>(ival);
<a name='L62'>        <font color='red'>}</font>
<a name='L63'>    <font color='red'>}</font>
<a name='L64'>    <b>return</b> v;
<a name='L65'><font color='red'>}</font>
<a name='L66'><font color='darkred'>#else</font>
<a name='L67'><font color='darkred'>#define</font> <a href='../R/503.html' title='Multiple refered from 4 places.'>CHECK_SMALL_INT</a>(ival)
<a name='L68'><font color='darkred'>#define</font> <a href='../R/8929.html' title='Multiple refered from 6 places.'>maybe_small_long</a>(val) (val)
<a name='L69'><font color='darkred'>#endif</font>
<a name='L70'>
<a name='L71'><i><font color='green'>/* If a freshly-allocated long is already shared, it must</font></i>
<a name='L72'><i><font color='green'>   be a small integer, so negating it must go to PyLong_FromLong */</font></i>
<a name='L73'><font color='darkred'>#define</font> <a href='../R/2066.html' title='Multiple refered from 6 places.'>NEGATE</a>(x) \
<a name='L74'>    <b>do</b> <b>if</b> (<a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(x) == 1) <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x) = -<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x);  \
<a name='L75'>       <b>else</b> <font color='red'>{</font> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* tmp=<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(-<a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(x));  \
<a name='L76'>           Py_DECREF(x); (x) = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)tmp; <font color='red'>}</font>               \
<a name='L77'>    <b>while</b>(0)
<a name='L78'><i><font color='green'>/* For long multiplication, use the O(N**2) school algorithm unless</font></i>
<a name='L79'><i><font color='green'> * both operands contain more than KARATSUBA_CUTOFF digits (this</font></i>
<a name='L80'><i><font color='green'> * being an internal Python long digit, in base BASE).</font></i>
<a name='L81'><i><font color='green'> */</font></i>
<a name='L82'><font color='darkred'>#define</font> <a href='../R/1672.html' title='Multiple refered from 3 places.'>KARATSUBA_CUTOFF</a> 70
<a name='L83'><font color='darkred'>#define</font> <a href='../S/2799.html#L2941' title='Refered from 2941 in Objects/longobject.c.'>KARATSUBA_SQUARE_CUTOFF</a> (2 * <a href='../S/2799.html#L82' title='Defined at 82 in Objects/longobject.c.'>KARATSUBA_CUTOFF</a>)
<a name='L84'>
<a name='L85'><i><font color='green'>/* For exponentiation, use the binary left-to-right algorithm</font></i>
<a name='L86'><i><font color='green'> * unless the exponent contains more than FIVEARY_CUTOFF digits.</font></i>
<a name='L87'><i><font color='green'> * In that case, do 5 bits at a time.  The potential drawback is that</font></i>
<a name='L88'><i><font color='green'> * a table of 2**5 intermediate results is computed.</font></i>
<a name='L89'><i><font color='green'> */</font></i>
<a name='L90'><font color='darkred'>#define</font> <a href='../R/1119.html' title='Multiple refered from 2 places.'>FIVEARY_CUTOFF</a> 8
<a name='L91'>
<a name='L92'><font color='darkred'>#undef</font> <a href='../R/1923.html' title='Multiple refered from 20 places.'>MIN</a>
<a name='L93'><font color='darkred'>#undef</font> <a href='../R/1834.html' title='Multiple refered from 13 places.'>MAX</a>
<a name='L94'><font color='darkred'>#define</font> <a href='../R/1834.html' title='Multiple refered from 13 places.'>MAX</a>(x, y) ((x) &lt; (y) ? (y) : (x))
<a name='L95'><font color='darkred'>#define</font> <a href='../R/1923.html' title='Multiple refered from 20 places.'>MIN</a>(x, y) ((x) &gt; (y) ? (y) : (x))
<a name='L96'>
<a name='L97'><font color='darkred'>#define</font> <a href='../R/4139.html' title='Multiple refered from 4 places.'>SIGCHECK</a>(PyTryBlock)                    \
<a name='L98'>    <b>do</b> <font color='red'>{</font>                                        \
<a name='L99'>        <b>if</b> (<a href='../D/3143.html' title='Multiple defined in 2 places.'>PyErr_CheckSignals</a>()) <a href='../S/526.html#L15' title='Defined at 15 in Include/frameobject.h.'>PyTryBlock</a>    \
<a name='L100'>    <font color='red'>}</font> <b>while</b>(0)
<a name='L101'>
<a name='L102'><i><font color='green'>/* Normalize (remove leading zeros from) a long int object.</font></i>
<a name='L103'><i><font color='green'>   Doesn't attempt to free the storage--in most cases, due to the nature</font></i>
<a name='L104'><i><font color='green'>   of the algorithms used, this could save at most be one word anyway. */</font></i>
<a name='L105'>
<a name='L106'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L107'><a href='../R/8785.html' title='Multiple refered from 18 places.'>long_normalize</a>(<b>register</b> PyLongObject *v)
<a name='L108'><font color='red'>{</font>
<a name='L109'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> j = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v));
<a name='L110'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = j;
<a name='L111'>
<a name='L112'>    <b>while</b> (i &gt; 0 &amp;&amp; v-&gt;ob_digit[i-1] == 0)
<a name='L113'>        --i;
<a name='L114'>    <b>if</b> (i != j)
<a name='L115'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) &lt; 0) ? -(i) : i;
<a name='L116'>    <b>return</b> v;
<a name='L117'><font color='red'>}</font>
<a name='L118'>
<a name='L119'><i><font color='green'>/* Allocate a new long int object with size digits.</font></i>
<a name='L120'><i><font color='green'>   Return NULL and set exception if we run out of memory. */</font></i>
<a name='L121'>
<a name='L122'><font color='darkred'>#define</font> <a href='../S/2799.html#L134' title='Refered from 134 in Objects/longobject.c.'>MAX_LONG_DIGITS</a> \
<a name='L123'>    ((<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>, ob_digit))/<b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>))
<a name='L124'>
<a name='L125'><a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L126'><a href='../R/5446.html' title='Multiple refered from 36 places.'>_PyLong_New</a>(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size)
<a name='L127'><font color='red'>{</font>
<a name='L128'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L129'>    <i><font color='green'>/* Number of bytes needed is: offsetof(PyLongObject, ob_digit) +</font></i>
<a name='L130'><i><font color='green'>       sizeof(digit)*size.  Previous incarnations of this code used</font></i>
<a name='L131'><i><font color='green'>       sizeof(PyVarObject) instead of the offsetof, but this risks being</font></i>
<a name='L132'><i><font color='green'>       incorrect in the presence of padding between the PyVarObject header</font></i>
<a name='L133'><i><font color='green'>       and the digits. */</font></i>
<a name='L134'>    <b>if</b> (size &gt; (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)<a href='../S/2799.html#L122' title='Defined at 122 in Objects/longobject.c.'>MAX_LONG_DIGITS</a>) <font color='red'>{</font>
<a name='L135'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L136'>                        "too many digits in integer");
<a name='L137'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L138'>    <font color='red'>}</font>
<a name='L139'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = PyObject_MALLOC(<a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>, ob_digit) +
<a name='L140'>                             size*<b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L141'>    <b>if</b> (!<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) <font color='red'>{</font>
<a name='L142'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L143'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L144'>    <font color='red'>}</font>
<a name='L145'>    <b>return</b> (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../S/545.html#L162' title='Defined at 162 in Include/objimpl.h.'>PyObject_INIT_VAR</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, &amp;PyLong_Type, size);
<a name='L146'><font color='red'>}</font>
<a name='L147'>
<a name='L148'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L149'><a href='../R/5438.html' title='Multiple refered from 5 places.'>_PyLong_Copy</a>(PyLongObject *src)
<a name='L150'><font color='red'>{</font>
<a name='L151'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L152'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L153'>
<a name='L154'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(src != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L155'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(src);
<a name='L156'>    <b>if</b> (i &lt; 0)
<a name='L157'>        i = -(i);
<a name='L158'>    <b>if</b> (i &lt; 2) <font color='red'>{</font>
<a name='L159'>        <a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a> ival = src-&gt;ob_digit[0];
<a name='L160'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(src) &lt; 0)
<a name='L161'>            ival = -ival;
<a name='L162'>        <a href='../D/537.html' title='Multiple defined in 2 places.'>CHECK_SMALL_INT</a>(ival);
<a name='L163'>    <font color='red'>}</font>
<a name='L164'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(i);
<a name='L165'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L166'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>) = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(src);
<a name='L167'>        <b>while</b> (--i &gt;= 0)
<a name='L168'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>-&gt;ob_digit[i] = src-&gt;ob_digit[i];
<a name='L169'>    <font color='red'>}</font>
<a name='L170'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L171'><font color='red'>}</font>
<a name='L172'>
<a name='L173'><i><font color='green'>/* Create a new long int object from a C long int */</font></i>
<a name='L174'>
<a name='L175'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L176'><a href='../R/3126.html' title='Multiple refered from 579 places.'>PyLong_FromLong</a>(<b>long</b> ival)
<a name='L177'><font color='red'>{</font>
<a name='L178'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L179'>    <b>unsigned</b> <b>long</b> abs_ival;
<a name='L180'>    <b>unsigned</b> <b>long</b> t;  <i><font color='green'>/* unsigned so &gt;&gt; doesn't propagate sign bit */</font></i>
<a name='L181'>    <b>int</b> ndigits = 0;
<a name='L182'>    <b>int</b> sign = 1;
<a name='L183'>
<a name='L184'>    <a href='../D/537.html' title='Multiple defined in 2 places.'>CHECK_SMALL_INT</a>(ival);
<a name='L185'>
<a name='L186'>    <b>if</b> (ival &lt; 0) <font color='red'>{</font>
<a name='L187'>        <i><font color='green'>/* negate: can't write this as abs_ival = -ival since that</font></i>
<a name='L188'><i><font color='green'>           invokes undefined behaviour when ival is LONG_MIN */</font></i>
<a name='L189'>        abs_ival = 0U-(<b>unsigned</b> <b>long</b>)ival;
<a name='L190'>        sign = -1;
<a name='L191'>    <font color='red'>}</font>
<a name='L192'>    <b>else</b> <font color='red'>{</font>
<a name='L193'>        abs_ival = (<b>unsigned</b> <b>long</b>)ival;
<a name='L194'>    <font color='red'>}</font>
<a name='L195'>
<a name='L196'>    <i><font color='green'>/* Fast path for single-digit ints */</font></i>
<a name='L197'>    <b>if</b> (!(abs_ival &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>)) <font color='red'>{</font>
<a name='L198'>        v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(1);
<a name='L199'>        <b>if</b> (v) <font color='red'>{</font>
<a name='L200'>            <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = sign;
<a name='L201'>            v-&gt;ob_digit[0] = <a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(
<a name='L202'>                abs_ival, <b>unsigned</b> <b>long</b>, <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>);
<a name='L203'>        <font color='red'>}</font>
<a name='L204'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)v;
<a name='L205'>    <font color='red'>}</font>
<a name='L206'>
<a name='L207'><font color='darkred'>#if</font> <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>==15
<a name='L208'>    <i><font color='green'>/* 2 digits */</font></i>
<a name='L209'>    <b>if</b> (!(abs_ival &gt;&gt; 2*<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>)) <font color='red'>{</font>
<a name='L210'>        v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(2);
<a name='L211'>        <b>if</b> (v) <font color='red'>{</font>
<a name='L212'>            <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = 2*sign;
<a name='L213'>            v-&gt;ob_digit[0] = <a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(
<a name='L214'>                abs_ival &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>, <b>unsigned</b> <b>long</b>, <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>);
<a name='L215'>            v-&gt;ob_digit[1] = <a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(
<a name='L216'>                  abs_ival &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>, <b>unsigned</b> <b>long</b>, <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>);
<a name='L217'>        <font color='red'>}</font>
<a name='L218'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)v;
<a name='L219'>    <font color='red'>}</font>
<a name='L220'><font color='darkred'>#endif</font>
<a name='L221'>
<a name='L222'>    <i><font color='green'>/* Larger numbers: loop to determine number of digits */</font></i>
<a name='L223'>    t = abs_ival;
<a name='L224'>    <b>while</b> (t) <font color='red'>{</font>
<a name='L225'>        ++ndigits;
<a name='L226'>        t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L227'>    <font color='red'>}</font>
<a name='L228'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(ndigits);
<a name='L229'>    <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L230'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *p = v-&gt;ob_digit;
<a name='L231'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = ndigits*sign;
<a name='L232'>        t = abs_ival;
<a name='L233'>        <b>while</b> (t) <font color='red'>{</font>
<a name='L234'>            *p++ = <a href='../D/4230.html' title='Multiple defined in 2 places.'>Py_SAFE_DOWNCAST</a>(
<a name='L235'>                t &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>, <b>unsigned</b> <b>long</b>, <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>);
<a name='L236'>            t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L237'>        <font color='red'>}</font>
<a name='L238'>    <font color='red'>}</font>
<a name='L239'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L240'><font color='red'>}</font>
<a name='L241'>
<a name='L242'><i><font color='green'>/* Create a new long int object from a C unsigned long int */</font></i>
<a name='L243'>
<a name='L244'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L245'><a href='../R/3133.html' title='Multiple refered from 41 places.'>PyLong_FromUnsignedLong</a>(<b>unsigned</b> <b>long</b> ival)
<a name='L246'><font color='red'>{</font>
<a name='L247'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L248'>    <b>unsigned</b> <b>long</b> t;
<a name='L249'>    <b>int</b> ndigits = 0;
<a name='L250'>
<a name='L251'>    <b>if</b> (ival &lt; <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>)
<a name='L252'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(ival);
<a name='L253'>    <i><font color='green'>/* Count the number of Python digits. */</font></i>
<a name='L254'>    t = (<b>unsigned</b> <b>long</b>)ival;
<a name='L255'>    <b>while</b> (t) <font color='red'>{</font>
<a name='L256'>        ++ndigits;
<a name='L257'>        t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L258'>    <font color='red'>}</font>
<a name='L259'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(ndigits);
<a name='L260'>    <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L261'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *p = v-&gt;ob_digit;
<a name='L262'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = ndigits;
<a name='L263'>        <b>while</b> (ival) <font color='red'>{</font>
<a name='L264'>            *p++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(ival &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L265'>            ival &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L266'>        <font color='red'>}</font>
<a name='L267'>    <font color='red'>}</font>
<a name='L268'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L269'><font color='red'>}</font>
<a name='L270'>
<a name='L271'><i><font color='green'>/* Create a new long int object from a C double */</font></i>
<a name='L272'>
<a name='L273'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L274'><a href='../R/3125.html' title='Multiple refered from 11 places.'>PyLong_FromDouble</a>(<b>double</b> dval)
<a name='L275'><font color='red'>{</font>
<a name='L276'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L277'>    <b>double</b> frac;
<a name='L278'>    <b>int</b> i, ndig, expo, neg;
<a name='L279'>    neg = 0;
<a name='L280'>    <b>if</b> (<a href='../D/4165.html' title='Multiple defined in 3 places.'>Py_IS_INFINITY</a>(<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>)) <font color='red'>{</font>
<a name='L281'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L282'>                        "cannot convert float infinity to integer");
<a name='L283'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L284'>    <font color='red'>}</font>
<a name='L285'>    <b>if</b> (<a href='../S/2906.html#L212' title='Defined at 212 in PC/pyconfig.h.'>Py_IS_NAN</a>(<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>)) <font color='red'>{</font>
<a name='L286'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L287'>                        "cannot convert float NaN to integer");
<a name='L288'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L289'>    <font color='red'>}</font>
<a name='L290'>    <b>if</b> (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a> &lt; 0.0) <font color='red'>{</font>
<a name='L291'>        neg = 1;
<a name='L292'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a> = -<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>;
<a name='L293'>    <font color='red'>}</font>
<a name='L294'>    frac = frexp(<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>, &amp;expo); <i><font color='green'>/* dval = frac*2**expo; 0.0 &lt;= frac &lt; 1.0 */</font></i>
<a name='L295'>    <b>if</b> (expo &lt;= 0)
<a name='L296'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0L);
<a name='L297'>    ndig = (expo-1) / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + 1; <i><font color='green'>/* Number of 'digits' in result */</font></i>
<a name='L298'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(ndig);
<a name='L299'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L300'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L301'>    frac = ldexp(frac, (expo-1) % <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + 1);
<a name='L302'>    <b>for</b> (i = ndig; --i &gt;= 0; ) <font color='red'>{</font>
<a name='L303'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> bits = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)frac;
<a name='L304'>        v-&gt;ob_digit[i] = bits;
<a name='L305'>        frac = frac - (<b>double</b>)bits;
<a name='L306'>        frac = ldexp(frac, <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L307'>    <font color='red'>}</font>
<a name='L308'>    <b>if</b> (neg)
<a name='L309'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v));
<a name='L310'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L311'><font color='red'>}</font>
<a name='L312'>
<a name='L313'><i><font color='green'>/* Checking for overflow in PyLong_AsLong is a PITA since C doesn't define</font></i>
<a name='L314'><i><font color='green'> * anything about what happens when a signed integer operation overflows,</font></i>
<a name='L315'><i><font color='green'> * and some compilers think they're doing you a favor by being "clever"</font></i>
<a name='L316'><i><font color='green'> * then.  The bit pattern for the largest postive signed long is</font></i>
<a name='L317'><i><font color='green'> * (unsigned long)LONG_MAX, and for the smallest negative signed long</font></i>
<a name='L318'><i><font color='green'> * it is abs(LONG_MIN), which we could write -(unsigned long)LONG_MIN.</font></i>
<a name='L319'><i><font color='green'> * However, some other compilers warn about applying unary minus to an</font></i>
<a name='L320'><i><font color='green'> * unsigned operand.  Hence the weird "0-".</font></i>
<a name='L321'><i><font color='green'> */</font></i>
<a name='L322'><font color='darkred'>#define</font> <a href='../R/2349.html' title='Multiple refered from 2 places.'>PY_ABS_LONG_MIN</a>         (0-(<b>unsigned</b> <b>long</b>)<a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a>)
<a name='L323'><font color='darkred'>#define</font> <a href='../S/2799.html#L473' title='Refered from 473 in Objects/longobject.c.'>PY_ABS_SSIZE_T_MIN</a>      (0-(<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)<a href='../D/2626.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MIN</a>)
<a name='L324'>
<a name='L325'><i><font color='green'>/* Get a C long int from a long int object.</font></i>
<a name='L326'><i><font color='green'>   Returns -1 and sets an error condition if overflow occurs. */</font></i>
<a name='L327'>
<a name='L328'><b>long</b>
<a name='L329'><a href='../R/3111.html' title='Multiple refered from 20 places.'>PyLong_AsLongAndOverflow</a>(PyObject *vv, <b>int</b> *overflow)
<a name='L330'><font color='red'>{</font>
<a name='L331'>    <i><font color='green'>/* This version by Tim Peters */</font></i>
<a name='L332'>    <b>register</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L333'>    <b>unsigned</b> <b>long</b> x, prev;
<a name='L334'>    <b>long</b> res;
<a name='L335'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L336'>    <b>int</b> sign;
<a name='L337'>    <b>int</b> do_decref = 0; <i><font color='green'>/* if nb_int was called */</font></i>
<a name='L338'>
<a name='L339'>    *<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a> = 0;
<a name='L340'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L341'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L342'>        <b>return</b> -1;
<a name='L343'>    <font color='red'>}</font>
<a name='L344'>
<a name='L345'>    <b>if</b> (!PyLong_Check(vv)) <font color='red'>{</font>
<a name='L346'>        <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *nb;
<a name='L347'>        nb = vv-&gt;ob_type-&gt;tp_as_number;
<a name='L348'>        <b>if</b> (nb == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || nb-&gt;nb_int == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L349'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L350'>                            "an integer is required");
<a name='L351'>            <b>return</b> -1;
<a name='L352'>        <font color='red'>}</font>
<a name='L353'>        vv = (*nb-&gt;nb_int) (vv);
<a name='L354'>        <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L355'>            <b>return</b> -1;
<a name='L356'>        do_decref = 1;
<a name='L357'>        <b>if</b> (!PyLong_Check(vv)) <font color='red'>{</font>
<a name='L358'>            Py_DECREF(vv);
<a name='L359'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L360'>                            "nb_int should return int object");
<a name='L361'>            <b>return</b> -1;
<a name='L362'>        <font color='red'>}</font>
<a name='L363'>    <font color='red'>}</font>
<a name='L364'>
<a name='L365'>    res = -1;
<a name='L366'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L367'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L368'>
<a name='L369'>    <b>switch</b> (i) <font color='red'>{</font>
<a name='L370'>    <b>case</b> -1:
<a name='L371'>        res = -(<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)v-&gt;ob_digit[0];
<a name='L372'>        <b>break</b>;
<a name='L373'>    <b>case</b> 0:
<a name='L374'>        res = 0;
<a name='L375'>        <b>break</b>;
<a name='L376'>    <b>case</b> 1:
<a name='L377'>        res = v-&gt;ob_digit[0];
<a name='L378'>        <b>break</b>;
<a name='L379'>    <b>default</b>:
<a name='L380'>        sign = 1;
<a name='L381'>        x = 0;
<a name='L382'>        <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L383'>            sign = -1;
<a name='L384'>            i = -(i);
<a name='L385'>        <font color='red'>}</font>
<a name='L386'>        <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L387'>            prev = x;
<a name='L388'>            x = (x &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) | v-&gt;ob_digit[i];
<a name='L389'>            <b>if</b> ((x &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) != prev) <font color='red'>{</font>
<a name='L390'>                *<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a> = sign;
<a name='L391'>                <b>goto</b> exit;
<a name='L392'>            <font color='red'>}</font>
<a name='L393'>        <font color='red'>}</font>
<a name='L394'>        <i><font color='green'>/* Haven't lost any bits, but casting to long requires extra</font></i>
<a name='L395'><i><font color='green'>         * care (see comment above).</font></i>
<a name='L396'><i><font color='green'>         */</font></i>
<a name='L397'>        <b>if</b> (x &lt;= (<b>unsigned</b> <b>long</b>)<a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>) <font color='red'>{</font>
<a name='L398'>            res = (<b>long</b>)x * sign;
<a name='L399'>        <font color='red'>}</font>
<a name='L400'>        <b>else</b> <b>if</b> (sign &lt; 0 &amp;&amp; x == <a href='../D/2585.html' title='Multiple defined in 2 places.'>PY_ABS_LONG_MIN</a>) <font color='red'>{</font>
<a name='L401'>            res = <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a>;
<a name='L402'>        <font color='red'>}</font>
<a name='L403'>        <b>else</b> <font color='red'>{</font>
<a name='L404'>            *<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a> = sign;
<a name='L405'>            <i><font color='green'>/* res is already set to -1 */</font></i>
<a name='L406'>        <font color='red'>}</font>
<a name='L407'>    <font color='red'>}</font>
<a name='L408'>  exit:
<a name='L409'>    <b>if</b> (do_decref) <font color='red'>{</font>
<a name='L410'>        Py_DECREF(vv);
<a name='L411'>    <font color='red'>}</font>
<a name='L412'>    <b>return</b> res;
<a name='L413'><font color='red'>}</font>
<a name='L414'>
<a name='L415'><b>long</b>
<a name='L416'><a href='../R/3110.html' title='Multiple refered from 117 places.'>PyLong_AsLong</a>(PyObject *obj)
<a name='L417'><font color='red'>{</font>
<a name='L418'>    <b>int</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L419'>    <b>long</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2799.html#L329' title='Defined at 329 in Objects/longobject.c.'>PyLong_AsLongAndOverflow</a>(obj, &amp;<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>);
<a name='L420'>    <b>if</b> (<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>) <font color='red'>{</font>
<a name='L421'>        <i><font color='green'>/* XXX: could be cute and give a different</font></i>
<a name='L422'><i><font color='green'>           message for overflow == -1 */</font></i>
<a name='L423'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L424'>                        "Python int too large to convert to C long");
<a name='L425'>    <font color='red'>}</font>
<a name='L426'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L427'><font color='red'>}</font>
<a name='L428'>
<a name='L429'><i><font color='green'>/* Get a Py_ssize_t from a long int object.</font></i>
<a name='L430'><i><font color='green'>   Returns -1 and sets an error condition if overflow occurs. */</font></i>
<a name='L431'>
<a name='L432'><a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>
<a name='L433'><a href='../R/3116.html' title='Multiple refered from 39 places.'>PyLong_AsSsize_t</a>(PyObject *vv) <font color='red'>{</font>
<a name='L434'>    <b>register</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L435'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> x, prev;
<a name='L436'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L437'>    <b>int</b> sign;
<a name='L438'>
<a name='L439'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L440'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L441'>        <b>return</b> -1;
<a name='L442'>    <font color='red'>}</font>
<a name='L443'>    <b>if</b> (!PyLong_Check(vv)) <font color='red'>{</font>
<a name='L444'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "an integer is required");
<a name='L445'>        <b>return</b> -1;
<a name='L446'>    <font color='red'>}</font>
<a name='L447'>
<a name='L448'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L449'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L450'>    <b>switch</b> (i) <font color='red'>{</font>
<a name='L451'>    <b>case</b> -1: <b>return</b> -(<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)v-&gt;ob_digit[0];
<a name='L452'>    <b>case</b> 0: <b>return</b> 0;
<a name='L453'>    <b>case</b> 1: <b>return</b> v-&gt;ob_digit[0];
<a name='L454'>    <font color='red'>}</font>
<a name='L455'>    sign = 1;
<a name='L456'>    x = 0;
<a name='L457'>    <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L458'>        sign = -1;
<a name='L459'>        i = -(i);
<a name='L460'>    <font color='red'>}</font>
<a name='L461'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L462'>        prev = x;
<a name='L463'>        x = (x &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) | v-&gt;ob_digit[i];
<a name='L464'>        <b>if</b> ((x &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) != prev)
<a name='L465'>            <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L466'>    <font color='red'>}</font>
<a name='L467'>    <i><font color='green'>/* Haven't lost any bits, but casting to a signed type requires</font></i>
<a name='L468'><i><font color='green'>     * extra care (see comment above).</font></i>
<a name='L469'><i><font color='green'>     */</font></i>
<a name='L470'>    <b>if</b> (x &lt;= (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>) <font color='red'>{</font>
<a name='L471'>        <b>return</b> (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)x * sign;
<a name='L472'>    <font color='red'>}</font>
<a name='L473'>    <b>else</b> <b>if</b> (sign &lt; 0 &amp;&amp; x == <a href='../S/2799.html#L323' title='Defined at 323 in Objects/longobject.c.'>PY_ABS_SSIZE_T_MIN</a>) <font color='red'>{</font>
<a name='L474'>        <b>return</b> <a href='../D/2626.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MIN</a>;
<a name='L475'>    <font color='red'>}</font>
<a name='L476'>    <i><font color='green'>/* else overflow */</font></i>
<a name='L477'>
<a name='L478'>  <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>:
<a name='L479'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L480'>                    "Python int too large to convert to C ssize_t");
<a name='L481'>    <b>return</b> -1;
<a name='L482'><font color='red'>}</font>
<a name='L483'>
<a name='L484'><i><font color='green'>/* Get a C unsigned long int from a long int object.</font></i>
<a name='L485'><i><font color='green'>   Returns -1 and sets an error condition if overflow occurs. */</font></i>
<a name='L486'>
<a name='L487'><b>unsigned</b> <b>long</b>
<a name='L488'><a href='../R/3118.html' title='Multiple refered from 16 places.'>PyLong_AsUnsignedLong</a>(PyObject *vv)
<a name='L489'><font color='red'>{</font>
<a name='L490'>    <b>register</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L491'>    <b>unsigned</b> <b>long</b> x, prev;
<a name='L492'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L493'>
<a name='L494'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L495'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L496'>        <b>return</b> (<b>unsigned</b> <b>long</b>)-1;
<a name='L497'>    <font color='red'>}</font>
<a name='L498'>    <b>if</b> (!PyLong_Check(vv)) <font color='red'>{</font>
<a name='L499'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "an integer is required");
<a name='L500'>        <b>return</b> (<b>unsigned</b> <b>long</b>)-1;
<a name='L501'>    <font color='red'>}</font>
<a name='L502'>
<a name='L503'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L504'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L505'>    x = 0;
<a name='L506'>    <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L507'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L508'>                        "can't convert negative value to unsigned int");
<a name='L509'>        <b>return</b> (<b>unsigned</b> <b>long</b>) -1;
<a name='L510'>    <font color='red'>}</font>
<a name='L511'>    <b>switch</b> (i) <font color='red'>{</font>
<a name='L512'>    <b>case</b> 0: <b>return</b> 0;
<a name='L513'>    <b>case</b> 1: <b>return</b> v-&gt;ob_digit[0];
<a name='L514'>    <font color='red'>}</font>
<a name='L515'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L516'>        prev = x;
<a name='L517'>        x = (x &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) | v-&gt;ob_digit[i];
<a name='L518'>        <b>if</b> ((x &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) != prev) <font color='red'>{</font>
<a name='L519'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L520'>                            "python int too large to convert "
<a name='L521'>                            "to C unsigned long");
<a name='L522'>            <b>return</b> (<b>unsigned</b> <b>long</b>) -1;
<a name='L523'>        <font color='red'>}</font>
<a name='L524'>    <font color='red'>}</font>
<a name='L525'>    <b>return</b> x;
<a name='L526'><font color='red'>}</font>
<a name='L527'>
<a name='L528'><i><font color='green'>/* Get a C unsigned long int from a long int object.</font></i>
<a name='L529'><i><font color='green'>   Returns -1 and sets an error condition if overflow occurs. */</font></i>
<a name='L530'>
<a name='L531'><a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>
<a name='L532'><a href='../S/536.html#L26' title='Refered from 26 in Include/longobject.h.'>PyLong_AsSize_t</a>(PyObject *vv)
<a name='L533'><font color='red'>{</font>
<a name='L534'>    <b>register</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L535'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> x, prev;
<a name='L536'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L537'>
<a name='L538'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L539'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L540'>        <b>return</b> (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>) -1;
<a name='L541'>    <font color='red'>}</font>
<a name='L542'>    <b>if</b> (!PyLong_Check(vv)) <font color='red'>{</font>
<a name='L543'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "an integer is required");
<a name='L544'>        <b>return</b> (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)-1;
<a name='L545'>    <font color='red'>}</font>
<a name='L546'>
<a name='L547'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L548'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L549'>    x = 0;
<a name='L550'>    <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L551'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L552'>                   "can't convert negative value to size_t");
<a name='L553'>        <b>return</b> (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>) -1;
<a name='L554'>    <font color='red'>}</font>
<a name='L555'>    <b>switch</b> (i) <font color='red'>{</font>
<a name='L556'>    <b>case</b> 0: <b>return</b> 0;
<a name='L557'>    <b>case</b> 1: <b>return</b> v-&gt;ob_digit[0];
<a name='L558'>    <font color='red'>}</font>
<a name='L559'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L560'>        prev = x;
<a name='L561'>        x = (x &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) | v-&gt;ob_digit[i];
<a name='L562'>        <b>if</b> ((x &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) != prev) <font color='red'>{</font>
<a name='L563'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L564'>                "Python int too large to convert to C size_t");
<a name='L565'>            <b>return</b> (<b>unsigned</b> <b>long</b>) -1;
<a name='L566'>        <font color='red'>}</font>
<a name='L567'>    <font color='red'>}</font>
<a name='L568'>    <b>return</b> x;
<a name='L569'><font color='red'>}</font>
<a name='L570'>
<a name='L571'><i><font color='green'>/* Get a C unsigned long int from a long int object, ignoring the high bits.</font></i>
<a name='L572'><i><font color='green'>   Returns -1 and sets an error condition if an error occurs. */</font></i>
<a name='L573'>
<a name='L574'><b>static</b> <b>unsigned</b> <b>long</b>
<a name='L575'><a href='../R/5437.html' title='Multiple refered from 2 places.'>_PyLong_AsUnsignedLongMask</a>(PyObject *vv)
<a name='L576'><font color='red'>{</font>
<a name='L577'>    <b>register</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L578'>    <b>unsigned</b> <b>long</b> x;
<a name='L579'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L580'>    <b>int</b> sign;
<a name='L581'>
<a name='L582'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyLong_Check(vv)) <font color='red'>{</font>
<a name='L583'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L584'>        <b>return</b> (<b>unsigned</b> <b>long</b>) -1;
<a name='L585'>    <font color='red'>}</font>
<a name='L586'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L587'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L588'>    <b>switch</b> (i) <font color='red'>{</font>
<a name='L589'>    <b>case</b> 0: <b>return</b> 0;
<a name='L590'>    <b>case</b> 1: <b>return</b> v-&gt;ob_digit[0];
<a name='L591'>    <font color='red'>}</font>
<a name='L592'>    sign = 1;
<a name='L593'>    x = 0;
<a name='L594'>    <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L595'>        sign = -1;
<a name='L596'>        i = -i;
<a name='L597'>    <font color='red'>}</font>
<a name='L598'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L599'>        x = (x &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) | v-&gt;ob_digit[i];
<a name='L600'>    <font color='red'>}</font>
<a name='L601'>    <b>return</b> x * sign;
<a name='L602'><font color='red'>}</font>
<a name='L603'>
<a name='L604'><b>unsigned</b> <b>long</b>
<a name='L605'><a href='../R/3121.html' title='Multiple refered from 13 places.'>PyLong_AsUnsignedLongMask</a>(<b>register</b> PyObject *op)
<a name='L606'><font color='red'>{</font>
<a name='L607'>    <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *nb;
<a name='L608'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *lo;
<a name='L609'>    <b>unsigned</b> <b>long</b> val;
<a name='L610'>
<a name='L611'>    <b>if</b> (op &amp;&amp; PyLong_Check(op))
<a name='L612'>        <b>return</b> <a href='../S/2799.html#L575' title='Defined at 575 in Objects/longobject.c.'>_PyLong_AsUnsignedLongMask</a>(op);
<a name='L613'>
<a name='L614'>    <b>if</b> (op == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || (nb = op-&gt;ob_type-&gt;tp_as_number) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L615'>        nb-&gt;nb_int == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L616'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "an integer is required");
<a name='L617'>        <b>return</b> (<b>unsigned</b> <b>long</b>)-1;
<a name='L618'>    <font color='red'>}</font>
<a name='L619'>
<a name='L620'>    lo = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*) (*nb-&gt;nb_int) (op);
<a name='L621'>    <b>if</b> (lo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L622'>        <b>return</b> (<b>unsigned</b> <b>long</b>)-1;
<a name='L623'>    <b>if</b> (PyLong_Check(lo)) <font color='red'>{</font>
<a name='L624'>        val = <a href='../S/2799.html#L575' title='Defined at 575 in Objects/longobject.c.'>_PyLong_AsUnsignedLongMask</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)lo);
<a name='L625'>        Py_DECREF(lo);
<a name='L626'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L627'>            <b>return</b> (<b>unsigned</b> <b>long</b>)-1;
<a name='L628'>        <b>return</b> val;
<a name='L629'>    <font color='red'>}</font>
<a name='L630'>    <b>else</b>
<a name='L631'>    <font color='red'>{</font>
<a name='L632'>        Py_DECREF(lo);
<a name='L633'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L634'>                        "nb_int should return int object");
<a name='L635'>        <b>return</b> (<b>unsigned</b> <b>long</b>)-1;
<a name='L636'>    <font color='red'>}</font>
<a name='L637'><font color='red'>}</font>
<a name='L638'>
<a name='L639'><b>int</b>
<a name='L640'><a href='../R/5448.html' title='Multiple refered from 7 places.'>_PyLong_Sign</a>(PyObject *vv)
<a name='L641'><font color='red'>{</font>
<a name='L642'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L643'>
<a name='L644'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L645'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L646'>
<a name='L647'>    <b>return</b> <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) == 0 ? 0 : (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) &lt; 0 ? -1 : 1);
<a name='L648'><font color='red'>}</font>
<a name='L649'>
<a name='L650'><a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>
<a name='L651'><a href='../R/5447.html' title='Multiple refered from 3 places.'>_PyLong_NumBits</a>(PyObject *vv)
<a name='L652'><font color='red'>{</font>
<a name='L653'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L654'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 0;
<a name='L655'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ndigits;
<a name='L656'>
<a name='L657'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L658'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L659'>    ndigits = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v));
<a name='L660'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(ndigits == 0 || v-&gt;ob_digit[ndigits - 1] != 0);
<a name='L661'>    <b>if</b> (ndigits &gt; 0) <font color='red'>{</font>
<a name='L662'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> msd = v-&gt;ob_digit[ndigits - 1];
<a name='L663'>
<a name='L664'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (ndigits - 1) * <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L665'>        <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> != (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)(ndigits - 1))
<a name='L666'>            <b>goto</b> Overflow;
<a name='L667'>        <b>do</b> <font color='red'>{</font>
<a name='L668'>            ++<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L669'>            <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == 0)
<a name='L670'>                <b>goto</b> Overflow;
<a name='L671'>            msd &gt;&gt;= 1;
<a name='L672'>        <font color='red'>}</font> <b>while</b> (msd);
<a name='L673'>    <font color='red'>}</font>
<a name='L674'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L675'>
<a name='L676'>  Overflow:
<a name='L677'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError, "int has too many bits "
<a name='L678'>                    "to express in a platform size_t");
<a name='L679'>    <b>return</b> (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)-1;
<a name='L680'><font color='red'>}</font>
<a name='L681'>
<a name='L682'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L683'><a href='../R/5444.html' title='Multiple refered from 10 places.'>_PyLong_FromByteArray</a>(<b>const</b> <b>unsigned</b> <b>char</b>* bytes, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> n,
<a name='L684'>                      <b>int</b> little_endian, <b>int</b> is_signed)
<a name='L685'><font color='red'>{</font>
<a name='L686'>    <b>const</b> <b>unsigned</b> <b>char</b>* pstartbyte;    <i><font color='green'>/* LSB of bytes */</font></i>
<a name='L687'>    <b>int</b> incr;                           <i><font color='green'>/* direction to move pstartbyte */</font></i>
<a name='L688'>    <b>const</b> <b>unsigned</b> <b>char</b>* pendbyte;      <i><font color='green'>/* MSB of bytes */</font></i>
<a name='L689'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> numsignificantbytes;         <i><font color='green'>/* number of bytes that matter */</font></i>
<a name='L690'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ndigits;                 <i><font color='green'>/* number of Python long digits */</font></i>
<a name='L691'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>* v;                    <i><font color='green'>/* result */</font></i>
<a name='L692'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> idigit = 0;              <i><font color='green'>/* next free index in v-&gt;ob_digit */</font></i>
<a name='L693'>
<a name='L694'>    <b>if</b> (n == 0)
<a name='L695'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0L);
<a name='L696'>
<a name='L697'>    <b>if</b> (little_endian) <font color='red'>{</font>
<a name='L698'>        pstartbyte = <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L699'>        pendbyte = <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> + n - 1;
<a name='L700'>        incr = 1;
<a name='L701'>    <font color='red'>}</font>
<a name='L702'>    <b>else</b> <font color='red'>{</font>
<a name='L703'>        pstartbyte = <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> + n - 1;
<a name='L704'>        pendbyte = <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L705'>        incr = -1;
<a name='L706'>    <font color='red'>}</font>
<a name='L707'>
<a name='L708'>    <b>if</b> (is_signed)
<a name='L709'>        is_signed = *pendbyte &gt;= 0x80;
<a name='L710'>
<a name='L711'>    <i><font color='green'>/* Compute numsignificantbytes.  This consists of finding the most</font></i>
<a name='L712'><i><font color='green'>       significant byte.  Leading 0 bytes are insignficant if the number</font></i>
<a name='L713'><i><font color='green'>       is positive, and leading 0xff bytes if negative. */</font></i>
<a name='L714'>    <font color='red'>{</font>
<a name='L715'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> i;
<a name='L716'>        <b>const</b> <b>unsigned</b> <b>char</b>* p = pendbyte;
<a name='L717'>        <b>const</b> <b>int</b> pincr = -incr;  <i><font color='green'>/* search MSB to LSB */</font></i>
<a name='L718'>        <b>const</b> <b>unsigned</b> <b>char</b> insignficant = is_signed ? 0xff : 0x00;
<a name='L719'>
<a name='L720'>        <b>for</b> (i = 0; i &lt; n; ++i, p += pincr) <font color='red'>{</font>
<a name='L721'>            <b>if</b> (*p != insignficant)
<a name='L722'>                <b>break</b>;
<a name='L723'>        <font color='red'>}</font>
<a name='L724'>        numsignificantbytes = n - i;
<a name='L725'>        <i><font color='green'>/* 2's-comp is a bit tricky here, e.g. 0xff00 == -0x0100, so</font></i>
<a name='L726'><i><font color='green'>           actually has 2 significant bytes.  OTOH, 0xff0001 ==</font></i>
<a name='L727'><i><font color='green'>           -0x00ffff, so we wouldn't *need* to bump it there; but we</font></i>
<a name='L728'><i><font color='green'>           do for 0xffff = -0x0001.  To be safe without bothering to</font></i>
<a name='L729'><i><font color='green'>           check every case, bump it regardless. */</font></i>
<a name='L730'>        <b>if</b> (is_signed &amp;&amp; numsignificantbytes &lt; n)
<a name='L731'>            ++numsignificantbytes;
<a name='L732'>    <font color='red'>}</font>
<a name='L733'>
<a name='L734'>    <i><font color='green'>/* How many Python long digits do we need?  We have</font></i>
<a name='L735'><i><font color='green'>       8*numsignificantbytes bits, and each Python long digit has</font></i>
<a name='L736'><i><font color='green'>       PyLong_SHIFT bits, so it's the ceiling of the quotient. */</font></i>
<a name='L737'>    <i><font color='green'>/* catch overflow before it happens */</font></i>
<a name='L738'>    <b>if</b> (numsignificantbytes &gt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) / 8) <font color='red'>{</font>
<a name='L739'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L740'>                        "byte array too long to convert to int");
<a name='L741'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L742'>    <font color='red'>}</font>
<a name='L743'>    ndigits = (numsignificantbytes * 8 + <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> - 1) / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L744'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(ndigits);
<a name='L745'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L746'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L747'>
<a name='L748'>    <i><font color='green'>/* Copy the bits over.  The tricky parts are computing 2's-comp on</font></i>
<a name='L749'><i><font color='green'>       the fly for signed numbers, and dealing with the mismatch between</font></i>
<a name='L750'><i><font color='green'>       8-bit bytes and (probably) 15-bit Python digits.*/</font></i>
<a name='L751'>    <font color='red'>{</font>
<a name='L752'>        <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> i;
<a name='L753'>        <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> carry = 1;                    <i><font color='green'>/* for 2's-comp calculation */</font></i>
<a name='L754'>        <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> = 0;                    <i><font color='green'>/* sliding register */</font></i>
<a name='L755'>        <b>unsigned</b> <b>int</b> accumbits = 0;             <i><font color='green'>/* number of bits in accum */</font></i>
<a name='L756'>        <b>const</b> <b>unsigned</b> <b>char</b>* p = pstartbyte;
<a name='L757'>
<a name='L758'>        <b>for</b> (i = 0; i &lt; numsignificantbytes; ++i, p += incr) <font color='red'>{</font>
<a name='L759'>            <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> thisbyte = *p;
<a name='L760'>            <i><font color='green'>/* Compute correction for 2's comp, if needed. */</font></i>
<a name='L761'>            <b>if</b> (is_signed) <font color='red'>{</font>
<a name='L762'>                thisbyte = (0xff ^ thisbyte) + carry;
<a name='L763'>                carry = thisbyte &gt;&gt; 8;
<a name='L764'>                thisbyte &amp;= 0xff;
<a name='L765'>            <font color='red'>}</font>
<a name='L766'>            <i><font color='green'>/* Because we're going LSB to MSB, thisbyte is</font></i>
<a name='L767'><i><font color='green'>               more significant than what's already in accum,</font></i>
<a name='L768'><i><font color='green'>               so needs to be prepended to accum. */</font></i>
<a name='L769'>            <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> |= (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)thisbyte &lt;&lt; accumbits;
<a name='L770'>            accumbits += 8;
<a name='L771'>            <b>if</b> (accumbits &gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) <font color='red'>{</font>
<a name='L772'>                <i><font color='green'>/* There's enough to fill a Python digit. */</font></i>
<a name='L773'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(idigit &lt; ndigits);
<a name='L774'>                v-&gt;ob_digit[idigit] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L775'>                ++idigit;
<a name='L776'>                <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L777'>                accumbits -= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L778'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(accumbits &lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L779'>            <font color='red'>}</font>
<a name='L780'>        <font color='red'>}</font>
<a name='L781'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(accumbits &lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L782'>        <b>if</b> (accumbits) <font color='red'>{</font>
<a name='L783'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(idigit &lt; ndigits);
<a name='L784'>            v-&gt;ob_digit[idigit] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a>;
<a name='L785'>            ++idigit;
<a name='L786'>        <font color='red'>}</font>
<a name='L787'>    <font color='red'>}</font>
<a name='L788'>
<a name='L789'>    <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = is_signed ? -idigit : idigit;
<a name='L790'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(v);
<a name='L791'><font color='red'>}</font>
<a name='L792'>
<a name='L793'><b>int</b>
<a name='L794'><a href='../R/5435.html' title='Multiple refered from 9 places.'>_PyLong_AsByteArray</a>(PyLongObject* v,
<a name='L795'>                    <b>unsigned</b> <b>char</b>* bytes, <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> n,
<a name='L796'>                    <b>int</b> little_endian, <b>int</b> is_signed)
<a name='L797'><font color='red'>{</font>
<a name='L798'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;               <i><font color='green'>/* index into v-&gt;ob_digit */</font></i>
<a name='L799'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ndigits;         <i><font color='green'>/* |v-&gt;ob_size| */</font></i>
<a name='L800'>    <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a>;            <i><font color='green'>/* sliding register */</font></i>
<a name='L801'>    <b>unsigned</b> <b>int</b> accumbits;     <i><font color='green'>/* # bits in accum */</font></i>
<a name='L802'>    <b>int</b> do_twos_comp;           <i><font color='green'>/* store 2's-comp?  is_signed and v &lt; 0 */</font></i>
<a name='L803'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> carry;                <i><font color='green'>/* for computing 2's-comp */</font></i>
<a name='L804'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> j;                   <i><font color='green'>/* # bytes filled */</font></i>
<a name='L805'>    <b>unsigned</b> <b>char</b>* p;           <i><font color='green'>/* pointer to next byte in bytes */</font></i>
<a name='L806'>    <b>int</b> pincr;                  <i><font color='green'>/* direction to move p */</font></i>
<a name='L807'>
<a name='L808'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; PyLong_Check(v));
<a name='L809'>
<a name='L810'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) &lt; 0) <font color='red'>{</font>
<a name='L811'>        ndigits = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v));
<a name='L812'>        <b>if</b> (!is_signed) <font color='red'>{</font>
<a name='L813'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L814'>                            "can't convert negative int to unsigned");
<a name='L815'>            <b>return</b> -1;
<a name='L816'>        <font color='red'>}</font>
<a name='L817'>        do_twos_comp = 1;
<a name='L818'>    <font color='red'>}</font>
<a name='L819'>    <b>else</b> <font color='red'>{</font>
<a name='L820'>        ndigits = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L821'>        do_twos_comp = 0;
<a name='L822'>    <font color='red'>}</font>
<a name='L823'>
<a name='L824'>    <b>if</b> (little_endian) <font color='red'>{</font>
<a name='L825'>        p = <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L826'>        pincr = 1;
<a name='L827'>    <font color='red'>}</font>
<a name='L828'>    <b>else</b> <font color='red'>{</font>
<a name='L829'>        p = <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> + n - 1;
<a name='L830'>        pincr = -1;
<a name='L831'>    <font color='red'>}</font>
<a name='L832'>
<a name='L833'>    <i><font color='green'>/* Copy over all the Python digits.</font></i>
<a name='L834'><i><font color='green'>       It's crucial that every Python digit except for the MSD contribute</font></i>
<a name='L835'><i><font color='green'>       exactly PyLong_SHIFT bits to the total, so first assert that the long is</font></i>
<a name='L836'><i><font color='green'>       normalized. */</font></i>
<a name='L837'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(ndigits == 0 || v-&gt;ob_digit[ndigits - 1] != 0);
<a name='L838'>    j = 0;
<a name='L839'>    <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> = 0;
<a name='L840'>    accumbits = 0;
<a name='L841'>    carry = do_twos_comp ? 1 : 0;
<a name='L842'>    <b>for</b> (i = 0; i &lt; ndigits; ++i) <font color='red'>{</font>
<a name='L843'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> thisdigit = v-&gt;ob_digit[i];
<a name='L844'>        <b>if</b> (do_twos_comp) <font color='red'>{</font>
<a name='L845'>            thisdigit = (thisdigit ^ <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>) + carry;
<a name='L846'>            carry = thisdigit &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L847'>            thisdigit &amp;= <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L848'>        <font color='red'>}</font>
<a name='L849'>        <i><font color='green'>/* Because we're going LSB to MSB, thisdigit is more</font></i>
<a name='L850'><i><font color='green'>           significant than what's already in accum, so needs to be</font></i>
<a name='L851'><i><font color='green'>           prepended to accum. */</font></i>
<a name='L852'>        <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> |= (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)thisdigit &lt;&lt; accumbits;
<a name='L853'>
<a name='L854'>        <i><font color='green'>/* The most-significant digit may be (probably is) at least</font></i>
<a name='L855'><i><font color='green'>           partly empty. */</font></i>
<a name='L856'>        <b>if</b> (i == ndigits - 1) <font color='red'>{</font>
<a name='L857'>            <i><font color='green'>/* Count # of sign bits -- they needn't be stored,</font></i>
<a name='L858'><i><font color='green'>             * although for signed conversion we need later to</font></i>
<a name='L859'><i><font color='green'>             * make sure at least one sign bit gets stored. */</font></i>
<a name='L860'>            <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> s = do_twos_comp ? thisdigit ^ <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a> : thisdigit;
<a name='L861'>            <b>while</b> (s != 0) <font color='red'>{</font>
<a name='L862'>                s &gt;&gt;= 1;
<a name='L863'>                accumbits++;
<a name='L864'>            <font color='red'>}</font>
<a name='L865'>        <font color='red'>}</font>
<a name='L866'>        <b>else</b>
<a name='L867'>            accumbits += <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L868'>
<a name='L869'>        <i><font color='green'>/* Store as many bytes as possible. */</font></i>
<a name='L870'>        <b>while</b> (accumbits &gt;= 8) <font color='red'>{</font>
<a name='L871'>            <b>if</b> (j &gt;= n)
<a name='L872'>                <b>goto</b> Overflow;
<a name='L873'>            ++j;
<a name='L874'>            *p = (<b>unsigned</b> <b>char</b>)(<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &amp; 0xff);
<a name='L875'>            p += pincr;
<a name='L876'>            accumbits -= 8;
<a name='L877'>            <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &gt;&gt;= 8;
<a name='L878'>        <font color='red'>}</font>
<a name='L879'>    <font color='red'>}</font>
<a name='L880'>
<a name='L881'>    <i><font color='green'>/* Store the straggler (if any). */</font></i>
<a name='L882'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(accumbits &lt; 8);
<a name='L883'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(carry == 0);  <i><font color='green'>/* else do_twos_comp and *every* digit was 0 */</font></i>
<a name='L884'>    <b>if</b> (accumbits &gt; 0) <font color='red'>{</font>
<a name='L885'>        <b>if</b> (j &gt;= n)
<a name='L886'>            <b>goto</b> Overflow;
<a name='L887'>        ++j;
<a name='L888'>        <b>if</b> (do_twos_comp) <font color='red'>{</font>
<a name='L889'>            <i><font color='green'>/* Fill leading bits of the byte with sign bits</font></i>
<a name='L890'><i><font color='green'>               (appropriately pretending that the long had an</font></i>
<a name='L891'><i><font color='green'>               infinite supply of sign bits). */</font></i>
<a name='L892'>            <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> |= (~(<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)0) &lt;&lt; accumbits;
<a name='L893'>        <font color='red'>}</font>
<a name='L894'>        *p = (<b>unsigned</b> <b>char</b>)(<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &amp; 0xff);
<a name='L895'>        p += pincr;
<a name='L896'>    <font color='red'>}</font>
<a name='L897'>    <b>else</b> <b>if</b> (j == n &amp;&amp; n &gt; 0 &amp;&amp; is_signed) <font color='red'>{</font>
<a name='L898'>        <i><font color='green'>/* The main loop filled the byte array exactly, so the code</font></i>
<a name='L899'><i><font color='green'>           just above didn't get to ensure there's a sign bit, and the</font></i>
<a name='L900'><i><font color='green'>           loop below wouldn't add one either.  Make sure a sign bit</font></i>
<a name='L901'><i><font color='green'>           exists. */</font></i>
<a name='L902'>        <b>unsigned</b> <b>char</b> msb = *(p - pincr);
<a name='L903'>        <b>int</b> sign_bit_set = msb &gt;= 0x80;
<a name='L904'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(accumbits == 0);
<a name='L905'>        <b>if</b> (sign_bit_set == do_twos_comp)
<a name='L906'>            <b>return</b> 0;
<a name='L907'>        <b>else</b>
<a name='L908'>            <b>goto</b> Overflow;
<a name='L909'>    <font color='red'>}</font>
<a name='L910'>
<a name='L911'>    <i><font color='green'>/* Fill remaining bytes with copies of the sign bit. */</font></i>
<a name='L912'>    <font color='red'>{</font>
<a name='L913'>        <b>unsigned</b> <b>char</b> signbyte = do_twos_comp ? 0xffU : 0U;
<a name='L914'>        <b>for</b> ( ; j &lt; n; ++j, p += pincr)
<a name='L915'>            *p = signbyte;
<a name='L916'>    <font color='red'>}</font>
<a name='L917'>
<a name='L918'>    <b>return</b> 0;
<a name='L919'>
<a name='L920'>  Overflow:
<a name='L921'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError, "int too big to convert");
<a name='L922'>    <b>return</b> -1;
<a name='L923'>
<a name='L924'><font color='red'>}</font>
<a name='L925'>
<a name='L926'><i><font color='green'>/* Create a new long (or int) object from a C pointer */</font></i>
<a name='L927'>
<a name='L928'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L929'><a href='../R/3135.html' title='Multiple refered from 36 places.'>PyLong_FromVoidPtr</a>(<b>void</b> *p)
<a name='L930'><font color='red'>{</font>
<a name='L931'><font color='darkred'>#ifndef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L932'><font color='darkred'>#   error</font> "PyLong_FromVoidPtr: sizeof(void*) &gt; sizeof(long), but no long long"
<a name='L933'><font color='darkred'>#endif</font>
<a name='L934'><font color='darkred'>#if</font> <a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a> &lt; <a href='../D/4744.html' title='Multiple defined in 7 places.'>SIZEOF_VOID_P</a>
<a name='L935'><font color='darkred'>#   error</font> "PyLong_FromVoidPtr: sizeof(PY_LONG_LONG) &lt; sizeof(void*)"
<a name='L936'><font color='darkred'>#endif</font>
<a name='L937'>    <i><font color='green'>/* special-case null pointer */</font></i>
<a name='L938'>    <b>if</b> (!p)
<a name='L939'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0);
<a name='L940'>    <b>return</b> <a href='../S/2799.html#L1038' title='Defined at 1038 in Objects/longobject.c.'>PyLong_FromUnsignedLongLong</a>((<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)(<a href='../D/4394.html' title='Multiple defined in 4 places.'>Py_uintptr_t</a>)p);
<a name='L941'>
<a name='L942'><font color='red'>}</font>
<a name='L943'>
<a name='L944'><i><font color='green'>/* Get a C pointer from a long object (or an int object in some cases) */</font></i>
<a name='L945'>
<a name='L946'><b>void</b> *
<a name='L947'><a href='../R/3122.html' title='Multiple refered from 9 places.'>PyLong_AsVoidPtr</a>(PyObject *vv)
<a name='L948'><font color='red'>{</font>
<a name='L949'>    <i><font color='green'>/* This function will allow int or long objects. If vv is neither,</font></i>
<a name='L950'><i><font color='green'>       then the PyLong_AsLong*() functions will raise the exception:</font></i>
<a name='L951'><i><font color='green'>       PyExc_SystemError, "bad argument to internal function"</font></i>
<a name='L952'><i><font color='green'>    */</font></i>
<a name='L953'><font color='darkred'>#if</font> <a href='../D/4744.html' title='Multiple defined in 7 places.'>SIZEOF_VOID_P</a> &lt;= <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>
<a name='L954'>    <b>long</b> x;
<a name='L955'>
<a name='L956'>    <b>if</b> (PyLong_Check(vv) &amp;&amp; <a href='../S/2799.html#L640' title='Defined at 640 in Objects/longobject.c.'>_PyLong_Sign</a>(vv) &lt; 0)
<a name='L957'>        x = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(vv);
<a name='L958'>    <b>else</b>
<a name='L959'>        x = <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>(vv);
<a name='L960'><font color='darkred'>#else</font>
<a name='L961'>
<a name='L962'><font color='darkred'>#ifndef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L963'><font color='darkred'>#   error</font> "PyLong_AsVoidPtr: sizeof(void*) &gt; sizeof(long), but no long long"
<a name='L964'><font color='darkred'>#endif</font>
<a name='L965'><font color='darkred'>#if</font> <a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a> &lt; <a href='../D/4744.html' title='Multiple defined in 7 places.'>SIZEOF_VOID_P</a>
<a name='L966'><font color='darkred'>#   error</font> "PyLong_AsVoidPtr: sizeof(PY_LONG_LONG) &lt; sizeof(void*)"
<a name='L967'><font color='darkred'>#endif</font>
<a name='L968'>    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x;
<a name='L969'>
<a name='L970'>    <b>if</b> (PyLong_Check(vv) &amp;&amp; <a href='../S/2799.html#L640' title='Defined at 640 in Objects/longobject.c.'>_PyLong_Sign</a>(vv) &lt; 0)
<a name='L971'>        x = <a href='../S/2799.html#L1137' title='Defined at 1137 in Objects/longobject.c.'>PyLong_AsLongLong</a>(vv);
<a name='L972'>    <b>else</b>
<a name='L973'>        x = <a href='../S/2799.html#L1189' title='Defined at 1189 in Objects/longobject.c.'>PyLong_AsUnsignedLongLong</a>(vv);
<a name='L974'>
<a name='L975'><font color='darkred'>#endif</font> <i><font color='green'>/* SIZEOF_VOID_P &lt;= SIZEOF_LONG */</font></i>
<a name='L976'>
<a name='L977'>    <b>if</b> (x == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L978'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L979'>    <b>return</b> (<b>void</b> *)x;
<a name='L980'><font color='red'>}</font>
<a name='L981'>
<a name='L982'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L983'>
<a name='L984'><i><font color='green'>/* Initial PY_LONG_LONG support by Chris Herborth (chrish@qnx.com), later</font></i>
<a name='L985'><i><font color='green'> * rewritten to use the newer PyLong_{As,From}ByteArray API.</font></i>
<a name='L986'><i><font color='green'> */</font></i>
<a name='L987'>
<a name='L988'><font color='darkred'>#define</font> <a href='../R/1595.html' title='Multiple refered from 4 places.'>IS_LITTLE_ENDIAN</a> (<b>int</b>)*(<b>unsigned</b> <b>char</b>*)&amp;one
<a name='L989'><font color='darkred'>#define</font> <a href='../S/2799.html#L1366' title='Refered from 1366 in Objects/longobject.c.'>PY_ABS_LLONG_MIN</a> (0-(<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)<a href='../D/2603.html' title='Multiple defined in 5 places.'>PY_LLONG_MIN</a>)
<a name='L990'>
<a name='L991'><i><font color='green'>/* Create a new long int object from a C PY_LONG_LONG int. */</font></i>
<a name='L992'>
<a name='L993'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L994'><a href='../R/3127.html' title='Multiple refered from 35 places.'>PyLong_FromLongLong</a>(<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> ival)
<a name='L995'><font color='red'>{</font>
<a name='L996'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L997'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> abs_ival;
<a name='L998'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> t;  <i><font color='green'>/* unsigned so &gt;&gt; doesn't propagate sign bit */</font></i>
<a name='L999'>    <b>int</b> ndigits = 0;
<a name='L1000'>    <b>int</b> negative = 0;
<a name='L1001'>
<a name='L1002'>    <a href='../D/537.html' title='Multiple defined in 2 places.'>CHECK_SMALL_INT</a>(ival);
<a name='L1003'>    <b>if</b> (ival &lt; 0) <font color='red'>{</font>
<a name='L1004'>        <i><font color='green'>/* avoid signed overflow on negation;  see comments</font></i>
<a name='L1005'><i><font color='green'>           in PyLong_FromLong above. */</font></i>
<a name='L1006'>        abs_ival = (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)(-1-ival) + 1;
<a name='L1007'>        negative = 1;
<a name='L1008'>    <font color='red'>}</font>
<a name='L1009'>    <b>else</b> <font color='red'>{</font>
<a name='L1010'>        abs_ival = (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)ival;
<a name='L1011'>    <font color='red'>}</font>
<a name='L1012'>
<a name='L1013'>    <i><font color='green'>/* Count the number of Python digits.</font></i>
<a name='L1014'><i><font color='green'>       We used to pick 5 ("big enough for anything"), but that's a</font></i>
<a name='L1015'><i><font color='green'>       waste of time and space given that 5*15 = 75 bits are rarely</font></i>
<a name='L1016'><i><font color='green'>       needed. */</font></i>
<a name='L1017'>    t = abs_ival;
<a name='L1018'>    <b>while</b> (t) <font color='red'>{</font>
<a name='L1019'>        ++ndigits;
<a name='L1020'>        t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1021'>    <font color='red'>}</font>
<a name='L1022'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(ndigits);
<a name='L1023'>    <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1024'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *p = v-&gt;ob_digit;
<a name='L1025'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = negative ? -ndigits : ndigits;
<a name='L1026'>        t = abs_ival;
<a name='L1027'>        <b>while</b> (t) <font color='red'>{</font>
<a name='L1028'>            *p++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(t &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L1029'>            t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1030'>        <font color='red'>}</font>
<a name='L1031'>    <font color='red'>}</font>
<a name='L1032'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L1033'><font color='red'>}</font>
<a name='L1034'>
<a name='L1035'><i><font color='green'>/* Create a new long int object from a C unsigned PY_LONG_LONG int. */</font></i>
<a name='L1036'>
<a name='L1037'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1038'><a href='../R/3134.html' title='Multiple refered from 11 places.'>PyLong_FromUnsignedLongLong</a>(<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> ival)
<a name='L1039'><font color='red'>{</font>
<a name='L1040'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L1041'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> t;
<a name='L1042'>    <b>int</b> ndigits = 0;
<a name='L1043'>
<a name='L1044'>    <b>if</b> (ival &lt; <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>)
<a name='L1045'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)ival);
<a name='L1046'>    <i><font color='green'>/* Count the number of Python digits. */</font></i>
<a name='L1047'>    t = (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)ival;
<a name='L1048'>    <b>while</b> (t) <font color='red'>{</font>
<a name='L1049'>        ++ndigits;
<a name='L1050'>        t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1051'>    <font color='red'>}</font>
<a name='L1052'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(ndigits);
<a name='L1053'>    <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1054'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *p = v-&gt;ob_digit;
<a name='L1055'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = ndigits;
<a name='L1056'>        <b>while</b> (ival) <font color='red'>{</font>
<a name='L1057'>            *p++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(ival &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L1058'>            ival &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1059'>        <font color='red'>}</font>
<a name='L1060'>    <font color='red'>}</font>
<a name='L1061'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L1062'><font color='red'>}</font>
<a name='L1063'>
<a name='L1064'><i><font color='green'>/* Create a new long int object from a C Py_ssize_t. */</font></i>
<a name='L1065'>
<a name='L1066'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1067'><a href='../R/3130.html' title='Multiple refered from 131 places.'>PyLong_FromSsize_t</a>(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ival)
<a name='L1068'><font color='red'>{</font>
<a name='L1069'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L1070'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> abs_ival;
<a name='L1071'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> t;  <i><font color='green'>/* unsigned so &gt;&gt; doesn't propagate sign bit */</font></i>
<a name='L1072'>    <b>int</b> ndigits = 0;
<a name='L1073'>    <b>int</b> negative = 0;
<a name='L1074'>
<a name='L1075'>    <a href='../D/537.html' title='Multiple defined in 2 places.'>CHECK_SMALL_INT</a>(ival);
<a name='L1076'>    <b>if</b> (ival &lt; 0) <font color='red'>{</font>
<a name='L1077'>        <i><font color='green'>/* avoid signed overflow when ival = SIZE_T_MIN */</font></i>
<a name='L1078'>        abs_ival = (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)(-1-ival)+1;
<a name='L1079'>        negative = 1;
<a name='L1080'>    <font color='red'>}</font>
<a name='L1081'>    <b>else</b> <font color='red'>{</font>
<a name='L1082'>        abs_ival = (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)ival;
<a name='L1083'>    <font color='red'>}</font>
<a name='L1084'>
<a name='L1085'>    <i><font color='green'>/* Count the number of Python digits. */</font></i>
<a name='L1086'>    t = abs_ival;
<a name='L1087'>    <b>while</b> (t) <font color='red'>{</font>
<a name='L1088'>        ++ndigits;
<a name='L1089'>        t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1090'>    <font color='red'>}</font>
<a name='L1091'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(ndigits);
<a name='L1092'>    <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1093'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *p = v-&gt;ob_digit;
<a name='L1094'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = negative ? -ndigits : ndigits;
<a name='L1095'>        t = abs_ival;
<a name='L1096'>        <b>while</b> (t) <font color='red'>{</font>
<a name='L1097'>            *p++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(t &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L1098'>            t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1099'>        <font color='red'>}</font>
<a name='L1100'>    <font color='red'>}</font>
<a name='L1101'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L1102'><font color='red'>}</font>
<a name='L1103'>
<a name='L1104'><i><font color='green'>/* Create a new long int object from a C size_t. */</font></i>
<a name='L1105'>
<a name='L1106'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1107'><a href='../R/3128.html' title='Multiple refered from 4 places.'>PyLong_FromSize_t</a>(<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> ival)
<a name='L1108'><font color='red'>{</font>
<a name='L1109'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L1110'>    <a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a> t;
<a name='L1111'>    <b>int</b> ndigits = 0;
<a name='L1112'>
<a name='L1113'>    <b>if</b> (ival &lt; <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>)
<a name='L1114'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)ival);
<a name='L1115'>    <i><font color='green'>/* Count the number of Python digits. */</font></i>
<a name='L1116'>    t = ival;
<a name='L1117'>    <b>while</b> (t) <font color='red'>{</font>
<a name='L1118'>        ++ndigits;
<a name='L1119'>        t &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1120'>    <font color='red'>}</font>
<a name='L1121'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(ndigits);
<a name='L1122'>    <b>if</b> (v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1123'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *p = v-&gt;ob_digit;
<a name='L1124'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = ndigits;
<a name='L1125'>        <b>while</b> (ival) <font color='red'>{</font>
<a name='L1126'>            *p++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(ival &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L1127'>            ival &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1128'>        <font color='red'>}</font>
<a name='L1129'>    <font color='red'>}</font>
<a name='L1130'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v;
<a name='L1131'><font color='red'>}</font>
<a name='L1132'>
<a name='L1133'><i><font color='green'>/* Get a C PY_LONG_LONG int from a long int object.</font></i>
<a name='L1134'><i><font color='green'>   Return -1 and set an error if overflow occurs. */</font></i>
<a name='L1135'>
<a name='L1136'><a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>
<a name='L1137'><a href='../R/3112.html' title='Multiple refered from 19 places.'>PyLong_AsLongLong</a>(PyObject *vv)
<a name='L1138'><font color='red'>{</font>
<a name='L1139'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L1140'>    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L1141'>    <b>int</b> one = 1;
<a name='L1142'>    <b>int</b> res;
<a name='L1143'>
<a name='L1144'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1145'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1146'>        <b>return</b> -1;
<a name='L1147'>    <font color='red'>}</font>
<a name='L1148'>    <b>if</b> (!PyLong_Check(vv)) <font color='red'>{</font>
<a name='L1149'>        <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *nb;
<a name='L1150'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *io;
<a name='L1151'>        <b>if</b> ((nb = vv-&gt;ob_type-&gt;tp_as_number) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L1152'>            nb-&gt;nb_int == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1153'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "an integer is required");
<a name='L1154'>            <b>return</b> -1;
<a name='L1155'>        <font color='red'>}</font>
<a name='L1156'>        io = (*nb-&gt;nb_int) (vv);
<a name='L1157'>        <b>if</b> (io == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1158'>            <b>return</b> -1;
<a name='L1159'>        <b>if</b> (PyLong_Check(io)) <font color='red'>{</font>
<a name='L1160'>            <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../S/2799.html#L1137' title='Defined at 1137 in Objects/longobject.c.'>PyLong_AsLongLong</a>(io);
<a name='L1161'>            Py_DECREF(io);
<a name='L1162'>            <b>return</b> <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L1163'>        <font color='red'>}</font>
<a name='L1164'>        Py_DECREF(io);
<a name='L1165'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "integer conversion failed");
<a name='L1166'>        <b>return</b> -1;
<a name='L1167'>    <font color='red'>}</font>
<a name='L1168'>
<a name='L1169'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)vv;
<a name='L1170'>    <b>switch</b>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v)) <font color='red'>{</font>
<a name='L1171'>    <b>case</b> -1: <b>return</b> -(<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)v-&gt;ob_digit[0];
<a name='L1172'>    <b>case</b> 0: <b>return</b> 0;
<a name='L1173'>    <b>case</b> 1: <b>return</b> v-&gt;ob_digit[0];
<a name='L1174'>    <font color='red'>}</font>
<a name='L1175'>    res = <a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv, (<b>unsigned</b> <b>char</b> *)&amp;<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>,
<a name='L1176'>                              <a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a>, <a href='../D/1786.html' title='Multiple defined in 5 places.'>IS_LITTLE_ENDIAN</a>, 1);
<a name='L1177'>
<a name='L1178'>    <i><font color='green'>/* Plan 9 can't handle PY_LONG_LONG in ? : expressions */</font></i>
<a name='L1179'>    <b>if</b> (res &lt; 0)
<a name='L1180'>        <b>return</b> (<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1;
<a name='L1181'>    <b>else</b>
<a name='L1182'>        <b>return</b> <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L1183'><font color='red'>}</font>
<a name='L1184'>
<a name='L1185'><i><font color='green'>/* Get a C unsigned PY_LONG_LONG int from a long int object.</font></i>
<a name='L1186'><i><font color='green'>   Return -1 and set an error if overflow occurs. */</font></i>
<a name='L1187'>
<a name='L1188'><b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>
<a name='L1189'><a href='../R/3119.html' title='Multiple refered from 5 places.'>PyLong_AsUnsignedLongLong</a>(PyObject *vv)
<a name='L1190'><font color='red'>{</font>
<a name='L1191'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L1192'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L1193'>    <b>int</b> one = 1;
<a name='L1194'>    <b>int</b> res;
<a name='L1195'>
<a name='L1196'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyLong_Check(vv)) <font color='red'>{</font>
<a name='L1197'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1198'>        <b>return</b> (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1;
<a name='L1199'>    <font color='red'>}</font>
<a name='L1200'>
<a name='L1201'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)vv;
<a name='L1202'>    <b>switch</b>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v)) <font color='red'>{</font>
<a name='L1203'>    <b>case</b> 0: <b>return</b> 0;
<a name='L1204'>    <b>case</b> 1: <b>return</b> v-&gt;ob_digit[0];
<a name='L1205'>    <font color='red'>}</font>
<a name='L1206'>
<a name='L1207'>    res = <a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv, (<b>unsigned</b> <b>char</b> *)&amp;<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>,
<a name='L1208'>                              <a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a>, <a href='../D/1786.html' title='Multiple defined in 5 places.'>IS_LITTLE_ENDIAN</a>, 0);
<a name='L1209'>
<a name='L1210'>    <i><font color='green'>/* Plan 9 can't handle PY_LONG_LONG in ? : expressions */</font></i>
<a name='L1211'>    <b>if</b> (res &lt; 0)
<a name='L1212'>        <b>return</b> (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)res;
<a name='L1213'>    <b>else</b>
<a name='L1214'>        <b>return</b> <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L1215'><font color='red'>}</font>
<a name='L1216'>
<a name='L1217'><i><font color='green'>/* Get a C unsigned long int from a long int object, ignoring the high bits.</font></i>
<a name='L1218'><i><font color='green'>   Returns -1 and sets an error condition if an error occurs. */</font></i>
<a name='L1219'>
<a name='L1220'><b>static</b> <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>
<a name='L1221'><a href='../R/5436.html' title='Multiple refered from 2 places.'>_PyLong_AsUnsignedLongLongMask</a>(PyObject *vv)
<a name='L1222'><font color='red'>{</font>
<a name='L1223'>    <b>register</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L1224'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x;
<a name='L1225'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1226'>    <b>int</b> sign;
<a name='L1227'>
<a name='L1228'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyLong_Check(vv)) <font color='red'>{</font>
<a name='L1229'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1230'>        <b>return</b> (<b>unsigned</b> <b>long</b>) -1;
<a name='L1231'>    <font color='red'>}</font>
<a name='L1232'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L1233'>    <b>switch</b>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v)) <font color='red'>{</font>
<a name='L1234'>    <b>case</b> 0: <b>return</b> 0;
<a name='L1235'>    <b>case</b> 1: <b>return</b> v-&gt;ob_digit[0];
<a name='L1236'>    <font color='red'>}</font>
<a name='L1237'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L1238'>    sign = 1;
<a name='L1239'>    x = 0;
<a name='L1240'>    <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L1241'>        sign = -1;
<a name='L1242'>        i = -i;
<a name='L1243'>    <font color='red'>}</font>
<a name='L1244'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L1245'>        x = (x &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) | v-&gt;ob_digit[i];
<a name='L1246'>    <font color='red'>}</font>
<a name='L1247'>    <b>return</b> x * sign;
<a name='L1248'><font color='red'>}</font>
<a name='L1249'>
<a name='L1250'><b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>
<a name='L1251'><a href='../R/3120.html' title='Multiple refered from 8 places.'>PyLong_AsUnsignedLongLongMask</a>(<b>register</b> PyObject *op)
<a name='L1252'><font color='red'>{</font>
<a name='L1253'>    <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *nb;
<a name='L1254'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *lo;
<a name='L1255'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> val;
<a name='L1256'>
<a name='L1257'>    <b>if</b> (op &amp;&amp; PyLong_Check(op))
<a name='L1258'>        <b>return</b> <a href='../S/2799.html#L1221' title='Defined at 1221 in Objects/longobject.c.'>_PyLong_AsUnsignedLongLongMask</a>(op);
<a name='L1259'>
<a name='L1260'>    <b>if</b> (op == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || (nb = op-&gt;ob_type-&gt;tp_as_number) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L1261'>        nb-&gt;nb_int == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1262'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "an integer is required");
<a name='L1263'>        <b>return</b> (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1;
<a name='L1264'>    <font color='red'>}</font>
<a name='L1265'>
<a name='L1266'>    lo = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*) (*nb-&gt;nb_int) (op);
<a name='L1267'>    <b>if</b> (lo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1268'>        <b>return</b> (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1;
<a name='L1269'>    <b>if</b> (PyLong_Check(lo)) <font color='red'>{</font>
<a name='L1270'>        val = <a href='../S/2799.html#L1221' title='Defined at 1221 in Objects/longobject.c.'>_PyLong_AsUnsignedLongLongMask</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)lo);
<a name='L1271'>        Py_DECREF(lo);
<a name='L1272'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1273'>            <b>return</b> (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1;
<a name='L1274'>        <b>return</b> val;
<a name='L1275'>    <font color='red'>}</font>
<a name='L1276'>    <b>else</b>
<a name='L1277'>    <font color='red'>{</font>
<a name='L1278'>        Py_DECREF(lo);
<a name='L1279'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1280'>                        "nb_int should return int object");
<a name='L1281'>        <b>return</b> (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)-1;
<a name='L1282'>    <font color='red'>}</font>
<a name='L1283'><font color='red'>}</font>
<a name='L1284'><font color='darkred'>#undef</font> <a href='../R/1595.html' title='Multiple refered from 4 places.'>IS_LITTLE_ENDIAN</a>
<a name='L1285'>
<a name='L1286'><i><font color='green'>/* Get a C long long int from a Python long or Python int object.</font></i>
<a name='L1287'><i><font color='green'>   On overflow, returns -1 and sets *overflow to 1 or -1 depending</font></i>
<a name='L1288'><i><font color='green'>   on the sign of the result.  Otherwise *overflow is 0.</font></i>
<a name='L1289'><i><font color='green'></font></i>
<a name='L1290'><i><font color='green'>   For other errors (e.g., type error), returns -1 and sets an error</font></i>
<a name='L1291'><i><font color='green'>   condition.</font></i>
<a name='L1292'><i><font color='green'>*/</font></i>
<a name='L1293'>
<a name='L1294'><a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>
<a name='L1295'><a href='../R/3113.html' title='Multiple refered from 8 places.'>PyLong_AsLongLongAndOverflow</a>(PyObject *vv, <b>int</b> *overflow)
<a name='L1296'><font color='red'>{</font>
<a name='L1297'>    <i><font color='green'>/* This version by Tim Peters */</font></i>
<a name='L1298'>    <b>register</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v;
<a name='L1299'>    <b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> x, prev;
<a name='L1300'>    <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a> res;
<a name='L1301'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1302'>    <b>int</b> sign;
<a name='L1303'>    <b>int</b> do_decref = 0; <i><font color='green'>/* if nb_int was called */</font></i>
<a name='L1304'>
<a name='L1305'>    *<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a> = 0;
<a name='L1306'>    <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1307'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1308'>        <b>return</b> -1;
<a name='L1309'>    <font color='red'>}</font>
<a name='L1310'>
<a name='L1311'>    <b>if</b> (!PyLong_Check(vv)) <font color='red'>{</font>
<a name='L1312'>        <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> *nb;
<a name='L1313'>        nb = vv-&gt;ob_type-&gt;tp_as_number;
<a name='L1314'>        <b>if</b> (nb == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || nb-&gt;nb_int == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1315'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1316'>                            "an integer is required");
<a name='L1317'>            <b>return</b> -1;
<a name='L1318'>        <font color='red'>}</font>
<a name='L1319'>        vv = (*nb-&gt;nb_int) (vv);
<a name='L1320'>        <b>if</b> (vv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1321'>            <b>return</b> -1;
<a name='L1322'>        do_decref = 1;
<a name='L1323'>        <b>if</b> (!PyLong_Check(vv)) <font color='red'>{</font>
<a name='L1324'>            Py_DECREF(vv);
<a name='L1325'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1326'>                            "nb_int should return int object");
<a name='L1327'>            <b>return</b> -1;
<a name='L1328'>        <font color='red'>}</font>
<a name='L1329'>    <font color='red'>}</font>
<a name='L1330'>
<a name='L1331'>    res = -1;
<a name='L1332'>    v = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)vv;
<a name='L1333'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L1334'>
<a name='L1335'>    <b>switch</b> (i) <font color='red'>{</font>
<a name='L1336'>    <b>case</b> -1:
<a name='L1337'>        res = -(<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)v-&gt;ob_digit[0];
<a name='L1338'>        <b>break</b>;
<a name='L1339'>    <b>case</b> 0:
<a name='L1340'>        res = 0;
<a name='L1341'>        <b>break</b>;
<a name='L1342'>    <b>case</b> 1:
<a name='L1343'>        res = v-&gt;ob_digit[0];
<a name='L1344'>        <b>break</b>;
<a name='L1345'>    <b>default</b>:
<a name='L1346'>        sign = 1;
<a name='L1347'>        x = 0;
<a name='L1348'>        <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L1349'>            sign = -1;
<a name='L1350'>            i = -(i);
<a name='L1351'>        <font color='red'>}</font>
<a name='L1352'>        <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L1353'>            prev = x;
<a name='L1354'>            x = (x &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) + v-&gt;ob_digit[i];
<a name='L1355'>            <b>if</b> ((x &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) != prev) <font color='red'>{</font>
<a name='L1356'>                *<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a> = sign;
<a name='L1357'>                <b>goto</b> exit;
<a name='L1358'>            <font color='red'>}</font>
<a name='L1359'>        <font color='red'>}</font>
<a name='L1360'>        <i><font color='green'>/* Haven't lost any bits, but casting to long requires extra</font></i>
<a name='L1361'><i><font color='green'>         * care (see comment above).</font></i>
<a name='L1362'><i><font color='green'>         */</font></i>
<a name='L1363'>        <b>if</b> (x &lt;= (<b>unsigned</b> <a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)<a href='../D/2602.html' title='Multiple defined in 5 places.'>PY_LLONG_MAX</a>) <font color='red'>{</font>
<a name='L1364'>            res = (<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)x * sign;
<a name='L1365'>        <font color='red'>}</font>
<a name='L1366'>        <b>else</b> <b>if</b> (sign &lt; 0 &amp;&amp; x == <a href='../S/2799.html#L989' title='Defined at 989 in Objects/longobject.c.'>PY_ABS_LLONG_MIN</a>) <font color='red'>{</font>
<a name='L1367'>            res = <a href='../D/2603.html' title='Multiple defined in 5 places.'>PY_LLONG_MIN</a>;
<a name='L1368'>        <font color='red'>}</font>
<a name='L1369'>        <b>else</b> <font color='red'>{</font>
<a name='L1370'>            *<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a> = sign;
<a name='L1371'>            <i><font color='green'>/* res is already set to -1 */</font></i>
<a name='L1372'>        <font color='red'>}</font>
<a name='L1373'>    <font color='red'>}</font>
<a name='L1374'>  exit:
<a name='L1375'>    <b>if</b> (do_decref) <font color='red'>{</font>
<a name='L1376'>        Py_DECREF(vv);
<a name='L1377'>    <font color='red'>}</font>
<a name='L1378'>    <b>return</b> res;
<a name='L1379'><font color='red'>}</font>
<a name='L1380'>
<a name='L1381'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_LONG_LONG */</font></i>
<a name='L1382'>
<a name='L1383'><font color='darkred'>#define</font> <a href='../R/486.html' title='Multiple refered from 14 places.'>CHECK_BINOP</a>(v,w)                                \
<a name='L1384'>    <b>do</b> <font color='red'>{</font>                                                \
<a name='L1385'>        <b>if</b> (!PyLong_Check(v) || !PyLong_Check(w)) <font color='red'>{</font>     \
<a name='L1386'>            Py_INCREF(Py_NotImplemented);               \
<a name='L1387'>            <b>return</b> Py_NotImplemented;                   \
<a name='L1388'>        <font color='red'>}</font>                                               \
<a name='L1389'>    <font color='red'>}</font> <b>while</b>(0)
<a name='L1390'>
<a name='L1391'><i><font color='green'>/* bits_in_digit(d) returns the unique integer k such that 2**(k-1) &lt;= d &lt;</font></i>
<a name='L1392'><i><font color='green'>   2**k if d is nonzero, else 0. */</font></i>
<a name='L1393'>
<a name='L1394'><b>static</b> <b>const</b> <b>unsigned</b> <b>char</b> BitLengthTable[32] = <font color='red'>{</font>
<a name='L1395'>    0, 1, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4,
<a name='L1396'>    5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5
<a name='L1397'><font color='red'>}</font>;
<a name='L1398'>
<a name='L1399'><b>static</b> <b>int</b>
<a name='L1400'><a href='../R/6243.html' title='Multiple refered from 5 places.'>bits_in_digit</a>(digit d)
<a name='L1401'><font color='red'>{</font>
<a name='L1402'>    <b>int</b> d_bits = 0;
<a name='L1403'>    <b>while</b> (d &gt;= 32) <font color='red'>{</font>
<a name='L1404'>        d_bits += 6;
<a name='L1405'>        d &gt;&gt;= 6;
<a name='L1406'>    <font color='red'>}</font>
<a name='L1407'>    d_bits += (<b>int</b>)BitLengthTable[d];
<a name='L1408'>    <b>return</b> d_bits;
<a name='L1409'><font color='red'>}</font>
<a name='L1410'>
<a name='L1411'><i><font color='green'>/* x[0:m] and y[0:n] are digit vectors, LSD first, m &gt;= n required.  x[0:n]</font></i>
<a name='L1412'><i><font color='green'> * is modified in place, by adding y to it.  Carries are propagated as far as</font></i>
<a name='L1413'><i><font color='green'> * x[m-1], and the remaining carry (0 or 1) is returned.</font></i>
<a name='L1414'><i><font color='green'> */</font></i>
<a name='L1415'><b>static</b> <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>
<a name='L1416'><a href='../R/11238.html' title='Multiple refered from 2 places.'>v_iadd</a>(digit *x, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> m, digit *y, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n)
<a name='L1417'><font color='red'>{</font>
<a name='L1418'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1419'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> carry = 0;
<a name='L1420'>
<a name='L1421'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(m &gt;= n);
<a name='L1422'>    <b>for</b> (i = 0; i &lt; n; ++i) <font color='red'>{</font>
<a name='L1423'>        carry += x[i] + y[i];
<a name='L1424'>        x[i] = carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L1425'>        carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1426'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>((carry &amp; 1) == carry);
<a name='L1427'>    <font color='red'>}</font>
<a name='L1428'>    <b>for</b> (; carry &amp;&amp; i &lt; m; ++i) <font color='red'>{</font>
<a name='L1429'>        carry += x[i];
<a name='L1430'>        x[i] = carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L1431'>        carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1432'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>((carry &amp; 1) == carry);
<a name='L1433'>    <font color='red'>}</font>
<a name='L1434'>    <b>return</b> carry;
<a name='L1435'><font color='red'>}</font>
<a name='L1436'>
<a name='L1437'><i><font color='green'>/* x[0:m] and y[0:n] are digit vectors, LSD first, m &gt;= n required.  x[0:n]</font></i>
<a name='L1438'><i><font color='green'> * is modified in place, by subtracting y from it.  Borrows are propagated as</font></i>
<a name='L1439'><i><font color='green'> * far as x[m-1], and the remaining borrow (0 or 1) is returned.</font></i>
<a name='L1440'><i><font color='green'> */</font></i>
<a name='L1441'><b>static</b> <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>
<a name='L1442'><a href='../R/11239.html' title='Multiple refered from 2 places.'>v_isub</a>(digit *x, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> m, digit *y, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n)
<a name='L1443'><font color='red'>{</font>
<a name='L1444'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1445'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> borrow = 0;
<a name='L1446'>
<a name='L1447'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(m &gt;= n);
<a name='L1448'>    <b>for</b> (i = 0; i &lt; n; ++i) <font color='red'>{</font>
<a name='L1449'>        borrow = x[i] - y[i] - borrow;
<a name='L1450'>        x[i] = borrow &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L1451'>        borrow &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1452'>        borrow &amp;= 1;            <i><font color='green'>/* keep only 1 sign bit */</font></i>
<a name='L1453'>    <font color='red'>}</font>
<a name='L1454'>    <b>for</b> (; borrow &amp;&amp; i &lt; m; ++i) <font color='red'>{</font>
<a name='L1455'>        borrow = x[i] - borrow;
<a name='L1456'>        x[i] = borrow &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L1457'>        borrow &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1458'>        borrow &amp;= 1;
<a name='L1459'>    <font color='red'>}</font>
<a name='L1460'>    <b>return</b> borrow;
<a name='L1461'><font color='red'>}</font>
<a name='L1462'>
<a name='L1463'><i><font color='green'>/* Shift digit vector a[0:m] d bits left, with 0 &lt;= d &lt; PyLong_SHIFT.  Put</font></i>
<a name='L1464'><i><font color='green'> * result in z[0:m], and return the d bits shifted out of the top.</font></i>
<a name='L1465'><i><font color='green'> */</font></i>
<a name='L1466'><b>static</b> <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>
<a name='L1467'><a href='../R/11240.html' title='Multiple refered from 4 places.'>v_lshift</a>(digit *z, digit *a, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> m, <b>int</b> d)
<a name='L1468'><font color='red'>{</font>
<a name='L1469'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1470'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> carry = 0;
<a name='L1471'>
<a name='L1472'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0 &lt;= d &amp;&amp; d &lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L1473'>    <b>for</b> (i=0; i &lt; m; i++) <font color='red'>{</font>
<a name='L1474'>        <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> acc = (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)a[i] &lt;&lt; d | carry;
<a name='L1475'>        z[i] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)acc &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L1476'>        carry = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(acc &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L1477'>    <font color='red'>}</font>
<a name='L1478'>    <b>return</b> carry;
<a name='L1479'><font color='red'>}</font>
<a name='L1480'>
<a name='L1481'><i><font color='green'>/* Shift digit vector a[0:m] d bits right, with 0 &lt;= d &lt; PyLong_SHIFT.  Put</font></i>
<a name='L1482'><i><font color='green'> * result in z[0:m], and return the d bits shifted out of the bottom.</font></i>
<a name='L1483'><i><font color='green'> */</font></i>
<a name='L1484'><b>static</b> <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>
<a name='L1485'><a href='../R/11241.html' title='Multiple refered from 3 places.'>v_rshift</a>(digit *z, digit *a, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> m, <b>int</b> d)
<a name='L1486'><font color='red'>{</font>
<a name='L1487'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L1488'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> carry = 0;
<a name='L1489'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> mask = ((<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)1 &lt;&lt; d) - 1U;
<a name='L1490'>
<a name='L1491'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0 &lt;= d &amp;&amp; d &lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L1492'>    <b>for</b> (i=m; i-- &gt; 0;) <font color='red'>{</font>
<a name='L1493'>        <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> acc = (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)carry &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> | a[i];
<a name='L1494'>        carry = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)acc &amp; mask;
<a name='L1495'>        z[i] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(acc &gt;&gt; d);
<a name='L1496'>    <font color='red'>}</font>
<a name='L1497'>    <b>return</b> carry;
<a name='L1498'><font color='red'>}</font>
<a name='L1499'>
<a name='L1500'><i><font color='green'>/* Divide long pin, w/ size digits, by non-zero digit n, storing quotient</font></i>
<a name='L1501'><i><font color='green'>   in pout, and returning the remainder.  pin and pout point at the LSD.</font></i>
<a name='L1502'><i><font color='green'>   It's OK for pin == pout on entry, which saves oodles of mallocs/frees in</font></i>
<a name='L1503'><i><font color='green'>   _PyLong_Format, but that should be done with great care since longs are</font></i>
<a name='L1504'><i><font color='green'>   immutable. */</font></i>
<a name='L1505'>
<a name='L1506'><b>static</b> <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>
<a name='L1507'><a href='../R/8404.html' title='Multiple refered from 2 places.'>inplace_divrem1</a>(digit *pout, digit *pin, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, digit n)
<a name='L1508'><font color='red'>{</font>
<a name='L1509'>    <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> rem = 0;
<a name='L1510'>
<a name='L1511'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(n &gt; 0 &amp;&amp; n &lt;= <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L1512'>    pin += size;
<a name='L1513'>    pout += size;
<a name='L1514'>    <b>while</b> (--size &gt;= 0) <font color='red'>{</font>
<a name='L1515'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> hi;
<a name='L1516'>        rem = (rem &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) | *--pin;
<a name='L1517'>        *--pout = hi = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(rem / n);
<a name='L1518'>        rem -= (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)hi * n;
<a name='L1519'>    <font color='red'>}</font>
<a name='L1520'>    <b>return</b> (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)rem;
<a name='L1521'><font color='red'>}</font>
<a name='L1522'>
<a name='L1523'><i><font color='green'>/* Divide a long integer by a digit, returning both the quotient</font></i>
<a name='L1524'><i><font color='green'>   (as function result) and the remainder (through *prem).</font></i>
<a name='L1525'><i><font color='green'>   The sign of a is ignored; n should not be zero. */</font></i>
<a name='L1526'>
<a name='L1527'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L1528'><a href='../S/2799.html#L2199' title='Refered from 2199 in Objects/longobject.c.'>divrem1</a>(PyLongObject *a, digit n, digit *prem)
<a name='L1529'><font color='red'>{</font>
<a name='L1530'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L1531'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L1532'>
<a name='L1533'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(n &gt; 0 &amp;&amp; n &lt;= <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L1534'>    z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size);
<a name='L1535'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1536'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1537'>    *prem = <a href='../S/2799.html#L1507' title='Defined at 1507 in Objects/longobject.c.'>inplace_divrem1</a>(z-&gt;ob_digit, a-&gt;ob_digit, size, n);
<a name='L1538'>    <b>return</b> <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z);
<a name='L1539'><font color='red'>}</font>
<a name='L1540'>
<a name='L1541'><i><font color='green'>/* Convert a long integer to a base 10 string.  Returns a new non-shared</font></i>
<a name='L1542'><i><font color='green'>   string.  (Return value is non-shared so that callers can modify the</font></i>
<a name='L1543'><i><font color='green'>   returned value if necessary.) */</font></i>
<a name='L1544'>
<a name='L1545'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1546'><a href='../R/8795.html' title='Multiple refered from 3 places.'>long_to_decimal_string</a>(PyObject *aa)
<a name='L1547'><font color='red'>{</font>
<a name='L1548'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *scratch, *a;
<a name='L1549'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str;
<a name='L1550'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size, strlen, size_a, i, j;
<a name='L1551'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *pout, *pin, rem, tenpow;
<a name='L1552'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p;
<a name='L1553'>    <b>int</b> negative;
<a name='L1554'>
<a name='L1555'>    a = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)aa;
<a name='L1556'>    <b>if</b> (a == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyLong_Check(a)) <font color='red'>{</font>
<a name='L1557'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1558'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1559'>    <font color='red'>}</font>
<a name='L1560'>    size_a = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L1561'>    negative = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0;
<a name='L1562'>
<a name='L1563'>    <i><font color='green'>/* quick and dirty upper bound for the number of digits</font></i>
<a name='L1564'><i><font color='green'>       required to express a in base _PyLong_DECIMAL_BASE:</font></i>
<a name='L1565'><i><font color='green'></font></i>
<a name='L1566'><i><font color='green'>         #digits = 1 + floor(log2(a) / log2(_PyLong_DECIMAL_BASE))</font></i>
<a name='L1567'><i><font color='green'></font></i>
<a name='L1568'><i><font color='green'>       But log2(a) &lt; size_a * PyLong_SHIFT, and</font></i>
<a name='L1569'><i><font color='green'>       log2(_PyLong_DECIMAL_BASE) = log2(10) * _PyLong_DECIMAL_SHIFT</font></i>
<a name='L1570'><i><font color='green'>                                  &gt; 3 * _PyLong_DECIMAL_SHIFT</font></i>
<a name='L1571'><i><font color='green'>    */</font></i>
<a name='L1572'>    <b>if</b> (size_a &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) <font color='red'>{</font>
<a name='L1573'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L1574'>                        "long is too large to format");
<a name='L1575'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1576'>    <font color='red'>}</font>
<a name='L1577'>    <i><font color='green'>/* the expression size_a * PyLong_SHIFT is now safe from overflow */</font></i>
<a name='L1578'>    size = 1 + size_a * <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> / (3 * <a href='../D/6120.html' title='Multiple defined in 2 places.'>_PyLong_DECIMAL_SHIFT</a>);
<a name='L1579'>    scratch = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size);
<a name='L1580'>    <b>if</b> (scratch == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1581'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1582'>
<a name='L1583'>    <i><font color='green'>/* convert array of base _PyLong_BASE digits in pin to an array of</font></i>
<a name='L1584'><i><font color='green'>       base _PyLong_DECIMAL_BASE digits in pout, following Knuth (TAOCP,</font></i>
<a name='L1585'><i><font color='green'>       Volume 2 (3rd edn), section 4.4, Method 1b). */</font></i>
<a name='L1586'>    pin = a-&gt;ob_digit;
<a name='L1587'>    pout = scratch-&gt;ob_digit;
<a name='L1588'>    size = 0;
<a name='L1589'>    <b>for</b> (i = size_a; --i &gt;= 0; ) <font color='red'>{</font>
<a name='L1590'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> hi = pin[i];
<a name='L1591'>        <b>for</b> (j = 0; j &lt; size; j++) <font color='red'>{</font>
<a name='L1592'>            <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> z = (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)pout[j] &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> | hi;
<a name='L1593'>            hi = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(z / <a href='../D/6119.html' title='Multiple defined in 2 places.'>_PyLong_DECIMAL_BASE</a>);
<a name='L1594'>            pout[j] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(z - (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)hi *
<a name='L1595'>                              <a href='../D/6119.html' title='Multiple defined in 2 places.'>_PyLong_DECIMAL_BASE</a>);
<a name='L1596'>        <font color='red'>}</font>
<a name='L1597'>        <b>while</b> (hi) <font color='red'>{</font>
<a name='L1598'>            pout[size++] = hi % <a href='../D/6119.html' title='Multiple defined in 2 places.'>_PyLong_DECIMAL_BASE</a>;
<a name='L1599'>            hi /= <a href='../D/6119.html' title='Multiple defined in 2 places.'>_PyLong_DECIMAL_BASE</a>;
<a name='L1600'>        <font color='red'>}</font>
<a name='L1601'>        <i><font color='green'>/* check for keyboard interrupt */</font></i>
<a name='L1602'>        <a href='../S/2799.html#L97' title='Defined at 97 in Objects/longobject.c.'>SIGCHECK</a>(<font color='red'>{</font>
<a name='L1603'>                Py_DECREF(scratch);
<a name='L1604'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1605'>            <font color='red'>}</font>);
<a name='L1606'>    <font color='red'>}</font>
<a name='L1607'>    <i><font color='green'>/* pout should have at least one digit, so that the case when a = 0</font></i>
<a name='L1608'><i><font color='green'>       works correctly */</font></i>
<a name='L1609'>    <b>if</b> (size == 0)
<a name='L1610'>        pout[size++] = 0;
<a name='L1611'>
<a name='L1612'>    <i><font color='green'>/* calculate exact length of output string, and allocate */</font></i>
<a name='L1613'>    strlen = negative + 1 + (size - 1) * <a href='../D/6120.html' title='Multiple defined in 2 places.'>_PyLong_DECIMAL_SHIFT</a>;
<a name='L1614'>    tenpow = 10;
<a name='L1615'>    rem = pout[size-1];
<a name='L1616'>    <b>while</b> (rem &gt;= tenpow) <font color='red'>{</font>
<a name='L1617'>        tenpow *= 10;
<a name='L1618'>        strlen++;
<a name='L1619'>    <font color='red'>}</font>
<a name='L1620'>    str = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, strlen);
<a name='L1621'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1622'>        Py_DECREF(scratch);
<a name='L1623'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1624'>    <font color='red'>}</font>
<a name='L1625'>
<a name='L1626'>    <i><font color='green'>/* fill the string right-to-left */</font></i>
<a name='L1627'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str) + strlen;
<a name='L1628'>    *p = '\0';
<a name='L1629'>    <i><font color='green'>/* pout[0] through pout[size-2] contribute exactly</font></i>
<a name='L1630'><i><font color='green'>       _PyLong_DECIMAL_SHIFT digits each */</font></i>
<a name='L1631'>    <b>for</b> (i=0; i &lt; size - 1; i++) <font color='red'>{</font>
<a name='L1632'>        rem = pout[i];
<a name='L1633'>        <b>for</b> (j = 0; j &lt; <a href='../D/6120.html' title='Multiple defined in 2 places.'>_PyLong_DECIMAL_SHIFT</a>; j++) <font color='red'>{</font>
<a name='L1634'>            *--p = '0' + rem % 10;
<a name='L1635'>            rem /= 10;
<a name='L1636'>        <font color='red'>}</font>
<a name='L1637'>    <font color='red'>}</font>
<a name='L1638'>    <i><font color='green'>/* pout[size-1]: always produce at least one decimal digit */</font></i>
<a name='L1639'>    rem = pout[i];
<a name='L1640'>    <b>do</b> <font color='red'>{</font>
<a name='L1641'>        *--p = '0' + rem % 10;
<a name='L1642'>        rem /= 10;
<a name='L1643'>    <font color='red'>}</font> <b>while</b> (rem != 0);
<a name='L1644'>
<a name='L1645'>    <i><font color='green'>/* and sign */</font></i>
<a name='L1646'>    <b>if</b> (negative)
<a name='L1647'>        *--p = '-';
<a name='L1648'>
<a name='L1649'>    <i><font color='green'>/* check we've counted correctly */</font></i>
<a name='L1650'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(p == <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str));
<a name='L1651'>    Py_DECREF(scratch);
<a name='L1652'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)str;
<a name='L1653'><font color='red'>}</font>
<a name='L1654'>
<a name='L1655'><i><font color='green'>/* Convert a long int object to a string, using a given conversion base,</font></i>
<a name='L1656'><i><font color='green'>   which should be one of 2, 8, 10 or 16.  Return a string object.</font></i>
<a name='L1657'><i><font color='green'>   If base is 2, 8 or 16, add the proper prefix '0b', '0o' or '0x'. */</font></i>
<a name='L1658'>
<a name='L1659'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1660'><a href='../R/5442.html' title='Multiple refered from 3 places.'>_PyLong_Format</a>(PyObject *aa, <b>int</b> base)
<a name='L1661'><font color='red'>{</font>
<a name='L1662'>    <b>register</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *a = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)aa;
<a name='L1663'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *str;
<a name='L1664'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, sz;
<a name='L1665'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_a;
<a name='L1666'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *p, sign = '\0';
<a name='L1667'>    <b>int</b> bits;
<a name='L1668'>
<a name='L1669'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(base == 2 || base == 8 || base == 10 || base == 16);
<a name='L1670'>    <b>if</b> (base == 10)
<a name='L1671'>        <b>return</b> <a href='../S/2799.html#L1546' title='Defined at 1546 in Objects/longobject.c.'>long_to_decimal_string</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)a);
<a name='L1672'>
<a name='L1673'>    <b>if</b> (a == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyLong_Check(a)) <font color='red'>{</font>
<a name='L1674'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L1675'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1676'>    <font color='red'>}</font>
<a name='L1677'>    size_a = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L1678'>
<a name='L1679'>    <i><font color='green'>/* Compute a rough upper bound for the length of the string */</font></i>
<a name='L1680'>    <b>switch</b> (base) <font color='red'>{</font>
<a name='L1681'>    <b>case</b> 16:
<a name='L1682'>        bits = 4;
<a name='L1683'>        <b>break</b>;
<a name='L1684'>    <b>case</b> 8:
<a name='L1685'>        bits = 3;
<a name='L1686'>        <b>break</b>;
<a name='L1687'>    <b>case</b> 2:
<a name='L1688'>        bits = 1;
<a name='L1689'>        <b>break</b>;
<a name='L1690'>    <b>default</b>:
<a name='L1691'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0); <i><font color='green'>/* shouldn't ever get here */</font></i>
<a name='L1692'>        bits = 0; <i><font color='green'>/* to silence gcc warning */</font></i>
<a name='L1693'>    <font color='red'>}</font>
<a name='L1694'>    <i><font color='green'>/* compute length of output string: allow 2 characters for prefix and</font></i>
<a name='L1695'><i><font color='green'>       1 for possible '-' sign. */</font></i>
<a name='L1696'>    <b>if</b> (size_a &gt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - 3) / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) <font color='red'>{</font>
<a name='L1697'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L1698'>                        "int is too large to format");
<a name='L1699'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1700'>    <font color='red'>}</font>
<a name='L1701'>    <i><font color='green'>/* now size_a * PyLong_SHIFT + 3 &lt;= PY_SSIZE_T_MAX, so the RHS below</font></i>
<a name='L1702'><i><font color='green'>       is safe from overflow */</font></i>
<a name='L1703'>    sz = 3 + (size_a * <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + (bits - 1)) / bits;
<a name='L1704'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(sz &gt;= 0);
<a name='L1705'>    str = <a href='../D/4014.html' title='Multiple defined in 3 places.'>PyUnicode_FromUnicode</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, sz);
<a name='L1706'>    <b>if</b> (str == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1707'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1708'>    p = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str) + sz;
<a name='L1709'>    *p = '\0';
<a name='L1710'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0)
<a name='L1711'>        sign = '-';
<a name='L1712'>
<a name='L1713'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) == 0) <font color='red'>{</font>
<a name='L1714'>        *--p = '0';
<a name='L1715'>    <font color='red'>}</font>
<a name='L1716'>    <b>else</b> <font color='red'>{</font>
<a name='L1717'>        <i><font color='green'>/* JRH: special case for power-of-2 bases */</font></i>
<a name='L1718'>        <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> = 0;
<a name='L1719'>        <b>int</b> accumbits = 0;              <i><font color='green'>/* # of bits in accum */</font></i>
<a name='L1720'>        <b>for</b> (i = 0; i &lt; size_a; ++i) <font color='red'>{</font>
<a name='L1721'>            <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> |= (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)a-&gt;ob_digit[i] &lt;&lt; accumbits;
<a name='L1722'>            accumbits += <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1723'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(accumbits &gt;= bits);
<a name='L1724'>            <b>do</b> <font color='red'>{</font>
<a name='L1725'>                <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> cdigit;
<a name='L1726'>                cdigit = (<a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a>)(<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &amp; (base - 1));
<a name='L1727'>                cdigit += (cdigit &lt; 10) ? '0' : 'a'-10;
<a name='L1728'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(p &gt; <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str));
<a name='L1729'>                *--p = cdigit;
<a name='L1730'>                accumbits -= bits;
<a name='L1731'>                <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &gt;&gt;= bits;
<a name='L1732'>            <font color='red'>}</font> <b>while</b> (i &lt; size_a-1 ? accumbits &gt;= bits : <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &gt; 0);
<a name='L1733'>        <font color='red'>}</font>
<a name='L1734'>    <font color='red'>}</font>
<a name='L1735'>
<a name='L1736'>    <b>if</b> (base == 16)
<a name='L1737'>        *--p = 'x';
<a name='L1738'>    <b>else</b> <b>if</b> (base == 8)
<a name='L1739'>        *--p = 'o';
<a name='L1740'>    <b>else</b> <i><font color='green'>/* (base == 2) */</font></i>
<a name='L1741'>        *--p = 'b';
<a name='L1742'>    *--p = '0';
<a name='L1743'>    <b>if</b> (sign)
<a name='L1744'>        *--p = sign;
<a name='L1745'>    <b>if</b> (p != <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str)) <font color='red'>{</font>
<a name='L1746'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *q = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str);
<a name='L1747'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(p &gt; q);
<a name='L1748'>        <b>do</b> <font color='red'>{</font>
<a name='L1749'>        <font color='red'>}</font> <b>while</b> ((*q++ = *p++) != '\0');
<a name='L1750'>        q--;
<a name='L1751'>        <b>if</b> (<a href='../D/4031.html' title='Multiple defined in 3 places.'>PyUnicode_Resize</a>(&amp;str,(<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>) (q -
<a name='L1752'>                                        <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(str)))) <font color='red'>{</font>
<a name='L1753'>            Py_DECREF(str);
<a name='L1754'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1755'>        <font color='red'>}</font>
<a name='L1756'>    <font color='red'>}</font>
<a name='L1757'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)str;
<a name='L1758'><font color='red'>}</font>
<a name='L1759'>
<a name='L1760'><i><font color='green'>/* Table of digit values for 8-bit string -&gt; integer conversion.</font></i>
<a name='L1761'><i><font color='green'> * '0' maps to 0, ..., '9' maps to 9.</font></i>
<a name='L1762'><i><font color='green'> * 'a' and 'A' map to 10, ..., 'z' and 'Z' map to 35.</font></i>
<a name='L1763'><i><font color='green'> * All other indices map to 37.</font></i>
<a name='L1764'><i><font color='green'> * Note that when converting a base B string, a char c is a legitimate</font></i>
<a name='L1765'><i><font color='green'> * base B digit iff _PyLong_DigitValue[Py_CHARPyLong_MASK(c)] &lt; B.</font></i>
<a name='L1766'><i><font color='green'> */</font></i>
<a name='L1767'><b>unsigned</b> <b>char</b> _PyLong_DigitValue[256] = <font color='red'>{</font>
<a name='L1768'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1769'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1770'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1771'>    0,  1,  2,  3,  4,  5,  6,  7,  8,  9,  37, 37, 37, 37, 37, 37,
<a name='L1772'>    37, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
<a name='L1773'>    25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 37, 37, 37, 37, 37,
<a name='L1774'>    37, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
<a name='L1775'>    25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 37, 37, 37, 37, 37,
<a name='L1776'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1777'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1778'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1779'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1780'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1781'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1782'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1783'>    37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37, 37,
<a name='L1784'><font color='red'>}</font>;
<a name='L1785'>
<a name='L1786'><i><font color='green'>/* *str points to the first digit in a string of base `base` digits.  base</font></i>
<a name='L1787'><i><font color='green'> * is a power of 2 (2, 4, 8, 16, or 32).  *str is set to point to the first</font></i>
<a name='L1788'><i><font color='green'> * non-digit (which may be *str!).  A normalized long is returned.</font></i>
<a name='L1789'><i><font color='green'> * The point to this routine is that it takes time linear in the number of</font></i>
<a name='L1790'><i><font color='green'> * string characters.</font></i>
<a name='L1791'><i><font color='green'> */</font></i>
<a name='L1792'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L1793'><a href='../S/2799.html#L1898' title='Refered from 1898 in Objects/longobject.c.'>long_from_binary_base</a>(<b>char</b> **str, <b>int</b> base)
<a name='L1794'><font color='red'>{</font>
<a name='L1795'>    <b>char</b> *p = *str;
<a name='L1796'>    <b>char</b> *start = p;
<a name='L1797'>    <b>int</b> bits_per_char;
<a name='L1798'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n;
<a name='L1799'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L1800'>    <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a>;
<a name='L1801'>    <b>int</b> bits_in_accum;
<a name='L1802'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *pdigit;
<a name='L1803'>
<a name='L1804'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(base &gt;= 2 &amp;&amp; base &lt;= 32 &amp;&amp; (base &amp; (base - 1)) == 0);
<a name='L1805'>    n = base;
<a name='L1806'>    <b>for</b> (bits_per_char = -1; n; ++bits_per_char)
<a name='L1807'>        n &gt;&gt;= 1;
<a name='L1808'>    <i><font color='green'>/* n &lt;- total # of bits needed, while setting p to end-of-string */</font></i>
<a name='L1809'>    <b>while</b> (_PyLong_DigitValue[<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*p)] &lt; base)
<a name='L1810'>        ++p;
<a name='L1811'>    *str = p;
<a name='L1812'>    <i><font color='green'>/* n &lt;- # of Python digits needed, = ceiling(n/PyLong_SHIFT). */</font></i>
<a name='L1813'>    n = (p - start) * bits_per_char + <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> - 1;
<a name='L1814'>    <b>if</b> (n / bits_per_char &lt; p - start) <font color='red'>{</font>
<a name='L1815'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1816'>                        "int string too large to convert");
<a name='L1817'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1818'>    <font color='red'>}</font>
<a name='L1819'>    n = n / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1820'>    z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(n);
<a name='L1821'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1822'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1823'>    <i><font color='green'>/* Read string from right, and fill in long from left; i.e.,</font></i>
<a name='L1824'><i><font color='green'>     * from least to most significant in both.</font></i>
<a name='L1825'><i><font color='green'>     */</font></i>
<a name='L1826'>    <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> = 0;
<a name='L1827'>    bits_in_accum = 0;
<a name='L1828'>    pdigit = z-&gt;ob_digit;
<a name='L1829'>    <b>while</b> (--p &gt;= start) <font color='red'>{</font>
<a name='L1830'>        <b>int</b> k = (<b>int</b>)_PyLong_DigitValue[<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*p)];
<a name='L1831'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(k &gt;= 0 &amp;&amp; k &lt; base);
<a name='L1832'>        <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> |= (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)k &lt;&lt; bits_in_accum;
<a name='L1833'>        bits_in_accum += bits_per_char;
<a name='L1834'>        <b>if</b> (bits_in_accum &gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) <font color='red'>{</font>
<a name='L1835'>            *pdigit++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L1836'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(pdigit - z-&gt;ob_digit &lt;= n);
<a name='L1837'>            <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1838'>            bits_in_accum -= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L1839'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(bits_in_accum &lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L1840'>        <font color='red'>}</font>
<a name='L1841'>    <font color='red'>}</font>
<a name='L1842'>    <b>if</b> (bits_in_accum) <font color='red'>{</font>
<a name='L1843'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(bits_in_accum &lt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L1844'>        *pdigit++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a>;
<a name='L1845'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(pdigit - z-&gt;ob_digit &lt;= n);
<a name='L1846'>    <font color='red'>}</font>
<a name='L1847'>    <b>while</b> (pdigit - z-&gt;ob_digit &lt; n)
<a name='L1848'>        *pdigit++ = 0;
<a name='L1849'>    <b>return</b> <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z);
<a name='L1850'><font color='red'>}</font>
<a name='L1851'>
<a name='L1852'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1853'><a href='../R/3131.html' title='Multiple refered from 19 places.'>PyLong_FromString</a>(<b>char</b> *str, <b>char</b> **pend, <b>int</b> base)
<a name='L1854'><font color='red'>{</font>
<a name='L1855'>    <b>int</b> sign = 1, error_if_nonzero = 0;
<a name='L1856'>    <b>char</b> *start, *orig_str = str;
<a name='L1857'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1858'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *strobj;
<a name='L1859'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> slen;
<a name='L1860'>
<a name='L1861'>    <b>if</b> ((base != 0 &amp;&amp; base &lt; 2) || base &gt; 36) <font color='red'>{</font>
<a name='L1862'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1863'>                        "int() arg 2 must be &gt;= 2 and &lt;= 36");
<a name='L1864'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1865'>    <font color='red'>}</font>
<a name='L1866'>    <b>while</b> (*str != '\0' &amp;&amp; <a href='../D/9346.html' title='Multiple defined in 2 places.'>isspace</a>(<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*str)))
<a name='L1867'>        str++;
<a name='L1868'>    <b>if</b> (*str == '+')
<a name='L1869'>        ++str;
<a name='L1870'>    <b>else</b> <b>if</b> (*str == '-') <font color='red'>{</font>
<a name='L1871'>        ++str;
<a name='L1872'>        sign = -1;
<a name='L1873'>    <font color='red'>}</font>
<a name='L1874'>    <b>if</b> (base == 0) <font color='red'>{</font>
<a name='L1875'>        <b>if</b> (str[0] != '0')
<a name='L1876'>            base = 10;
<a name='L1877'>        <b>else</b> <b>if</b> (str[1] == 'x' || str[1] == 'X')
<a name='L1878'>            base = 16;
<a name='L1879'>        <b>else</b> <b>if</b> (str[1] == 'o' || str[1] == 'O')
<a name='L1880'>            base = 8;
<a name='L1881'>        <b>else</b> <b>if</b> (str[1] == 'b' || str[1] == 'B')
<a name='L1882'>            base = 2;
<a name='L1883'>        <b>else</b> <font color='red'>{</font>
<a name='L1884'>            <i><font color='green'>/* "old" (C-style) octal literal, now invalid.</font></i>
<a name='L1885'><i><font color='green'>               it might still be zero though */</font></i>
<a name='L1886'>            error_if_nonzero = 1;
<a name='L1887'>            base = 10;
<a name='L1888'>        <font color='red'>}</font>
<a name='L1889'>    <font color='red'>}</font>
<a name='L1890'>    <b>if</b> (str[0] == '0' &amp;&amp;
<a name='L1891'>        ((base == 16 &amp;&amp; (str[1] == 'x' || str[1] == 'X')) ||
<a name='L1892'>         (base == 8  &amp;&amp; (str[1] == 'o' || str[1] == 'O')) ||
<a name='L1893'>         (base == 2  &amp;&amp; (str[1] == 'b' || str[1] == 'B'))))
<a name='L1894'>        str += 2;
<a name='L1895'>
<a name='L1896'>    start = str;
<a name='L1897'>    <b>if</b> ((base &amp; (base - 1)) == 0)
<a name='L1898'>        z = <a href='../S/2799.html#L1793' title='Defined at 1793 in Objects/longobject.c.'>long_from_binary_base</a>(&amp;str, base);
<a name='L1899'>    <b>else</b> <font color='red'>{</font>
<a name='L1900'><i><font color='green'>/***</font></i>
<a name='L1901'><i><font color='green'>Binary bases can be converted in time linear in the number of digits, because</font></i>
<a name='L1902'><i><font color='green'>Python's representation base is binary.  Other bases (including decimal!) use</font></i>
<a name='L1903'><i><font color='green'>the simple quadratic-time algorithm below, complicated by some speed tricks.</font></i>
<a name='L1904'><i><font color='green'></font></i>
<a name='L1905'><i><font color='green'>First some math:  the largest integer that can be expressed in N base-B digits</font></i>
<a name='L1906'><i><font color='green'>is B**N-1.  Consequently, if we have an N-digit input in base B, the worst-</font></i>
<a name='L1907'><i><font color='green'>case number of Python digits needed to hold it is the smallest integer n s.t.</font></i>
<a name='L1908'><i><font color='green'></font></i>
<a name='L1909'><i><font color='green'>    BASE**n-1 &gt;= B**N-1  [or, adding 1 to both sides]</font></i>
<a name='L1910'><i><font color='green'>    BASE**n &gt;= B**N      [taking logs to base BASE]</font></i>
<a name='L1911'><i><font color='green'>    n &gt;= log(B**N)/log(BASE) = N * log(B)/log(BASE)</font></i>
<a name='L1912'><i><font color='green'></font></i>
<a name='L1913'><i><font color='green'>The static array log_base_BASE[base] == log(base)/log(BASE) so we can compute</font></i>
<a name='L1914'><i><font color='green'>this quickly.  A Python long with that much space is reserved near the start,</font></i>
<a name='L1915'><i><font color='green'>and the result is computed into it.</font></i>
<a name='L1916'><i><font color='green'></font></i>
<a name='L1917'><i><font color='green'>The input string is actually treated as being in base base**i (i.e., i digits</font></i>
<a name='L1918'><i><font color='green'>are processed at a time), where two more static arrays hold:</font></i>
<a name='L1919'><i><font color='green'></font></i>
<a name='L1920'><i><font color='green'>    convwidth_base[base] = the largest integer i such that base**i &lt;= BASE</font></i>
<a name='L1921'><i><font color='green'>    convmultmax_base[base] = base ** convwidth_base[base]</font></i>
<a name='L1922'><i><font color='green'></font></i>
<a name='L1923'><i><font color='green'>The first of these is the largest i such that i consecutive input digits</font></i>
<a name='L1924'><i><font color='green'>must fit in a single Python digit.  The second is effectively the input</font></i>
<a name='L1925'><i><font color='green'>base we're really using.</font></i>
<a name='L1926'><i><font color='green'></font></i>
<a name='L1927'><i><font color='green'>Viewing the input as a sequence &lt;c0, c1, ..., c_n-1&gt; of digits in base</font></i>
<a name='L1928'><i><font color='green'>convmultmax_base[base], the result is "simply"</font></i>
<a name='L1929'><i><font color='green'></font></i>
<a name='L1930'><i><font color='green'>   (((c0*B + c1)*B + c2)*B + c3)*B + ... ))) + c_n-1</font></i>
<a name='L1931'><i><font color='green'></font></i>
<a name='L1932'><i><font color='green'>where B = convmultmax_base[base].</font></i>
<a name='L1933'><i><font color='green'></font></i>
<a name='L1934'><i><font color='green'>Error analysis:  as above, the number of Python digits `n` needed is worst-</font></i>
<a name='L1935'><i><font color='green'>case</font></i>
<a name='L1936'><i><font color='green'></font></i>
<a name='L1937'><i><font color='green'>    n &gt;= N * log(B)/log(BASE)</font></i>
<a name='L1938'><i><font color='green'></font></i>
<a name='L1939'><i><font color='green'>where `N` is the number of input digits in base `B`.  This is computed via</font></i>
<a name='L1940'><i><font color='green'></font></i>
<a name='L1941'><i><font color='green'>    size_z = (Py_ssize_t)((scan - str) * log_base_BASE[base]) + 1;</font></i>
<a name='L1942'><i><font color='green'></font></i>
<a name='L1943'><i><font color='green'>below.  Two numeric concerns are how much space this can waste, and whether</font></i>
<a name='L1944'><i><font color='green'>the computed result can be too small.  To be concrete, assume BASE = 2**15,</font></i>
<a name='L1945'><i><font color='green'>which is the default (and it's unlikely anyone changes that).</font></i>
<a name='L1946'><i><font color='green'></font></i>
<a name='L1947'><i><font color='green'>Waste isn't a problem:  provided the first input digit isn't 0, the difference</font></i>
<a name='L1948'><i><font color='green'>between the worst-case input with N digits and the smallest input with N</font></i>
<a name='L1949'><i><font color='green'>digits is about a factor of B, but B is small compared to BASE so at most</font></i>
<a name='L1950'><i><font color='green'>one allocated Python digit can remain unused on that count.  If</font></i>
<a name='L1951'><i><font color='green'>N*log(B)/log(BASE) is mathematically an exact integer, then truncating that</font></i>
<a name='L1952'><i><font color='green'>and adding 1 returns a result 1 larger than necessary.  However, that can't</font></i>
<a name='L1953'><i><font color='green'>happen:  whenever B is a power of 2, long_from_binary_base() is called</font></i>
<a name='L1954'><i><font color='green'>instead, and it's impossible for B**i to be an integer power of 2**15 when</font></i>
<a name='L1955'><i><font color='green'>B is not a power of 2 (i.e., it's impossible for N*log(B)/log(BASE) to be</font></i>
<a name='L1956'><i><font color='green'>an exact integer when B is not a power of 2, since B**i has a prime factor</font></i>
<a name='L1957'><i><font color='green'>other than 2 in that case, but (2**15)**j's only prime factor is 2).</font></i>
<a name='L1958'><i><font color='green'></font></i>
<a name='L1959'><i><font color='green'>The computed result can be too small if the true value of N*log(B)/log(BASE)</font></i>
<a name='L1960'><i><font color='green'>is a little bit larger than an exact integer, but due to roundoff errors (in</font></i>
<a name='L1961'><i><font color='green'>computing log(B), log(BASE), their quotient, and/or multiplying that by N)</font></i>
<a name='L1962'><i><font color='green'>yields a numeric result a little less than that integer.  Unfortunately, "how</font></i>
<a name='L1963'><i><font color='green'>close can a transcendental function get to an integer over some range?"</font></i>
<a name='L1964'><i><font color='green'>questions are generally theoretically intractable.  Computer analysis via</font></i>
<a name='L1965'><i><font color='green'>continued fractions is practical:  expand log(B)/log(BASE) via continued</font></i>
<a name='L1966'><i><font color='green'>fractions, giving a sequence i/j of "the best" rational approximations.  Then</font></i>
<a name='L1967'><i><font color='green'>j*log(B)/log(BASE) is approximately equal to (the integer) i.  This shows that</font></i>
<a name='L1968'><i><font color='green'>we can get very close to being in trouble, but very rarely.  For example,</font></i>
<a name='L1969'><i><font color='green'>76573 is a denominator in one of the continued-fraction approximations to</font></i>
<a name='L1970'><i><font color='green'>log(10)/log(2**15), and indeed:</font></i>
<a name='L1971'><i><font color='green'></font></i>
<a name='L1972'><i><font color='green'>    &gt;&gt;&gt; log(10)/log(2**15)*76573</font></i>
<a name='L1973'><i><font color='green'>    16958.000000654003</font></i>
<a name='L1974'><i><font color='green'></font></i>
<a name='L1975'><i><font color='green'>is very close to an integer.  If we were working with IEEE single-precision,</font></i>
<a name='L1976'><i><font color='green'>rounding errors could kill us.  Finding worst cases in IEEE double-precision</font></i>
<a name='L1977'><i><font color='green'>requires better-than-double-precision log() functions, and Tim didn't bother.</font></i>
<a name='L1978'><i><font color='green'>Instead the code checks to see whether the allocated space is enough as each</font></i>
<a name='L1979'><i><font color='green'>new Python digit is added, and copies the whole thing to a larger long if not.</font></i>
<a name='L1980'><i><font color='green'>This should happen extremely rarely, and in fact I don't have a test case</font></i>
<a name='L1981'><i><font color='green'>that triggers it(!).  Instead the code was tested by artificially allocating</font></i>
<a name='L1982'><i><font color='green'>just 1 digit at the start, so that the copying code was exercised for every</font></i>
<a name='L1983'><i><font color='green'>digit beyond the first.</font></i>
<a name='L1984'><i><font color='green'>***/</font></i>
<a name='L1985'>        <b>register</b> <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> c;           <i><font color='green'>/* current input character */</font></i>
<a name='L1986'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_z;
<a name='L1987'>        <b>int</b> i;
<a name='L1988'>        <b>int</b> convwidth;
<a name='L1989'>        <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> convmultmax, convmult;
<a name='L1990'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *pz, *pzstop;
<a name='L1991'>        <b>char</b>* scan;
<a name='L1992'>
<a name='L1993'>        <b>static</b> <b>double</b> log_base_BASE[37] = <font color='red'>{</font>0.0e0,<font color='red'>}</font>;
<a name='L1994'>        <b>static</b> <b>int</b> convwidth_base[37] = <font color='red'>{</font>0,<font color='red'>}</font>;
<a name='L1995'>        <b>static</b> <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> convmultmax_base[37] = <font color='red'>{</font>0,<font color='red'>}</font>;
<a name='L1996'>
<a name='L1997'>        <b>if</b> (log_base_BASE[base] == 0.0) <font color='red'>{</font>
<a name='L1998'>            <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> convmax = base;
<a name='L1999'>            <b>int</b> i = 1;
<a name='L2000'>
<a name='L2001'>            log_base_BASE[base] = (log((<b>double</b>)base) /
<a name='L2002'>                                   log((<b>double</b>)<a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>));
<a name='L2003'>            <b>for</b> (;;) <font color='red'>{</font>
<a name='L2004'>                <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> next = convmax * base;
<a name='L2005'>                <b>if</b> (next &gt; <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>)
<a name='L2006'>                    <b>break</b>;
<a name='L2007'>                convmax = next;
<a name='L2008'>                ++i;
<a name='L2009'>            <font color='red'>}</font>
<a name='L2010'>            convmultmax_base[base] = convmax;
<a name='L2011'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(i &gt; 0);
<a name='L2012'>            convwidth_base[base] = i;
<a name='L2013'>        <font color='red'>}</font>
<a name='L2014'>
<a name='L2015'>        <i><font color='green'>/* Find length of the string of numeric characters. */</font></i>
<a name='L2016'>        scan = str;
<a name='L2017'>        <b>while</b> (_PyLong_DigitValue[<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*scan)] &lt; base)
<a name='L2018'>            ++scan;
<a name='L2019'>
<a name='L2020'>        <i><font color='green'>/* Create a long object that can contain the largest possible</font></i>
<a name='L2021'><i><font color='green'>         * integer with this base and length.  Note that there's no</font></i>
<a name='L2022'><i><font color='green'>         * need to initialize z-&gt;ob_digit -- no slot is read up before</font></i>
<a name='L2023'><i><font color='green'>         * being stored into.</font></i>
<a name='L2024'><i><font color='green'>         */</font></i>
<a name='L2025'>        size_z = (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)((scan - str) * log_base_BASE[base]) + 1;
<a name='L2026'>        <i><font color='green'>/* Uncomment next line to test exceedingly rare copy code */</font></i>
<a name='L2027'>        <i><font color='green'>/* size_z = 1; */</font></i>
<a name='L2028'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(size_z &gt; 0);
<a name='L2029'>        z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_z);
<a name='L2030'>        <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2031'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2032'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) = 0;
<a name='L2033'>
<a name='L2034'>        <i><font color='green'>/* `convwidth` consecutive input digits are treated as a single</font></i>
<a name='L2035'><i><font color='green'>         * digit in base `convmultmax`.</font></i>
<a name='L2036'><i><font color='green'>         */</font></i>
<a name='L2037'>        convwidth = convwidth_base[base];
<a name='L2038'>        convmultmax = convmultmax_base[base];
<a name='L2039'>
<a name='L2040'>        <i><font color='green'>/* Work ;-) */</font></i>
<a name='L2041'>        <b>while</b> (str &lt; scan) <font color='red'>{</font>
<a name='L2042'>            <i><font color='green'>/* grab up to convwidth digits from the input string */</font></i>
<a name='L2043'>            c = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)_PyLong_DigitValue[<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*str++)];
<a name='L2044'>            <b>for</b> (i = 1; i &lt; convwidth &amp;&amp; str != scan; ++i, ++str) <font color='red'>{</font>
<a name='L2045'>                c = (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)(c *  base +
<a name='L2046'>                                (<b>int</b>)_PyLong_DigitValue[<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*str)]);
<a name='L2047'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(c &lt; <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>);
<a name='L2048'>            <font color='red'>}</font>
<a name='L2049'>
<a name='L2050'>            convmult = convmultmax;
<a name='L2051'>            <i><font color='green'>/* Calculate the shift only if we couldn't get</font></i>
<a name='L2052'><i><font color='green'>             * convwidth digits.</font></i>
<a name='L2053'><i><font color='green'>             */</font></i>
<a name='L2054'>            <b>if</b> (i != convwidth) <font color='red'>{</font>
<a name='L2055'>                convmult = base;
<a name='L2056'>                <b>for</b> ( ; i &gt; 1; --i)
<a name='L2057'>                    convmult *= base;
<a name='L2058'>            <font color='red'>}</font>
<a name='L2059'>
<a name='L2060'>            <i><font color='green'>/* Multiply z by convmult, and add c. */</font></i>
<a name='L2061'>            pz = z-&gt;ob_digit;
<a name='L2062'>            pzstop = pz + <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z);
<a name='L2063'>            <b>for</b> (; pz &lt; pzstop; ++pz) <font color='red'>{</font>
<a name='L2064'>                c += (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)*pz * convmult;
<a name='L2065'>                *pz = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(c &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2066'>                c &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2067'>            <font color='red'>}</font>
<a name='L2068'>            <i><font color='green'>/* carry off the current end? */</font></i>
<a name='L2069'>            <b>if</b> (c) <font color='red'>{</font>
<a name='L2070'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(c &lt; <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>);
<a name='L2071'>                <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) &lt; size_z) <font color='red'>{</font>
<a name='L2072'>                    *pz = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)c;
<a name='L2073'>                    ++<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z);
<a name='L2074'>                <font color='red'>}</font>
<a name='L2075'>                <b>else</b> <font color='red'>{</font>
<a name='L2076'>                    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *tmp;
<a name='L2077'>                    <i><font color='green'>/* Extremely rare.  Get more space. */</font></i>
<a name='L2078'>                    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) == size_z);
<a name='L2079'>                    tmp = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_z + 1);
<a name='L2080'>                    <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2081'>                        Py_DECREF(z);
<a name='L2082'>                        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2083'>                    <font color='red'>}</font>
<a name='L2084'>                    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(tmp-&gt;ob_digit,
<a name='L2085'>                           z-&gt;ob_digit,
<a name='L2086'>                           <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>) * size_z);
<a name='L2087'>                    Py_DECREF(z);
<a name='L2088'>                    z = tmp;
<a name='L2089'>                    z-&gt;ob_digit[size_z] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)c;
<a name='L2090'>                    ++size_z;
<a name='L2091'>                <font color='red'>}</font>
<a name='L2092'>            <font color='red'>}</font>
<a name='L2093'>        <font color='red'>}</font>
<a name='L2094'>    <font color='red'>}</font>
<a name='L2095'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2096'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2097'>    <b>if</b> (error_if_nonzero) <font color='red'>{</font>
<a name='L2098'>        <i><font color='green'>/* reset the base to 0, else the exception message</font></i>
<a name='L2099'><i><font color='green'>           doesn't make too much sense */</font></i>
<a name='L2100'>        base = 0;
<a name='L2101'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) != 0)
<a name='L2102'>            <b>goto</b> onError;
<a name='L2103'>        <i><font color='green'>/* there might still be other problems, therefore base</font></i>
<a name='L2104'><i><font color='green'>           remains zero here for the same reason */</font></i>
<a name='L2105'>    <font color='red'>}</font>
<a name='L2106'>    <b>if</b> (str == start)
<a name='L2107'>        <b>goto</b> onError;
<a name='L2108'>    <b>if</b> (sign &lt; 0)
<a name='L2109'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z));
<a name='L2110'>    <b>while</b> (*str &amp;&amp; <a href='../D/9346.html' title='Multiple defined in 2 places.'>isspace</a>(<a href='../S/570.html#L144' title='Defined at 144 in Include/Python.h.'>Py_CHARMASK</a>(*str)))
<a name='L2111'>        str++;
<a name='L2112'>    <b>if</b> (*str != '\0')
<a name='L2113'>        <b>goto</b> onError;
<a name='L2114'>    <b>if</b> (pend)
<a name='L2115'>        *pend = str;
<a name='L2116'>    <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z);
<a name='L2117'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) <a href='../D/9758.html' title='Multiple defined in 2 places.'>maybe_small_long</a>(z);
<a name='L2118'>
<a name='L2119'>  onError:
<a name='L2120'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(z);
<a name='L2121'>    slen = strlen(orig_str) &lt; 200 ? strlen(orig_str) : 200;
<a name='L2122'>    strobj = <a href='../D/4013.html' title='Multiple defined in 3 places.'>PyUnicode_FromStringAndSize</a>(orig_str, slen);
<a name='L2123'>    <b>if</b> (strobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2124'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2125'>    <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L2126'>                 "invalid literal for int() with base %d: %R",
<a name='L2127'>                 base, strobj);
<a name='L2128'>    Py_DECREF(strobj);
<a name='L2129'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2130'><font color='red'>}</font>
<a name='L2131'>
<a name='L2132'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2133'><a href='../R/3132.html' title='Multiple refered from 2 places.'>PyLong_FromUnicode</a>(Py_UNICODE *u, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length, <b>int</b> base)
<a name='L2134'><font color='red'>{</font>
<a name='L2135'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L2136'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *asciidig;
<a name='L2137'>    <b>char</b> *<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, *end;
<a name='L2138'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, buflen;
<a name='L2139'>    <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> *ptr;
<a name='L2140'>
<a name='L2141'>    asciidig = <a href='../S/2828.html#L6208' title='Defined at 6208 in Objects/unicodeobject.c.'>PyUnicode_TransformDecimalToASCII</a>(u, length);
<a name='L2142'>    <b>if</b> (asciidig == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2143'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2144'>    <i><font color='green'>/* Replace non-ASCII whitespace with ' ' */</font></i>
<a name='L2145'>    ptr = <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(asciidig);
<a name='L2146'>    <b>for</b> (i = 0; i &lt; length; i++) <font color='red'>{</font>
<a name='L2147'>        <a href='../S/587.html#L135' title='Defined at 135 in Include/unicodeobject.h.'>Py_UNICODE</a> ch = ptr[i];
<a name='L2148'>        <b>if</b> (ch &gt; 127 &amp;&amp; <a href='../S/587.html#L324' title='Defined at 324 in Include/unicodeobject.h.'>Py_UNICODE_ISSPACE</a>(ch))
<a name='L2149'>            ptr[i] = ' ';
<a name='L2150'>    <font color='red'>}</font>
<a name='L2151'>    <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> = <a href='../S/2828.html#L1903' title='Defined at 1903 in Objects/unicodeobject.c.'>_PyUnicode_AsStringAndSize</a>(asciidig, &amp;buflen);
<a name='L2152'>    <b>if</b> (<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2153'>        Py_DECREF(asciidig);
<a name='L2154'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2155'>    <font color='red'>}</font>
<a name='L2156'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2799.html#L1853' title='Defined at 1853 in Objects/longobject.c.'>PyLong_FromString</a>(<a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a>, &amp;end, base);
<a name='L2157'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; end != <a href='../S/2664.html#L607' title='Defined at 607 in Modules/expat/xmlparse.c.'>buffer</a> + buflen) <font color='red'>{</font>
<a name='L2158'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L2159'>                        "null byte in argument for int()");
<a name='L2160'>        Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L2161'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2162'>    <font color='red'>}</font>
<a name='L2163'>    Py_DECREF(asciidig);
<a name='L2164'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L2165'><font color='red'>}</font>
<a name='L2166'>
<a name='L2167'><i><font color='green'>/* forward */</font></i>
<a name='L2168'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *<a href='../S/2799.html#L2229' title='Defined at 2229 in Objects/longobject.c.'>x_divrem</a>
<a name='L2169'>    (PyLongObject *, PyLongObject *, PyLongObject **);
<a name='L2170'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>(PyObject *v);
<a name='L2171'>
<a name='L2172'><i><font color='green'>/* Long division with remainder, top-level routine */</font></i>
<a name='L2173'>
<a name='L2174'><b>static</b> <b>int</b>
<a name='L2175'><a href='../R/8767.html' title='Multiple refered from 2 places.'>long_divrem</a>(PyLongObject *a, PyLongObject *b,
<a name='L2176'>            PyLongObject **pdiv, PyLongObject **prem)
<a name='L2177'><font color='red'>{</font>
<a name='L2178'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_a = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a)), size_b = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L2179'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L2180'>
<a name='L2181'>    <b>if</b> (size_b == 0) <font color='red'>{</font>
<a name='L2182'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ZeroDivisionError,
<a name='L2183'>                        "integer division or modulo by zero");
<a name='L2184'>        <b>return</b> -1;
<a name='L2185'>    <font color='red'>}</font>
<a name='L2186'>    <b>if</b> (size_a &lt; size_b ||
<a name='L2187'>        (size_a == size_b &amp;&amp;
<a name='L2188'>         a-&gt;ob_digit[size_a-1] &lt; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[size_b-1])) <font color='red'>{</font>
<a name='L2189'>        <i><font color='green'>/* |a| &lt; |b|. */</font></i>
<a name='L2190'>        *pdiv = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0);
<a name='L2191'>        <b>if</b> (*pdiv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2192'>            <b>return</b> -1;
<a name='L2193'>        Py_INCREF(a);
<a name='L2194'>        *prem = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) a;
<a name='L2195'>        <b>return</b> 0;
<a name='L2196'>    <font color='red'>}</font>
<a name='L2197'>    <b>if</b> (size_b == 1) <font color='red'>{</font>
<a name='L2198'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> rem = 0;
<a name='L2199'>        z = <a href='../S/2799.html#L1528' title='Defined at 1528 in Objects/longobject.c.'>divrem1</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[0], &amp;rem);
<a name='L2200'>        <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2201'>            <b>return</b> -1;
<a name='L2202'>        *prem = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)rem);
<a name='L2203'>        <b>if</b> (*prem == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2204'>            Py_DECREF(z);
<a name='L2205'>            <b>return</b> -1;
<a name='L2206'>        <font color='red'>}</font>
<a name='L2207'>    <font color='red'>}</font>
<a name='L2208'>    <b>else</b> <font color='red'>{</font>
<a name='L2209'>        z = <a href='../S/2799.html#L2229' title='Defined at 2229 in Objects/longobject.c.'>x_divrem</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, prem);
<a name='L2210'>        <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2211'>            <b>return</b> -1;
<a name='L2212'>    <font color='red'>}</font>
<a name='L2213'>    <i><font color='green'>/* Set the signs.</font></i>
<a name='L2214'><i><font color='green'>       The quotient z has the sign of a*b;</font></i>
<a name='L2215'><i><font color='green'>       the remainder r has the sign of a,</font></i>
<a name='L2216'><i><font color='green'>       so a = b*z + r. */</font></i>
<a name='L2217'>    <b>if</b> ((<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0) != (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0))
<a name='L2218'>        <a href='../S/2799.html#L73' title='Defined at 73 in Objects/longobject.c.'>NEGATE</a>(z);
<a name='L2219'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0 &amp;&amp; <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(*prem) != 0)
<a name='L2220'>        <a href='../S/2799.html#L73' title='Defined at 73 in Objects/longobject.c.'>NEGATE</a>(*prem);
<a name='L2221'>    *pdiv = <a href='../D/9758.html' title='Multiple defined in 2 places.'>maybe_small_long</a>(z);
<a name='L2222'>    <b>return</b> 0;
<a name='L2223'><font color='red'>}</font>
<a name='L2224'>
<a name='L2225'><i><font color='green'>/* Unsigned long division with remainder -- the algorithm.  The arguments v1</font></i>
<a name='L2226'><i><font color='green'>   and w1 should satisfy 2 &lt;= ABS(Py_SIZE(w1)) &lt;= ABS(Py_SIZE(v1)). */</font></i>
<a name='L2227'>
<a name='L2228'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L2229'><a href='../R/11485.html' title='Multiple refered from 3 places.'>x_divrem</a>(PyLongObject *v1, PyLongObject *w1, PyLongObject **prem)
<a name='L2230'><font color='red'>{</font>
<a name='L2231'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v, *w, *a;
<a name='L2232'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, k, size_v, size_w;
<a name='L2233'>    <b>int</b> d;
<a name='L2234'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> wm1, wm2, carry, q, r, vtop, *<a href='../S/2333.html#L112' title='Defined at 112 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v0</a>, *vk, *w0, *ak;
<a name='L2235'>    <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> vv;
<a name='L2236'>    <a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a> zhi;
<a name='L2237'>    <a href='../D/11479.html' title='Multiple defined in 2 places.'>stwodigits</a> z;
<a name='L2238'>
<a name='L2239'>    <i><font color='green'>/* We follow Knuth [The Art of Computer Programming, Vol. 2 (3rd</font></i>
<a name='L2240'><i><font color='green'>       edn.), section 4.3.1, Algorithm D], except that we don't explicitly</font></i>
<a name='L2241'><i><font color='green'>       handle the special case when the initial estimate q for a quotient</font></i>
<a name='L2242'><i><font color='green'>       digit is &gt;= PyLong_BASE: the max value for q is PyLong_BASE+1, and</font></i>
<a name='L2243'><i><font color='green'>       that won't overflow a digit. */</font></i>
<a name='L2244'>
<a name='L2245'>    <i><font color='green'>/* allocate space; w will also be used to hold the final remainder */</font></i>
<a name='L2246'>    size_v = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L113' title='Defined at 113 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v1</a>));
<a name='L2247'>    size_w = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(w1));
<a name='L2248'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(size_v &gt;= size_w &amp;&amp; size_w &gt;= 2); <i><font color='green'>/* Assert checks by div() */</font></i>
<a name='L2249'>    v = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_v+1);
<a name='L2250'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2251'>        *prem = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2252'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2253'>    <font color='red'>}</font>
<a name='L2254'>    w = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_w);
<a name='L2255'>    <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2256'>        Py_DECREF(v);
<a name='L2257'>        *prem = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2258'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2259'>    <font color='red'>}</font>
<a name='L2260'>
<a name='L2261'>    <i><font color='green'>/* normalize: shift w1 left so that its top digit is &gt;= PyLong_BASE/2.</font></i>
<a name='L2262'><i><font color='green'>       shift v1 left by the same amount.  Results go into w and v. */</font></i>
<a name='L2263'>    d = <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> - <a href='../S/2799.html#L1400' title='Defined at 1400 in Objects/longobject.c.'>bits_in_digit</a>(w1-&gt;ob_digit[size_w-1]);
<a name='L2264'>    carry = <a href='../S/2799.html#L1467' title='Defined at 1467 in Objects/longobject.c.'>v_lshift</a>(w-&gt;ob_digit, w1-&gt;ob_digit, size_w, d);
<a name='L2265'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(carry == 0);
<a name='L2266'>    carry = <a href='../S/2799.html#L1467' title='Defined at 1467 in Objects/longobject.c.'>v_lshift</a>(v-&gt;ob_digit, <a href='../S/2333.html#L113' title='Defined at 113 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v1</a>-&gt;ob_digit, size_v, d);
<a name='L2267'>    <b>if</b> (carry != 0 || v-&gt;ob_digit[size_v-1] &gt;= w-&gt;ob_digit[size_w-1]) <font color='red'>{</font>
<a name='L2268'>        v-&gt;ob_digit[size_v] = carry;
<a name='L2269'>        size_v++;
<a name='L2270'>    <font color='red'>}</font>
<a name='L2271'>
<a name='L2272'>    <i><font color='green'>/* Now v-&gt;ob_digit[size_v-1] &lt; w-&gt;ob_digit[size_w-1], so quotient has</font></i>
<a name='L2273'><i><font color='green'>       at most (and usually exactly) k = size_v - size_w digits. */</font></i>
<a name='L2274'>    k = size_v - size_w;
<a name='L2275'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(k &gt;= 0);
<a name='L2276'>    a = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(k);
<a name='L2277'>    <b>if</b> (a == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2278'>        Py_DECREF(w);
<a name='L2279'>        Py_DECREF(v);
<a name='L2280'>        *prem = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2281'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2282'>    <font color='red'>}</font>
<a name='L2283'>    <a href='../S/2333.html#L112' title='Defined at 112 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v0</a> = v-&gt;ob_digit;
<a name='L2284'>    w0 = w-&gt;ob_digit;
<a name='L2285'>    wm1 = w0[size_w-1];
<a name='L2286'>    wm2 = w0[size_w-2];
<a name='L2287'>    <b>for</b> (vk = <a href='../S/2333.html#L112' title='Defined at 112 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v0</a>+k, ak = a-&gt;ob_digit + k; vk-- &gt; <a href='../S/2333.html#L112' title='Defined at 112 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v0</a>;) <font color='red'>{</font>
<a name='L2288'>        <i><font color='green'>/* inner loop: divide vk[0:size_w+1] by w0[0:size_w], giving</font></i>
<a name='L2289'><i><font color='green'>           single-digit quotient q, remainder in vk[0:size_w]. */</font></i>
<a name='L2290'>
<a name='L2291'>        <a href='../S/2799.html#L97' title='Defined at 97 in Objects/longobject.c.'>SIGCHECK</a>(<font color='red'>{</font>
<a name='L2292'>                Py_DECREF(a);
<a name='L2293'>                Py_DECREF(w);
<a name='L2294'>                Py_DECREF(v);
<a name='L2295'>                *prem = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2296'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2297'>            <font color='red'>}</font>);
<a name='L2298'>
<a name='L2299'>        <i><font color='green'>/* estimate quotient digit q; may overestimate by 1 (rare) */</font></i>
<a name='L2300'>        vtop = vk[size_w];
<a name='L2301'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(vtop &lt;= wm1);
<a name='L2302'>        vv = ((<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)vtop &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) | vk[size_w-1];
<a name='L2303'>        q = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(vv / wm1);
<a name='L2304'>        r = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(vv - (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)wm1 * q); <i><font color='green'>/* r = vv % wm1 */</font></i>
<a name='L2305'>        <b>while</b> ((<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)wm2 * q &gt; (((<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)r &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>)
<a name='L2306'>                                     | vk[size_w-2])) <font color='red'>{</font>
<a name='L2307'>            --q;
<a name='L2308'>            r += wm1;
<a name='L2309'>            <b>if</b> (r &gt;= <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>)
<a name='L2310'>                <b>break</b>;
<a name='L2311'>        <font color='red'>}</font>
<a name='L2312'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(q &lt;= <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>);
<a name='L2313'>
<a name='L2314'>        <i><font color='green'>/* subtract q*w0[0:size_w] from vk[0:size_w+1] */</font></i>
<a name='L2315'>        zhi = 0;
<a name='L2316'>        <b>for</b> (i = 0; i &lt; size_w; ++i) <font color='red'>{</font>
<a name='L2317'>            <i><font color='green'>/* invariants: -PyLong_BASE &lt;= -q &lt;= zhi &lt;= 0;</font></i>
<a name='L2318'><i><font color='green'>               -PyLong_BASE * q &lt;= z &lt; PyLong_BASE */</font></i>
<a name='L2319'>            z = (<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)vk[i] + zhi -
<a name='L2320'>                (<a href='../D/11479.html' title='Multiple defined in 2 places.'>stwodigits</a>)q * (<a href='../D/11479.html' title='Multiple defined in 2 places.'>stwodigits</a>)w0[i];
<a name='L2321'>            vk[i] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)z &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L2322'>            zhi = (<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)<a href='../D/4074.html' title='Multiple defined in 2 places.'>Py_ARITHMETIC_RIGHT_SHIFT</a>(<a href='../D/11479.html' title='Multiple defined in 2 places.'>stwodigits</a>,
<a name='L2323'>                                                    z, <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L2324'>        <font color='red'>}</font>
<a name='L2325'>
<a name='L2326'>        <i><font color='green'>/* add w back if q was too large (this branch taken rarely) */</font></i>
<a name='L2327'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>((<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)vtop + zhi == -1 || (<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)vtop + zhi == 0);
<a name='L2328'>        <b>if</b> ((<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)vtop + zhi &lt; 0) <font color='red'>{</font>
<a name='L2329'>            carry = 0;
<a name='L2330'>            <b>for</b> (i = 0; i &lt; size_w; ++i) <font color='red'>{</font>
<a name='L2331'>                carry += vk[i] + w0[i];
<a name='L2332'>                vk[i] = carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L2333'>                carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2334'>            <font color='red'>}</font>
<a name='L2335'>            --q;
<a name='L2336'>        <font color='red'>}</font>
<a name='L2337'>
<a name='L2338'>        <i><font color='green'>/* store quotient digit */</font></i>
<a name='L2339'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(q &lt; <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a>);
<a name='L2340'>        *--ak = q;
<a name='L2341'>    <font color='red'>}</font>
<a name='L2342'>
<a name='L2343'>    <i><font color='green'>/* unshift remainder; we reuse w to store the result */</font></i>
<a name='L2344'>    carry = <a href='../S/2799.html#L1485' title='Defined at 1485 in Objects/longobject.c.'>v_rshift</a>(w0, <a href='../S/2333.html#L112' title='Defined at 112 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>v0</a>, size_w, d);
<a name='L2345'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(carry==0);
<a name='L2346'>    Py_DECREF(v);
<a name='L2347'>
<a name='L2348'>    *prem = <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(w);
<a name='L2349'>    <b>return</b> <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(a);
<a name='L2350'><font color='red'>}</font>
<a name='L2351'>
<a name='L2352'><i><font color='green'>/* For a nonzero PyLong a, express a in the form x * 2**e, with 0.5 &lt;=</font></i>
<a name='L2353'><i><font color='green'>   abs(x) &lt; 1.0 and e &gt;= 0; return x and put e in *e.  Here x is</font></i>
<a name='L2354'><i><font color='green'>   rounded to DBL_MANT_DIG significant bits using round-half-to-even.</font></i>
<a name='L2355'><i><font color='green'>   If a == 0, return 0.0 and set *e = 0.  If the resulting exponent</font></i>
<a name='L2356'><i><font color='green'>   e is larger than PY_SSIZE_T_MAX, raise OverflowError and return</font></i>
<a name='L2357'><i><font color='green'>   -1.0. */</font></i>
<a name='L2358'>
<a name='L2359'><i><font color='green'>/* attempt to define 2.0**DBL_MANT_DIG as a compile-time constant */</font></i>
<a name='L2360'><font color='darkred'>#if</font> DBL_MANT_DIG == 53
<a name='L2361'><font color='darkred'>#define</font> <a href='../S/2799.html#L2458' title='Refered from 2458 in Objects/longobject.c.'>EXP2_DBL_MANT_DIG</a> 9007199254740992.0
<a name='L2362'><font color='darkred'>#else</font>
<a name='L2363'><font color='darkred'>#define</font> <a href='../S/2799.html#L2458' title='Refered from 2458 in Objects/longobject.c.'>EXP2_DBL_MANT_DIG</a> (ldexp(1.0, DBL_MANT_DIG))
<a name='L2364'><font color='darkred'>#endif</font>
<a name='L2365'>
<a name='L2366'><b>double</b>
<a name='L2367'><a href='../R/5443.html' title='Multiple refered from 2 places.'>_PyLong_Frexp</a>(PyLongObject *a, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> *e)
<a name='L2368'><font color='red'>{</font>
<a name='L2369'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> a_size, a_bits, shift_digits, shift_bits, x_size;
<a name='L2370'>    <i><font color='green'>/* See below for why x_digits is always large enough. */</font></i>
<a name='L2371'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> rem, x_digits[2 + (DBL_MANT_DIG + 1) / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>];
<a name='L2372'>    <b>double</b> dx;
<a name='L2373'>    <i><font color='green'>/* Correction term for round-half-to-even rounding.  For a digit x,</font></i>
<a name='L2374'><i><font color='green'>       "x + half_even_correction[x &amp; 7]" gives x rounded to the nearest</font></i>
<a name='L2375'><i><font color='green'>       multiple of 4, rounding ties to a multiple of 8. */</font></i>
<a name='L2376'>    <b>static</b> <b>const</b> <b>int</b> half_even_correction[8] = <font color='red'>{</font>0, -1, -2, 1, 0, -1, 2, 1<font color='red'>}</font>;
<a name='L2377'>
<a name='L2378'>    a_size = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L2379'>    <b>if</b> (a_size == 0) <font color='red'>{</font>
<a name='L2380'>        <i><font color='green'>/* Special case for 0: significand 0.0, exponent 0. */</font></i>
<a name='L2381'>        *e = 0;
<a name='L2382'>        <b>return</b> 0.0;
<a name='L2383'>    <font color='red'>}</font>
<a name='L2384'>    a_bits = <a href='../S/2799.html#L1400' title='Defined at 1400 in Objects/longobject.c.'>bits_in_digit</a>(a-&gt;ob_digit[a_size-1]);
<a name='L2385'>    <i><font color='green'>/* The following is an overflow-free version of the check</font></i>
<a name='L2386'><i><font color='green'>       "if ((a_size - 1) * PyLong_SHIFT + a_bits &gt; PY_SSIZE_T_MAX) ..." */</font></i>
<a name='L2387'>    <b>if</b> (a_size &gt;= (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - 1) / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + 1 &amp;&amp;
<a name='L2388'>        (a_size &gt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - 1) / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + 1 ||
<a name='L2389'>         a_bits &gt; (<a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - 1) % <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + 1))
<a name='L2390'>        <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L2391'>    a_bits = (a_size - 1) * <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + a_bits;
<a name='L2392'>
<a name='L2393'>    <i><font color='green'>/* Shift the first DBL_MANT_DIG + 2 bits of a into x_digits[0:x_size]</font></i>
<a name='L2394'><i><font color='green'>       (shifting left if a_bits &lt;= DBL_MANT_DIG + 2).</font></i>
<a name='L2395'><i><font color='green'></font></i>
<a name='L2396'><i><font color='green'>       Number of digits needed for result: write // for floor division.</font></i>
<a name='L2397'><i><font color='green'>       Then if shifting left, we end up using</font></i>
<a name='L2398'><i><font color='green'></font></i>
<a name='L2399'><i><font color='green'>         1 + a_size + (DBL_MANT_DIG + 2 - a_bits) // PyLong_SHIFT</font></i>
<a name='L2400'><i><font color='green'></font></i>
<a name='L2401'><i><font color='green'>       digits.  If shifting right, we use</font></i>
<a name='L2402'><i><font color='green'></font></i>
<a name='L2403'><i><font color='green'>         a_size - (a_bits - DBL_MANT_DIG - 2) // PyLong_SHIFT</font></i>
<a name='L2404'><i><font color='green'></font></i>
<a name='L2405'><i><font color='green'>       digits.  Using a_size = 1 + (a_bits - 1) // PyLong_SHIFT along with</font></i>
<a name='L2406'><i><font color='green'>       the inequalities</font></i>
<a name='L2407'><i><font color='green'></font></i>
<a name='L2408'><i><font color='green'>         m // PyLong_SHIFT + n // PyLong_SHIFT &lt;= (m + n) // PyLong_SHIFT</font></i>
<a name='L2409'><i><font color='green'>         m // PyLong_SHIFT - n // PyLong_SHIFT &lt;=</font></i>
<a name='L2410'><i><font color='green'>                                          1 + (m - n - 1) // PyLong_SHIFT,</font></i>
<a name='L2411'><i><font color='green'></font></i>
<a name='L2412'><i><font color='green'>       valid for any integers m and n, we find that x_size satisfies</font></i>
<a name='L2413'><i><font color='green'></font></i>
<a name='L2414'><i><font color='green'>         x_size &lt;= 2 + (DBL_MANT_DIG + 1) // PyLong_SHIFT</font></i>
<a name='L2415'><i><font color='green'></font></i>
<a name='L2416'><i><font color='green'>       in both cases.</font></i>
<a name='L2417'><i><font color='green'>    */</font></i>
<a name='L2418'>    <b>if</b> (a_bits &lt;= DBL_MANT_DIG + 2) <font color='red'>{</font>
<a name='L2419'>        shift_digits = (DBL_MANT_DIG + 2 - a_bits) / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2420'>        shift_bits = (DBL_MANT_DIG + 2 - a_bits) % <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2421'>        x_size = 0;
<a name='L2422'>        <b>while</b> (x_size &lt; shift_digits)
<a name='L2423'>            x_digits[x_size++] = 0;
<a name='L2424'>        rem = <a href='../S/2799.html#L1467' title='Defined at 1467 in Objects/longobject.c.'>v_lshift</a>(x_digits + x_size, a-&gt;ob_digit, a_size,
<a name='L2425'>                       (<b>int</b>)shift_bits);
<a name='L2426'>        x_size += a_size;
<a name='L2427'>        x_digits[x_size++] = rem;
<a name='L2428'>    <font color='red'>}</font>
<a name='L2429'>    <b>else</b> <font color='red'>{</font>
<a name='L2430'>        shift_digits = (a_bits - DBL_MANT_DIG - 2) / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2431'>        shift_bits = (a_bits - DBL_MANT_DIG - 2) % <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2432'>        rem = <a href='../S/2799.html#L1485' title='Defined at 1485 in Objects/longobject.c.'>v_rshift</a>(x_digits, a-&gt;ob_digit + shift_digits,
<a name='L2433'>                       a_size - shift_digits, (<b>int</b>)shift_bits);
<a name='L2434'>        x_size = a_size - shift_digits;
<a name='L2435'>        <i><font color='green'>/* For correct rounding below, we need the least significant</font></i>
<a name='L2436'><i><font color='green'>           bit of x to be 'sticky' for this shift: if any of the bits</font></i>
<a name='L2437'><i><font color='green'>           shifted out was nonzero, we set the least significant bit</font></i>
<a name='L2438'><i><font color='green'>           of x. */</font></i>
<a name='L2439'>        <b>if</b> (rem)
<a name='L2440'>            x_digits[0] |= 1;
<a name='L2441'>        <b>else</b>
<a name='L2442'>            <b>while</b> (shift_digits &gt; 0)
<a name='L2443'>                <b>if</b> (a-&gt;ob_digit[--shift_digits]) <font color='red'>{</font>
<a name='L2444'>                    x_digits[0] |= 1;
<a name='L2445'>                    <b>break</b>;
<a name='L2446'>                <font color='red'>}</font>
<a name='L2447'>    <font color='red'>}</font>
<a name='L2448'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(1 &lt;= x_size &amp;&amp;
<a name='L2449'>           x_size &lt;= (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)(<b>sizeof</b>(x_digits)/<b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)));
<a name='L2450'>
<a name='L2451'>    <i><font color='green'>/* Round, and convert to double. */</font></i>
<a name='L2452'>    x_digits[0] += half_even_correction[x_digits[0] &amp; 7];
<a name='L2453'>    dx = x_digits[--x_size];
<a name='L2454'>    <b>while</b> (x_size &gt; 0)
<a name='L2455'>        dx = dx * <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a> + x_digits[--x_size];
<a name='L2456'>
<a name='L2457'>    <i><font color='green'>/* Rescale;  make correction if result is 1.0. */</font></i>
<a name='L2458'>    dx /= 4.0 * <a href='../D/995.html' title='Multiple defined in 2 places.'>EXP2_DBL_MANT_DIG</a>;
<a name='L2459'>    <b>if</b> (dx == 1.0) <font color='red'>{</font>
<a name='L2460'>        <b>if</b> (a_bits == <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>)
<a name='L2461'>            <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L2462'>        dx = 0.5;
<a name='L2463'>        a_bits += 1;
<a name='L2464'>    <font color='red'>}</font>
<a name='L2465'>
<a name='L2466'>    *e = a_bits;
<a name='L2467'>    <b>return</b> <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0 ? -dx : dx;
<a name='L2468'>
<a name='L2469'>  <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>:
<a name='L2470'>    <i><font color='green'>/* exponent &gt; PY_SSIZE_T_MAX */</font></i>
<a name='L2471'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L2472'>                    "huge integer: number of bits overflows a Py_ssize_t");
<a name='L2473'>    *e = 0;
<a name='L2474'>    <b>return</b> -1.0;
<a name='L2475'><font color='red'>}</font>
<a name='L2476'>
<a name='L2477'><i><font color='green'>/* Get a C double from a long int object.  Rounds to the nearest double,</font></i>
<a name='L2478'><i><font color='green'>   using the round-half-to-even rule in the case of a tie. */</font></i>
<a name='L2479'>
<a name='L2480'><b>double</b>
<a name='L2481'><a href='../R/3109.html' title='Multiple refered from 6 places.'>PyLong_AsDouble</a>(PyObject *v)
<a name='L2482'><font color='red'>{</font>
<a name='L2483'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> exponent;
<a name='L2484'>    <b>double</b> x;
<a name='L2485'>
<a name='L2486'>    <b>if</b> (v == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || !PyLong_Check(v)) <font color='red'>{</font>
<a name='L2487'>        <a href='../D/3142.html' title='Multiple defined in 3 places.'>PyErr_BadInternalCall</a>();
<a name='L2488'>        <b>return</b> -1.0;
<a name='L2489'>    <font color='red'>}</font>
<a name='L2490'>    x = <a href='../S/2799.html#L2367' title='Defined at 2367 in Objects/longobject.c.'>_PyLong_Frexp</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)v, &amp;exponent);
<a name='L2491'>    <b>if</b> ((x == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) || exponent &gt; DBL_MAX_EXP) <font color='red'>{</font>
<a name='L2492'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L2493'>                        "long int too large to convert to float");
<a name='L2494'>        <b>return</b> -1.0;
<a name='L2495'>    <font color='red'>}</font>
<a name='L2496'>    <b>return</b> ldexp(x, (<b>int</b>)exponent);
<a name='L2497'><font color='red'>}</font>
<a name='L2498'>
<a name='L2499'><i><font color='green'>/* Methods */</font></i>
<a name='L2500'>
<a name='L2501'><b>static</b> <b>void</b>
<a name='L2502'><a href='../S/2799.html#L4758' title='Refered from 4758 in Objects/longobject.c.'>long_dealloc</a>(PyObject *v)
<a name='L2503'><font color='red'>{</font>
<a name='L2504'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(v)-&gt;tp_free(v);
<a name='L2505'><font color='red'>}</font>
<a name='L2506'>
<a name='L2507'><b>static</b> <b>int</b>
<a name='L2508'><a href='../R/8763.html' title='Multiple refered from 2 places.'>long_compare</a>(PyLongObject *a, PyLongObject *b)
<a name='L2509'><font color='red'>{</font>
<a name='L2510'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> sign;
<a name='L2511'>
<a name='L2512'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) != <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>)) <font color='red'>{</font>
<a name='L2513'>        sign = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) - <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2514'>    <font color='red'>}</font>
<a name='L2515'>    <b>else</b> <font color='red'>{</font>
<a name='L2516'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L2517'>        <b>while</b> (--i &gt;= 0 &amp;&amp; a-&gt;ob_digit[i] == <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i])
<a name='L2518'>            ;
<a name='L2519'>        <b>if</b> (i &lt; 0)
<a name='L2520'>            sign = 0;
<a name='L2521'>        <b>else</b> <font color='red'>{</font>
<a name='L2522'>            sign = (<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)a-&gt;ob_digit[i] - (<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i];
<a name='L2523'>            <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0)
<a name='L2524'>                sign = -sign;
<a name='L2525'>        <font color='red'>}</font>
<a name='L2526'>    <font color='red'>}</font>
<a name='L2527'>    <b>return</b> sign &lt; 0 ? -1 : sign &gt; 0 ? 1 : 0;
<a name='L2528'><font color='red'>}</font>
<a name='L2529'>
<a name='L2530'><font color='darkred'>#define</font> <a href='../R/4531.html' title='Multiple refered from 36 places.'>TEST_COND</a>(cond) \
<a name='L2531'>    ((cond) ? Py_True : Py_False)
<a name='L2532'>
<a name='L2533'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2534'><a href='../S/2799.html#L4778' title='Refered from 4778 in Objects/longobject.c.'>long_richcompare</a>(PyObject *self, PyObject *other, <b>int</b> op)
<a name='L2535'><font color='red'>{</font>
<a name='L2536'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L2537'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *v;
<a name='L2538'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(self, <a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a>);
<a name='L2539'>    <b>if</b> (self == <a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a>)
<a name='L2540'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 0;
<a name='L2541'>    <b>else</b>
<a name='L2542'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2799.html#L2508' title='Defined at 2508 in Objects/longobject.c.'>long_compare</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)self, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../S/2669.html#L1431' title='Defined at 1431 in Modules/expat/xmltok_impl.c.'>other</a>);
<a name='L2543'>    <i><font color='green'>/* Convert the return value to a Boolean */</font></i>
<a name='L2544'>    <b>switch</b> (op) <font color='red'>{</font>
<a name='L2545'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>:
<a name='L2546'>        v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == 0);
<a name='L2547'>        <b>break</b>;
<a name='L2548'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_NE</a>:
<a name='L2549'>        v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != 0);
<a name='L2550'>        <b>break</b>;
<a name='L2551'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LE</a>:
<a name='L2552'>        v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt;= 0);
<a name='L2553'>        <b>break</b>;
<a name='L2554'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_GE</a>:
<a name='L2555'>        v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &gt;= 0);
<a name='L2556'>        <b>break</b>;
<a name='L2557'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LT</a>:
<a name='L2558'>        v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == -1);
<a name='L2559'>        <b>break</b>;
<a name='L2560'>    <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_GT</a>:
<a name='L2561'>        v = <a href='../D/5140.html' title='Multiple defined in 6 places.'>TEST_COND</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == 1);
<a name='L2562'>        <b>break</b>;
<a name='L2563'>    <b>default</b>:
<a name='L2564'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L2565'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2566'>    <font color='red'>}</font>
<a name='L2567'>    Py_INCREF(v);
<a name='L2568'>    <b>return</b> v;
<a name='L2569'><font color='red'>}</font>
<a name='L2570'>
<a name='L2571'><b>static</b> <a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>
<a name='L2572'><a href='../S/2799.html#L4767' title='Refered from 4767 in Objects/longobject.c.'>long_hash</a>(PyLongObject *v)
<a name='L2573'><font color='red'>{</font>
<a name='L2574'>    <a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a> x;
<a name='L2575'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L2576'>    <b>int</b> sign;
<a name='L2577'>
<a name='L2578'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v);
<a name='L2579'>    <b>switch</b>(i) <font color='red'>{</font>
<a name='L2580'>    <b>case</b> -1: <b>return</b> v-&gt;ob_digit[0]==1 ? -2 : -(<a href='../D/10991.html' title='Multiple defined in 2 places.'>sdigit</a>)v-&gt;ob_digit[0];
<a name='L2581'>    <b>case</b> 0: <b>return</b> 0;
<a name='L2582'>    <b>case</b> 1: <b>return</b> v-&gt;ob_digit[0];
<a name='L2583'>    <font color='red'>}</font>
<a name='L2584'>    sign = 1;
<a name='L2585'>    x = 0;
<a name='L2586'>    <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L2587'>        sign = -1;
<a name='L2588'>        i = -(i);
<a name='L2589'>    <font color='red'>}</font>
<a name='L2590'>    <b>while</b> (--i &gt;= 0) <font color='red'>{</font>
<a name='L2591'>        <i><font color='green'>/* Here x is a quantity in the range [0, _PyHASH_MODULUS); we</font></i>
<a name='L2592'><i><font color='green'>           want to compute x * 2**PyLong_SHIFT + v-&gt;ob_digit[i] modulo</font></i>
<a name='L2593'><i><font color='green'>           _PyHASH_MODULUS.</font></i>
<a name='L2594'><i><font color='green'></font></i>
<a name='L2595'><i><font color='green'>           The computation of x * 2**PyLong_SHIFT % _PyHASH_MODULUS</font></i>
<a name='L2596'><i><font color='green'>           amounts to a rotation of the bits of x.  To see this, write</font></i>
<a name='L2597'><i><font color='green'></font></i>
<a name='L2598'><i><font color='green'>             x * 2**PyLong_SHIFT = y * 2**_PyHASH_BITS + z</font></i>
<a name='L2599'><i><font color='green'></font></i>
<a name='L2600'><i><font color='green'>           where y = x &gt;&gt; (_PyHASH_BITS - PyLong_SHIFT) gives the top</font></i>
<a name='L2601'><i><font color='green'>           PyLong_SHIFT bits of x (those that are shifted out of the</font></i>
<a name='L2602'><i><font color='green'>           original _PyHASH_BITS bits, and z = (x &lt;&lt; PyLong_SHIFT) &amp;</font></i>
<a name='L2603'><i><font color='green'>           _PyHASH_MODULUS gives the bottom _PyHASH_BITS - PyLong_SHIFT</font></i>
<a name='L2604'><i><font color='green'>           bits of x, shifted up.  Then since 2**_PyHASH_BITS is</font></i>
<a name='L2605'><i><font color='green'>           congruent to 1 modulo _PyHASH_MODULUS, y*2**_PyHASH_BITS is</font></i>
<a name='L2606'><i><font color='green'>           congruent to y modulo _PyHASH_MODULUS.  So</font></i>
<a name='L2607'><i><font color='green'></font></i>
<a name='L2608'><i><font color='green'>             x * 2**PyLong_SHIFT = y + z (mod _PyHASH_MODULUS).</font></i>
<a name='L2609'><i><font color='green'></font></i>
<a name='L2610'><i><font color='green'>           The right-hand side is just the result of rotating the</font></i>
<a name='L2611'><i><font color='green'>           _PyHASH_BITS bits of x left by PyLong_SHIFT places; since</font></i>
<a name='L2612'><i><font color='green'>           not all _PyHASH_BITS bits of x are 1s, the same is true</font></i>
<a name='L2613'><i><font color='green'>           after rotation, so 0 &lt;= y+z &lt; _PyHASH_MODULUS and y + z is</font></i>
<a name='L2614'><i><font color='green'>           the reduction of x*2**PyLong_SHIFT modulo</font></i>
<a name='L2615'><i><font color='green'>           _PyHASH_MODULUS. */</font></i>
<a name='L2616'>        x = ((x &lt;&lt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) &amp; <a href='../S/565.html#L143' title='Defined at 143 in Include/pyport.h.'>_PyHASH_MODULUS</a>) |
<a name='L2617'>            (x &gt;&gt; (<a href='../D/6089.html' title='Multiple defined in 2 places.'>_PyHASH_BITS</a> - <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>));
<a name='L2618'>        x += v-&gt;ob_digit[i];
<a name='L2619'>        <b>if</b> (x &gt;= <a href='../S/565.html#L143' title='Defined at 143 in Include/pyport.h.'>_PyHASH_MODULUS</a>)
<a name='L2620'>            x -= <a href='../S/565.html#L143' title='Defined at 143 in Include/pyport.h.'>_PyHASH_MODULUS</a>;
<a name='L2621'>    <font color='red'>}</font>
<a name='L2622'>    x = x * sign;
<a name='L2623'>    <b>if</b> (x == (<a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a>)-1)
<a name='L2624'>        x = (<a href='../S/565.html#L188' title='Defined at 188 in Include/pyport.h.'>Py_uhash_t</a>)-2;
<a name='L2625'>    <b>return</b> (<a href='../S/565.html#L186' title='Defined at 186 in Include/pyport.h.'>Py_hash_t</a>)x;
<a name='L2626'><font color='red'>}</font>
<a name='L2627'>
<a name='L2628'>
<a name='L2629'><i><font color='green'>/* Add the absolute values of two long integers. */</font></i>
<a name='L2630'>
<a name='L2631'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L2632'><a href='../R/11484.html' title='Multiple refered from 6 places.'>x_add</a>(PyLongObject *a, PyLongObject *b)
<a name='L2633'><font color='red'>{</font>
<a name='L2634'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_a = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a)), size_b = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L2635'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L2636'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L2637'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> carry = 0;
<a name='L2638'>
<a name='L2639'>    <i><font color='green'>/* Ensure a is the larger of the two: */</font></i>
<a name='L2640'>    <b>if</b> (size_a &lt; size_b) <font color='red'>{</font>
<a name='L2641'>        <font color='red'>{</font> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *temp = a; a = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = temp; <font color='red'>}</font>
<a name='L2642'>        <font color='red'>{</font> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_temp = size_a;
<a name='L2643'>            size_a = size_b;
<a name='L2644'>            size_b = size_temp; <font color='red'>}</font>
<a name='L2645'>    <font color='red'>}</font>
<a name='L2646'>    z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_a+1);
<a name='L2647'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2648'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2649'>    <b>for</b> (i = 0; i &lt; size_b; ++i) <font color='red'>{</font>
<a name='L2650'>        carry += a-&gt;ob_digit[i] + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i];
<a name='L2651'>        z-&gt;ob_digit[i] = carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L2652'>        carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2653'>    <font color='red'>}</font>
<a name='L2654'>    <b>for</b> (; i &lt; size_a; ++i) <font color='red'>{</font>
<a name='L2655'>        carry += a-&gt;ob_digit[i];
<a name='L2656'>        z-&gt;ob_digit[i] = carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L2657'>        carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2658'>    <font color='red'>}</font>
<a name='L2659'>    z-&gt;ob_digit[i] = carry;
<a name='L2660'>    <b>return</b> <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z);
<a name='L2661'><font color='red'>}</font>
<a name='L2662'>
<a name='L2663'><i><font color='green'>/* Subtract the absolute values of two integers. */</font></i>
<a name='L2664'>
<a name='L2665'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L2666'><a href='../R/11487.html' title='Multiple refered from 4 places.'>x_sub</a>(PyLongObject *a, PyLongObject *b)
<a name='L2667'><font color='red'>{</font>
<a name='L2668'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_a = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a)), size_b = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L2669'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L2670'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L2671'>    <b>int</b> sign = 1;
<a name='L2672'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> borrow = 0;
<a name='L2673'>
<a name='L2674'>    <i><font color='green'>/* Ensure a is the larger of the two: */</font></i>
<a name='L2675'>    <b>if</b> (size_a &lt; size_b) <font color='red'>{</font>
<a name='L2676'>        sign = -1;
<a name='L2677'>        <font color='red'>{</font> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *temp = a; a = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = temp; <font color='red'>}</font>
<a name='L2678'>        <font color='red'>{</font> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_temp = size_a;
<a name='L2679'>            size_a = size_b;
<a name='L2680'>            size_b = size_temp; <font color='red'>}</font>
<a name='L2681'>    <font color='red'>}</font>
<a name='L2682'>    <b>else</b> <b>if</b> (size_a == size_b) <font color='red'>{</font>
<a name='L2683'>        <i><font color='green'>/* Find highest digit where a and b differ: */</font></i>
<a name='L2684'>        i = size_a;
<a name='L2685'>        <b>while</b> (--i &gt;= 0 &amp;&amp; a-&gt;ob_digit[i] == <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i])
<a name='L2686'>            ;
<a name='L2687'>        <b>if</b> (i &lt; 0)
<a name='L2688'>            <b>return</b> (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0);
<a name='L2689'>        <b>if</b> (a-&gt;ob_digit[i] &lt; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i]) <font color='red'>{</font>
<a name='L2690'>            sign = -1;
<a name='L2691'>            <font color='red'>{</font> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *temp = a; a = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = temp; <font color='red'>}</font>
<a name='L2692'>        <font color='red'>}</font>
<a name='L2693'>        size_a = size_b = i+1;
<a name='L2694'>    <font color='red'>}</font>
<a name='L2695'>    z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_a);
<a name='L2696'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2697'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2698'>    <b>for</b> (i = 0; i &lt; size_b; ++i) <font color='red'>{</font>
<a name='L2699'>        <i><font color='green'>/* The following assumes unsigned arithmetic</font></i>
<a name='L2700'><i><font color='green'>           works module 2**N for some N&gt;PyLong_SHIFT. */</font></i>
<a name='L2701'>        borrow = a-&gt;ob_digit[i] - <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i] - borrow;
<a name='L2702'>        z-&gt;ob_digit[i] = borrow &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L2703'>        borrow &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2704'>        borrow &amp;= 1; <i><font color='green'>/* Keep only one sign bit */</font></i>
<a name='L2705'>    <font color='red'>}</font>
<a name='L2706'>    <b>for</b> (; i &lt; size_a; ++i) <font color='red'>{</font>
<a name='L2707'>        borrow = a-&gt;ob_digit[i] - borrow;
<a name='L2708'>        z-&gt;ob_digit[i] = borrow &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L2709'>        borrow &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2710'>        borrow &amp;= 1; <i><font color='green'>/* Keep only one sign bit */</font></i>
<a name='L2711'>    <font color='red'>}</font>
<a name='L2712'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(borrow == 0);
<a name='L2713'>    <b>if</b> (sign &lt; 0)
<a name='L2714'>        <a href='../S/2799.html#L73' title='Defined at 73 in Objects/longobject.c.'>NEGATE</a>(z);
<a name='L2715'>    <b>return</b> <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z);
<a name='L2716'><font color='red'>}</font>
<a name='L2717'>
<a name='L2718'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2719'><a href='../R/8758.html' title='Multiple refered from 6 places.'>long_add</a>(PyLongObject *a, PyLongObject *b)
<a name='L2720'><font color='red'>{</font>
<a name='L2721'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L2722'>
<a name='L2723'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2724'>
<a name='L2725'>    <b>if</b> (<a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a)) &lt;= 1 &amp;&amp; <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>)) &lt;= 1) <font color='red'>{</font>
<a name='L2726'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(a) +
<a name='L2727'>                                          <a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L2728'>        <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L2729'>    <font color='red'>}</font>
<a name='L2730'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0) <font color='red'>{</font>
<a name='L2731'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0) <font color='red'>{</font>
<a name='L2732'>            z = <a href='../S/2799.html#L2632' title='Defined at 2632 in Objects/longobject.c.'>x_add</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2733'>            <b>if</b> (z != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) != 0)
<a name='L2734'>                <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z));
<a name='L2735'>        <font color='red'>}</font>
<a name='L2736'>        <b>else</b>
<a name='L2737'>            z = <a href='../S/2799.html#L2666' title='Defined at 2666 in Objects/longobject.c.'>x_sub</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, a);
<a name='L2738'>    <font color='red'>}</font>
<a name='L2739'>    <b>else</b> <font color='red'>{</font>
<a name='L2740'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0)
<a name='L2741'>            z = <a href='../S/2799.html#L2666' title='Defined at 2666 in Objects/longobject.c.'>x_sub</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2742'>        <b>else</b>
<a name='L2743'>            z = <a href='../S/2799.html#L2632' title='Defined at 2632 in Objects/longobject.c.'>x_add</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2744'>    <font color='red'>}</font>
<a name='L2745'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)z;
<a name='L2746'><font color='red'>}</font>
<a name='L2747'>
<a name='L2748'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L2749'><a href='../R/8792.html' title='Multiple refered from 6 places.'>long_sub</a>(PyLongObject *a, PyLongObject *b)
<a name='L2750'><font color='red'>{</font>
<a name='L2751'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L2752'>
<a name='L2753'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2754'>
<a name='L2755'>    <b>if</b> (<a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a)) &lt;= 1 &amp;&amp; <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>)) &lt;= 1) <font color='red'>{</font>
<a name='L2756'>        <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* r;
<a name='L2757'>        r = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(a)-<a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L2758'>        <b>return</b> r;
<a name='L2759'>    <font color='red'>}</font>
<a name='L2760'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0) <font color='red'>{</font>
<a name='L2761'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0)
<a name='L2762'>            z = <a href='../S/2799.html#L2666' title='Defined at 2666 in Objects/longobject.c.'>x_sub</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2763'>        <b>else</b>
<a name='L2764'>            z = <a href='../S/2799.html#L2632' title='Defined at 2632 in Objects/longobject.c.'>x_add</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2765'>        <b>if</b> (z != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) != 0)
<a name='L2766'>            <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z));
<a name='L2767'>    <font color='red'>}</font>
<a name='L2768'>    <b>else</b> <font color='red'>{</font>
<a name='L2769'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0)
<a name='L2770'>            z = <a href='../S/2799.html#L2632' title='Defined at 2632 in Objects/longobject.c.'>x_add</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2771'>        <b>else</b>
<a name='L2772'>            z = <a href='../S/2799.html#L2666' title='Defined at 2666 in Objects/longobject.c.'>x_sub</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2773'>    <font color='red'>}</font>
<a name='L2774'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)z;
<a name='L2775'><font color='red'>}</font>
<a name='L2776'>
<a name='L2777'><i><font color='green'>/* Grade school multiplication, ignoring the signs.</font></i>
<a name='L2778'><i><font color='green'> * Returns the absolute value of the product, or NULL if error.</font></i>
<a name='L2779'><i><font color='green'> */</font></i>
<a name='L2780'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L2781'><a href='../S/2799.html#L2946' title='Refered from 2946 in Objects/longobject.c.'>x_mul</a>(PyLongObject *a, PyLongObject *b)
<a name='L2782'><font color='red'>{</font>
<a name='L2783'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L2784'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_a = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L2785'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_b = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L2786'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L2787'>
<a name='L2788'>    z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_a + size_b);
<a name='L2789'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2790'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2791'>
<a name='L2792'>    memset(z-&gt;ob_digit, 0, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L2793'>    <b>if</b> (a == <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) <font color='red'>{</font>
<a name='L2794'>        <i><font color='green'>/* Efficient squaring per HAC, Algorithm 14.16:</font></i>
<a name='L2795'><i><font color='green'>         * http://www.cacr.math.uwaterloo.ca/hac/about/chap14.pdf</font></i>
<a name='L2796'><i><font color='green'>         * Gives slightly less than a 2x speedup when a == b,</font></i>
<a name='L2797'><i><font color='green'>         * via exploiting that each entry in the multiplication</font></i>
<a name='L2798'><i><font color='green'>         * pyramid appears twice (except for the size_a squares).</font></i>
<a name='L2799'><i><font color='green'>         */</font></i>
<a name='L2800'>        <b>for</b> (i = 0; i &lt; size_a; ++i) <font color='red'>{</font>
<a name='L2801'>            <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> carry;
<a name='L2802'>            <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> f = a-&gt;ob_digit[i];
<a name='L2803'>            <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *pz = z-&gt;ob_digit + (i &lt;&lt; 1);
<a name='L2804'>            <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *pa = a-&gt;ob_digit + i + 1;
<a name='L2805'>            <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *paend = a-&gt;ob_digit + size_a;
<a name='L2806'>
<a name='L2807'>            <a href='../S/2799.html#L97' title='Defined at 97 in Objects/longobject.c.'>SIGCHECK</a>(<font color='red'>{</font>
<a name='L2808'>                    Py_DECREF(z);
<a name='L2809'>                    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2810'>                <font color='red'>}</font>);
<a name='L2811'>
<a name='L2812'>            carry = *pz + f * f;
<a name='L2813'>            *pz++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2814'>            carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2815'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(carry &lt;= <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2816'>
<a name='L2817'>            <i><font color='green'>/* Now f is added in twice in each column of the</font></i>
<a name='L2818'><i><font color='green'>             * pyramid it appears.  Same as adding f&lt;&lt;1 once.</font></i>
<a name='L2819'><i><font color='green'>             */</font></i>
<a name='L2820'>            f &lt;&lt;= 1;
<a name='L2821'>            <b>while</b> (pa &lt; paend) <font color='red'>{</font>
<a name='L2822'>                carry += *pz + *pa++ * f;
<a name='L2823'>                *pz++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2824'>                carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2825'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(carry &lt;= (<a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a> &lt;&lt; 1));
<a name='L2826'>            <font color='red'>}</font>
<a name='L2827'>            <b>if</b> (carry) <font color='red'>{</font>
<a name='L2828'>                carry += *pz;
<a name='L2829'>                *pz++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2830'>                carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2831'>            <font color='red'>}</font>
<a name='L2832'>            <b>if</b> (carry)
<a name='L2833'>                *pz += (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2834'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>((carry &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) == 0);
<a name='L2835'>        <font color='red'>}</font>
<a name='L2836'>    <font color='red'>}</font>
<a name='L2837'>    <b>else</b> <font color='red'>{</font>      <i><font color='green'>/* a is not the same as b -- gradeschool long mult */</font></i>
<a name='L2838'>        <b>for</b> (i = 0; i &lt; size_a; ++i) <font color='red'>{</font>
<a name='L2839'>            <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> carry = 0;
<a name='L2840'>            <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> f = a-&gt;ob_digit[i];
<a name='L2841'>            <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *pz = z-&gt;ob_digit + i;
<a name='L2842'>            <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *pb = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit;
<a name='L2843'>            <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> *pbend = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit + size_b;
<a name='L2844'>
<a name='L2845'>            <a href='../S/2799.html#L97' title='Defined at 97 in Objects/longobject.c.'>SIGCHECK</a>(<font color='red'>{</font>
<a name='L2846'>                    Py_DECREF(z);
<a name='L2847'>                    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2848'>                <font color='red'>}</font>);
<a name='L2849'>
<a name='L2850'>            <b>while</b> (pb &lt; pbend) <font color='red'>{</font>
<a name='L2851'>                carry += *pz + *pb++ * f;
<a name='L2852'>                *pz++ = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2853'>                carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L2854'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(carry &lt;= <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2855'>            <font color='red'>}</font>
<a name='L2856'>            <b>if</b> (carry)
<a name='L2857'>                *pz += (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L2858'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>((carry &gt;&gt; <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>) == 0);
<a name='L2859'>        <font color='red'>}</font>
<a name='L2860'>    <font color='red'>}</font>
<a name='L2861'>    <b>return</b> <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z);
<a name='L2862'><font color='red'>}</font>
<a name='L2863'>
<a name='L2864'><i><font color='green'>/* A helper for Karatsuba multiplication (k_mul).</font></i>
<a name='L2865'><i><font color='green'>   Takes a long "n" and an integer "size" representing the place to</font></i>
<a name='L2866'><i><font color='green'>   split, and sets low and high such that abs(n) == (high &lt;&lt; size) + low,</font></i>
<a name='L2867'><i><font color='green'>   viewing the shift as being by digits.  The sign bit is ignored, and</font></i>
<a name='L2868'><i><font color='green'>   the return values are &gt;= 0.</font></i>
<a name='L2869'><i><font color='green'>   Returns 0 on success, -1 on failure.</font></i>
<a name='L2870'><i><font color='green'>*/</font></i>
<a name='L2871'><b>static</b> <b>int</b>
<a name='L2872'><a href='../R/8585.html' title='Multiple refered from 2 places.'>kmul_split</a>(PyLongObject *n,
<a name='L2873'>           <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size,
<a name='L2874'>           PyLongObject **high,
<a name='L2875'>           PyLongObject **low)
<a name='L2876'><font color='red'>{</font>
<a name='L2877'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *hi, *lo;
<a name='L2878'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_lo, size_hi;
<a name='L2879'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_n = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(n));
<a name='L2880'>
<a name='L2881'>    size_lo = <a href='../D/2125.html' title='Multiple defined in 11 places.'>MIN</a>(size_n, size);
<a name='L2882'>    size_hi = size_n - size_lo;
<a name='L2883'>
<a name='L2884'>    <b>if</b> ((hi = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_hi)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2885'>        <b>return</b> -1;
<a name='L2886'>    <b>if</b> ((lo = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_lo)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2887'>        Py_DECREF(hi);
<a name='L2888'>        <b>return</b> -1;
<a name='L2889'>    <font color='red'>}</font>
<a name='L2890'>
<a name='L2891'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(lo-&gt;ob_digit, n-&gt;ob_digit, size_lo * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L2892'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(hi-&gt;ob_digit, n-&gt;ob_digit + size_lo, size_hi * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L2893'>
<a name='L2894'>    *high = <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(hi);
<a name='L2895'>    *low = <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(lo);
<a name='L2896'>    <b>return</b> 0;
<a name='L2897'><font color='red'>}</font>
<a name='L2898'>
<a name='L2899'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *<a href='../S/2799.html#L3127' title='Defined at 3127 in Objects/longobject.c.'>k_lopsided_mul</a>(PyLongObject *a, PyLongObject *b);
<a name='L2900'>
<a name='L2901'><i><font color='green'>/* Karatsuba multiplication.  Ignores the input signs, and returns the</font></i>
<a name='L2902'><i><font color='green'> * absolute value of the product (or NULL if error).</font></i>
<a name='L2903'><i><font color='green'> * See Knuth Vol. 2 Chapter 4.3.3 (Pp. 294-295).</font></i>
<a name='L2904'><i><font color='green'> */</font></i>
<a name='L2905'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L2906'><a href='../R/8579.html' title='Multiple refered from 5 places.'>k_mul</a>(PyLongObject *a, PyLongObject *b)
<a name='L2907'><font color='red'>{</font>
<a name='L2908'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> asize = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L2909'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> bsize = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L2910'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *ah = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2911'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *al = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2912'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *bh = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2913'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *bl = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2914'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2915'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>, *<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>, *<a href='../S/2333.html#L125' title='Defined at 125 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t3</a>;
<a name='L2916'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>;           <i><font color='green'>/* the number of digits we split off */</font></i>
<a name='L2917'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L2918'>
<a name='L2919'>    <i><font color='green'>/* (ah*X+al)(bh*X+bl) = ah*bh*X*X + (ah*bl + al*bh)*X + al*bl</font></i>
<a name='L2920'><i><font color='green'>     * Let k = (ah+al)*(bh+bl) = ah*bl + al*bh  + ah*bh + al*bl</font></i>
<a name='L2921'><i><font color='green'>     * Then the original product is</font></i>
<a name='L2922'><i><font color='green'>     *     ah*bh*X*X + (k - ah*bh - al*bl)*X + al*bl</font></i>
<a name='L2923'><i><font color='green'>     * By picking X to be a power of 2, "*X" is just shifting, and it's</font></i>
<a name='L2924'><i><font color='green'>     * been reduced to 3 multiplies on numbers half the size.</font></i>
<a name='L2925'><i><font color='green'>     */</font></i>
<a name='L2926'>
<a name='L2927'>    <i><font color='green'>/* We want to split based on the larger number; fiddle so that b</font></i>
<a name='L2928'><i><font color='green'>     * is largest.</font></i>
<a name='L2929'><i><font color='green'>     */</font></i>
<a name='L2930'>    <b>if</b> (asize &gt; bsize) <font color='red'>{</font>
<a name='L2931'>        <a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a> = a;
<a name='L2932'>        a = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L2933'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>;
<a name='L2934'>
<a name='L2935'>        i = asize;
<a name='L2936'>        asize = bsize;
<a name='L2937'>        bsize = i;
<a name='L2938'>    <font color='red'>}</font>
<a name='L2939'>
<a name='L2940'>    <i><font color='green'>/* Use gradeschool math when either number is too small. */</font></i>
<a name='L2941'>    i = a == <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> ? <a href='../S/2799.html#L83' title='Defined at 83 in Objects/longobject.c.'>KARATSUBA_SQUARE_CUTOFF</a> : <a href='../S/2799.html#L82' title='Defined at 82 in Objects/longobject.c.'>KARATSUBA_CUTOFF</a>;
<a name='L2942'>    <b>if</b> (asize &lt;= i) <font color='red'>{</font>
<a name='L2943'>        <b>if</b> (asize == 0)
<a name='L2944'>            <b>return</b> (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0);
<a name='L2945'>        <b>else</b>
<a name='L2946'>            <b>return</b> <a href='../S/2799.html#L2781' title='Defined at 2781 in Objects/longobject.c.'>x_mul</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2947'>    <font color='red'>}</font>
<a name='L2948'>
<a name='L2949'>    <i><font color='green'>/* If a is small compared to b, splitting on b gives a degenerate</font></i>
<a name='L2950'><i><font color='green'>     * case with ah==0, and Karatsuba may be (even much) less efficient</font></i>
<a name='L2951'><i><font color='green'>     * than "grade school" then.  However, we can still win, by viewing</font></i>
<a name='L2952'><i><font color='green'>     * b as a string of "big digits", each of width a-&gt;ob_size.  That</font></i>
<a name='L2953'><i><font color='green'>     * leads to a sequence of balanced calls to k_mul.</font></i>
<a name='L2954'><i><font color='green'>     */</font></i>
<a name='L2955'>    <b>if</b> (2 * asize &lt;= bsize)
<a name='L2956'>        <b>return</b> <a href='../S/2799.html#L3127' title='Defined at 3127 in Objects/longobject.c.'>k_lopsided_mul</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2957'>
<a name='L2958'>    <i><font color='green'>/* Split a &amp; b into hi &amp; lo pieces. */</font></i>
<a name='L2959'>    <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> = bsize &gt;&gt; 1;
<a name='L2960'>    <b>if</b> (<a href='../S/2799.html#L2872' title='Defined at 2872 in Objects/longobject.c.'>kmul_split</a>(a, <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>, &amp;ah, &amp;al) &lt; 0) <b>goto</b> fail;
<a name='L2961'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(ah) &gt; 0);            <i><font color='green'>/* the split isn't degenerate */</font></i>
<a name='L2962'>
<a name='L2963'>    <b>if</b> (a == <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) <font color='red'>{</font>
<a name='L2964'>        bh = ah;
<a name='L2965'>        bl = al;
<a name='L2966'>        Py_INCREF(bh);
<a name='L2967'>        Py_INCREF(bl);
<a name='L2968'>    <font color='red'>}</font>
<a name='L2969'>    <b>else</b> <b>if</b> (<a href='../S/2799.html#L2872' title='Defined at 2872 in Objects/longobject.c.'>kmul_split</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>, &amp;bh, &amp;bl) &lt; 0) <b>goto</b> fail;
<a name='L2970'>
<a name='L2971'>    <i><font color='green'>/* The plan:</font></i>
<a name='L2972'><i><font color='green'>     * 1. Allocate result space (asize + bsize digits:  that's always</font></i>
<a name='L2973'><i><font color='green'>     *    enough).</font></i>
<a name='L2974'><i><font color='green'>     * 2. Compute ah*bh, and copy into result at 2*shift.</font></i>
<a name='L2975'><i><font color='green'>     * 3. Compute al*bl, and copy into result at 0.  Note that this</font></i>
<a name='L2976'><i><font color='green'>     *    can't overlap with #2.</font></i>
<a name='L2977'><i><font color='green'>     * 4. Subtract al*bl from the result, starting at shift.  This may</font></i>
<a name='L2978'><i><font color='green'>     *    underflow (borrow out of the high digit), but we don't care:</font></i>
<a name='L2979'><i><font color='green'>     *    we're effectively doing unsigned arithmetic mod</font></i>
<a name='L2980'><i><font color='green'>     *    BASE**(sizea + sizeb), and so long as the *final* result fits,</font></i>
<a name='L2981'><i><font color='green'>     *    borrows and carries out of the high digit can be ignored.</font></i>
<a name='L2982'><i><font color='green'>     * 5. Subtract ah*bh from the result, starting at shift.</font></i>
<a name='L2983'><i><font color='green'>     * 6. Compute (ah+al)*(bh+bl), and add it into the result starting</font></i>
<a name='L2984'><i><font color='green'>     *    at shift.</font></i>
<a name='L2985'><i><font color='green'>     */</font></i>
<a name='L2986'>
<a name='L2987'>    <i><font color='green'>/* 1. Allocate result space. */</font></i>
<a name='L2988'>    ret = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(asize + bsize);
<a name='L2989'>    <b>if</b> (ret == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <b>goto</b> fail;
<a name='L2990'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L366' title='Defined at 366 in PC/pyconfig.h.'>Py_DEBUG</a>
<a name='L2991'>    <i><font color='green'>/* Fill with trash, to catch reference to uninitialized digits. */</font></i>
<a name='L2992'>    memset(ret-&gt;ob_digit, 0xDF, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(ret) * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L2993'><font color='darkred'>#endif</font>
<a name='L2994'>
<a name='L2995'>    <i><font color='green'>/* 2. t1 &lt;- ah*bh, and copy into high digits of result. */</font></i>
<a name='L2996'>    <b>if</b> ((<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a> = <a href='../S/2799.html#L2906' title='Defined at 2906 in Objects/longobject.c.'>k_mul</a>(ah, bh)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <b>goto</b> fail;
<a name='L2997'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>) &gt;= 0);
<a name='L2998'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(2*<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> + <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>) &lt;= <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(ret));
<a name='L2999'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(ret-&gt;ob_digit + 2*<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>, <a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>-&gt;ob_digit,
<a name='L3000'>           <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>) * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L3001'>
<a name='L3002'>    <i><font color='green'>/* Zero-out the digits higher than the ah*bh copy. */</font></i>
<a name='L3003'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(ret) - 2*<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> - <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>);
<a name='L3004'>    <b>if</b> (i)
<a name='L3005'>        memset(ret-&gt;ob_digit + 2*<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> + <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>), 0,
<a name='L3006'>               i * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L3007'>
<a name='L3008'>    <i><font color='green'>/* 3. t2 &lt;- al*bl, and copy into the low digits. */</font></i>
<a name='L3009'>    <b>if</b> ((<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a> = <a href='../S/2799.html#L2906' title='Defined at 2906 in Objects/longobject.c.'>k_mul</a>(al, bl)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3010'>        Py_DECREF(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>);
<a name='L3011'>        <b>goto</b> fail;
<a name='L3012'>    <font color='red'>}</font>
<a name='L3013'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>) &gt;= 0);
<a name='L3014'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>) &lt;= 2*<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>); <i><font color='green'>/* no overlap with high digits */</font></i>
<a name='L3015'>    <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(ret-&gt;ob_digit, <a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>-&gt;ob_digit, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>) * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L3016'>
<a name='L3017'>    <i><font color='green'>/* Zero out remaining digits. */</font></i>
<a name='L3018'>    i = 2*<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> - <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>);          <i><font color='green'>/* number of uninitialized digits */</font></i>
<a name='L3019'>    <b>if</b> (i)
<a name='L3020'>        memset(ret-&gt;ob_digit + <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>), 0, i * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L3021'>
<a name='L3022'>    <i><font color='green'>/* 4 &amp; 5. Subtract ah*bh (t1) and al*bl (t2).  We do al*bl first</font></i>
<a name='L3023'><i><font color='green'>     * because it's fresher in cache.</font></i>
<a name='L3024'><i><font color='green'>     */</font></i>
<a name='L3025'>    i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(ret) - <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>;  <i><font color='green'>/* # digits after shift */</font></i>
<a name='L3026'>    (<b>void</b>)<a href='../S/2799.html#L1442' title='Defined at 1442 in Objects/longobject.c.'>v_isub</a>(ret-&gt;ob_digit + <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>, i, <a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>-&gt;ob_digit, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>));
<a name='L3027'>    Py_DECREF(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>);
<a name='L3028'>
<a name='L3029'>    (<b>void</b>)<a href='../S/2799.html#L1442' title='Defined at 1442 in Objects/longobject.c.'>v_isub</a>(ret-&gt;ob_digit + <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>, i, <a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>-&gt;ob_digit, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>));
<a name='L3030'>    Py_DECREF(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>);
<a name='L3031'>
<a name='L3032'>    <i><font color='green'>/* 6. t3 &lt;- (ah+al)(bh+bl), and add into result. */</font></i>
<a name='L3033'>    <b>if</b> ((<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a> = <a href='../S/2799.html#L2632' title='Defined at 2632 in Objects/longobject.c.'>x_add</a>(ah, al)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <b>goto</b> fail;
<a name='L3034'>    Py_DECREF(ah);
<a name='L3035'>    Py_DECREF(al);
<a name='L3036'>    ah = al = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3037'>
<a name='L3038'>    <b>if</b> (a == <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) <font color='red'>{</font>
<a name='L3039'>        <a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a> = <a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>;
<a name='L3040'>        Py_INCREF(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>);
<a name='L3041'>    <font color='red'>}</font>
<a name='L3042'>    <b>else</b> <b>if</b> ((<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a> = <a href='../S/2799.html#L2632' title='Defined at 2632 in Objects/longobject.c.'>x_add</a>(bh, bl)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3043'>        Py_DECREF(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>);
<a name='L3044'>        <b>goto</b> fail;
<a name='L3045'>    <font color='red'>}</font>
<a name='L3046'>    Py_DECREF(bh);
<a name='L3047'>    Py_DECREF(bl);
<a name='L3048'>    bh = bl = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3049'>
<a name='L3050'>    <a href='../S/2333.html#L125' title='Defined at 125 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t3</a> = <a href='../S/2799.html#L2906' title='Defined at 2906 in Objects/longobject.c.'>k_mul</a>(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>, <a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>);
<a name='L3051'>    Py_DECREF(<a href='../S/2333.html#L123' title='Defined at 123 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t1</a>);
<a name='L3052'>    Py_DECREF(<a href='../S/2333.html#L124' title='Defined at 124 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t2</a>);
<a name='L3053'>    <b>if</b> (<a href='../S/2333.html#L125' title='Defined at 125 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t3</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <b>goto</b> fail;
<a name='L3054'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L125' title='Defined at 125 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t3</a>) &gt;= 0);
<a name='L3055'>
<a name='L3056'>    <i><font color='green'>/* Add t3.  It's not obvious why we can't run out of room here.</font></i>
<a name='L3057'><i><font color='green'>     * See the (*) comment after this function.</font></i>
<a name='L3058'><i><font color='green'>     */</font></i>
<a name='L3059'>    (<b>void</b>)<a href='../S/2799.html#L1416' title='Defined at 1416 in Objects/longobject.c.'>v_iadd</a>(ret-&gt;ob_digit + <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>, i, <a href='../S/2333.html#L125' title='Defined at 125 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t3</a>-&gt;ob_digit, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2333.html#L125' title='Defined at 125 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t3</a>));
<a name='L3060'>    Py_DECREF(<a href='../S/2333.html#L125' title='Defined at 125 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>t3</a>);
<a name='L3061'>
<a name='L3062'>    <b>return</b> <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(ret);
<a name='L3063'>
<a name='L3064'>  fail:
<a name='L3065'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(ret);
<a name='L3066'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(ah);
<a name='L3067'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(al);
<a name='L3068'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(bh);
<a name='L3069'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(bl);
<a name='L3070'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3071'><font color='red'>}</font>
<a name='L3072'>
<a name='L3073'><i><font color='green'>/* (*) Why adding t3 can't "run out of room" above.</font></i>
<a name='L3074'><i><font color='green'></font></i>
<a name='L3075'><i><font color='green'>Let f(x) mean the floor of x and c(x) mean the ceiling of x.  Some facts</font></i>
<a name='L3076'><i><font color='green'>to start with:</font></i>
<a name='L3077'><i><font color='green'></font></i>
<a name='L3078'><i><font color='green'>1. For any integer i, i = c(i/2) + f(i/2).  In particular,</font></i>
<a name='L3079'><i><font color='green'>   bsize = c(bsize/2) + f(bsize/2).</font></i>
<a name='L3080'><i><font color='green'>2. shift = f(bsize/2)</font></i>
<a name='L3081'><i><font color='green'>3. asize &lt;= bsize</font></i>
<a name='L3082'><i><font color='green'>4. Since we call k_lopsided_mul if asize*2 &lt;= bsize, asize*2 &gt; bsize in this</font></i>
<a name='L3083'><i><font color='green'>   routine, so asize &gt; bsize/2 &gt;= f(bsize/2) in this routine.</font></i>
<a name='L3084'><i><font color='green'></font></i>
<a name='L3085'><i><font color='green'>We allocated asize + bsize result digits, and add t3 into them at an offset</font></i>
<a name='L3086'><i><font color='green'>of shift.  This leaves asize+bsize-shift allocated digit positions for t3</font></i>
<a name='L3087'><i><font color='green'>to fit into, = (by #1 and #2) asize + f(bsize/2) + c(bsize/2) - f(bsize/2) =</font></i>
<a name='L3088'><i><font color='green'>asize + c(bsize/2) available digit positions.</font></i>
<a name='L3089'><i><font color='green'></font></i>
<a name='L3090'><i><font color='green'>bh has c(bsize/2) digits, and bl at most f(size/2) digits.  So bh+hl has</font></i>
<a name='L3091'><i><font color='green'>at most c(bsize/2) digits + 1 bit.</font></i>
<a name='L3092'><i><font color='green'></font></i>
<a name='L3093'><i><font color='green'>If asize == bsize, ah has c(bsize/2) digits, else ah has at most f(bsize/2)</font></i>
<a name='L3094'><i><font color='green'>digits, and al has at most f(bsize/2) digits in any case.  So ah+al has at</font></i>
<a name='L3095'><i><font color='green'>most (asize == bsize ? c(bsize/2) : f(bsize/2)) digits + 1 bit.</font></i>
<a name='L3096'><i><font color='green'></font></i>
<a name='L3097'><i><font color='green'>The product (ah+al)*(bh+bl) therefore has at most</font></i>
<a name='L3098'><i><font color='green'></font></i>
<a name='L3099'><i><font color='green'>    c(bsize/2) + (asize == bsize ? c(bsize/2) : f(bsize/2)) digits + 2 bits</font></i>
<a name='L3100'><i><font color='green'></font></i>
<a name='L3101'><i><font color='green'>and we have asize + c(bsize/2) available digit positions.  We need to show</font></i>
<a name='L3102'><i><font color='green'>this is always enough.  An instance of c(bsize/2) cancels out in both, so</font></i>
<a name='L3103'><i><font color='green'>the question reduces to whether asize digits is enough to hold</font></i>
<a name='L3104'><i><font color='green'>(asize == bsize ? c(bsize/2) : f(bsize/2)) digits + 2 bits.  If asize &lt; bsize,</font></i>
<a name='L3105'><i><font color='green'>then we're asking whether asize digits &gt;= f(bsize/2) digits + 2 bits.  By #4,</font></i>
<a name='L3106'><i><font color='green'>asize is at least f(bsize/2)+1 digits, so this in turn reduces to whether 1</font></i>
<a name='L3107'><i><font color='green'>digit is enough to hold 2 bits.  This is so since PyLong_SHIFT=15 &gt;= 2.  If</font></i>
<a name='L3108'><i><font color='green'>asize == bsize, then we're asking whether bsize digits is enough to hold</font></i>
<a name='L3109'><i><font color='green'>c(bsize/2) digits + 2 bits, or equivalently (by #1) whether f(bsize/2) digits</font></i>
<a name='L3110'><i><font color='green'>is enough to hold 2 bits.  This is so if bsize &gt;= 2, which holds because</font></i>
<a name='L3111'><i><font color='green'>bsize &gt;= KARATSUBA_CUTOFF &gt;= 2.</font></i>
<a name='L3112'><i><font color='green'></font></i>
<a name='L3113'><i><font color='green'>Note that since there's always enough room for (ah+al)*(bh+bl), and that's</font></i>
<a name='L3114'><i><font color='green'>clearly &gt;= each of ah*bh and al*bl, there's always enough room to subtract</font></i>
<a name='L3115'><i><font color='green'>ah*bh and al*bl too.</font></i>
<a name='L3116'><i><font color='green'>*/</font></i>
<a name='L3117'>
<a name='L3118'><i><font color='green'>/* b has at least twice the digits of a, and a is big enough that Karatsuba</font></i>
<a name='L3119'><i><font color='green'> * would pay off *if* the inputs had balanced sizes.  View b as a sequence</font></i>
<a name='L3120'><i><font color='green'> * of slices, each with a-&gt;ob_size digits, and multiply the slices by a,</font></i>
<a name='L3121'><i><font color='green'> * one at a time.  This gives k_mul balanced inputs to work with, and is</font></i>
<a name='L3122'><i><font color='green'> * also cache-friendly (we compute one double-width slice of the result</font></i>
<a name='L3123'><i><font color='green'> * at a time, then move on, never bactracking except for the helpful</font></i>
<a name='L3124'><i><font color='green'> * single-width slice overlap between successive partial sums).</font></i>
<a name='L3125'><i><font color='green'> */</font></i>
<a name='L3126'><b>static</b> <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *
<a name='L3127'><a href='../R/8578.html' title='Multiple refered from 2 places.'>k_lopsided_mul</a>(PyLongObject *a, PyLongObject *b)
<a name='L3128'><font color='red'>{</font>
<a name='L3129'>    <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> asize = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L3130'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> bsize = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L3131'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nbdone;          <i><font color='green'>/* # of b digits already multiplied */</font></i>
<a name='L3132'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *ret;
<a name='L3133'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *bslice = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3134'>
<a name='L3135'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(asize &gt; <a href='../S/2799.html#L82' title='Defined at 82 in Objects/longobject.c.'>KARATSUBA_CUTOFF</a>);
<a name='L3136'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(2 * asize &lt;= bsize);
<a name='L3137'>
<a name='L3138'>    <i><font color='green'>/* Allocate result space, and zero it out. */</font></i>
<a name='L3139'>    ret = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(asize + bsize);
<a name='L3140'>    <b>if</b> (ret == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3141'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3142'>    memset(ret-&gt;ob_digit, 0, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(ret) * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L3143'>
<a name='L3144'>    <i><font color='green'>/* Successive slices of b are copied into bslice. */</font></i>
<a name='L3145'>    bslice = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(asize);
<a name='L3146'>    <b>if</b> (bslice == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3147'>        <b>goto</b> fail;
<a name='L3148'>
<a name='L3149'>    nbdone = 0;
<a name='L3150'>    <b>while</b> (bsize &gt; 0) <font color='red'>{</font>
<a name='L3151'>        <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *product;
<a name='L3152'>        <b>const</b> <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> nbtouse = <a href='../D/2125.html' title='Multiple defined in 11 places.'>MIN</a>(bsize, asize);
<a name='L3153'>
<a name='L3154'>        <i><font color='green'>/* Multiply the next slice of b by a. */</font></i>
<a name='L3155'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(bslice-&gt;ob_digit, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit + nbdone,
<a name='L3156'>               nbtouse * <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L3157'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(bslice) = nbtouse;
<a name='L3158'>        product = <a href='../S/2799.html#L2906' title='Defined at 2906 in Objects/longobject.c.'>k_mul</a>(a, bslice);
<a name='L3159'>        <b>if</b> (product == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3160'>            <b>goto</b> fail;
<a name='L3161'>
<a name='L3162'>        <i><font color='green'>/* Add into result. */</font></i>
<a name='L3163'>        (<b>void</b>)<a href='../S/2799.html#L1416' title='Defined at 1416 in Objects/longobject.c.'>v_iadd</a>(ret-&gt;ob_digit + nbdone, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(ret) - nbdone,
<a name='L3164'>                     product-&gt;ob_digit, <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(product));
<a name='L3165'>        Py_DECREF(product);
<a name='L3166'>
<a name='L3167'>        bsize -= nbtouse;
<a name='L3168'>        nbdone += nbtouse;
<a name='L3169'>    <font color='red'>}</font>
<a name='L3170'>
<a name='L3171'>    Py_DECREF(bslice);
<a name='L3172'>    <b>return</b> <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(ret);
<a name='L3173'>
<a name='L3174'>  fail:
<a name='L3175'>    Py_DECREF(ret);
<a name='L3176'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(bslice);
<a name='L3177'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3178'><font color='red'>}</font>
<a name='L3179'>
<a name='L3180'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3181'><a href='../R/8782.html' title='Multiple refered from 3 places.'>long_mul</a>(PyLongObject *a, PyLongObject *b)
<a name='L3182'><font color='red'>{</font>
<a name='L3183'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L3184'>
<a name='L3185'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3186'>
<a name='L3187'>    <i><font color='green'>/* fast path for single-digit multiplication */</font></i>
<a name='L3188'>    <b>if</b> (<a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a)) &lt;= 1 &amp;&amp; <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>)) &lt;= 1) <font color='red'>{</font>
<a name='L3189'>        <a href='../D/11479.html' title='Multiple defined in 2 places.'>stwodigits</a> v = (<a href='../D/11479.html' title='Multiple defined in 2 places.'>stwodigits</a>)(<a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(a)) * <a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3190'><font color='darkred'>#ifdef</font> <a href='../D/1527.html' title='Multiple defined in 2 places.'>HAVE_LONG_LONG</a>
<a name='L3191'>        <b>return</b> <a href='../S/2799.html#L994' title='Defined at 994 in Objects/longobject.c.'>PyLong_FromLongLong</a>((<a href='../D/2608.html' title='Multiple defined in 3 places.'>PY_LONG_LONG</a>)v);
<a name='L3192'><font color='darkred'>#else</font>
<a name='L3193'>        <i><font color='green'>/* if we don't have long long then we're almost certainly</font></i>
<a name='L3194'><i><font color='green'>           using 15-bit digits, so v will fit in a long.  In the</font></i>
<a name='L3195'><i><font color='green'>           unlikely event that we're using 30-bit digits on a platform</font></i>
<a name='L3196'><i><font color='green'>           without long long, a large v will just cause us to fall</font></i>
<a name='L3197'><i><font color='green'>           through to the general multiplication code below. */</font></i>
<a name='L3198'>        <b>if</b> (v &gt;= <a href='../S/565.html#L767' title='Defined at 767 in Include/pyport.h.'>LONG_MIN</a> &amp;&amp; v &lt;= <a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>)
<a name='L3199'>            <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)v);
<a name='L3200'><font color='darkred'>#endif</font>
<a name='L3201'>    <font color='red'>}</font>
<a name='L3202'>
<a name='L3203'>    z = <a href='../S/2799.html#L2906' title='Defined at 2906 in Objects/longobject.c.'>k_mul</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3204'>    <i><font color='green'>/* Negate if exactly one of the inputs is negative. */</font></i>
<a name='L3205'>    <b>if</b> (((<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) ^ <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>)) &lt; 0) &amp;&amp; z)
<a name='L3206'>        <a href='../S/2799.html#L73' title='Defined at 73 in Objects/longobject.c.'>NEGATE</a>(z);
<a name='L3207'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)z;
<a name='L3208'><font color='red'>}</font>
<a name='L3209'>
<a name='L3210'><i><font color='green'>/* The / and % operators are now defined in terms of divmod().</font></i>
<a name='L3211'><i><font color='green'>   The expression a mod b has the value a - b*floor(a/b).</font></i>
<a name='L3212'><i><font color='green'>   The long_divrem function gives the remainder after division of</font></i>
<a name='L3213'><i><font color='green'>   |a| by |b|, with the sign of a.  This is also expressed</font></i>
<a name='L3214'><i><font color='green'>   as a - b*trunc(a/b), if trunc truncates towards zero.</font></i>
<a name='L3215'><i><font color='green'>   Some examples:</font></i>
<a name='L3216'><i><font color='green'>     a           b      a rem b         a mod b</font></i>
<a name='L3217'><i><font color='green'>     13          10      3               3</font></i>
<a name='L3218'><i><font color='green'>    -13          10     -3               7</font></i>
<a name='L3219'><i><font color='green'>     13         -10      3              -7</font></i>
<a name='L3220'><i><font color='green'>    -13         -10     -3              -3</font></i>
<a name='L3221'><i><font color='green'>   So, to get from rem to mod, we have to add b if a and b</font></i>
<a name='L3222'><i><font color='green'>   have different signs.  We then subtract one from the 'div'</font></i>
<a name='L3223'><i><font color='green'>   part of the outcome to keep the invariant intact. */</font></i>
<a name='L3224'>
<a name='L3225'><i><font color='green'>/* Compute</font></i>
<a name='L3226'><i><font color='green'> *     *pdiv, *pmod = divmod(v, w)</font></i>
<a name='L3227'><i><font color='green'> * NULL can be passed for pdiv or pmod, in which case that part of</font></i>
<a name='L3228'><i><font color='green'> * the result is simply thrown away.  The caller owns a reference to</font></i>
<a name='L3229'><i><font color='green'> * each of these it requests (does not pass NULL for).</font></i>
<a name='L3230'><i><font color='green'> */</font></i>
<a name='L3231'><b>static</b> <b>int</b>
<a name='L3232'><a href='../R/8604.html' title='Multiple refered from 5 places.'>l_divmod</a>(PyLongObject *v, PyLongObject *w,
<a name='L3233'>         PyLongObject **pdiv, PyLongObject **pmod)
<a name='L3234'><font color='red'>{</font>
<a name='L3235'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *div, *mod;
<a name='L3236'>
<a name='L3237'>    <b>if</b> (<a href='../S/2799.html#L2175' title='Defined at 2175 in Objects/longobject.c.'>long_divrem</a>(v, w, &amp;div, &amp;mod) &lt; 0)
<a name='L3238'>        <b>return</b> -1;
<a name='L3239'>    <b>if</b> ((<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(mod) &lt; 0 &amp;&amp; <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(w) &gt; 0) ||
<a name='L3240'>        (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(mod) &gt; 0 &amp;&amp; <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(w) &lt; 0)) <font color='red'>{</font>
<a name='L3241'>        <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *temp;
<a name='L3242'>        <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *one;
<a name='L3243'>        temp = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) <a href='../S/2799.html#L2719' title='Defined at 2719 in Objects/longobject.c.'>long_add</a>(mod, w);
<a name='L3244'>        Py_DECREF(mod);
<a name='L3245'>        mod = temp;
<a name='L3246'>        <b>if</b> (mod == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3247'>            Py_DECREF(div);
<a name='L3248'>            <b>return</b> -1;
<a name='L3249'>        <font color='red'>}</font>
<a name='L3250'>        one = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(1L);
<a name='L3251'>        <b>if</b> (one == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> ||
<a name='L3252'>            (temp = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) <a href='../S/2799.html#L2749' title='Defined at 2749 in Objects/longobject.c.'>long_sub</a>(div, one)) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3253'>            Py_DECREF(mod);
<a name='L3254'>            Py_DECREF(div);
<a name='L3255'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(one);
<a name='L3256'>            <b>return</b> -1;
<a name='L3257'>        <font color='red'>}</font>
<a name='L3258'>        Py_DECREF(one);
<a name='L3259'>        Py_DECREF(div);
<a name='L3260'>        div = temp;
<a name='L3261'>    <font color='red'>}</font>
<a name='L3262'>    <b>if</b> (pdiv != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3263'>        *pdiv = div;
<a name='L3264'>    <b>else</b>
<a name='L3265'>        Py_DECREF(div);
<a name='L3266'>
<a name='L3267'>    <b>if</b> (pmod != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3268'>        *pmod = mod;
<a name='L3269'>    <b>else</b>
<a name='L3270'>        Py_DECREF(mod);
<a name='L3271'>
<a name='L3272'>    <b>return</b> 0;
<a name='L3273'><font color='red'>}</font>
<a name='L3274'>
<a name='L3275'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3276'><a href='../S/2799.html#L4746' title='Refered from 4746 in Objects/longobject.c.'>long_div</a>(PyObject *a, PyObject *b)
<a name='L3277'><font color='red'>{</font>
<a name='L3278'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *div;
<a name='L3279'>
<a name='L3280'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3281'>    <b>if</b> (<a href='../S/2799.html#L3232' title='Defined at 3232 in Objects/longobject.c.'>l_divmod</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)a, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, &amp;div, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) &lt; 0)
<a name='L3282'>        div = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3283'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)div;
<a name='L3284'><font color='red'>}</font>
<a name='L3285'>
<a name='L3286'><i><font color='green'>/* PyLong/PyLong -&gt; float, with correctly rounded result. */</font></i>
<a name='L3287'>
<a name='L3288'><font color='darkred'>#define</font> <a href='../R/1817.html' title='Multiple refered from 6 places.'>MANT_DIG_DIGITS</a> (DBL_MANT_DIG / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>)
<a name='L3289'><font color='darkred'>#define</font> <a href='../R/1816.html' title='Multiple refered from 2 places.'>MANT_DIG_BITS</a> (DBL_MANT_DIG % <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>)
<a name='L3290'>
<a name='L3291'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3292'><a href='../S/2799.html#L4747' title='Refered from 4747 in Objects/longobject.c.'>long_true_divide</a>(PyObject *v, PyObject *w)
<a name='L3293'><font color='red'>{</font>
<a name='L3294'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *a, *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, *x;
<a name='L3295'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> a_size, b_size, <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>, extra_bits, <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a>, x_size, x_bits;
<a name='L3296'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> mask, low;
<a name='L3297'>    <b>int</b> inexact, negate, a_is_small, b_is_small;
<a name='L3298'>    <b>double</b> dx, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L3299'>
<a name='L3300'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(v, w);
<a name='L3301'>    a = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)v;
<a name='L3302'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)w;
<a name='L3303'>
<a name='L3304'>    <i><font color='green'>/*</font></i>
<a name='L3305'><i><font color='green'>       Method in a nutshell:</font></i>
<a name='L3306'><i><font color='green'></font></i>
<a name='L3307'><i><font color='green'>         0. reduce to case a, b &gt; 0; filter out obvious underflow/overflow</font></i>
<a name='L3308'><i><font color='green'>         1. choose a suitable integer 'shift'</font></i>
<a name='L3309'><i><font color='green'>         2. use integer arithmetic to compute x = floor(2**-shift*a/b)</font></i>
<a name='L3310'><i><font color='green'>         3. adjust x for correct rounding</font></i>
<a name='L3311'><i><font color='green'>         4. convert x to a double dx with the same value</font></i>
<a name='L3312'><i><font color='green'>         5. return ldexp(dx, shift).</font></i>
<a name='L3313'><i><font color='green'></font></i>
<a name='L3314'><i><font color='green'>       In more detail:</font></i>
<a name='L3315'><i><font color='green'></font></i>
<a name='L3316'><i><font color='green'>       0. For any a, a/0 raises ZeroDivisionError; for nonzero b, 0/b</font></i>
<a name='L3317'><i><font color='green'>       returns either 0.0 or -0.0, depending on the sign of b.  For a and</font></i>
<a name='L3318'><i><font color='green'>       b both nonzero, ignore signs of a and b, and add the sign back in</font></i>
<a name='L3319'><i><font color='green'>       at the end.  Now write a_bits and b_bits for the bit lengths of a</font></i>
<a name='L3320'><i><font color='green'>       and b respectively (that is, a_bits = 1 + floor(log_2(a)); likewise</font></i>
<a name='L3321'><i><font color='green'>       for b).  Then</font></i>
<a name='L3322'><i><font color='green'></font></i>
<a name='L3323'><i><font color='green'>          2**(a_bits - b_bits - 1) &lt; a/b &lt; 2**(a_bits - b_bits + 1).</font></i>
<a name='L3324'><i><font color='green'></font></i>
<a name='L3325'><i><font color='green'>       So if a_bits - b_bits &gt; DBL_MAX_EXP then a/b &gt; 2**DBL_MAX_EXP and</font></i>
<a name='L3326'><i><font color='green'>       so overflows.  Similarly, if a_bits - b_bits &lt; DBL_MIN_EXP -</font></i>
<a name='L3327'><i><font color='green'>       DBL_MANT_DIG - 1 then a/b underflows to 0.  With these cases out of</font></i>
<a name='L3328'><i><font color='green'>       the way, we can assume that</font></i>
<a name='L3329'><i><font color='green'></font></i>
<a name='L3330'><i><font color='green'>          DBL_MIN_EXP - DBL_MANT_DIG - 1 &lt;= a_bits - b_bits &lt;= DBL_MAX_EXP.</font></i>
<a name='L3331'><i><font color='green'></font></i>
<a name='L3332'><i><font color='green'>       1. The integer 'shift' is chosen so that x has the right number of</font></i>
<a name='L3333'><i><font color='green'>       bits for a double, plus two or three extra bits that will be used</font></i>
<a name='L3334'><i><font color='green'>       in the rounding decisions.  Writing a_bits and b_bits for the</font></i>
<a name='L3335'><i><font color='green'>       number of significant bits in a and b respectively, a</font></i>
<a name='L3336'><i><font color='green'>       straightforward formula for shift is:</font></i>
<a name='L3337'><i><font color='green'></font></i>
<a name='L3338'><i><font color='green'>          shift = a_bits - b_bits - DBL_MANT_DIG - 2</font></i>
<a name='L3339'><i><font color='green'></font></i>
<a name='L3340'><i><font color='green'>       This is fine in the usual case, but if a/b is smaller than the</font></i>
<a name='L3341'><i><font color='green'>       smallest normal float then it can lead to double rounding on an</font></i>
<a name='L3342'><i><font color='green'>       IEEE 754 platform, giving incorrectly rounded results.  So we</font></i>
<a name='L3343'><i><font color='green'>       adjust the formula slightly.  The actual formula used is:</font></i>
<a name='L3344'><i><font color='green'></font></i>
<a name='L3345'><i><font color='green'>           shift = MAX(a_bits - b_bits, DBL_MIN_EXP) - DBL_MANT_DIG - 2</font></i>
<a name='L3346'><i><font color='green'></font></i>
<a name='L3347'><i><font color='green'>       2. The quantity x is computed by first shifting a (left -shift bits</font></i>
<a name='L3348'><i><font color='green'>       if shift &lt;= 0, right shift bits if shift &gt; 0) and then dividing by</font></i>
<a name='L3349'><i><font color='green'>       b.  For both the shift and the division, we keep track of whether</font></i>
<a name='L3350'><i><font color='green'>       the result is inexact, in a flag 'inexact'; this information is</font></i>
<a name='L3351'><i><font color='green'>       needed at the rounding stage.</font></i>
<a name='L3352'><i><font color='green'></font></i>
<a name='L3353'><i><font color='green'>       With the choice of shift above, together with our assumption that</font></i>
<a name='L3354'><i><font color='green'>       a_bits - b_bits &gt;= DBL_MIN_EXP - DBL_MANT_DIG - 1, it follows</font></i>
<a name='L3355'><i><font color='green'>       that x &gt;= 1.</font></i>
<a name='L3356'><i><font color='green'></font></i>
<a name='L3357'><i><font color='green'>       3. Now x * 2**shift &lt;= a/b &lt; (x+1) * 2**shift.  We want to replace</font></i>
<a name='L3358'><i><font color='green'>       this with an exactly representable float of the form</font></i>
<a name='L3359'><i><font color='green'></font></i>
<a name='L3360'><i><font color='green'>          round(x/2**extra_bits) * 2**(extra_bits+shift).</font></i>
<a name='L3361'><i><font color='green'></font></i>
<a name='L3362'><i><font color='green'>       For float representability, we need x/2**extra_bits &lt;</font></i>
<a name='L3363'><i><font color='green'>       2**DBL_MANT_DIG and extra_bits + shift &gt;= DBL_MIN_EXP -</font></i>
<a name='L3364'><i><font color='green'>       DBL_MANT_DIG.  This translates to the condition:</font></i>
<a name='L3365'><i><font color='green'></font></i>
<a name='L3366'><i><font color='green'>          extra_bits &gt;= MAX(x_bits, DBL_MIN_EXP - shift) - DBL_MANT_DIG</font></i>
<a name='L3367'><i><font color='green'></font></i>
<a name='L3368'><i><font color='green'>       To round, we just modify the bottom digit of x in-place; this can</font></i>
<a name='L3369'><i><font color='green'>       end up giving a digit with value &gt; PyLONG_MASK, but that's not a</font></i>
<a name='L3370'><i><font color='green'>       problem since digits can hold values up to 2*PyLONG_MASK+1.</font></i>
<a name='L3371'><i><font color='green'></font></i>
<a name='L3372'><i><font color='green'>       With the original choices for shift above, extra_bits will always</font></i>
<a name='L3373'><i><font color='green'>       be 2 or 3.  Then rounding under the round-half-to-even rule, we</font></i>
<a name='L3374'><i><font color='green'>       round up iff the most significant of the extra bits is 1, and</font></i>
<a name='L3375'><i><font color='green'>       either: (a) the computation of x in step 2 had an inexact result,</font></i>
<a name='L3376'><i><font color='green'>       or (b) at least one other of the extra bits is 1, or (c) the least</font></i>
<a name='L3377'><i><font color='green'>       significant bit of x (above those to be rounded) is 1.</font></i>
<a name='L3378'><i><font color='green'></font></i>
<a name='L3379'><i><font color='green'>       4. Conversion to a double is straightforward; all floating-point</font></i>
<a name='L3380'><i><font color='green'>       operations involved in the conversion are exact, so there's no</font></i>
<a name='L3381'><i><font color='green'>       danger of rounding errors.</font></i>
<a name='L3382'><i><font color='green'></font></i>
<a name='L3383'><i><font color='green'>       5. Use ldexp(x, shift) to compute x*2**shift, the final result.</font></i>
<a name='L3384'><i><font color='green'>       The result will always be exactly representable as a double, except</font></i>
<a name='L3385'><i><font color='green'>       in the case that it overflows.  To avoid dependence on the exact</font></i>
<a name='L3386'><i><font color='green'>       behaviour of ldexp on overflow, we check for overflow before</font></i>
<a name='L3387'><i><font color='green'>       applying ldexp.  The result of ldexp is adjusted for sign before</font></i>
<a name='L3388'><i><font color='green'>       returning.</font></i>
<a name='L3389'><i><font color='green'>    */</font></i>
<a name='L3390'>
<a name='L3391'>    <i><font color='green'>/* Reduce to case where a and b are both positive. */</font></i>
<a name='L3392'>    a_size = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L3393'>    b_size = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L3394'>    negate = (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0) ^ (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0);
<a name='L3395'>    <b>if</b> (b_size == 0) <font color='red'>{</font>
<a name='L3396'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ZeroDivisionError,
<a name='L3397'>                        "division by zero");
<a name='L3398'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3399'>    <font color='red'>}</font>
<a name='L3400'>    <b>if</b> (a_size == 0)
<a name='L3401'>        <b>goto</b> underflow_or_zero;
<a name='L3402'>
<a name='L3403'>    <i><font color='green'>/* Fast path for a and b small (exactly representable in a double).</font></i>
<a name='L3404'><i><font color='green'>       Relies on floating-point division being correctly rounded; results</font></i>
<a name='L3405'><i><font color='green'>       may be subject to double rounding on x86 machines that operate with</font></i>
<a name='L3406'><i><font color='green'>       the x87 FPU set to 64-bit precision. */</font></i>
<a name='L3407'>    a_is_small = a_size &lt;= <a href='../S/2799.html#L3288' title='Defined at 3288 in Objects/longobject.c.'>MANT_DIG_DIGITS</a> ||
<a name='L3408'>        (a_size == <a href='../S/2799.html#L3288' title='Defined at 3288 in Objects/longobject.c.'>MANT_DIG_DIGITS</a>+1 &amp;&amp;
<a name='L3409'>         a-&gt;ob_digit[<a href='../S/2799.html#L3288' title='Defined at 3288 in Objects/longobject.c.'>MANT_DIG_DIGITS</a>] &gt;&gt; <a href='../S/2799.html#L3289' title='Defined at 3289 in Objects/longobject.c.'>MANT_DIG_BITS</a> == 0);
<a name='L3410'>    b_is_small = b_size &lt;= <a href='../S/2799.html#L3288' title='Defined at 3288 in Objects/longobject.c.'>MANT_DIG_DIGITS</a> ||
<a name='L3411'>        (b_size == <a href='../S/2799.html#L3288' title='Defined at 3288 in Objects/longobject.c.'>MANT_DIG_DIGITS</a>+1 &amp;&amp;
<a name='L3412'>         <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[<a href='../S/2799.html#L3288' title='Defined at 3288 in Objects/longobject.c.'>MANT_DIG_DIGITS</a>] &gt;&gt; <a href='../S/2799.html#L3289' title='Defined at 3289 in Objects/longobject.c.'>MANT_DIG_BITS</a> == 0);
<a name='L3413'>    <b>if</b> (a_is_small &amp;&amp; b_is_small) <font color='red'>{</font>
<a name='L3414'>        <b>double</b> da, db;
<a name='L3415'>        da = a-&gt;ob_digit[--a_size];
<a name='L3416'>        <b>while</b> (a_size &gt; 0)
<a name='L3417'>            da = da * <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a> + a-&gt;ob_digit[--a_size];
<a name='L3418'>        db = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[--b_size];
<a name='L3419'>        <b>while</b> (b_size &gt; 0)
<a name='L3420'>            db = db * <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a> + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[--b_size];
<a name='L3421'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = da / db;
<a name='L3422'>        <b>goto</b> success;
<a name='L3423'>    <font color='red'>}</font>
<a name='L3424'>
<a name='L3425'>    <i><font color='green'>/* Catch obvious cases of underflow and overflow */</font></i>
<a name='L3426'>    <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> = a_size - b_size;
<a name='L3427'>    <b>if</b> (<a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> &gt; <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>/<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> - 1)
<a name='L3428'>        <i><font color='green'>/* Extreme overflow */</font></i>
<a name='L3429'>        <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L3430'>    <b>else</b> <b>if</b> (<a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> &lt; 1 - <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>/<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>)
<a name='L3431'>        <i><font color='green'>/* Extreme underflow */</font></i>
<a name='L3432'>        <b>goto</b> underflow_or_zero;
<a name='L3433'>    <i><font color='green'>/* Next line is now safe from overflowing a Py_ssize_t */</font></i>
<a name='L3434'>    <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> = <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> * <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + <a href='../S/2799.html#L1400' title='Defined at 1400 in Objects/longobject.c.'>bits_in_digit</a>(a-&gt;ob_digit[a_size - 1]) -
<a name='L3435'>        <a href='../S/2799.html#L1400' title='Defined at 1400 in Objects/longobject.c.'>bits_in_digit</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[b_size - 1]);
<a name='L3436'>    <i><font color='green'>/* Now diff = a_bits - b_bits. */</font></i>
<a name='L3437'>    <b>if</b> (<a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> &gt; DBL_MAX_EXP)
<a name='L3438'>        <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L3439'>    <b>else</b> <b>if</b> (<a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> &lt; DBL_MIN_EXP - DBL_MANT_DIG - 1)
<a name='L3440'>        <b>goto</b> underflow_or_zero;
<a name='L3441'>
<a name='L3442'>    <i><font color='green'>/* Choose value for shift; see comments for step 1 above. */</font></i>
<a name='L3443'>    <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> = <a href='../D/2033.html' title='Multiple defined in 10 places.'>MAX</a>(<a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a>, DBL_MIN_EXP) - DBL_MANT_DIG - 2;
<a name='L3444'>
<a name='L3445'>    inexact = 0;
<a name='L3446'>
<a name='L3447'>    <i><font color='green'>/* x = abs(a * 2**-shift) */</font></i>
<a name='L3448'>    <b>if</b> (<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> &lt;= 0) <font color='red'>{</font>
<a name='L3449'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, shift_digits = -<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L3450'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> rem;
<a name='L3451'>        <i><font color='green'>/* x = a &lt;&lt; -shift */</font></i>
<a name='L3452'>        <b>if</b> (a_size &gt;= <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a> - 1 - shift_digits) <font color='red'>{</font>
<a name='L3453'>            <i><font color='green'>/* In practice, it's probably impossible to end up</font></i>
<a name='L3454'><i><font color='green'>               here.  Both a and b would have to be enormous,</font></i>
<a name='L3455'><i><font color='green'>               using close to SIZE_T_MAX bytes of memory each. */</font></i>
<a name='L3456'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L3457'>                            "intermediate overflow during division");
<a name='L3458'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3459'>        <font color='red'>}</font>
<a name='L3460'>        x = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(a_size + shift_digits + 1);
<a name='L3461'>        <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3462'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3463'>        <b>for</b> (i = 0; i &lt; shift_digits; i++)
<a name='L3464'>            x-&gt;ob_digit[i] = 0;
<a name='L3465'>        rem = <a href='../S/2799.html#L1467' title='Defined at 1467 in Objects/longobject.c.'>v_lshift</a>(x-&gt;ob_digit + shift_digits, a-&gt;ob_digit,
<a name='L3466'>                       a_size, -<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> % <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L3467'>        x-&gt;ob_digit[a_size + shift_digits] = rem;
<a name='L3468'>    <font color='red'>}</font>
<a name='L3469'>    <b>else</b> <font color='red'>{</font>
<a name='L3470'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> shift_digits = <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L3471'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> rem;
<a name='L3472'>        <i><font color='green'>/* x = a &gt;&gt; shift */</font></i>
<a name='L3473'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(a_size &gt;= shift_digits);
<a name='L3474'>        x = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(a_size - shift_digits);
<a name='L3475'>        <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3476'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3477'>        rem = <a href='../S/2799.html#L1485' title='Defined at 1485 in Objects/longobject.c.'>v_rshift</a>(x-&gt;ob_digit, a-&gt;ob_digit + shift_digits,
<a name='L3478'>                       a_size - shift_digits, <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> % <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L3479'>        <i><font color='green'>/* set inexact if any of the bits shifted out is nonzero */</font></i>
<a name='L3480'>        <b>if</b> (rem)
<a name='L3481'>            inexact = 1;
<a name='L3482'>        <b>while</b> (!inexact &amp;&amp; shift_digits &gt; 0)
<a name='L3483'>            <b>if</b> (a-&gt;ob_digit[--shift_digits])
<a name='L3484'>                inexact = 1;
<a name='L3485'>    <font color='red'>}</font>
<a name='L3486'>    <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(x);
<a name='L3487'>    x_size = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x);
<a name='L3488'>
<a name='L3489'>    <i><font color='green'>/* x //= b. If the remainder is nonzero, set inexact.  We own the only</font></i>
<a name='L3490'><i><font color='green'>       reference to x, so it's safe to modify it in-place. */</font></i>
<a name='L3491'>    <b>if</b> (b_size == 1) <font color='red'>{</font>
<a name='L3492'>        <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> rem = <a href='../S/2799.html#L1507' title='Defined at 1507 in Objects/longobject.c.'>inplace_divrem1</a>(x-&gt;ob_digit, x-&gt;ob_digit, x_size,
<a name='L3493'>                              <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[0]);
<a name='L3494'>        <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(x);
<a name='L3495'>        <b>if</b> (rem)
<a name='L3496'>            inexact = 1;
<a name='L3497'>    <font color='red'>}</font>
<a name='L3498'>    <b>else</b> <font color='red'>{</font>
<a name='L3499'>        <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *div, *rem;
<a name='L3500'>        div = <a href='../S/2799.html#L2229' title='Defined at 2229 in Objects/longobject.c.'>x_divrem</a>(x, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, &amp;rem);
<a name='L3501'>        Py_DECREF(x);
<a name='L3502'>        x = div;
<a name='L3503'>        <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3504'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L3505'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(rem))
<a name='L3506'>            inexact = 1;
<a name='L3507'>        Py_DECREF(rem);
<a name='L3508'>    <font color='red'>}</font>
<a name='L3509'>    x_size = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x));
<a name='L3510'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(x_size &gt; 0); <i><font color='green'>/* result of division is never zero */</font></i>
<a name='L3511'>    x_bits = (x_size-1)*<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>+<a href='../S/2799.html#L1400' title='Defined at 1400 in Objects/longobject.c.'>bits_in_digit</a>(x-&gt;ob_digit[x_size-1]);
<a name='L3512'>
<a name='L3513'>    <i><font color='green'>/* The number of extra bits that have to be rounded away. */</font></i>
<a name='L3514'>    extra_bits = <a href='../D/2033.html' title='Multiple defined in 10 places.'>MAX</a>(x_bits, DBL_MIN_EXP - <a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>) - DBL_MANT_DIG;
<a name='L3515'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(extra_bits == 2 || extra_bits == 3);
<a name='L3516'>
<a name='L3517'>    <i><font color='green'>/* Round by directly modifying the low digit of x. */</font></i>
<a name='L3518'>    mask = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)1 &lt;&lt; (extra_bits - 1);
<a name='L3519'>    low = x-&gt;ob_digit[0] | inexact;
<a name='L3520'>    <b>if</b> (low &amp; mask &amp;&amp; low &amp; (3*mask-1))
<a name='L3521'>        low += mask;
<a name='L3522'>    x-&gt;ob_digit[0] = low &amp; ~(mask-1U);
<a name='L3523'>
<a name='L3524'>    <i><font color='green'>/* Convert x to a double dx; the conversion is exact. */</font></i>
<a name='L3525'>    dx = x-&gt;ob_digit[--x_size];
<a name='L3526'>    <b>while</b> (x_size &gt; 0)
<a name='L3527'>        dx = dx * <a href='../S/535.html#L67' title='Defined at 67 in Include/longintrepr.h.'>PyLong_BASE</a> + x-&gt;ob_digit[--x_size];
<a name='L3528'>    Py_DECREF(x);
<a name='L3529'>
<a name='L3530'>    <i><font color='green'>/* Check whether ldexp result will overflow a double. */</font></i>
<a name='L3531'>    <b>if</b> (<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> + x_bits &gt;= DBL_MAX_EXP &amp;&amp;
<a name='L3532'>        (<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a> + x_bits &gt; DBL_MAX_EXP || dx == ldexp(1.0, (<b>int</b>)x_bits)))
<a name='L3533'>        <b>goto</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L3534'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = ldexp(dx, (<b>int</b>)<a href='../S/2843.html#L108' title='Defined at 108 in Parser/parser.c.'>shift</a>);
<a name='L3535'>
<a name='L3536'>  success:
<a name='L3537'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(negate ? -<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> : <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L3538'>
<a name='L3539'>  underflow_or_zero:
<a name='L3540'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(negate ? -0.0 : 0.0);
<a name='L3541'>
<a name='L3542'>  <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>:
<a name='L3543'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L3544'>                    "integer division result too large for a float");
<a name='L3545'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L3546'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3547'><font color='red'>}</font>
<a name='L3548'>
<a name='L3549'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3550'><a href='../S/2799.html#L4720' title='Refered from 4720 in Objects/longobject.c.'>long_mod</a>(PyObject *a, PyObject *b)
<a name='L3551'><font color='red'>{</font>
<a name='L3552'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *mod;
<a name='L3553'>
<a name='L3554'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3555'>
<a name='L3556'>    <b>if</b> (<a href='../S/2799.html#L3232' title='Defined at 3232 in Objects/longobject.c.'>l_divmod</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)a, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;mod) &lt; 0)
<a name='L3557'>        mod = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3558'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)mod;
<a name='L3559'><font color='red'>}</font>
<a name='L3560'>
<a name='L3561'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3562'><a href='../S/2799.html#L4721' title='Refered from 4721 in Objects/longobject.c.'>long_divmod</a>(PyObject *a, PyObject *b)
<a name='L3563'><font color='red'>{</font>
<a name='L3564'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *div, *mod;
<a name='L3565'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *z;
<a name='L3566'>
<a name='L3567'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3568'>
<a name='L3569'>    <b>if</b> (<a href='../S/2799.html#L3232' title='Defined at 3232 in Objects/longobject.c.'>l_divmod</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)a, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, &amp;div, &amp;mod) &lt; 0) <font color='red'>{</font>
<a name='L3570'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3571'>    <font color='red'>}</font>
<a name='L3572'>    z = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(2);
<a name='L3573'>    <b>if</b> (z != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3574'>        <a href='../S/2823.html#L137' title='Defined at 137 in Objects/tupleobject.c.'>PyTuple_SetItem</a>(z, 0, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) div);
<a name='L3575'>        <a href='../S/2823.html#L137' title='Defined at 137 in Objects/tupleobject.c.'>PyTuple_SetItem</a>(z, 1, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) mod);
<a name='L3576'>    <font color='red'>}</font>
<a name='L3577'>    <b>else</b> <font color='red'>{</font>
<a name='L3578'>        Py_DECREF(div);
<a name='L3579'>        Py_DECREF(mod);
<a name='L3580'>    <font color='red'>}</font>
<a name='L3581'>    <b>return</b> z;
<a name='L3582'><font color='red'>}</font>
<a name='L3583'>
<a name='L3584'><i><font color='green'>/* pow(v, w, x) */</font></i>
<a name='L3585'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3586'><a href='../R/8787.html' title='Multiple refered from 2 places.'>long_pow</a>(PyObject *v, PyObject *w, PyObject *x)
<a name='L3587'><font color='red'>{</font>
<a name='L3588'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *a, *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, *c; <i><font color='green'>/* a,b,c = v,w,x */</font></i>
<a name='L3589'>    <b>int</b> negativeOutput = 0;  <i><font color='green'>/* if x&lt;0 return negative output */</font></i>
<a name='L3590'>
<a name='L3591'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;  <i><font color='green'>/* accumulated result */</font></i>
<a name='L3592'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, j, k;             <i><font color='green'>/* counters */</font></i>
<a name='L3593'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *temp = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3594'>
<a name='L3595'>    <i><font color='green'>/* 5-ary values.  If the exponent is large enough, table is</font></i>
<a name='L3596'><i><font color='green'>     * precomputed so that table[i] == a**i % c for i in range(32).</font></i>
<a name='L3597'><i><font color='green'>     */</font></i>
<a name='L3598'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *table[32] = <font color='red'>{</font>0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
<a name='L3599'>                               0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0<font color='red'>}</font>;
<a name='L3600'>
<a name='L3601'>    <i><font color='green'>/* a, b, c = v, w, x */</font></i>
<a name='L3602'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(v, w);
<a name='L3603'>    a = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)v; Py_INCREF(a);
<a name='L3604'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)w; Py_INCREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3605'>    <b>if</b> (PyLong_Check(x)) <font color='red'>{</font>
<a name='L3606'>        c = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)x;
<a name='L3607'>        Py_INCREF(x);
<a name='L3608'>    <font color='red'>}</font>
<a name='L3609'>    <b>else</b> <b>if</b> (x == Py_None)
<a name='L3610'>        c = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3611'>    <b>else</b> <font color='red'>{</font>
<a name='L3612'>        Py_DECREF(a);
<a name='L3613'>        Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3614'>        Py_INCREF(Py_NotImplemented);
<a name='L3615'>        <b>return</b> Py_NotImplemented;
<a name='L3616'>    <font color='red'>}</font>
<a name='L3617'>
<a name='L3618'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0) <font color='red'>{</font>  <i><font color='green'>/* if exponent is negative */</font></i>
<a name='L3619'>        <b>if</b> (c) <font color='red'>{</font>
<a name='L3620'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError, "pow() 2nd argument "
<a name='L3621'>                            "cannot be negative when 3rd argument specified");
<a name='L3622'>            <b>goto</b> Error;
<a name='L3623'>        <font color='red'>}</font>
<a name='L3624'>        <b>else</b> <font color='red'>{</font>
<a name='L3625'>            <i><font color='green'>/* else return a float.  This works because we know</font></i>
<a name='L3626'><i><font color='green'>               that this calls float_pow() which converts its</font></i>
<a name='L3627'><i><font color='green'>               arguments to double. */</font></i>
<a name='L3628'>            Py_DECREF(a);
<a name='L3629'>            Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3630'>            <b>return</b> PyFloat_Type.tp_as_number-&gt;nb_power(v, w, x);
<a name='L3631'>        <font color='red'>}</font>
<a name='L3632'>    <font color='red'>}</font>
<a name='L3633'>
<a name='L3634'>    <b>if</b> (c) <font color='red'>{</font>
<a name='L3635'>        <i><font color='green'>/* if modulus == 0:</font></i>
<a name='L3636'><i><font color='green'>               raise ValueError() */</font></i>
<a name='L3637'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(c) == 0) <font color='red'>{</font>
<a name='L3638'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L3639'>                            "pow() 3rd argument cannot be 0");
<a name='L3640'>            <b>goto</b> Error;
<a name='L3641'>        <font color='red'>}</font>
<a name='L3642'>
<a name='L3643'>        <i><font color='green'>/* if modulus &lt; 0:</font></i>
<a name='L3644'><i><font color='green'>               negativeOutput = True</font></i>
<a name='L3645'><i><font color='green'>               modulus = -modulus */</font></i>
<a name='L3646'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(c) &lt; 0) <font color='red'>{</font>
<a name='L3647'>            negativeOutput = 1;
<a name='L3648'>            temp = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L149' title='Defined at 149 in Objects/longobject.c.'>_PyLong_Copy</a>(c);
<a name='L3649'>            <b>if</b> (temp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3650'>                <b>goto</b> Error;
<a name='L3651'>            Py_DECREF(c);
<a name='L3652'>            c = temp;
<a name='L3653'>            temp = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3654'>            <a href='../S/2799.html#L73' title='Defined at 73 in Objects/longobject.c.'>NEGATE</a>(c);
<a name='L3655'>        <font color='red'>}</font>
<a name='L3656'>
<a name='L3657'>        <i><font color='green'>/* if modulus == 1:</font></i>
<a name='L3658'><i><font color='green'>               return 0 */</font></i>
<a name='L3659'>        <b>if</b> ((<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(c) == 1) &amp;&amp; (c-&gt;ob_digit[0] == 1)) <font color='red'>{</font>
<a name='L3660'>            z = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0L);
<a name='L3661'>            <b>goto</b> Done;
<a name='L3662'>        <font color='red'>}</font>
<a name='L3663'>
<a name='L3664'>        <i><font color='green'>/* if base &lt; 0:</font></i>
<a name='L3665'><i><font color='green'>               base = base % modulus</font></i>
<a name='L3666'><i><font color='green'>           Having the base positive just makes things easier. */</font></i>
<a name='L3667'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0) <font color='red'>{</font>
<a name='L3668'>            <b>if</b> (<a href='../S/2799.html#L3232' title='Defined at 3232 in Objects/longobject.c.'>l_divmod</a>(a, c, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;temp) &lt; 0)
<a name='L3669'>                <b>goto</b> Error;
<a name='L3670'>            Py_DECREF(a);
<a name='L3671'>            a = temp;
<a name='L3672'>            temp = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3673'>        <font color='red'>}</font>
<a name='L3674'>    <font color='red'>}</font>
<a name='L3675'>
<a name='L3676'>    <i><font color='green'>/* At this point a, b, and c are guaranteed non-negative UNLESS</font></i>
<a name='L3677'><i><font color='green'>       c is NULL, in which case a may be negative. */</font></i>
<a name='L3678'>
<a name='L3679'>    z = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(1L);
<a name='L3680'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3681'>        <b>goto</b> Error;
<a name='L3682'>
<a name='L3683'>    <i><font color='green'>/* Perform a modular reduction, X = X % c, but leave X alone if c</font></i>
<a name='L3684'><i><font color='green'>     * is NULL.</font></i>
<a name='L3685'><i><font color='green'>     */</font></i>
<a name='L3686'><font color='darkred'>#define</font> <a href='../R/3915.html' title='Multiple refered from 3 places.'>REDUCE</a>(X)                                       \
<a name='L3687'>    <b>do</b> <font color='red'>{</font>                                                \
<a name='L3688'>        <b>if</b> (c != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>                                \
<a name='L3689'>            <b>if</b> (<a href='../S/2799.html#L3232' title='Defined at 3232 in Objects/longobject.c.'>l_divmod</a>(X, c, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, &amp;temp) &lt; 0)        \
<a name='L3690'>                <b>goto</b> Error;                             \
<a name='L3691'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(X);                              \
<a name='L3692'>            X = temp;                                   \
<a name='L3693'>            temp = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;                                \
<a name='L3694'>        <font color='red'>}</font>                                               \
<a name='L3695'>    <font color='red'>}</font> <b>while</b>(0)
<a name='L3696'>
<a name='L3697'>    <i><font color='green'>/* Multiply two values, then reduce the result:</font></i>
<a name='L3698'><i><font color='green'>       result = X*Y % c.  If c is NULL, skip the mod. */</font></i>
<a name='L3699'><font color='darkred'>#define</font> <a href='../R/1987.html' title='Multiple refered from 5 places.'>MULT</a>(X, Y, result)                      \
<a name='L3700'>    <b>do</b> <font color='red'>{</font>                                        \
<a name='L3701'>        temp = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L3181' title='Defined at 3181 in Objects/longobject.c.'>long_mul</a>(X, Y);  \
<a name='L3702'>        <b>if</b> (temp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)                       \
<a name='L3703'>            <b>goto</b> Error;                         \
<a name='L3704'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);                     \
<a name='L3705'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = temp;                          \
<a name='L3706'>        temp = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;                            \
<a name='L3707'>        <a href='../D/4440.html' title='Multiple defined in 2 places.'>REDUCE</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);                         \
<a name='L3708'>    <font color='red'>}</font> <b>while</b>(0)
<a name='L3709'>
<a name='L3710'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt;= <a href='../S/2799.html#L90' title='Defined at 90 in Objects/longobject.c.'>FIVEARY_CUTOFF</a>) <font color='red'>{</font>
<a name='L3711'>        <i><font color='green'>/* Left-to-right binary exponentiation (HAC Algorithm 14.79) */</font></i>
<a name='L3712'>        <i><font color='green'>/* http://www.cacr.math.uwaterloo.ca/hac/about/chap14.pdf    */</font></i>
<a name='L3713'>        <b>for</b> (i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) - 1; i &gt;= 0; --i) <font color='red'>{</font>
<a name='L3714'>            <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> bi = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i];
<a name='L3715'>
<a name='L3716'>            <b>for</b> (j = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)1 &lt;&lt; (<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>-1); j != 0; j &gt;&gt;= 1) <font color='red'>{</font>
<a name='L3717'>                <a href='../S/2799.html#L3699' title='Defined at 3699 in Objects/longobject.c.'>MULT</a>(z, z, z);
<a name='L3718'>                <b>if</b> (bi &amp; j)
<a name='L3719'>                    <a href='../S/2799.html#L3699' title='Defined at 3699 in Objects/longobject.c.'>MULT</a>(z, a, z);
<a name='L3720'>            <font color='red'>}</font>
<a name='L3721'>        <font color='red'>}</font>
<a name='L3722'>    <font color='red'>}</font>
<a name='L3723'>    <b>else</b> <font color='red'>{</font>
<a name='L3724'>        <i><font color='green'>/* Left-to-right 5-ary exponentiation (HAC Algorithm 14.82) */</font></i>
<a name='L3725'>        Py_INCREF(z);           <i><font color='green'>/* still holds 1L */</font></i>
<a name='L3726'>        table[0] = z;
<a name='L3727'>        <b>for</b> (i = 1; i &lt; 32; ++i)
<a name='L3728'>            <a href='../S/2799.html#L3699' title='Defined at 3699 in Objects/longobject.c.'>MULT</a>(table[i-1], a, table[i]);
<a name='L3729'>
<a name='L3730'>        <b>for</b> (i = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) - 1; i &gt;= 0; --i) <font color='red'>{</font>
<a name='L3731'>            <b>const</b> <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> bi = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i];
<a name='L3732'>
<a name='L3733'>            <b>for</b> (j = <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> - 5; j &gt;= 0; j -= 5) <font color='red'>{</font>
<a name='L3734'>                <b>const</b> <b>int</b> index = (bi &gt;&gt; j) &amp; 0x1f;
<a name='L3735'>                <b>for</b> (k = 0; k &lt; 5; ++k)
<a name='L3736'>                    <a href='../S/2799.html#L3699' title='Defined at 3699 in Objects/longobject.c.'>MULT</a>(z, z, z);
<a name='L3737'>                <b>if</b> (index)
<a name='L3738'>                    <a href='../S/2799.html#L3699' title='Defined at 3699 in Objects/longobject.c.'>MULT</a>(z, table[index], z);
<a name='L3739'>            <font color='red'>}</font>
<a name='L3740'>        <font color='red'>}</font>
<a name='L3741'>    <font color='red'>}</font>
<a name='L3742'>
<a name='L3743'>    <b>if</b> (negativeOutput &amp;&amp; (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) != 0)) <font color='red'>{</font>
<a name='L3744'>        temp = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L2749' title='Defined at 2749 in Objects/longobject.c.'>long_sub</a>(z, c);
<a name='L3745'>        <b>if</b> (temp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3746'>            <b>goto</b> Error;
<a name='L3747'>        Py_DECREF(z);
<a name='L3748'>        z = temp;
<a name='L3749'>        temp = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3750'>    <font color='red'>}</font>
<a name='L3751'>    <b>goto</b> Done;
<a name='L3752'>
<a name='L3753'>  Error:
<a name='L3754'>    <b>if</b> (z != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3755'>        Py_DECREF(z);
<a name='L3756'>        z = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3757'>    <font color='red'>}</font>
<a name='L3758'>    <i><font color='green'>/* fall through */</font></i>
<a name='L3759'>  Done:
<a name='L3760'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &gt; <a href='../S/2799.html#L90' title='Defined at 90 in Objects/longobject.c.'>FIVEARY_CUTOFF</a>) <font color='red'>{</font>
<a name='L3761'>        <b>for</b> (i = 0; i &lt; 32; ++i)
<a name='L3762'>            <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(table[i]);
<a name='L3763'>    <font color='red'>}</font>
<a name='L3764'>    Py_DECREF(a);
<a name='L3765'>    Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3766'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(c);
<a name='L3767'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(temp);
<a name='L3768'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)z;
<a name='L3769'><font color='red'>}</font>
<a name='L3770'>
<a name='L3771'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3772'><a href='../R/8777.html' title='Multiple refered from 3 places.'>long_invert</a>(PyLongObject *v)
<a name='L3773'><font color='red'>{</font>
<a name='L3774'>    <i><font color='green'>/* Implement ~x as -(x+1) */</font></i>
<a name='L3775'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *x;
<a name='L3776'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *w;
<a name='L3777'>    <b>if</b> (<a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v)) &lt;=1)
<a name='L3778'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(-(<a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(v)+1));
<a name='L3779'>    w = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(1L);
<a name='L3780'>    <b>if</b> (w == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3781'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3782'>    x = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) <a href='../S/2799.html#L2719' title='Defined at 2719 in Objects/longobject.c.'>long_add</a>(v, w);
<a name='L3783'>    Py_DECREF(w);
<a name='L3784'>    <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3785'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3786'>    <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x) = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x));
<a name='L3787'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../D/9758.html' title='Multiple defined in 2 places.'>maybe_small_long</a>(x);
<a name='L3788'><font color='red'>}</font>
<a name='L3789'>
<a name='L3790'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3791'><a href='../R/8783.html' title='Multiple refered from 4 places.'>long_neg</a>(PyLongObject *v)
<a name='L3792'><font color='red'>{</font>
<a name='L3793'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L3794'>    <b>if</b> (<a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v)) &lt;= 1)
<a name='L3795'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(-<a href='../S/2799.html#L20' title='Defined at 20 in Objects/longobject.c.'>MEDIUM_VALUE</a>(v));
<a name='L3796'>    z = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L149' title='Defined at 149 in Objects/longobject.c.'>_PyLong_Copy</a>(v);
<a name='L3797'>    <b>if</b> (z != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3798'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v));
<a name='L3799'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)z;
<a name='L3800'><font color='red'>}</font>
<a name='L3801'>
<a name='L3802'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3803'><a href='../S/2799.html#L4725' title='Refered from 4725 in Objects/longobject.c.'>long_abs</a>(PyLongObject *v)
<a name='L3804'><font color='red'>{</font>
<a name='L3805'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) &lt; 0)
<a name='L3806'>        <b>return</b> <a href='../S/2799.html#L3791' title='Defined at 3791 in Objects/longobject.c.'>long_neg</a>(v);
<a name='L3807'>    <b>else</b>
<a name='L3808'>        <b>return</b> <a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)v);
<a name='L3809'><font color='red'>}</font>
<a name='L3810'>
<a name='L3811'><b>static</b> <b>int</b>
<a name='L3812'><a href='../S/2799.html#L4726' title='Refered from 4726 in Objects/longobject.c.'>long_bool</a>(PyLongObject *v)
<a name='L3813'><font color='red'>{</font>
<a name='L3814'>    <b>return</b> <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) != 0;
<a name='L3815'><font color='red'>}</font>
<a name='L3816'>
<a name='L3817'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3818'><a href='../R/8790.html' title='Multiple refered from 2 places.'>long_rshift</a>(PyLongObject *a, PyLongObject *b)
<a name='L3819'><font color='red'>{</font>
<a name='L3820'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3821'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> shiftby, newsize, wordshift, loshift, hishift, i, j;
<a name='L3822'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> lomask, himask;
<a name='L3823'>
<a name='L3824'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3825'>
<a name='L3826'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0) <font color='red'>{</font>
<a name='L3827'>        <i><font color='green'>/* Right shifting negative numbers is harder */</font></i>
<a name='L3828'>        <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *<a href='../S/2333.html#L115' title='Defined at 115 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a1</a>, *<a href='../S/2333.html#L116' title='Defined at 116 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a2</a>;
<a name='L3829'>        <a href='../S/2333.html#L115' title='Defined at 115 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a1</a> = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) <a href='../S/2799.html#L3772' title='Defined at 3772 in Objects/longobject.c.'>long_invert</a>(a);
<a name='L3830'>        <b>if</b> (<a href='../S/2333.html#L115' title='Defined at 115 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a1</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3831'>            <b>goto</b> rshift_error;
<a name='L3832'>        <a href='../S/2333.html#L116' title='Defined at 116 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a2</a> = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) <a href='../S/2799.html#L3818' title='Defined at 3818 in Objects/longobject.c.'>long_rshift</a>(<a href='../S/2333.html#L115' title='Defined at 115 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a1</a>, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3833'>        Py_DECREF(<a href='../S/2333.html#L115' title='Defined at 115 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a1</a>);
<a name='L3834'>        <b>if</b> (<a href='../S/2333.html#L116' title='Defined at 116 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a2</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3835'>            <b>goto</b> rshift_error;
<a name='L3836'>        z = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *) <a href='../S/2799.html#L3772' title='Defined at 3772 in Objects/longobject.c.'>long_invert</a>(<a href='../S/2333.html#L116' title='Defined at 116 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a2</a>);
<a name='L3837'>        Py_DECREF(<a href='../S/2333.html#L116' title='Defined at 116 in Modules/_ctypes/libffi/src/mips/ffitarget.h.'>a2</a>);
<a name='L3838'>    <font color='red'>}</font>
<a name='L3839'>    <b>else</b> <font color='red'>{</font>
<a name='L3840'>        shiftby = <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3841'>        <b>if</b> (shiftby == -1L &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3842'>            <b>goto</b> rshift_error;
<a name='L3843'>        <b>if</b> (shiftby &lt; 0) <font color='red'>{</font>
<a name='L3844'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L3845'>                            "negative shift count");
<a name='L3846'>            <b>goto</b> rshift_error;
<a name='L3847'>        <font color='red'>}</font>
<a name='L3848'>        wordshift = shiftby / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L3849'>        newsize = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a)) - wordshift;
<a name='L3850'>        <b>if</b> (newsize &lt;= 0)
<a name='L3851'>            <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0);
<a name='L3852'>        loshift = shiftby % <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L3853'>        hishift = <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> - loshift;
<a name='L3854'>        lomask = ((<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)1 &lt;&lt; hishift) - 1;
<a name='L3855'>        himask = <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a> ^ lomask;
<a name='L3856'>        z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(newsize);
<a name='L3857'>        <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3858'>            <b>goto</b> rshift_error;
<a name='L3859'>        <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0)
<a name='L3860'>            <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z));
<a name='L3861'>        <b>for</b> (i = 0, j = wordshift; i &lt; newsize; i++, j++) <font color='red'>{</font>
<a name='L3862'>            z-&gt;ob_digit[i] = (a-&gt;ob_digit[j] &gt;&gt; loshift) &amp; lomask;
<a name='L3863'>            <b>if</b> (i+1 &lt; newsize)
<a name='L3864'>                z-&gt;ob_digit[i] |= (a-&gt;ob_digit[j+1] &lt;&lt; hishift) &amp; himask;
<a name='L3865'>        <font color='red'>}</font>
<a name='L3866'>        z = <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z);
<a name='L3867'>    <font color='red'>}</font>
<a name='L3868'>  rshift_error:
<a name='L3869'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) <a href='../D/9758.html' title='Multiple defined in 2 places.'>maybe_small_long</a>(z);
<a name='L3870'>
<a name='L3871'><font color='red'>}</font>
<a name='L3872'>
<a name='L3873'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3874'><a href='../R/8780.html' title='Multiple refered from 2 places.'>long_lshift</a>(PyObject *v, PyObject *w)
<a name='L3875'><font color='red'>{</font>
<a name='L3876'>    <i><font color='green'>/* This version due to Tim Peters */</font></i>
<a name='L3877'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *a = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)v;
<a name='L3878'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)w;
<a name='L3879'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3880'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> shiftby, oldsize, newsize, wordshift, remshift, i, j;
<a name='L3881'>    <a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a> <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a>;
<a name='L3882'>
<a name='L3883'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3884'>
<a name='L3885'>    shiftby = <a href='../S/2799.html#L433' title='Defined at 433 in Objects/longobject.c.'>PyLong_AsSsize_t</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3886'>    <b>if</b> (shiftby == -1L &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L3887'>        <b>goto</b> lshift_error;
<a name='L3888'>    <b>if</b> (shiftby &lt; 0) <font color='red'>{</font>
<a name='L3889'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "negative shift count");
<a name='L3890'>        <b>goto</b> lshift_error;
<a name='L3891'>    <font color='red'>}</font>
<a name='L3892'>    <i><font color='green'>/* wordshift, remshift = divmod(shiftby, PyLong_SHIFT) */</font></i>
<a name='L3893'>    wordshift = shiftby / <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L3894'>    remshift  = shiftby - wordshift * <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L3895'>
<a name='L3896'>    oldsize = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L3897'>    newsize = oldsize + wordshift;
<a name='L3898'>    <b>if</b> (remshift)
<a name='L3899'>        ++newsize;
<a name='L3900'>    z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(newsize);
<a name='L3901'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3902'>        <b>goto</b> lshift_error;
<a name='L3903'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0)
<a name='L3904'>        <a href='../S/2799.html#L73' title='Defined at 73 in Objects/longobject.c.'>NEGATE</a>(z);
<a name='L3905'>    <b>for</b> (i = 0; i &lt; wordshift; i++)
<a name='L3906'>        z-&gt;ob_digit[i] = 0;
<a name='L3907'>    <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> = 0;
<a name='L3908'>    <b>for</b> (i = wordshift, j = 0; j &lt; oldsize; i++, j++) <font color='red'>{</font>
<a name='L3909'>        <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> |= (<a href='../D/11880.html' title='Multiple defined in 2 places.'>twodigits</a>)a-&gt;ob_digit[j] &lt;&lt; remshift;
<a name='L3910'>        z-&gt;ob_digit[i] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)(<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>);
<a name='L3911'>        <a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a> &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L3912'>    <font color='red'>}</font>
<a name='L3913'>    <b>if</b> (remshift)
<a name='L3914'>        z-&gt;ob_digit[newsize-1] = (<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a>;
<a name='L3915'>    <b>else</b>
<a name='L3916'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(!<a href='../S/2560.html#L2019' title='Defined at 2019 in Modules/_datetimemodule.c.'>accum</a>);
<a name='L3917'>    z = <a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z);
<a name='L3918'>  lshift_error:
<a name='L3919'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) <a href='../D/9758.html' title='Multiple defined in 2 places.'>maybe_small_long</a>(z);
<a name='L3920'><font color='red'>}</font>
<a name='L3921'>
<a name='L3922'><i><font color='green'>/* Compute two's complement of digit vector a[0:m], writing result to</font></i>
<a name='L3923'><i><font color='green'>   z[0:m].  The digit vector a need not be normalized, but should not</font></i>
<a name='L3924'><i><font color='green'>   be entirely zero.  a and z may point to the same digit vector. */</font></i>
<a name='L3925'>
<a name='L3926'><b>static</b> <b>void</b>
<a name='L3927'><a href='../R/11237.html' title='Multiple refered from 3 places.'>v_complement</a>(digit *z, digit *a, <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> m)
<a name='L3928'><font color='red'>{</font>
<a name='L3929'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i;
<a name='L3930'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> carry = 1;
<a name='L3931'>    <b>for</b> (i = 0; i &lt; m; ++i) <font color='red'>{</font>
<a name='L3932'>        carry += a[i] ^ <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L3933'>        z[i] = carry &amp; <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L3934'>        carry &gt;&gt;= <a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>;
<a name='L3935'>    <font color='red'>}</font>
<a name='L3936'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(carry == 0);
<a name='L3937'><font color='red'>}</font>
<a name='L3938'>
<a name='L3939'><i><font color='green'>/* Bitwise and/xor/or operations */</font></i>
<a name='L3940'>
<a name='L3941'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L3942'><a href='../R/8761.html' title='Multiple refered from 3 places.'>long_bitwise</a>(PyLongObject *a,
<a name='L3943'>             <b>int</b> op,  <i><font color='green'>/* '&amp;', '|', '^' */</font></i>
<a name='L3944'>             PyLongObject *b)
<a name='L3945'><font color='red'>{</font>
<a name='L3946'>    <b>int</b> nega, negb, negz;
<a name='L3947'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size_a, size_b, size_z, i;
<a name='L3948'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *z;
<a name='L3949'>
<a name='L3950'>    <i><font color='green'>/* Bitwise operations for negative numbers operate as though</font></i>
<a name='L3951'><i><font color='green'>       on a two's complement representation.  So convert arguments</font></i>
<a name='L3952'><i><font color='green'>       from sign-magnitude to two's complement, and convert the</font></i>
<a name='L3953'><i><font color='green'>       result back to sign-magnitude at the end. */</font></i>
<a name='L3954'>
<a name='L3955'>    <i><font color='green'>/* If a is negative, replace it by its two's complement. */</font></i>
<a name='L3956'>    size_a = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a));
<a name='L3957'>    nega = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0;
<a name='L3958'>    <b>if</b> (nega) <font color='red'>{</font>
<a name='L3959'>        z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_a);
<a name='L3960'>        <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L3961'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3962'>        <a href='../S/2799.html#L3927' title='Defined at 3927 in Objects/longobject.c.'>v_complement</a>(z-&gt;ob_digit, a-&gt;ob_digit, size_a);
<a name='L3963'>        a = z;
<a name='L3964'>    <font color='red'>}</font>
<a name='L3965'>    <b>else</b>
<a name='L3966'>        <i><font color='green'>/* Keep reference count consistent. */</font></i>
<a name='L3967'>        Py_INCREF(a);
<a name='L3968'>
<a name='L3969'>    <i><font color='green'>/* Same for b. */</font></i>
<a name='L3970'>    size_b = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>));
<a name='L3971'>    negb = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0;
<a name='L3972'>    <b>if</b> (negb) <font color='red'>{</font>
<a name='L3973'>        z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_b);
<a name='L3974'>        <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L3975'>            Py_DECREF(a);
<a name='L3976'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L3977'>        <font color='red'>}</font>
<a name='L3978'>        <a href='../S/2799.html#L3927' title='Defined at 3927 in Objects/longobject.c.'>v_complement</a>(z-&gt;ob_digit, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit, size_b);
<a name='L3979'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = z;
<a name='L3980'>    <font color='red'>}</font>
<a name='L3981'>    <b>else</b>
<a name='L3982'>        Py_INCREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L3983'>
<a name='L3984'>    <i><font color='green'>/* Swap a and b if necessary to ensure size_a &gt;= size_b. */</font></i>
<a name='L3985'>    <b>if</b> (size_a &lt; size_b) <font color='red'>{</font>
<a name='L3986'>        z = a; a = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = z;
<a name='L3987'>        size_z = size_a; size_a = size_b; size_b = size_z;
<a name='L3988'>        negz = nega; nega = negb; negb = negz;
<a name='L3989'>    <font color='red'>}</font>
<a name='L3990'>
<a name='L3991'>    <i><font color='green'>/* JRH: The original logic here was to allocate the result value (z)</font></i>
<a name='L3992'><i><font color='green'>       as the longer of the two operands.  However, there are some cases</font></i>
<a name='L3993'><i><font color='green'>       where the result is guaranteed to be shorter than that: AND of two</font></i>
<a name='L3994'><i><font color='green'>       positives, OR of two negatives: use the shorter number.  AND with</font></i>
<a name='L3995'><i><font color='green'>       mixed signs: use the positive number.  OR with mixed signs: use the</font></i>
<a name='L3996'><i><font color='green'>       negative number.</font></i>
<a name='L3997'><i><font color='green'>    */</font></i>
<a name='L3998'>    <b>switch</b> (op) <font color='red'>{</font>
<a name='L3999'>    <b>case</b> '^':
<a name='L4000'>        negz = nega ^ negb;
<a name='L4001'>        size_z = size_a;
<a name='L4002'>        <b>break</b>;
<a name='L4003'>    <b>case</b> '&amp;':
<a name='L4004'>        negz = nega &amp; negb;
<a name='L4005'>        size_z = negb ? size_a : size_b;
<a name='L4006'>        <b>break</b>;
<a name='L4007'>    <b>case</b> '|':
<a name='L4008'>        negz = nega | negb;
<a name='L4009'>        size_z = negb ? size_b : size_a;
<a name='L4010'>        <b>break</b>;
<a name='L4011'>    <b>default</b>:
<a name='L4012'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L4013'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4014'>    <font color='red'>}</font>
<a name='L4015'>
<a name='L4016'>    <i><font color='green'>/* We allow an extra digit if z is negative, to make sure that</font></i>
<a name='L4017'><i><font color='green'>       the final two's complement of z doesn't overflow. */</font></i>
<a name='L4018'>    z = <a href='../S/2799.html#L126' title='Defined at 126 in Objects/longobject.c.'>_PyLong_New</a>(size_z + negz);
<a name='L4019'>    <b>if</b> (z == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4020'>        Py_DECREF(a);
<a name='L4021'>        Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4022'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4023'>    <font color='red'>}</font>
<a name='L4024'>
<a name='L4025'>    <i><font color='green'>/* Compute digits for overlap of a and b. */</font></i>
<a name='L4026'>    <b>switch</b>(op) <font color='red'>{</font>
<a name='L4027'>    <b>case</b> '&amp;':
<a name='L4028'>        <b>for</b> (i = 0; i &lt; size_b; ++i)
<a name='L4029'>            z-&gt;ob_digit[i] = a-&gt;ob_digit[i] &amp; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i];
<a name='L4030'>        <b>break</b>;
<a name='L4031'>    <b>case</b> '|':
<a name='L4032'>        <b>for</b> (i = 0; i &lt; size_b; ++i)
<a name='L4033'>            z-&gt;ob_digit[i] = a-&gt;ob_digit[i] | <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i];
<a name='L4034'>        <b>break</b>;
<a name='L4035'>    <b>case</b> '^':
<a name='L4036'>        <b>for</b> (i = 0; i &lt; size_b; ++i)
<a name='L4037'>            z-&gt;ob_digit[i] = a-&gt;ob_digit[i] ^ <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;ob_digit[i];
<a name='L4038'>        <b>break</b>;
<a name='L4039'>    <b>default</b>:
<a name='L4040'>        <a href='../S/3106.html#L326' title='Defined at 326 in Python/errors.c.'>PyErr_BadArgument</a>();
<a name='L4041'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4042'>    <font color='red'>}</font>
<a name='L4043'>
<a name='L4044'>    <i><font color='green'>/* Copy any remaining digits of a, inverting if necessary. */</font></i>
<a name='L4045'>    <b>if</b> (op == '^' &amp;&amp; negb)
<a name='L4046'>        <b>for</b> (; i &lt; size_z; ++i)
<a name='L4047'>            z-&gt;ob_digit[i] = a-&gt;ob_digit[i] ^ <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L4048'>    <b>else</b> <b>if</b> (i &lt; size_z)
<a name='L4049'>        <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>(&amp;z-&gt;ob_digit[i], &amp;a-&gt;ob_digit[i],
<a name='L4050'>               (size_z-i)*<b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>));
<a name='L4051'>
<a name='L4052'>    <i><font color='green'>/* Complement result if negative. */</font></i>
<a name='L4053'>    <b>if</b> (negz) <font color='red'>{</font>
<a name='L4054'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z) = -(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(z));
<a name='L4055'>        z-&gt;ob_digit[size_z] = <a href='../S/535.html#L68' title='Defined at 68 in Include/longintrepr.h.'>PyLong_MASK</a>;
<a name='L4056'>        <a href='../S/2799.html#L3927' title='Defined at 3927 in Objects/longobject.c.'>v_complement</a>(z-&gt;ob_digit, z-&gt;ob_digit, size_z+1);
<a name='L4057'>    <font color='red'>}</font>
<a name='L4058'>
<a name='L4059'>    Py_DECREF(a);
<a name='L4060'>    Py_DECREF(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4061'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../D/9758.html' title='Multiple defined in 2 places.'>maybe_small_long</a>(<a href='../S/2799.html#L107' title='Defined at 107 in Objects/longobject.c.'>long_normalize</a>(z));
<a name='L4062'><font color='red'>}</font>
<a name='L4063'>
<a name='L4064'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4065'><a href='../S/2799.html#L4730' title='Refered from 4730 in Objects/longobject.c.'>long_and</a>(PyObject *a, PyObject *b)
<a name='L4066'><font color='red'>{</font>
<a name='L4067'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *c;
<a name='L4068'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4069'>    c = <a href='../S/2799.html#L3942' title='Defined at 3942 in Objects/longobject.c.'>long_bitwise</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)a, '&amp;', (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4070'>    <b>return</b> c;
<a name='L4071'><font color='red'>}</font>
<a name='L4072'>
<a name='L4073'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4074'><a href='../S/2799.html#L4731' title='Refered from 4731 in Objects/longobject.c.'>long_xor</a>(PyObject *a, PyObject *b)
<a name='L4075'><font color='red'>{</font>
<a name='L4076'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *c;
<a name='L4077'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4078'>    c = <a href='../S/2799.html#L3942' title='Defined at 3942 in Objects/longobject.c.'>long_bitwise</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)a, '^', (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4079'>    <b>return</b> c;
<a name='L4080'><font color='red'>}</font>
<a name='L4081'>
<a name='L4082'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4083'><a href='../S/2799.html#L4732' title='Refered from 4732 in Objects/longobject.c.'>long_or</a>(PyObject *a, PyObject *b)
<a name='L4084'><font color='red'>{</font>
<a name='L4085'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *c;
<a name='L4086'>    <a href='../S/2799.html#L1383' title='Defined at 1383 in Objects/longobject.c.'>CHECK_BINOP</a>(a, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4087'>    c = <a href='../S/2799.html#L3942' title='Defined at 3942 in Objects/longobject.c.'>long_bitwise</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)a, '|', (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4088'>    <b>return</b> c;
<a name='L4089'><font color='red'>}</font>
<a name='L4090'>
<a name='L4091'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4092'><a href='../R/8779.html' title='Multiple refered from 13 places.'>long_long</a>(PyObject *v)
<a name='L4093'><font color='red'>{</font>
<a name='L4094'>    <b>if</b> (PyLong_CheckExact(v))
<a name='L4095'>        Py_INCREF(v);
<a name='L4096'>    <b>else</b>
<a name='L4097'>        v = <a href='../S/2799.html#L149' title='Defined at 149 in Objects/longobject.c.'>_PyLong_Copy</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)v);
<a name='L4098'>    <b>return</b> v;
<a name='L4099'><font color='red'>}</font>
<a name='L4100'>
<a name='L4101'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4102'><a href='../S/2799.html#L4735' title='Refered from 4735 in Objects/longobject.c.'>long_float</a>(PyObject *v)
<a name='L4103'><font color='red'>{</font>
<a name='L4104'>    <b>double</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L4105'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2799.html#L2481' title='Defined at 2481 in Objects/longobject.c.'>PyLong_AsDouble</a>(v);
<a name='L4106'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == -1.0 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4107'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4108'>    <b>return</b> <a href='../S/2791.html#L157' title='Defined at 157 in Objects/floatobject.c.'>PyFloat_FromDouble</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4109'><font color='red'>}</font>
<a name='L4110'>
<a name='L4111'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4112'><a href='../S/2799.html#L4177' title='Defined at 4177 in Objects/longobject.c.'>long_subtype_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds);
<a name='L4113'>
<a name='L4114'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4115'><a href='../R/8784.html' title='Multiple refered from 2 places.'>long_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L4116'><font color='red'>{</font>
<a name='L4117'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obase = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *x = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4118'>    <b>long</b> base;
<a name='L4119'>    <b>int</b> <a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>;
<a name='L4120'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"x", "base", 0<font color='red'>}</font>;
<a name='L4121'>
<a name='L4122'>    <b>if</b> (type != &amp;PyLong_Type)
<a name='L4123'>        <b>return</b> <a href='../S/2799.html#L4177' title='Defined at 4177 in Objects/longobject.c.'>long_subtype_new</a>(type, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds); <i><font color='green'>/* Wimp out */</font></i>
<a name='L4124'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "|OO:int", kwlist,
<a name='L4125'>                                     &amp;x, &amp;obase))
<a name='L4126'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4127'>    <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4128'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0L);
<a name='L4129'>    <b>if</b> (obase == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4130'>        <b>return</b> <a href='../S/2775.html#L1325' title='Defined at 1325 in Objects/abstract.c.'>PyNumber_Long</a>(x);
<a name='L4131'>
<a name='L4132'>    base = <a href='../S/2799.html#L329' title='Defined at 329 in Objects/longobject.c.'>PyLong_AsLongAndOverflow</a>(obase, &amp;<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a>);
<a name='L4133'>    <b>if</b> (base == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L4134'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4135'>    <b>if</b> (<a href='../S/2674.html#L167' title='Defined at 167 in Modules/fpetestmodule.c.'>overflow</a> || (base != 0 &amp;&amp; base &lt; 2) || base &gt; 36) <font color='red'>{</font>
<a name='L4136'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L4137'>                        "int() arg 2 must be &gt;= 2 and &lt;= 36");
<a name='L4138'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4139'>    <font color='red'>}</font>
<a name='L4140'>
<a name='L4141'>    <b>if</b> (PyUnicode_Check(x))
<a name='L4142'>        <b>return</b> <a href='../S/2799.html#L2133' title='Defined at 2133 in Objects/longobject.c.'>PyLong_FromUnicode</a>(<a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(x),
<a name='L4143'>                                  <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(x),
<a name='L4144'>                                  (<b>int</b>)base);
<a name='L4145'>    <b>else</b> <b>if</b> (PyByteArray_Check(x) || PyBytes_Check(x)) <font color='red'>{</font>
<a name='L4146'>        <i><font color='green'>/* Since PyLong_FromString doesn't have a length parameter,</font></i>
<a name='L4147'><i><font color='green'>         * check here for possible NULs in the string. */</font></i>
<a name='L4148'>        <b>char</b> *<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>;
<a name='L4149'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> size = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(x);
<a name='L4150'>        <b>if</b> (PyByteArray_Check(x))
<a name='L4151'>            <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a> = PyByteArray_AS_STRING(x);
<a name='L4152'>        <b>else</b>
<a name='L4153'>            <a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a> = PyBytes_AS_STRING(x);
<a name='L4154'>        <b>if</b> (strlen(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>) != (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)size) <font color='red'>{</font>
<a name='L4155'>            <i><font color='green'>/* We only see this if there's a null byte in x,</font></i>
<a name='L4156'><i><font color='green'>               x is a bytes or buffer, *and* a base is given. */</font></i>
<a name='L4157'>            <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L4158'>                         "invalid literal for int() with base %d: %R",
<a name='L4159'>                         (<b>int</b>)base, x);
<a name='L4160'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4161'>        <font color='red'>}</font>
<a name='L4162'>        <b>return</b> <a href='../S/2799.html#L1853' title='Defined at 1853 in Objects/longobject.c.'>PyLong_FromString</a>(<a href='../S/500.html#L5' title='Defined at 5 in Include/asdl.h.'>string</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, (<b>int</b>)base);
<a name='L4163'>    <font color='red'>}</font>
<a name='L4164'>    <b>else</b> <font color='red'>{</font>
<a name='L4165'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L4166'>                        "int() can't convert non-string with explicit base");
<a name='L4167'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4168'>    <font color='red'>}</font>
<a name='L4169'><font color='red'>}</font>
<a name='L4170'>
<a name='L4171'><i><font color='green'>/* Wimpy, slow approach to tp_new calls for subtypes of long:</font></i>
<a name='L4172'><i><font color='green'>   first create a regular long from whatever arguments we got,</font></i>
<a name='L4173'><i><font color='green'>   then allocate a subtype instance and initialize it from</font></i>
<a name='L4174'><i><font color='green'>   the regular long.  The regular long is then thrown away.</font></i>
<a name='L4175'><i><font color='green'>*/</font></i>
<a name='L4176'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4177'><a href='../R/8793.html' title='Multiple refered from 2 places.'>long_subtype_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L4178'><font color='red'>{</font>
<a name='L4179'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *tmp, *newobj;
<a name='L4180'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, n;
<a name='L4181'>
<a name='L4182'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/2824.html#L1082' title='Defined at 1082 in Objects/typeobject.c.'>PyType_IsSubtype</a>(type, &amp;PyLong_Type));
<a name='L4183'>    tmp = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L4115' title='Defined at 4115 in Objects/longobject.c.'>long_new</a>(&amp;PyLong_Type, <a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds);
<a name='L4184'>    <b>if</b> (tmp == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4185'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4186'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_CheckExact(tmp));
<a name='L4187'>    n = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(tmp);
<a name='L4188'>    <b>if</b> (n &lt; 0)
<a name='L4189'>        n = -n;
<a name='L4190'>    newobj = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)type-&gt;tp_alloc(type, n);
<a name='L4191'>    <b>if</b> (newobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4192'>        Py_DECREF(tmp);
<a name='L4193'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4194'>    <font color='red'>}</font>
<a name='L4195'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(newobj));
<a name='L4196'>    <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(newobj) = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(tmp);
<a name='L4197'>    <b>for</b> (i = 0; i &lt; n; i++)
<a name='L4198'>        newobj-&gt;ob_digit[i] = tmp-&gt;ob_digit[i];
<a name='L4199'>    Py_DECREF(tmp);
<a name='L4200'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)newobj;
<a name='L4201'><font color='red'>}</font>
<a name='L4202'>
<a name='L4203'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4204'><a href='../S/2799.html#L4680' title='Refered from 4680 in Objects/longobject.c.'>long_getnewargs</a>(PyLongObject *v)
<a name='L4205'><font color='red'>{</font>
<a name='L4206'>    <b>return</b> <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("(N)", <a href='../S/2799.html#L149' title='Defined at 149 in Objects/longobject.c.'>_PyLong_Copy</a>(v));
<a name='L4207'><font color='red'>}</font>
<a name='L4208'>
<a name='L4209'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4210'><a href='../S/2799.html#L4693' title='Refered from 4693 in Objects/longobject.c.'>long_get0</a>(PyLongObject *v, <b>void</b> *context) <font color='red'>{</font>
<a name='L4211'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0L);
<a name='L4212'><font color='red'>}</font>
<a name='L4213'>
<a name='L4214'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4215'><a href='../S/2799.html#L4701' title='Refered from 4701 in Objects/longobject.c.'>long_get1</a>(PyLongObject *v, <b>void</b> *context) <font color='red'>{</font>
<a name='L4216'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(1L);
<a name='L4217'><font color='red'>}</font>
<a name='L4218'>
<a name='L4219'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4220'><a href='../S/2799.html#L4681' title='Refered from 4681 in Objects/longobject.c.'>long__format__</a>(PyObject *self, PyObject *args)
<a name='L4221'><font color='red'>{</font>
<a name='L4222'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *format_spec;
<a name='L4223'>
<a name='L4224'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "U:__format__", &amp;format_spec))
<a name='L4225'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4226'>    <b>return</b> _PyLong_FormatAdvanced(self,
<a name='L4227'>                                  <a href='../S/587.html#L408' title='Defined at 408 in Include/unicodeobject.h.'>PyUnicode_AS_UNICODE</a>(format_spec),
<a name='L4228'>                                  <a href='../S/587.html#L404' title='Defined at 404 in Include/unicodeobject.h.'>PyUnicode_GET_SIZE</a>(format_spec));
<a name='L4229'><font color='red'>}</font>
<a name='L4230'>
<a name='L4231'><i><font color='green'>/* Return a pair (q, r) such that a = b * q + r, and</font></i>
<a name='L4232'><i><font color='green'>   abs(r) &lt;= abs(b)/2, with equality possible only if q is even.</font></i>
<a name='L4233'><i><font color='green'>   In other words, q == a / b, rounded to the nearest integer using</font></i>
<a name='L4234'><i><font color='green'>   round-half-to-even. */</font></i>
<a name='L4235'>
<a name='L4236'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4237'><a href='../R/5441.html' title='Multiple refered from 2 places.'>_PyLong_DivmodNear</a>(PyObject *a, PyObject *b)
<a name='L4238'><font color='red'>{</font>
<a name='L4239'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *quo = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *rem = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4240'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *one = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *twice_rem, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, *temp;
<a name='L4241'>    <b>int</b> <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>, quo_is_odd, quo_is_neg;
<a name='L4242'>
<a name='L4243'>    <i><font color='green'>/* Equivalent Python code:</font></i>
<a name='L4244'><i><font color='green'></font></i>
<a name='L4245'><i><font color='green'>       def divmod_near(a, b):</font></i>
<a name='L4246'><i><font color='green'>           q, r = divmod(a, b)</font></i>
<a name='L4247'><i><font color='green'>           # round up if either r / b &gt; 0.5, or r / b == 0.5 and q is odd.</font></i>
<a name='L4248'><i><font color='green'>           # The expression r / b &gt; 0.5 is equivalent to 2 * r &gt; b if b is</font></i>
<a name='L4249'><i><font color='green'>           # positive, 2 * r &lt; b if b negative.</font></i>
<a name='L4250'><i><font color='green'>           greater_than_half = 2*r &gt; b if b &gt; 0 else 2*r &lt; b</font></i>
<a name='L4251'><i><font color='green'>           exactly_half = 2*r == b</font></i>
<a name='L4252'><i><font color='green'>           if greater_than_half or exactly_half and q % 2 == 1:</font></i>
<a name='L4253'><i><font color='green'>               q += 1</font></i>
<a name='L4254'><i><font color='green'>               r -= b</font></i>
<a name='L4255'><i><font color='green'>           return q, r</font></i>
<a name='L4256'><i><font color='green'></font></i>
<a name='L4257'><i><font color='green'>    */</font></i>
<a name='L4258'>    <b>if</b> (!PyLong_Check(a) || !PyLong_Check(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>)) <font color='red'>{</font>
<a name='L4259'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L4260'>                        "non-integer arguments in division");
<a name='L4261'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4262'>    <font color='red'>}</font>
<a name='L4263'>
<a name='L4264'>    <i><font color='green'>/* Do a and b have different signs?  If so, quotient is negative. */</font></i>
<a name='L4265'>    quo_is_neg = (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(a) &lt; 0) != (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0);
<a name='L4266'>
<a name='L4267'>    one = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(1L);
<a name='L4268'>    <b>if</b> (one == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4269'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4270'>
<a name='L4271'>    <b>if</b> (<a href='../S/2799.html#L2175' title='Defined at 2175 in Objects/longobject.c.'>long_divrem</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)a, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, &amp;quo, &amp;rem) &lt; 0)
<a name='L4272'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4273'>
<a name='L4274'>    <i><font color='green'>/* compare twice the remainder with the divisor, to see</font></i>
<a name='L4275'><i><font color='green'>       if we need to adjust the quotient and remainder */</font></i>
<a name='L4276'>    twice_rem = <a href='../S/2799.html#L3874' title='Defined at 3874 in Objects/longobject.c.'>long_lshift</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)rem, one);
<a name='L4277'>    <b>if</b> (twice_rem == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4278'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4279'>    <b>if</b> (quo_is_neg) <font color='red'>{</font>
<a name='L4280'>        temp = <a href='../S/2799.html#L3791' title='Defined at 3791 in Objects/longobject.c.'>long_neg</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)twice_rem);
<a name='L4281'>        Py_DECREF(twice_rem);
<a name='L4282'>        twice_rem = temp;
<a name='L4283'>        <b>if</b> (twice_rem == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4284'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4285'>    <font color='red'>}</font>
<a name='L4286'>    <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> = <a href='../S/2799.html#L2508' title='Defined at 2508 in Objects/longobject.c.'>long_compare</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)twice_rem, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4287'>    Py_DECREF(twice_rem);
<a name='L4288'>
<a name='L4289'>    quo_is_odd = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(quo) != 0 &amp;&amp; ((quo-&gt;ob_digit[0] &amp; 1) != 0);
<a name='L4290'>    <b>if</b> ((<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>) &lt; 0 ? <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> &lt; 0 : <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> &gt; 0) || (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> == 0 &amp;&amp; quo_is_odd)) <font color='red'>{</font>
<a name='L4291'>        <i><font color='green'>/* fix up quotient */</font></i>
<a name='L4292'>        <b>if</b> (quo_is_neg)
<a name='L4293'>            temp = <a href='../S/2799.html#L2749' title='Defined at 2749 in Objects/longobject.c.'>long_sub</a>(quo, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)one);
<a name='L4294'>        <b>else</b>
<a name='L4295'>            temp = <a href='../S/2799.html#L2719' title='Defined at 2719 in Objects/longobject.c.'>long_add</a>(quo, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)one);
<a name='L4296'>        Py_DECREF(quo);
<a name='L4297'>        quo = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)temp;
<a name='L4298'>        <b>if</b> (quo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4299'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4300'>        <i><font color='green'>/* and remainder */</font></i>
<a name='L4301'>        <b>if</b> (quo_is_neg)
<a name='L4302'>            temp = <a href='../S/2799.html#L2719' title='Defined at 2719 in Objects/longobject.c.'>long_add</a>(rem, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4303'>        <b>else</b>
<a name='L4304'>            temp = <a href='../S/2799.html#L2749' title='Defined at 2749 in Objects/longobject.c.'>long_sub</a>(rem, (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L4305'>        Py_DECREF(rem);
<a name='L4306'>        rem = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)temp;
<a name='L4307'>        <b>if</b> (rem == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4308'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4309'>    <font color='red'>}</font>
<a name='L4310'>
<a name='L4311'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(2);
<a name='L4312'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4313'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4314'>
<a name='L4315'>    <i><font color='green'>/* PyTuple_SET_ITEM steals references */</font></i>
<a name='L4316'>    PyTuple_SET_ITEM(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, 0, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)quo);
<a name='L4317'>    PyTuple_SET_ITEM(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, 1, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)rem);
<a name='L4318'>    Py_DECREF(one);
<a name='L4319'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L4320'>
<a name='L4321'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L4322'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(quo);
<a name='L4323'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(rem);
<a name='L4324'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(one);
<a name='L4325'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4326'><font color='red'>}</font>
<a name='L4327'>
<a name='L4328'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4329'><a href='../S/2799.html#L4677' title='Refered from 4677 in Objects/longobject.c.'>long_round</a>(PyObject *self, PyObject *args)
<a name='L4330'><font color='red'>{</font>
<a name='L4331'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *o_ndigits=<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *temp, *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, *ndigits;
<a name='L4332'>
<a name='L4333'>    <i><font color='green'>/* To round an integer m to the nearest 10**n (n positive), we make use of</font></i>
<a name='L4334'><i><font color='green'>     * the divmod_near operation, defined by:</font></i>
<a name='L4335'><i><font color='green'>     *</font></i>
<a name='L4336'><i><font color='green'>     *   divmod_near(a, b) = (q, r)</font></i>
<a name='L4337'><i><font color='green'>     *</font></i>
<a name='L4338'><i><font color='green'>     * where q is the nearest integer to the quotient a / b (the</font></i>
<a name='L4339'><i><font color='green'>     * nearest even integer in the case of a tie) and r == a - q * b.</font></i>
<a name='L4340'><i><font color='green'>     * Hence q * b = a - r is the nearest multiple of b to a,</font></i>
<a name='L4341'><i><font color='green'>     * preferring even multiples in the case of a tie.</font></i>
<a name='L4342'><i><font color='green'>     *</font></i>
<a name='L4343'><i><font color='green'>     * So the nearest multiple of 10**n to m is:</font></i>
<a name='L4344'><i><font color='green'>     *</font></i>
<a name='L4345'><i><font color='green'>     *   m - divmod_near(m, 10**n)[1].</font></i>
<a name='L4346'><i><font color='green'>     */</font></i>
<a name='L4347'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "|O", &amp;o_ndigits))
<a name='L4348'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4349'>    <b>if</b> (o_ndigits == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4350'>        <b>return</b> <a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>(self);
<a name='L4351'>
<a name='L4352'>    ndigits = <a href='../S/2775.html#L1196' title='Defined at 1196 in Objects/abstract.c.'>PyNumber_Index</a>(o_ndigits);
<a name='L4353'>    <b>if</b> (ndigits == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4354'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4355'>
<a name='L4356'>    <i><font color='green'>/* if ndigits &gt;= 0 then no rounding is necessary; return self unchanged */</font></i>
<a name='L4357'>    <b>if</b> (<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(ndigits) &gt;= 0) <font color='red'>{</font>
<a name='L4358'>        Py_DECREF(ndigits);
<a name='L4359'>        <b>return</b> <a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>(self);
<a name='L4360'>    <font color='red'>}</font>
<a name='L4361'>
<a name='L4362'>    <i><font color='green'>/* result = self - divmod_near(self, 10 ** -ndigits)[1] */</font></i>
<a name='L4363'>    temp = <a href='../S/2799.html#L3791' title='Defined at 3791 in Objects/longobject.c.'>long_neg</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>*)ndigits);
<a name='L4364'>    Py_DECREF(ndigits);
<a name='L4365'>    ndigits = temp;
<a name='L4366'>    <b>if</b> (ndigits == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4367'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4368'>
<a name='L4369'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(10L);
<a name='L4370'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4371'>        Py_DECREF(ndigits);
<a name='L4372'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4373'>    <font color='red'>}</font>
<a name='L4374'>
<a name='L4375'>    temp = <a href='../S/2799.html#L3586' title='Defined at 3586 in Objects/longobject.c.'>long_pow</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, ndigits, Py_None);
<a name='L4376'>    Py_DECREF(ndigits);
<a name='L4377'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4378'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = temp;
<a name='L4379'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4380'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4381'>
<a name='L4382'>    temp = <a href='../S/2799.html#L4237' title='Defined at 4237 in Objects/longobject.c.'>_PyLong_DivmodNear</a>(self, <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4383'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4384'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = temp;
<a name='L4385'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4386'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4387'>
<a name='L4388'>    temp = <a href='../S/2799.html#L2749' title='Defined at 2749 in Objects/longobject.c.'>long_sub</a>((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)self,
<a name='L4389'>                    (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)PyTuple_GET_ITEM(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, 1));
<a name='L4390'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4391'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = temp;
<a name='L4392'>
<a name='L4393'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L4394'><font color='red'>}</font>
<a name='L4395'>
<a name='L4396'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4397'><a href='../S/2799.html#L4682' title='Refered from 4682 in Objects/longobject.c.'>long_sizeof</a>(PyLongObject *v)
<a name='L4398'><font color='red'>{</font>
<a name='L4399'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> res;
<a name='L4400'>
<a name='L4401'>    res = <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>, ob_digit) + <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v))*<b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>);
<a name='L4402'>    <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(res);
<a name='L4403'><font color='red'>}</font>
<a name='L4404'>
<a name='L4405'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4406'><a href='../S/2799.html#L4661' title='Refered from 4661 in Objects/longobject.c.'>long_bit_length</a>(PyLongObject *v)
<a name='L4407'><font color='red'>{</font>
<a name='L4408'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, *x, *y;
<a name='L4409'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> ndigits, msd_bits = 0;
<a name='L4410'>    <a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a> msd;
<a name='L4411'>
<a name='L4412'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(v != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L4413'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(v));
<a name='L4414'>
<a name='L4415'>    ndigits = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v));
<a name='L4416'>    <b>if</b> (ndigits == 0)
<a name='L4417'>        <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(0);
<a name='L4418'>
<a name='L4419'>    msd = v-&gt;ob_digit[ndigits-1];
<a name='L4420'>    <b>while</b> (msd &gt;= 32) <font color='red'>{</font>
<a name='L4421'>        msd_bits += 6;
<a name='L4422'>        msd &gt;&gt;= 6;
<a name='L4423'>    <font color='red'>}</font>
<a name='L4424'>    msd_bits += (<b>long</b>)(BitLengthTable[msd]);
<a name='L4425'>
<a name='L4426'>    <b>if</b> (ndigits &lt;= <a href='../D/2625.html' title='Multiple defined in 3 places.'>PY_SSIZE_T_MAX</a>/<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>)
<a name='L4427'>        <b>return</b> <a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>((ndigits-1)*<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a> + msd_bits);
<a name='L4428'>
<a name='L4429'>    <i><font color='green'>/* expression above may overflow; use Python integers instead */</font></i>
<a name='L4430'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../D/3469.html' title='Multiple defined in 2 places.'>PyLong_FromSsize_t</a>(ndigits - 1);
<a name='L4431'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4432'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4433'>    x = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>);
<a name='L4434'>    <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4435'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4436'>    y = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L3181' title='Defined at 3181 in Objects/longobject.c.'>long_mul</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, x);
<a name='L4437'>    Py_DECREF(x);
<a name='L4438'>    <b>if</b> (y == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4439'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4440'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4441'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = y;
<a name='L4442'>
<a name='L4443'>    x = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>((<b>long</b>)msd_bits);
<a name='L4444'>    <b>if</b> (x == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4445'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4446'>    y = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)<a href='../S/2799.html#L2719' title='Defined at 2719 in Objects/longobject.c.'>long_add</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, x);
<a name='L4447'>    Py_DECREF(x);
<a name='L4448'>    <b>if</b> (y == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4449'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L4450'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4451'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = y;
<a name='L4452'>
<a name='L4453'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L4454'>
<a name='L4455'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L4456'>    Py_DECREF(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L4457'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4458'><font color='red'>}</font>
<a name='L4459'>
<a name='L4460'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(long_bit_length_doc,
<a name='L4461'>"int.bit_length() -&gt; int\n\
<a name='L4462'>\n\
<a name='L4463'>Number of bits necessary to represent self in binary.\n\
<a name='L4464'>&gt;&gt;&gt; bin(37)\n\
<a name='L4465'>'0b100101'\n\
<a name='L4466'>&gt;&gt;&gt; (37).bit_length()\n\
<a name='L4467'>6");
<a name='L4468'>
<a name='L4469'><font color='darkred'>#if</font> 0
<a name='L4470'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4471'><a href='../S/2799.html#L4664' title='Refered from 4664 in Objects/longobject.c.'>long_is_finite</a>(PyObject *v)
<a name='L4472'><font color='red'>{</font>
<a name='L4473'>    Py_RETURN_TRUE;
<a name='L4474'><font color='red'>}</font>
<a name='L4475'><font color='darkred'>#endif</font>
<a name='L4476'>
<a name='L4477'>
<a name='L4478'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4479'><a href='../S/2799.html#L4667' title='Refered from 4667 in Objects/longobject.c.'>long_to_bytes</a>(PyLongObject *v, PyObject *args, PyObject *kwds)
<a name='L4480'><font color='red'>{</font>
<a name='L4481'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *byteorder_str;
<a name='L4482'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *is_signed_obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4483'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> length;
<a name='L4484'>    <b>int</b> little_endian;
<a name='L4485'>    <b>int</b> is_signed;
<a name='L4486'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L4487'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"length", "byteorder", "signed", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L4488'>
<a name='L4489'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "nU|O:to_bytes", kwlist,
<a name='L4490'>                                     &amp;length, &amp;byteorder_str,
<a name='L4491'>                                     &amp;is_signed_obj))
<a name='L4492'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4493'>
<a name='L4494'>    <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) &gt; 2) <font color='red'>{</font>
<a name='L4495'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L4496'>            "'signed' is a keyword-only argument");
<a name='L4497'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4498'>    <font color='red'>}</font>
<a name='L4499'>
<a name='L4500'>    <b>if</b> (!<a href='../D/3968.html' title='Multiple defined in 3 places.'>PyUnicode_CompareWithASCIIString</a>(byteorder_str, "little"))
<a name='L4501'>        little_endian = 1;
<a name='L4502'>    <b>else</b> <b>if</b> (!<a href='../D/3968.html' title='Multiple defined in 3 places.'>PyUnicode_CompareWithASCIIString</a>(byteorder_str, "big"))
<a name='L4503'>        little_endian = 0;
<a name='L4504'>    <b>else</b> <font color='red'>{</font>
<a name='L4505'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L4506'>            "byteorder must be either 'little' or 'big'");
<a name='L4507'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4508'>    <font color='red'>}</font>
<a name='L4509'>
<a name='L4510'>    <b>if</b> (is_signed_obj != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4511'>        <b>int</b> <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(is_signed_obj);
<a name='L4512'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> &lt; 0)
<a name='L4513'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4514'>        is_signed = <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> ? 1 : 0;
<a name='L4515'>    <font color='red'>}</font>
<a name='L4516'>    <b>else</b> <font color='red'>{</font>
<a name='L4517'>        <i><font color='green'>/* If the signed argument was omitted, use False as the</font></i>
<a name='L4518'><i><font color='green'>           default. */</font></i>
<a name='L4519'>        is_signed = 0;
<a name='L4520'>    <font color='red'>}</font>
<a name='L4521'>
<a name='L4522'>    <b>if</b> (length &lt; 0) <font color='red'>{</font>
<a name='L4523'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L4524'>                        "length argument must be non-negative");
<a name='L4525'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4526'>    <font color='red'>}</font>
<a name='L4527'>
<a name='L4528'>    <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../S/2779.html#L70' title='Defined at 70 in Objects/bytesobject.c.'>PyBytes_FromStringAndSize</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, length);
<a name='L4529'>    <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4530'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4531'>
<a name='L4532'>    <b>if</b> (<a href='../S/2799.html#L794' title='Defined at 794 in Objects/longobject.c.'>_PyLong_AsByteArray</a>(v, (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>),
<a name='L4533'>                            length, little_endian, is_signed) &lt; 0) <font color='red'>{</font>
<a name='L4534'>        Py_DECREF(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L4535'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4536'>    <font color='red'>}</font>
<a name='L4537'>
<a name='L4538'>    <b>return</b> <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L4539'><font color='red'>}</font>
<a name='L4540'>
<a name='L4541'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(long_to_bytes_doc,
<a name='L4542'>"int.to_bytes(length, byteorder, *, signed=False) -&gt; bytes\n\
<a name='L4543'>\n\
<a name='L4544'>Return an array of bytes representing an integer.\n\
<a name='L4545'>\n\
<a name='L4546'>The integer is represented using length bytes.  An OverflowError is\n\
<a name='L4547'>raised if the integer is not representable with the given number of\n\
<a name='L4548'>bytes.\n\
<a name='L4549'>\n\
<a name='L4550'>The byteorder argument determines the byte order used to represent the\n\
<a name='L4551'>integer.  If byteorder is 'big', the most significant byte is at the\n\
<a name='L4552'>beginning of the byte array.  If byteorder is 'little', the most\n\
<a name='L4553'>significant byte is at the end of the byte array.  To request the native\n\
<a name='L4554'>byte order of the host system, use `sys.byteorder' as the byte order value.\n\
<a name='L4555'>\n\
<a name='L4556'>The signed keyword-only argument determines whether two's complement is\n\
<a name='L4557'>used to represent the integer.  If signed is False and a negative integer\n\
<a name='L4558'>is given, an OverflowError is raised.");
<a name='L4559'>
<a name='L4560'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4561'><a href='../S/2799.html#L4669' title='Refered from 4669 in Objects/longobject.c.'>long_from_bytes</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L4562'><font color='red'>{</font>
<a name='L4563'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *byteorder_str;
<a name='L4564'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *is_signed_obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4565'>    <b>int</b> little_endian;
<a name='L4566'>    <b>int</b> is_signed;
<a name='L4567'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;
<a name='L4568'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>;
<a name='L4569'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *long_obj;
<a name='L4570'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"bytes", "byteorder", "signed", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L4571'>
<a name='L4572'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "OU|O:from_bytes", kwlist,
<a name='L4573'>                                     &amp;obj, &amp;byteorder_str,
<a name='L4574'>                                     &amp;is_signed_obj))
<a name='L4575'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4576'>
<a name='L4577'>    <b>if</b> (<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>) &gt; 2) <font color='red'>{</font>
<a name='L4578'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L4579'>            "'signed' is a keyword-only argument");
<a name='L4580'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4581'>    <font color='red'>}</font>
<a name='L4582'>
<a name='L4583'>    <b>if</b> (!<a href='../D/3968.html' title='Multiple defined in 3 places.'>PyUnicode_CompareWithASCIIString</a>(byteorder_str, "little"))
<a name='L4584'>        little_endian = 1;
<a name='L4585'>    <b>else</b> <b>if</b> (!<a href='../D/3968.html' title='Multiple defined in 3 places.'>PyUnicode_CompareWithASCIIString</a>(byteorder_str, "big"))
<a name='L4586'>        little_endian = 0;
<a name='L4587'>    <b>else</b> <font color='red'>{</font>
<a name='L4588'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L4589'>            "byteorder must be either 'little' or 'big'");
<a name='L4590'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4591'>    <font color='red'>}</font>
<a name='L4592'>
<a name='L4593'>    <b>if</b> (is_signed_obj != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4594'>        <b>int</b> <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> = <a href='../S/2803.html#L1140' title='Defined at 1140 in Objects/object.c.'>PyObject_IsTrue</a>(is_signed_obj);
<a name='L4595'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> &lt; 0)
<a name='L4596'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4597'>        is_signed = <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a> ? 1 : 0;
<a name='L4598'>    <font color='red'>}</font>
<a name='L4599'>    <b>else</b> <font color='red'>{</font>
<a name='L4600'>        <i><font color='green'>/* If the signed argument was omitted, use False as the</font></i>
<a name='L4601'><i><font color='green'>           default. */</font></i>
<a name='L4602'>        is_signed = 0;
<a name='L4603'>    <font color='red'>}</font>
<a name='L4604'>
<a name='L4605'>    <a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> = <a href='../S/2803.html#L463' title='Defined at 463 in Objects/object.c.'>PyObject_Bytes</a>(obj);
<a name='L4606'>    <b>if</b> (<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4607'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4608'>
<a name='L4609'>    long_obj = <a href='../S/2799.html#L683' title='Defined at 683 in Objects/longobject.c.'>_PyLong_FromByteArray</a>(
<a name='L4610'>        (<b>unsigned</b> <b>char</b> *)PyBytes_AS_STRING(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>), <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>),
<a name='L4611'>        little_endian, is_signed);
<a name='L4612'>    Py_DECREF(<a href='../D/7205.html' title='Multiple defined in 2 places.'>bytes</a>);
<a name='L4613'>
<a name='L4614'>    <i><font color='green'>/* If from_bytes() was used on subclass, allocate new subclass</font></i>
<a name='L4615'><i><font color='green'>     * instance, initialize it with decoded long value and return it.</font></i>
<a name='L4616'><i><font color='green'>     */</font></i>
<a name='L4617'>    <b>if</b> (type != &amp;PyLong_Type &amp;&amp; <a href='../S/2824.html#L1082' title='Defined at 1082 in Objects/typeobject.c.'>PyType_IsSubtype</a>(type, &amp;PyLong_Type)) <font color='red'>{</font>
<a name='L4618'>        <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *newobj;
<a name='L4619'>        <b>int</b> i;
<a name='L4620'>        <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> n = <a href='../D/13.html' title='Multiple defined in 2 places.'>ABS</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(long_obj));
<a name='L4621'>
<a name='L4622'>        newobj = (<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)type-&gt;tp_alloc(type, n);
<a name='L4623'>        <b>if</b> (newobj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L4624'>            Py_DECREF(long_obj);
<a name='L4625'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4626'>        <font color='red'>}</font>
<a name='L4627'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(PyLong_Check(newobj));
<a name='L4628'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(newobj) = <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(long_obj);
<a name='L4629'>        <b>for</b> (i = 0; i &lt; n; i++) <font color='red'>{</font>
<a name='L4630'>            newobj-&gt;ob_digit[i] =
<a name='L4631'>                ((<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *)long_obj)-&gt;ob_digit[i];
<a name='L4632'>        <font color='red'>}</font>
<a name='L4633'>        Py_DECREF(long_obj);
<a name='L4634'>        <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)newobj;
<a name='L4635'>    <font color='red'>}</font>
<a name='L4636'>
<a name='L4637'>    <b>return</b> long_obj;
<a name='L4638'><font color='red'>}</font>
<a name='L4639'>
<a name='L4640'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(long_from_bytes_doc,
<a name='L4641'>"int.from_bytes(bytes, byteorder, *, signed=False) -&gt; int\n\
<a name='L4642'>\n\
<a name='L4643'>Return the integer represented by the given array of bytes.\n\
<a name='L4644'>\n\
<a name='L4645'>The bytes argument must either support the buffer protocol or be an\n\
<a name='L4646'>iterable object producing bytes.  Bytes and bytearray are examples of\n\
<a name='L4647'>built-in objects that support the buffer protocol.\n\
<a name='L4648'>\n\
<a name='L4649'>The byteorder argument determines the byte order used to represent the\n\
<a name='L4650'>integer.  If byteorder is 'big', the most significant byte is at the\n\
<a name='L4651'>beginning of the byte array.  If byteorder is 'little', the most\n\
<a name='L4652'>significant byte is at the end of the byte array.  To request the native\n\
<a name='L4653'>byte order of the host system, use `sys.byteorder' as the byte order value.\n\
<a name='L4654'>\n\
<a name='L4655'>The signed keyword-only argument indicates whether two's complement is\n\
<a name='L4656'>used to represent the integer.");
<a name='L4657'>
<a name='L4658'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> long_methods[] = <font color='red'>{</font>
<a name='L4659'>    <font color='red'>{</font>"conjugate",       (PyCFunction)<a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L4660'>     "Returns self, the complex conjugate of any int."<font color='red'>}</font>,
<a name='L4661'>    <font color='red'>{</font>"bit_length",      (PyCFunction)<a href='../S/2799.html#L4406' title='Defined at 4406 in Objects/longobject.c.'>long_bit_length</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L4662'>     long_bit_length_doc<font color='red'>}</font>,
<a name='L4663'><font color='darkred'>#if</font> 0
<a name='L4664'>    <font color='red'>{</font>"is_finite",       (PyCFunction)<a href='../S/2799.html#L4471' title='Defined at 4471 in Objects/longobject.c.'>long_is_finite</a>,    <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L4665'>     "Returns always True."<font color='red'>}</font>,
<a name='L4666'><font color='darkred'>#endif</font>
<a name='L4667'>    <font color='red'>{</font>"to_bytes",        (PyCFunction)<a href='../S/2799.html#L4479' title='Defined at 4479 in Objects/longobject.c.'>long_to_bytes</a>,
<a name='L4668'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS, long_to_bytes_doc<font color='red'>}</font>,
<a name='L4669'>    <font color='red'>{</font>"from_bytes",      (PyCFunction)<a href='../S/2799.html#L4561' title='Defined at 4561 in Objects/longobject.c.'>long_from_bytes</a>,
<a name='L4670'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>|METH_KEYWORDS|METH_CLASS, long_from_bytes_doc<font color='red'>}</font>,
<a name='L4671'>    <font color='red'>{</font>"__trunc__",       (PyCFunction)<a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L4672'>     "Truncating an Integral returns itself."<font color='red'>}</font>,
<a name='L4673'>    <font color='red'>{</font>"__floor__",       (PyCFunction)<a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L4674'>     "Flooring an Integral returns itself."<font color='red'>}</font>,
<a name='L4675'>    <font color='red'>{</font>"__ceil__",        (PyCFunction)<a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L4676'>     "Ceiling of an Integral returns itself."<font color='red'>}</font>,
<a name='L4677'>    <font color='red'>{</font>"__round__",       (PyCFunction)<a href='../S/2799.html#L4329' title='Defined at 4329 in Objects/longobject.c.'>long_round</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,
<a name='L4678'>     "Rounding an Integral returns itself.\n"
<a name='L4679'>     "Rounding with an ndigits argument also returns an integer."<font color='red'>}</font>,
<a name='L4680'>    <font color='red'>{</font>"__getnewargs__",          (PyCFunction)<a href='../S/2799.html#L4204' title='Defined at 4204 in Objects/longobject.c.'>long_getnewargs</a>,   <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a><font color='red'>}</font>,
<a name='L4681'>    <font color='red'>{</font>"__format__", (PyCFunction)<a href='../S/2799.html#L4220' title='Defined at 4220 in Objects/longobject.c.'>long__format__</a>, <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a><font color='red'>}</font>,
<a name='L4682'>    <font color='red'>{</font>"__sizeof__",      (PyCFunction)<a href='../S/2799.html#L4397' title='Defined at 4397 in Objects/longobject.c.'>long_sizeof</a>, <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L4683'>     "Returns size in memory, in bytes"<font color='red'>}</font>,
<a name='L4684'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>           <i><font color='green'>/* sentinel */</font></i>
<a name='L4685'><font color='red'>}</font>;
<a name='L4686'>
<a name='L4687'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> long_getset[] = <font color='red'>{</font>
<a name='L4688'>    <font color='red'>{</font>"real",
<a name='L4689'>     (getter)<a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>, (setter)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L4690'>     "the real part of a complex number",
<a name='L4691'>     <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L4692'>    <font color='red'>{</font>"imag",
<a name='L4693'>     (getter)<a href='../S/2799.html#L4210' title='Defined at 4210 in Objects/longobject.c.'>long_get0</a>, (setter)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L4694'>     "the imaginary part of a complex number",
<a name='L4695'>     <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L4696'>    <font color='red'>{</font>"numerator",
<a name='L4697'>     (getter)<a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>, (setter)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L4698'>     "the numerator of a rational number in lowest terms",
<a name='L4699'>     <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L4700'>    <font color='red'>{</font>"denominator",
<a name='L4701'>     (getter)<a href='../S/2799.html#L4215' title='Defined at 4215 in Objects/longobject.c.'>long_get1</a>, (setter)<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L4702'>     "the denominator of a rational number in lowest terms",
<a name='L4703'>     <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L4704'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>  <i><font color='green'>/* Sentinel */</font></i>
<a name='L4705'><font color='red'>}</font>;
<a name='L4706'>
<a name='L4707'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(long_doc,
<a name='L4708'>"int(x[, base]) -&gt; integer\n\
<a name='L4709'>\n\
<a name='L4710'>Convert a string or number to an integer, if possible.  A floating\n\
<a name='L4711'>point argument will be truncated towards zero (this does not include a\n\
<a name='L4712'>string representation of a floating point number!)  When converting a\n\
<a name='L4713'>string, use the optional base.  It is an error to supply a base when\n\
<a name='L4714'>converting a non-string.");
<a name='L4715'>
<a name='L4716'><b>static</b> <a href='../S/544.html#L247' title='Defined at 247 in Include/object.h.'>PyNumberMethods</a> long_as_number = <font color='red'>{</font>
<a name='L4717'>    (binaryfunc)<a href='../S/2799.html#L2719' title='Defined at 2719 in Objects/longobject.c.'>long_add</a>,       <i><font color='green'>/*nb_add*/</font></i>
<a name='L4718'>    (binaryfunc)<a href='../S/2799.html#L2749' title='Defined at 2749 in Objects/longobject.c.'>long_sub</a>,       <i><font color='green'>/*nb_subtract*/</font></i>
<a name='L4719'>    (binaryfunc)<a href='../S/2799.html#L3181' title='Defined at 3181 in Objects/longobject.c.'>long_mul</a>,       <i><font color='green'>/*nb_multiply*/</font></i>
<a name='L4720'>    <a href='../S/2799.html#L3550' title='Defined at 3550 in Objects/longobject.c.'>long_mod</a>,                   <i><font color='green'>/*nb_remainder*/</font></i>
<a name='L4721'>    <a href='../S/2799.html#L3562' title='Defined at 3562 in Objects/longobject.c.'>long_divmod</a>,                <i><font color='green'>/*nb_divmod*/</font></i>
<a name='L4722'>    <a href='../S/2799.html#L3586' title='Defined at 3586 in Objects/longobject.c.'>long_pow</a>,                   <i><font color='green'>/*nb_power*/</font></i>
<a name='L4723'>    (unaryfunc)<a href='../S/2799.html#L3791' title='Defined at 3791 in Objects/longobject.c.'>long_neg</a>,        <i><font color='green'>/*nb_negative*/</font></i>
<a name='L4724'>    (unaryfunc)<a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>,       <i><font color='green'>/*tp_positive*/</font></i>
<a name='L4725'>    (unaryfunc)<a href='../S/2799.html#L3803' title='Defined at 3803 in Objects/longobject.c.'>long_abs</a>,        <i><font color='green'>/*tp_absolute*/</font></i>
<a name='L4726'>    (inquiry)<a href='../S/2799.html#L3812' title='Defined at 3812 in Objects/longobject.c.'>long_bool</a>,         <i><font color='green'>/*tp_bool*/</font></i>
<a name='L4727'>    (unaryfunc)<a href='../S/2799.html#L3772' title='Defined at 3772 in Objects/longobject.c.'>long_invert</a>,     <i><font color='green'>/*nb_invert*/</font></i>
<a name='L4728'>    <a href='../S/2799.html#L3874' title='Defined at 3874 in Objects/longobject.c.'>long_lshift</a>,                <i><font color='green'>/*nb_lshift*/</font></i>
<a name='L4729'>    (binaryfunc)<a href='../S/2799.html#L3818' title='Defined at 3818 in Objects/longobject.c.'>long_rshift</a>,    <i><font color='green'>/*nb_rshift*/</font></i>
<a name='L4730'>    <a href='../S/2799.html#L4065' title='Defined at 4065 in Objects/longobject.c.'>long_and</a>,                   <i><font color='green'>/*nb_and*/</font></i>
<a name='L4731'>    <a href='../S/2799.html#L4074' title='Defined at 4074 in Objects/longobject.c.'>long_xor</a>,                   <i><font color='green'>/*nb_xor*/</font></i>
<a name='L4732'>    <a href='../S/2799.html#L4083' title='Defined at 4083 in Objects/longobject.c.'>long_or</a>,                    <i><font color='green'>/*nb_or*/</font></i>
<a name='L4733'>    <a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>,                  <i><font color='green'>/*nb_int*/</font></i>
<a name='L4734'>    0,                          <i><font color='green'>/*nb_reserved*/</font></i>
<a name='L4735'>    <a href='../S/2799.html#L4102' title='Defined at 4102 in Objects/longobject.c.'>long_float</a>,                 <i><font color='green'>/*nb_float*/</font></i>
<a name='L4736'>    0,                          <i><font color='green'>/* nb_inplace_add */</font></i>
<a name='L4737'>    0,                          <i><font color='green'>/* nb_inplace_subtract */</font></i>
<a name='L4738'>    0,                          <i><font color='green'>/* nb_inplace_multiply */</font></i>
<a name='L4739'>    0,                          <i><font color='green'>/* nb_inplace_remainder */</font></i>
<a name='L4740'>    0,                          <i><font color='green'>/* nb_inplace_power */</font></i>
<a name='L4741'>    0,                          <i><font color='green'>/* nb_inplace_lshift */</font></i>
<a name='L4742'>    0,                          <i><font color='green'>/* nb_inplace_rshift */</font></i>
<a name='L4743'>    0,                          <i><font color='green'>/* nb_inplace_and */</font></i>
<a name='L4744'>    0,                          <i><font color='green'>/* nb_inplace_xor */</font></i>
<a name='L4745'>    0,                          <i><font color='green'>/* nb_inplace_or */</font></i>
<a name='L4746'>    <a href='../S/2799.html#L3276' title='Defined at 3276 in Objects/longobject.c.'>long_div</a>,                   <i><font color='green'>/* nb_floor_divide */</font></i>
<a name='L4747'>    <a href='../S/2799.html#L3292' title='Defined at 3292 in Objects/longobject.c.'>long_true_divide</a>,           <i><font color='green'>/* nb_true_divide */</font></i>
<a name='L4748'>    0,                          <i><font color='green'>/* nb_inplace_floor_divide */</font></i>
<a name='L4749'>    0,                          <i><font color='green'>/* nb_inplace_true_divide */</font></i>
<a name='L4750'>    <a href='../S/2799.html#L4092' title='Defined at 4092 in Objects/longobject.c.'>long_long</a>,                  <i><font color='green'>/* nb_index */</font></i>
<a name='L4751'><font color='red'>}</font>;
<a name='L4752'>
<a name='L4753'><a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> PyLong_Type = <font color='red'>{</font>
<a name='L4754'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(&amp;PyType_Type, 0)
<a name='L4755'>    "int",                                      <i><font color='green'>/* tp_name */</font></i>
<a name='L4756'>    <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a>, ob_digit),           <i><font color='green'>/* tp_basicsize */</font></i>
<a name='L4757'>    <b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>),                              <i><font color='green'>/* tp_itemsize */</font></i>
<a name='L4758'>    <a href='../S/2799.html#L2502' title='Defined at 2502 in Objects/longobject.c.'>long_dealloc</a>,                               <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L4759'>    0,                                          <i><font color='green'>/* tp_print */</font></i>
<a name='L4760'>    0,                                          <i><font color='green'>/* tp_getattr */</font></i>
<a name='L4761'>    0,                                          <i><font color='green'>/* tp_setattr */</font></i>
<a name='L4762'>    0,                                          <i><font color='green'>/* tp_reserved */</font></i>
<a name='L4763'>    <a href='../S/2799.html#L1546' title='Defined at 1546 in Objects/longobject.c.'>long_to_decimal_string</a>,                     <i><font color='green'>/* tp_repr */</font></i>
<a name='L4764'>    &amp;long_as_number,                            <i><font color='green'>/* tp_as_number */</font></i>
<a name='L4765'>    0,                                          <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L4766'>    0,                                          <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L4767'>    (hashfunc)<a href='../S/2799.html#L2572' title='Defined at 2572 in Objects/longobject.c.'>long_hash</a>,                        <i><font color='green'>/* tp_hash */</font></i>
<a name='L4768'>    0,                                          <i><font color='green'>/* tp_call */</font></i>
<a name='L4769'>    <a href='../S/2799.html#L1546' title='Defined at 1546 in Objects/longobject.c.'>long_to_decimal_string</a>,                     <i><font color='green'>/* tp_str */</font></i>
<a name='L4770'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,                    <i><font color='green'>/* tp_getattro */</font></i>
<a name='L4771'>    0,                                          <i><font color='green'>/* tp_setattro */</font></i>
<a name='L4772'>    0,                                          <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L4773'>    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE |
<a name='L4774'>        Py_TPFLAGS_LONG_SUBCLASS,               <i><font color='green'>/* tp_flags */</font></i>
<a name='L4775'>    long_doc,                                   <i><font color='green'>/* tp_doc */</font></i>
<a name='L4776'>    0,                                          <i><font color='green'>/* tp_traverse */</font></i>
<a name='L4777'>    0,                                          <i><font color='green'>/* tp_clear */</font></i>
<a name='L4778'>    <a href='../S/2799.html#L2534' title='Defined at 2534 in Objects/longobject.c.'>long_richcompare</a>,                           <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L4779'>    0,                                          <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L4780'>    0,                                          <i><font color='green'>/* tp_iter */</font></i>
<a name='L4781'>    0,                                          <i><font color='green'>/* tp_iternext */</font></i>
<a name='L4782'>    long_methods,                               <i><font color='green'>/* tp_methods */</font></i>
<a name='L4783'>    0,                                          <i><font color='green'>/* tp_members */</font></i>
<a name='L4784'>    long_getset,                                <i><font color='green'>/* tp_getset */</font></i>
<a name='L4785'>    0,                                          <i><font color='green'>/* tp_base */</font></i>
<a name='L4786'>    0,                                          <i><font color='green'>/* tp_dict */</font></i>
<a name='L4787'>    0,                                          <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L4788'>    0,                                          <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L4789'>    0,                                          <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L4790'>    0,                                          <i><font color='green'>/* tp_init */</font></i>
<a name='L4791'>    0,                                          <i><font color='green'>/* tp_alloc */</font></i>
<a name='L4792'>    <a href='../S/2799.html#L4115' title='Defined at 4115 in Objects/longobject.c.'>long_new</a>,                                   <i><font color='green'>/* tp_new */</font></i>
<a name='L4793'>    PyObject_Del,                               <i><font color='green'>/* tp_free */</font></i>
<a name='L4794'><font color='red'>}</font>;
<a name='L4795'>
<a name='L4796'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> Int_InfoType;
<a name='L4797'>
<a name='L4798'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(int_info__doc__,
<a name='L4799'>"sys.int_info\n\
<a name='L4800'>\n\
<a name='L4801'>A struct sequence that holds information about Python's\n\
<a name='L4802'>internal representation of integers.  The attributes are read only.");
<a name='L4803'>
<a name='L4804'><b>static</b> <a href='../D/3794.html' title='Multiple defined in 2 places.'>PyStructSequence_Field</a> int_info_fields[] = <font color='red'>{</font>
<a name='L4805'>    <font color='red'>{</font>"bits_per_digit", "size of a digit in bits"<font color='red'>}</font>,
<a name='L4806'>    <font color='red'>{</font>"sizeof_digit", "size in bytes of the C type used to represent a digit"<font color='red'>}</font>,
<a name='L4807'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>
<a name='L4808'><font color='red'>}</font>;
<a name='L4809'>
<a name='L4810'><b>static</b> <a href='../D/3793.html' title='Multiple defined in 2 places.'>PyStructSequence_Desc</a> int_info_desc = <font color='red'>{</font>
<a name='L4811'>    "sys.int_info",   <i><font color='green'>/* name */</font></i>
<a name='L4812'>    int_info__doc__,  <i><font color='green'>/* doc */</font></i>
<a name='L4813'>    int_info_fields,  <i><font color='green'>/* fields */</font></i>
<a name='L4814'>    2                 <i><font color='green'>/* number of fields */</font></i>
<a name='L4815'><font color='red'>}</font>;
<a name='L4816'>
<a name='L4817'><a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L4818'><a href='../S/3144.html#L1623' title='Refered from 1623 in Python/sysmodule.c.'>PyLong_GetInfo</a>(<b>void</b>)
<a name='L4819'><font color='red'>{</font>
<a name='L4820'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* int_info;
<a name='L4821'>    <b>int</b> field = 0;
<a name='L4822'>    int_info = <a href='../S/2822.html#L29' title='Defined at 29 in Objects/structseq.c.'>PyStructSequence_New</a>(&amp;Int_InfoType);
<a name='L4823'>    <b>if</b> (int_info == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L4824'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4825'>    PyStructSequence_SET_ITEM(int_info, field++,
<a name='L4826'>                              <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<a href='../D/3481.html' title='Multiple defined in 2 places.'>PyLong_SHIFT</a>));
<a name='L4827'>    PyStructSequence_SET_ITEM(int_info, field++,
<a name='L4828'>                              <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(<b>sizeof</b>(<a href='../D/8164.html' title='Multiple defined in 2 places.'>digit</a>)));
<a name='L4829'>    <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L4830'>        <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(int_info);
<a name='L4831'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L4832'>    <font color='red'>}</font>
<a name='L4833'>    <b>return</b> int_info;
<a name='L4834'><font color='red'>}</font>
<a name='L4835'>
<a name='L4836'><b>int</b>
<a name='L4837'><a href='../R/5445.html' title='Multiple refered from 2 places.'>_PyLong_Init</a>(<b>void</b>)
<a name='L4838'><font color='red'>{</font>
<a name='L4839'><font color='darkred'>#if</font> <a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a> + <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a> &gt; 0
<a name='L4840'>    <b>int</b> ival, size;
<a name='L4841'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v = small_ints;
<a name='L4842'>
<a name='L4843'>    <b>for</b> (ival = -<a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a>; ival &lt;  <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a>; ival++, v++) <font color='red'>{</font>
<a name='L4844'>        size = (ival &lt; 0) ? -1 : ((ival == 0) ? 0 : 1);
<a name='L4845'>        <b>if</b> (<a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(v) == &amp;PyLong_Type) <font color='red'>{</font>
<a name='L4846'>            <i><font color='green'>/* The element is already initialized, most likely</font></i>
<a name='L4847'><i><font color='green'>             * the Python interpreter was initialized before.</font></i>
<a name='L4848'><i><font color='green'>             */</font></i>
<a name='L4849'>            <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> refcnt;
<a name='L4850'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* op = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)v;
<a name='L4851'>
<a name='L4852'>            refcnt = <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(op) &lt; 0 ? 0 : <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(op);
<a name='L4853'>            <a href='../S/2803.html#L1650' title='Defined at 1650 in Objects/object.c.'>_Py_NewReference</a>(op);
<a name='L4854'>            <i><font color='green'>/* _Py_NewReference sets the ref count to 1 but</font></i>
<a name='L4855'><i><font color='green'>             * the ref count might be larger. Set the refcnt</font></i>
<a name='L4856'><i><font color='green'>             * to the original refcnt + 1 */</font></i>
<a name='L4857'>            <a href='../D/4223.html' title='Multiple defined in 2 places.'>Py_REFCNT</a>(op) = refcnt + 1;
<a name='L4858'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(op) == size);
<a name='L4859'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(v-&gt;ob_digit[0] == abs(ival));
<a name='L4860'>        <font color='red'>}</font>
<a name='L4861'>        <b>else</b> <font color='red'>{</font>
<a name='L4862'>            PyObject_INIT(v, &amp;PyLong_Type);
<a name='L4863'>        <font color='red'>}</font>
<a name='L4864'>        <a href='../S/544.html#L118' title='Defined at 118 in Include/object.h.'>Py_SIZE</a>(v) = size;
<a name='L4865'>        v-&gt;ob_digit[0] = abs(ival);
<a name='L4866'>    <font color='red'>}</font>
<a name='L4867'><font color='darkred'>#endif</font>
<a name='L4868'>    <i><font color='green'>/* initialize int_info */</font></i>
<a name='L4869'>    <b>if</b> (Int_InfoType.tp_name == 0)
<a name='L4870'>        <a href='../S/2822.html#L318' title='Defined at 318 in Objects/structseq.c.'>PyStructSequence_InitType</a>(&amp;Int_InfoType, &amp;int_info_desc);
<a name='L4871'>
<a name='L4872'>    <b>return</b> 1;
<a name='L4873'><font color='red'>}</font>
<a name='L4874'>
<a name='L4875'><b>void</b>
<a name='L4876'><a href='../R/3124.html' title='Multiple refered from 2 places.'>PyLong_Fini</a>(<b>void</b>)
<a name='L4877'><font color='red'>{</font>
<a name='L4878'>    <i><font color='green'>/* Integers are currently statically allocated. Py_DECREF is not</font></i>
<a name='L4879'><i><font color='green'>       needed, but Python must forget about the reference or multiple</font></i>
<a name='L4880'><i><font color='green'>       reinitializations will fail. */</font></i>
<a name='L4881'><font color='darkred'>#if</font> <a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a> + <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a> &gt; 0
<a name='L4882'>    <b>int</b> i;
<a name='L4883'>    <a href='../S/536.html#L10' title='Defined at 10 in Include/longobject.h.'>PyLongObject</a> *v = small_ints;
<a name='L4884'>    <b>for</b> (i = 0; i &lt; <a href='../S/2799.html#L16' title='Defined at 16 in Objects/longobject.c.'>NSMALLNEGINTS</a> + <a href='../S/2799.html#L13' title='Defined at 13 in Objects/longobject.c.'>NSMALLPOSINTS</a>; i++, v++) <font color='red'>{</font>
<a name='L4885'>        <a href='../S/544.html#L661' title='Defined at 661 in Include/object.h.'>_Py_DEC_REFTOTAL</a>;
<a name='L4886'>        <a href='../D/6292.html' title='Multiple defined in 2 places.'>_Py_ForgetReference</a>((<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)v);
<a name='L4887'>    <font color='red'>}</font>
<a name='L4888'><font color='darkred'>#endif</font>
<a name='L4889'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L37'>[^]</a><a href='#L4876'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
