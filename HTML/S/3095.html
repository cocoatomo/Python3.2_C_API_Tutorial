<html>
<head>
<title>Python/dtoa.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3402.html'>Python</a>/dtoa.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L337'>[^]</a><a href='#L2314'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L337' title='Defined at 337.'>Balloc</a>
<li><a href='#L368' title='Defined at 368.'>Bfree</a>
<li><a href='#L390' title='Defined at 390.'>Balloc</a>
<li><a href='#L413' title='Defined at 413.'>Bfree</a>
<li><a href='#L430' title='Defined at 430.'>multadd</a>
<li><a href='#L484' title='Defined at 484.'>s2b</a>
<li><a href='#L519' title='Defined at 519.'>hi0bits</a>
<li><a href='#L551' title='Defined at 551.'>lo0bits</a>
<li><a href='#L596' title='Defined at 596.'>i2b</a>
<li><a href='#L612' title='Defined at 612.'>mult</a>
<li><a href='#L719' title='Defined at 719.'>pow5mult</a>
<li><a href='#L775' title='Defined at 775.'>pow5mult</a>
<li><a href='#L826' title='Defined at 826.'>lshift</a>
<li><a href='#L873' title='Defined at 873.'>cmp</a>
<li><a href='#L906' title='Defined at 906.'>diff</a>
<li><a href='#L986' title='Defined at 986.'>ulp</a>
<li><a href='#L1000' title='Defined at 1000.'>b2d</a>
<li><a href='#L1056' title='Defined at 1056.'>sd2b</a>
<li><a href='#L1114' title='Defined at 1114.'>d2b</a>
<li><a href='#L1162' title='Defined at 1162.'>ratio</a>
<li><a href='#L1203' title='Defined at 1203.'>dshift</a>
<li><a href='#L1216' title='Defined at 1216.'>quorem</a>
<li><a href='#L1317' title='Defined at 1317.'>sulp</a>
<li><a href='#L1380' title='Defined at 1380.'>bigcomp</a>
<li><a href='#L1490' title='Defined at 1490.'>_Py_dg_strtod</a>
<li><a href='#L2230' title='Defined at 2230.'>rv_alloc</a>
<li><a href='#L2247' title='Defined at 2247.'>nrv_alloc</a>
<li><a href='#L2268' title='Defined at 2268.'>_Py_dg_freedtoa</a>
<li><a href='#L2314' title='Defined at 2314.'>_Py_dg_dtoa</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/****************************************************************</font></i>
<a name='L2'><i><font color='green'> *</font></i>
<a name='L3'><i><font color='green'> * The author of this software is David M. Gay.</font></i>
<a name='L4'><i><font color='green'> *</font></i>
<a name='L5'><i><font color='green'> * Copyright (c) 1991, 2000, 2001 by Lucent Technologies.</font></i>
<a name='L6'><i><font color='green'> *</font></i>
<a name='L7'><i><font color='green'> * Permission to use, copy, modify, and distribute this software for any</font></i>
<a name='L8'><i><font color='green'> * purpose without fee is hereby granted, provided that this entire notice</font></i>
<a name='L9'><i><font color='green'> * is included in all copies of any software which is or includes a copy</font></i>
<a name='L10'><i><font color='green'> * or modification of this software and in all copies of the supporting</font></i>
<a name='L11'><i><font color='green'> * documentation for such software.</font></i>
<a name='L12'><i><font color='green'> *</font></i>
<a name='L13'><i><font color='green'> * THIS SOFTWARE IS BEING PROVIDED "AS IS", WITHOUT ANY EXPRESS OR IMPLIED</font></i>
<a name='L14'><i><font color='green'> * WARRANTY.  IN PARTICULAR, NEITHER THE AUTHOR NOR LUCENT MAKES ANY</font></i>
<a name='L15'><i><font color='green'> * REPRESENTATION OR WARRANTY OF ANY KIND CONCERNING THE MERCHANTABILITY</font></i>
<a name='L16'><i><font color='green'> * OF THIS SOFTWARE OR ITS FITNESS FOR ANY PARTICULAR PURPOSE.</font></i>
<a name='L17'><i><font color='green'> *</font></i>
<a name='L18'><i><font color='green'> ***************************************************************/</font></i>
<a name='L19'>
<a name='L20'><i><font color='green'>/****************************************************************</font></i>
<a name='L21'><i><font color='green'> * This is dtoa.c by David M. Gay, downloaded from</font></i>
<a name='L22'><i><font color='green'> * http://www.netlib.org/fp/dtoa.c on April 15, 2009 and modified for</font></i>
<a name='L23'><i><font color='green'> * inclusion into the Python core by Mark E. T. Dickinson and Eric V. Smith.</font></i>
<a name='L24'><i><font color='green'> *</font></i>
<a name='L25'><i><font color='green'> * Please remember to check http://www.netlib.org/fp regularly (and especially</font></i>
<a name='L26'><i><font color='green'> * before any Python release) for bugfixes and updates.</font></i>
<a name='L27'><i><font color='green'> *</font></i>
<a name='L28'><i><font color='green'> * The major modifications from Gay's original code are as follows:</font></i>
<a name='L29'><i><font color='green'> *</font></i>
<a name='L30'><i><font color='green'> *  0. The original code has been specialized to Python's needs by removing</font></i>
<a name='L31'><i><font color='green'> *     many of the #ifdef'd sections.  In particular, code to support VAX and</font></i>
<a name='L32'><i><font color='green'> *     IBM floating-point formats, hex NaNs, hex floats, locale-aware</font></i>
<a name='L33'><i><font color='green'> *     treatment of the decimal point, and setting of the inexact flag have</font></i>
<a name='L34'><i><font color='green'> *     been removed.</font></i>
<a name='L35'><i><font color='green'> *</font></i>
<a name='L36'><i><font color='green'> *  1. We use PyMem_Malloc and PyMem_Free in place of malloc and free.</font></i>
<a name='L37'><i><font color='green'> *</font></i>
<a name='L38'><i><font color='green'> *  2. The public functions strtod, dtoa and freedtoa all now have</font></i>
<a name='L39'><i><font color='green'> *     a _Py_dg_ prefix.</font></i>
<a name='L40'><i><font color='green'> *</font></i>
<a name='L41'><i><font color='green'> *  3. Instead of assuming that PyMem_Malloc always succeeds, we thread</font></i>
<a name='L42'><i><font color='green'> *     PyMem_Malloc failures through the code.  The functions</font></i>
<a name='L43'><i><font color='green'> *</font></i>
<a name='L44'><i><font color='green'> *       Balloc, multadd, s2b, i2b, mult, pow5mult, lshift, diff, d2b</font></i>
<a name='L45'><i><font color='green'> *</font></i>
<a name='L46'><i><font color='green'> *     of return type *Bigint all return NULL to indicate a malloc failure.</font></i>
<a name='L47'><i><font color='green'> *     Similarly, rv_alloc and nrv_alloc (return type char *) return NULL on</font></i>
<a name='L48'><i><font color='green'> *     failure.  bigcomp now has return type int (it used to be void) and</font></i>
<a name='L49'><i><font color='green'> *     returns -1 on failure and 0 otherwise.  _Py_dg_dtoa returns NULL</font></i>
<a name='L50'><i><font color='green'> *     on failure.  _Py_dg_strtod indicates failure due to malloc failure</font></i>
<a name='L51'><i><font color='green'> *     by returning -1.0, setting errno=ENOMEM and *se to s00.</font></i>
<a name='L52'><i><font color='green'> *</font></i>
<a name='L53'><i><font color='green'> *  4. The static variable dtoa_result has been removed.  Callers of</font></i>
<a name='L54'><i><font color='green'> *     _Py_dg_dtoa are expected to call _Py_dg_freedtoa to free</font></i>
<a name='L55'><i><font color='green'> *     the memory allocated by _Py_dg_dtoa.</font></i>
<a name='L56'><i><font color='green'> *</font></i>
<a name='L57'><i><font color='green'> *  5. The code has been reformatted to better fit with Python's</font></i>
<a name='L58'><i><font color='green'> *     C style guide (PEP 7).</font></i>
<a name='L59'><i><font color='green'> *</font></i>
<a name='L60'><i><font color='green'> *  6. A bug in the memory allocation has been fixed: to avoid FREEing memory</font></i>
<a name='L61'><i><font color='green'> *     that hasn't been MALLOC'ed, private_mem should only be used when k &lt;=</font></i>
<a name='L62'><i><font color='green'> *     Kmax.</font></i>
<a name='L63'><i><font color='green'> *</font></i>
<a name='L64'><i><font color='green'> *  7. _Py_dg_strtod has been modified so that it doesn't accept strings with</font></i>
<a name='L65'><i><font color='green'> *     leading whitespace.</font></i>
<a name='L66'><i><font color='green'> *</font></i>
<a name='L67'><i><font color='green'> ***************************************************************/</font></i>
<a name='L68'>
<a name='L69'><i><font color='green'>/* Please send bug reports for the original dtoa.c code to David M. Gay (dmg</font></i>
<a name='L70'><i><font color='green'> * at acm dot org, with " at " changed at "@" and " dot " changed to ".").</font></i>
<a name='L71'><i><font color='green'> * Please report bugs for this modified version using the Python issue tracker</font></i>
<a name='L72'><i><font color='green'> * (http://bugs.python.org). */</font></i>
<a name='L73'>
<a name='L74'><i><font color='green'>/* On a machine with IEEE extended-precision registers, it is</font></i>
<a name='L75'><i><font color='green'> * necessary to specify double-precision (53-bit) rounding precision</font></i>
<a name='L76'><i><font color='green'> * before invoking strtod or dtoa.  If the machine uses (the equivalent</font></i>
<a name='L77'><i><font color='green'> * of) Intel 80x87 arithmetic, the call</font></i>
<a name='L78'><i><font color='green'> *      _control87(PC_53, MCW_PC);</font></i>
<a name='L79'><i><font color='green'> * does this with many compilers.  Whether this or another call is</font></i>
<a name='L80'><i><font color='green'> * appropriate depends on the compiler; for this to work, it may be</font></i>
<a name='L81'><i><font color='green'> * necessary to #include "float.h" or another system-dependent header</font></i>
<a name='L82'><i><font color='green'> * file.</font></i>
<a name='L83'><i><font color='green'> */</font></i>
<a name='L84'>
<a name='L85'><i><font color='green'>/* strtod for IEEE-, VAX-, and IBM-arithmetic machines.</font></i>
<a name='L86'><i><font color='green'> *</font></i>
<a name='L87'><i><font color='green'> * This strtod returns a nearest machine number to the input decimal</font></i>
<a name='L88'><i><font color='green'> * string (or sets errno to ERANGE).  With IEEE arithmetic, ties are</font></i>
<a name='L89'><i><font color='green'> * broken by the IEEE round-even rule.  Otherwise ties are broken by</font></i>
<a name='L90'><i><font color='green'> * biased rounding (add half and chop).</font></i>
<a name='L91'><i><font color='green'> *</font></i>
<a name='L92'><i><font color='green'> * Inspired loosely by William D. Clinger's paper "How to Read Floating</font></i>
<a name='L93'><i><font color='green'> * Point Numbers Accurately" [Proc. ACM SIGPLAN '90, pp. 92-101].</font></i>
<a name='L94'><i><font color='green'> *</font></i>
<a name='L95'><i><font color='green'> * Modifications:</font></i>
<a name='L96'><i><font color='green'> *</font></i>
<a name='L97'><i><font color='green'> *      1. We only require IEEE, IBM, or VAX double-precision</font></i>
<a name='L98'><i><font color='green'> *              arithmetic (not IEEE double-extended).</font></i>
<a name='L99'><i><font color='green'> *      2. We get by with floating-point arithmetic in a case that</font></i>
<a name='L100'><i><font color='green'> *              Clinger missed -- when we're computing d * 10^n</font></i>
<a name='L101'><i><font color='green'> *              for a small integer d and the integer n is not too</font></i>
<a name='L102'><i><font color='green'> *              much larger than 22 (the maximum integer k for which</font></i>
<a name='L103'><i><font color='green'> *              we can represent 10^k exactly), we may be able to</font></i>
<a name='L104'><i><font color='green'> *              compute (d*10^k) * 10^(e-k) with just one roundoff.</font></i>
<a name='L105'><i><font color='green'> *      3. Rather than a bit-at-a-time adjustment of the binary</font></i>
<a name='L106'><i><font color='green'> *              result in the hard case, we use floating-point</font></i>
<a name='L107'><i><font color='green'> *              arithmetic to determine the adjustment to within</font></i>
<a name='L108'><i><font color='green'> *              one bit; only in really hard cases do we need to</font></i>
<a name='L109'><i><font color='green'> *              compute a second residual.</font></i>
<a name='L110'><i><font color='green'> *      4. Because of 3., we don't need a large table of powers of 10</font></i>
<a name='L111'><i><font color='green'> *              for ten-to-e (just some small tables, e.g. of 10^k</font></i>
<a name='L112'><i><font color='green'> *              for 0 &lt;= k &lt;= 22).</font></i>
<a name='L113'><i><font color='green'> */</font></i>
<a name='L114'>
<a name='L115'><i><font color='green'>/* Linking of Python's #defines to Gay's #defines starts here. */</font></i>
<a name='L116'>
<a name='L117'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L118'>
<a name='L119'><i><font color='green'>/* if PY_NO_SHORT_FLOAT_REPR is defined, then don't even try to compile</font></i>
<a name='L120'><i><font color='green'>   the following code */</font></i>
<a name='L121'><font color='darkred'>#ifndef</font> <a href='../D/2612.html' title='Multiple defined in 2 places.'>PY_NO_SHORT_FLOAT_REPR</a>
<a name='L122'>
<a name='L123'><font color='darkred'>#include</font> "float.h"
<a name='L124'>
<a name='L125'><font color='darkred'>#define</font> <a href='../R/1813.html' title='Multiple refered from 20 places.'>MALLOC</a> <a href='../S/2803.html#L1769' title='Defined at 1769 in Objects/object.c.'>PyMem_Malloc</a>
<a name='L126'><font color='darkred'>#define</font> <a href='../R/1159.html' title='Multiple refered from 35 places.'>FREE</a> <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>
<a name='L127'>
<a name='L128'><i><font color='green'>/* This code should also work for ARM mixed-endian format on little-endian</font></i>
<a name='L129'><i><font color='green'>   machines, where doubles have byte order 45670123 (in increasing address</font></i>
<a name='L130'><i><font color='green'>   order, 0 being the least significant byte). */</font></i>
<a name='L131'><font color='darkred'>#ifdef</font> <a href='../D/822.html' title='Multiple defined in 3 places.'>DOUBLE_IS_LITTLE_ENDIAN_IEEE754</a>
<a name='L132'><font color='darkred'>#  define</font> <a href='../R/1489.html' title='Multiple refered from 3 places.'>IEEE_8087</a>
<a name='L133'><font color='darkred'>#endif</font>
<a name='L134'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/821.html' title='Multiple defined in 2 places.'>DOUBLE_IS_BIG_ENDIAN_IEEE754</a>) ||  \
<a name='L135'>  <b>defined</b>(<a href='../S/562.html#L22' title='Defined at 22 in Include/pymacconfig.h.'>DOUBLE_IS_ARM_MIXED_ENDIAN_IEEE754</a>)
<a name='L136'><font color='darkred'>#  define</font> <a href='../S/3095.html#L138' title='Refered from 138 in Python/dtoa.c.'>IEEE_MC68k</a>
<a name='L137'><font color='darkred'>#endif</font>
<a name='L138'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/3095.html#L132' title='Defined at 132 in Python/dtoa.c.'>IEEE_8087</a>) + <b>defined</b>(<a href='../S/3095.html#L136' title='Defined at 136 in Python/dtoa.c.'>IEEE_MC68k</a>) != 1
<a name='L139'><font color='darkred'>#error</font> "Exactly one of IEEE_8087 or IEEE_MC68k should be defined."
<a name='L140'><font color='darkred'>#endif</font>
<a name='L141'>
<a name='L142'><i><font color='green'>/* The code below assumes that the endianness of integers matches the</font></i>
<a name='L143'><i><font color='green'>   endianness of the two 32-bit words of a double.  Check this. */</font></i>
<a name='L144'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/5540.html' title='Multiple defined in 8 places.'>WORDS_BIGENDIAN</a>) &amp;&amp; (<b>defined</b>(<a href='../D/822.html' title='Multiple defined in 3 places.'>DOUBLE_IS_LITTLE_ENDIAN_IEEE754</a>) || \
<a name='L145'>                                 <b>defined</b>(<a href='../S/562.html#L22' title='Defined at 22 in Include/pymacconfig.h.'>DOUBLE_IS_ARM_MIXED_ENDIAN_IEEE754</a>))
<a name='L146'><font color='darkred'>#error</font> "doubles and ints have incompatible endianness"
<a name='L147'><font color='darkred'>#endif</font>
<a name='L148'>
<a name='L149'><font color='darkred'>#if</font> !<b>defined</b>(<a href='../D/5540.html' title='Multiple defined in 8 places.'>WORDS_BIGENDIAN</a>) &amp;&amp; <b>defined</b>(<a href='../D/821.html' title='Multiple defined in 2 places.'>DOUBLE_IS_BIG_ENDIAN_IEEE754</a>)
<a name='L150'><font color='darkred'>#error</font> "doubles and ints have incompatible endianness"
<a name='L151'><font color='darkred'>#endif</font>
<a name='L152'>
<a name='L153'>
<a name='L154'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/1596.html' title='Multiple defined in 3 places.'>HAVE_UINT32_T</a>) &amp;&amp; <b>defined</b>(<a href='../D/1516.html' title='Multiple defined in 3 places.'>HAVE_INT32_T</a>)
<a name='L155'><b>typedef</b> <a href='../D/2648.html' title='Multiple defined in 3 places.'>PY_UINT32_T</a> <a href='../R/4718.html' title='Multiple refered from 39 places.'>ULong</a>;
<a name='L156'><b>typedef</b> <a href='../D/2600.html' title='Multiple defined in 3 places.'>PY_INT32_T</a> <a href='../R/1800.html' title='Multiple refered from 9 places.'>Long</a>;
<a name='L157'><font color='darkred'>#else</font>
<a name='L158'><font color='darkred'>#error</font> "Failed to find an exact-width 32-bit integer type"
<a name='L159'><font color='darkred'>#endif</font>
<a name='L160'>
<a name='L161'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/1597.html' title='Multiple defined in 2 places.'>HAVE_UINT64_T</a>)
<a name='L162'><font color='darkred'>#define</font> <a href='../R/4717.html' title='Multiple refered from 17 places.'>ULLong</a> <a href='../D/2649.html' title='Multiple defined in 2 places.'>PY_UINT64_T</a>
<a name='L163'><font color='darkred'>#else</font>
<a name='L164'><font color='darkred'>#undef</font> <a href='../R/4717.html' title='Multiple refered from 17 places.'>ULLong</a>
<a name='L165'><font color='darkred'>#endif</font>
<a name='L166'>
<a name='L167'><font color='darkred'>#undef</font> <a href='../R/682.html' title='Multiple refered from 35 places.'>DEBUG</a>
<a name='L168'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L366' title='Defined at 366 in PC/pyconfig.h.'>Py_DEBUG</a>
<a name='L169'><font color='darkred'>#define</font> <a href='../R/682.html' title='Multiple refered from 35 places.'>DEBUG</a>
<a name='L170'><font color='darkred'>#endif</font>
<a name='L171'>
<a name='L172'><i><font color='green'>/* End Python #define linking */</font></i>
<a name='L173'>
<a name='L174'><font color='darkred'>#ifdef</font> <a href='../D/728.html' title='Multiple defined in 2 places.'>DEBUG</a>
<a name='L175'><font color='darkred'>#define</font> <a href='../R/429.html' title='Multiple refered from 5 places.'>Bug</a>(x) <font color='red'>{</font>fprintf(stderr, "%s\n", x); exit(1);<font color='red'>}</font>
<a name='L176'><font color='darkred'>#endif</font>
<a name='L177'>
<a name='L178'><font color='darkred'>#ifndef</font> <a href='../S/3095.html#L179' title='Defined at 179 in Python/dtoa.c.'>PRIVATE_MEM</a>
<a name='L179'><font color='darkred'>#define</font> <a href='../R/2297.html' title='Multiple refered from 2 places.'>PRIVATE_MEM</a> 2304
<a name='L180'><font color='darkred'>#endif</font>
<a name='L181'><font color='darkred'>#define</font> <a href='../R/2298.html' title='Multiple refered from 2 places.'>PRIVATE_mem</a> ((<a href='../S/3095.html#L179' title='Defined at 179 in Python/dtoa.c.'>PRIVATE_MEM</a>+<b>sizeof</b>(<b>double</b>)-1)/<b>sizeof</b>(<b>double</b>))
<a name='L182'><b>static</b> <b>double</b> private_mem[<a href='../S/3095.html#L181' title='Defined at 181 in Python/dtoa.c.'>PRIVATE_mem</a>], *pmem_next = private_mem;
<a name='L183'>
<a name='L184'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L185'><b>extern</b> "C" <font color='red'>{</font>
<a name='L186'><font color='darkred'>#endif</font>
<a name='L187'>
<a name='L188'><b>typedef</b> <b>union</b> <font color='red'>{</font> <b>double</b> d; <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>[2]; <font color='red'>}</font> <a href='../R/4707.html' title='Multiple refered from 1007 places.'>U</a>;
<a name='L189'>
<a name='L190'><font color='darkred'>#ifdef</font> <a href='../S/3095.html#L132' title='Defined at 132 in Python/dtoa.c.'>IEEE_8087</a>
<a name='L191'><font color='darkred'>#define</font> <a href='../R/11433.html' title='Multiple refered from 58 places.'>word0</a>(x) (x)-&gt;<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>[1]
<a name='L192'><font color='darkred'>#define</font> <a href='../R/11434.html' title='Multiple refered from 30 places.'>word1</a>(x) (x)-&gt;<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>[0]
<a name='L193'><font color='darkred'>#else</font>
<a name='L194'><font color='darkred'>#define</font> <a href='../R/11433.html' title='Multiple refered from 58 places.'>word0</a>(x) (x)-&gt;<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>[0]
<a name='L195'><font color='darkred'>#define</font> <a href='../R/11434.html' title='Multiple refered from 30 places.'>word1</a>(x) (x)-&gt;<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>[1]
<a name='L196'><font color='darkred'>#endif</font>
<a name='L197'><font color='darkred'>#define</font> <a href='../R/7496.html' title='Multiple refered from 77 places.'>dval</a>(x) (x)-&gt;d
<a name='L198'>
<a name='L199'><font color='darkred'>#ifndef</font> <a href='../S/3095.html#L200' title='Defined at 200 in Python/dtoa.c.'>STRTOD_DIGLIM</a>
<a name='L200'><font color='darkred'>#define</font> <a href='../R/4421.html' title='Multiple refered from 2 places.'>STRTOD_DIGLIM</a> 40
<a name='L201'><font color='darkred'>#endif</font>
<a name='L202'>
<a name='L203'><i><font color='green'>/* maximum permitted exponent value for strtod; exponents larger than</font></i>
<a name='L204'><i><font color='green'>   MAX_ABS_EXP in absolute value get truncated to +-MAX_ABS_EXP.  MAX_ABS_EXP</font></i>
<a name='L205'><i><font color='green'>   should fit into an int. */</font></i>
<a name='L206'><font color='darkred'>#ifndef</font> <a href='../S/3095.html#L207' title='Defined at 207 in Python/dtoa.c.'>MAX_ABS_EXP</a>
<a name='L207'><font color='darkred'>#define</font> <a href='../R/1850.html' title='Multiple refered from 3 places.'>MAX_ABS_EXP</a> 19999U
<a name='L208'><font color='darkred'>#endif</font>
<a name='L209'>
<a name='L210'><i><font color='green'>/* The following definition of Storeinc is appropriate for MIPS processors.</font></i>
<a name='L211'><i><font color='green'> * An alternative that might be better on some machines is</font></i>
<a name='L212'><i><font color='green'> * #define Storeinc(a,b,c) (*a++ = b &lt;&lt; 16 | c &amp; 0xffff)</font></i>
<a name='L213'><i><font color='green'> */</font></i>
<a name='L214'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/3095.html#L132' title='Defined at 132 in Python/dtoa.c.'>IEEE_8087</a>)
<a name='L215'><font color='darkred'>#define</font> <a href='../R/4502.html' title='Multiple refered from 6 places.'>Storeinc</a>(a,<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>,c) (((<b>unsigned</b> <b>short</b> *)a)[1] = (<b>unsigned</b> <b>short</b>)b,  \
<a name='L216'>                         ((<b>unsigned</b> <b>short</b> *)a)[0] = (<b>unsigned</b> <b>short</b>)c, a++)
<a name='L217'><font color='darkred'>#else</font>
<a name='L218'><font color='darkred'>#define</font> <a href='../R/4502.html' title='Multiple refered from 6 places.'>Storeinc</a>(a,<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>,c) (((<b>unsigned</b> <b>short</b> *)a)[0] = (<b>unsigned</b> <b>short</b>)b,  \
<a name='L219'>                         ((<b>unsigned</b> <b>short</b> *)a)[1] = (<b>unsigned</b> <b>short</b>)c, a++)
<a name='L220'><font color='darkred'>#endif</font>
<a name='L221'>
<a name='L222'><i><font color='green'>/* #define P DBL_MANT_DIG */</font></i>
<a name='L223'><i><font color='green'>/* Ten_pmax = floor(P*log(2)/log(5)) */</font></i>
<a name='L224'><i><font color='green'>/* Bletch = (highest power of 2 &lt; DBL_MAX_10_EXP) / 16 */</font></i>
<a name='L225'><i><font color='green'>/* Quick_max = floor((P-1)*log(FLT_RADIX)/log(10) - 1) */</font></i>
<a name='L226'><i><font color='green'>/* Int_max = floor(P*log(FLT_RADIX)/log(10) - 1) */</font></i>
<a name='L227'>
<a name='L228'><font color='darkred'>#define</font> <a href='../R/975.html' title='Multiple refered from 6 places.'>Exp_shift</a>  20
<a name='L229'><font color='darkred'>#define</font> <a href='../S/3095.html#L2395' title='Refered from 2395 in Python/dtoa.c.'>Exp_shift1</a> 20
<a name='L230'><font color='darkred'>#define</font> <a href='../R/974.html' title='Multiple refered from 28 places.'>Exp_msk1</a>    0x100000
<a name='L231'><font color='darkred'>#define</font> Exp_msk11   0x100000
<a name='L232'><font color='darkred'>#define</font> <a href='../R/973.html' title='Multiple refered from 18 places.'>Exp_mask</a>  0x7ff00000
<a name='L233'><font color='darkred'>#define</font> <a href='../R/2216.html' title='Multiple refered from 77 places.'>P</a> 53
<a name='L234'><font color='darkred'>#define</font> Nbits 53
<a name='L235'><font color='darkred'>#define</font> <a href='../R/411.html' title='Multiple refered from 11 places.'>Bias</a> 1023
<a name='L236'><font color='darkred'>#define</font> Emax 1023
<a name='L237'><font color='darkred'>#define</font> Emin (-1022)
<a name='L238'><font color='darkred'>#define</font> <a href='../R/967.html' title='Multiple refered from 6 places.'>Etiny</a> (-1074)  <i><font color='green'>/* smallest denormal is 2**Etiny */</font></i>
<a name='L239'><font color='darkred'>#define</font> <a href='../R/971.html' title='Multiple refered from 4 places.'>Exp_1</a>  0x3ff00000
<a name='L240'><font color='darkred'>#define</font> <a href='../S/3095.html#L2398' title='Refered from 2398 in Python/dtoa.c.'>Exp_11</a> 0x3ff00000
<a name='L241'><font color='darkred'>#define</font> <a href='../R/953.html' title='Multiple refered from 4 places.'>Ebits</a> 11
<a name='L242'><font color='darkred'>#define</font> <a href='../R/1214.html' title='Multiple refered from 2 places.'>Frac_mask</a>  0xfffff
<a name='L243'><font color='darkred'>#define</font> <a href='../R/1215.html' title='Multiple refered from 2 places.'>Frac_mask1</a> 0xfffff
<a name='L244'><font color='darkred'>#define</font> <a href='../R/4634.html' title='Multiple refered from 4 places.'>Ten_pmax</a> 22
<a name='L245'><font color='darkred'>#define</font> <a href='../R/421.html' title='Multiple refered from 2 places.'>Bletch</a> 0x10
<a name='L246'><font color='darkred'>#define</font> <a href='../R/422.html' title='Multiple refered from 6 places.'>Bndry_mask</a>  0xfffff
<a name='L247'><font color='darkred'>#define</font> <a href='../R/423.html' title='Multiple refered from 2 places.'>Bndry_mask1</a> 0xfffff
<a name='L248'><font color='darkred'>#define</font> <a href='../R/4480.html' title='Multiple refered from 2 places.'>Sign_bit</a> 0x80000000
<a name='L249'><font color='darkred'>#define</font> <a href='../R/1799.html' title='Multiple refered from 4 places.'>Log2P</a> 1
<a name='L250'><font color='darkred'>#define</font> Tiny0 0
<a name='L251'><font color='darkred'>#define</font> <a href='../S/3095.html#L2102' title='Refered from 2102 in Python/dtoa.c.'>Tiny1</a> 1
<a name='L252'><font color='darkred'>#define</font> <a href='../S/3095.html#L2508' title='Refered from 2508 in Python/dtoa.c.'>Quick_max</a> 14
<a name='L253'><font color='darkred'>#define</font> <a href='../S/3095.html#L2608' title='Refered from 2608 in Python/dtoa.c.'>Int_max</a> 14
<a name='L254'>
<a name='L255'><font color='darkred'>#ifndef</font> <a href='../D/1352.html' title='Multiple defined in 2 places.'>Flt_Rounds</a>
<a name='L256'><font color='darkred'>#ifdef</font> FLT_ROUNDS
<a name='L257'><font color='darkred'>#define</font> <a href='../R/1210.html' title='Multiple refered from 4 places.'>Flt_Rounds</a> FLT_ROUNDS
<a name='L258'><font color='darkred'>#else</font>
<a name='L259'><font color='darkred'>#define</font> <a href='../R/1210.html' title='Multiple refered from 4 places.'>Flt_Rounds</a> 1
<a name='L260'><font color='darkred'>#endif</font>
<a name='L261'><font color='darkred'>#endif</font> <i><font color='green'>/*Flt_Rounds*/</font></i>
<a name='L262'>
<a name='L263'><font color='darkred'>#define</font> Rounding <a href='../D/1352.html' title='Multiple defined in 2 places.'>Flt_Rounds</a>
<a name='L264'>
<a name='L265'><font color='darkred'>#define</font> <a href='../R/412.html' title='Multiple refered from 3 places.'>Big0</a> (<a href='../S/3095.html#L243' title='Defined at 243 in Python/dtoa.c.'>Frac_mask1</a> | <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>*(DBL_MAX_EXP+<a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a>-1))
<a name='L266'><font color='darkred'>#define</font> <a href='../R/413.html' title='Multiple refered from 3 places.'>Big1</a> 0xffffffff
<a name='L267'>
<a name='L268'><i><font color='green'>/* struct BCinfo is used to pass information from _Py_dg_strtod to bigcomp */</font></i>
<a name='L269'>
<a name='L270'><b>typedef</b> <b>struct</b> <a href='../S/3095.html#L270' title='Defined at 270 in Python/dtoa.c.'>BCinfo</a> <a href='../R/222.html' title='Multiple refered from 3 places.'>BCinfo</a>;
<a name='L271'><b>struct</b>
<a name='L272'><a href='../S/3095.html#L270' title='Defined at 270 in Python/dtoa.c.'>BCinfo</a> <font color='red'>{</font>
<a name='L273'>    <b>int</b> e0, nd, nd0, scale;
<a name='L274'><font color='red'>}</font>;
<a name='L275'>
<a name='L276'><font color='darkred'>#define</font> <a href='../R/1006.html' title='Multiple refered from 8 places.'>FFFFFFFF</a> 0xffffffffUL
<a name='L277'>
<a name='L278'><font color='darkred'>#define</font> <a href='../R/1682.html' title='Multiple refered from 4 places.'>Kmax</a> 7
<a name='L279'>
<a name='L280'><i><font color='green'>/* struct Bigint is used to represent arbitrary-precision integers.  These</font></i>
<a name='L281'><i><font color='green'>   integers are stored in sign-magnitude format, with the magnitude stored as</font></i>
<a name='L282'><i><font color='green'>   an array of base 2**32 digits.  Bigints are always normalized: if x is a</font></i>
<a name='L283'><i><font color='green'>   Bigint then x-&gt;wds &gt;= 1, and either x-&gt;wds == 1 or x[wds-1] is nonzero.</font></i>
<a name='L284'><i><font color='green'></font></i>
<a name='L285'><i><font color='green'>   The Bigint fields are as follows:</font></i>
<a name='L286'><i><font color='green'></font></i>
<a name='L287'><i><font color='green'>     - next is a header used by Balloc and Bfree to keep track of lists</font></i>
<a name='L288'><i><font color='green'>         of freed Bigints;  it's also used for the linked list of</font></i>
<a name='L289'><i><font color='green'>         powers of 5 of the form 5**2**i used by pow5mult.</font></i>
<a name='L290'><i><font color='green'>     - k indicates which pool this Bigint was allocated from</font></i>
<a name='L291'><i><font color='green'>     - maxwds is the maximum number of words space was allocated for</font></i>
<a name='L292'><i><font color='green'>       (usually maxwds == 2**k)</font></i>
<a name='L293'><i><font color='green'>     - sign is 1 for negative Bigints, 0 for positive.  The sign is unused</font></i>
<a name='L294'><i><font color='green'>       (ignored on inputs, set to 0 on outputs) in almost all operations</font></i>
<a name='L295'><i><font color='green'>       involving Bigints: a notable exception is the diff function, which</font></i>
<a name='L296'><i><font color='green'>       ignores signs on inputs but sets the sign of the output correctly.</font></i>
<a name='L297'><i><font color='green'>     - wds is the actual number of significant words</font></i>
<a name='L298'><i><font color='green'>     - x contains the vector of words (digits) for this Bigint, from least</font></i>
<a name='L299'><i><font color='green'>       significant (x[0]) to most significant (x[wds-1]).</font></i>
<a name='L300'><i><font color='green'>*/</font></i>
<a name='L301'>
<a name='L302'><b>struct</b>
<a name='L303'><a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> <font color='red'>{</font>
<a name='L304'>    <b>struct</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *next;
<a name='L305'>    <b>int</b> k, maxwds, sign, wds;
<a name='L306'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> x[1];
<a name='L307'><font color='red'>}</font>;
<a name='L308'>
<a name='L309'><b>typedef</b> <b>struct</b> <a href='../R/415.html' title='Multiple refered from 39 places.'>Bigint</a> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a>;
<a name='L310'>
<a name='L311'><font color='darkred'>#ifndef</font> Py_USING_MEMORY_DEBUGGER
<a name='L312'>
<a name='L313'><i><font color='green'>/* Memory management: memory is allocated from, and returned to, Kmax+1 pools</font></i>
<a name='L314'><i><font color='green'>   of memory, where pool k (0 &lt;= k &lt;= Kmax) is for Bigints b with b-&gt;maxwds ==</font></i>
<a name='L315'><i><font color='green'>   1 &lt;&lt; k.  These pools are maintained as linked lists, with freelist[k]</font></i>
<a name='L316'><i><font color='green'>   pointing to the head of the list for pool k.</font></i>
<a name='L317'><i><font color='green'></font></i>
<a name='L318'><i><font color='green'>   On allocation, if there's no free slot in the appropriate pool, MALLOC is</font></i>
<a name='L319'><i><font color='green'>   called to get more memory.  This memory is not returned to the system until</font></i>
<a name='L320'><i><font color='green'>   Python quits.  There's also a private memory pool that's allocated from</font></i>
<a name='L321'><i><font color='green'>   in preference to using MALLOC.</font></i>
<a name='L322'><i><font color='green'></font></i>
<a name='L323'><i><font color='green'>   For Bigints with more than (1 &lt;&lt; Kmax) digits (which implies at least 1233</font></i>
<a name='L324'><i><font color='green'>   decimal digits), memory is directly allocated using MALLOC, and freed using</font></i>
<a name='L325'><i><font color='green'>   FREE.</font></i>
<a name='L326'><i><font color='green'></font></i>
<a name='L327'><i><font color='green'>   XXX: it would be easy to bypass this memory-management system and</font></i>
<a name='L328'><i><font color='green'>   translate each call to Balloc into a call to PyMem_Malloc, and each</font></i>
<a name='L329'><i><font color='green'>   Bfree to PyMem_Free.  Investigate whether this has any significant</font></i>
<a name='L330'><i><font color='green'>   performance on impact. */</font></i>
<a name='L331'>
<a name='L332'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *freelist[<a href='../S/3095.html#L278' title='Defined at 278 in Python/dtoa.c.'>Kmax</a>+1];
<a name='L333'>
<a name='L334'><i><font color='green'>/* Allocate space for a Bigint with up to 1&lt;&lt;k digits */</font></i>
<a name='L335'>
<a name='L336'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L337'><a href='../R/388.html' title='Multiple refered from 13 places.'>Balloc</a>(<b>int</b> k)
<a name='L338'><font color='red'>{</font>
<a name='L339'>    <b>int</b> x;
<a name='L340'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *rv;
<a name='L341'>    <b>unsigned</b> <b>int</b> len;
<a name='L342'>
<a name='L343'>    <b>if</b> (k &lt;= <a href='../S/3095.html#L278' title='Defined at 278 in Python/dtoa.c.'>Kmax</a> &amp;&amp; (rv = freelist[k]))
<a name='L344'>        freelist[k] = rv-&gt;next;
<a name='L345'>    <b>else</b> <font color='red'>{</font>
<a name='L346'>        x = 1 &lt;&lt; k;
<a name='L347'>        len = (<b>sizeof</b>(<a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a>) + (x-1)*<b>sizeof</b>(<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>) + <b>sizeof</b>(<b>double</b>) - 1)
<a name='L348'>            /<b>sizeof</b>(<b>double</b>);
<a name='L349'>        <b>if</b> (k &lt;= <a href='../S/3095.html#L278' title='Defined at 278 in Python/dtoa.c.'>Kmax</a> &amp;&amp; pmem_next - private_mem + len &lt;= <a href='../S/3095.html#L181' title='Defined at 181 in Python/dtoa.c.'>PRIVATE_mem</a>) <font color='red'>{</font>
<a name='L350'>            rv = (<a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a>*)pmem_next;
<a name='L351'>            pmem_next += len;
<a name='L352'>        <font color='red'>}</font>
<a name='L353'>        <b>else</b> <font color='red'>{</font>
<a name='L354'>            rv = (<a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a>*)<a href='../D/2011.html' title='Multiple defined in 2 places.'>MALLOC</a>(len*<b>sizeof</b>(<b>double</b>));
<a name='L355'>            <b>if</b> (rv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L356'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L357'>        <font color='red'>}</font>
<a name='L358'>        rv-&gt;k = k;
<a name='L359'>        rv-&gt;maxwds = x;
<a name='L360'>    <font color='red'>}</font>
<a name='L361'>    rv-&gt;sign = rv-&gt;wds = 0;
<a name='L362'>    <b>return</b> rv;
<a name='L363'><font color='red'>}</font>
<a name='L364'>
<a name='L365'><i><font color='green'>/* Free a Bigint allocated with Balloc */</font></i>
<a name='L366'>
<a name='L367'><b>static</b> <b>void</b>
<a name='L368'><a href='../R/410.html' title='Multiple refered from 79 places.'>Bfree</a>(Bigint *v)
<a name='L369'><font color='red'>{</font>
<a name='L370'>    <b>if</b> (v) <font color='red'>{</font>
<a name='L371'>        <b>if</b> (v-&gt;k &gt; <a href='../S/3095.html#L278' title='Defined at 278 in Python/dtoa.c.'>Kmax</a>)
<a name='L372'>            <a href='../D/1301.html' title='Multiple defined in 2 places.'>FREE</a>((<b>void</b>*)v);
<a name='L373'>        <b>else</b> <font color='red'>{</font>
<a name='L374'>            v-&gt;next = freelist[v-&gt;k];
<a name='L375'>            freelist[v-&gt;k] = v;
<a name='L376'>        <font color='red'>}</font>
<a name='L377'>    <font color='red'>}</font>
<a name='L378'><font color='red'>}</font>
<a name='L379'>
<a name='L380'><font color='darkred'>#else</font>
<a name='L381'>
<a name='L382'><i><font color='green'>/* Alternative versions of Balloc and Bfree that use PyMem_Malloc and</font></i>
<a name='L383'><i><font color='green'>   PyMem_Free directly in place of the custom memory allocation scheme above.</font></i>
<a name='L384'><i><font color='green'>   These are provided for the benefit of memory debugging tools like</font></i>
<a name='L385'><i><font color='green'>   Valgrind. */</font></i>
<a name='L386'>
<a name='L387'><i><font color='green'>/* Allocate space for a Bigint with up to 1&lt;&lt;k digits */</font></i>
<a name='L388'>
<a name='L389'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L390'><a href='../R/388.html' title='Multiple refered from 13 places.'>Balloc</a>(<b>int</b> k)
<a name='L391'><font color='red'>{</font>
<a name='L392'>    <b>int</b> x;
<a name='L393'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *rv;
<a name='L394'>    <b>unsigned</b> <b>int</b> len;
<a name='L395'>
<a name='L396'>    x = 1 &lt;&lt; k;
<a name='L397'>    len = (<b>sizeof</b>(<a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a>) + (x-1)*<b>sizeof</b>(<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>) + <b>sizeof</b>(<b>double</b>) - 1)
<a name='L398'>        /<b>sizeof</b>(<b>double</b>);
<a name='L399'>
<a name='L400'>    rv = (<a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a>*)<a href='../D/2011.html' title='Multiple defined in 2 places.'>MALLOC</a>(len*<b>sizeof</b>(<b>double</b>));
<a name='L401'>    <b>if</b> (rv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L402'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L403'>
<a name='L404'>    rv-&gt;k = k;
<a name='L405'>    rv-&gt;maxwds = x;
<a name='L406'>    rv-&gt;sign = rv-&gt;wds = 0;
<a name='L407'>    <b>return</b> rv;
<a name='L408'><font color='red'>}</font>
<a name='L409'>
<a name='L410'><i><font color='green'>/* Free a Bigint allocated with Balloc */</font></i>
<a name='L411'>
<a name='L412'><b>static</b> <b>void</b>
<a name='L413'><a href='../R/410.html' title='Multiple refered from 79 places.'>Bfree</a>(Bigint *v)
<a name='L414'><font color='red'>{</font>
<a name='L415'>    <b>if</b> (v) <font color='red'>{</font>
<a name='L416'>        <a href='../D/1301.html' title='Multiple defined in 2 places.'>FREE</a>((<b>void</b>*)v);
<a name='L417'>    <font color='red'>}</font>
<a name='L418'><font color='red'>}</font>
<a name='L419'>
<a name='L420'><font color='darkred'>#endif</font> <i><font color='green'>/* Py_USING_MEMORY_DEBUGGER */</font></i>
<a name='L421'>
<a name='L422'><font color='darkred'>#define</font> <a href='../R/409.html' title='Multiple refered from 3 places.'>Bcopy</a>(x,y) <a href='../D/9803.html' title='Multiple defined in 4 places.'>memcpy</a>((<b>char</b> *)&amp;x-&gt;sign, (<b>char</b> *)&amp;y-&gt;sign,   \
<a name='L423'>                          y-&gt;wds*<b>sizeof</b>(<a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a>) + 2*<b>sizeof</b>(<b>int</b>))
<a name='L424'>
<a name='L425'><i><font color='green'>/* Multiply a Bigint b by m and add a.  Either modifies b in place and returns</font></i>
<a name='L426'><i><font color='green'>   a pointer to the modified b, or Bfrees b and returns a pointer to a copy.</font></i>
<a name='L427'><i><font color='green'>   On failure, return NULL.  In this case, b will have been already freed. */</font></i>
<a name='L428'>
<a name='L429'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L430'><a href='../R/9152.html' title='Multiple refered from 13 places.'>multadd</a>(Bigint *b, <b>int</b> m, <b>int</b> a)       <i><font color='green'>/* multiply by m and add a */</font></i>
<a name='L431'><font color='red'>{</font>
<a name='L432'>    <b>int</b> i, wds;
<a name='L433'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L434'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> *x;
<a name='L435'>    <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a> carry, y;
<a name='L436'><font color='darkred'>#else</font>
<a name='L437'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> carry, *x, y;
<a name='L438'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> xi, z;
<a name='L439'><font color='darkred'>#endif</font>
<a name='L440'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *b1;
<a name='L441'>
<a name='L442'>    wds = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds;
<a name='L443'>    x = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L444'>    i = 0;
<a name='L445'>    carry = a;
<a name='L446'>    <b>do</b> <font color='red'>{</font>
<a name='L447'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L448'>        y = *x * (<a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>)m + carry;
<a name='L449'>        carry = y &gt;&gt; 32;
<a name='L450'>        *x++ = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)(y &amp; <a href='../S/3095.html#L276' title='Defined at 276 in Python/dtoa.c.'>FFFFFFFF</a>);
<a name='L451'><font color='darkred'>#else</font>
<a name='L452'>        xi = *x;
<a name='L453'>        y = (xi &amp; 0xffff) * m + carry;
<a name='L454'>        z = (xi &gt;&gt; 16) * m + (y &gt;&gt; 16);
<a name='L455'>        carry = z &gt;&gt; 16;
<a name='L456'>        *x++ = (z &lt;&lt; 16) + (y &amp; 0xffff);
<a name='L457'><font color='darkred'>#endif</font>
<a name='L458'>    <font color='red'>}</font>
<a name='L459'>    <b>while</b>(++i &lt; wds);
<a name='L460'>    <b>if</b> (carry) <font color='red'>{</font>
<a name='L461'>        <b>if</b> (wds &gt;= <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;maxwds) <font color='red'>{</font>
<a name='L462'>            b1 = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;k+1);
<a name='L463'>            <b>if</b> (b1 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)<font color='red'>{</font>
<a name='L464'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L465'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L466'>            <font color='red'>}</font>
<a name='L467'>            <a href='../S/3095.html#L422' title='Defined at 422 in Python/dtoa.c.'>Bcopy</a>(b1, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L468'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L469'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = b1;
<a name='L470'>        <font color='red'>}</font>
<a name='L471'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[wds++] = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)carry;
<a name='L472'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = wds;
<a name='L473'>    <font color='red'>}</font>
<a name='L474'>    <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L475'><font color='red'>}</font>
<a name='L476'>
<a name='L477'><i><font color='green'>/* convert a string s containing nd decimal digits (possibly containing a</font></i>
<a name='L478'><i><font color='green'>   decimal separator at position nd0, which is ignored) to a Bigint.  This</font></i>
<a name='L479'><i><font color='green'>   function carries on where the parsing code in _Py_dg_strtod leaves off: on</font></i>
<a name='L480'><i><font color='green'>   entry, y9 contains the result of converting the first 9 digits.  Returns</font></i>
<a name='L481'><i><font color='green'>   NULL on failure. */</font></i>
<a name='L482'>
<a name='L483'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L484'><a href='../S/3095.html#L1815' title='Refered from 1815 in Python/dtoa.c.'>s2b</a>(<b>const</b> <b>char</b> *s, <b>int</b> nd0, <b>int</b> nd, ULong y9)
<a name='L485'><font color='red'>{</font>
<a name='L486'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L487'>    <b>int</b> i, k;
<a name='L488'>    <a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a> x, y;
<a name='L489'>
<a name='L490'>    x = (nd + 8) / 9;
<a name='L491'>    <b>for</b>(k = 0, y = 1; x &gt; y; y &lt;&lt;= 1, k++) ;
<a name='L492'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(k);
<a name='L493'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L494'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L495'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] = y9;
<a name='L496'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = 1;
<a name='L497'>
<a name='L498'>    <b>if</b> (nd &lt;= 9)
<a name='L499'>      <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L500'>
<a name='L501'>    s += 9;
<a name='L502'>    <b>for</b> (i = 9; i &lt; nd0; i++) <font color='red'>{</font>
<a name='L503'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 10, *s++ - '0');
<a name='L504'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L505'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L506'>    <font color='red'>}</font>
<a name='L507'>    s++;
<a name='L508'>    <b>for</b>(; i &lt; nd; i++) <font color='red'>{</font>
<a name='L509'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 10, *s++ - '0');
<a name='L510'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L511'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L512'>    <font color='red'>}</font>
<a name='L513'>    <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L514'><font color='red'>}</font>
<a name='L515'>
<a name='L516'><i><font color='green'>/* count leading 0 bits in the 32-bit integer x. */</font></i>
<a name='L517'>
<a name='L518'><b>static</b> <b>int</b>
<a name='L519'><a href='../R/8279.html' title='Multiple refered from 3 places.'>hi0bits</a>(ULong x)
<a name='L520'><font color='red'>{</font>
<a name='L521'>    <b>int</b> k = 0;
<a name='L522'>
<a name='L523'>    <b>if</b> (!(x &amp; 0xffff0000)) <font color='red'>{</font>
<a name='L524'>        k = 16;
<a name='L525'>        x &lt;&lt;= 16;
<a name='L526'>    <font color='red'>}</font>
<a name='L527'>    <b>if</b> (!(x &amp; 0xff000000)) <font color='red'>{</font>
<a name='L528'>        k += 8;
<a name='L529'>        x &lt;&lt;= 8;
<a name='L530'>    <font color='red'>}</font>
<a name='L531'>    <b>if</b> (!(x &amp; 0xf0000000)) <font color='red'>{</font>
<a name='L532'>        k += 4;
<a name='L533'>        x &lt;&lt;= 4;
<a name='L534'>    <font color='red'>}</font>
<a name='L535'>    <b>if</b> (!(x &amp; 0xc0000000)) <font color='red'>{</font>
<a name='L536'>        k += 2;
<a name='L537'>        x &lt;&lt;= 2;
<a name='L538'>    <font color='red'>}</font>
<a name='L539'>    <b>if</b> (!(x &amp; 0x80000000)) <font color='red'>{</font>
<a name='L540'>        k++;
<a name='L541'>        <b>if</b> (!(x &amp; 0x40000000))
<a name='L542'>            <b>return</b> 32;
<a name='L543'>    <font color='red'>}</font>
<a name='L544'>    <b>return</b> k;
<a name='L545'><font color='red'>}</font>
<a name='L546'>
<a name='L547'><i><font color='green'>/* count trailing 0 bits in the 32-bit integer y, and shift y right by that</font></i>
<a name='L548'><i><font color='green'>   number of bits. */</font></i>
<a name='L549'>
<a name='L550'><b>static</b> <b>int</b>
<a name='L551'><a href='../R/8677.html' title='Multiple refered from 2 places.'>lo0bits</a>(ULong *y)
<a name='L552'><font color='red'>{</font>
<a name='L553'>    <b>int</b> k;
<a name='L554'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> x = *y;
<a name='L555'>
<a name='L556'>    <b>if</b> (x &amp; 7) <font color='red'>{</font>
<a name='L557'>        <b>if</b> (x &amp; 1)
<a name='L558'>            <b>return</b> 0;
<a name='L559'>        <b>if</b> (x &amp; 2) <font color='red'>{</font>
<a name='L560'>            *y = x &gt;&gt; 1;
<a name='L561'>            <b>return</b> 1;
<a name='L562'>        <font color='red'>}</font>
<a name='L563'>        *y = x &gt;&gt; 2;
<a name='L564'>        <b>return</b> 2;
<a name='L565'>    <font color='red'>}</font>
<a name='L566'>    k = 0;
<a name='L567'>    <b>if</b> (!(x &amp; 0xffff)) <font color='red'>{</font>
<a name='L568'>        k = 16;
<a name='L569'>        x &gt;&gt;= 16;
<a name='L570'>    <font color='red'>}</font>
<a name='L571'>    <b>if</b> (!(x &amp; 0xff)) <font color='red'>{</font>
<a name='L572'>        k += 8;
<a name='L573'>        x &gt;&gt;= 8;
<a name='L574'>    <font color='red'>}</font>
<a name='L575'>    <b>if</b> (!(x &amp; 0xf)) <font color='red'>{</font>
<a name='L576'>        k += 4;
<a name='L577'>        x &gt;&gt;= 4;
<a name='L578'>    <font color='red'>}</font>
<a name='L579'>    <b>if</b> (!(x &amp; 0x3)) <font color='red'>{</font>
<a name='L580'>        k += 2;
<a name='L581'>        x &gt;&gt;= 2;
<a name='L582'>    <font color='red'>}</font>
<a name='L583'>    <b>if</b> (!(x &amp; 1)) <font color='red'>{</font>
<a name='L584'>        k++;
<a name='L585'>        x &gt;&gt;= 1;
<a name='L586'>        <b>if</b> (!x)
<a name='L587'>            <b>return</b> 32;
<a name='L588'>    <font color='red'>}</font>
<a name='L589'>    *y = x;
<a name='L590'>    <b>return</b> k;
<a name='L591'><font color='red'>}</font>
<a name='L592'>
<a name='L593'><i><font color='green'>/* convert a small nonnegative integer to a Bigint */</font></i>
<a name='L594'>
<a name='L595'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L596'><a href='../R/8283.html' title='Multiple refered from 6 places.'>i2b</a>(<b>int</b> i)
<a name='L597'><font color='red'>{</font>
<a name='L598'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L599'>
<a name='L600'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(1);
<a name='L601'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L602'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L603'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] = i;
<a name='L604'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = 1;
<a name='L605'>    <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L606'><font color='red'>}</font>
<a name='L607'>
<a name='L608'><i><font color='green'>/* multiply two Bigints.  Returns a new Bigint, or NULL on failure.  Ignores</font></i>
<a name='L609'><i><font color='green'>   the signs of a and b. */</font></i>
<a name='L610'>
<a name='L611'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L612'><a href='../R/9151.html' title='Multiple refered from 9 places.'>mult</a>(Bigint *a, Bigint *b)
<a name='L613'><font color='red'>{</font>
<a name='L614'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *c;
<a name='L615'>    <b>int</b> k, wa, wb, wc;
<a name='L616'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> *x, *xa, *xae, *xb, *xbe, *xc, *xc0;
<a name='L617'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> y;
<a name='L618'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L619'>    <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a> carry, z;
<a name='L620'><font color='darkred'>#else</font>
<a name='L621'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> carry, z;
<a name='L622'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> z2;
<a name='L623'><font color='darkred'>#endif</font>
<a name='L624'>
<a name='L625'>    <b>if</b> ((!a-&gt;x[0] &amp;&amp; a-&gt;wds == 1) || (!<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] &amp;&amp; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds == 1)) <font color='red'>{</font>
<a name='L626'>        c = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(0);
<a name='L627'>        <b>if</b> (c == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L628'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L629'>        c-&gt;wds = 1;
<a name='L630'>        c-&gt;x[0] = 0;
<a name='L631'>        <b>return</b> c;
<a name='L632'>    <font color='red'>}</font>
<a name='L633'>
<a name='L634'>    <b>if</b> (a-&gt;wds &lt; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds) <font color='red'>{</font>
<a name='L635'>        c = a;
<a name='L636'>        a = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L637'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = c;
<a name='L638'>    <font color='red'>}</font>
<a name='L639'>    k = a-&gt;k;
<a name='L640'>    wa = a-&gt;wds;
<a name='L641'>    wb = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds;
<a name='L642'>    wc = wa + wb;
<a name='L643'>    <b>if</b> (wc &gt; a-&gt;maxwds)
<a name='L644'>        k++;
<a name='L645'>    c = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(k);
<a name='L646'>    <b>if</b> (c == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L647'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L648'>    <b>for</b>(x = c-&gt;x, xa = x + wc; x &lt; xa; x++)
<a name='L649'>        *x = 0;
<a name='L650'>    xa = a-&gt;x;
<a name='L651'>    xae = xa + wa;
<a name='L652'>    xb = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L653'>    xbe = xb + wb;
<a name='L654'>    xc0 = c-&gt;x;
<a name='L655'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L656'>    <b>for</b>(; xb &lt; xbe; xc0++) <font color='red'>{</font>
<a name='L657'>        <b>if</b> ((y = *xb++)) <font color='red'>{</font>
<a name='L658'>            x = xa;
<a name='L659'>            xc = xc0;
<a name='L660'>            carry = 0;
<a name='L661'>            <b>do</b> <font color='red'>{</font>
<a name='L662'>                z = *x++ * (<a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>)y + *xc + carry;
<a name='L663'>                carry = z &gt;&gt; 32;
<a name='L664'>                *xc++ = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)(z &amp; <a href='../S/3095.html#L276' title='Defined at 276 in Python/dtoa.c.'>FFFFFFFF</a>);
<a name='L665'>            <font color='red'>}</font>
<a name='L666'>            <b>while</b>(x &lt; xae);
<a name='L667'>            *xc = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)carry;
<a name='L668'>        <font color='red'>}</font>
<a name='L669'>    <font color='red'>}</font>
<a name='L670'><font color='darkred'>#else</font>
<a name='L671'>    <b>for</b>(; xb &lt; xbe; xb++, xc0++) <font color='red'>{</font>
<a name='L672'>        <b>if</b> (y = *xb &amp; 0xffff) <font color='red'>{</font>
<a name='L673'>            x = xa;
<a name='L674'>            xc = xc0;
<a name='L675'>            carry = 0;
<a name='L676'>            <b>do</b> <font color='red'>{</font>
<a name='L677'>                z = (*x &amp; 0xffff) * y + (*xc &amp; 0xffff) + carry;
<a name='L678'>                carry = z &gt;&gt; 16;
<a name='L679'>                z2 = (*x++ &gt;&gt; 16) * y + (*xc &gt;&gt; 16) + carry;
<a name='L680'>                carry = z2 &gt;&gt; 16;
<a name='L681'>                <a href='../D/5102.html' title='Multiple defined in 2 places.'>Storeinc</a>(xc, z2, z);
<a name='L682'>            <font color='red'>}</font>
<a name='L683'>            <b>while</b>(x &lt; xae);
<a name='L684'>            *xc = carry;
<a name='L685'>        <font color='red'>}</font>
<a name='L686'>        <b>if</b> (y = *xb &gt;&gt; 16) <font color='red'>{</font>
<a name='L687'>            x = xa;
<a name='L688'>            xc = xc0;
<a name='L689'>            carry = 0;
<a name='L690'>            z2 = *xc;
<a name='L691'>            <b>do</b> <font color='red'>{</font>
<a name='L692'>                z = (*x &amp; 0xffff) * y + (*xc &gt;&gt; 16) + carry;
<a name='L693'>                carry = z &gt;&gt; 16;
<a name='L694'>                <a href='../D/5102.html' title='Multiple defined in 2 places.'>Storeinc</a>(xc, z, z2);
<a name='L695'>                z2 = (*x++ &gt;&gt; 16) * y + (*xc &amp; 0xffff) + carry;
<a name='L696'>                carry = z2 &gt;&gt; 16;
<a name='L697'>            <font color='red'>}</font>
<a name='L698'>            <b>while</b>(x &lt; xae);
<a name='L699'>            *xc = z2;
<a name='L700'>        <font color='red'>}</font>
<a name='L701'>    <font color='red'>}</font>
<a name='L702'><font color='darkred'>#endif</font>
<a name='L703'>    <b>for</b>(xc0 = c-&gt;x, xc = xc0 + wc; wc &gt; 0 &amp;&amp; !*--xc; --wc) ;
<a name='L704'>    c-&gt;wds = wc;
<a name='L705'>    <b>return</b> c;
<a name='L706'><font color='red'>}</font>
<a name='L707'>
<a name='L708'><font color='darkred'>#ifndef</font> Py_USING_MEMORY_DEBUGGER
<a name='L709'>
<a name='L710'><i><font color='green'>/* p5s is a linked list of powers of 5 of the form 5**(2**i), i &gt;= 2 */</font></i>
<a name='L711'>
<a name='L712'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *p5s;
<a name='L713'>
<a name='L714'><i><font color='green'>/* multiply the Bigint b by 5**k.  Returns a pointer to the result, or NULL on</font></i>
<a name='L715'><i><font color='green'>   failure; if the returned pointer is distinct from b then the original</font></i>
<a name='L716'><i><font color='green'>   Bigint b will have been Bfree'd.   Ignores the sign of b. */</font></i>
<a name='L717'>
<a name='L718'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L719'><a href='../R/9693.html' title='Multiple refered from 8 places.'>pow5mult</a>(Bigint *b, <b>int</b> k)
<a name='L720'><font color='red'>{</font>
<a name='L721'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *b1, *p5, *p51;
<a name='L722'>    <b>int</b> i;
<a name='L723'>    <b>static</b> <b>int</b> p05[3] = <font color='red'>{</font> 5, 25, 125 <font color='red'>}</font>;
<a name='L724'>
<a name='L725'>    <b>if</b> ((i = k &amp; 3)) <font color='red'>{</font>
<a name='L726'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, p05[i-1], 0);
<a name='L727'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L728'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L729'>    <font color='red'>}</font>
<a name='L730'>
<a name='L731'>    <b>if</b> (!(k &gt;&gt;= 2))
<a name='L732'>        <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L733'>    p5 = p5s;
<a name='L734'>    <b>if</b> (!p5) <font color='red'>{</font>
<a name='L735'>        <i><font color='green'>/* first time */</font></i>
<a name='L736'>        p5 = <a href='../S/3095.html#L596' title='Defined at 596 in Python/dtoa.c.'>i2b</a>(625);
<a name='L737'>        <b>if</b> (p5 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L738'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L739'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L740'>        <font color='red'>}</font>
<a name='L741'>        p5s = p5;
<a name='L742'>        p5-&gt;next = 0;
<a name='L743'>    <font color='red'>}</font>
<a name='L744'>    <b>for</b>(;;) <font color='red'>{</font>
<a name='L745'>        <b>if</b> (k &amp; 1) <font color='red'>{</font>
<a name='L746'>            b1 = <a href='../S/3095.html#L612' title='Defined at 612 in Python/dtoa.c.'>mult</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, p5);
<a name='L747'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L748'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = b1;
<a name='L749'>            <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L750'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L751'>        <font color='red'>}</font>
<a name='L752'>        <b>if</b> (!(k &gt;&gt;= 1))
<a name='L753'>            <b>break</b>;
<a name='L754'>        p51 = p5-&gt;next;
<a name='L755'>        <b>if</b> (!p51) <font color='red'>{</font>
<a name='L756'>            p51 = <a href='../S/3095.html#L612' title='Defined at 612 in Python/dtoa.c.'>mult</a>(p5,p5);
<a name='L757'>            <b>if</b> (p51 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L758'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L759'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L760'>            <font color='red'>}</font>
<a name='L761'>            p51-&gt;next = 0;
<a name='L762'>            p5-&gt;next = p51;
<a name='L763'>        <font color='red'>}</font>
<a name='L764'>        p5 = p51;
<a name='L765'>    <font color='red'>}</font>
<a name='L766'>    <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L767'><font color='red'>}</font>
<a name='L768'>
<a name='L769'><font color='darkred'>#else</font>
<a name='L770'>
<a name='L771'><i><font color='green'>/* Version of pow5mult that doesn't cache powers of 5. Provided for</font></i>
<a name='L772'><i><font color='green'>   the benefit of memory debugging tools like Valgrind. */</font></i>
<a name='L773'>
<a name='L774'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L775'><a href='../R/9693.html' title='Multiple refered from 8 places.'>pow5mult</a>(Bigint *b, <b>int</b> k)
<a name='L776'><font color='red'>{</font>
<a name='L777'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *b1, *p5, *p51;
<a name='L778'>    <b>int</b> i;
<a name='L779'>    <b>static</b> <b>int</b> p05[3] = <font color='red'>{</font> 5, 25, 125 <font color='red'>}</font>;
<a name='L780'>
<a name='L781'>    <b>if</b> ((i = k &amp; 3)) <font color='red'>{</font>
<a name='L782'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, p05[i-1], 0);
<a name='L783'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L784'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L785'>    <font color='red'>}</font>
<a name='L786'>
<a name='L787'>    <b>if</b> (!(k &gt;&gt;= 2))
<a name='L788'>        <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L789'>    p5 = <a href='../S/3095.html#L596' title='Defined at 596 in Python/dtoa.c.'>i2b</a>(625);
<a name='L790'>    <b>if</b> (p5 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L791'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L792'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L793'>    <font color='red'>}</font>
<a name='L794'>
<a name='L795'>    <b>for</b>(;;) <font color='red'>{</font>
<a name='L796'>        <b>if</b> (k &amp; 1) <font color='red'>{</font>
<a name='L797'>            b1 = <a href='../S/3095.html#L612' title='Defined at 612 in Python/dtoa.c.'>mult</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, p5);
<a name='L798'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L799'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = b1;
<a name='L800'>            <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L801'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(p5);
<a name='L802'>                <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L803'>            <font color='red'>}</font>
<a name='L804'>        <font color='red'>}</font>
<a name='L805'>        <b>if</b> (!(k &gt;&gt;= 1))
<a name='L806'>            <b>break</b>;
<a name='L807'>        p51 = <a href='../S/3095.html#L612' title='Defined at 612 in Python/dtoa.c.'>mult</a>(p5, p5);
<a name='L808'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(p5);
<a name='L809'>        p5 = p51;
<a name='L810'>        <b>if</b> (p5 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L811'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L812'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L813'>        <font color='red'>}</font>
<a name='L814'>    <font color='red'>}</font>
<a name='L815'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(p5);
<a name='L816'>    <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L817'><font color='red'>}</font>
<a name='L818'>
<a name='L819'><font color='darkred'>#endif</font> <i><font color='green'>/* Py_USING_MEMORY_DEBUGGER */</font></i>
<a name='L820'>
<a name='L821'><i><font color='green'>/* shift a Bigint b left by k bits.  Return a pointer to the shifted result,</font></i>
<a name='L822'><i><font color='green'>   or NULL on failure.  If the returned pointer is distinct from b then the</font></i>
<a name='L823'><i><font color='green'>   original b will have been Bfree'd.   Ignores the sign of b. */</font></i>
<a name='L824'>
<a name='L825'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L826'><a href='../R/8815.html' title='Multiple refered from 14 places.'>lshift</a>(Bigint *b, <b>int</b> k)
<a name='L827'><font color='red'>{</font>
<a name='L828'>    <b>int</b> i, k1, n, n1;
<a name='L829'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *b1;
<a name='L830'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> *x, *x1, *xe, z;
<a name='L831'>
<a name='L832'>    <b>if</b> (!k || (!<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] &amp;&amp; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds == 1))
<a name='L833'>        <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L834'>
<a name='L835'>    n = k &gt;&gt; 5;
<a name='L836'>    k1 = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;k;
<a name='L837'>    n1 = n + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds + 1;
<a name='L838'>    <b>for</b>(i = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;maxwds; n1 &gt; i; i &lt;&lt;= 1)
<a name='L839'>        k1++;
<a name='L840'>    b1 = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(k1);
<a name='L841'>    <b>if</b> (b1 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L842'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L843'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L844'>    <font color='red'>}</font>
<a name='L845'>    x1 = b1-&gt;x;
<a name='L846'>    <b>for</b>(i = 0; i &lt; n; i++)
<a name='L847'>        *x1++ = 0;
<a name='L848'>    x = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L849'>    xe = x + <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds;
<a name='L850'>    <b>if</b> (k &amp;= 0x1f) <font color='red'>{</font>
<a name='L851'>        k1 = 32 - k;
<a name='L852'>        z = 0;
<a name='L853'>        <b>do</b> <font color='red'>{</font>
<a name='L854'>            *x1++ = *x &lt;&lt; k | z;
<a name='L855'>            z = *x++ &gt;&gt; k1;
<a name='L856'>        <font color='red'>}</font>
<a name='L857'>        <b>while</b>(x &lt; xe);
<a name='L858'>        <b>if</b> ((*x1 = z))
<a name='L859'>            ++n1;
<a name='L860'>    <font color='red'>}</font>
<a name='L861'>    <b>else</b> <b>do</b>
<a name='L862'>             *x1++ = *x++;
<a name='L863'>        <b>while</b>(x &lt; xe);
<a name='L864'>    b1-&gt;wds = n1 - 1;
<a name='L865'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L866'>    <b>return</b> b1;
<a name='L867'><font color='red'>}</font>
<a name='L868'>
<a name='L869'><i><font color='green'>/* Do a three-way compare of a and b, returning -1 if a &lt; b, 0 if a == b and</font></i>
<a name='L870'><i><font color='green'>   1 if a &gt; b.  Ignores signs of a and b. */</font></i>
<a name='L871'>
<a name='L872'><b>static</b> <b>int</b>
<a name='L873'><a href='../R/6787.html' title='Multiple refered from 204 places.'>cmp</a>(Bigint *a, Bigint *b)
<a name='L874'><font color='red'>{</font>
<a name='L875'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> *xa, *xa0, *xb, *xb0;
<a name='L876'>    <b>int</b> i, j;
<a name='L877'>
<a name='L878'>    i = a-&gt;wds;
<a name='L879'>    j = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds;
<a name='L880'><font color='darkred'>#ifdef</font> <a href='../D/728.html' title='Multiple defined in 2 places.'>DEBUG</a>
<a name='L881'>    <b>if</b> (i &gt; 1 &amp;&amp; !a-&gt;x[i-1])
<a name='L882'>        <a href='../S/3095.html#L175' title='Defined at 175 in Python/dtoa.c.'>Bug</a>("cmp called with a-&gt;x[a-&gt;wds-1] == 0");
<a name='L883'>    <b>if</b> (j &gt; 1 &amp;&amp; !<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[j-1])
<a name='L884'>        <a href='../S/3095.html#L175' title='Defined at 175 in Python/dtoa.c.'>Bug</a>("cmp called with b-&gt;x[b-&gt;wds-1] == 0");
<a name='L885'><font color='darkred'>#endif</font>
<a name='L886'>    <b>if</b> (i -= j)
<a name='L887'>        <b>return</b> i;
<a name='L888'>    xa0 = a-&gt;x;
<a name='L889'>    xa = xa0 + j;
<a name='L890'>    xb0 = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L891'>    xb = xb0 + j;
<a name='L892'>    <b>for</b>(;;) <font color='red'>{</font>
<a name='L893'>        <b>if</b> (*--xa != *--xb)
<a name='L894'>            <b>return</b> *xa &lt; *xb ? -1 : 1;
<a name='L895'>        <b>if</b> (xa &lt;= xa0)
<a name='L896'>            <b>break</b>;
<a name='L897'>    <font color='red'>}</font>
<a name='L898'>    <b>return</b> 0;
<a name='L899'><font color='red'>}</font>
<a name='L900'>
<a name='L901'><i><font color='green'>/* Take the difference of Bigints a and b, returning a new Bigint.  Returns</font></i>
<a name='L902'><i><font color='green'>   NULL on failure.  The signs of a and b are ignored, but the sign of the</font></i>
<a name='L903'><i><font color='green'>   result is set appropriately. */</font></i>
<a name='L904'>
<a name='L905'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L906'><a href='../R/7382.html' title='Multiple refered from 79 places.'>diff</a>(Bigint *a, Bigint *b)
<a name='L907'><font color='red'>{</font>
<a name='L908'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *c;
<a name='L909'>    <b>int</b> i, wa, wb;
<a name='L910'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> *xa, *xae, *xb, *xbe, *xc;
<a name='L911'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L912'>    <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a> borrow, y;
<a name='L913'><font color='darkred'>#else</font>
<a name='L914'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> borrow, y;
<a name='L915'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> z;
<a name='L916'><font color='darkred'>#endif</font>
<a name='L917'>
<a name='L918'>    i = <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(a,<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L919'>    <b>if</b> (!i) <font color='red'>{</font>
<a name='L920'>        c = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(0);
<a name='L921'>        <b>if</b> (c == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L922'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L923'>        c-&gt;wds = 1;
<a name='L924'>        c-&gt;x[0] = 0;
<a name='L925'>        <b>return</b> c;
<a name='L926'>    <font color='red'>}</font>
<a name='L927'>    <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L928'>        c = a;
<a name='L929'>        a = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L930'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = c;
<a name='L931'>        i = 1;
<a name='L932'>    <font color='red'>}</font>
<a name='L933'>    <b>else</b>
<a name='L934'>        i = 0;
<a name='L935'>    c = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(a-&gt;k);
<a name='L936'>    <b>if</b> (c == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L937'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L938'>    c-&gt;sign = i;
<a name='L939'>    wa = a-&gt;wds;
<a name='L940'>    xa = a-&gt;x;
<a name='L941'>    xae = xa + wa;
<a name='L942'>    wb = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds;
<a name='L943'>    xb = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L944'>    xbe = xb + wb;
<a name='L945'>    xc = c-&gt;x;
<a name='L946'>    borrow = 0;
<a name='L947'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L948'>    <b>do</b> <font color='red'>{</font>
<a name='L949'>        y = (<a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>)*xa++ - *xb++ - borrow;
<a name='L950'>        borrow = y &gt;&gt; 32 &amp; (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)1;
<a name='L951'>        *xc++ = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)(y &amp; <a href='../S/3095.html#L276' title='Defined at 276 in Python/dtoa.c.'>FFFFFFFF</a>);
<a name='L952'>    <font color='red'>}</font>
<a name='L953'>    <b>while</b>(xb &lt; xbe);
<a name='L954'>    <b>while</b>(xa &lt; xae) <font color='red'>{</font>
<a name='L955'>        y = *xa++ - borrow;
<a name='L956'>        borrow = y &gt;&gt; 32 &amp; (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)1;
<a name='L957'>        *xc++ = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)(y &amp; <a href='../S/3095.html#L276' title='Defined at 276 in Python/dtoa.c.'>FFFFFFFF</a>);
<a name='L958'>    <font color='red'>}</font>
<a name='L959'><font color='darkred'>#else</font>
<a name='L960'>    <b>do</b> <font color='red'>{</font>
<a name='L961'>        y = (*xa &amp; 0xffff) - (*xb &amp; 0xffff) - borrow;
<a name='L962'>        borrow = (y &amp; 0x10000) &gt;&gt; 16;
<a name='L963'>        z = (*xa++ &gt;&gt; 16) - (*xb++ &gt;&gt; 16) - borrow;
<a name='L964'>        borrow = (z &amp; 0x10000) &gt;&gt; 16;
<a name='L965'>        <a href='../D/5102.html' title='Multiple defined in 2 places.'>Storeinc</a>(xc, z, y);
<a name='L966'>    <font color='red'>}</font>
<a name='L967'>    <b>while</b>(xb &lt; xbe);
<a name='L968'>    <b>while</b>(xa &lt; xae) <font color='red'>{</font>
<a name='L969'>        y = (*xa &amp; 0xffff) - borrow;
<a name='L970'>        borrow = (y &amp; 0x10000) &gt;&gt; 16;
<a name='L971'>        z = (*xa++ &gt;&gt; 16) - borrow;
<a name='L972'>        borrow = (z &amp; 0x10000) &gt;&gt; 16;
<a name='L973'>        <a href='../D/5102.html' title='Multiple defined in 2 places.'>Storeinc</a>(xc, z, y);
<a name='L974'>    <font color='red'>}</font>
<a name='L975'><font color='darkred'>#endif</font>
<a name='L976'>    <b>while</b>(!*--xc)
<a name='L977'>        wa--;
<a name='L978'>    c-&gt;wds = wa;
<a name='L979'>    <b>return</b> c;
<a name='L980'><font color='red'>}</font>
<a name='L981'>
<a name='L982'><i><font color='green'>/* Given a positive normal double x, return the difference between x and the</font></i>
<a name='L983'><i><font color='green'>   next double up.  Doesn't give correct results for subnormals. */</font></i>
<a name='L984'>
<a name='L985'><b>static</b> <b>double</b>
<a name='L986'><a href='../R/11053.html' title='Multiple refered from 3 places.'>ulp</a>(<a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> *x)
<a name='L987'><font color='red'>{</font>
<a name='L988'>    <a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a> <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L989'>    <a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> u;
<a name='L990'>
<a name='L991'>    <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> = (<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(x) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) - (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>-1)*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L992'>    <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) = <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L993'>    <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;u) = 0;
<a name='L994'>    <b>return</b> <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u);
<a name='L995'><font color='red'>}</font>
<a name='L996'>
<a name='L997'><i><font color='green'>/* Convert a Bigint to a double plus an exponent */</font></i>
<a name='L998'>
<a name='L999'><b>static</b> <b>double</b>
<a name='L1000'><a href='../R/6196.html' title='Multiple refered from 2 places.'>b2d</a>(Bigint *a, <b>int</b> *e)
<a name='L1001'><font color='red'>{</font>
<a name='L1002'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> *xa, *xa0, w, y, z;
<a name='L1003'>    <b>int</b> k;
<a name='L1004'>    <a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> d;
<a name='L1005'>
<a name='L1006'>    xa0 = a-&gt;x;
<a name='L1007'>    xa = xa0 + a-&gt;wds;
<a name='L1008'>    y = *--xa;
<a name='L1009'><font color='darkred'>#ifdef</font> <a href='../D/728.html' title='Multiple defined in 2 places.'>DEBUG</a>
<a name='L1010'>    <b>if</b> (!y) <a href='../S/3095.html#L175' title='Defined at 175 in Python/dtoa.c.'>Bug</a>("zero y in b2d");
<a name='L1011'><font color='darkred'>#endif</font>
<a name='L1012'>    k = <a href='../S/3095.html#L519' title='Defined at 519 in Python/dtoa.c.'>hi0bits</a>(y);
<a name='L1013'>    *e = 32 - k;
<a name='L1014'>    <b>if</b> (k &lt; <a href='../S/3095.html#L241' title='Defined at 241 in Python/dtoa.c.'>Ebits</a>) <font color='red'>{</font>
<a name='L1015'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;d) = <a href='../S/3095.html#L239' title='Defined at 239 in Python/dtoa.c.'>Exp_1</a> | y &gt;&gt; (<a href='../S/3095.html#L241' title='Defined at 241 in Python/dtoa.c.'>Ebits</a> - k);
<a name='L1016'>        w = xa &gt; xa0 ? *--xa : 0;
<a name='L1017'>        <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;d) = y &lt;&lt; ((32-<a href='../S/3095.html#L241' title='Defined at 241 in Python/dtoa.c.'>Ebits</a>) + k) | w &gt;&gt; (<a href='../S/3095.html#L241' title='Defined at 241 in Python/dtoa.c.'>Ebits</a> - k);
<a name='L1018'>        <b>goto</b> ret_d;
<a name='L1019'>    <font color='red'>}</font>
<a name='L1020'>    z = xa &gt; xa0 ? *--xa : 0;
<a name='L1021'>    <b>if</b> (k -= <a href='../S/3095.html#L241' title='Defined at 241 in Python/dtoa.c.'>Ebits</a>) <font color='red'>{</font>
<a name='L1022'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;d) = <a href='../S/3095.html#L239' title='Defined at 239 in Python/dtoa.c.'>Exp_1</a> | y &lt;&lt; k | z &gt;&gt; (32 - k);
<a name='L1023'>        y = xa &gt; xa0 ? *--xa : 0;
<a name='L1024'>        <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;d) = z &lt;&lt; k | y &gt;&gt; (32 - k);
<a name='L1025'>    <font color='red'>}</font>
<a name='L1026'>    <b>else</b> <font color='red'>{</font>
<a name='L1027'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;d) = <a href='../S/3095.html#L239' title='Defined at 239 in Python/dtoa.c.'>Exp_1</a> | y;
<a name='L1028'>        <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;d) = z;
<a name='L1029'>    <font color='red'>}</font>
<a name='L1030'>  ret_d:
<a name='L1031'>    <b>return</b> <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;d);
<a name='L1032'><font color='red'>}</font>
<a name='L1033'>
<a name='L1034'><i><font color='green'>/* Convert a scaled double to a Bigint plus an exponent.  Similar to d2b,</font></i>
<a name='L1035'><i><font color='green'>   except that it accepts the scale parameter used in _Py_dg_strtod (which</font></i>
<a name='L1036'><i><font color='green'>   should be either 0 or 2*P), and the normalization for the return value is</font></i>
<a name='L1037'><i><font color='green'>   different (see below).  On input, d should be finite and nonnegative, and d</font></i>
<a name='L1038'><i><font color='green'>   / 2**scale should be exactly representable as an IEEE 754 double.</font></i>
<a name='L1039'><i><font color='green'></font></i>
<a name='L1040'><i><font color='green'>   Returns a Bigint b and an integer e such that</font></i>
<a name='L1041'><i><font color='green'></font></i>
<a name='L1042'><i><font color='green'>     dval(d) / 2**scale = b * 2**e.</font></i>
<a name='L1043'><i><font color='green'></font></i>
<a name='L1044'><i><font color='green'>   Unlike d2b, b is not necessarily odd: b and e are normalized so</font></i>
<a name='L1045'><i><font color='green'>   that either 2**(P-1) &lt;= b &lt; 2**P and e &gt;= Etiny, or b &lt; 2**P</font></i>
<a name='L1046'><i><font color='green'>   and e == Etiny.  This applies equally to an input of 0.0: in that</font></i>
<a name='L1047'><i><font color='green'>   case the return values are b = 0 and e = Etiny.</font></i>
<a name='L1048'><i><font color='green'></font></i>
<a name='L1049'><i><font color='green'>   The above normalization ensures that for all possible inputs d,</font></i>
<a name='L1050'><i><font color='green'>   2**e gives ulp(d/2**scale).</font></i>
<a name='L1051'><i><font color='green'></font></i>
<a name='L1052'><i><font color='green'>   Returns NULL on failure.</font></i>
<a name='L1053'><i><font color='green'>*/</font></i>
<a name='L1054'>
<a name='L1055'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L1056'><a href='../R/10130.html' title='Multiple refered from 2 places.'>sd2b</a>(<a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> *d, <b>int</b> scale, <b>int</b> *e)
<a name='L1057'><font color='red'>{</font>
<a name='L1058'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L1059'>
<a name='L1060'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(1);
<a name='L1061'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1062'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1063'>    
<a name='L1064'>    <i><font color='green'>/* First construct b and e assuming that scale == 0. */</font></i>
<a name='L1065'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = 2;
<a name='L1066'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] = <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(d);
<a name='L1067'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[1] = <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(d) &amp; <a href='../S/3095.html#L242' title='Defined at 242 in Python/dtoa.c.'>Frac_mask</a>;
<a name='L1068'>    *e = <a href='../S/3095.html#L238' title='Defined at 238 in Python/dtoa.c.'>Etiny</a> - 1 + (<b>int</b>)((<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(d) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) &gt;&gt; <a href='../S/3095.html#L228' title='Defined at 228 in Python/dtoa.c.'>Exp_shift</a>);
<a name='L1069'>    <b>if</b> (*e &lt; <a href='../S/3095.html#L238' title='Defined at 238 in Python/dtoa.c.'>Etiny</a>)
<a name='L1070'>        *e = <a href='../S/3095.html#L238' title='Defined at 238 in Python/dtoa.c.'>Etiny</a>;
<a name='L1071'>    <b>else</b>
<a name='L1072'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[1] |= <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L1073'>
<a name='L1074'>    <i><font color='green'>/* Now adjust for scale, provided that b != 0. */</font></i>
<a name='L1075'>    <b>if</b> (scale &amp;&amp; (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] || <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[1])) <font color='red'>{</font>
<a name='L1076'>        *e -= scale;
<a name='L1077'>        <b>if</b> (*e &lt; <a href='../S/3095.html#L238' title='Defined at 238 in Python/dtoa.c.'>Etiny</a>) <font color='red'>{</font>
<a name='L1078'>            scale = <a href='../S/3095.html#L238' title='Defined at 238 in Python/dtoa.c.'>Etiny</a> - *e;
<a name='L1079'>            *e = <a href='../S/3095.html#L238' title='Defined at 238 in Python/dtoa.c.'>Etiny</a>;
<a name='L1080'>            <i><font color='green'>/* We can't shift more than P-1 bits without shifting out a 1. */</font></i>
<a name='L1081'>            <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(0 &lt; scale &amp;&amp; scale &lt;= <a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a> - 1);
<a name='L1082'>            <b>if</b> (scale &gt;= 32) <font color='red'>{</font>
<a name='L1083'>                <i><font color='green'>/* The bits shifted out should all be zero. */</font></i>
<a name='L1084'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] == 0);
<a name='L1085'>                <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[1];
<a name='L1086'>                <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[1] = 0;
<a name='L1087'>                scale -= 32;
<a name='L1088'>            <font color='red'>}</font>
<a name='L1089'>            <b>if</b> (scale) <font color='red'>{</font>
<a name='L1090'>                <i><font color='green'>/* The bits shifted out should all be zero. */</font></i>
<a name='L1091'>                <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] &lt;&lt; (32 - scale) == 0);
<a name='L1092'>                <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] = (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] &gt;&gt; scale) | (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[1] &lt;&lt; (32 - scale));
<a name='L1093'>                <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[1] &gt;&gt;= scale;
<a name='L1094'>            <font color='red'>}</font>
<a name='L1095'>        <font color='red'>}</font>
<a name='L1096'>    <font color='red'>}</font>
<a name='L1097'>    <i><font color='green'>/* Ensure b is normalized. */</font></i>
<a name='L1098'>    <b>if</b> (!<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[1])
<a name='L1099'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = 1;
<a name='L1100'>
<a name='L1101'>    <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L1102'><font color='red'>}</font>
<a name='L1103'>
<a name='L1104'><i><font color='green'>/* Convert a double to a Bigint plus an exponent.  Return NULL on failure.</font></i>
<a name='L1105'><i><font color='green'></font></i>
<a name='L1106'><i><font color='green'>   Given a finite nonzero double d, return an odd Bigint b and exponent *e</font></i>
<a name='L1107'><i><font color='green'>   such that fabs(d) = b * 2**e.  On return, *bbits gives the number of</font></i>
<a name='L1108'><i><font color='green'>   significant bits of b; that is, 2**(*bbits-1) &lt;= b &lt; 2**(*bbits).</font></i>
<a name='L1109'><i><font color='green'></font></i>
<a name='L1110'><i><font color='green'>   If d is zero, then b == 0, *e == -1010, *bbits = 0.</font></i>
<a name='L1111'><i><font color='green'> */</font></i>
<a name='L1112'>
<a name='L1113'><b>static</b> <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *
<a name='L1114'><a href='../S/3095.html#L2392' title='Refered from 2392 in Python/dtoa.c.'>d2b</a>(<a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> *d, <b>int</b> *e, <b>int</b> *bits)
<a name='L1115'><font color='red'>{</font>
<a name='L1116'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L1117'>    <b>int</b> de, k;
<a name='L1118'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> *x, y, z;
<a name='L1119'>    <b>int</b> i;
<a name='L1120'>
<a name='L1121'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(1);
<a name='L1122'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1123'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1124'>    x = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L1125'>
<a name='L1126'>    z = <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(d) &amp; <a href='../S/3095.html#L242' title='Defined at 242 in Python/dtoa.c.'>Frac_mask</a>;
<a name='L1127'>    <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(d) &amp;= 0x7fffffff;   <i><font color='green'>/* clear sign bit, which we ignore */</font></i>
<a name='L1128'>    <b>if</b> ((de = (<b>int</b>)(<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(d) &gt;&gt; <a href='../S/3095.html#L228' title='Defined at 228 in Python/dtoa.c.'>Exp_shift</a>)))
<a name='L1129'>        z |= <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L1130'>    <b>if</b> ((y = <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(d))) <font color='red'>{</font>
<a name='L1131'>        <b>if</b> ((k = <a href='../S/3095.html#L551' title='Defined at 551 in Python/dtoa.c.'>lo0bits</a>(&amp;y))) <font color='red'>{</font>
<a name='L1132'>            x[0] = y | z &lt;&lt; (32 - k);
<a name='L1133'>            z &gt;&gt;= k;
<a name='L1134'>        <font color='red'>}</font>
<a name='L1135'>        <b>else</b>
<a name='L1136'>            x[0] = y;
<a name='L1137'>        i =
<a name='L1138'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = (x[1] = z) ? 2 : 1;
<a name='L1139'>    <font color='red'>}</font>
<a name='L1140'>    <b>else</b> <font color='red'>{</font>
<a name='L1141'>        k = <a href='../S/3095.html#L551' title='Defined at 551 in Python/dtoa.c.'>lo0bits</a>(&amp;z);
<a name='L1142'>        x[0] = z;
<a name='L1143'>        i =
<a name='L1144'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = 1;
<a name='L1145'>        k += 32;
<a name='L1146'>    <font color='red'>}</font>
<a name='L1147'>    <b>if</b> (de) <font color='red'>{</font>
<a name='L1148'>        *e = de - <a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a> - (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>-1) + k;
<a name='L1149'>        *bits = <a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a> - k;
<a name='L1150'>    <font color='red'>}</font>
<a name='L1151'>    <b>else</b> <font color='red'>{</font>
<a name='L1152'>        *e = de - <a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a> - (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>-1) + 1 + k;
<a name='L1153'>        *bits = 32*i - <a href='../S/3095.html#L519' title='Defined at 519 in Python/dtoa.c.'>hi0bits</a>(x[i-1]);
<a name='L1154'>    <font color='red'>}</font>
<a name='L1155'>    <b>return</b> <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>;
<a name='L1156'><font color='red'>}</font>
<a name='L1157'>
<a name='L1158'><i><font color='green'>/* Compute the ratio of two Bigints, as a double.  The result may have an</font></i>
<a name='L1159'><i><font color='green'>   error of up to 2.5 ulps. */</font></i>
<a name='L1160'>
<a name='L1161'><b>static</b> <b>double</b>
<a name='L1162'><a href='../R/9963.html' title='Multiple refered from 21 places.'>ratio</a>(Bigint *a, Bigint *b)
<a name='L1163'><font color='red'>{</font>
<a name='L1164'>    <a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> da, db;
<a name='L1165'>    <b>int</b> k, ka, kb;
<a name='L1166'>
<a name='L1167'>    <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;da) = <a href='../S/3095.html#L1000' title='Defined at 1000 in Python/dtoa.c.'>b2d</a>(a, &amp;ka);
<a name='L1168'>    <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;db) = <a href='../S/3095.html#L1000' title='Defined at 1000 in Python/dtoa.c.'>b2d</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, &amp;kb);
<a name='L1169'>    k = ka - kb + 32*(a-&gt;wds - <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds);
<a name='L1170'>    <b>if</b> (k &gt; 0)
<a name='L1171'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;da) += k*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L1172'>    <b>else</b> <font color='red'>{</font>
<a name='L1173'>        k = -k;
<a name='L1174'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;db) += k*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L1175'>    <font color='red'>}</font>
<a name='L1176'>    <b>return</b> <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;da) / <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;db);
<a name='L1177'><font color='red'>}</font>
<a name='L1178'>
<a name='L1179'><b>static</b> <b>const</b> <b>double</b>
<a name='L1180'>tens[] = <font color='red'>{</font>
<a name='L1181'>    1e0, 1e1, 1e2, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9,
<a name='L1182'>    1e10, 1e11, 1e12, 1e13, 1e14, 1e15, 1e16, 1e17, 1e18, 1e19,
<a name='L1183'>    1e20, 1e21, 1e22
<a name='L1184'><font color='red'>}</font>;
<a name='L1185'>
<a name='L1186'><b>static</b> <b>const</b> <b>double</b>
<a name='L1187'>bigtens[] = <font color='red'>{</font> 1e16, 1e32, 1e64, 1e128, 1e256 <font color='red'>}</font>;
<a name='L1188'><b>static</b> <b>const</b> <b>double</b> tinytens[] = <font color='red'>{</font> 1e-16, 1e-32, 1e-64, 1e-128,
<a name='L1189'>                                   9007199254740992.*9007199254740992.e-256
<a name='L1190'>                                   <i><font color='green'>/* = 2^106 * 1e-256 */</font></i>
<a name='L1191'><font color='red'>}</font>;
<a name='L1192'><i><font color='green'>/* The factor of 2^53 in tinytens[4] helps us avoid setting the underflow */</font></i>
<a name='L1193'><i><font color='green'>/* flag unnecessarily.  It leads to a song and dance at the end of strtod. */</font></i>
<a name='L1194'><font color='darkred'>#define</font> <a href='../S/3095.html#L1755' title='Refered from 1755 in Python/dtoa.c.'>Scale_Bit</a> 0x10
<a name='L1195'><font color='darkred'>#define</font> <a href='../R/9174.html' title='Multiple refered from 2 places.'>n_bigtens</a> 5
<a name='L1196'>
<a name='L1197'><font color='darkred'>#define</font> ULbits 32
<a name='L1198'><font color='darkred'>#define</font> kshift 5
<a name='L1199'><font color='darkred'>#define</font> <a href='../S/3095.html#L1208' title='Refered from 1208 in Python/dtoa.c.'>kmask</a> 31
<a name='L1200'>
<a name='L1201'>
<a name='L1202'><b>static</b> <b>int</b>
<a name='L1203'><a href='../R/7477.html' title='Multiple refered from 2 places.'>dshift</a>(Bigint *b, <b>int</b> p2)
<a name='L1204'><font color='red'>{</font>
<a name='L1205'>    <b>int</b> rv = <a href='../S/3095.html#L519' title='Defined at 519 in Python/dtoa.c.'>hi0bits</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds-1]) - 4;
<a name='L1206'>    <b>if</b> (p2 &gt; 0)
<a name='L1207'>        rv -= p2;
<a name='L1208'>    <b>return</b> rv &amp; <a href='../S/3095.html#L1199' title='Defined at 1199 in Python/dtoa.c.'>kmask</a>;
<a name='L1209'><font color='red'>}</font>
<a name='L1210'>
<a name='L1211'><i><font color='green'>/* special case of Bigint division.  The quotient is always in the range 0 &lt;=</font></i>
<a name='L1212'><i><font color='green'>   quotient &lt; 10, and on entry the divisor S is normalized so that its top 4</font></i>
<a name='L1213'><i><font color='green'>   bits (28--31) are zero and bit 27 is set. */</font></i>
<a name='L1214'>
<a name='L1215'><b>static</b> <b>int</b>
<a name='L1216'><a href='../R/9920.html' title='Multiple refered from 3 places.'>quorem</a>(Bigint *b, Bigint *<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>)
<a name='L1217'><font color='red'>{</font>
<a name='L1218'>    <b>int</b> n;
<a name='L1219'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> *bx, *bxe, q, *sx, *sxe;
<a name='L1220'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L1221'>    <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a> borrow, carry, y, ys;
<a name='L1222'><font color='darkred'>#else</font>
<a name='L1223'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> borrow, carry, y, ys;
<a name='L1224'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> si, z, zs;
<a name='L1225'><font color='darkred'>#endif</font>
<a name='L1226'>
<a name='L1227'>    n = <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>-&gt;wds;
<a name='L1228'><font color='darkred'>#ifdef</font> <a href='../D/728.html' title='Multiple defined in 2 places.'>DEBUG</a>
<a name='L1229'>    <i><font color='green'>/*debug*/</font></i> <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds &gt; n)
<a name='L1230'>        <i><font color='green'>/*debug*/</font></i>       <a href='../S/3095.html#L175' title='Defined at 175 in Python/dtoa.c.'>Bug</a>("oversize b in quorem");
<a name='L1231'><font color='darkred'>#endif</font>
<a name='L1232'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds &lt; n)
<a name='L1233'>        <b>return</b> 0;
<a name='L1234'>    sx = <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>-&gt;x;
<a name='L1235'>    sxe = sx + --n;
<a name='L1236'>    bx = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L1237'>    bxe = bx + n;
<a name='L1238'>    q = *bxe / (*sxe + 1);      <i><font color='green'>/* ensure q &lt;= true quotient */</font></i>
<a name='L1239'><font color='darkred'>#ifdef</font> <a href='../D/728.html' title='Multiple defined in 2 places.'>DEBUG</a>
<a name='L1240'>    <i><font color='green'>/*debug*/</font></i> <b>if</b> (q &gt; 9)
<a name='L1241'>        <i><font color='green'>/*debug*/</font></i>       <a href='../S/3095.html#L175' title='Defined at 175 in Python/dtoa.c.'>Bug</a>("oversized quotient in quorem");
<a name='L1242'><font color='darkred'>#endif</font>
<a name='L1243'>    <b>if</b> (q) <font color='red'>{</font>
<a name='L1244'>        borrow = 0;
<a name='L1245'>        carry = 0;
<a name='L1246'>        <b>do</b> <font color='red'>{</font>
<a name='L1247'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L1248'>            ys = *sx++ * (<a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>)q + carry;
<a name='L1249'>            carry = ys &gt;&gt; 32;
<a name='L1250'>            y = *bx - (ys &amp; <a href='../S/3095.html#L276' title='Defined at 276 in Python/dtoa.c.'>FFFFFFFF</a>) - borrow;
<a name='L1251'>            borrow = y &gt;&gt; 32 &amp; (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)1;
<a name='L1252'>            *bx++ = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)(y &amp; <a href='../S/3095.html#L276' title='Defined at 276 in Python/dtoa.c.'>FFFFFFFF</a>);
<a name='L1253'><font color='darkred'>#else</font>
<a name='L1254'>            si = *sx++;
<a name='L1255'>            ys = (si &amp; 0xffff) * q + carry;
<a name='L1256'>            zs = (si &gt;&gt; 16) * q + (ys &gt;&gt; 16);
<a name='L1257'>            carry = zs &gt;&gt; 16;
<a name='L1258'>            y = (*bx &amp; 0xffff) - (ys &amp; 0xffff) - borrow;
<a name='L1259'>            borrow = (y &amp; 0x10000) &gt;&gt; 16;
<a name='L1260'>            z = (*bx &gt;&gt; 16) - (zs &amp; 0xffff) - borrow;
<a name='L1261'>            borrow = (z &amp; 0x10000) &gt;&gt; 16;
<a name='L1262'>            <a href='../D/5102.html' title='Multiple defined in 2 places.'>Storeinc</a>(bx, z, y);
<a name='L1263'><font color='darkred'>#endif</font>
<a name='L1264'>        <font color='red'>}</font>
<a name='L1265'>        <b>while</b>(sx &lt;= sxe);
<a name='L1266'>        <b>if</b> (!*bxe) <font color='red'>{</font>
<a name='L1267'>            bx = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L1268'>            <b>while</b>(--bxe &gt; bx &amp;&amp; !*bxe)
<a name='L1269'>                --n;
<a name='L1270'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = n;
<a name='L1271'>        <font color='red'>}</font>
<a name='L1272'>    <font color='red'>}</font>
<a name='L1273'>    <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>) &gt;= 0) <font color='red'>{</font>
<a name='L1274'>        q++;
<a name='L1275'>        borrow = 0;
<a name='L1276'>        carry = 0;
<a name='L1277'>        bx = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L1278'>        sx = <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>-&gt;x;
<a name='L1279'>        <b>do</b> <font color='red'>{</font>
<a name='L1280'><font color='darkred'>#ifdef</font> <a href='../D/5334.html' title='Multiple defined in 2 places.'>ULLong</a>
<a name='L1281'>            ys = *sx++ + carry;
<a name='L1282'>            carry = ys &gt;&gt; 32;
<a name='L1283'>            y = *bx - (ys &amp; <a href='../S/3095.html#L276' title='Defined at 276 in Python/dtoa.c.'>FFFFFFFF</a>) - borrow;
<a name='L1284'>            borrow = y &gt;&gt; 32 &amp; (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)1;
<a name='L1285'>            *bx++ = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)(y &amp; <a href='../S/3095.html#L276' title='Defined at 276 in Python/dtoa.c.'>FFFFFFFF</a>);
<a name='L1286'><font color='darkred'>#else</font>
<a name='L1287'>            si = *sx++;
<a name='L1288'>            ys = (si &amp; 0xffff) + carry;
<a name='L1289'>            zs = (si &gt;&gt; 16) + (ys &gt;&gt; 16);
<a name='L1290'>            carry = zs &gt;&gt; 16;
<a name='L1291'>            y = (*bx &amp; 0xffff) - (ys &amp; 0xffff) - borrow;
<a name='L1292'>            borrow = (y &amp; 0x10000) &gt;&gt; 16;
<a name='L1293'>            z = (*bx &gt;&gt; 16) - (zs &amp; 0xffff) - borrow;
<a name='L1294'>            borrow = (z &amp; 0x10000) &gt;&gt; 16;
<a name='L1295'>            <a href='../D/5102.html' title='Multiple defined in 2 places.'>Storeinc</a>(bx, z, y);
<a name='L1296'><font color='darkred'>#endif</font>
<a name='L1297'>        <font color='red'>}</font>
<a name='L1298'>        <b>while</b>(sx &lt;= sxe);
<a name='L1299'>        bx = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x;
<a name='L1300'>        bxe = bx + n;
<a name='L1301'>        <b>if</b> (!*bxe) <font color='red'>{</font>
<a name='L1302'>            <b>while</b>(--bxe &gt; bx &amp;&amp; !*bxe)
<a name='L1303'>                --n;
<a name='L1304'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds = n;
<a name='L1305'>        <font color='red'>}</font>
<a name='L1306'>    <font color='red'>}</font>
<a name='L1307'>    <b>return</b> q;
<a name='L1308'><font color='red'>}</font>
<a name='L1309'>
<a name='L1310'><i><font color='green'>/* sulp(x) is a version of ulp(x) that takes bc.scale into account.</font></i>
<a name='L1311'><i><font color='green'></font></i>
<a name='L1312'><i><font color='green'>   Assuming that x is finite and nonnegative (positive zero is fine</font></i>
<a name='L1313'><i><font color='green'>   here) and x / 2^bc.scale is exactly representable as a double,</font></i>
<a name='L1314'><i><font color='green'>   sulp(x) is equivalent to 2^bc.scale * ulp(x / 2^bc.scale). */</font></i>
<a name='L1315'>
<a name='L1316'><b>static</b> <b>double</b>
<a name='L1317'><a href='../R/10624.html' title='Multiple refered from 4 places.'>sulp</a>(<a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> *x, BCinfo *bc)
<a name='L1318'><font color='red'>{</font>
<a name='L1319'>    <a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> u;
<a name='L1320'>
<a name='L1321'>    <b>if</b> (bc-&gt;scale &amp;&amp; 2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a> + 1 &gt; (<b>int</b>)((<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(x) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) &gt;&gt; <a href='../S/3095.html#L228' title='Defined at 228 in Python/dtoa.c.'>Exp_shift</a>)) <font color='red'>{</font>
<a name='L1322'>        <i><font color='green'>/* rv/2^bc-&gt;scale is subnormal */</font></i>
<a name='L1323'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) = (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>+2)*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L1324'>        <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;u) = 0;
<a name='L1325'>        <b>return</b> u.d;
<a name='L1326'>    <font color='red'>}</font>
<a name='L1327'>    <b>else</b> <font color='red'>{</font>
<a name='L1328'>        <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(x) || <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(x)); <i><font color='green'>/* x != 0.0 */</font></i>
<a name='L1329'>        <b>return</b> <a href='../S/3095.html#L986' title='Defined at 986 in Python/dtoa.c.'>ulp</a>(x);
<a name='L1330'>    <font color='red'>}</font>
<a name='L1331'><font color='red'>}</font>
<a name='L1332'>
<a name='L1333'><i><font color='green'>/* The bigcomp function handles some hard cases for strtod, for inputs</font></i>
<a name='L1334'><i><font color='green'>   with more than STRTOD_DIGLIM digits.  It's called once an initial</font></i>
<a name='L1335'><i><font color='green'>   estimate for the double corresponding to the input string has</font></i>
<a name='L1336'><i><font color='green'>   already been obtained by the code in _Py_dg_strtod.</font></i>
<a name='L1337'><i><font color='green'></font></i>
<a name='L1338'><i><font color='green'>   The bigcomp function is only called after _Py_dg_strtod has found a</font></i>
<a name='L1339'><i><font color='green'>   double value rv such that either rv or rv + 1ulp represents the</font></i>
<a name='L1340'><i><font color='green'>   correctly rounded value corresponding to the original string.  It</font></i>
<a name='L1341'><i><font color='green'>   determines which of these two values is the correct one by</font></i>
<a name='L1342'><i><font color='green'>   computing the decimal digits of rv + 0.5ulp and comparing them with</font></i>
<a name='L1343'><i><font color='green'>   the corresponding digits of s0.</font></i>
<a name='L1344'><i><font color='green'></font></i>
<a name='L1345'><i><font color='green'>   In the following, write dv for the absolute value of the number represented</font></i>
<a name='L1346'><i><font color='green'>   by the input string.</font></i>
<a name='L1347'><i><font color='green'></font></i>
<a name='L1348'><i><font color='green'>   Inputs:</font></i>
<a name='L1349'><i><font color='green'></font></i>
<a name='L1350'><i><font color='green'>     s0 points to the first significant digit of the input string.</font></i>
<a name='L1351'><i><font color='green'></font></i>
<a name='L1352'><i><font color='green'>     rv is a (possibly scaled) estimate for the closest double value to the</font></i>
<a name='L1353'><i><font color='green'>        value represented by the original input to _Py_dg_strtod.  If</font></i>
<a name='L1354'><i><font color='green'>        bc-&gt;scale is nonzero, then rv/2^(bc-&gt;scale) is the approximation to</font></i>
<a name='L1355'><i><font color='green'>        the input value.</font></i>
<a name='L1356'><i><font color='green'></font></i>
<a name='L1357'><i><font color='green'>     bc is a struct containing information gathered during the parsing and</font></i>
<a name='L1358'><i><font color='green'>        estimation steps of _Py_dg_strtod.  Description of fields follows:</font></i>
<a name='L1359'><i><font color='green'></font></i>
<a name='L1360'><i><font color='green'>        bc-&gt;e0 gives the exponent of the input value, such that dv = (integer</font></i>
<a name='L1361'><i><font color='green'>           given by the bd-&gt;nd digits of s0) * 10**e0</font></i>
<a name='L1362'><i><font color='green'></font></i>
<a name='L1363'><i><font color='green'>        bc-&gt;nd gives the total number of significant digits of s0.  It will</font></i>
<a name='L1364'><i><font color='green'>           be at least 1.</font></i>
<a name='L1365'><i><font color='green'></font></i>
<a name='L1366'><i><font color='green'>        bc-&gt;nd0 gives the number of significant digits of s0 before the</font></i>
<a name='L1367'><i><font color='green'>           decimal separator.  If there's no decimal separator, bc-&gt;nd0 ==</font></i>
<a name='L1368'><i><font color='green'>           bc-&gt;nd.</font></i>
<a name='L1369'><i><font color='green'></font></i>
<a name='L1370'><i><font color='green'>        bc-&gt;scale is the value used to scale rv to avoid doing arithmetic with</font></i>
<a name='L1371'><i><font color='green'>           subnormal values.  It's either 0 or 2*P (=106).</font></i>
<a name='L1372'><i><font color='green'></font></i>
<a name='L1373'><i><font color='green'>   Outputs:</font></i>
<a name='L1374'><i><font color='green'></font></i>
<a name='L1375'><i><font color='green'>     On successful exit, rv/2^(bc-&gt;scale) is the closest double to dv.</font></i>
<a name='L1376'><i><font color='green'></font></i>
<a name='L1377'><i><font color='green'>     Returns 0 on success, -1 on failure (e.g., due to a failed malloc call). */</font></i>
<a name='L1378'>
<a name='L1379'><b>static</b> <b>int</b>
<a name='L1380'><a href='../S/3095.html#L2196' title='Refered from 2196 in Python/dtoa.c.'>bigcomp</a>(<a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> *rv, <b>const</b> <b>char</b> *s0, BCinfo *bc)
<a name='L1381'><font color='red'>{</font>
<a name='L1382'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, *d;
<a name='L1383'>    <b>int</b> b2, d2, dd, i, nd, nd0, odd, p2, p5;
<a name='L1384'>
<a name='L1385'>    nd = bc-&gt;nd;
<a name='L1386'>    nd0 = bc-&gt;nd0;
<a name='L1387'>    p5 = nd + bc-&gt;e0;
<a name='L1388'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L1056' title='Defined at 1056 in Python/dtoa.c.'>sd2b</a>(rv, bc-&gt;scale, &amp;p2);
<a name='L1389'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1390'>        <b>return</b> -1;
<a name='L1391'>
<a name='L1392'>    <i><font color='green'>/* record whether the lsb of rv/2^(bc-&gt;scale) is odd:  in the exact halfway</font></i>
<a name='L1393'><i><font color='green'>       case, this is used for round to even. */</font></i>
<a name='L1394'>    odd = <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] &amp; 1;
<a name='L1395'>
<a name='L1396'>    <i><font color='green'>/* left shift b by 1 bit and or a 1 into the least significant bit;</font></i>
<a name='L1397'><i><font color='green'>       this gives us b * 2**p2 = rv/2^(bc-&gt;scale) + 0.5 ulp. */</font></i>
<a name='L1398'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 1);
<a name='L1399'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1400'>        <b>return</b> -1;
<a name='L1401'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] |= 1;
<a name='L1402'>    p2--;
<a name='L1403'>
<a name='L1404'>    p2 -= p5;
<a name='L1405'>    d = <a href='../S/3095.html#L596' title='Defined at 596 in Python/dtoa.c.'>i2b</a>(1);
<a name='L1406'>    <b>if</b> (d == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1407'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1408'>        <b>return</b> -1;
<a name='L1409'>    <font color='red'>}</font>
<a name='L1410'>    <i><font color='green'>/* Arrange for convenient computation of quotients:</font></i>
<a name='L1411'><i><font color='green'>     * shift left if necessary so divisor has 4 leading 0 bits.</font></i>
<a name='L1412'><i><font color='green'>     */</font></i>
<a name='L1413'>    <b>if</b> (p5 &gt; 0) <font color='red'>{</font>
<a name='L1414'>        d = <a href='../D/10530.html' title='Multiple defined in 2 places.'>pow5mult</a>(d, p5);
<a name='L1415'>        <b>if</b> (d == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1416'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1417'>            <b>return</b> -1;
<a name='L1418'>        <font color='red'>}</font>
<a name='L1419'>    <font color='red'>}</font>
<a name='L1420'>    <b>else</b> <b>if</b> (p5 &lt; 0) <font color='red'>{</font>
<a name='L1421'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../D/10530.html' title='Multiple defined in 2 places.'>pow5mult</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, -p5);
<a name='L1422'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1423'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(d);
<a name='L1424'>            <b>return</b> -1;
<a name='L1425'>        <font color='red'>}</font>
<a name='L1426'>    <font color='red'>}</font>
<a name='L1427'>    <b>if</b> (p2 &gt; 0) <font color='red'>{</font>
<a name='L1428'>        b2 = p2;
<a name='L1429'>        d2 = 0;
<a name='L1430'>    <font color='red'>}</font>
<a name='L1431'>    <b>else</b> <font color='red'>{</font>
<a name='L1432'>        b2 = 0;
<a name='L1433'>        d2 = -p2;
<a name='L1434'>    <font color='red'>}</font>
<a name='L1435'>    i = <a href='../S/3095.html#L1203' title='Defined at 1203 in Python/dtoa.c.'>dshift</a>(d, d2);
<a name='L1436'>    <b>if</b> ((b2 += i) &gt; 0) <font color='red'>{</font>
<a name='L1437'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, b2);
<a name='L1438'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1439'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(d);
<a name='L1440'>            <b>return</b> -1;
<a name='L1441'>        <font color='red'>}</font>
<a name='L1442'>    <font color='red'>}</font>
<a name='L1443'>    <b>if</b> ((d2 += i) &gt; 0) <font color='red'>{</font>
<a name='L1444'>        d = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(d, d2);
<a name='L1445'>        <b>if</b> (d == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1446'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1447'>            <b>return</b> -1;
<a name='L1448'>        <font color='red'>}</font>
<a name='L1449'>    <font color='red'>}</font>
<a name='L1450'>
<a name='L1451'>    <i><font color='green'>/* Compare s0 with b/d: set dd to -1, 0, or 1 according as s0 &lt; b/d, s0 ==</font></i>
<a name='L1452'><i><font color='green'>     * b/d, or s0 &gt; b/d.  Here the digits of s0 are thought of as representing</font></i>
<a name='L1453'><i><font color='green'>     * a number in the range [0.1, 1). */</font></i>
<a name='L1454'>    <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, d) &gt;= 0)
<a name='L1455'>        <i><font color='green'>/* b/d &gt;= 1 */</font></i>
<a name='L1456'>        dd = -1;
<a name='L1457'>    <b>else</b> <font color='red'>{</font>
<a name='L1458'>        i = 0;
<a name='L1459'>        <b>for</b>(;;) <font color='red'>{</font>
<a name='L1460'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 10, 0);
<a name='L1461'>            <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1462'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(d);
<a name='L1463'>                <b>return</b> -1;
<a name='L1464'>            <font color='red'>}</font>
<a name='L1465'>            dd = s0[i &lt; nd0 ? i : i+1] - '0' - <a href='../S/3095.html#L1216' title='Defined at 1216 in Python/dtoa.c.'>quorem</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, d);
<a name='L1466'>            i++;
<a name='L1467'>
<a name='L1468'>            <b>if</b> (dd)
<a name='L1469'>                <b>break</b>;
<a name='L1470'>            <b>if</b> (!<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] &amp;&amp; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds == 1) <font color='red'>{</font>
<a name='L1471'>                <i><font color='green'>/* b/d == 0 */</font></i>
<a name='L1472'>                dd = i &lt; nd;
<a name='L1473'>                <b>break</b>;
<a name='L1474'>            <font color='red'>}</font>
<a name='L1475'>            <b>if</b> (!(i &lt; nd)) <font color='red'>{</font>
<a name='L1476'>                <i><font color='green'>/* b/d != 0, but digits of s0 exhausted */</font></i>
<a name='L1477'>                dd = -1;
<a name='L1478'>                <b>break</b>;
<a name='L1479'>            <font color='red'>}</font>
<a name='L1480'>        <font color='red'>}</font>
<a name='L1481'>    <font color='red'>}</font>
<a name='L1482'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L1483'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(d);
<a name='L1484'>    <b>if</b> (dd &gt; 0 || (dd == 0 &amp;&amp; odd))
<a name='L1485'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(rv) += <a href='../S/3095.html#L1317' title='Defined at 1317 in Python/dtoa.c.'>sulp</a>(rv, bc);
<a name='L1486'>    <b>return</b> 0;
<a name='L1487'><font color='red'>}</font>
<a name='L1488'>
<a name='L1489'><b>double</b>
<a name='L1490'><a href='../R/5625.html' title='Multiple refered from 2 places.'>_Py_dg_strtod</a>(<b>const</b> <b>char</b> *s00, <b>char</b> **se)
<a name='L1491'><font color='red'>{</font>
<a name='L1492'>    <b>int</b> bb2, bb5, bbe, bd2, bd5, bs2, c, dsign, e, e1, <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1493'>    <b>int</b> esign, i, j, k, lz, nd, nd0, odd, sign;
<a name='L1494'>    <b>const</b> <b>char</b> *s, *s0, *s1;
<a name='L1495'>    <b>double</b> aadj, aadj1;
<a name='L1496'>    <a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> aadj2, adj, rv, rv0;
<a name='L1497'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> y, z, abs_exp;
<a name='L1498'>    <a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a> <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L1499'>    <a href='../S/3095.html#L270' title='Defined at 270 in Python/dtoa.c.'>BCinfo</a> bc;
<a name='L1500'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *bb, *bb1, *bd, *bd0, *bs, *delta;
<a name='L1501'>
<a name='L1502'>    <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) = 0.;
<a name='L1503'>
<a name='L1504'>    <i><font color='green'>/* Start parsing. */</font></i>
<a name='L1505'>    c = *(s = s00);
<a name='L1506'>
<a name='L1507'>    <i><font color='green'>/* Parse optional sign, if present. */</font></i>
<a name='L1508'>    sign = 0;
<a name='L1509'>    <b>switch</b> (c) <font color='red'>{</font>
<a name='L1510'>    <b>case</b> '-':
<a name='L1511'>        sign = 1;
<a name='L1512'>        <i><font color='green'>/* no break */</font></i>
<a name='L1513'>    <b>case</b> '+':
<a name='L1514'>        c = *++s;
<a name='L1515'>    <font color='red'>}</font>
<a name='L1516'>
<a name='L1517'>    <i><font color='green'>/* Skip leading zeros: lz is true iff there were leading zeros. */</font></i>
<a name='L1518'>    s1 = s;
<a name='L1519'>    <b>while</b> (c == '0')
<a name='L1520'>        c = *++s;
<a name='L1521'>    lz = s != s1;
<a name='L1522'>
<a name='L1523'>    <i><font color='green'>/* Point s0 at the first nonzero digit (if any).  nd0 will be the position</font></i>
<a name='L1524'><i><font color='green'>       of the point relative to s0.  nd will be the total number of digits</font></i>
<a name='L1525'><i><font color='green'>       ignoring leading zeros. */</font></i>
<a name='L1526'>    s0 = s1 = s;
<a name='L1527'>    <b>while</b> ('0' &lt;= c &amp;&amp; c &lt;= '9')
<a name='L1528'>        c = *++s;
<a name='L1529'>    nd0 = nd = s - s1;
<a name='L1530'>
<a name='L1531'>    <i><font color='green'>/* Parse decimal point and following digits. */</font></i>
<a name='L1532'>    <b>if</b> (c == '.') <font color='red'>{</font>
<a name='L1533'>        c = *++s;
<a name='L1534'>        <b>if</b> (!nd) <font color='red'>{</font>
<a name='L1535'>            s1 = s;
<a name='L1536'>            <b>while</b> (c == '0')
<a name='L1537'>                c = *++s;
<a name='L1538'>            lz = lz || s != s1;
<a name='L1539'>            nd0 -= s - s1;
<a name='L1540'>            s0 = s;
<a name='L1541'>        <font color='red'>}</font>
<a name='L1542'>        s1 = s;
<a name='L1543'>        <b>while</b> ('0' &lt;= c &amp;&amp; c &lt;= '9')
<a name='L1544'>            c = *++s;
<a name='L1545'>        nd += s - s1;
<a name='L1546'>    <font color='red'>}</font>
<a name='L1547'>
<a name='L1548'>    <i><font color='green'>/* Now lz is true if and only if there were leading zero digits, and nd</font></i>
<a name='L1549'><i><font color='green'>       gives the total number of digits ignoring leading zeros.  A valid input</font></i>
<a name='L1550'><i><font color='green'>       must have at least one digit. */</font></i>
<a name='L1551'>    <b>if</b> (!nd &amp;&amp; !lz) <font color='red'>{</font>
<a name='L1552'>        <b>if</b> (se)
<a name='L1553'>            *se = (<b>char</b> *)s00;
<a name='L1554'>        <b>goto</b> parse_error;
<a name='L1555'>    <font color='red'>}</font>
<a name='L1556'>
<a name='L1557'>    <i><font color='green'>/* Parse exponent. */</font></i>
<a name='L1558'>    e = 0;
<a name='L1559'>    <b>if</b> (c == 'e' || c == 'E') <font color='red'>{</font>
<a name='L1560'>        s00 = s;
<a name='L1561'>        c = *++s;
<a name='L1562'>
<a name='L1563'>        <i><font color='green'>/* Exponent sign. */</font></i>
<a name='L1564'>        esign = 0;
<a name='L1565'>        <b>switch</b> (c) <font color='red'>{</font>
<a name='L1566'>        <b>case</b> '-':
<a name='L1567'>            esign = 1;
<a name='L1568'>            <i><font color='green'>/* no break */</font></i>
<a name='L1569'>        <b>case</b> '+':
<a name='L1570'>            c = *++s;
<a name='L1571'>        <font color='red'>}</font>
<a name='L1572'>
<a name='L1573'>        <i><font color='green'>/* Skip zeros.  lz is true iff there are leading zeros. */</font></i>
<a name='L1574'>        s1 = s;
<a name='L1575'>        <b>while</b> (c == '0')
<a name='L1576'>            c = *++s;
<a name='L1577'>        lz = s != s1;
<a name='L1578'>
<a name='L1579'>        <i><font color='green'>/* Get absolute value of the exponent. */</font></i>
<a name='L1580'>        s1 = s;
<a name='L1581'>        abs_exp = 0;
<a name='L1582'>        <b>while</b> ('0' &lt;= c &amp;&amp; c &lt;= '9') <font color='red'>{</font>
<a name='L1583'>            abs_exp = 10*abs_exp + (c - '0');
<a name='L1584'>            c = *++s;
<a name='L1585'>        <font color='red'>}</font>
<a name='L1586'>
<a name='L1587'>        <i><font color='green'>/* abs_exp will be correct modulo 2**32.  But 10**9 &lt; 2**32, so if</font></i>
<a name='L1588'><i><font color='green'>           there are at most 9 significant exponent digits then overflow is</font></i>
<a name='L1589'><i><font color='green'>           impossible. */</font></i>
<a name='L1590'>        <b>if</b> (s - s1 &gt; 9 || abs_exp &gt; <a href='../S/3095.html#L207' title='Defined at 207 in Python/dtoa.c.'>MAX_ABS_EXP</a>)
<a name='L1591'>            e = (<b>int</b>)<a href='../S/3095.html#L207' title='Defined at 207 in Python/dtoa.c.'>MAX_ABS_EXP</a>;
<a name='L1592'>        <b>else</b>
<a name='L1593'>            e = (<b>int</b>)abs_exp;
<a name='L1594'>        <b>if</b> (esign)
<a name='L1595'>            e = -e;
<a name='L1596'>
<a name='L1597'>        <i><font color='green'>/* A valid exponent must have at least one digit. */</font></i>
<a name='L1598'>        <b>if</b> (s == s1 &amp;&amp; !lz)
<a name='L1599'>            s = s00;
<a name='L1600'>    <font color='red'>}</font>
<a name='L1601'>
<a name='L1602'>    <i><font color='green'>/* Adjust exponent to take into account position of the point. */</font></i>
<a name='L1603'>    e -= nd - nd0;
<a name='L1604'>    <b>if</b> (nd0 &lt;= 0)
<a name='L1605'>        nd0 = nd;
<a name='L1606'>
<a name='L1607'>    <i><font color='green'>/* Finished parsing.  Set se to indicate how far we parsed */</font></i>
<a name='L1608'>    <b>if</b> (se)
<a name='L1609'>        *se = (<b>char</b> *)s;
<a name='L1610'>
<a name='L1611'>    <i><font color='green'>/* If all digits were zero, exit with return value +-0.0.  Otherwise,</font></i>
<a name='L1612'><i><font color='green'>       strip trailing zeros: scan back until we hit a nonzero digit. */</font></i>
<a name='L1613'>    <b>if</b> (!nd)
<a name='L1614'>        <b>goto</b> ret;
<a name='L1615'>    <b>for</b> (i = nd; i &gt; 0; ) <font color='red'>{</font>
<a name='L1616'>        --i;
<a name='L1617'>        <b>if</b> (s0[i &lt; nd0 ? i : i+1] != '0') <font color='red'>{</font>
<a name='L1618'>            ++i;
<a name='L1619'>            <b>break</b>;
<a name='L1620'>        <font color='red'>}</font>
<a name='L1621'>    <font color='red'>}</font>
<a name='L1622'>    e += nd - i;
<a name='L1623'>    nd = i;
<a name='L1624'>    <b>if</b> (nd0 &gt; nd)
<a name='L1625'>        nd0 = nd;
<a name='L1626'>
<a name='L1627'>    <i><font color='green'>/* Summary of parsing results.  After parsing, and dealing with zero</font></i>
<a name='L1628'><i><font color='green'>     * inputs, we have values s0, nd0, nd, e, sign, where:</font></i>
<a name='L1629'><i><font color='green'>     *</font></i>
<a name='L1630'><i><font color='green'>     *  - s0 points to the first significant digit of the input string</font></i>
<a name='L1631'><i><font color='green'>     *</font></i>
<a name='L1632'><i><font color='green'>     *  - nd is the total number of significant digits (here, and</font></i>
<a name='L1633'><i><font color='green'>     *    below, 'significant digits' means the set of digits of the</font></i>
<a name='L1634'><i><font color='green'>     *    significand of the input that remain after ignoring leading</font></i>
<a name='L1635'><i><font color='green'>     *    and trailing zeros).</font></i>
<a name='L1636'><i><font color='green'>     *</font></i>
<a name='L1637'><i><font color='green'>     *  - nd0 indicates the position of the decimal point, if present; it</font></i>
<a name='L1638'><i><font color='green'>     *    satisfies 1 &lt;= nd0 &lt;= nd.  The nd significant digits are in</font></i>
<a name='L1639'><i><font color='green'>     *    s0[0:nd0] and s0[nd0+1:nd+1] using the usual Python half-open slice</font></i>
<a name='L1640'><i><font color='green'>     *    notation.  (If nd0 &lt; nd, then s0[nd0] contains a '.'  character; if</font></i>
<a name='L1641'><i><font color='green'>     *    nd0 == nd, then s0[nd0] could be any non-digit character.)</font></i>
<a name='L1642'><i><font color='green'>     *</font></i>
<a name='L1643'><i><font color='green'>     *  - e is the adjusted exponent: the absolute value of the number</font></i>
<a name='L1644'><i><font color='green'>     *    represented by the original input string is n * 10**e, where</font></i>
<a name='L1645'><i><font color='green'>     *    n is the integer represented by the concatenation of</font></i>
<a name='L1646'><i><font color='green'>     *    s0[0:nd0] and s0[nd0+1:nd+1]</font></i>
<a name='L1647'><i><font color='green'>     *</font></i>
<a name='L1648'><i><font color='green'>     *  - sign gives the sign of the input:  1 for negative, 0 for positive</font></i>
<a name='L1649'><i><font color='green'>     *</font></i>
<a name='L1650'><i><font color='green'>     *  - the first and last significant digits are nonzero</font></i>
<a name='L1651'><i><font color='green'>     */</font></i>
<a name='L1652'>
<a name='L1653'>    <i><font color='green'>/* put first DBL_DIG+1 digits into integer y and z.</font></i>
<a name='L1654'><i><font color='green'>     *</font></i>
<a name='L1655'><i><font color='green'>     *  - y contains the value represented by the first min(9, nd)</font></i>
<a name='L1656'><i><font color='green'>     *    significant digits</font></i>
<a name='L1657'><i><font color='green'>     *</font></i>
<a name='L1658'><i><font color='green'>     *  - if nd &gt; 9, z contains the value represented by significant digits</font></i>
<a name='L1659'><i><font color='green'>     *    with indices in [9, min(16, nd)).  So y * 10**(min(16, nd) - 9) + z</font></i>
<a name='L1660'><i><font color='green'>     *    gives the value represented by the first min(16, nd) sig. digits.</font></i>
<a name='L1661'><i><font color='green'>     */</font></i>
<a name='L1662'>
<a name='L1663'>    bc.e0 = e1 = e;
<a name='L1664'>    y = z = 0;
<a name='L1665'>    <b>for</b> (i = 0; i &lt; nd; i++) <font color='red'>{</font>
<a name='L1666'>        <b>if</b> (i &lt; 9)
<a name='L1667'>            y = 10*y + s0[i &lt; nd0 ? i : i+1] - '0';
<a name='L1668'>        <b>else</b> <b>if</b> (i &lt; DBL_DIG+1)
<a name='L1669'>            z = 10*z + s0[i &lt; nd0 ? i : i+1] - '0';
<a name='L1670'>        <b>else</b>
<a name='L1671'>            <b>break</b>;
<a name='L1672'>    <font color='red'>}</font>
<a name='L1673'>
<a name='L1674'>    k = nd &lt; DBL_DIG + 1 ? nd : DBL_DIG + 1;
<a name='L1675'>    <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) = y;
<a name='L1676'>    <b>if</b> (k &gt; 9) <font color='red'>{</font>
<a name='L1677'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) = tens[k - 9] * <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) + z;
<a name='L1678'>    <font color='red'>}</font>
<a name='L1679'>    bd0 = 0;
<a name='L1680'>    <b>if</b> (nd &lt;= DBL_DIG
<a name='L1681'>        &amp;&amp; <a href='../D/1352.html' title='Multiple defined in 2 places.'>Flt_Rounds</a> == 1
<a name='L1682'>        ) <font color='red'>{</font>
<a name='L1683'>        <b>if</b> (!e)
<a name='L1684'>            <b>goto</b> ret;
<a name='L1685'>        <b>if</b> (e &gt; 0) <font color='red'>{</font>
<a name='L1686'>            <b>if</b> (e &lt;= <a href='../S/3095.html#L244' title='Defined at 244 in Python/dtoa.c.'>Ten_pmax</a>) <font color='red'>{</font>
<a name='L1687'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) *= tens[e];
<a name='L1688'>                <b>goto</b> ret;
<a name='L1689'>            <font color='red'>}</font>
<a name='L1690'>            i = DBL_DIG - nd;
<a name='L1691'>            <b>if</b> (e &lt;= <a href='../S/3095.html#L244' title='Defined at 244 in Python/dtoa.c.'>Ten_pmax</a> + i) <font color='red'>{</font>
<a name='L1692'>                <i><font color='green'>/* A fancier test would sometimes let us do</font></i>
<a name='L1693'><i><font color='green'>                 * this for larger i values.</font></i>
<a name='L1694'><i><font color='green'>                 */</font></i>
<a name='L1695'>                e -= i;
<a name='L1696'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) *= tens[i];
<a name='L1697'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) *= tens[e];
<a name='L1698'>                <b>goto</b> ret;
<a name='L1699'>            <font color='red'>}</font>
<a name='L1700'>        <font color='red'>}</font>
<a name='L1701'>        <b>else</b> <b>if</b> (e &gt;= -<a href='../S/3095.html#L244' title='Defined at 244 in Python/dtoa.c.'>Ten_pmax</a>) <font color='red'>{</font>
<a name='L1702'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) /= tens[-e];
<a name='L1703'>            <b>goto</b> ret;
<a name='L1704'>        <font color='red'>}</font>
<a name='L1705'>    <font color='red'>}</font>
<a name='L1706'>    e1 += nd - k;
<a name='L1707'>
<a name='L1708'>    bc.scale = 0;
<a name='L1709'>
<a name='L1710'>    <i><font color='green'>/* Get starting approximation = rv * 10**e1 */</font></i>
<a name='L1711'>
<a name='L1712'>    <b>if</b> (e1 &gt; 0) <font color='red'>{</font>
<a name='L1713'>        <b>if</b> ((i = e1 &amp; 15))
<a name='L1714'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) *= tens[i];
<a name='L1715'>        <b>if</b> (e1 &amp;= ~15) <font color='red'>{</font>
<a name='L1716'>            <b>if</b> (e1 &gt; DBL_MAX_10_EXP)
<a name='L1717'>                <b>goto</b> ovfl;
<a name='L1718'>            e1 &gt;&gt;= 4;
<a name='L1719'>            <b>for</b>(j = 0; e1 &gt; 1; j++, e1 &gt;&gt;= 1)
<a name='L1720'>                <b>if</b> (e1 &amp; 1)
<a name='L1721'>                    <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) *= bigtens[j];
<a name='L1722'>            <i><font color='green'>/* The last multiplication could overflow. */</font></i>
<a name='L1723'>            <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) -= <a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L1724'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) *= bigtens[j];
<a name='L1725'>            <b>if</b> ((z = <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>)
<a name='L1726'>                &gt; <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>*(DBL_MAX_EXP+<a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a>-<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>))
<a name='L1727'>                <b>goto</b> ovfl;
<a name='L1728'>            <b>if</b> (z &gt; <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>*(DBL_MAX_EXP+<a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a>-1-<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>)) <font color='red'>{</font>
<a name='L1729'>                <i><font color='green'>/* set to largest number */</font></i>
<a name='L1730'>                <i><font color='green'>/* (Can't trust DBL_MAX) */</font></i>
<a name='L1731'>                <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) = <a href='../S/3095.html#L265' title='Defined at 265 in Python/dtoa.c.'>Big0</a>;
<a name='L1732'>                <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) = <a href='../S/3095.html#L266' title='Defined at 266 in Python/dtoa.c.'>Big1</a>;
<a name='L1733'>            <font color='red'>}</font>
<a name='L1734'>            <b>else</b>
<a name='L1735'>                <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) += <a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L1736'>        <font color='red'>}</font>
<a name='L1737'>    <font color='red'>}</font>
<a name='L1738'>    <b>else</b> <b>if</b> (e1 &lt; 0) <font color='red'>{</font>
<a name='L1739'>        <i><font color='green'>/* The input decimal value lies in [10**e1, 10**(e1+16)).</font></i>
<a name='L1740'><i><font color='green'></font></i>
<a name='L1741'><i><font color='green'>           If e1 &lt;= -512, underflow immediately.</font></i>
<a name='L1742'><i><font color='green'>           If e1 &lt;= -256, set bc.scale to 2*P.</font></i>
<a name='L1743'><i><font color='green'></font></i>
<a name='L1744'><i><font color='green'>           So for input value &lt; 1e-256, bc.scale is always set;</font></i>
<a name='L1745'><i><font color='green'>           for input value &gt;= 1e-240, bc.scale is never set.</font></i>
<a name='L1746'><i><font color='green'>           For input values in [1e-256, 1e-240), bc.scale may or may</font></i>
<a name='L1747'><i><font color='green'>           not be set. */</font></i>
<a name='L1748'>
<a name='L1749'>        e1 = -e1;
<a name='L1750'>        <b>if</b> ((i = e1 &amp; 15))
<a name='L1751'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) /= tens[i];
<a name='L1752'>        <b>if</b> (e1 &gt;&gt;= 4) <font color='red'>{</font>
<a name='L1753'>            <b>if</b> (e1 &gt;= 1 &lt;&lt; <a href='../S/3095.html#L1195' title='Defined at 1195 in Python/dtoa.c.'>n_bigtens</a>)
<a name='L1754'>                <b>goto</b> undfl;
<a name='L1755'>            <b>if</b> (e1 &amp; <a href='../S/3095.html#L1194' title='Defined at 1194 in Python/dtoa.c.'>Scale_Bit</a>)
<a name='L1756'>                bc.scale = 2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>;
<a name='L1757'>            <b>for</b>(j = 0; e1 &gt; 0; j++, e1 &gt;&gt;= 1)
<a name='L1758'>                <b>if</b> (e1 &amp; 1)
<a name='L1759'>                    <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) *= tinytens[j];
<a name='L1760'>            <b>if</b> (bc.scale &amp;&amp; (j = 2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a> + 1 - ((<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>)
<a name='L1761'>                                            &gt;&gt; <a href='../S/3095.html#L228' title='Defined at 228 in Python/dtoa.c.'>Exp_shift</a>)) &gt; 0) <font color='red'>{</font>
<a name='L1762'>                <i><font color='green'>/* scaled rv is denormal; clear j low bits */</font></i>
<a name='L1763'>                <b>if</b> (j &gt;= 32) <font color='red'>{</font>
<a name='L1764'>                    <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) = 0;
<a name='L1765'>                    <b>if</b> (j &gt;= 53)
<a name='L1766'>                        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) = (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>+2)*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L1767'>                    <b>else</b>
<a name='L1768'>                        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp;= 0xffffffff &lt;&lt; (j-32);
<a name='L1769'>                <font color='red'>}</font>
<a name='L1770'>                <b>else</b>
<a name='L1771'>                    <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) &amp;= 0xffffffff &lt;&lt; j;
<a name='L1772'>            <font color='red'>}</font>
<a name='L1773'>            <b>if</b> (!<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv))
<a name='L1774'>                <b>goto</b> undfl;
<a name='L1775'>        <font color='red'>}</font>
<a name='L1776'>    <font color='red'>}</font>
<a name='L1777'>
<a name='L1778'>    <i><font color='green'>/* Now the hard part -- adjusting rv to the correct value.*/</font></i>
<a name='L1779'>
<a name='L1780'>    <i><font color='green'>/* Put digits into bd: true value = bd * 10^e */</font></i>
<a name='L1781'>
<a name='L1782'>    bc.nd = nd;
<a name='L1783'>    bc.nd0 = nd0;       <i><font color='green'>/* Only needed if nd &gt; STRTOD_DIGLIM, but done here */</font></i>
<a name='L1784'>                        <i><font color='green'>/* to silence an erroneous warning about bc.nd0 */</font></i>
<a name='L1785'>                        <i><font color='green'>/* possibly not being initialized. */</font></i>
<a name='L1786'>    <b>if</b> (nd &gt; <a href='../S/3095.html#L200' title='Defined at 200 in Python/dtoa.c.'>STRTOD_DIGLIM</a>) <font color='red'>{</font>
<a name='L1787'>        <i><font color='green'>/* ASSERT(STRTOD_DIGLIM &gt;= 18); 18 == one more than the */</font></i>
<a name='L1788'>        <i><font color='green'>/* minimum number of decimal digits to distinguish double values */</font></i>
<a name='L1789'>        <i><font color='green'>/* in IEEE arithmetic. */</font></i>
<a name='L1790'>
<a name='L1791'>        <i><font color='green'>/* Truncate input to 18 significant digits, then discard any trailing</font></i>
<a name='L1792'><i><font color='green'>           zeros on the result by updating nd, nd0, e and y suitably. (There's</font></i>
<a name='L1793'><i><font color='green'>           no need to update z; it's not reused beyond this point.) */</font></i>
<a name='L1794'>        <b>for</b> (i = 18; i &gt; 0; ) <font color='red'>{</font>
<a name='L1795'>            <i><font color='green'>/* scan back until we hit a nonzero digit.  significant digit 'i'</font></i>
<a name='L1796'><i><font color='green'>            is s0[i] if i &lt; nd0, s0[i+1] if i &gt;= nd0. */</font></i>
<a name='L1797'>            --i;
<a name='L1798'>            <b>if</b> (s0[i &lt; nd0 ? i : i+1] != '0') <font color='red'>{</font>
<a name='L1799'>                ++i;
<a name='L1800'>                <b>break</b>;
<a name='L1801'>            <font color='red'>}</font>
<a name='L1802'>        <font color='red'>}</font>
<a name='L1803'>        e += nd - i;
<a name='L1804'>        nd = i;
<a name='L1805'>        <b>if</b> (nd0 &gt; nd)
<a name='L1806'>            nd0 = nd;
<a name='L1807'>        <b>if</b> (nd &lt; 9) <font color='red'>{</font> <i><font color='green'>/* must recompute y */</font></i>
<a name='L1808'>            y = 0;
<a name='L1809'>            <b>for</b>(i = 0; i &lt; nd0; ++i)
<a name='L1810'>                y = 10*y + s0[i] - '0';
<a name='L1811'>            <b>for</b>(; i &lt; nd; ++i)
<a name='L1812'>                y = 10*y + s0[i+1] - '0';
<a name='L1813'>        <font color='red'>}</font>
<a name='L1814'>    <font color='red'>}</font>
<a name='L1815'>    bd0 = <a href='../S/3095.html#L484' title='Defined at 484 in Python/dtoa.c.'>s2b</a>(s0, nd0, nd, y);
<a name='L1816'>    <b>if</b> (bd0 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1817'>        <b>goto</b> failed_malloc;
<a name='L1818'>
<a name='L1819'>    <i><font color='green'>/* Notation for the comments below.  Write:</font></i>
<a name='L1820'><i><font color='green'></font></i>
<a name='L1821'><i><font color='green'>         - dv for the absolute value of the number represented by the original</font></i>
<a name='L1822'><i><font color='green'>           decimal input string.</font></i>
<a name='L1823'><i><font color='green'></font></i>
<a name='L1824'><i><font color='green'>         - if we've truncated dv, write tdv for the truncated value.</font></i>
<a name='L1825'><i><font color='green'>           Otherwise, set tdv == dv.</font></i>
<a name='L1826'><i><font color='green'></font></i>
<a name='L1827'><i><font color='green'>         - srv for the quantity rv/2^bc.scale; so srv is the current binary</font></i>
<a name='L1828'><i><font color='green'>           approximation to tdv (and dv).  It should be exactly representable</font></i>
<a name='L1829'><i><font color='green'>           in an IEEE 754 double.</font></i>
<a name='L1830'><i><font color='green'>    */</font></i>
<a name='L1831'>
<a name='L1832'>    <b>for</b>(;;) <font color='red'>{</font>
<a name='L1833'>
<a name='L1834'>        <i><font color='green'>/* This is the main correction loop for _Py_dg_strtod.</font></i>
<a name='L1835'><i><font color='green'></font></i>
<a name='L1836'><i><font color='green'>           We've got a decimal value tdv, and a floating-point approximation</font></i>
<a name='L1837'><i><font color='green'>           srv=rv/2^bc.scale to tdv.  The aim is to determine whether srv is</font></i>
<a name='L1838'><i><font color='green'>           close enough (i.e., within 0.5 ulps) to tdv, and to compute a new</font></i>
<a name='L1839'><i><font color='green'>           approximation if not.</font></i>
<a name='L1840'><i><font color='green'></font></i>
<a name='L1841'><i><font color='green'>           To determine whether srv is close enough to tdv, compute integers</font></i>
<a name='L1842'><i><font color='green'>           bd, bb and bs proportional to tdv, srv and 0.5 ulp(srv)</font></i>
<a name='L1843'><i><font color='green'>           respectively, and then use integer arithmetic to determine whether</font></i>
<a name='L1844'><i><font color='green'>           |tdv - srv| is less than, equal to, or greater than 0.5 ulp(srv).</font></i>
<a name='L1845'><i><font color='green'>        */</font></i>
<a name='L1846'>
<a name='L1847'>        bd = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(bd0-&gt;k);
<a name='L1848'>        <b>if</b> (bd == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1849'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1850'>            <b>goto</b> failed_malloc;
<a name='L1851'>        <font color='red'>}</font>
<a name='L1852'>        <a href='../S/3095.html#L422' title='Defined at 422 in Python/dtoa.c.'>Bcopy</a>(bd, bd0);
<a name='L1853'>        bb = <a href='../S/3095.html#L1056' title='Defined at 1056 in Python/dtoa.c.'>sd2b</a>(&amp;rv, bc.scale, &amp;bbe);   <i><font color='green'>/* srv = bb * 2^bbe */</font></i>
<a name='L1854'>        <b>if</b> (bb == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1855'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L1856'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1857'>            <b>goto</b> failed_malloc;
<a name='L1858'>        <font color='red'>}</font>
<a name='L1859'>        <i><font color='green'>/* Record whether lsb of bb is odd, in case we need this</font></i>
<a name='L1860'><i><font color='green'>           for the round-to-even step later. */</font></i>
<a name='L1861'>        odd = bb-&gt;x[0] &amp; 1;
<a name='L1862'>
<a name='L1863'>        <i><font color='green'>/* tdv = bd * 10**e;  srv = bb * 2**bbe */</font></i>
<a name='L1864'>        bs = <a href='../S/3095.html#L596' title='Defined at 596 in Python/dtoa.c.'>i2b</a>(1);
<a name='L1865'>        <b>if</b> (bs == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1866'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L1867'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L1868'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1869'>            <b>goto</b> failed_malloc;
<a name='L1870'>        <font color='red'>}</font>
<a name='L1871'>
<a name='L1872'>        <b>if</b> (e &gt;= 0) <font color='red'>{</font>
<a name='L1873'>            bb2 = bb5 = 0;
<a name='L1874'>            bd2 = bd5 = e;
<a name='L1875'>        <font color='red'>}</font>
<a name='L1876'>        <b>else</b> <font color='red'>{</font>
<a name='L1877'>            bb2 = bb5 = -e;
<a name='L1878'>            bd2 = bd5 = 0;
<a name='L1879'>        <font color='red'>}</font>
<a name='L1880'>        <b>if</b> (bbe &gt;= 0)
<a name='L1881'>            bb2 += bbe;
<a name='L1882'>        <b>else</b>
<a name='L1883'>            bd2 -= bbe;
<a name='L1884'>        bs2 = bb2;
<a name='L1885'>        bb2++;
<a name='L1886'>        bd2++;
<a name='L1887'>
<a name='L1888'>        <i><font color='green'>/* At this stage bd5 - bb5 == e == bd2 - bb2 + bbe, bb2 - bs2 == 1,</font></i>
<a name='L1889'><i><font color='green'>           and bs == 1, so:</font></i>
<a name='L1890'><i><font color='green'></font></i>
<a name='L1891'><i><font color='green'>              tdv == bd * 10**e = bd * 2**(bbe - bb2 + bd2) * 5**(bd5 - bb5)</font></i>
<a name='L1892'><i><font color='green'>              srv == bb * 2**bbe = bb * 2**(bbe - bb2 + bb2)</font></i>
<a name='L1893'><i><font color='green'>              0.5 ulp(srv) == 2**(bbe-1) = bs * 2**(bbe - bb2 + bs2)</font></i>
<a name='L1894'><i><font color='green'></font></i>
<a name='L1895'><i><font color='green'>           It follows that:</font></i>
<a name='L1896'><i><font color='green'></font></i>
<a name='L1897'><i><font color='green'>              M * tdv = bd * 2**bd2 * 5**bd5</font></i>
<a name='L1898'><i><font color='green'>              M * srv = bb * 2**bb2 * 5**bb5</font></i>
<a name='L1899'><i><font color='green'>              M * 0.5 ulp(srv) = bs * 2**bs2 * 5**bb5</font></i>
<a name='L1900'><i><font color='green'></font></i>
<a name='L1901'><i><font color='green'>           for some constant M.  (Actually, M == 2**(bb2 - bbe) * 5**bb5, but</font></i>
<a name='L1902'><i><font color='green'>           this fact is not needed below.)</font></i>
<a name='L1903'><i><font color='green'>        */</font></i>
<a name='L1904'>
<a name='L1905'>        <i><font color='green'>/* Remove factor of 2**i, where i = min(bb2, bd2, bs2). */</font></i>
<a name='L1906'>        i = bb2 &lt; bd2 ? bb2 : bd2;
<a name='L1907'>        <b>if</b> (i &gt; bs2)
<a name='L1908'>            i = bs2;
<a name='L1909'>        <b>if</b> (i &gt; 0) <font color='red'>{</font>
<a name='L1910'>            bb2 -= i;
<a name='L1911'>            bd2 -= i;
<a name='L1912'>            bs2 -= i;
<a name='L1913'>        <font color='red'>}</font>
<a name='L1914'>
<a name='L1915'>        <i><font color='green'>/* Scale bb, bd, bs by the appropriate powers of 2 and 5. */</font></i>
<a name='L1916'>        <b>if</b> (bb5 &gt; 0) <font color='red'>{</font>
<a name='L1917'>            bs = <a href='../D/10530.html' title='Multiple defined in 2 places.'>pow5mult</a>(bs, bb5);
<a name='L1918'>            <b>if</b> (bs == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1919'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L1920'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L1921'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1922'>                <b>goto</b> failed_malloc;
<a name='L1923'>            <font color='red'>}</font>
<a name='L1924'>            bb1 = <a href='../S/3095.html#L612' title='Defined at 612 in Python/dtoa.c.'>mult</a>(bs, bb);
<a name='L1925'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L1926'>            bb = bb1;
<a name='L1927'>            <b>if</b> (bb == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1928'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L1929'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L1930'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1931'>                <b>goto</b> failed_malloc;
<a name='L1932'>            <font color='red'>}</font>
<a name='L1933'>        <font color='red'>}</font>
<a name='L1934'>        <b>if</b> (bb2 &gt; 0) <font color='red'>{</font>
<a name='L1935'>            bb = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(bb, bb2);
<a name='L1936'>            <b>if</b> (bb == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1937'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L1938'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L1939'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1940'>                <b>goto</b> failed_malloc;
<a name='L1941'>            <font color='red'>}</font>
<a name='L1942'>        <font color='red'>}</font>
<a name='L1943'>        <b>if</b> (bd5 &gt; 0) <font color='red'>{</font>
<a name='L1944'>            bd = <a href='../D/10530.html' title='Multiple defined in 2 places.'>pow5mult</a>(bd, bd5);
<a name='L1945'>            <b>if</b> (bd == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1946'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L1947'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L1948'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1949'>                <b>goto</b> failed_malloc;
<a name='L1950'>            <font color='red'>}</font>
<a name='L1951'>        <font color='red'>}</font>
<a name='L1952'>        <b>if</b> (bd2 &gt; 0) <font color='red'>{</font>
<a name='L1953'>            bd = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(bd, bd2);
<a name='L1954'>            <b>if</b> (bd == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1955'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L1956'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L1957'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1958'>                <b>goto</b> failed_malloc;
<a name='L1959'>            <font color='red'>}</font>
<a name='L1960'>        <font color='red'>}</font>
<a name='L1961'>        <b>if</b> (bs2 &gt; 0) <font color='red'>{</font>
<a name='L1962'>            bs = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(bs, bs2);
<a name='L1963'>            <b>if</b> (bs == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1964'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L1965'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L1966'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1967'>                <b>goto</b> failed_malloc;
<a name='L1968'>            <font color='red'>}</font>
<a name='L1969'>        <font color='red'>}</font>
<a name='L1970'>
<a name='L1971'>        <i><font color='green'>/* Now bd, bb and bs are scaled versions of tdv, srv and 0.5 ulp(srv),</font></i>
<a name='L1972'><i><font color='green'>           respectively.  Compute the difference |tdv - srv|, and compare</font></i>
<a name='L1973'><i><font color='green'>           with 0.5 ulp(srv). */</font></i>
<a name='L1974'>
<a name='L1975'>        delta = <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a>(bb, bd);
<a name='L1976'>        <b>if</b> (delta == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1977'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L1978'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L1979'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L1980'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L1981'>            <b>goto</b> failed_malloc;
<a name='L1982'>        <font color='red'>}</font>
<a name='L1983'>        dsign = delta-&gt;sign;
<a name='L1984'>        delta-&gt;sign = 0;
<a name='L1985'>        i = <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(delta, bs);
<a name='L1986'>        <b>if</b> (bc.nd &gt; nd &amp;&amp; i &lt;= 0) <font color='red'>{</font>
<a name='L1987'>            <b>if</b> (dsign)
<a name='L1988'>                <b>break</b>;  <i><font color='green'>/* Must use bigcomp(). */</font></i>
<a name='L1989'>
<a name='L1990'>            <i><font color='green'>/* Here rv overestimates the truncated decimal value by at most</font></i>
<a name='L1991'><i><font color='green'>               0.5 ulp(rv).  Hence rv either overestimates the true decimal</font></i>
<a name='L1992'><i><font color='green'>               value by &lt;= 0.5 ulp(rv), or underestimates it by some small</font></i>
<a name='L1993'><i><font color='green'>               amount (&lt; 0.1 ulp(rv)); either way, rv is within 0.5 ulps of</font></i>
<a name='L1994'><i><font color='green'>               the true decimal value, so it's possible to exit.</font></i>
<a name='L1995'><i><font color='green'></font></i>
<a name='L1996'><i><font color='green'>               Exception: if scaled rv is a normal exact power of 2, but not</font></i>
<a name='L1997'><i><font color='green'>               DBL_MIN, then rv - 0.5 ulp(rv) takes us all the way down to the</font></i>
<a name='L1998'><i><font color='green'>               next double, so the correctly rounded result is either rv - 0.5</font></i>
<a name='L1999'><i><font color='green'>               ulp(rv) or rv; in this case, use bigcomp to distinguish. */</font></i>
<a name='L2000'>
<a name='L2001'>            <b>if</b> (!<a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) &amp;&amp; !(<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L246' title='Defined at 246 in Python/dtoa.c.'>Bndry_mask</a>)) <font color='red'>{</font>
<a name='L2002'>                <i><font color='green'>/* rv can't be 0, since it's an overestimate for some</font></i>
<a name='L2003'><i><font color='green'>                   nonzero value.  So rv is a normal power of 2. */</font></i>
<a name='L2004'>                j = (<b>int</b>)(<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) &gt;&gt; <a href='../S/3095.html#L228' title='Defined at 228 in Python/dtoa.c.'>Exp_shift</a>;
<a name='L2005'>                <i><font color='green'>/* rv / 2^bc.scale = 2^(j - 1023 - bc.scale); use bigcomp if</font></i>
<a name='L2006'><i><font color='green'>                   rv / 2^bc.scale &gt;= 2^-1021. */</font></i>
<a name='L2007'>                <b>if</b> (j - bc.scale &gt;= 2) <font color='red'>{</font>
<a name='L2008'>                    <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) -= 0.5 * <a href='../S/3095.html#L1317' title='Defined at 1317 in Python/dtoa.c.'>sulp</a>(&amp;rv, &amp;bc);
<a name='L2009'>                    <b>break</b>; <i><font color='green'>/* Use bigcomp. */</font></i>
<a name='L2010'>                <font color='red'>}</font>
<a name='L2011'>            <font color='red'>}</font>
<a name='L2012'>
<a name='L2013'>            <font color='red'>{</font>
<a name='L2014'>                bc.nd = nd;
<a name='L2015'>                i = -1; <i><font color='green'>/* Discarded digits make delta smaller. */</font></i>
<a name='L2016'>            <font color='red'>}</font>
<a name='L2017'>        <font color='red'>}</font>
<a name='L2018'>
<a name='L2019'>        <b>if</b> (i &lt; 0) <font color='red'>{</font>
<a name='L2020'>            <i><font color='green'>/* Error is less than half an ulp -- check for</font></i>
<a name='L2021'><i><font color='green'>             * special case of mantissa a power of two.</font></i>
<a name='L2022'><i><font color='green'>             */</font></i>
<a name='L2023'>            <b>if</b> (dsign || <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) || <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L246' title='Defined at 246 in Python/dtoa.c.'>Bndry_mask</a>
<a name='L2024'>                || (<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) &lt;= (2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>+1)*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>
<a name='L2025'>                ) <font color='red'>{</font>
<a name='L2026'>                <b>break</b>;
<a name='L2027'>            <font color='red'>}</font>
<a name='L2028'>            <b>if</b> (!delta-&gt;x[0] &amp;&amp; delta-&gt;wds &lt;= 1) <font color='red'>{</font>
<a name='L2029'>                <i><font color='green'>/* exact result */</font></i>
<a name='L2030'>                <b>break</b>;
<a name='L2031'>            <font color='red'>}</font>
<a name='L2032'>            delta = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(delta,<a href='../S/3095.html#L249' title='Defined at 249 in Python/dtoa.c.'>Log2P</a>);
<a name='L2033'>            <b>if</b> (delta == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L2034'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L2035'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L2036'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L2037'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L2038'>                <b>goto</b> failed_malloc;
<a name='L2039'>            <font color='red'>}</font>
<a name='L2040'>            <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(delta, bs) &gt; 0)
<a name='L2041'>                <b>goto</b> drop_down;
<a name='L2042'>            <b>break</b>;
<a name='L2043'>        <font color='red'>}</font>
<a name='L2044'>        <b>if</b> (i == 0) <font color='red'>{</font>
<a name='L2045'>            <i><font color='green'>/* exactly half-way between */</font></i>
<a name='L2046'>            <b>if</b> (dsign) <font color='red'>{</font>
<a name='L2047'>                <b>if</b> ((<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L247' title='Defined at 247 in Python/dtoa.c.'>Bndry_mask1</a>) == <a href='../S/3095.html#L247' title='Defined at 247 in Python/dtoa.c.'>Bndry_mask1</a>
<a name='L2048'>                    &amp;&amp;  <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) == (
<a name='L2049'>                        (bc.scale &amp;&amp;
<a name='L2050'>                         (y = <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) &lt;= 2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>) ?
<a name='L2051'>                        (0xffffffff &amp; (0xffffffff &lt;&lt; (2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>+1-(y&gt;&gt;<a href='../S/3095.html#L228' title='Defined at 228 in Python/dtoa.c.'>Exp_shift</a>)))) :
<a name='L2052'>                        0xffffffff)) <font color='red'>{</font>
<a name='L2053'>                    <i><font color='green'>/*boundary case -- increment exponent*/</font></i>
<a name='L2054'>                    <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) = (<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>)
<a name='L2055'>                        + <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>
<a name='L2056'>                        ;
<a name='L2057'>                    <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) = 0;
<a name='L2058'>                    dsign = 0;
<a name='L2059'>                    <b>break</b>;
<a name='L2060'>                <font color='red'>}</font>
<a name='L2061'>            <font color='red'>}</font>
<a name='L2062'>            <b>else</b> <b>if</b> (!(<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L246' title='Defined at 246 in Python/dtoa.c.'>Bndry_mask</a>) &amp;&amp; !<a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv)) <font color='red'>{</font>
<a name='L2063'>              drop_down:
<a name='L2064'>                <i><font color='green'>/* boundary case -- decrement exponent */</font></i>
<a name='L2065'>                <b>if</b> (bc.scale) <font color='red'>{</font>
<a name='L2066'>                    <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> = <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>;
<a name='L2067'>                    <b>if</b> (<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> &lt;= (2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>+1)*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>) <font color='red'>{</font>
<a name='L2068'>                        <b>if</b> (<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> &gt; (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>+2)*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>)
<a name='L2069'>                            <i><font color='green'>/* round even ==&gt; */</font></i>
<a name='L2070'>                            <i><font color='green'>/* accept rv */</font></i>
<a name='L2071'>                            <b>break</b>;
<a name='L2072'>                        <i><font color='green'>/* rv = smallest denormal */</font></i>
<a name='L2073'>                        <b>if</b> (bc.nd &gt; nd)
<a name='L2074'>                            <b>break</b>;
<a name='L2075'>                        <b>goto</b> undfl;
<a name='L2076'>                    <font color='red'>}</font>
<a name='L2077'>                <font color='red'>}</font>
<a name='L2078'>                <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> = (<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) - <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L2079'>                <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) = <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> | <a href='../S/3095.html#L247' title='Defined at 247 in Python/dtoa.c.'>Bndry_mask1</a>;
<a name='L2080'>                <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) = 0xffffffff;
<a name='L2081'>                <b>break</b>;
<a name='L2082'>            <font color='red'>}</font>
<a name='L2083'>            <b>if</b> (!odd)
<a name='L2084'>                <b>break</b>;
<a name='L2085'>            <b>if</b> (dsign)
<a name='L2086'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) += <a href='../S/3095.html#L1317' title='Defined at 1317 in Python/dtoa.c.'>sulp</a>(&amp;rv, &amp;bc);
<a name='L2087'>            <b>else</b> <font color='red'>{</font>
<a name='L2088'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) -= <a href='../S/3095.html#L1317' title='Defined at 1317 in Python/dtoa.c.'>sulp</a>(&amp;rv, &amp;bc);
<a name='L2089'>                <b>if</b> (!<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv)) <font color='red'>{</font>
<a name='L2090'>                    <b>if</b> (bc.nd &gt;nd)
<a name='L2091'>                        <b>break</b>;
<a name='L2092'>                    <b>goto</b> undfl;
<a name='L2093'>                <font color='red'>}</font>
<a name='L2094'>            <font color='red'>}</font>
<a name='L2095'>            dsign = 1 - dsign;
<a name='L2096'>            <b>break</b>;
<a name='L2097'>        <font color='red'>}</font>
<a name='L2098'>        <b>if</b> ((aadj = <a href='../S/3095.html#L1162' title='Defined at 1162 in Python/dtoa.c.'>ratio</a>(delta, bs)) &lt;= 2.) <font color='red'>{</font>
<a name='L2099'>            <b>if</b> (dsign)
<a name='L2100'>                aadj = aadj1 = 1.;
<a name='L2101'>            <b>else</b> <b>if</b> (<a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) || <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L246' title='Defined at 246 in Python/dtoa.c.'>Bndry_mask</a>) <font color='red'>{</font>
<a name='L2102'>                <b>if</b> (<a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) == <a href='../S/3095.html#L251' title='Defined at 251 in Python/dtoa.c.'>Tiny1</a> &amp;&amp; !<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv)) <font color='red'>{</font>
<a name='L2103'>                    <b>if</b> (bc.nd &gt;nd)
<a name='L2104'>                        <b>break</b>;
<a name='L2105'>                    <b>goto</b> undfl;
<a name='L2106'>                <font color='red'>}</font>
<a name='L2107'>                aadj = 1.;
<a name='L2108'>                aadj1 = -1.;
<a name='L2109'>            <font color='red'>}</font>
<a name='L2110'>            <b>else</b> <font color='red'>{</font>
<a name='L2111'>                <i><font color='green'>/* special case -- power of FLT_RADIX to be */</font></i>
<a name='L2112'>                <i><font color='green'>/* rounded down... */</font></i>
<a name='L2113'>
<a name='L2114'>                <b>if</b> (aadj &lt; 2./FLT_RADIX)
<a name='L2115'>                    aadj = 1./FLT_RADIX;
<a name='L2116'>                <b>else</b>
<a name='L2117'>                    aadj *= 0.5;
<a name='L2118'>                aadj1 = -aadj;
<a name='L2119'>            <font color='red'>}</font>
<a name='L2120'>        <font color='red'>}</font>
<a name='L2121'>        <b>else</b> <font color='red'>{</font>
<a name='L2122'>            aadj *= 0.5;
<a name='L2123'>            aadj1 = dsign ? aadj : -aadj;
<a name='L2124'>            <b>if</b> (<a href='../D/1352.html' title='Multiple defined in 2 places.'>Flt_Rounds</a> == 0)
<a name='L2125'>                aadj1 += 0.5;
<a name='L2126'>        <font color='red'>}</font>
<a name='L2127'>        y = <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>;
<a name='L2128'>
<a name='L2129'>        <i><font color='green'>/* Check for overflow */</font></i>
<a name='L2130'>
<a name='L2131'>        <b>if</b> (y == <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>*(DBL_MAX_EXP+<a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a>-1)) <font color='red'>{</font>
<a name='L2132'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv0) = <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv);
<a name='L2133'>            <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) -= <a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L2134'>            adj.d = aadj1 * <a href='../S/3095.html#L986' title='Defined at 986 in Python/dtoa.c.'>ulp</a>(&amp;rv);
<a name='L2135'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) += adj.d;
<a name='L2136'>            <b>if</b> ((<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) &gt;=
<a name='L2137'>                <a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>*(DBL_MAX_EXP+<a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a>-<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>)) <font color='red'>{</font>
<a name='L2138'>                <b>if</b> (<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv0) == <a href='../S/3095.html#L265' title='Defined at 265 in Python/dtoa.c.'>Big0</a> &amp;&amp; <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv0) == <a href='../S/3095.html#L266' title='Defined at 266 in Python/dtoa.c.'>Big1</a>) <font color='red'>{</font>
<a name='L2139'>                    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L2140'>                    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L2141'>                    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L2142'>                    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L2143'>                    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(delta);
<a name='L2144'>                    <b>goto</b> ovfl;
<a name='L2145'>                <font color='red'>}</font>
<a name='L2146'>                <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) = <a href='../S/3095.html#L265' title='Defined at 265 in Python/dtoa.c.'>Big0</a>;
<a name='L2147'>                <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) = <a href='../S/3095.html#L266' title='Defined at 266 in Python/dtoa.c.'>Big1</a>;
<a name='L2148'>                <b>goto</b> cont;
<a name='L2149'>            <font color='red'>}</font>
<a name='L2150'>            <b>else</b>
<a name='L2151'>                <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) += <a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L2152'>        <font color='red'>}</font>
<a name='L2153'>        <b>else</b> <font color='red'>{</font>
<a name='L2154'>            <b>if</b> (bc.scale &amp;&amp; y &lt;= 2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>) <font color='red'>{</font>
<a name='L2155'>                <b>if</b> (aadj &lt;= 0x7fffffff) <font color='red'>{</font>
<a name='L2156'>                    <b>if</b> ((z = (<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>)aadj) &lt;= 0)
<a name='L2157'>                        z = 1;
<a name='L2158'>                    aadj = z;
<a name='L2159'>                    aadj1 = dsign ? aadj : -aadj;
<a name='L2160'>                <font color='red'>}</font>
<a name='L2161'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;aadj2) = aadj1;
<a name='L2162'>                <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;aadj2) += (2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>+1)*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a> - y;
<a name='L2163'>                aadj1 = <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;aadj2);
<a name='L2164'>            <font color='red'>}</font>
<a name='L2165'>            adj.d = aadj1 * <a href='../S/3095.html#L986' title='Defined at 986 in Python/dtoa.c.'>ulp</a>(&amp;rv);
<a name='L2166'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) += adj.d;
<a name='L2167'>        <font color='red'>}</font>
<a name='L2168'>        z = <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>;
<a name='L2169'>        <b>if</b> (bc.nd == nd) <font color='red'>{</font>
<a name='L2170'>            <b>if</b> (!bc.scale)
<a name='L2171'>                <b>if</b> (y == z) <font color='red'>{</font>
<a name='L2172'>                    <i><font color='green'>/* Can we stop now? */</font></i>
<a name='L2173'>                    <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> = (<a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a>)aadj;
<a name='L2174'>                    aadj -= <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L2175'>                    <i><font color='green'>/* The tolerances below are conservative. */</font></i>
<a name='L2176'>                    <b>if</b> (dsign || <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) || <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) &amp; <a href='../S/3095.html#L246' title='Defined at 246 in Python/dtoa.c.'>Bndry_mask</a>) <font color='red'>{</font>
<a name='L2177'>                        <b>if</b> (aadj &lt; .4999999 || aadj &gt; .5000001)
<a name='L2178'>                            <b>break</b>;
<a name='L2179'>                    <font color='red'>}</font>
<a name='L2180'>                    <b>else</b> <b>if</b> (aadj &lt; .4999999/FLT_RADIX)
<a name='L2181'>                        <b>break</b>;
<a name='L2182'>                <font color='red'>}</font>
<a name='L2183'>        <font color='red'>}</font>
<a name='L2184'>      cont:
<a name='L2185'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L2186'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L2187'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L2188'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(delta);
<a name='L2189'>    <font color='red'>}</font>
<a name='L2190'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bb);
<a name='L2191'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd);
<a name='L2192'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bs);
<a name='L2193'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(bd0);
<a name='L2194'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(delta);
<a name='L2195'>    <b>if</b> (bc.nd &gt; nd) <font color='red'>{</font>
<a name='L2196'>        <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a> = <a href='../S/3095.html#L1380' title='Defined at 1380 in Python/dtoa.c.'>bigcomp</a>(&amp;rv, s0, &amp;bc);
<a name='L2197'>        <b>if</b> (<a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>)
<a name='L2198'>            <b>goto</b> failed_malloc;
<a name='L2199'>    <font color='red'>}</font>
<a name='L2200'>
<a name='L2201'>    <b>if</b> (bc.scale) <font color='red'>{</font>
<a name='L2202'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv0) = <a href='../S/3095.html#L239' title='Defined at 239 in Python/dtoa.c.'>Exp_1</a> - 2*<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L2203'>        <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv0) = 0;
<a name='L2204'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) *= <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv0);
<a name='L2205'>    <font color='red'>}</font>
<a name='L2206'>
<a name='L2207'>  ret:
<a name='L2208'>    <b>return</b> sign ? -<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) : <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv);
<a name='L2209'>
<a name='L2210'>  parse_error:
<a name='L2211'>    <b>return</b> 0.0;
<a name='L2212'>
<a name='L2213'>  failed_malloc:
<a name='L2214'>    errno = ENOMEM;
<a name='L2215'>    <b>return</b> -1.0;
<a name='L2216'>
<a name='L2217'>  undfl:
<a name='L2218'>    <b>return</b> sign ? -0.0 : 0.0;
<a name='L2219'>
<a name='L2220'>  ovfl:
<a name='L2221'>    errno = ERANGE;
<a name='L2222'>    <i><font color='green'>/* Can't trust HUGE_VAL */</font></i>
<a name='L2223'>    <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;rv) = <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>;
<a name='L2224'>    <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;rv) = 0;
<a name='L2225'>    <b>return</b> sign ? -<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv) : <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;rv);
<a name='L2226'>
<a name='L2227'><font color='red'>}</font>
<a name='L2228'>
<a name='L2229'><b>static</b> <b>char</b> *
<a name='L2230'><a href='../R/10074.html' title='Multiple refered from 2 places.'>rv_alloc</a>(<b>int</b> i)
<a name='L2231'><font color='red'>{</font>
<a name='L2232'>    <b>int</b> j, k, *r;
<a name='L2233'>
<a name='L2234'>    j = <b>sizeof</b>(<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>);
<a name='L2235'>    <b>for</b>(k = 0;
<a name='L2236'>        <b>sizeof</b>(<a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a>) - <b>sizeof</b>(<a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a>) - <b>sizeof</b>(<b>int</b>) + j &lt;= (<b>unsigned</b>)i;
<a name='L2237'>        j &lt;&lt;= 1)
<a name='L2238'>        k++;
<a name='L2239'>    r = (<b>int</b>*)<a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(k);
<a name='L2240'>    <b>if</b> (r == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2241'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2242'>    *r = k;
<a name='L2243'>    <b>return</b> (<b>char</b> *)(r+1);
<a name='L2244'><font color='red'>}</font>
<a name='L2245'>
<a name='L2246'><b>static</b> <b>char</b> *
<a name='L2247'><a href='../R/9302.html' title='Multiple refered from 3 places.'>nrv_alloc</a>(<b>char</b> *s, <b>char</b> **rve, <b>int</b> n)
<a name='L2248'><font color='red'>{</font>
<a name='L2249'>    <b>char</b> *rv, *t;
<a name='L2250'>
<a name='L2251'>    rv = <a href='../S/3095.html#L2230' title='Defined at 2230 in Python/dtoa.c.'>rv_alloc</a>(n);
<a name='L2252'>    <b>if</b> (rv == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2253'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2254'>    t = rv;
<a name='L2255'>    <b>while</b>((*t = *s++)) t++;
<a name='L2256'>    <b>if</b> (rve)
<a name='L2257'>        *rve = t;
<a name='L2258'>    <b>return</b> rv;
<a name='L2259'><font color='red'>}</font>
<a name='L2260'>
<a name='L2261'><i><font color='green'>/* freedtoa(s) must be used to free values s returned by dtoa</font></i>
<a name='L2262'><i><font color='green'> * when MULTIPLE_THREADS is #defined.  It should be used in all cases,</font></i>
<a name='L2263'><i><font color='green'> * but for consistency with earlier versions of dtoa, it is optional</font></i>
<a name='L2264'><i><font color='green'> * when MULTIPLE_THREADS is not defined.</font></i>
<a name='L2265'><i><font color='green'> */</font></i>
<a name='L2266'>
<a name='L2267'><b>void</b>
<a name='L2268'><a href='../R/5624.html' title='Multiple refered from 3 places.'>_Py_dg_freedtoa</a>(<b>char</b> *s)
<a name='L2269'><font color='red'>{</font>
<a name='L2270'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = (<a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *)((<b>int</b> *)s - 1);
<a name='L2271'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;maxwds = 1 &lt;&lt; (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;k = *(<b>int</b>*)<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2272'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2273'><font color='red'>}</font>
<a name='L2274'>
<a name='L2275'><i><font color='green'>/* dtoa for IEEE arithmetic (dmg): convert double to ASCII string.</font></i>
<a name='L2276'><i><font color='green'> *</font></i>
<a name='L2277'><i><font color='green'> * Inspired by "How to Print Floating-Point Numbers Accurately" by</font></i>
<a name='L2278'><i><font color='green'> * Guy L. Steele, Jr. and Jon L. White [Proc. ACM SIGPLAN '90, pp. 112-126].</font></i>
<a name='L2279'><i><font color='green'> *</font></i>
<a name='L2280'><i><font color='green'> * Modifications:</font></i>
<a name='L2281'><i><font color='green'> *      1. Rather than iterating, we use a simple numeric overestimate</font></i>
<a name='L2282'><i><font color='green'> *         to determine k = floor(log10(d)).  We scale relevant</font></i>
<a name='L2283'><i><font color='green'> *         quantities using O(log2(k)) rather than O(k) multiplications.</font></i>
<a name='L2284'><i><font color='green'> *      2. For some modes &gt; 2 (corresponding to ecvt and fcvt), we don't</font></i>
<a name='L2285'><i><font color='green'> *         try to generate digits strictly left to right.  Instead, we</font></i>
<a name='L2286'><i><font color='green'> *         compute with fewer bits and propagate the carry if necessary</font></i>
<a name='L2287'><i><font color='green'> *         when rounding the final digit up.  This is often faster.</font></i>
<a name='L2288'><i><font color='green'> *      3. Under the assumption that input will be rounded nearest,</font></i>
<a name='L2289'><i><font color='green'> *         mode 0 renders 1e23 as 1e23 rather than 9.999999999999999e22.</font></i>
<a name='L2290'><i><font color='green'> *         That is, we allow equality in stopping tests when the</font></i>
<a name='L2291'><i><font color='green'> *         round-nearest rule will give the same floating-point value</font></i>
<a name='L2292'><i><font color='green'> *         as would satisfaction of the stopping test with strict</font></i>
<a name='L2293'><i><font color='green'> *         inequality.</font></i>
<a name='L2294'><i><font color='green'> *      4. We remove common factors of powers of 2 from relevant</font></i>
<a name='L2295'><i><font color='green'> *         quantities.</font></i>
<a name='L2296'><i><font color='green'> *      5. When converting floating-point integers less than 1e16,</font></i>
<a name='L2297'><i><font color='green'> *         we use floating-point arithmetic rather than resorting</font></i>
<a name='L2298'><i><font color='green'> *         to multiple-precision integers.</font></i>
<a name='L2299'><i><font color='green'> *      6. When asked to produce fewer than 15 digits, we first try</font></i>
<a name='L2300'><i><font color='green'> *         to get by with floating-point arithmetic; we resort to</font></i>
<a name='L2301'><i><font color='green'> *         multiple-precision integer arithmetic only if we cannot</font></i>
<a name='L2302'><i><font color='green'> *         guarantee that the floating-point calculation has given</font></i>
<a name='L2303'><i><font color='green'> *         the correctly rounded result.  For k requested digits and</font></i>
<a name='L2304'><i><font color='green'> *         "uniformly" distributed input, the probability is</font></i>
<a name='L2305'><i><font color='green'> *         something like 10^(k-15) that we must resort to the Long</font></i>
<a name='L2306'><i><font color='green'> *         calculation.</font></i>
<a name='L2307'><i><font color='green'> */</font></i>
<a name='L2308'>
<a name='L2309'><i><font color='green'>/* Additional notes (METD): (1) returns NULL on failure.  (2) to avoid memory</font></i>
<a name='L2310'><i><font color='green'>   leakage, a successful call to _Py_dg_dtoa should always be matched by a</font></i>
<a name='L2311'><i><font color='green'>   call to _Py_dg_freedtoa. */</font></i>
<a name='L2312'>
<a name='L2313'><b>char</b> *
<a name='L2314'><a href='../R/5623.html' title='Multiple refered from 2 places.'>_Py_dg_dtoa</a>(<b>double</b> dd, <b>int</b> mode, <b>int</b> ndigits,
<a name='L2315'>            <b>int</b> *decpt, <b>int</b> *sign, <b>char</b> **rve)
<a name='L2316'><font color='red'>{</font>
<a name='L2317'>    <i><font color='green'>/*  Arguments ndigits, decpt, sign are similar to those</font></i>
<a name='L2318'><i><font color='green'>        of ecvt and fcvt; trailing zeros are suppressed from</font></i>
<a name='L2319'><i><font color='green'>        the returned string.  If not null, *rve is set to point</font></i>
<a name='L2320'><i><font color='green'>        to the end of the return value.  If d is +-Infinity or NaN,</font></i>
<a name='L2321'><i><font color='green'>        then *decpt is set to 9999.</font></i>
<a name='L2322'><i><font color='green'></font></i>
<a name='L2323'><i><font color='green'>        mode:</font></i>
<a name='L2324'><i><font color='green'>        0 ==&gt; shortest string that yields d when read in</font></i>
<a name='L2325'><i><font color='green'>        and rounded to nearest.</font></i>
<a name='L2326'><i><font color='green'>        1 ==&gt; like 0, but with Steele &amp; White stopping rule;</font></i>
<a name='L2327'><i><font color='green'>        e.g. with IEEE P754 arithmetic , mode 0 gives</font></i>
<a name='L2328'><i><font color='green'>        1e23 whereas mode 1 gives 9.999999999999999e22.</font></i>
<a name='L2329'><i><font color='green'>        2 ==&gt; max(1,ndigits) significant digits.  This gives a</font></i>
<a name='L2330'><i><font color='green'>        return value similar to that of ecvt, except</font></i>
<a name='L2331'><i><font color='green'>        that trailing zeros are suppressed.</font></i>
<a name='L2332'><i><font color='green'>        3 ==&gt; through ndigits past the decimal point.  This</font></i>
<a name='L2333'><i><font color='green'>        gives a return value similar to that from fcvt,</font></i>
<a name='L2334'><i><font color='green'>        except that trailing zeros are suppressed, and</font></i>
<a name='L2335'><i><font color='green'>        ndigits can be negative.</font></i>
<a name='L2336'><i><font color='green'>        4,5 ==&gt; similar to 2 and 3, respectively, but (in</font></i>
<a name='L2337'><i><font color='green'>        round-nearest mode) with the tests of mode 0 to</font></i>
<a name='L2338'><i><font color='green'>        possibly return a shorter string that rounds to d.</font></i>
<a name='L2339'><i><font color='green'>        With IEEE arithmetic and compilation with</font></i>
<a name='L2340'><i><font color='green'>        -DHonor_FLT_ROUNDS, modes 4 and 5 behave the same</font></i>
<a name='L2341'><i><font color='green'>        as modes 2 and 3 when FLT_ROUNDS != 1.</font></i>
<a name='L2342'><i><font color='green'>        6-9 ==&gt; Debugging modes similar to mode - 4:  don't try</font></i>
<a name='L2343'><i><font color='green'>        fast floating-point estimate (if applicable).</font></i>
<a name='L2344'><i><font color='green'></font></i>
<a name='L2345'><i><font color='green'>        Values of mode other than 0-9 are treated as mode 0.</font></i>
<a name='L2346'><i><font color='green'></font></i>
<a name='L2347'><i><font color='green'>        Sufficient space is allocated to the return value</font></i>
<a name='L2348'><i><font color='green'>        to hold the suppressed trailing zeros.</font></i>
<a name='L2349'><i><font color='green'>    */</font></i>
<a name='L2350'>
<a name='L2351'>    <b>int</b> bbits, b2, b5, be, dig, i, ieps, ilim, ilim0, ilim1,
<a name='L2352'>        j, j1, k, k0, k_check, leftright, m2, m5, s2, s5,
<a name='L2353'>        spec_case, try_quick;
<a name='L2354'>    <a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a> <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L2355'>    <b>int</b> denorm;
<a name='L2356'>    <a href='../S/3095.html#L155' title='Defined at 155 in Python/dtoa.c.'>ULong</a> x;
<a name='L2357'>    <a href='../S/3095.html#L309' title='Defined at 309 in Python/dtoa.c.'>Bigint</a> *<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, *b1, *delta, *mlo, *mhi, *<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>;
<a name='L2358'>    <a href='../D/5324.html' title='Multiple defined in 4 places.'>U</a> d2, eps, u;
<a name='L2359'>    <b>double</b> ds;
<a name='L2360'>    <b>char</b> *s, *s0;
<a name='L2361'>
<a name='L2362'>    <i><font color='green'>/* set pointers to NULL, to silence gcc compiler warnings and make</font></i>
<a name='L2363'><i><font color='green'>       cleanup easier on error */</font></i>
<a name='L2364'>    mlo = mhi = <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> = 0;
<a name='L2365'>    s0 = 0;
<a name='L2366'>
<a name='L2367'>    u.d = dd;
<a name='L2368'>    <b>if</b> (<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) &amp; <a href='../S/3095.html#L248' title='Defined at 248 in Python/dtoa.c.'>Sign_bit</a>) <font color='red'>{</font>
<a name='L2369'>        <i><font color='green'>/* set sign for everything, including 0's and NaNs */</font></i>
<a name='L2370'>        *sign = 1;
<a name='L2371'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) &amp;= ~<a href='../S/3095.html#L248' title='Defined at 248 in Python/dtoa.c.'>Sign_bit</a>; <i><font color='green'>/* clear sign bit */</font></i>
<a name='L2372'>    <font color='red'>}</font>
<a name='L2373'>    <b>else</b>
<a name='L2374'>        *sign = 0;
<a name='L2375'>
<a name='L2376'>    <i><font color='green'>/* quick return for Infinities, NaNs and zeros */</font></i>
<a name='L2377'>    <b>if</b> ((<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) &amp; <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>) == <a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>)
<a name='L2378'>    <font color='red'>{</font>
<a name='L2379'>        <i><font color='green'>/* Infinity or NaN */</font></i>
<a name='L2380'>        *decpt = 9999;
<a name='L2381'>        <b>if</b> (!<a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;u) &amp;&amp; !(<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) &amp; 0xfffff))
<a name='L2382'>            <b>return</b> <a href='../S/3095.html#L2247' title='Defined at 2247 in Python/dtoa.c.'>nrv_alloc</a>("Infinity", rve, 8);
<a name='L2383'>        <b>return</b> <a href='../S/3095.html#L2247' title='Defined at 2247 in Python/dtoa.c.'>nrv_alloc</a>("NaN", rve, 3);
<a name='L2384'>    <font color='red'>}</font>
<a name='L2385'>    <b>if</b> (!<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u)) <font color='red'>{</font>
<a name='L2386'>        *decpt = 1;
<a name='L2387'>        <b>return</b> <a href='../S/3095.html#L2247' title='Defined at 2247 in Python/dtoa.c.'>nrv_alloc</a>("0", rve, 1);
<a name='L2388'>    <font color='red'>}</font>
<a name='L2389'>
<a name='L2390'>    <i><font color='green'>/* compute k = floor(log10(d)).  The computation may leave k</font></i>
<a name='L2391'><i><font color='green'>       one too large, but should never leave k too small. */</font></i>
<a name='L2392'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L1114' title='Defined at 1114 in Python/dtoa.c.'>d2b</a>(&amp;u, &amp;be, &amp;bbits);
<a name='L2393'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2394'>        <b>goto</b> failed_malloc;
<a name='L2395'>    <b>if</b> ((i = (<b>int</b>)(<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) &gt;&gt; <a href='../S/3095.html#L229' title='Defined at 229 in Python/dtoa.c.'>Exp_shift1</a> &amp; (<a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a>&gt;&gt;<a href='../S/3095.html#L229' title='Defined at 229 in Python/dtoa.c.'>Exp_shift1</a>)))) <font color='red'>{</font>
<a name='L2396'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;d2) = <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u);
<a name='L2397'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;d2) &amp;= <a href='../S/3095.html#L243' title='Defined at 243 in Python/dtoa.c.'>Frac_mask1</a>;
<a name='L2398'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;d2) |= <a href='../S/3095.html#L240' title='Defined at 240 in Python/dtoa.c.'>Exp_11</a>;
<a name='L2399'>
<a name='L2400'>        <i><font color='green'>/* log(x)       ~=~ log(1.5) + (x-1.5)/1.5</font></i>
<a name='L2401'><i><font color='green'>         * log10(x)      =  log(x) / log(10)</font></i>
<a name='L2402'><i><font color='green'>         *              ~=~ log(1.5)/log(10) + (x-1.5)/(1.5*log(10))</font></i>
<a name='L2403'><i><font color='green'>         * log10(d) = (i-Bias)*log(2)/log(10) + log10(d2)</font></i>
<a name='L2404'><i><font color='green'>         *</font></i>
<a name='L2405'><i><font color='green'>         * This suggests computing an approximation k to log10(d) by</font></i>
<a name='L2406'><i><font color='green'>         *</font></i>
<a name='L2407'><i><font color='green'>         * k = (i - Bias)*0.301029995663981</font></i>
<a name='L2408'><i><font color='green'>         *      + ( (d2-1.5)*0.289529654602168 + 0.176091259055681 );</font></i>
<a name='L2409'><i><font color='green'>         *</font></i>
<a name='L2410'><i><font color='green'>         * We want k to be too large rather than too small.</font></i>
<a name='L2411'><i><font color='green'>         * The error in the first-order Taylor series approximation</font></i>
<a name='L2412'><i><font color='green'>         * is in our favor, so we just round up the constant enough</font></i>
<a name='L2413'><i><font color='green'>         * to compensate for any error in the multiplication of</font></i>
<a name='L2414'><i><font color='green'>         * (i - Bias) by 0.301029995663981; since |i - Bias| &lt;= 1077,</font></i>
<a name='L2415'><i><font color='green'>         * and 1077 * 0.30103 * 2^-52 ~=~ 7.2e-14,</font></i>
<a name='L2416'><i><font color='green'>         * adding 1e-13 to the constant term more than suffices.</font></i>
<a name='L2417'><i><font color='green'>         * Hence we adjust the constant term to 0.1760912590558.</font></i>
<a name='L2418'><i><font color='green'>         * (We could get a more accurate k by invoking log10,</font></i>
<a name='L2419'><i><font color='green'>         *  but this is probably not worthwhile.)</font></i>
<a name='L2420'><i><font color='green'>         */</font></i>
<a name='L2421'>
<a name='L2422'>        i -= <a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a>;
<a name='L2423'>        denorm = 0;
<a name='L2424'>    <font color='red'>}</font>
<a name='L2425'>    <b>else</b> <font color='red'>{</font>
<a name='L2426'>        <i><font color='green'>/* d is denormalized */</font></i>
<a name='L2427'>
<a name='L2428'>        i = bbits + be + (<a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a> + (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>-1) - 1);
<a name='L2429'>        x = i &gt; 32  ? <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) &lt;&lt; (64 - i) | <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;u) &gt;&gt; (i - 32)
<a name='L2430'>            : <a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;u) &lt;&lt; (32 - i);
<a name='L2431'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;d2) = x;
<a name='L2432'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;d2) -= 31*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>; <i><font color='green'>/* adjust exponent */</font></i>
<a name='L2433'>        i -= (<a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a> + (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>-1) - 1) + 1;
<a name='L2434'>        denorm = 1;
<a name='L2435'>    <font color='red'>}</font>
<a name='L2436'>    ds = (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;d2)-1.5)*0.289529654602168 + 0.1760912590558 +
<a name='L2437'>        i*0.301029995663981;
<a name='L2438'>    k = (<b>int</b>)ds;
<a name='L2439'>    <b>if</b> (ds &lt; 0. &amp;&amp; ds != k)
<a name='L2440'>        k--;    <i><font color='green'>/* want k = floor(ds) */</font></i>
<a name='L2441'>    k_check = 1;
<a name='L2442'>    <b>if</b> (k &gt;= 0 &amp;&amp; k &lt;= <a href='../S/3095.html#L244' title='Defined at 244 in Python/dtoa.c.'>Ten_pmax</a>) <font color='red'>{</font>
<a name='L2443'>        <b>if</b> (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &lt; tens[k])
<a name='L2444'>            k--;
<a name='L2445'>        k_check = 0;
<a name='L2446'>    <font color='red'>}</font>
<a name='L2447'>    j = bbits - i - 1;
<a name='L2448'>    <b>if</b> (j &gt;= 0) <font color='red'>{</font>
<a name='L2449'>        b2 = 0;
<a name='L2450'>        s2 = j;
<a name='L2451'>    <font color='red'>}</font>
<a name='L2452'>    <b>else</b> <font color='red'>{</font>
<a name='L2453'>        b2 = -j;
<a name='L2454'>        s2 = 0;
<a name='L2455'>    <font color='red'>}</font>
<a name='L2456'>    <b>if</b> (k &gt;= 0) <font color='red'>{</font>
<a name='L2457'>        b5 = 0;
<a name='L2458'>        s5 = k;
<a name='L2459'>        s2 += k;
<a name='L2460'>    <font color='red'>}</font>
<a name='L2461'>    <b>else</b> <font color='red'>{</font>
<a name='L2462'>        b2 -= k;
<a name='L2463'>        b5 = -k;
<a name='L2464'>        s5 = 0;
<a name='L2465'>    <font color='red'>}</font>
<a name='L2466'>    <b>if</b> (mode &lt; 0 || mode &gt; 9)
<a name='L2467'>        mode = 0;
<a name='L2468'>
<a name='L2469'>    try_quick = 1;
<a name='L2470'>
<a name='L2471'>    <b>if</b> (mode &gt; 5) <font color='red'>{</font>
<a name='L2472'>        mode -= 4;
<a name='L2473'>        try_quick = 0;
<a name='L2474'>    <font color='red'>}</font>
<a name='L2475'>    leftright = 1;
<a name='L2476'>    ilim = ilim1 = -1;  <i><font color='green'>/* Values for cases 0 and 1; done here to */</font></i>
<a name='L2477'>    <i><font color='green'>/* silence erroneous "gcc -Wall" warning. */</font></i>
<a name='L2478'>    <b>switch</b>(mode) <font color='red'>{</font>
<a name='L2479'>    <b>case</b> 0:
<a name='L2480'>    <b>case</b> 1:
<a name='L2481'>        i = 18;
<a name='L2482'>        ndigits = 0;
<a name='L2483'>        <b>break</b>;
<a name='L2484'>    <b>case</b> 2:
<a name='L2485'>        leftright = 0;
<a name='L2486'>        <i><font color='green'>/* no break */</font></i>
<a name='L2487'>    <b>case</b> 4:
<a name='L2488'>        <b>if</b> (ndigits &lt;= 0)
<a name='L2489'>            ndigits = 1;
<a name='L2490'>        ilim = ilim1 = i = ndigits;
<a name='L2491'>        <b>break</b>;
<a name='L2492'>    <b>case</b> 3:
<a name='L2493'>        leftright = 0;
<a name='L2494'>        <i><font color='green'>/* no break */</font></i>
<a name='L2495'>    <b>case</b> 5:
<a name='L2496'>        i = ndigits + k + 1;
<a name='L2497'>        ilim = i;
<a name='L2498'>        ilim1 = i - 1;
<a name='L2499'>        <b>if</b> (i &lt;= 0)
<a name='L2500'>            i = 1;
<a name='L2501'>    <font color='red'>}</font>
<a name='L2502'>    s0 = <a href='../S/3095.html#L2230' title='Defined at 2230 in Python/dtoa.c.'>rv_alloc</a>(i);
<a name='L2503'>    <b>if</b> (s0 == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2504'>        <b>goto</b> failed_malloc;
<a name='L2505'>    s = s0;
<a name='L2506'>
<a name='L2507'>
<a name='L2508'>    <b>if</b> (ilim &gt;= 0 &amp;&amp; ilim &lt;= <a href='../S/3095.html#L252' title='Defined at 252 in Python/dtoa.c.'>Quick_max</a> &amp;&amp; try_quick) <font color='red'>{</font>
<a name='L2509'>
<a name='L2510'>        <i><font color='green'>/* Try to get by with floating-point arithmetic. */</font></i>
<a name='L2511'>
<a name='L2512'>        i = 0;
<a name='L2513'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;d2) = <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u);
<a name='L2514'>        k0 = k;
<a name='L2515'>        ilim0 = ilim;
<a name='L2516'>        ieps = 2; <i><font color='green'>/* conservative */</font></i>
<a name='L2517'>        <b>if</b> (k &gt; 0) <font color='red'>{</font>
<a name='L2518'>            ds = tens[k&amp;0xf];
<a name='L2519'>            j = k &gt;&gt; 4;
<a name='L2520'>            <b>if</b> (j &amp; <a href='../S/3095.html#L245' title='Defined at 245 in Python/dtoa.c.'>Bletch</a>) <font color='red'>{</font>
<a name='L2521'>                <i><font color='green'>/* prevent overflows */</font></i>
<a name='L2522'>                j &amp;= <a href='../S/3095.html#L245' title='Defined at 245 in Python/dtoa.c.'>Bletch</a> - 1;
<a name='L2523'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) /= bigtens[<a href='../S/3095.html#L1195' title='Defined at 1195 in Python/dtoa.c.'>n_bigtens</a>-1];
<a name='L2524'>                ieps++;
<a name='L2525'>            <font color='red'>}</font>
<a name='L2526'>            <b>for</b>(; j; j &gt;&gt;= 1, i++)
<a name='L2527'>                <b>if</b> (j &amp; 1) <font color='red'>{</font>
<a name='L2528'>                    ieps++;
<a name='L2529'>                    ds *= bigtens[i];
<a name='L2530'>                <font color='red'>}</font>
<a name='L2531'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) /= ds;
<a name='L2532'>        <font color='red'>}</font>
<a name='L2533'>        <b>else</b> <b>if</b> ((j1 = -k)) <font color='red'>{</font>
<a name='L2534'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) *= tens[j1 &amp; 0xf];
<a name='L2535'>            <b>for</b>(j = j1 &gt;&gt; 4; j; j &gt;&gt;= 1, i++)
<a name='L2536'>                <b>if</b> (j &amp; 1) <font color='red'>{</font>
<a name='L2537'>                    ieps++;
<a name='L2538'>                    <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) *= bigtens[i];
<a name='L2539'>                <font color='red'>}</font>
<a name='L2540'>        <font color='red'>}</font>
<a name='L2541'>        <b>if</b> (k_check &amp;&amp; <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &lt; 1. &amp;&amp; ilim &gt; 0) <font color='red'>{</font>
<a name='L2542'>            <b>if</b> (ilim1 &lt;= 0)
<a name='L2543'>                <b>goto</b> fast_failed;
<a name='L2544'>            ilim = ilim1;
<a name='L2545'>            k--;
<a name='L2546'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) *= 10.;
<a name='L2547'>            ieps++;
<a name='L2548'>        <font color='red'>}</font>
<a name='L2549'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps) = ieps*<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) + 7.;
<a name='L2550'>        <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;eps) -= (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>-1)*<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>;
<a name='L2551'>        <b>if</b> (ilim == 0) <font color='red'>{</font>
<a name='L2552'>            <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> = mhi = 0;
<a name='L2553'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) -= 5.;
<a name='L2554'>            <b>if</b> (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &gt; <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps))
<a name='L2555'>                <b>goto</b> one_digit;
<a name='L2556'>            <b>if</b> (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &lt; -<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps))
<a name='L2557'>                <b>goto</b> no_digits;
<a name='L2558'>            <b>goto</b> fast_failed;
<a name='L2559'>        <font color='red'>}</font>
<a name='L2560'>        <b>if</b> (leftright) <font color='red'>{</font>
<a name='L2561'>            <i><font color='green'>/* Use Steele &amp; White method of only</font></i>
<a name='L2562'><i><font color='green'>             * generating digits needed.</font></i>
<a name='L2563'><i><font color='green'>             */</font></i>
<a name='L2564'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps) = 0.5/tens[ilim-1] - <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps);
<a name='L2565'>            <b>for</b>(i = 0;;) <font color='red'>{</font>
<a name='L2566'>                <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> = (<a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a>)<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u);
<a name='L2567'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) -= <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L2568'>                *s++ = '0' + (<b>int</b>)<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L2569'>                <b>if</b> (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &lt; <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps))
<a name='L2570'>                    <b>goto</b> ret1;
<a name='L2571'>                <b>if</b> (1. - <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &lt; <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps))
<a name='L2572'>                    <b>goto</b> bump_up;
<a name='L2573'>                <b>if</b> (++i &gt;= ilim)
<a name='L2574'>                    <b>break</b>;
<a name='L2575'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps) *= 10.;
<a name='L2576'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) *= 10.;
<a name='L2577'>            <font color='red'>}</font>
<a name='L2578'>        <font color='red'>}</font>
<a name='L2579'>        <b>else</b> <font color='red'>{</font>
<a name='L2580'>            <i><font color='green'>/* Generate ilim digits, then fix them up. */</font></i>
<a name='L2581'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps) *= tens[ilim-1];
<a name='L2582'>            <b>for</b>(i = 1;; i++, <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) *= 10.) <font color='red'>{</font>
<a name='L2583'>                <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> = (<a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a>)(<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u));
<a name='L2584'>                <b>if</b> (!(<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) -= <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>))
<a name='L2585'>                    ilim = i;
<a name='L2586'>                *s++ = '0' + (<b>int</b>)<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L2587'>                <b>if</b> (i == ilim) <font color='red'>{</font>
<a name='L2588'>                    <b>if</b> (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &gt; 0.5 + <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps))
<a name='L2589'>                        <b>goto</b> bump_up;
<a name='L2590'>                    <b>else</b> <b>if</b> (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &lt; 0.5 - <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;eps)) <font color='red'>{</font>
<a name='L2591'>                        <b>while</b>(*--s == '0');
<a name='L2592'>                        s++;
<a name='L2593'>                        <b>goto</b> ret1;
<a name='L2594'>                    <font color='red'>}</font>
<a name='L2595'>                    <b>break</b>;
<a name='L2596'>                <font color='red'>}</font>
<a name='L2597'>            <font color='red'>}</font>
<a name='L2598'>        <font color='red'>}</font>
<a name='L2599'>      fast_failed:
<a name='L2600'>        s = s0;
<a name='L2601'>        <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) = <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;d2);
<a name='L2602'>        k = k0;
<a name='L2603'>        ilim = ilim0;
<a name='L2604'>    <font color='red'>}</font>
<a name='L2605'>
<a name='L2606'>    <i><font color='green'>/* Do we have a "small" integer? */</font></i>
<a name='L2607'>
<a name='L2608'>    <b>if</b> (be &gt;= 0 &amp;&amp; k &lt;= <a href='../S/3095.html#L253' title='Defined at 253 in Python/dtoa.c.'>Int_max</a>) <font color='red'>{</font>
<a name='L2609'>        <i><font color='green'>/* Yes. */</font></i>
<a name='L2610'>        ds = tens[k];
<a name='L2611'>        <b>if</b> (ndigits &lt; 0 &amp;&amp; ilim &lt;= 0) <font color='red'>{</font>
<a name='L2612'>            <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> = mhi = 0;
<a name='L2613'>            <b>if</b> (ilim &lt; 0 || <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &lt;= 5*ds)
<a name='L2614'>                <b>goto</b> no_digits;
<a name='L2615'>            <b>goto</b> one_digit;
<a name='L2616'>        <font color='red'>}</font>
<a name='L2617'>        <b>for</b>(i = 1;; i++, <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) *= 10.) <font color='red'>{</font>
<a name='L2618'>            <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> = (<a href='../S/3095.html#L156' title='Defined at 156 in Python/dtoa.c.'>Long</a>)(<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) / ds);
<a name='L2619'>            <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) -= <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>*ds;
<a name='L2620'>            *s++ = '0' + (<b>int</b>)<a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a>;
<a name='L2621'>            <b>if</b> (!<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u)) <font color='red'>{</font>
<a name='L2622'>                <b>break</b>;
<a name='L2623'>            <font color='red'>}</font>
<a name='L2624'>            <b>if</b> (i == ilim) <font color='red'>{</font>
<a name='L2625'>                <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) += <a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u);
<a name='L2626'>                <b>if</b> (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) &gt; ds || (<a href='../S/3095.html#L197' title='Defined at 197 in Python/dtoa.c.'>dval</a>(&amp;u) == ds &amp;&amp; <a href='../D/1875.html' title='Multiple defined in 7 places.'>L</a> &amp; 1)) <font color='red'>{</font>
<a name='L2627'>                  bump_up:
<a name='L2628'>                    <b>while</b>(*--s == '9')
<a name='L2629'>                        <b>if</b> (s == s0) <font color='red'>{</font>
<a name='L2630'>                            k++;
<a name='L2631'>                            *s = '0';
<a name='L2632'>                            <b>break</b>;
<a name='L2633'>                        <font color='red'>}</font>
<a name='L2634'>                    ++*s++;
<a name='L2635'>                <font color='red'>}</font>
<a name='L2636'>                <b>break</b>;
<a name='L2637'>            <font color='red'>}</font>
<a name='L2638'>        <font color='red'>}</font>
<a name='L2639'>        <b>goto</b> ret1;
<a name='L2640'>    <font color='red'>}</font>
<a name='L2641'>
<a name='L2642'>    m2 = b2;
<a name='L2643'>    m5 = b5;
<a name='L2644'>    <b>if</b> (leftright) <font color='red'>{</font>
<a name='L2645'>        i =
<a name='L2646'>            denorm ? be + (<a href='../S/3095.html#L235' title='Defined at 235 in Python/dtoa.c.'>Bias</a> + (<a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a>-1) - 1 + 1) :
<a name='L2647'>            1 + <a href='../D/2444.html' title='Multiple defined in 2 places.'>P</a> - bbits;
<a name='L2648'>        b2 += i;
<a name='L2649'>        s2 += i;
<a name='L2650'>        mhi = <a href='../S/3095.html#L596' title='Defined at 596 in Python/dtoa.c.'>i2b</a>(1);
<a name='L2651'>        <b>if</b> (mhi == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2652'>            <b>goto</b> failed_malloc;
<a name='L2653'>    <font color='red'>}</font>
<a name='L2654'>    <b>if</b> (m2 &gt; 0 &amp;&amp; s2 &gt; 0) <font color='red'>{</font>
<a name='L2655'>        i = m2 &lt; s2 ? m2 : s2;
<a name='L2656'>        b2 -= i;
<a name='L2657'>        m2 -= i;
<a name='L2658'>        s2 -= i;
<a name='L2659'>    <font color='red'>}</font>
<a name='L2660'>    <b>if</b> (b5 &gt; 0) <font color='red'>{</font>
<a name='L2661'>        <b>if</b> (leftright) <font color='red'>{</font>
<a name='L2662'>            <b>if</b> (m5 &gt; 0) <font color='red'>{</font>
<a name='L2663'>                mhi = <a href='../D/10530.html' title='Multiple defined in 2 places.'>pow5mult</a>(mhi, m5);
<a name='L2664'>                <b>if</b> (mhi == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2665'>                    <b>goto</b> failed_malloc;
<a name='L2666'>                b1 = <a href='../S/3095.html#L612' title='Defined at 612 in Python/dtoa.c.'>mult</a>(mhi, <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2667'>                <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2668'>                <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = b1;
<a name='L2669'>                <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2670'>                    <b>goto</b> failed_malloc;
<a name='L2671'>            <font color='red'>}</font>
<a name='L2672'>            <b>if</b> ((j = b5 - m5)) <font color='red'>{</font>
<a name='L2673'>                <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../D/10530.html' title='Multiple defined in 2 places.'>pow5mult</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, j);
<a name='L2674'>                <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2675'>                    <b>goto</b> failed_malloc;
<a name='L2676'>            <font color='red'>}</font>
<a name='L2677'>        <font color='red'>}</font>
<a name='L2678'>        <b>else</b> <font color='red'>{</font>
<a name='L2679'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../D/10530.html' title='Multiple defined in 2 places.'>pow5mult</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, b5);
<a name='L2680'>            <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2681'>                <b>goto</b> failed_malloc;
<a name='L2682'>        <font color='red'>}</font>
<a name='L2683'>    <font color='red'>}</font>
<a name='L2684'>    <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> = <a href='../S/3095.html#L596' title='Defined at 596 in Python/dtoa.c.'>i2b</a>(1);
<a name='L2685'>    <b>if</b> (<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2686'>        <b>goto</b> failed_malloc;
<a name='L2687'>    <b>if</b> (s5 &gt; 0) <font color='red'>{</font>
<a name='L2688'>        <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> = <a href='../D/10530.html' title='Multiple defined in 2 places.'>pow5mult</a>(<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>, s5);
<a name='L2689'>        <b>if</b> (<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2690'>            <b>goto</b> failed_malloc;
<a name='L2691'>    <font color='red'>}</font>
<a name='L2692'>
<a name='L2693'>    <i><font color='green'>/* Check for special case that d is a normalized power of 2. */</font></i>
<a name='L2694'>
<a name='L2695'>    spec_case = 0;
<a name='L2696'>    <b>if</b> ((mode &lt; 2 || leftright)
<a name='L2697'>        ) <font color='red'>{</font>
<a name='L2698'>        <b>if</b> (!<a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;u) &amp;&amp; !(<a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) &amp; <a href='../S/3095.html#L246' title='Defined at 246 in Python/dtoa.c.'>Bndry_mask</a>)
<a name='L2699'>            &amp;&amp; <a href='../D/12343.html' title='Multiple defined in 2 places.'>word0</a>(&amp;u) &amp; (<a href='../S/3095.html#L232' title='Defined at 232 in Python/dtoa.c.'>Exp_mask</a> &amp; ~<a href='../S/3095.html#L230' title='Defined at 230 in Python/dtoa.c.'>Exp_msk1</a>)
<a name='L2700'>            ) <font color='red'>{</font>
<a name='L2701'>            <i><font color='green'>/* The special case */</font></i>
<a name='L2702'>            b2 += <a href='../S/3095.html#L249' title='Defined at 249 in Python/dtoa.c.'>Log2P</a>;
<a name='L2703'>            s2 += <a href='../S/3095.html#L249' title='Defined at 249 in Python/dtoa.c.'>Log2P</a>;
<a name='L2704'>            spec_case = 1;
<a name='L2705'>        <font color='red'>}</font>
<a name='L2706'>    <font color='red'>}</font>
<a name='L2707'>
<a name='L2708'>    <i><font color='green'>/* Arrange for convenient computation of quotients:</font></i>
<a name='L2709'><i><font color='green'>     * shift left if necessary so divisor has 4 leading 0 bits.</font></i>
<a name='L2710'><i><font color='green'>     *</font></i>
<a name='L2711'><i><font color='green'>     * Perhaps we should just compute leading 28 bits of S once</font></i>
<a name='L2712'><i><font color='green'>     * and for all and pass them and a shift to quorem, so it</font></i>
<a name='L2713'><i><font color='green'>     * can do shifts and ors to compute the numerator for q.</font></i>
<a name='L2714'><i><font color='green'>     */</font></i>
<a name='L2715'><font color='darkred'>#define</font> iInc 28
<a name='L2716'>    i = <a href='../S/3095.html#L1203' title='Defined at 1203 in Python/dtoa.c.'>dshift</a>(<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>, s2);
<a name='L2717'>    b2 += i;
<a name='L2718'>    m2 += i;
<a name='L2719'>    s2 += i;
<a name='L2720'>    <b>if</b> (b2 &gt; 0) <font color='red'>{</font>
<a name='L2721'>        <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, b2);
<a name='L2722'>        <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2723'>            <b>goto</b> failed_malloc;
<a name='L2724'>    <font color='red'>}</font>
<a name='L2725'>    <b>if</b> (s2 &gt; 0) <font color='red'>{</font>
<a name='L2726'>        <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>, s2);
<a name='L2727'>        <b>if</b> (<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2728'>            <b>goto</b> failed_malloc;
<a name='L2729'>    <font color='red'>}</font>
<a name='L2730'>    <b>if</b> (k_check) <font color='red'>{</font>
<a name='L2731'>        <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>,<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>) &lt; 0) <font color='red'>{</font>
<a name='L2732'>            k--;
<a name='L2733'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 10, 0);      <i><font color='green'>/* we botched the k estimate */</font></i>
<a name='L2734'>            <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2735'>                <b>goto</b> failed_malloc;
<a name='L2736'>            <b>if</b> (leftright) <font color='red'>{</font>
<a name='L2737'>                mhi = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(mhi, 10, 0);
<a name='L2738'>                <b>if</b> (mhi == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2739'>                    <b>goto</b> failed_malloc;
<a name='L2740'>            <font color='red'>}</font>
<a name='L2741'>            ilim = ilim1;
<a name='L2742'>        <font color='red'>}</font>
<a name='L2743'>    <font color='red'>}</font>
<a name='L2744'>    <b>if</b> (ilim &lt;= 0 &amp;&amp; (mode == 3 || mode == 5)) <font color='red'>{</font>
<a name='L2745'>        <b>if</b> (ilim &lt; 0) <font color='red'>{</font>
<a name='L2746'>            <i><font color='green'>/* no digits, fcvt style */</font></i>
<a name='L2747'>          no_digits:
<a name='L2748'>            k = -1 - ndigits;
<a name='L2749'>            <b>goto</b> ret;
<a name='L2750'>        <font color='red'>}</font>
<a name='L2751'>        <b>else</b> <font color='red'>{</font>
<a name='L2752'>            <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>, 5, 0);
<a name='L2753'>            <b>if</b> (<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2754'>                <b>goto</b> failed_malloc;
<a name='L2755'>            <b>if</b> (<a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>) &lt;= 0)
<a name='L2756'>                <b>goto</b> no_digits;
<a name='L2757'>        <font color='red'>}</font>
<a name='L2758'>      one_digit:
<a name='L2759'>        *s++ = '1';
<a name='L2760'>        k++;
<a name='L2761'>        <b>goto</b> ret;
<a name='L2762'>    <font color='red'>}</font>
<a name='L2763'>    <b>if</b> (leftright) <font color='red'>{</font>
<a name='L2764'>        <b>if</b> (m2 &gt; 0) <font color='red'>{</font>
<a name='L2765'>            mhi = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(mhi, m2);
<a name='L2766'>            <b>if</b> (mhi == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2767'>                <b>goto</b> failed_malloc;
<a name='L2768'>        <font color='red'>}</font>
<a name='L2769'>
<a name='L2770'>        <i><font color='green'>/* Compute mlo -- check for special case</font></i>
<a name='L2771'><i><font color='green'>         * that d is a normalized power of 2.</font></i>
<a name='L2772'><i><font color='green'>         */</font></i>
<a name='L2773'>
<a name='L2774'>        mlo = mhi;
<a name='L2775'>        <b>if</b> (spec_case) <font color='red'>{</font>
<a name='L2776'>            mhi = <a href='../D/416.html' title='Multiple defined in 2 places.'>Balloc</a>(mhi-&gt;k);
<a name='L2777'>            <b>if</b> (mhi == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2778'>                <b>goto</b> failed_malloc;
<a name='L2779'>            <a href='../S/3095.html#L422' title='Defined at 422 in Python/dtoa.c.'>Bcopy</a>(mhi, mlo);
<a name='L2780'>            mhi = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(mhi, <a href='../S/3095.html#L249' title='Defined at 249 in Python/dtoa.c.'>Log2P</a>);
<a name='L2781'>            <b>if</b> (mhi == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2782'>                <b>goto</b> failed_malloc;
<a name='L2783'>        <font color='red'>}</font>
<a name='L2784'>
<a name='L2785'>        <b>for</b>(i = 1;;i++) <font color='red'>{</font>
<a name='L2786'>            dig = <a href='../S/3095.html#L1216' title='Defined at 1216 in Python/dtoa.c.'>quorem</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>,<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>) + '0';
<a name='L2787'>            <i><font color='green'>/* Do we yet have the shortest decimal string</font></i>
<a name='L2788'><i><font color='green'>             * that will round to d?</font></i>
<a name='L2789'><i><font color='green'>             */</font></i>
<a name='L2790'>            j = <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, mlo);
<a name='L2791'>            delta = <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a>(<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>, mhi);
<a name='L2792'>            <b>if</b> (delta == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2793'>                <b>goto</b> failed_malloc;
<a name='L2794'>            j1 = delta-&gt;sign ? 1 : <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, delta);
<a name='L2795'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(delta);
<a name='L2796'>            <b>if</b> (j1 == 0 &amp;&amp; mode != 1 &amp;&amp; !(<a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;u) &amp; 1)
<a name='L2797'>                ) <font color='red'>{</font>
<a name='L2798'>                <b>if</b> (dig == '9')
<a name='L2799'>                    <b>goto</b> round_9_up;
<a name='L2800'>                <b>if</b> (j &gt; 0)
<a name='L2801'>                    dig++;
<a name='L2802'>                *s++ = dig;
<a name='L2803'>                <b>goto</b> ret;
<a name='L2804'>            <font color='red'>}</font>
<a name='L2805'>            <b>if</b> (j &lt; 0 || (j == 0 &amp;&amp; mode != 1
<a name='L2806'>                          &amp;&amp; !(<a href='../D/12344.html' title='Multiple defined in 2 places.'>word1</a>(&amp;u) &amp; 1)
<a name='L2807'>                    )) <font color='red'>{</font>
<a name='L2808'>                <b>if</b> (!<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] &amp;&amp; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds &lt;= 1) <font color='red'>{</font>
<a name='L2809'>                    <b>goto</b> accept_dig;
<a name='L2810'>                <font color='red'>}</font>
<a name='L2811'>                <b>if</b> (j1 &gt; 0) <font color='red'>{</font>
<a name='L2812'>                    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 1);
<a name='L2813'>                    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2814'>                        <b>goto</b> failed_malloc;
<a name='L2815'>                    j1 = <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>);
<a name='L2816'>                    <b>if</b> ((j1 &gt; 0 || (j1 == 0 &amp;&amp; dig &amp; 1))
<a name='L2817'>                        &amp;&amp; dig++ == '9')
<a name='L2818'>                        <b>goto</b> round_9_up;
<a name='L2819'>                <font color='red'>}</font>
<a name='L2820'>              accept_dig:
<a name='L2821'>                *s++ = dig;
<a name='L2822'>                <b>goto</b> ret;
<a name='L2823'>            <font color='red'>}</font>
<a name='L2824'>            <b>if</b> (j1 &gt; 0) <font color='red'>{</font>
<a name='L2825'>                <b>if</b> (dig == '9') <font color='red'>{</font> <i><font color='green'>/* possible if i == 1 */</font></i>
<a name='L2826'>                  round_9_up:
<a name='L2827'>                    *s++ = '9';
<a name='L2828'>                    <b>goto</b> roundoff;
<a name='L2829'>                <font color='red'>}</font>
<a name='L2830'>                *s++ = dig + 1;
<a name='L2831'>                <b>goto</b> ret;
<a name='L2832'>            <font color='red'>}</font>
<a name='L2833'>            *s++ = dig;
<a name='L2834'>            <b>if</b> (i == ilim)
<a name='L2835'>                <b>break</b>;
<a name='L2836'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 10, 0);
<a name='L2837'>            <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2838'>                <b>goto</b> failed_malloc;
<a name='L2839'>            <b>if</b> (mlo == mhi) <font color='red'>{</font>
<a name='L2840'>                mlo = mhi = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(mhi, 10, 0);
<a name='L2841'>                <b>if</b> (mlo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2842'>                    <b>goto</b> failed_malloc;
<a name='L2843'>            <font color='red'>}</font>
<a name='L2844'>            <b>else</b> <font color='red'>{</font>
<a name='L2845'>                mlo = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(mlo, 10, 0);
<a name='L2846'>                <b>if</b> (mlo == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2847'>                    <b>goto</b> failed_malloc;
<a name='L2848'>                mhi = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(mhi, 10, 0);
<a name='L2849'>                <b>if</b> (mhi == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2850'>                    <b>goto</b> failed_malloc;
<a name='L2851'>            <font color='red'>}</font>
<a name='L2852'>        <font color='red'>}</font>
<a name='L2853'>    <font color='red'>}</font>
<a name='L2854'>    <b>else</b>
<a name='L2855'>        <b>for</b>(i = 1;; i++) <font color='red'>{</font>
<a name='L2856'>            *s++ = dig = <a href='../S/3095.html#L1216' title='Defined at 1216 in Python/dtoa.c.'>quorem</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>,<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>) + '0';
<a name='L2857'>            <b>if</b> (!<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;x[0] &amp;&amp; <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>-&gt;wds &lt;= 1) <font color='red'>{</font>
<a name='L2858'>                <b>goto</b> ret;
<a name='L2859'>            <font color='red'>}</font>
<a name='L2860'>            <b>if</b> (i &gt;= ilim)
<a name='L2861'>                <b>break</b>;
<a name='L2862'>            <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L430' title='Defined at 430 in Python/dtoa.c.'>multadd</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 10, 0);
<a name='L2863'>            <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2864'>                <b>goto</b> failed_malloc;
<a name='L2865'>        <font color='red'>}</font>
<a name='L2866'>
<a name='L2867'>    <i><font color='green'>/* Round off last digit */</font></i>
<a name='L2868'>
<a name='L2869'>    <a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> = <a href='../S/3095.html#L826' title='Defined at 826 in Python/dtoa.c.'>lshift</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, 1);
<a name='L2870'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L2871'>        <b>goto</b> failed_malloc;
<a name='L2872'>    j = <a href='../S/3095.html#L873' title='Defined at 873 in Python/dtoa.c.'>cmp</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>, <a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>);
<a name='L2873'>    <b>if</b> (j &gt; 0 || (j == 0 &amp;&amp; dig &amp; 1)) <font color='red'>{</font>
<a name='L2874'>      roundoff:
<a name='L2875'>        <b>while</b>(*--s == '9')
<a name='L2876'>            <b>if</b> (s == s0) <font color='red'>{</font>
<a name='L2877'>                k++;
<a name='L2878'>                *s++ = '1';
<a name='L2879'>                <b>goto</b> ret;
<a name='L2880'>            <font color='red'>}</font>
<a name='L2881'>        ++*s++;
<a name='L2882'>    <font color='red'>}</font>
<a name='L2883'>    <b>else</b> <font color='red'>{</font>
<a name='L2884'>        <b>while</b>(*--s == '0');
<a name='L2885'>        s++;
<a name='L2886'>    <font color='red'>}</font>
<a name='L2887'>  ret:
<a name='L2888'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>);
<a name='L2889'>    <b>if</b> (mhi) <font color='red'>{</font>
<a name='L2890'>        <b>if</b> (mlo &amp;&amp; mlo != mhi)
<a name='L2891'>            <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(mlo);
<a name='L2892'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(mhi);
<a name='L2893'>    <font color='red'>}</font>
<a name='L2894'>  ret1:
<a name='L2895'>    <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2896'>    *s = 0;
<a name='L2897'>    *decpt = k + 1;
<a name='L2898'>    <b>if</b> (rve)
<a name='L2899'>        *rve = s;
<a name='L2900'>    <b>return</b> s0;
<a name='L2901'>  failed_malloc:
<a name='L2902'>    <b>if</b> (<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>)
<a name='L2903'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/4558.html' title='Multiple defined in 3 places.'>S</a>);
<a name='L2904'>    <b>if</b> (mlo &amp;&amp; mlo != mhi)
<a name='L2905'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(mlo);
<a name='L2906'>    <b>if</b> (mhi)
<a name='L2907'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(mhi);
<a name='L2908'>    <b>if</b> (<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>)
<a name='L2909'>        <a href='../D/438.html' title='Multiple defined in 2 places.'>Bfree</a>(<a href='../D/6949.html' title='Multiple defined in 12 places.'>b</a>);
<a name='L2910'>    <b>if</b> (s0)
<a name='L2911'>        <a href='../S/3095.html#L2268' title='Defined at 2268 in Python/dtoa.c.'>_Py_dg_freedtoa</a>(s0);
<a name='L2912'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L2913'><font color='red'>}</font>
<a name='L2914'><font color='darkred'>#ifdef</font> __cplusplus
<a name='L2915'><font color='red'>}</font>
<a name='L2916'><font color='darkred'>#endif</font>
<a name='L2917'>
<a name='L2918'><font color='darkred'>#endif</font>  <i><font color='green'>/* PY_NO_SHORT_FLOAT_REPR */</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L337'>[^]</a><a href='#L2314'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
