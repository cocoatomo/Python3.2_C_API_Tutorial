<html>
<head>
<title>Modules/selectmodule.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/selectmodule.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L67'>[^]</a><a href='#L1776'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L67' title='Defined at 67.'>reap_obj</a>
<li><a href='#L82' title='Defined at 82.'>seq2set</a>
<li><a href='#L145' title='Defined at 145.'>set2list</a>
<li><a href='#L191' title='Defined at 191.'>select_select</a>
<li><a href='#L336' title='Defined at 336.'>update_ufd_array</a>
<li><a href='#L368' title='Defined at 368.'>poll_register</a>
<li><a href='#L411' title='Defined at 411.'>poll_modify</a>
<li><a href='#L456' title='Defined at 456.'>poll_unregister</a>
<li><a href='#L490' title='Defined at 490.'>poll_poll</a>
<li><a href='#L594' title='Defined at 594.'>newPollObject</a>
<li><a href='#L613' title='Defined at 613.'>poll_dealloc</a>
<li><a href='#L660' title='Defined at 660.'>select_poll</a>
<li><a href='#L671' title='Defined at 671.'>select_have_broken_poll</a>
<li><a href='#L718' title='Defined at 718.'>pyepoll_err_closed</a>
<li><a href='#L725' title='Defined at 725.'>pyepoll_internal_close</a>
<li><a href='#L740' title='Defined at 740.'>newPyEpoll_Object</a>
<li><a href='#L777' title='Defined at 777.'>pyepoll_new</a>
<li><a href='#L791' title='Defined at 791.'>pyepoll_dealloc</a>
<li><a href='#L798' title='Defined at 798.'>pyepoll_close</a>
<li><a href='#L815' title='Defined at 815.'>pyepoll_get_closed</a>
<li><a href='#L824' title='Defined at 824.'>pyepoll_fileno</a>
<li><a href='#L837' title='Defined at 837.'>pyepoll_fromfd</a>
<li><a href='#L853' title='Defined at 853.'>pyepoll_internal_ctl</a>
<li><a href='#L902' title='Defined at 902.'>pyepoll_register</a>
<li><a href='#L927' title='Defined at 927.'>pyepoll_modify</a>
<li><a href='#L948' title='Defined at 948.'>pyepoll_unregister</a>
<li><a href='#L967' title='Defined at 967.'>pyepoll_poll</a>
<li><a href='#L1235' title='Defined at 1235.'>kqueue_event_repr</a>
<li><a href='#L1248' title='Defined at 1248.'>kqueue_event_init</a>
<li><a href='#L1276' title='Defined at 1276.'>kqueue_event_richcompare</a>
<li><a href='#L1368' title='Defined at 1368.'>kqueue_queue_err_closed</a>
<li><a href='#L1375' title='Defined at 1375.'>kqueue_queue_internal_close</a>
<li><a href='#L1390' title='Defined at 1390.'>newKqueue_Object</a>
<li><a href='#L1416' title='Defined at 1416.'>kqueue_queue_new</a>
<li><a href='#L1430' title='Defined at 1430.'>kqueue_queue_dealloc</a>
<li><a href='#L1437' title='Defined at 1437.'>kqueue_queue_close</a>
<li><a href='#L1454' title='Defined at 1454.'>kqueue_queue_get_closed</a>
<li><a href='#L1463' title='Defined at 1463.'>kqueue_queue_fileno</a>
<li><a href='#L1476' title='Defined at 1476.'>kqueue_queue_fromfd</a>
<li><a href='#L1492' title='Defined at 1492.'>kqueue_queue_control</a>
<li><a href='#L1776' title='Defined at 1776.'>PyInit_select</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/* select - Module containing unix select(2) call.</font></i>
<a name='L2'><i><font color='green'>   Under Unix, the file descriptors are small integers.</font></i>
<a name='L3'><i><font color='green'>   Under Win32, select only exists for sockets, and sockets may</font></i>
<a name='L4'><i><font color='green'>   have any value except INVALID_SOCKET.</font></i>
<a name='L5'><i><font color='green'>*/</font></i>
<a name='L6'>
<a name='L7'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L8'><font color='darkred'>#include</font> &lt;<a href='577.html'>structmember.h</a>&gt;
<a name='L9'>
<a name='L10'><font color='darkred'>#ifdef</font> __APPLE__
<a name='L11'>    <i><font color='green'>/* Perform runtime testing for a broken poll on OSX to make it easier</font></i>
<a name='L12'><i><font color='green'>     * to use the same binary on multiple releases of the OS.</font></i>
<a name='L13'><i><font color='green'>     */</font></i>
<a name='L14'><font color='darkred'>#undef</font> <a href='../S/2704.html#L316' title='Refered from 316 in Modules/selectmodule.c.'>HAVE_BROKEN_POLL</a>
<a name='L15'><font color='darkred'>#endif</font>
<a name='L16'>
<a name='L17'><i><font color='green'>/* Windows #defines FD_SETSIZE to 64 if FD_SETSIZE isn't already defined.</font></i>
<a name='L18'><i><font color='green'>   64 is too small (too many people have bumped into that limit).</font></i>
<a name='L19'><i><font color='green'>   Here we boost it.</font></i>
<a name='L20'><i><font color='green'>   Users who want even more than the boosted limit should #define</font></i>
<a name='L21'><i><font color='green'>   FD_SETSIZE higher before this; e.g., via compiler /D switch.</font></i>
<a name='L22'><i><font color='green'>*/</font></i>
<a name='L23'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>) &amp;&amp; !<b>defined</b>(<a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a>)
<a name='L24'><font color='darkred'>#define</font> <a href='../R/1002.html' title='Multiple refered from 20 places.'>FD_SETSIZE</a> 512
<a name='L25'><font color='darkred'>#endif</font>
<a name='L26'>
<a name='L27'><font color='darkred'>#if</font> <b>defined</b>(HAVE_POLL_H)
<a name='L28'><font color='darkred'>#include</font> &lt;poll.h&gt;
<a name='L29'><font color='darkred'>#elif</font> <b>defined</b>(HAVE_SYS_POLL_H)
<a name='L30'><font color='darkred'>#include</font> &lt;sys/poll.h&gt;
<a name='L31'><font color='darkred'>#endif</font>
<a name='L32'>
<a name='L33'><font color='darkred'>#ifdef</font> __sgi
<a name='L34'><i><font color='green'>/* This is missing from unistd.h */</font></i>
<a name='L35'><b>extern</b> <b>void</b> bzero(<b>void</b> *, <b>int</b>);
<a name='L36'><font color='darkred'>#endif</font>
<a name='L37'>
<a name='L38'><font color='darkred'>#ifdef</font> <a href='../D/1582.html' title='Multiple defined in 4 places.'>HAVE_SYS_TYPES_H</a>
<a name='L39'><font color='darkred'>#include</font> &lt;sys/types.h&gt;
<a name='L40'><font color='darkred'>#endif</font>
<a name='L41'>
<a name='L42'><font color='darkred'>#if</font> <b>defined</b>(<a href='../D/2567.html' title='Multiple defined in 2 places.'>PYOS_OS2</a>) &amp;&amp; !<b>defined</b>(<a href='../S/2894.html#L13' title='Defined at 13 in PC/os2emx/pyconfig.h.'>PYCC_GCC</a>)
<a name='L43'><font color='darkred'>#include</font> &lt;sys/time.h&gt;
<a name='L44'><font color='darkred'>#include</font> &lt;utils.h&gt;
<a name='L45'><font color='darkred'>#endif</font>
<a name='L46'>
<a name='L47'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L48'><font color='darkred'>#  define</font> WIN32_LEAN_AND_MEAN
<a name='L49'><font color='darkred'>#  include</font> &lt;winsock.h&gt;
<a name='L50'><font color='darkred'>#else</font>
<a name='L51'><font color='darkred'>#  define</font> <a href='../R/4201.html' title='Multiple refered from 16 places.'>SOCKET</a> <b>int</b>
<a name='L52'><font color='darkred'>#  if</font> <b>defined</b>(__VMS)
<a name='L53'><font color='darkred'>#    include</font> &lt;socket.h&gt;
<a name='L54'><font color='darkred'>#  endif</font>
<a name='L55'><font color='darkred'>#endif</font>
<a name='L56'>
<a name='L57'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *SelectError;
<a name='L58'>
<a name='L59'><i><font color='green'>/* list of Python objects and their file descriptor */</font></i>
<a name='L60'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L61'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *obj;                           <i><font color='green'>/* owned reference */</font></i>
<a name='L62'>    <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> fd;
<a name='L63'>    <b>int</b> sentinel;                            <i><font color='green'>/* -1 == sentinel */</font></i>
<a name='L64'><font color='red'>}</font> <a href='../R/9825.html' title='Multiple refered from 7 places.'>pylist</a>;
<a name='L65'>
<a name='L66'><b>static</b> <b>void</b>
<a name='L67'><a href='../R/9979.html' title='Multiple refered from 3 places.'>reap_obj</a>(pylist fd2obj[<a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1])
<a name='L68'><font color='red'>{</font>
<a name='L69'>    <b>int</b> i;
<a name='L70'>    <b>for</b> (i = 0; i &lt; <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1 &amp;&amp; fd2obj[i].sentinel &gt;= 0; i++) <font color='red'>{</font>
<a name='L71'>        <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(fd2obj[i].obj);
<a name='L72'>        fd2obj[i].obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L73'>    <font color='red'>}</font>
<a name='L74'>    fd2obj[0].sentinel = -1;
<a name='L75'><font color='red'>}</font>
<a name='L76'>
<a name='L77'>
<a name='L78'><i><font color='green'>/* returns -1 and sets the Python exception if an error occurred, otherwise</font></i>
<a name='L79'><i><font color='green'>   returns a number &gt;= 0</font></i>
<a name='L80'><i><font color='green'>*/</font></i>
<a name='L81'><b>static</b> <b>int</b>
<a name='L82'><a href='../R/10161.html' title='Multiple refered from 3 places.'>seq2set</a>(PyObject *seq, fd_set *set, pylist fd2obj[<a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1])
<a name='L83'><font color='red'>{</font>
<a name='L84'>    <b>int</b> <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> = -1;
<a name='L85'>    <b>int</b> index = 0;
<a name='L86'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, len = -1;
<a name='L87'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* fast_seq = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L88'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>* o = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L89'>
<a name='L90'>    fd2obj[0].obj = (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*)0;            <i><font color='green'>/* set list to zero size */</font></i>
<a name='L91'>    FD_ZERO(set);
<a name='L92'>
<a name='L93'>    fast_seq = <a href='../S/2775.html#L1836' title='Defined at 1836 in Objects/abstract.c.'>PySequence_Fast</a>(seq, "arguments 1-3 must be sequences");
<a name='L94'>    <b>if</b> (!fast_seq)
<a name='L95'>        <b>return</b> -1;
<a name='L96'>
<a name='L97'>    len = PySequence_Fast_GET_SIZE(fast_seq);
<a name='L98'>
<a name='L99'>    <b>for</b> (i = 0; i &lt; len; i++)  <font color='red'>{</font>
<a name='L100'>        <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> v;
<a name='L101'>
<a name='L102'>        <i><font color='green'>/* any intervening fileno() calls could decr this refcnt */</font></i>
<a name='L103'>        <b>if</b> (!(o = PySequence_Fast_GET_ITEM(fast_seq, i)))
<a name='L104'>            <b>return</b> -1;
<a name='L105'>
<a name='L106'>        Py_INCREF(o);
<a name='L107'>        v = <a href='../S/2790.html#L197' title='Defined at 197 in Objects/fileobject.c.'>PyObject_AsFileDescriptor</a>( o );
<a name='L108'>        <b>if</b> (v == -1) <b>goto</b> finally;
<a name='L109'>
<a name='L110'><font color='darkred'>#if</font> <b>defined</b>(_MSC_VER)
<a name='L111'>        <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> = 0;                             <i><font color='green'>/* not used for Win32 */</font></i>
<a name='L112'><font color='darkred'>#else</font>  <i><font color='green'>/* !_MSC_VER */</font></i>
<a name='L113'>        <b>if</b> (v &lt; 0 || v &gt;= <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a>) <font color='red'>{</font>
<a name='L114'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L115'>                        "filedescriptor out of range in select()");
<a name='L116'>            <b>goto</b> finally;
<a name='L117'>        <font color='red'>}</font>
<a name='L118'>        <b>if</b> (v &gt; <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>)
<a name='L119'>            <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> = v;
<a name='L120'><font color='darkred'>#endif</font> <i><font color='green'>/* _MSC_VER */</font></i>
<a name='L121'>        FD_SET(v, set);
<a name='L122'>
<a name='L123'>        <i><font color='green'>/* add object and its file descriptor to the list */</font></i>
<a name='L124'>        <b>if</b> (index &gt;= <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a>) <font color='red'>{</font>
<a name='L125'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L126'>                          "too many file descriptors in select()");
<a name='L127'>            <b>goto</b> finally;
<a name='L128'>        <font color='red'>}</font>
<a name='L129'>        fd2obj[index].obj = o;
<a name='L130'>        fd2obj[index].fd = v;
<a name='L131'>        fd2obj[index].sentinel = 0;
<a name='L132'>        fd2obj[++index].sentinel = -1;
<a name='L133'>    <font color='red'>}</font>
<a name='L134'>    Py_DECREF(fast_seq);
<a name='L135'>    <b>return</b> <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>+1;
<a name='L136'>
<a name='L137'>  finally:
<a name='L138'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(o);
<a name='L139'>    Py_DECREF(fast_seq);
<a name='L140'>    <b>return</b> -1;
<a name='L141'><font color='red'>}</font>
<a name='L142'>
<a name='L143'><i><font color='green'>/* returns NULL and sets the Python exception if an error occurred */</font></i>
<a name='L144'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L145'><a href='../R/10166.html' title='Multiple refered from 3 places.'>set2list</a>(fd_set *set, pylist fd2obj[<a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1])
<a name='L146'><font color='red'>{</font>
<a name='L147'>    <b>int</b> i, j, count=0;
<a name='L148'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *list, *o;
<a name='L149'>    <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> fd;
<a name='L150'>
<a name='L151'>    <b>for</b> (j = 0; fd2obj[j].sentinel &gt;= 0; j++) <font color='red'>{</font>
<a name='L152'>        <b>if</b> (FD_ISSET(fd2obj[j].fd, set))
<a name='L153'>            count++;
<a name='L154'>    <font color='red'>}</font>
<a name='L155'>    list = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(count);
<a name='L156'>    <b>if</b> (!list)
<a name='L157'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L158'>
<a name='L159'>    i = 0;
<a name='L160'>    <b>for</b> (j = 0; fd2obj[j].sentinel &gt;= 0; j++) <font color='red'>{</font>
<a name='L161'>        fd = fd2obj[j].fd;
<a name='L162'>        <b>if</b> (FD_ISSET(fd, set)) <font color='red'>{</font>
<a name='L163'><font color='darkred'>#ifndef</font> _MSC_VER
<a name='L164'>            <b>if</b> (fd &gt; <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a>) <font color='red'>{</font>
<a name='L165'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_SystemError,
<a name='L166'>               "filedescriptor out of range returned in select()");
<a name='L167'>                <b>goto</b> finally;
<a name='L168'>            <font color='red'>}</font>
<a name='L169'><font color='darkred'>#endif</font>
<a name='L170'>            o = fd2obj[j].obj;
<a name='L171'>            fd2obj[j].obj = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L172'>            <i><font color='green'>/* transfer ownership */</font></i>
<a name='L173'>            <b>if</b> (<a href='../S/2796.html#L199' title='Defined at 199 in Objects/listobject.c.'>PyList_SetItem</a>(list, i, o) &lt; 0)
<a name='L174'>                <b>goto</b> finally;
<a name='L175'>
<a name='L176'>            i++;
<a name='L177'>        <font color='red'>}</font>
<a name='L178'>    <font color='red'>}</font>
<a name='L179'>    <b>return</b> list;
<a name='L180'>  finally:
<a name='L181'>    Py_DECREF(list);
<a name='L182'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L183'><font color='red'>}</font>
<a name='L184'>
<a name='L185'><font color='darkred'>#undef</font> <a href='../R/4042.html' title='Multiple refered from 3 places.'>SELECT_USES_HEAP</a>
<a name='L186'><font color='darkred'>#if</font> <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> &gt; 1024
<a name='L187'><font color='darkred'>#define</font> <a href='../R/4042.html' title='Multiple refered from 3 places.'>SELECT_USES_HEAP</a>
<a name='L188'><font color='darkred'>#endif</font> <i><font color='green'>/* FD_SETSIZE &gt; 1024 */</font></i>
<a name='L189'>
<a name='L190'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L191'><a href='../S/2704.html#L1749' title='Refered from 1749 in Modules/selectmodule.c.'>select_select</a>(PyObject *self, PyObject *args)
<a name='L192'><font color='red'>{</font>
<a name='L193'><font color='darkred'>#ifdef</font> <a href='../D/4584.html' title='Multiple defined in 2 places.'>SELECT_USES_HEAP</a>
<a name='L194'>    <a href='../S/2704.html#L64' title='Defined at 64 in Modules/selectmodule.c.'>pylist</a> *rfd2obj, *wfd2obj, *efd2obj;
<a name='L195'><font color='darkred'>#else</font>  <i><font color='green'>/* !SELECT_USES_HEAP */</font></i>
<a name='L196'>    <i><font color='green'>/* XXX: All this should probably be implemented as follows:</font></i>
<a name='L197'><i><font color='green'>     * - find the highest descriptor we're interested in</font></i>
<a name='L198'><i><font color='green'>     * - add one</font></i>
<a name='L199'><i><font color='green'>     * - that's the size</font></i>
<a name='L200'><i><font color='green'>     * See: Stevens, APitUE, $12.5.1</font></i>
<a name='L201'><i><font color='green'>     */</font></i>
<a name='L202'>    <a href='../S/2704.html#L64' title='Defined at 64 in Modules/selectmodule.c.'>pylist</a> rfd2obj[<a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1];
<a name='L203'>    <a href='../S/2704.html#L64' title='Defined at 64 in Modules/selectmodule.c.'>pylist</a> wfd2obj[<a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1];
<a name='L204'>    <a href='../S/2704.html#L64' title='Defined at 64 in Modules/selectmodule.c.'>pylist</a> efd2obj[<a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1];
<a name='L205'><font color='darkred'>#endif</font> <i><font color='green'>/* SELECT_USES_HEAP */</font></i>
<a name='L206'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ifdlist, *ofdlist, *efdlist;
<a name='L207'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L208'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *tout = Py_None;
<a name='L209'>    fd_set ifdset, ofdset, efdset;
<a name='L210'>    <b>double</b> timeout;
<a name='L211'>    <b>struct</b> timeval tv, *tvp;
<a name='L212'>    <b>long</b> seconds;
<a name='L213'>    <b>int</b> imax, omax, emax, <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>;
<a name='L214'>    <b>int</b> n;
<a name='L215'>
<a name='L216'>    <i><font color='green'>/* convert arguments */</font></i>
<a name='L217'>    <b>if</b> (!<a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "select", 3, 4,
<a name='L218'>                          &amp;ifdlist, &amp;ofdlist, &amp;efdlist, &amp;tout))
<a name='L219'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L220'>
<a name='L221'>    <b>if</b> (tout == Py_None)
<a name='L222'>        tvp = (<b>struct</b> timeval *)0;
<a name='L223'>    <b>else</b> <b>if</b> (!<a href='../S/2775.html#L736' title='Defined at 736 in Objects/abstract.c.'>PyNumber_Check</a>(tout)) <font color='red'>{</font>
<a name='L224'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L225'>                        "timeout must be a float or None");
<a name='L226'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L227'>    <font color='red'>}</font>
<a name='L228'>    <b>else</b> <font color='red'>{</font>
<a name='L229'>        timeout = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(tout);
<a name='L230'>        <b>if</b> (timeout == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L231'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L232'>        <b>if</b> (timeout &gt; (<b>double</b>)<a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>) <font color='red'>{</font>
<a name='L233'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L234'>                            "timeout period too long");
<a name='L235'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L236'>        <font color='red'>}</font>
<a name='L237'>        seconds = (<b>long</b>)timeout;
<a name='L238'>        timeout = timeout - (<b>double</b>)seconds;
<a name='L239'>        tv.tv_sec = seconds;
<a name='L240'>        tv.tv_usec = (<b>long</b>)(timeout * 1E6);
<a name='L241'>        tvp = &amp;tv;
<a name='L242'>    <font color='red'>}</font>
<a name='L243'>
<a name='L244'>
<a name='L245'><font color='darkred'>#ifdef</font> <a href='../D/4584.html' title='Multiple defined in 2 places.'>SELECT_USES_HEAP</a>
<a name='L246'>    <i><font color='green'>/* Allocate memory for the lists */</font></i>
<a name='L247'>    rfd2obj = PyMem_NEW(<a href='../S/2704.html#L64' title='Defined at 64 in Modules/selectmodule.c.'>pylist</a>, <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1);
<a name='L248'>    wfd2obj = PyMem_NEW(<a href='../S/2704.html#L64' title='Defined at 64 in Modules/selectmodule.c.'>pylist</a>, <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1);
<a name='L249'>    efd2obj = PyMem_NEW(<a href='../S/2704.html#L64' title='Defined at 64 in Modules/selectmodule.c.'>pylist</a>, <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a> + 1);
<a name='L250'>    <b>if</b> (rfd2obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || wfd2obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || efd2obj == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L251'>        <b>if</b> (rfd2obj) PyMem_DEL(rfd2obj);
<a name='L252'>        <b>if</b> (wfd2obj) PyMem_DEL(wfd2obj);
<a name='L253'>        <b>if</b> (efd2obj) PyMem_DEL(efd2obj);
<a name='L254'>        <b>return</b> <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L255'>    <font color='red'>}</font>
<a name='L256'><font color='darkred'>#endif</font> <i><font color='green'>/* SELECT_USES_HEAP */</font></i>
<a name='L257'>    <i><font color='green'>/* Convert sequences to fd_sets, and get maximum fd number</font></i>
<a name='L258'><i><font color='green'>     * propagates the Python exception set in seq2set()</font></i>
<a name='L259'><i><font color='green'>     */</font></i>
<a name='L260'>    rfd2obj[0].sentinel = -1;
<a name='L261'>    wfd2obj[0].sentinel = -1;
<a name='L262'>    efd2obj[0].sentinel = -1;
<a name='L263'>    <b>if</b> ((imax=<a href='../S/2704.html#L82' title='Defined at 82 in Modules/selectmodule.c.'>seq2set</a>(ifdlist, &amp;ifdset, rfd2obj)) &lt; 0)
<a name='L264'>        <b>goto</b> finally;
<a name='L265'>    <b>if</b> ((omax=<a href='../S/2704.html#L82' title='Defined at 82 in Modules/selectmodule.c.'>seq2set</a>(ofdlist, &amp;ofdset, wfd2obj)) &lt; 0)
<a name='L266'>        <b>goto</b> finally;
<a name='L267'>    <b>if</b> ((emax=<a href='../S/2704.html#L82' title='Defined at 82 in Modules/selectmodule.c.'>seq2set</a>(efdlist, &amp;efdset, efd2obj)) &lt; 0)
<a name='L268'>        <b>goto</b> finally;
<a name='L269'>    <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> = imax;
<a name='L270'>    <b>if</b> (omax &gt; <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>) <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> = omax;
<a name='L271'>    <b>if</b> (emax &gt; <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>) <a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a> = emax;
<a name='L272'>
<a name='L273'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L274'>    n = select(<a href='../S/2252.html#L6' title='Defined at 6 in Modules/_ctypes/ctypes.h.'>max</a>, &amp;ifdset, &amp;ofdset, &amp;efdset, tvp);
<a name='L275'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L276'>
<a name='L277'><font color='darkred'>#ifdef</font> <a href='../S/2906.html#L81' title='Defined at 81 in PC/pyconfig.h.'>MS_WINDOWS</a>
<a name='L278'>    <b>if</b> (n == SOCKET_ERROR) <font color='red'>{</font>
<a name='L279'>        <a href='../S/3106.html#L541' title='Defined at 541 in Python/errors.c.'>PyErr_SetExcFromWindowsErr</a>(SelectError, WSAGetLastError());
<a name='L280'>    <font color='red'>}</font>
<a name='L281'><font color='darkred'>#else</font>
<a name='L282'>    <b>if</b> (n &lt; 0) <font color='red'>{</font>
<a name='L283'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(SelectError);
<a name='L284'>    <font color='red'>}</font>
<a name='L285'><font color='darkred'>#endif</font>
<a name='L286'>    <b>else</b> <font color='red'>{</font>
<a name='L287'>        <i><font color='green'>/* any of these three calls can raise an exception.  it's more</font></i>
<a name='L288'><i><font color='green'>           convenient to test for this after all three calls... but</font></i>
<a name='L289'><i><font color='green'>           is that acceptable?</font></i>
<a name='L290'><i><font color='green'>        */</font></i>
<a name='L291'>        ifdlist = <a href='../S/2704.html#L145' title='Defined at 145 in Modules/selectmodule.c.'>set2list</a>(&amp;ifdset, rfd2obj);
<a name='L292'>        ofdlist = <a href='../S/2704.html#L145' title='Defined at 145 in Modules/selectmodule.c.'>set2list</a>(&amp;ofdset, wfd2obj);
<a name='L293'>        efdlist = <a href='../S/2704.html#L145' title='Defined at 145 in Modules/selectmodule.c.'>set2list</a>(&amp;efdset, efd2obj);
<a name='L294'>        <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L295'>            ret = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L296'>        <b>else</b>
<a name='L297'>            ret = <a href='../S/2823.html#L186' title='Defined at 186 in Objects/tupleobject.c.'>PyTuple_Pack</a>(3, ifdlist, ofdlist, efdlist);
<a name='L298'>
<a name='L299'>        Py_DECREF(ifdlist);
<a name='L300'>        Py_DECREF(ofdlist);
<a name='L301'>        Py_DECREF(efdlist);
<a name='L302'>    <font color='red'>}</font>
<a name='L303'>
<a name='L304'>  finally:
<a name='L305'>    <a href='../S/2704.html#L67' title='Defined at 67 in Modules/selectmodule.c.'>reap_obj</a>(rfd2obj);
<a name='L306'>    <a href='../S/2704.html#L67' title='Defined at 67 in Modules/selectmodule.c.'>reap_obj</a>(wfd2obj);
<a name='L307'>    <a href='../S/2704.html#L67' title='Defined at 67 in Modules/selectmodule.c.'>reap_obj</a>(efd2obj);
<a name='L308'><font color='darkred'>#ifdef</font> <a href='../D/4584.html' title='Multiple defined in 2 places.'>SELECT_USES_HEAP</a>
<a name='L309'>    PyMem_DEL(rfd2obj);
<a name='L310'>    PyMem_DEL(wfd2obj);
<a name='L311'>    PyMem_DEL(efd2obj);
<a name='L312'><font color='darkred'>#endif</font> <i><font color='green'>/* SELECT_USES_HEAP */</font></i>
<a name='L313'>    <b>return</b> ret;
<a name='L314'><font color='red'>}</font>
<a name='L315'>
<a name='L316'><font color='darkred'>#if</font> <b>defined</b>(HAVE_POLL) &amp;&amp; !<b>defined</b>(<a href='../S/2704.html#L14' title='Defined at 14 in Modules/selectmodule.c.'>HAVE_BROKEN_POLL</a>)
<a name='L317'><i><font color='green'>/*</font></i>
<a name='L318'><i><font color='green'> * poll() support</font></i>
<a name='L319'><i><font color='green'> */</font></i>
<a name='L320'>
<a name='L321'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L322'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L323'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *dict;
<a name='L324'>    <b>int</b> ufd_uptodate;
<a name='L325'>    <b>int</b> ufd_len;
<a name='L326'>    <b>struct</b> pollfd *ufds;
<a name='L327'><font color='red'>}</font> <a href='../R/9538.html' title='Multiple refered from 4 places.'>pollObject</a>;
<a name='L328'>
<a name='L329'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> poll_Type;
<a name='L330'>
<a name='L331'><i><font color='green'>/* Update the malloc'ed array of pollfds to match the dictionary</font></i>
<a name='L332'><i><font color='green'>   contained within a pollObject.  Return 1 on success, 0 on an error.</font></i>
<a name='L333'><i><font color='green'>*/</font></i>
<a name='L334'>
<a name='L335'><b>static</b> <b>int</b>
<a name='L336'><a href='../S/2704.html#L520' title='Refered from 520 in Modules/selectmodule.c.'>update_ufd_array</a>(pollObject *self)
<a name='L337'><font color='red'>{</font>
<a name='L338'>    <a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a> i, pos;
<a name='L339'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L340'>    <b>struct</b> pollfd *old_ufds = self-&gt;ufds;
<a name='L341'>
<a name='L342'>    self-&gt;ufd_len = <a href='../S/2787.html#L1620' title='Defined at 1620 in Objects/dictobject.c.'>PyDict_Size</a>(self-&gt;dict);
<a name='L343'>    PyMem_RESIZE(self-&gt;ufds, <b>struct</b> pollfd, self-&gt;ufd_len);
<a name='L344'>    <b>if</b> (self-&gt;ufds == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L345'>        self-&gt;ufds = old_ufds;
<a name='L346'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L347'>        <b>return</b> 0;
<a name='L348'>    <font color='red'>}</font>
<a name='L349'>
<a name='L350'>    i = pos = 0;
<a name='L351'>    <b>while</b> (<a href='../S/2787.html#L954' title='Defined at 954 in Objects/dictobject.c.'>PyDict_Next</a>(self-&gt;dict, &amp;pos, &amp;<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, &amp;<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) <font color='red'>{</font>
<a name='L352'>        self-&gt;ufds[i].fd = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L353'>        self-&gt;ufds[i].events = (<b>short</b>)<a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L354'>        i++;
<a name='L355'>    <font color='red'>}</font>
<a name='L356'>    self-&gt;ufd_uptodate = 1;
<a name='L357'>    <b>return</b> 1;
<a name='L358'><font color='red'>}</font>
<a name='L359'>
<a name='L360'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(poll_register_doc,
<a name='L361'>"register(fd [, eventmask] ) -&gt; None\n\n\
<a name='L362'>Register a file descriptor with the polling object.\n\
<a name='L363'>fd -- either an integer, or an object with a fileno() method returning an\n\
<a name='L364'>      int.\n\
<a name='L365'>events -- an optional bitmask describing the type of events to check for");
<a name='L366'>
<a name='L367'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L368'><a href='../S/2704.html#L582' title='Refered from 582 in Modules/selectmodule.c.'>poll_register</a>(pollObject *self, PyObject *args)
<a name='L369'><font color='red'>{</font>
<a name='L370'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *o, *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L371'>    <b>int</b> fd, events = POLLIN | POLLPRI | POLLOUT;
<a name='L372'>    <b>int</b> err;
<a name='L373'>
<a name='L374'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "O|i:register", &amp;o, &amp;events)) <font color='red'>{</font>
<a name='L375'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L376'>    <font color='red'>}</font>
<a name='L377'>
<a name='L378'>    fd = <a href='../S/2790.html#L197' title='Defined at 197 in Objects/fileobject.c.'>PyObject_AsFileDescriptor</a>(o);
<a name='L379'>    <b>if</b> (fd == -1) <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L380'>
<a name='L381'>    <i><font color='green'>/* Add entry to the internal dictionary: the key is the</font></i>
<a name='L382'><i><font color='green'>       file descriptor, and the value is the event mask. */</font></i>
<a name='L383'>    <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(fd);
<a name='L384'>    <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L385'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L386'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(events);
<a name='L387'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L388'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L389'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L390'>    <font color='red'>}</font>
<a name='L391'>    err = <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(self-&gt;dict, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L392'>    Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L393'>    Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L394'>    <b>if</b> (err &lt; 0)
<a name='L395'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L396'>
<a name='L397'>    self-&gt;ufd_uptodate = 0;
<a name='L398'>
<a name='L399'>    Py_INCREF(Py_None);
<a name='L400'>    <b>return</b> Py_None;
<a name='L401'><font color='red'>}</font>
<a name='L402'>
<a name='L403'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(poll_modify_doc,
<a name='L404'>"modify(fd, eventmask) -&gt; None\n\n\
<a name='L405'>Modify an already registered file descriptor.\n\
<a name='L406'>fd -- either an integer, or an object with a fileno() method returning an\n\
<a name='L407'>      int.\n\
<a name='L408'>events -- an optional bitmask describing the type of events to check for");
<a name='L409'>
<a name='L410'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L411'><a href='../S/2704.html#L584' title='Refered from 584 in Modules/selectmodule.c.'>poll_modify</a>(pollObject *self, PyObject *args)
<a name='L412'><font color='red'>{</font>
<a name='L413'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *o, *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>;
<a name='L414'>    <b>int</b> fd, events;
<a name='L415'>    <b>int</b> err;
<a name='L416'>
<a name='L417'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "Oi:modify", &amp;o, &amp;events)) <font color='red'>{</font>
<a name='L418'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L419'>    <font color='red'>}</font>
<a name='L420'>
<a name='L421'>    fd = <a href='../S/2790.html#L197' title='Defined at 197 in Objects/fileobject.c.'>PyObject_AsFileDescriptor</a>(o);
<a name='L422'>    <b>if</b> (fd == -1) <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L423'>
<a name='L424'>    <i><font color='green'>/* Modify registered fd */</font></i>
<a name='L425'>    <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(fd);
<a name='L426'>    <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L427'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L428'>    <b>if</b> (<a href='../S/2787.html#L704' title='Defined at 704 in Objects/dictobject.c.'>PyDict_GetItem</a>(self-&gt;dict, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>) == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L429'>        errno = ENOENT;
<a name='L430'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_IOError);
<a name='L431'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L432'>    <font color='red'>}</font>
<a name='L433'>    <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(events);
<a name='L434'>    <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L435'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L436'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L437'>    <font color='red'>}</font>
<a name='L438'>    err = <a href='../S/2787.html#L786' title='Defined at 786 in Objects/dictobject.c.'>PyDict_SetItem</a>(self-&gt;dict, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L439'>    Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L440'>    Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L441'>    <b>if</b> (err &lt; 0)
<a name='L442'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L443'>
<a name='L444'>    self-&gt;ufd_uptodate = 0;
<a name='L445'>
<a name='L446'>    Py_INCREF(Py_None);
<a name='L447'>    <b>return</b> Py_None;
<a name='L448'><font color='red'>}</font>
<a name='L449'>
<a name='L450'>
<a name='L451'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(poll_unregister_doc,
<a name='L452'>"unregister(fd) -&gt; None\n\n\
<a name='L453'>Remove a file descriptor being tracked by the polling object.");
<a name='L454'>
<a name='L455'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L456'><a href='../S/2704.html#L586' title='Refered from 586 in Modules/selectmodule.c.'>poll_unregister</a>(pollObject *self, PyObject *o)
<a name='L457'><font color='red'>{</font>
<a name='L458'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>;
<a name='L459'>    <b>int</b> fd;
<a name='L460'>
<a name='L461'>    fd = <a href='../S/2790.html#L197' title='Defined at 197 in Objects/fileobject.c.'>PyObject_AsFileDescriptor</a>( o );
<a name='L462'>    <b>if</b> (fd == -1)
<a name='L463'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L464'>
<a name='L465'>    <i><font color='green'>/* Check whether the fd is already in the array */</font></i>
<a name='L466'>    <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(fd);
<a name='L467'>    <b>if</b> (<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L468'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L469'>
<a name='L470'>    <b>if</b> (<a href='../S/2787.html#L832' title='Defined at 832 in Objects/dictobject.c.'>PyDict_DelItem</a>(self-&gt;dict, <a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>) == -1) <font color='red'>{</font>
<a name='L471'>        Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L472'>        <i><font color='green'>/* This will simply raise the KeyError set by PyDict_DelItem</font></i>
<a name='L473'><i><font color='green'>           if the file descriptor isn't registered. */</font></i>
<a name='L474'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L475'>    <font color='red'>}</font>
<a name='L476'>
<a name='L477'>    Py_DECREF(<a href='../S/3145.html#L213' title='Defined at 213 in Python/thread.c.'>key</a>);
<a name='L478'>    self-&gt;ufd_uptodate = 0;
<a name='L479'>
<a name='L480'>    Py_INCREF(Py_None);
<a name='L481'>    <b>return</b> Py_None;
<a name='L482'><font color='red'>}</font>
<a name='L483'>
<a name='L484'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(poll_poll_doc,
<a name='L485'>"poll( [timeout] ) -&gt; list of (fd, event) 2-tuples\n\n\
<a name='L486'>Polls the set of registered file descriptors, returning a list containing \n\
<a name='L487'>any descriptors that have events or errors to report.");
<a name='L488'>
<a name='L489'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L490'><a href='../S/2704.html#L588' title='Refered from 588 in Modules/selectmodule.c.'>poll_poll</a>(pollObject *self, PyObject *args)
<a name='L491'><font color='red'>{</font>
<a name='L492'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *result_list = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *tout = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L493'>    <b>int</b> timeout = 0, poll_result, i, j;
<a name='L494'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *num = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L495'>
<a name='L496'>    <b>if</b> (!<a href='../S/3112.html#L1712' title='Defined at 1712 in Python/getargs.c.'>PyArg_UnpackTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "poll", 0, 1, &amp;tout)) <font color='red'>{</font>
<a name='L497'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L498'>    <font color='red'>}</font>
<a name='L499'>
<a name='L500'>    <i><font color='green'>/* Check values for timeout */</font></i>
<a name='L501'>    <b>if</b> (tout == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> || tout == Py_None)
<a name='L502'>        timeout = -1;
<a name='L503'>    <b>else</b> <b>if</b> (!<a href='../S/2775.html#L736' title='Defined at 736 in Objects/abstract.c.'>PyNumber_Check</a>(tout)) <font color='red'>{</font>
<a name='L504'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L505'>                        "timeout must be an integer or None");
<a name='L506'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L507'>    <font color='red'>}</font>
<a name='L508'>    <b>else</b> <font color='red'>{</font>
<a name='L509'>        tout = <a href='../S/2775.html#L1325' title='Defined at 1325 in Objects/abstract.c.'>PyNumber_Long</a>(tout);
<a name='L510'>        <b>if</b> (!tout)
<a name='L511'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L512'>        timeout = <a href='../S/2799.html#L416' title='Defined at 416 in Objects/longobject.c.'>PyLong_AsLong</a>(tout);
<a name='L513'>        Py_DECREF(tout);
<a name='L514'>        <b>if</b> (timeout == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L515'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L516'>    <font color='red'>}</font>
<a name='L517'>
<a name='L518'>    <i><font color='green'>/* Ensure the ufd array is up to date */</font></i>
<a name='L519'>    <b>if</b> (!self-&gt;ufd_uptodate)
<a name='L520'>        <b>if</b> (<a href='../S/2704.html#L336' title='Defined at 336 in Modules/selectmodule.c.'>update_ufd_array</a>(self) == 0)
<a name='L521'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L522'>
<a name='L523'>    <i><font color='green'>/* call poll() */</font></i>
<a name='L524'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L525'>    poll_result = poll(self-&gt;ufds, self-&gt;ufd_len, timeout);
<a name='L526'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L527'>
<a name='L528'>    <b>if</b> (poll_result &lt; 0) <font color='red'>{</font>
<a name='L529'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(SelectError);
<a name='L530'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L531'>    <font color='red'>}</font>
<a name='L532'>
<a name='L533'>    <i><font color='green'>/* build the result list */</font></i>
<a name='L534'>
<a name='L535'>    result_list = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(poll_result);
<a name='L536'>    <b>if</b> (!result_list)
<a name='L537'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L538'>    <b>else</b> <font color='red'>{</font>
<a name='L539'>        <b>for</b> (i = 0, j = 0; j &lt; poll_result; j++) <font color='red'>{</font>
<a name='L540'>            <i><font color='green'>/* skip to the next fired descriptor */</font></i>
<a name='L541'>            <b>while</b> (!self-&gt;ufds[i].revents) <font color='red'>{</font>
<a name='L542'>                i++;
<a name='L543'>            <font color='red'>}</font>
<a name='L544'>            <i><font color='green'>/* if we hit a NULL return, set value to NULL</font></i>
<a name='L545'><i><font color='green'>               and break out of loop; code at end will</font></i>
<a name='L546'><i><font color='green'>               clean up result_list */</font></i>
<a name='L547'>            <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> = <a href='../S/2823.html#L49' title='Defined at 49 in Objects/tupleobject.c.'>PyTuple_New</a>(2);
<a name='L548'>            <b>if</b> (<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L549'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L550'>            num = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(self-&gt;ufds[i].fd);
<a name='L551'>            <b>if</b> (num == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L552'>                Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L553'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L554'>            <font color='red'>}</font>
<a name='L555'>            PyTuple_SET_ITEM(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, 0, num);
<a name='L556'>
<a name='L557'>            <i><font color='green'>/* The &amp;0xffff is a workaround for AIX.  'revents'</font></i>
<a name='L558'><i><font color='green'>               is a 16-bit short, and IBM assigned POLLNVAL</font></i>
<a name='L559'><i><font color='green'>               to be 0x8000, so the conversion to int results</font></i>
<a name='L560'><i><font color='green'>               in a negative number. See SF bug #923315. */</font></i>
<a name='L561'>            num = <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(self-&gt;ufds[i].revents &amp; 0xffff);
<a name='L562'>            <b>if</b> (num == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L563'>                Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L564'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L565'>            <font color='red'>}</font>
<a name='L566'>            PyTuple_SET_ITEM(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>, 1, num);
<a name='L567'>            <b>if</b> ((<a href='../S/2796.html#L199' title='Defined at 199 in Objects/listobject.c.'>PyList_SetItem</a>(result_list, j, <a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>)) == -1) <font color='red'>{</font>
<a name='L568'>                Py_DECREF(<a href='../S/2252.html#L27' title='Defined at 27 in Modules/_ctypes/ctypes.h.'>value</a>);
<a name='L569'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L570'>            <font color='red'>}</font>
<a name='L571'>            i++;
<a name='L572'>        <font color='red'>}</font>
<a name='L573'>    <font color='red'>}</font>
<a name='L574'>    <b>return</b> result_list;
<a name='L575'>
<a name='L576'>  <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L577'>    Py_DECREF(result_list);
<a name='L578'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L579'><font color='red'>}</font>
<a name='L580'>
<a name='L581'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> poll_methods[] = <font color='red'>{</font>
<a name='L582'>    <font color='red'>{</font>"register",        (PyCFunction)<a href='../S/2704.html#L368' title='Defined at 368 in Modules/selectmodule.c.'>poll_register</a>,
<a name='L583'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,  poll_register_doc<font color='red'>}</font>,
<a name='L584'>    <font color='red'>{</font>"modify",          (PyCFunction)<a href='../S/2704.html#L411' title='Defined at 411 in Modules/selectmodule.c.'>poll_modify</a>,
<a name='L585'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,  poll_modify_doc<font color='red'>}</font>,
<a name='L586'>    <font color='red'>{</font>"unregister",      (PyCFunction)<a href='../S/2704.html#L456' title='Defined at 456 in Modules/selectmodule.c.'>poll_unregister</a>,
<a name='L587'>     METH_O,        poll_unregister_doc<font color='red'>}</font>,
<a name='L588'>    <font color='red'>{</font>"poll",            (PyCFunction)<a href='../S/2704.html#L490' title='Defined at 490 in Modules/selectmodule.c.'>poll_poll</a>,
<a name='L589'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,  poll_poll_doc<font color='red'>}</font>,
<a name='L590'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,              <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>           <i><font color='green'>/* sentinel */</font></i>
<a name='L591'><font color='red'>}</font>;
<a name='L592'>
<a name='L593'><b>static</b> <a href='../S/2704.html#L327' title='Defined at 327 in Modules/selectmodule.c.'>pollObject</a> *
<a name='L594'><a href='../S/2704.html#L662' title='Refered from 662 in Modules/selectmodule.c.'>newPollObject</a>(<b>void</b>)
<a name='L595'><font color='red'>{</font>
<a name='L596'>    <a href='../S/2704.html#L327' title='Defined at 327 in Modules/selectmodule.c.'>pollObject</a> *self;
<a name='L597'>    self = PyObject_New(<a href='../S/2704.html#L327' title='Defined at 327 in Modules/selectmodule.c.'>pollObject</a>, &amp;poll_Type);
<a name='L598'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L599'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L600'>    <i><font color='green'>/* ufd_uptodate is a Boolean, denoting whether the</font></i>
<a name='L601'><i><font color='green'>       array pointed to by ufds matches the contents of the dictionary. */</font></i>
<a name='L602'>    self-&gt;ufd_uptodate = 0;
<a name='L603'>    self-&gt;ufds = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L604'>    self-&gt;dict = <a href='../S/2787.html#L233' title='Defined at 233 in Objects/dictobject.c.'>PyDict_New</a>();
<a name='L605'>    <b>if</b> (self-&gt;dict == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L606'>        Py_DECREF(self);
<a name='L607'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L608'>    <font color='red'>}</font>
<a name='L609'>    <b>return</b> self;
<a name='L610'><font color='red'>}</font>
<a name='L611'>
<a name='L612'><b>static</b> <b>void</b>
<a name='L613'><a href='../S/2704.html#L629' title='Refered from 629 in Modules/selectmodule.c.'>poll_dealloc</a>(pollObject *self)
<a name='L614'><font color='red'>{</font>
<a name='L615'>    <b>if</b> (self-&gt;ufds != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L616'>        PyMem_DEL(self-&gt;ufds);
<a name='L617'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(self-&gt;dict);
<a name='L618'>    PyObject_Del(self);
<a name='L619'><font color='red'>}</font>
<a name='L620'>
<a name='L621'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> poll_Type = <font color='red'>{</font>
<a name='L622'>    <i><font color='green'>/* The ob_type field must be initialized in the module init function</font></i>
<a name='L623'><i><font color='green'>     * to be portable to Windows without using C++. */</font></i>
<a name='L624'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L625'>    "select.poll",              <i><font color='green'>/*tp_name*/</font></i>
<a name='L626'>    <b>sizeof</b>(<a href='../S/2704.html#L327' title='Defined at 327 in Modules/selectmodule.c.'>pollObject</a>),         <i><font color='green'>/*tp_basicsize*/</font></i>
<a name='L627'>    0,                          <i><font color='green'>/*tp_itemsize*/</font></i>
<a name='L628'>    <i><font color='green'>/* methods */</font></i>
<a name='L629'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2704.html#L613' title='Defined at 613 in Modules/selectmodule.c.'>poll_dealloc</a>, <i><font color='green'>/*tp_dealloc*/</font></i>
<a name='L630'>    0,                          <i><font color='green'>/*tp_print*/</font></i>
<a name='L631'>    0,                          <i><font color='green'>/*tp_getattr*/</font></i>
<a name='L632'>    0,                      <i><font color='green'>/*tp_setattr*/</font></i>
<a name='L633'>    0,                          <i><font color='green'>/*tp_reserved*/</font></i>
<a name='L634'>    0,                          <i><font color='green'>/*tp_repr*/</font></i>
<a name='L635'>    0,                          <i><font color='green'>/*tp_as_number*/</font></i>
<a name='L636'>    0,                          <i><font color='green'>/*tp_as_sequence*/</font></i>
<a name='L637'>    0,                          <i><font color='green'>/*tp_as_mapping*/</font></i>
<a name='L638'>    0,                          <i><font color='green'>/*tp_hash*/</font></i>
<a name='L639'>    0,                          <i><font color='green'>/*tp_call*/</font></i>
<a name='L640'>    0,                          <i><font color='green'>/*tp_str*/</font></i>
<a name='L641'>    0,                          <i><font color='green'>/*tp_getattro*/</font></i>
<a name='L642'>    0,                          <i><font color='green'>/*tp_setattro*/</font></i>
<a name='L643'>    0,                          <i><font color='green'>/*tp_as_buffer*/</font></i>
<a name='L644'>    Py_TPFLAGS_DEFAULT,         <i><font color='green'>/*tp_flags*/</font></i>
<a name='L645'>    0,                          <i><font color='green'>/*tp_doc*/</font></i>
<a name='L646'>    0,                          <i><font color='green'>/*tp_traverse*/</font></i>
<a name='L647'>    0,                          <i><font color='green'>/*tp_clear*/</font></i>
<a name='L648'>    0,                          <i><font color='green'>/*tp_richcompare*/</font></i>
<a name='L649'>    0,                          <i><font color='green'>/*tp_weaklistoffset*/</font></i>
<a name='L650'>    0,                          <i><font color='green'>/*tp_iter*/</font></i>
<a name='L651'>    0,                          <i><font color='green'>/*tp_iternext*/</font></i>
<a name='L652'>    poll_methods,               <i><font color='green'>/*tp_methods*/</font></i>
<a name='L653'><font color='red'>}</font>;
<a name='L654'>
<a name='L655'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(poll_doc,
<a name='L656'>"Returns a polling object, which supports registering and\n\
<a name='L657'>unregistering file descriptors, and then polling them for I/O events.");
<a name='L658'>
<a name='L659'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L660'><a href='../S/2704.html#L1751' title='Refered from 1751 in Modules/selectmodule.c.'>select_poll</a>(PyObject *self, PyObject *unused)
<a name='L661'><font color='red'>{</font>
<a name='L662'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)<a href='../S/2704.html#L594' title='Defined at 594 in Modules/selectmodule.c.'>newPollObject</a>();
<a name='L663'><font color='red'>}</font>
<a name='L664'>
<a name='L665'><font color='darkred'>#ifdef</font> __APPLE__
<a name='L666'><i><font color='green'>/*</font></i>
<a name='L667'><i><font color='green'> * On some systems poll() sets errno on invalid file descriptors. We test</font></i>
<a name='L668'><i><font color='green'> * for this at runtime because this bug may be fixed or introduced between</font></i>
<a name='L669'><i><font color='green'> * OS releases.</font></i>
<a name='L670'><i><font color='green'> */</font></i>
<a name='L671'><b>static</b> <b>int</b> <a href='../S/2704.html#L1797' title='Refered from 1797 in Modules/selectmodule.c.'>select_have_broken_poll</a>(<b>void</b>)
<a name='L672'><font color='red'>{</font>
<a name='L673'>    <b>int</b> poll_test;
<a name='L674'>    <b>int</b> filedes[2];
<a name='L675'>
<a name='L676'>    <b>struct</b> pollfd poll_struct = <font color='red'>{</font> 0, POLLIN|POLLPRI|POLLOUT, 0 <font color='red'>}</font>;
<a name='L677'>
<a name='L678'>    <i><font color='green'>/* Create a file descriptor to make invalid */</font></i>
<a name='L679'>    <b>if</b> (pipe(filedes) &lt; 0) <font color='red'>{</font>
<a name='L680'>        <b>return</b> 1;
<a name='L681'>    <font color='red'>}</font>
<a name='L682'>    poll_struct.fd = filedes[0];
<a name='L683'>    close(filedes[0]);
<a name='L684'>    close(filedes[1]);
<a name='L685'>    poll_test = poll(&amp;poll_struct, 1, 0);
<a name='L686'>    <b>if</b> (poll_test &lt; 0) <font color='red'>{</font>
<a name='L687'>        <b>return</b> 1;
<a name='L688'>    <font color='red'>}</font> <b>else</b> <b>if</b> (poll_test == 0 &amp;&amp; poll_struct.revents != POLLNVAL) <font color='red'>{</font>
<a name='L689'>        <b>return</b> 1;
<a name='L690'>    <font color='red'>}</font>
<a name='L691'>    <b>return</b> 0;
<a name='L692'><font color='red'>}</font>
<a name='L693'><font color='darkred'>#endif</font> <i><font color='green'>/* __APPLE__ */</font></i>
<a name='L694'>
<a name='L695'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_POLL */</font></i>
<a name='L696'>
<a name='L697'><font color='darkred'>#ifdef</font> HAVE_EPOLL
<a name='L698'><i><font color='green'>/* **************************************************************************</font></i>
<a name='L699'><i><font color='green'> *                      epoll interface for Linux 2.6</font></i>
<a name='L700'><i><font color='green'> *</font></i>
<a name='L701'><i><font color='green'> * Written by Christian Heimes</font></i>
<a name='L702'><i><font color='green'> * Inspired by Twisted's _epoll.pyx and select.poll()</font></i>
<a name='L703'><i><font color='green'> */</font></i>
<a name='L704'>
<a name='L705'><font color='darkred'>#ifdef</font> HAVE_SYS_EPOLL_H
<a name='L706'><font color='darkred'>#include</font> &lt;sys/epoll.h&gt;
<a name='L707'><font color='darkred'>#endif</font>
<a name='L708'>
<a name='L709'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L710'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L711'>    <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> epfd;                        <i><font color='green'>/* epoll control file descriptor */</font></i>
<a name='L712'><font color='red'>}</font> <a href='../R/9795.html' title='Multiple refered from 3 places.'>pyEpoll_Object</a>;
<a name='L713'>
<a name='L714'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> pyEpoll_Type;
<a name='L715'><font color='darkred'>#define</font> pyepoll_CHECK(op) (PyObject_TypeCheck((op), &amp;pyEpoll_Type))
<a name='L716'>
<a name='L717'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L718'><a href='../R/9812.html' title='Multiple refered from 3 places.'>pyepoll_err_closed</a>(<b>void</b>)
<a name='L719'><font color='red'>{</font>
<a name='L720'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "I/O operation on closed epoll fd");
<a name='L721'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L722'><font color='red'>}</font>
<a name='L723'>
<a name='L724'><b>static</b> <b>int</b>
<a name='L725'><a href='../R/9816.html' title='Multiple refered from 2 places.'>pyepoll_internal_close</a>(pyEpoll_Object *self)
<a name='L726'><font color='red'>{</font>
<a name='L727'>    <b>int</b> save_errno = 0;
<a name='L728'>    <b>if</b> (self-&gt;epfd &gt;= 0) <font color='red'>{</font>
<a name='L729'>        <b>int</b> epfd = self-&gt;epfd;
<a name='L730'>        self-&gt;epfd = -1;
<a name='L731'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L732'>        <b>if</b> (close(epfd) &lt; 0)
<a name='L733'>            save_errno = errno;
<a name='L734'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L735'>    <font color='red'>}</font>
<a name='L736'>    <b>return</b> save_errno;
<a name='L737'><font color='red'>}</font>
<a name='L738'>
<a name='L739'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L740'><a href='../R/9185.html' title='Multiple refered from 2 places.'>newPyEpoll_Object</a>(PyTypeObject *type, <b>int</b> sizehint, <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> fd)
<a name='L741'><font color='red'>{</font>
<a name='L742'>    <a href='../S/2704.html#L712' title='Defined at 712 in Modules/selectmodule.c.'>pyEpoll_Object</a> *self;
<a name='L743'>
<a name='L744'>    <b>if</b> (sizehint == -1) <font color='red'>{</font>
<a name='L745'>        sizehint = <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a>-1;
<a name='L746'>    <font color='red'>}</font>
<a name='L747'>    <b>else</b> <b>if</b> (sizehint &lt; 1) <font color='red'>{</font>
<a name='L748'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L749'>                     "sizehint must be greater zero, got %d",
<a name='L750'>                     sizehint);
<a name='L751'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L752'>    <font color='red'>}</font>
<a name='L753'>
<a name='L754'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(type != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; type-&gt;tp_alloc != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L755'>    self = (<a href='../S/2704.html#L712' title='Defined at 712 in Modules/selectmodule.c.'>pyEpoll_Object</a> *) type-&gt;tp_alloc(type, 0);
<a name='L756'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L757'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L758'>
<a name='L759'>    <b>if</b> (fd == -1) <font color='red'>{</font>
<a name='L760'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L761'>        self-&gt;epfd = epoll_create(sizehint);
<a name='L762'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L763'>    <font color='red'>}</font>
<a name='L764'>    <b>else</b> <font color='red'>{</font>
<a name='L765'>        self-&gt;epfd = fd;
<a name='L766'>    <font color='red'>}</font>
<a name='L767'>    <b>if</b> (self-&gt;epfd &lt; 0) <font color='red'>{</font>
<a name='L768'>        Py_DECREF(self);
<a name='L769'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_IOError);
<a name='L770'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L771'>    <font color='red'>}</font>
<a name='L772'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self;
<a name='L773'><font color='red'>}</font>
<a name='L774'>
<a name='L775'>
<a name='L776'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L777'><a href='../S/2704.html#L1119' title='Refered from 1119 in Modules/selectmodule.c.'>pyepoll_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L778'><font color='red'>{</font>
<a name='L779'>    <b>int</b> sizehint = -1;
<a name='L780'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"sizehint", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L781'>
<a name='L782'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "|i:epoll", kwlist,
<a name='L783'>                                     &amp;sizehint))
<a name='L784'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L785'>
<a name='L786'>    <b>return</b> <a href='../S/2704.html#L740' title='Defined at 740 in Modules/selectmodule.c.'>newPyEpoll_Object</a>(type, sizehint, -1);
<a name='L787'><font color='red'>}</font>
<a name='L788'>
<a name='L789'>
<a name='L790'><b>static</b> <b>void</b>
<a name='L791'><a href='../S/2704.html#L1086' title='Refered from 1086 in Modules/selectmodule.c.'>pyepoll_dealloc</a>(pyEpoll_Object *self)
<a name='L792'><font color='red'>{</font>
<a name='L793'>    (<b>void</b>)<a href='../S/2704.html#L725' title='Defined at 725 in Modules/selectmodule.c.'>pyepoll_internal_close</a>(self);
<a name='L794'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_free(self);
<a name='L795'><font color='red'>}</font>
<a name='L796'>
<a name='L797'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L798'><a href='../S/2704.html#L1051' title='Refered from 1051 in Modules/selectmodule.c.'>pyepoll_close</a>(pyEpoll_Object *self)
<a name='L799'><font color='red'>{</font>
<a name='L800'>    errno = <a href='../S/2704.html#L725' title='Defined at 725 in Modules/selectmodule.c.'>pyepoll_internal_close</a>(self);
<a name='L801'>    <b>if</b> (errno &lt; 0) <font color='red'>{</font>
<a name='L802'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_IOError);
<a name='L803'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L804'>    <font color='red'>}</font>
<a name='L805'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L806'><font color='red'>}</font>
<a name='L807'>
<a name='L808'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pyepoll_close_doc,
<a name='L809'>"close() -&gt; None\n\
<a name='L810'>\n\
<a name='L811'>Close the epoll control file descriptor. Further operations on the epoll\n\
<a name='L812'>object will raise an exception.");
<a name='L813'>
<a name='L814'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L815'><a href='../S/2704.html#L1067' title='Refered from 1067 in Modules/selectmodule.c.'>pyepoll_get_closed</a>(pyEpoll_Object *self)
<a name='L816'><font color='red'>{</font>
<a name='L817'>    <b>if</b> (self-&gt;epfd &lt; 0)
<a name='L818'>        Py_RETURN_TRUE;
<a name='L819'>    <b>else</b>
<a name='L820'>        Py_RETURN_FALSE;
<a name='L821'><font color='red'>}</font>
<a name='L822'>
<a name='L823'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L824'><a href='../S/2704.html#L1053' title='Refered from 1053 in Modules/selectmodule.c.'>pyepoll_fileno</a>(pyEpoll_Object *self)
<a name='L825'><font color='red'>{</font>
<a name='L826'>    <b>if</b> (self-&gt;epfd &lt; 0)
<a name='L827'>        <b>return</b> <a href='../S/2704.html#L718' title='Defined at 718 in Modules/selectmodule.c.'>pyepoll_err_closed</a>();
<a name='L828'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(self-&gt;epfd);
<a name='L829'><font color='red'>}</font>
<a name='L830'>
<a name='L831'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pyepoll_fileno_doc,
<a name='L832'>"fileno() -&gt; int\n\
<a name='L833'>\n\
<a name='L834'>Return the epoll control file descriptor.");
<a name='L835'>
<a name='L836'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L837'><a href='../S/2704.html#L1049' title='Refered from 1049 in Modules/selectmodule.c.'>pyepoll_fromfd</a>(PyObject *cls, PyObject *args)
<a name='L838'><font color='red'>{</font>
<a name='L839'>    <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> fd;
<a name='L840'>
<a name='L841'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "i:fromfd", &amp;fd))
<a name='L842'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L843'>
<a name='L844'>    <b>return</b> <a href='../S/2704.html#L740' title='Defined at 740 in Modules/selectmodule.c.'>newPyEpoll_Object</a>((<a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a>*)cls, -1, fd);
<a name='L845'><font color='red'>}</font>
<a name='L846'>
<a name='L847'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pyepoll_fromfd_doc,
<a name='L848'>"fromfd(fd) -&gt; epoll\n\
<a name='L849'>\n\
<a name='L850'>Create an epoll object from a given control fd.");
<a name='L851'>
<a name='L852'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L853'><a href='../R/9817.html' title='Multiple refered from 3 places.'>pyepoll_internal_ctl</a>(<b>int</b> epfd, <b>int</b> op, PyObject *pfd, <b>unsigned</b> <b>int</b> events)
<a name='L854'><font color='red'>{</font>
<a name='L855'>    <b>struct</b> epoll_event ev;
<a name='L856'>    <b>int</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L857'>    <b>int</b> fd;
<a name='L858'>
<a name='L859'>    <b>if</b> (epfd &lt; 0)
<a name='L860'>        <b>return</b> <a href='../S/2704.html#L718' title='Defined at 718 in Modules/selectmodule.c.'>pyepoll_err_closed</a>();
<a name='L861'>
<a name='L862'>    fd = <a href='../S/2790.html#L197' title='Defined at 197 in Objects/fileobject.c.'>PyObject_AsFileDescriptor</a>(pfd);
<a name='L863'>    <b>if</b> (fd == -1) <font color='red'>{</font>
<a name='L864'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L865'>    <font color='red'>}</font>
<a name='L866'>
<a name='L867'>    <b>switch</b>(op) <font color='red'>{</font>
<a name='L868'>        <b>case</b> EPOLL_CTL_ADD:
<a name='L869'>        <b>case</b> EPOLL_CTL_MOD:
<a name='L870'>        ev.events = events;
<a name='L871'>        ev.data.fd = fd;
<a name='L872'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L873'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = epoll_ctl(epfd, op, fd, &amp;ev);
<a name='L874'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L875'>        <b>break</b>;
<a name='L876'>        <b>case</b> EPOLL_CTL_DEL:
<a name='L877'>        <i><font color='green'>/* In kernel versions before 2.6.9, the EPOLL_CTL_DEL</font></i>
<a name='L878'><i><font color='green'>         * operation required a non-NULL pointer in event, even</font></i>
<a name='L879'><i><font color='green'>         * though this argument is ignored. */</font></i>
<a name='L880'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L881'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = epoll_ctl(epfd, op, fd, &amp;ev);
<a name='L882'>        <b>if</b> (errno == EBADF) <font color='red'>{</font>
<a name='L883'>            <i><font color='green'>/* fd already closed */</font></i>
<a name='L884'>            <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 0;
<a name='L885'>            errno = 0;
<a name='L886'>        <font color='red'>}</font>
<a name='L887'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L888'>        <b>break</b>;
<a name='L889'>        <b>default</b>:
<a name='L890'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = -1;
<a name='L891'>        errno = EINVAL;
<a name='L892'>    <font color='red'>}</font>
<a name='L893'>
<a name='L894'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt; 0) <font color='red'>{</font>
<a name='L895'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_IOError);
<a name='L896'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L897'>    <font color='red'>}</font>
<a name='L898'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L899'><font color='red'>}</font>
<a name='L900'>
<a name='L901'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L902'><a href='../S/2704.html#L1057' title='Refered from 1057 in Modules/selectmodule.c.'>pyepoll_register</a>(pyEpoll_Object *self, PyObject *args, PyObject *kwds)
<a name='L903'><font color='red'>{</font>
<a name='L904'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pfd;
<a name='L905'>    <b>unsigned</b> <b>int</b> events = EPOLLIN | EPOLLOUT | EPOLLPRI;
<a name='L906'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"fd", "eventmask", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L907'>
<a name='L908'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O|I:register", kwlist,
<a name='L909'>                                     &amp;pfd, &amp;events)) <font color='red'>{</font>
<a name='L910'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L911'>    <font color='red'>}</font>
<a name='L912'>
<a name='L913'>    <b>return</b> <a href='../S/2704.html#L853' title='Defined at 853 in Modules/selectmodule.c.'>pyepoll_internal_ctl</a>(self-&gt;epfd, EPOLL_CTL_ADD, pfd, events);
<a name='L914'><font color='red'>}</font>
<a name='L915'>
<a name='L916'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pyepoll_register_doc,
<a name='L917'>"register(fd[, eventmask]) -&gt; None\n\
<a name='L918'>\n\
<a name='L919'>Registers a new fd or modifies an already registered fd.\n\
<a name='L920'>fd is the target file descriptor of the operation.\n\
<a name='L921'>events is a bit set composed of the various EPOLL constants; the default\n\
<a name='L922'>is EPOLL_IN | EPOLL_OUT | EPOLL_PRI.\n\
<a name='L923'>\n\
<a name='L924'>The epoll interface supports all file descriptors that support poll.");
<a name='L925'>
<a name='L926'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L927'><a href='../S/2704.html#L1055' title='Refered from 1055 in Modules/selectmodule.c.'>pyepoll_modify</a>(pyEpoll_Object *self, PyObject *args, PyObject *kwds)
<a name='L928'><font color='red'>{</font>
<a name='L929'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pfd;
<a name='L930'>    <b>unsigned</b> <b>int</b> events;
<a name='L931'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"fd", "eventmask", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L932'>
<a name='L933'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "OI:modify", kwlist,
<a name='L934'>                                     &amp;pfd, &amp;events)) <font color='red'>{</font>
<a name='L935'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L936'>    <font color='red'>}</font>
<a name='L937'>
<a name='L938'>    <b>return</b> <a href='../S/2704.html#L853' title='Defined at 853 in Modules/selectmodule.c.'>pyepoll_internal_ctl</a>(self-&gt;epfd, EPOLL_CTL_MOD, pfd, events);
<a name='L939'><font color='red'>}</font>
<a name='L940'>
<a name='L941'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pyepoll_modify_doc,
<a name='L942'>"modify(fd, eventmask) -&gt; None\n\
<a name='L943'>\n\
<a name='L944'>fd is the target file descriptor of the operation\n\
<a name='L945'>events is a bit set composed of the various EPOLL constants");
<a name='L946'>
<a name='L947'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L948'><a href='../S/2704.html#L1059' title='Refered from 1059 in Modules/selectmodule.c.'>pyepoll_unregister</a>(pyEpoll_Object *self, PyObject *args, PyObject *kwds)
<a name='L949'><font color='red'>{</font>
<a name='L950'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pfd;
<a name='L951'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"fd", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L952'>
<a name='L953'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "O:unregister", kwlist,
<a name='L954'>                                     &amp;pfd)) <font color='red'>{</font>
<a name='L955'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L956'>    <font color='red'>}</font>
<a name='L957'>
<a name='L958'>    <b>return</b> <a href='../S/2704.html#L853' title='Defined at 853 in Modules/selectmodule.c.'>pyepoll_internal_ctl</a>(self-&gt;epfd, EPOLL_CTL_DEL, pfd, 0);
<a name='L959'><font color='red'>}</font>
<a name='L960'>
<a name='L961'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pyepoll_unregister_doc,
<a name='L962'>"unregister(fd) -&gt; None\n\
<a name='L963'>\n\
<a name='L964'>fd is the target file descriptor of the operation.");
<a name='L965'>
<a name='L966'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L967'><a href='../S/2704.html#L1061' title='Refered from 1061 in Modules/selectmodule.c.'>pyepoll_poll</a>(pyEpoll_Object *self, PyObject *args, PyObject *kwds)
<a name='L968'><font color='red'>{</font>
<a name='L969'>    <b>double</b> dtimeout = -1.;
<a name='L970'>    <b>int</b> timeout;
<a name='L971'>    <b>int</b> maxevents = -1;
<a name='L972'>    <b>int</b> nfds, i;
<a name='L973'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *elist = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *etuple = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L974'>    <b>struct</b> epoll_event *evs = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L975'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"timeout", "maxevents", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L976'>
<a name='L977'>    <b>if</b> (self-&gt;epfd &lt; 0)
<a name='L978'>        <b>return</b> <a href='../S/2704.html#L718' title='Defined at 718 in Modules/selectmodule.c.'>pyepoll_err_closed</a>();
<a name='L979'>
<a name='L980'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, "|di:poll", kwlist,
<a name='L981'>                                     &amp;dtimeout, &amp;maxevents)) <font color='red'>{</font>
<a name='L982'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L983'>    <font color='red'>}</font>
<a name='L984'>
<a name='L985'>    <b>if</b> (dtimeout &lt; 0) <font color='red'>{</font>
<a name='L986'>        timeout = -1;
<a name='L987'>    <font color='red'>}</font>
<a name='L988'>    <b>else</b> <b>if</b> (dtimeout * 1000.0 &gt; <a href='../S/565.html#L753' title='Defined at 753 in Include/pyport.h.'>INT_MAX</a>) <font color='red'>{</font>
<a name='L989'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L990'>                        "timeout is too large");
<a name='L991'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L992'>    <font color='red'>}</font>
<a name='L993'>    <b>else</b> <font color='red'>{</font>
<a name='L994'>        timeout = (<b>int</b>)(dtimeout * 1000.0);
<a name='L995'>    <font color='red'>}</font>
<a name='L996'>
<a name='L997'>    <b>if</b> (maxevents == -1) <font color='red'>{</font>
<a name='L998'>        maxevents = <a href='../D/1101.html' title='Multiple defined in 2 places.'>FD_SETSIZE</a>-1;
<a name='L999'>    <font color='red'>}</font>
<a name='L1000'>    <b>else</b> <b>if</b> (maxevents &lt; 1) <font color='red'>{</font>
<a name='L1001'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L1002'>                     "maxevents must be greater than 0, got %d",
<a name='L1003'>                     maxevents);
<a name='L1004'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1005'>    <font color='red'>}</font>
<a name='L1006'>
<a name='L1007'>    evs = PyMem_New(<b>struct</b> epoll_event, maxevents);
<a name='L1008'>    <b>if</b> (evs == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1009'>        Py_DECREF(self);
<a name='L1010'>        <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1011'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1012'>    <font color='red'>}</font>
<a name='L1013'>
<a name='L1014'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L1015'>    nfds = epoll_wait(self-&gt;epfd, evs, maxevents, timeout);
<a name='L1016'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L1017'>    <b>if</b> (nfds &lt; 0) <font color='red'>{</font>
<a name='L1018'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_IOError);
<a name='L1019'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1020'>    <font color='red'>}</font>
<a name='L1021'>
<a name='L1022'>    elist = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(nfds);
<a name='L1023'>    <b>if</b> (elist == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1024'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1025'>    <font color='red'>}</font>
<a name='L1026'>
<a name='L1027'>    <b>for</b> (i = 0; i &lt; nfds; i++) <font color='red'>{</font>
<a name='L1028'>        etuple = <a href='../D/4089.html' title='Multiple defined in 2 places.'>Py_BuildValue</a>("iI", evs[i].data.fd, evs[i].events);
<a name='L1029'>        <b>if</b> (etuple == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1030'>            <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(elist);
<a name='L1031'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1032'>        <font color='red'>}</font>
<a name='L1033'>        PyList_SET_ITEM(elist, i, etuple);
<a name='L1034'>    <font color='red'>}</font>
<a name='L1035'>
<a name='L1036'>    <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1037'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(evs);
<a name='L1038'>    <b>return</b> elist;
<a name='L1039'><font color='red'>}</font>
<a name='L1040'>
<a name='L1041'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pyepoll_poll_doc,
<a name='L1042'>"poll([timeout=-1[, maxevents=-1]]) -&gt; [(fd, events), (...)]\n\
<a name='L1043'>\n\
<a name='L1044'>Wait for events on the epoll file descriptor for a maximum time of timeout\n\
<a name='L1045'>in seconds (as float). -1 makes poll wait indefinitely.\n\
<a name='L1046'>Up to maxevents are returned to the caller.");
<a name='L1047'>
<a name='L1048'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> pyepoll_methods[] = <font color='red'>{</font>
<a name='L1049'>    <font color='red'>{</font>"fromfd",          (PyCFunction)<a href='../S/2704.html#L837' title='Defined at 837 in Modules/selectmodule.c.'>pyepoll_fromfd</a>,
<a name='L1050'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_CLASS, pyepoll_fromfd_doc<font color='red'>}</font>,
<a name='L1051'>    <font color='red'>{</font>"close",           (PyCFunction)<a href='../S/2704.html#L798' title='Defined at 798 in Modules/selectmodule.c.'>pyepoll_close</a>,     <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1052'>     pyepoll_close_doc<font color='red'>}</font>,
<a name='L1053'>    <font color='red'>{</font>"fileno",          (PyCFunction)<a href='../S/2704.html#L824' title='Defined at 824 in Modules/selectmodule.c.'>pyepoll_fileno</a>,    <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1054'>     pyepoll_fileno_doc<font color='red'>}</font>,
<a name='L1055'>    <font color='red'>{</font>"modify",          (PyCFunction)<a href='../S/2704.html#L927' title='Defined at 927 in Modules/selectmodule.c.'>pyepoll_modify</a>,
<a name='L1056'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS,      pyepoll_modify_doc<font color='red'>}</font>,
<a name='L1057'>    <font color='red'>{</font>"register",        (PyCFunction)<a href='../S/2704.html#L902' title='Defined at 902 in Modules/selectmodule.c.'>pyepoll_register</a>,
<a name='L1058'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS,      pyepoll_register_doc<font color='red'>}</font>,
<a name='L1059'>    <font color='red'>{</font>"unregister",      (PyCFunction)<a href='../S/2704.html#L948' title='Defined at 948 in Modules/selectmodule.c.'>pyepoll_unregister</a>,
<a name='L1060'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS,      pyepoll_unregister_doc<font color='red'>}</font>,
<a name='L1061'>    <font color='red'>{</font>"poll",            (PyCFunction)<a href='../S/2704.html#L967' title='Defined at 967 in Modules/selectmodule.c.'>pyepoll_poll</a>,
<a name='L1062'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_KEYWORDS,      pyepoll_poll_doc<font color='red'>}</font>,
<a name='L1063'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,      <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1064'><font color='red'>}</font>;
<a name='L1065'>
<a name='L1066'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> pyepoll_getsetlist[] = <font color='red'>{</font>
<a name='L1067'>    <font color='red'>{</font>"closed", (getter)<a href='../S/2704.html#L815' title='Defined at 815 in Modules/selectmodule.c.'>pyepoll_get_closed</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1068'>     "True if the epoll handler is closed"<font color='red'>}</font>,
<a name='L1069'>    <font color='red'>{</font>0<font color='red'>}</font>,
<a name='L1070'><font color='red'>}</font>;
<a name='L1071'>
<a name='L1072'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(pyepoll_doc,
<a name='L1073'>"select.epoll([sizehint=-1])\n\
<a name='L1074'>\n\
<a name='L1075'>Returns an epolling object\n\
<a name='L1076'>\n\
<a name='L1077'>sizehint must be a positive integer or -1 for the default size. The\n\
<a name='L1078'>sizehint is used to optimize internal data structures. It doesn't limit\n\
<a name='L1079'>the maximum number of monitored events.");
<a name='L1080'>
<a name='L1081'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> pyEpoll_Type = <font color='red'>{</font>
<a name='L1082'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L1083'>    "select.epoll",                                     <i><font color='green'>/* tp_name */</font></i>
<a name='L1084'>    <b>sizeof</b>(<a href='../S/2704.html#L712' title='Defined at 712 in Modules/selectmodule.c.'>pyEpoll_Object</a>),                             <i><font color='green'>/* tp_basicsize */</font></i>
<a name='L1085'>    0,                                                  <i><font color='green'>/* tp_itemsize */</font></i>
<a name='L1086'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2704.html#L791' title='Defined at 791 in Modules/selectmodule.c.'>pyepoll_dealloc</a>,                        <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L1087'>    0,                                                  <i><font color='green'>/* tp_print */</font></i>
<a name='L1088'>    0,                                                  <i><font color='green'>/* tp_getattr */</font></i>
<a name='L1089'>    0,                                                  <i><font color='green'>/* tp_setattr */</font></i>
<a name='L1090'>    0,                                                  <i><font color='green'>/* tp_reserved */</font></i>
<a name='L1091'>    0,                                                  <i><font color='green'>/* tp_repr */</font></i>
<a name='L1092'>    0,                                                  <i><font color='green'>/* tp_as_number */</font></i>
<a name='L1093'>    0,                                                  <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L1094'>    0,                                                  <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L1095'>    0,                                                  <i><font color='green'>/* tp_hash */</font></i>
<a name='L1096'>    0,                                                  <i><font color='green'>/* tp_call */</font></i>
<a name='L1097'>    0,                                                  <i><font color='green'>/* tp_str */</font></i>
<a name='L1098'>    <a href='../S/2803.html#L1046' title='Defined at 1046 in Objects/object.c.'>PyObject_GenericGetAttr</a>,                            <i><font color='green'>/* tp_getattro */</font></i>
<a name='L1099'>    0,                                                  <i><font color='green'>/* tp_setattro */</font></i>
<a name='L1100'>    0,                                                  <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L1101'>    Py_TPFLAGS_DEFAULT,                                 <i><font color='green'>/* tp_flags */</font></i>
<a name='L1102'>    pyepoll_doc,                                        <i><font color='green'>/* tp_doc */</font></i>
<a name='L1103'>    0,                                                  <i><font color='green'>/* tp_traverse */</font></i>
<a name='L1104'>    0,                                                  <i><font color='green'>/* tp_clear */</font></i>
<a name='L1105'>    0,                                                  <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L1106'>    0,                                                  <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L1107'>    0,                                                  <i><font color='green'>/* tp_iter */</font></i>
<a name='L1108'>    0,                                                  <i><font color='green'>/* tp_iternext */</font></i>
<a name='L1109'>    pyepoll_methods,                                    <i><font color='green'>/* tp_methods */</font></i>
<a name='L1110'>    0,                                                  <i><font color='green'>/* tp_members */</font></i>
<a name='L1111'>    pyepoll_getsetlist,                                 <i><font color='green'>/* tp_getset */</font></i>
<a name='L1112'>    0,                                                  <i><font color='green'>/* tp_base */</font></i>
<a name='L1113'>    0,                                                  <i><font color='green'>/* tp_dict */</font></i>
<a name='L1114'>    0,                                                  <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L1115'>    0,                                                  <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L1116'>    0,                                                  <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L1117'>    0,                                                  <i><font color='green'>/* tp_init */</font></i>
<a name='L1118'>    0,                                                  <i><font color='green'>/* tp_alloc */</font></i>
<a name='L1119'>    <a href='../S/2704.html#L777' title='Defined at 777 in Modules/selectmodule.c.'>pyepoll_new</a>,                                        <i><font color='green'>/* tp_new */</font></i>
<a name='L1120'>    0,                                                  <i><font color='green'>/* tp_free */</font></i>
<a name='L1121'><font color='red'>}</font>;
<a name='L1122'>
<a name='L1123'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_EPOLL */</font></i>
<a name='L1124'>
<a name='L1125'><font color='darkred'>#ifdef</font> HAVE_KQUEUE
<a name='L1126'><i><font color='green'>/* **************************************************************************</font></i>
<a name='L1127'><i><font color='green'> *                      kqueue interface for BSD</font></i>
<a name='L1128'><i><font color='green'> *</font></i>
<a name='L1129'><i><font color='green'> * Copyright (c) 2000 Doug White, 2006 James Knight, 2007 Christian Heimes</font></i>
<a name='L1130'><i><font color='green'> * All rights reserved.</font></i>
<a name='L1131'><i><font color='green'> *</font></i>
<a name='L1132'><i><font color='green'> * Redistribution and use in source and binary forms, with or without</font></i>
<a name='L1133'><i><font color='green'> * modification, are permitted provided that the following conditions</font></i>
<a name='L1134'><i><font color='green'> * are met:</font></i>
<a name='L1135'><i><font color='green'> * 1. Redistributions of source code must retain the above copyright</font></i>
<a name='L1136'><i><font color='green'> *    notice, this list of conditions and the following disclaimer.</font></i>
<a name='L1137'><i><font color='green'> * 2. Redistributions in binary form must reproduce the above copyright</font></i>
<a name='L1138'><i><font color='green'> *    notice, this list of conditions and the following disclaimer in the</font></i>
<a name='L1139'><i><font color='green'> *    documentation and/or other materials provided with the distribution.</font></i>
<a name='L1140'><i><font color='green'> *</font></i>
<a name='L1141'><i><font color='green'> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND</font></i>
<a name='L1142'><i><font color='green'> * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</font></i>
<a name='L1143'><i><font color='green'> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</font></i>
<a name='L1144'><i><font color='green'> * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE</font></i>
<a name='L1145'><i><font color='green'> * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</font></i>
<a name='L1146'><i><font color='green'> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</font></i>
<a name='L1147'><i><font color='green'> * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</font></i>
<a name='L1148'><i><font color='green'> * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</font></i>
<a name='L1149'><i><font color='green'> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</font></i>
<a name='L1150'><i><font color='green'> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</font></i>
<a name='L1151'><i><font color='green'> * SUCH DAMAGE.</font></i>
<a name='L1152'><i><font color='green'> */</font></i>
<a name='L1153'>
<a name='L1154'><font color='darkred'>#ifdef</font> HAVE_SYS_EVENT_H
<a name='L1155'><font color='darkred'>#include</font> &lt;sys/event.h&gt;
<a name='L1156'><font color='darkred'>#endif</font>
<a name='L1157'>
<a name='L1158'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(kqueue_event_doc,
<a name='L1159'>"kevent(ident, filter=KQ_FILTER_READ, flags=KQ_EV_ADD, fflags=0, data=0, udata=0)\n\
<a name='L1160'>\n\
<a name='L1161'>This object is the equivalent of the struct kevent for the C API.\n\
<a name='L1162'>\n\
<a name='L1163'>See the kqueue manpage for more detailed information about the meaning\n\
<a name='L1164'>of the arguments.\n\
<a name='L1165'>\n\
<a name='L1166'>One minor note: while you might hope that udata could store a\n\
<a name='L1167'>reference to a python object, it cannot, because it is impossible to\n\
<a name='L1168'>keep a proper reference count of the object once it's passed into the\n\
<a name='L1169'>kernel. Therefore, I have restricted it to only storing an integer.  I\n\
<a name='L1170'>recommend ignoring it and simply using the 'ident' field to key off\n\
<a name='L1171'>of. You could also set up a dictionary on the python side to store a\n\
<a name='L1172'>udata-&gt;object mapping.");
<a name='L1173'>
<a name='L1174'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L1175'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L1176'>    <b>struct</b> kevent e;
<a name='L1177'><font color='red'>}</font> <a href='../R/8588.html' title='Multiple refered from 5 places.'>kqueue_event_Object</a>;
<a name='L1178'>
<a name='L1179'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> kqueue_event_Type;
<a name='L1180'>
<a name='L1181'><font color='darkred'>#define</font> <a href='../R/8587.html' title='Multiple refered from 2 places.'>kqueue_event_Check</a>(op) (PyObject_TypeCheck((op), &amp;kqueue_event_Type))
<a name='L1182'>
<a name='L1183'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L1184'>    <a href='../S/544.html#L82' title='Defined at 82 in Include/object.h.'>PyObject_HEAD</a>
<a name='L1185'>    <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> kqfd;                <i><font color='green'>/* kqueue control fd */</font></i>
<a name='L1186'><font color='red'>}</font> <a href='../R/8592.html' title='Multiple refered from 3 places.'>kqueue_queue_Object</a>;
<a name='L1187'>
<a name='L1188'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> kqueue_queue_Type;
<a name='L1189'>
<a name='L1190'><font color='darkred'>#define</font> kqueue_queue_Check(op) (PyObject_TypeCheck((op), &amp;kqueue_queue_Type))
<a name='L1191'>
<a name='L1192'><font color='darkred'>#if</font> (<a href='../D/4743.html' title='Multiple defined in 3 places.'>SIZEOF_UINTPTR_T</a> != <a href='../D/4744.html' title='Multiple defined in 7 places.'>SIZEOF_VOID_P</a>)
<a name='L1193'><font color='darkred'>#   error</font> uintptr_t does not match <b>void</b> *!
<a name='L1194'><font color='darkred'>#elif</font> (<a href='../D/4743.html' title='Multiple defined in 3 places.'>SIZEOF_UINTPTR_T</a> == <a href='../D/4736.html' title='Multiple defined in 2 places.'>SIZEOF_LONG_LONG</a>)
<a name='L1195'><font color='darkred'>#   define</font> <a href='../R/4629.html' title='Multiple refered from 2 places.'>T_UINTPTRT</a>         <a href='../S/577.html#L65' title='Defined at 65 in Include/structmember.h.'>T_ULONGLONG</a>
<a name='L1196'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1227' title='Refered from 1227 in Modules/selectmodule.c.'>T_INTPTRT</a>          <a href='../S/577.html#L64' title='Defined at 64 in Include/structmember.h.'>T_LONGLONG</a>
<a name='L1197'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1264' title='Refered from 1264 in Modules/selectmodule.c.'>PyLong_AsUintptr_t</a> <a href='../S/2799.html#L1189' title='Defined at 1189 in Objects/longobject.c.'>PyLong_AsUnsignedLongLong</a>
<a name='L1198'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1253' title='Refered from 1253 in Modules/selectmodule.c.'>UINTPTRT_FMT_UNIT</a>  "K"
<a name='L1199'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1253' title='Refered from 1253 in Modules/selectmodule.c.'>INTPTRT_FMT_UNIT</a>   "L"
<a name='L1200'><font color='darkred'>#elif</font> (<a href='../D/4743.html' title='Multiple defined in 3 places.'>SIZEOF_UINTPTR_T</a> == <a href='../D/4734.html' title='Multiple defined in 7 places.'>SIZEOF_LONG</a>)
<a name='L1201'><font color='darkred'>#   define</font> <a href='../R/4629.html' title='Multiple refered from 2 places.'>T_UINTPTRT</a>         <a href='../S/577.html#L52' title='Defined at 52 in Include/structmember.h.'>T_ULONG</a>
<a name='L1202'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1227' title='Refered from 1227 in Modules/selectmodule.c.'>T_INTPTRT</a>          <a href='../S/577.html#L40' title='Defined at 40 in Include/structmember.h.'>T_LONG</a>
<a name='L1203'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1264' title='Refered from 1264 in Modules/selectmodule.c.'>PyLong_AsUintptr_t</a> <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>
<a name='L1204'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1253' title='Refered from 1253 in Modules/selectmodule.c.'>UINTPTRT_FMT_UNIT</a>  "k"
<a name='L1205'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1253' title='Refered from 1253 in Modules/selectmodule.c.'>INTPTRT_FMT_UNIT</a>   "l"
<a name='L1206'><font color='darkred'>#elif</font> (<a href='../D/4743.html' title='Multiple defined in 3 places.'>SIZEOF_UINTPTR_T</a> == <a href='../D/4733.html' title='Multiple defined in 3 places.'>SIZEOF_INT</a>)
<a name='L1207'><font color='darkred'>#   define</font> <a href='../R/4629.html' title='Multiple refered from 2 places.'>T_UINTPTRT</a>         <a href='../S/577.html#L51' title='Defined at 51 in Include/structmember.h.'>T_UINT</a>
<a name='L1208'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1227' title='Refered from 1227 in Modules/selectmodule.c.'>T_INTPTRT</a>          <a href='../S/577.html#L39' title='Defined at 39 in Include/structmember.h.'>T_INT</a>
<a name='L1209'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1264' title='Refered from 1264 in Modules/selectmodule.c.'>PyLong_AsUintptr_t</a> <a href='../S/2799.html#L488' title='Defined at 488 in Objects/longobject.c.'>PyLong_AsUnsignedLong</a>
<a name='L1210'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1253' title='Refered from 1253 in Modules/selectmodule.c.'>UINTPTRT_FMT_UNIT</a>  "I"
<a name='L1211'><font color='darkred'>#   define</font> <a href='../S/2704.html#L1253' title='Refered from 1253 in Modules/selectmodule.c.'>INTPTRT_FMT_UNIT</a>   "i"
<a name='L1212'><font color='darkred'>#else</font>
<a name='L1213'><font color='darkred'>#   error</font> uintptr_t does not match <b>int</b>, <b>long</b>, or <b>long</b> <b>long</b>!
<a name='L1214'><font color='darkred'>#endif</font>
<a name='L1215'>
<a name='L1216'><i><font color='green'>/* Unfortunately, we can't store python objects in udata, because</font></i>
<a name='L1217'><i><font color='green'> * kevents in the kernel can be removed without warning, which would</font></i>
<a name='L1218'><i><font color='green'> * forever lose the refcount on the object stored with it.</font></i>
<a name='L1219'><i><font color='green'> */</font></i>
<a name='L1220'>
<a name='L1221'><font color='darkred'>#define</font> <a href='../R/1680.html' title='Multiple refered from 6 places.'>KQ_OFF</a>(x) <a href='../D/10194.html' title='Multiple defined in 2 places.'>offsetof</a>(<a href='../S/2704.html#L1177' title='Defined at 1177 in Modules/selectmodule.c.'>kqueue_event_Object</a>, x)
<a name='L1222'><b>static</b> <b>struct</b> <a href='../D/3506.html' title='Multiple defined in 2 places.'>PyMemberDef</a> kqueue_event_members[] = <font color='red'>{</font>
<a name='L1223'>    <font color='red'>{</font>"ident",           <a href='../D/5242.html' title='Multiple defined in 3 places.'>T_UINTPTRT</a>,     <a href='../D/1871.html' title='Multiple defined in 2 places.'>KQ_OFF</a>(e.ident)<font color='red'>}</font>,
<a name='L1224'>    <font color='red'>{</font>"filter",          <a href='../S/577.html#L38' title='Defined at 38 in Include/structmember.h.'>T_SHORT</a>,        <a href='../D/1871.html' title='Multiple defined in 2 places.'>KQ_OFF</a>(e.filter)<font color='red'>}</font>,
<a name='L1225'>    <font color='red'>{</font>"flags",           <a href='../S/577.html#L50' title='Defined at 50 in Include/structmember.h.'>T_USHORT</a>,       <a href='../D/1871.html' title='Multiple defined in 2 places.'>KQ_OFF</a>(e.<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>)<font color='red'>}</font>,
<a name='L1226'>    <font color='red'>{</font>"fflags",          <a href='../S/577.html#L51' title='Defined at 51 in Include/structmember.h.'>T_UINT</a>,         <a href='../D/1871.html' title='Multiple defined in 2 places.'>KQ_OFF</a>(e.fflags)<font color='red'>}</font>,
<a name='L1227'>    <font color='red'>{</font>"data",            <a href='../D/5228.html' title='Multiple defined in 3 places.'>T_INTPTRT</a>,      <a href='../D/1871.html' title='Multiple defined in 2 places.'>KQ_OFF</a>(e.data)<font color='red'>}</font>,
<a name='L1228'>    <font color='red'>{</font>"udata",           <a href='../D/5242.html' title='Multiple defined in 3 places.'>T_UINTPTRT</a>,     <a href='../D/1871.html' title='Multiple defined in 2 places.'>KQ_OFF</a>(e.udata)<font color='red'>}</font>,
<a name='L1229'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font> <i><font color='green'>/* Sentinel */</font></i>
<a name='L1230'><font color='red'>}</font>;
<a name='L1231'><font color='darkred'>#undef</font> <a href='../R/1680.html' title='Multiple refered from 6 places.'>KQ_OFF</a>
<a name='L1232'>
<a name='L1233'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1234'>
<a name='L1235'><a href='../S/2704.html#L1335' title='Refered from 1335 in Modules/selectmodule.c.'>kqueue_event_repr</a>(kqueue_event_Object *s)
<a name='L1236'><font color='red'>{</font>
<a name='L1237'>    <b>char</b> buf[1024];
<a name='L1238'>    <a href='../S/3126.html#L41' title='Defined at 41 in Python/mysnprintf.c.'>PyOS_snprintf</a>(
<a name='L1239'>        buf, <b>sizeof</b>(buf),
<a name='L1240'>        "&lt;select.kevent ident=%zu filter=%d flags=0x%x fflags=0x%x "
<a name='L1241'>        "data=0x%zd udata=%p&gt;",
<a name='L1242'>        (<a href='../D/11182.html' title='Multiple defined in 2 places.'>size_t</a>)(s-&gt;e.ident), s-&gt;e.filter, s-&gt;e.<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>,
<a name='L1243'>        s-&gt;e.fflags, (<a href='../D/4364.html' title='Multiple defined in 6 places.'>Py_ssize_t</a>)(s-&gt;e.data), s-&gt;e.udata);
<a name='L1244'>    <b>return</b> <a href='../D/4012.html' title='Multiple defined in 3 places.'>PyUnicode_FromString</a>(buf);
<a name='L1245'><font color='red'>}</font>
<a name='L1246'>
<a name='L1247'><b>static</b> <b>int</b>
<a name='L1248'><a href='../S/2704.html#L1361' title='Refered from 1361 in Modules/selectmodule.c.'>kqueue_event_init</a>(kqueue_event_Object *self, PyObject *args, PyObject *kwds)
<a name='L1249'><font color='red'>{</font>
<a name='L1250'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *pfd;
<a name='L1251'>    <b>static</b> <b>char</b> *kwlist[] = <font color='red'>{</font>"ident", "filter", "flags", "fflags",
<a name='L1252'>                             "data", "udata", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>;
<a name='L1253'>    <b>static</b> <b>char</b> *fmt = "O|hhi" <a href='../D/1746.html' title='Multiple defined in 3 places.'>INTPTRT_FMT_UNIT</a> <a href='../D/5333.html' title='Multiple defined in 3 places.'>UINTPTRT_FMT_UNIT</a> ":kevent";
<a name='L1254'>
<a name='L1255'>    EV_SET(&amp;(self-&gt;e), 0, EVFILT_READ, EV_ADD, 0, 0, 0); <i><font color='green'>/* defaults */</font></i>
<a name='L1256'>
<a name='L1257'>    <b>if</b> (!<a href='../D/2732.html' title='Multiple defined in 2 places.'>PyArg_ParseTupleAndKeywords</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, kwds, fmt, kwlist,
<a name='L1258'>        &amp;pfd, &amp;(self-&gt;e.filter), &amp;(self-&gt;e.<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>),
<a name='L1259'>        &amp;(self-&gt;e.fflags), &amp;(self-&gt;e.data), &amp;(self-&gt;e.udata))) <font color='red'>{</font>
<a name='L1260'>        <b>return</b> -1;
<a name='L1261'>    <font color='red'>}</font>
<a name='L1262'>
<a name='L1263'>    <b>if</b> (PyLong_Check(pfd)) <font color='red'>{</font>
<a name='L1264'>        self-&gt;e.ident = <a href='../D/3456.html' title='Multiple defined in 3 places.'>PyLong_AsUintptr_t</a>(pfd);
<a name='L1265'>    <font color='red'>}</font>
<a name='L1266'>    <b>else</b> <font color='red'>{</font>
<a name='L1267'>        self-&gt;e.ident = <a href='../S/2790.html#L197' title='Defined at 197 in Objects/fileobject.c.'>PyObject_AsFileDescriptor</a>(pfd);
<a name='L1268'>    <font color='red'>}</font>
<a name='L1269'>    <b>if</b> (<a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>()) <font color='red'>{</font>
<a name='L1270'>        <b>return</b> -1;
<a name='L1271'>    <font color='red'>}</font>
<a name='L1272'>    <b>return</b> 0;
<a name='L1273'><font color='red'>}</font>
<a name='L1274'>
<a name='L1275'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1276'><a href='../S/2704.html#L1349' title='Refered from 1349 in Modules/selectmodule.c.'>kqueue_event_richcompare</a>(kqueue_event_Object *s, kqueue_event_Object *o,
<a name='L1277'>                         <b>int</b> op)
<a name='L1278'><font color='red'>{</font>
<a name='L1279'>    <a href='../D/4315.html' title='Multiple defined in 4 places.'>Py_intptr_t</a> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 0;
<a name='L1280'>
<a name='L1281'>    <b>if</b> (!<a href='../S/2704.html#L1181' title='Defined at 1181 in Modules/selectmodule.c.'>kqueue_event_Check</a>(o)) <font color='red'>{</font>
<a name='L1282'>        <b>if</b> (op == <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a> || op == <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_NE</a>) <font color='red'>{</font>
<a name='L1283'>            <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *res = op == <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a> ? Py_False : Py_True;
<a name='L1284'>            Py_INCREF(res);
<a name='L1285'>            <b>return</b> res;
<a name='L1286'>        <font color='red'>}</font>
<a name='L1287'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1288'>            "can't compare %.200s to %.200s",
<a name='L1289'>            <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(s)-&gt;tp_name, <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(o)-&gt;tp_name);
<a name='L1290'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1291'>    <font color='red'>}</font>
<a name='L1292'>    <b>if</b> (((<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = s-&gt;e.ident - o-&gt;e.ident) == 0) &amp;&amp;
<a name='L1293'>        ((<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = s-&gt;e.filter - o-&gt;e.filter) == 0) &amp;&amp;
<a name='L1294'>        ((<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = s-&gt;e.<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a> - o-&gt;e.<a href='../D/8626.html' title='Multiple defined in 2 places.'>flags</a>) == 0) &amp;&amp;
<a name='L1295'>        ((<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = s-&gt;e.fflags - o-&gt;e.fflags) == 0) &amp;&amp;
<a name='L1296'>        ((<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = s-&gt;e.data - o-&gt;e.data) == 0) &amp;&amp;
<a name='L1297'>        ((<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = s-&gt;e.udata - o-&gt;e.udata) == 0)
<a name='L1298'>       ) <font color='red'>{</font>
<a name='L1299'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = 0;
<a name='L1300'>    <font color='red'>}</font>
<a name='L1301'>
<a name='L1302'>    <b>switch</b> (op) <font color='red'>{</font>
<a name='L1303'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_EQ</a>:
<a name='L1304'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == 0);
<a name='L1305'>        <b>break</b>;
<a name='L1306'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_NE</a>:
<a name='L1307'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> != 0);
<a name='L1308'>        <b>break</b>;
<a name='L1309'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LE</a>:
<a name='L1310'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt;= 0);
<a name='L1311'>        <b>break</b>;
<a name='L1312'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_GE</a>:
<a name='L1313'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &gt;= 0);
<a name='L1314'>        <b>break</b>;
<a name='L1315'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_LT</a>:
<a name='L1316'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &lt; 0);
<a name='L1317'>        <b>break</b>;
<a name='L1318'>        <b>case</b> <a href='../S/546.html#L151' title='Defined at 151 in Include/opcode.h.'>Py_GT</a>:
<a name='L1319'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> &gt; 0);
<a name='L1320'>        <b>break</b>;
<a name='L1321'>    <font color='red'>}</font>
<a name='L1322'>    <b>return</b> <a href='../D/2761.html' title='Multiple defined in 2 places.'>PyBool_FromLong</a>((<b>long</b>)<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1323'><font color='red'>}</font>
<a name='L1324'>
<a name='L1325'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> kqueue_event_Type = <font color='red'>{</font>
<a name='L1326'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L1327'>    "select.kevent",                                    <i><font color='green'>/* tp_name */</font></i>
<a name='L1328'>    <b>sizeof</b>(<a href='../S/2704.html#L1177' title='Defined at 1177 in Modules/selectmodule.c.'>kqueue_event_Object</a>),                        <i><font color='green'>/* tp_basicsize */</font></i>
<a name='L1329'>    0,                                                  <i><font color='green'>/* tp_itemsize */</font></i>
<a name='L1330'>    0,                                                  <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L1331'>    0,                                                  <i><font color='green'>/* tp_print */</font></i>
<a name='L1332'>    0,                                                  <i><font color='green'>/* tp_getattr */</font></i>
<a name='L1333'>    0,                                                  <i><font color='green'>/* tp_setattr */</font></i>
<a name='L1334'>    0,                                                  <i><font color='green'>/* tp_reserved */</font></i>
<a name='L1335'>    (reprfunc)<a href='../S/2704.html#L1235' title='Defined at 1235 in Modules/selectmodule.c.'>kqueue_event_repr</a>,                        <i><font color='green'>/* tp_repr */</font></i>
<a name='L1336'>    0,                                                  <i><font color='green'>/* tp_as_number */</font></i>
<a name='L1337'>    0,                                                  <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L1338'>    0,                                                  <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L1339'>    0,                                                  <i><font color='green'>/* tp_hash */</font></i>
<a name='L1340'>    0,                                                  <i><font color='green'>/* tp_call */</font></i>
<a name='L1341'>    0,                                                  <i><font color='green'>/* tp_str */</font></i>
<a name='L1342'>    0,                                                  <i><font color='green'>/* tp_getattro */</font></i>
<a name='L1343'>    0,                                                  <i><font color='green'>/* tp_setattro */</font></i>
<a name='L1344'>    0,                                                  <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L1345'>    Py_TPFLAGS_DEFAULT,                                 <i><font color='green'>/* tp_flags */</font></i>
<a name='L1346'>    kqueue_event_doc,                                   <i><font color='green'>/* tp_doc */</font></i>
<a name='L1347'>    0,                                                  <i><font color='green'>/* tp_traverse */</font></i>
<a name='L1348'>    0,                                                  <i><font color='green'>/* tp_clear */</font></i>
<a name='L1349'>    (richcmpfunc)<a href='../S/2704.html#L1276' title='Defined at 1276 in Modules/selectmodule.c.'>kqueue_event_richcompare</a>,              <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L1350'>    0,                                                  <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L1351'>    0,                                                  <i><font color='green'>/* tp_iter */</font></i>
<a name='L1352'>    0,                                                  <i><font color='green'>/* tp_iternext */</font></i>
<a name='L1353'>    0,                                                  <i><font color='green'>/* tp_methods */</font></i>
<a name='L1354'>    kqueue_event_members,                               <i><font color='green'>/* tp_members */</font></i>
<a name='L1355'>    0,                                                  <i><font color='green'>/* tp_getset */</font></i>
<a name='L1356'>    0,                                                  <i><font color='green'>/* tp_base */</font></i>
<a name='L1357'>    0,                                                  <i><font color='green'>/* tp_dict */</font></i>
<a name='L1358'>    0,                                                  <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L1359'>    0,                                                  <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L1360'>    0,                                                  <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L1361'>    (initproc)<a href='../S/2704.html#L1248' title='Defined at 1248 in Modules/selectmodule.c.'>kqueue_event_init</a>,                        <i><font color='green'>/* tp_init */</font></i>
<a name='L1362'>    0,                                                  <i><font color='green'>/* tp_alloc */</font></i>
<a name='L1363'>    0,                                                  <i><font color='green'>/* tp_new */</font></i>
<a name='L1364'>    0,                                                  <i><font color='green'>/* tp_free */</font></i>
<a name='L1365'><font color='red'>}</font>;
<a name='L1366'>
<a name='L1367'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1368'><a href='../R/8596.html' title='Multiple refered from 2 places.'>kqueue_queue_err_closed</a>(<b>void</b>)
<a name='L1369'><font color='red'>{</font>
<a name='L1370'>    <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError, "I/O operation on closed kqueue fd");
<a name='L1371'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1372'><font color='red'>}</font>
<a name='L1373'>
<a name='L1374'><b>static</b> <b>int</b>
<a name='L1375'><a href='../R/8600.html' title='Multiple refered from 2 places.'>kqueue_queue_internal_close</a>(kqueue_queue_Object *self)
<a name='L1376'><font color='red'>{</font>
<a name='L1377'>    <b>int</b> save_errno = 0;
<a name='L1378'>    <b>if</b> (self-&gt;kqfd &gt;= 0) <font color='red'>{</font>
<a name='L1379'>        <b>int</b> kqfd = self-&gt;kqfd;
<a name='L1380'>        self-&gt;kqfd = -1;
<a name='L1381'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L1382'>        <b>if</b> (close(kqfd) &lt; 0)
<a name='L1383'>            save_errno = errno;
<a name='L1384'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L1385'>    <font color='red'>}</font>
<a name='L1386'>    <b>return</b> save_errno;
<a name='L1387'><font color='red'>}</font>
<a name='L1388'>
<a name='L1389'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1390'><a href='../R/9181.html' title='Multiple refered from 2 places.'>newKqueue_Object</a>(PyTypeObject *type, <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> fd)
<a name='L1391'><font color='red'>{</font>
<a name='L1392'>    <a href='../S/2704.html#L1186' title='Defined at 1186 in Modules/selectmodule.c.'>kqueue_queue_Object</a> *self;
<a name='L1393'>    <a href='../D/6814.html' title='Multiple defined in 2 places.'>assert</a>(type != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; type-&gt;tp_alloc != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1394'>    self = (<a href='../S/2704.html#L1186' title='Defined at 1186 in Modules/selectmodule.c.'>kqueue_queue_Object</a> *) type-&gt;tp_alloc(type, 0);
<a name='L1395'>    <b>if</b> (self == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1396'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1397'>    <font color='red'>}</font>
<a name='L1398'>
<a name='L1399'>    <b>if</b> (fd == -1) <font color='red'>{</font>
<a name='L1400'>        <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L1401'>        self-&gt;kqfd = kqueue();
<a name='L1402'>        <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L1403'>    <font color='red'>}</font>
<a name='L1404'>    <b>else</b> <font color='red'>{</font>
<a name='L1405'>        self-&gt;kqfd = fd;
<a name='L1406'>    <font color='red'>}</font>
<a name='L1407'>    <b>if</b> (self-&gt;kqfd &lt; 0) <font color='red'>{</font>
<a name='L1408'>        Py_DECREF(self);
<a name='L1409'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_IOError);
<a name='L1410'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1411'>    <font color='red'>}</font>
<a name='L1412'>    <b>return</b> (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)self;
<a name='L1413'><font color='red'>}</font>
<a name='L1414'>
<a name='L1415'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1416'><a href='../S/2704.html#L1717' title='Refered from 1717 in Modules/selectmodule.c.'>kqueue_queue_new</a>(PyTypeObject *type, PyObject *args, PyObject *kwds)
<a name='L1417'><font color='red'>{</font>
<a name='L1418'>
<a name='L1419'>    <b>if</b> ((<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a> != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/2775.html#L43' title='Defined at 43 in Objects/abstract.c.'>PyObject_Size</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>)) ||
<a name='L1420'>                    (kwds != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; <a href='../S/2775.html#L43' title='Defined at 43 in Objects/abstract.c.'>PyObject_Size</a>(kwds))) <font color='red'>{</font>
<a name='L1421'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1422'>                        "select.kqueue doesn't accept arguments");
<a name='L1423'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1424'>    <font color='red'>}</font>
<a name='L1425'>
<a name='L1426'>    <b>return</b> <a href='../S/2704.html#L1390' title='Defined at 1390 in Modules/selectmodule.c.'>newKqueue_Object</a>(type, -1);
<a name='L1427'><font color='red'>}</font>
<a name='L1428'>
<a name='L1429'><b>static</b> <b>void</b>
<a name='L1430'><a href='../S/2704.html#L1684' title='Refered from 1684 in Modules/selectmodule.c.'>kqueue_queue_dealloc</a>(kqueue_queue_Object *self)
<a name='L1431'><font color='red'>{</font>
<a name='L1432'>    <a href='../S/2704.html#L1375' title='Defined at 1375 in Modules/selectmodule.c.'>kqueue_queue_internal_close</a>(self);
<a name='L1433'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(self)-&gt;tp_free(self);
<a name='L1434'><font color='red'>}</font>
<a name='L1435'>
<a name='L1436'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L1437'><a href='../S/2704.html#L1649' title='Refered from 1649 in Modules/selectmodule.c.'>kqueue_queue_close</a>(kqueue_queue_Object *self)
<a name='L1438'><font color='red'>{</font>
<a name='L1439'>    errno = <a href='../S/2704.html#L1375' title='Defined at 1375 in Modules/selectmodule.c.'>kqueue_queue_internal_close</a>(self);
<a name='L1440'>    <b>if</b> (errno &lt; 0) <font color='red'>{</font>
<a name='L1441'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_IOError);
<a name='L1442'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1443'>    <font color='red'>}</font>
<a name='L1444'>    <a href='../S/2562.html#L112' title='Defined at 112 in Modules/_elementtree.c.'>Py_RETURN_NONE</a>;
<a name='L1445'><font color='red'>}</font>
<a name='L1446'>
<a name='L1447'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(kqueue_queue_close_doc,
<a name='L1448'>"close() -&gt; None\n\
<a name='L1449'>\n\
<a name='L1450'>Close the kqueue control file descriptor. Further operations on the kqueue\n\
<a name='L1451'>object will raise an exception.");
<a name='L1452'>
<a name='L1453'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L1454'><a href='../S/2704.html#L1659' title='Refered from 1659 in Modules/selectmodule.c.'>kqueue_queue_get_closed</a>(kqueue_queue_Object *self)
<a name='L1455'><font color='red'>{</font>
<a name='L1456'>    <b>if</b> (self-&gt;kqfd &lt; 0)
<a name='L1457'>        Py_RETURN_TRUE;
<a name='L1458'>    <b>else</b>
<a name='L1459'>        Py_RETURN_FALSE;
<a name='L1460'><font color='red'>}</font>
<a name='L1461'>
<a name='L1462'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L1463'><a href='../S/2704.html#L1651' title='Refered from 1651 in Modules/selectmodule.c.'>kqueue_queue_fileno</a>(kqueue_queue_Object *self)
<a name='L1464'><font color='red'>{</font>
<a name='L1465'>    <b>if</b> (self-&gt;kqfd &lt; 0)
<a name='L1466'>        <b>return</b> <a href='../S/2704.html#L1368' title='Defined at 1368 in Modules/selectmodule.c.'>kqueue_queue_err_closed</a>();
<a name='L1467'>    <b>return</b> <a href='../S/2799.html#L176' title='Defined at 176 in Objects/longobject.c.'>PyLong_FromLong</a>(self-&gt;kqfd);
<a name='L1468'><font color='red'>}</font>
<a name='L1469'>
<a name='L1470'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(kqueue_queue_fileno_doc,
<a name='L1471'>"fileno() -&gt; int\n\
<a name='L1472'>\n\
<a name='L1473'>Return the kqueue control file descriptor.");
<a name='L1474'>
<a name='L1475'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a>*
<a name='L1476'><a href='../S/2704.html#L1647' title='Refered from 1647 in Modules/selectmodule.c.'>kqueue_queue_fromfd</a>(PyObject *cls, PyObject *args)
<a name='L1477'><font color='red'>{</font>
<a name='L1478'>    <a href='../D/4771.html' title='Multiple defined in 2 places.'>SOCKET</a> fd;
<a name='L1479'>
<a name='L1480'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "i:fromfd", &amp;fd))
<a name='L1481'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1482'>
<a name='L1483'>    <b>return</b> <a href='../S/2704.html#L1390' title='Defined at 1390 in Modules/selectmodule.c.'>newKqueue_Object</a>((<a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a>*)cls, fd);
<a name='L1484'><font color='red'>}</font>
<a name='L1485'>
<a name='L1486'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(kqueue_queue_fromfd_doc,
<a name='L1487'>"fromfd(fd) -&gt; kqueue\n\
<a name='L1488'>\n\
<a name='L1489'>Create a kqueue object from a given control fd.");
<a name='L1490'>
<a name='L1491'><b>static</b> <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *
<a name='L1492'><a href='../S/2704.html#L1653' title='Refered from 1653 in Modules/selectmodule.c.'>kqueue_queue_control</a>(kqueue_queue_Object *self, PyObject *args)
<a name='L1493'><font color='red'>{</font>
<a name='L1494'>    <b>int</b> nevents = 0;
<a name='L1495'>    <b>int</b> gotevents = 0;
<a name='L1496'>    <b>int</b> nchanges = 0;
<a name='L1497'>    <b>int</b> i = 0;
<a name='L1498'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *otimeout = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1499'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *ch = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1500'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *it = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, *ei = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1501'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1502'>    <b>struct</b> kevent *evl = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1503'>    <b>struct</b> kevent *chl = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1504'>    <b>struct</b> timespec timeoutspec;
<a name='L1505'>    <b>struct</b> timespec *ptimeoutspec;
<a name='L1506'>
<a name='L1507'>    <b>if</b> (self-&gt;kqfd &lt; 0)
<a name='L1508'>        <b>return</b> <a href='../S/2704.html#L1368' title='Defined at 1368 in Modules/selectmodule.c.'>kqueue_queue_err_closed</a>();
<a name='L1509'>
<a name='L1510'>    <b>if</b> (!<a href='../D/2731.html' title='Multiple defined in 2 places.'>PyArg_ParseTuple</a>(<a href='../S/2858.html#L294' title='Defined at 294 in PC/bdist_wininst/install.c.'>args</a>, "Oi|O:control", &amp;ch, &amp;nevents, &amp;otimeout))
<a name='L1511'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1512'>
<a name='L1513'>    <b>if</b> (nevents &lt; 0) <font color='red'>{</font>
<a name='L1514'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_ValueError,
<a name='L1515'>            "Length of eventlist must be 0 or positive, got %d",
<a name='L1516'>            nevents);
<a name='L1517'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1518'>    <font color='red'>}</font>
<a name='L1519'>
<a name='L1520'>    <b>if</b> (otimeout == Py_None || otimeout == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1521'>        ptimeoutspec = <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1522'>    <font color='red'>}</font>
<a name='L1523'>    <b>else</b> <b>if</b> (<a href='../S/2775.html#L736' title='Defined at 736 in Objects/abstract.c.'>PyNumber_Check</a>(otimeout)) <font color='red'>{</font>
<a name='L1524'>        <b>double</b> timeout;
<a name='L1525'>        <b>long</b> seconds;
<a name='L1526'>
<a name='L1527'>        timeout = <a href='../S/2791.html#L244' title='Defined at 244 in Objects/floatobject.c.'>PyFloat_AsDouble</a>(otimeout);
<a name='L1528'>        <b>if</b> (timeout == -1 &amp;&amp; <a href='../D/3154.html' title='Multiple defined in 2 places.'>PyErr_Occurred</a>())
<a name='L1529'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1530'>        <b>if</b> (timeout &gt; (<b>double</b>)<a href='../D/1965.html' title='Multiple defined in 2 places.'>LONG_MAX</a>) <font color='red'>{</font>
<a name='L1531'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_OverflowError,
<a name='L1532'>                            "timeout period too long");
<a name='L1533'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1534'>        <font color='red'>}</font>
<a name='L1535'>        <b>if</b> (timeout &lt; 0) <font color='red'>{</font>
<a name='L1536'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L1537'>                            "timeout must be positive or None");
<a name='L1538'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1539'>        <font color='red'>}</font>
<a name='L1540'>
<a name='L1541'>        seconds = (<b>long</b>)timeout;
<a name='L1542'>        timeout = timeout - (<b>double</b>)seconds;
<a name='L1543'>        timeoutspec.tv_sec = seconds;
<a name='L1544'>        timeoutspec.tv_nsec = (<b>long</b>)(timeout * 1E9);
<a name='L1545'>        ptimeoutspec = &amp;timeoutspec;
<a name='L1546'>    <font color='red'>}</font>
<a name='L1547'>    <b>else</b> <font color='red'>{</font>
<a name='L1548'>        <a href='../S/3106.html#L600' title='Defined at 600 in Python/errors.c.'>PyErr_Format</a>(PyExc_TypeError,
<a name='L1549'>            "timeout argument must be an number "
<a name='L1550'>            "or None, got %.200s",
<a name='L1551'>            <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(otimeout)-&gt;tp_name);
<a name='L1552'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1553'>    <font color='red'>}</font>
<a name='L1554'>
<a name='L1555'>    <b>if</b> (ch != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a> &amp;&amp; ch != Py_None) <font color='red'>{</font>
<a name='L1556'>        it = <a href='../S/2775.html#L2668' title='Defined at 2668 in Objects/abstract.c.'>PyObject_GetIter</a>(ch);
<a name='L1557'>        <b>if</b> (it == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1558'>            <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1559'>                            "changelist is not iterable");
<a name='L1560'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1561'>        <font color='red'>}</font>
<a name='L1562'>        nchanges = <a href='../S/2775.html#L43' title='Defined at 43 in Objects/abstract.c.'>PyObject_Size</a>(ch);
<a name='L1563'>        <b>if</b> (nchanges &lt; 0) <font color='red'>{</font>
<a name='L1564'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1565'>        <font color='red'>}</font>
<a name='L1566'>
<a name='L1567'>        chl = PyMem_New(<b>struct</b> kevent, nchanges);
<a name='L1568'>        <b>if</b> (chl == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1569'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1570'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1571'>        <font color='red'>}</font>
<a name='L1572'>        i = 0;
<a name='L1573'>        <b>while</b> ((ei = <a href='../S/2775.html#L2700' title='Defined at 2700 in Objects/abstract.c.'>PyIter_Next</a>(it)) != <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1574'>            <b>if</b> (!<a href='../S/2704.html#L1181' title='Defined at 1181 in Modules/selectmodule.c.'>kqueue_event_Check</a>(ei)) <font color='red'>{</font>
<a name='L1575'>                Py_DECREF(ei);
<a name='L1576'>                <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_TypeError,
<a name='L1577'>                    "changelist must be an iterable of "
<a name='L1578'>                    "select.kevent objects");
<a name='L1579'>                <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1580'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1581'>                chl[i++] = ((<a href='../S/2704.html#L1177' title='Defined at 1177 in Modules/selectmodule.c.'>kqueue_event_Object</a> *)ei)-&gt;e;
<a name='L1582'>            <font color='red'>}</font>
<a name='L1583'>            Py_DECREF(ei);
<a name='L1584'>        <font color='red'>}</font>
<a name='L1585'>    <font color='red'>}</font>
<a name='L1586'>    <a href='../D/4095.html' title='Multiple defined in 2 places.'>Py_CLEAR</a>(it);
<a name='L1587'>
<a name='L1588'>    <i><font color='green'>/* event list */</font></i>
<a name='L1589'>    <b>if</b> (nevents) <font color='red'>{</font>
<a name='L1590'>        evl = PyMem_New(<b>struct</b> kevent, nevents);
<a name='L1591'>        <b>if</b> (evl == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1592'>            <a href='../S/3106.html#L334' title='Defined at 334 in Python/errors.c.'>PyErr_NoMemory</a>();
<a name='L1593'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1594'>        <font color='red'>}</font>
<a name='L1595'>    <font color='red'>}</font>
<a name='L1596'>
<a name='L1597'>    <a href='../D/4080.html' title='Multiple defined in 2 places.'>Py_BEGIN_ALLOW_THREADS</a>
<a name='L1598'>    gotevents = kevent(self-&gt;kqfd, chl, nchanges,
<a name='L1599'>                       evl, nevents, ptimeoutspec);
<a name='L1600'>    <a href='../D/4114.html' title='Multiple defined in 2 places.'>Py_END_ALLOW_THREADS</a>
<a name='L1601'>
<a name='L1602'>    <b>if</b> (gotevents == -1) <font color='red'>{</font>
<a name='L1603'>        <a href='../S/3106.html#L452' title='Defined at 452 in Python/errors.c.'>PyErr_SetFromErrno</a>(PyExc_OSError);
<a name='L1604'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1605'>    <font color='red'>}</font>
<a name='L1606'>
<a name='L1607'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = <a href='../S/2796.html#L113' title='Defined at 113 in Objects/listobject.c.'>PyList_New</a>(gotevents);
<a name='L1608'>    <b>if</b> (<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1609'>        <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1610'>    <font color='red'>}</font>
<a name='L1611'>
<a name='L1612'>    <b>for</b> (i = 0; i &lt; gotevents; i++) <font color='red'>{</font>
<a name='L1613'>        <a href='../S/2704.html#L1177' title='Defined at 1177 in Modules/selectmodule.c.'>kqueue_event_Object</a> *ch;
<a name='L1614'>
<a name='L1615'>        ch = PyObject_New(<a href='../S/2704.html#L1177' title='Defined at 1177 in Modules/selectmodule.c.'>kqueue_event_Object</a>, &amp;kqueue_event_Type);
<a name='L1616'>        <b>if</b> (ch == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>) <font color='red'>{</font>
<a name='L1617'>            <b>goto</b> <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>;
<a name='L1618'>        <font color='red'>}</font>
<a name='L1619'>        ch-&gt;e = evl[i];
<a name='L1620'>        PyList_SET_ITEM(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>, i, (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)ch);
<a name='L1621'>    <font color='red'>}</font>
<a name='L1622'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(chl);
<a name='L1623'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(evl);
<a name='L1624'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L1625'>
<a name='L1626'>    <a href='../D/8389.html' title='Multiple defined in 3 places.'>error</a>:
<a name='L1627'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(chl);
<a name='L1628'>    <a href='../S/2803.html#L1781' title='Defined at 1781 in Objects/object.c.'>PyMem_Free</a>(evl);
<a name='L1629'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>);
<a name='L1630'>    <a href='../S/544.html#L767' title='Defined at 767 in Include/object.h.'>Py_XDECREF</a>(it);
<a name='L1631'>    <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1632'><font color='red'>}</font>
<a name='L1633'>
<a name='L1634'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(kqueue_queue_control_doc,
<a name='L1635'>"control(changelist, max_events[, timeout=None]) -&gt; eventlist\n\
<a name='L1636'>\n\
<a name='L1637'>Calls the kernel kevent function.\n\
<a name='L1638'>- changelist must be a list of kevent objects describing the changes\n\
<a name='L1639'>  to be made to the kernel's watch list or None.\n\
<a name='L1640'>- max_events lets you specify the maximum number of events that the\n\
<a name='L1641'>  kernel will return.\n\
<a name='L1642'>- timeout is the maximum time to wait in seconds, or else None,\n\
<a name='L1643'>  to wait forever. timeout accepts floats for smaller timeouts, too.");
<a name='L1644'>
<a name='L1645'>
<a name='L1646'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> kqueue_queue_methods[] = <font color='red'>{</font>
<a name='L1647'>    <font color='red'>{</font>"fromfd",          (PyCFunction)<a href='../S/2704.html#L1476' title='Defined at 1476 in Modules/selectmodule.c.'>kqueue_queue_fromfd</a>,
<a name='L1648'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> | METH_CLASS, kqueue_queue_fromfd_doc<font color='red'>}</font>,
<a name='L1649'>    <font color='red'>{</font>"close",           (PyCFunction)<a href='../S/2704.html#L1437' title='Defined at 1437 in Modules/selectmodule.c.'>kqueue_queue_close</a>,        <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1650'>     kqueue_queue_close_doc<font color='red'>}</font>,
<a name='L1651'>    <font color='red'>{</font>"fileno",          (PyCFunction)<a href='../S/2704.html#L1463' title='Defined at 1463 in Modules/selectmodule.c.'>kqueue_queue_fileno</a>,       <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,
<a name='L1652'>     kqueue_queue_fileno_doc<font color='red'>}</font>,
<a name='L1653'>    <font color='red'>{</font>"control",         (PyCFunction)<a href='../S/2704.html#L1492' title='Defined at 1492 in Modules/selectmodule.c.'>kqueue_queue_control</a>,
<a name='L1654'>     <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a> ,     kqueue_queue_control_doc<font color='red'>}</font>,
<a name='L1655'>    <font color='red'>{</font><a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,      <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a><font color='red'>}</font>,
<a name='L1656'><font color='red'>}</font>;
<a name='L1657'>
<a name='L1658'><b>static</b> <a href='../D/3272.html' title='Multiple defined in 2 places.'>PyGetSetDef</a> kqueue_queue_getsetlist[] = <font color='red'>{</font>
<a name='L1659'>    <font color='red'>{</font>"closed", (getter)<a href='../S/2704.html#L1454' title='Defined at 1454 in Modules/selectmodule.c.'>kqueue_queue_get_closed</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1660'>     "True if the kqueue handler is closed"<font color='red'>}</font>,
<a name='L1661'>    <font color='red'>{</font>0<font color='red'>}</font>,
<a name='L1662'><font color='red'>}</font>;
<a name='L1663'>
<a name='L1664'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(kqueue_queue_doc,
<a name='L1665'>"Kqueue syscall wrapper.\n\
<a name='L1666'>\n\
<a name='L1667'>For example, to start watching a socket for input:\n\
<a name='L1668'>&gt;&gt;&gt; kq = kqueue()\n\
<a name='L1669'>&gt;&gt;&gt; sock = socket()\n\
<a name='L1670'>&gt;&gt;&gt; sock.connect((host, port))\n\
<a name='L1671'>&gt;&gt;&gt; kq.control([kevent(sock, KQ_FILTER_WRITE, KQ_EV_ADD)], 0)\n\
<a name='L1672'>\n\
<a name='L1673'>To wait one second for it to become writeable:\n\
<a name='L1674'>&gt;&gt;&gt; kq.control(None, 1, 1000)\n\
<a name='L1675'>\n\
<a name='L1676'>To stop listening:\n\
<a name='L1677'>&gt;&gt;&gt; kq.control([kevent(sock, KQ_FILTER_WRITE, KQ_EV_DELETE)], 0)");
<a name='L1678'>
<a name='L1679'><b>static</b> <a href='../D/3899.html' title='Multiple defined in 3 places.'>PyTypeObject</a> kqueue_queue_Type = <font color='red'>{</font>
<a name='L1680'>    <a href='../D/4042.html' title='Multiple defined in 3 places.'>PyVarObject_HEAD_INIT</a>(<a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, 0)
<a name='L1681'>    "select.kqueue",                                    <i><font color='green'>/* tp_name */</font></i>
<a name='L1682'>    <b>sizeof</b>(<a href='../S/2704.html#L1186' title='Defined at 1186 in Modules/selectmodule.c.'>kqueue_queue_Object</a>),                        <i><font color='green'>/* tp_basicsize */</font></i>
<a name='L1683'>    0,                                                  <i><font color='green'>/* tp_itemsize */</font></i>
<a name='L1684'>    (<a href='../D/8095.html' title='Multiple defined in 2 places.'>destructor</a>)<a href='../S/2704.html#L1430' title='Defined at 1430 in Modules/selectmodule.c.'>kqueue_queue_dealloc</a>,                   <i><font color='green'>/* tp_dealloc */</font></i>
<a name='L1685'>    0,                                                  <i><font color='green'>/* tp_print */</font></i>
<a name='L1686'>    0,                                                  <i><font color='green'>/* tp_getattr */</font></i>
<a name='L1687'>    0,                                                  <i><font color='green'>/* tp_setattr */</font></i>
<a name='L1688'>    0,                                                  <i><font color='green'>/* tp_reserved */</font></i>
<a name='L1689'>    0,                                                  <i><font color='green'>/* tp_repr */</font></i>
<a name='L1690'>    0,                                                  <i><font color='green'>/* tp_as_number */</font></i>
<a name='L1691'>    0,                                                  <i><font color='green'>/* tp_as_sequence */</font></i>
<a name='L1692'>    0,                                                  <i><font color='green'>/* tp_as_mapping */</font></i>
<a name='L1693'>    0,                                                  <i><font color='green'>/* tp_hash */</font></i>
<a name='L1694'>    0,                                                  <i><font color='green'>/* tp_call */</font></i>
<a name='L1695'>    0,                                                  <i><font color='green'>/* tp_str */</font></i>
<a name='L1696'>    0,                                                  <i><font color='green'>/* tp_getattro */</font></i>
<a name='L1697'>    0,                                                  <i><font color='green'>/* tp_setattro */</font></i>
<a name='L1698'>    0,                                                  <i><font color='green'>/* tp_as_buffer */</font></i>
<a name='L1699'>    Py_TPFLAGS_DEFAULT,                                 <i><font color='green'>/* tp_flags */</font></i>
<a name='L1700'>    kqueue_queue_doc,                                   <i><font color='green'>/* tp_doc */</font></i>
<a name='L1701'>    0,                                                  <i><font color='green'>/* tp_traverse */</font></i>
<a name='L1702'>    0,                                                  <i><font color='green'>/* tp_clear */</font></i>
<a name='L1703'>    0,                                                  <i><font color='green'>/* tp_richcompare */</font></i>
<a name='L1704'>    0,                                                  <i><font color='green'>/* tp_weaklistoffset */</font></i>
<a name='L1705'>    0,                                                  <i><font color='green'>/* tp_iter */</font></i>
<a name='L1706'>    0,                                                  <i><font color='green'>/* tp_iternext */</font></i>
<a name='L1707'>    kqueue_queue_methods,                               <i><font color='green'>/* tp_methods */</font></i>
<a name='L1708'>    0,                                                  <i><font color='green'>/* tp_members */</font></i>
<a name='L1709'>    kqueue_queue_getsetlist,                            <i><font color='green'>/* tp_getset */</font></i>
<a name='L1710'>    0,                                                  <i><font color='green'>/* tp_base */</font></i>
<a name='L1711'>    0,                                                  <i><font color='green'>/* tp_dict */</font></i>
<a name='L1712'>    0,                                                  <i><font color='green'>/* tp_descr_get */</font></i>
<a name='L1713'>    0,                                                  <i><font color='green'>/* tp_descr_set */</font></i>
<a name='L1714'>    0,                                                  <i><font color='green'>/* tp_dictoffset */</font></i>
<a name='L1715'>    0,                                                  <i><font color='green'>/* tp_init */</font></i>
<a name='L1716'>    0,                                                  <i><font color='green'>/* tp_alloc */</font></i>
<a name='L1717'>    <a href='../S/2704.html#L1416' title='Defined at 1416 in Modules/selectmodule.c.'>kqueue_queue_new</a>,                                   <i><font color='green'>/* tp_new */</font></i>
<a name='L1718'>    0,                                                  <i><font color='green'>/* tp_free */</font></i>
<a name='L1719'><font color='red'>}</font>;
<a name='L1720'>
<a name='L1721'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_KQUEUE */</font></i>
<a name='L1722'><i><font color='green'>/* ************************************************************************ */</font></i>
<a name='L1723'>
<a name='L1724'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(select_doc,
<a name='L1725'>"select(rlist, wlist, xlist[, timeout]) -&gt; (rlist, wlist, xlist)\n\
<a name='L1726'>\n\
<a name='L1727'>Wait until one or more file descriptors are ready for some kind of I/O.\n\
<a name='L1728'>The first three arguments are sequences of file descriptors to be waited for:\n\
<a name='L1729'>rlist -- wait until ready for reading\n\
<a name='L1730'>wlist -- wait until ready for writing\n\
<a name='L1731'>xlist -- wait for an ``exceptional condition''\n\
<a name='L1732'>If only one kind of condition is required, pass [] for the other lists.\n\
<a name='L1733'>A file descriptor is either a socket or file object, or a small integer\n\
<a name='L1734'>gotten from a fileno() method call on one of those.\n\
<a name='L1735'>\n\
<a name='L1736'>The optional 4th argument specifies a timeout in seconds; it may be\n\
<a name='L1737'>a floating point number to specify fractions of seconds.  If it is absent\n\
<a name='L1738'>or None, the call will never time out.\n\
<a name='L1739'>\n\
<a name='L1740'>The return value is a tuple of three lists corresponding to the first three\n\
<a name='L1741'>arguments; each contains the subset of the corresponding file descriptors\n\
<a name='L1742'>that are ready.\n\
<a name='L1743'>\n\
<a name='L1744'>*** IMPORTANT NOTICE ***\n\
<a name='L1745'>On Windows and OpenVMS, only sockets are supported; on Unix, all file\n\
<a name='L1746'>descriptors can be used.");
<a name='L1747'>
<a name='L1748'><b>static</b> <a href='../D/3525.html' title='Multiple defined in 3 places.'>PyMethodDef</a> select_methods[] = <font color='red'>{</font>
<a name='L1749'>    <font color='red'>{</font>"select",          <a href='../S/2704.html#L191' title='Defined at 191 in Modules/selectmodule.c.'>select_select</a>,  <a href='../S/2858.html#L633' title='Defined at 633 in PC/bdist_wininst/install.c.'>METH_VARARGS</a>,   select_doc<font color='red'>}</font>,
<a name='L1750'><font color='darkred'>#ifdef</font> HAVE_POLL
<a name='L1751'>    <font color='red'>{</font>"poll",            <a href='../S/2704.html#L660' title='Defined at 660 in Modules/selectmodule.c.'>select_poll</a>,    <a href='../S/2858.html#L634' title='Defined at 634 in PC/bdist_wininst/install.c.'>METH_NOARGS</a>,    poll_doc<font color='red'>}</font>,
<a name='L1752'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_POLL */</font></i>
<a name='L1753'>    <font color='red'>{</font>0,         0<font color='red'>}</font>,     <i><font color='green'>/* sentinel */</font></i>
<a name='L1754'><font color='red'>}</font>;
<a name='L1755'>
<a name='L1756'><a href='../D/3131.html' title='Multiple defined in 2 places.'>PyDoc_STRVAR</a>(module_doc,
<a name='L1757'>"This module supports asynchronous I/O on multiple file descriptors.\n\
<a name='L1758'>\n\
<a name='L1759'>*** IMPORTANT NOTICE ***\n\
<a name='L1760'>On Windows and OpenVMS, only sockets are supported; on Unix, all file descriptors.");
<a name='L1761'>
<a name='L1762'>
<a name='L1763'><b>static</b> <b>struct</b> <a href='../D/3534.html' title='Multiple defined in 2 places.'>PyModuleDef</a> selectmodule = <font color='red'>{</font>
<a name='L1764'>    <a href='../S/542.html#L33' title='Defined at 33 in Include/moduleobject.h.'>PyModuleDef_HEAD_INIT</a>,
<a name='L1765'>    "select",
<a name='L1766'>    module_doc,
<a name='L1767'>    -1,
<a name='L1768'>    select_methods,
<a name='L1769'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1770'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1771'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>,
<a name='L1772'>    <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>
<a name='L1773'><font color='red'>}</font>;
<a name='L1774'>
<a name='L1775'><a href='../D/3482.html' title='Multiple defined in 10 places.'>PyMODINIT_FUNC</a>
<a name='L1776'>PyInit_select(<b>void</b>)
<a name='L1777'><font color='red'>{</font>
<a name='L1778'>    <a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *m;
<a name='L1779'>    m = PyModule_Create(&amp;selectmodule);
<a name='L1780'>    <b>if</b> (m == <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>)
<a name='L1781'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1782'>
<a name='L1783'>    SelectError = <a href='../S/3106.html#L621' title='Defined at 621 in Python/errors.c.'>PyErr_NewException</a>("select.error", <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>, <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>);
<a name='L1784'>    Py_INCREF(SelectError);
<a name='L1785'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "error", SelectError);
<a name='L1786'>
<a name='L1787'><font color='darkred'>#ifdef</font> <a href='../D/2490.html' title='Multiple defined in 2 places.'>PIPE_BUF</a>
<a name='L1788'><font color='darkred'>#ifdef</font> HAVE_BROKEN_PIPE_BUF
<a name='L1789'><font color='darkred'>#undef</font> <a href='../R/2256.html' title='Multiple refered from 2 places.'>PIPE_BUF</a>
<a name='L1790'><font color='darkred'>#define</font> <a href='../R/2256.html' title='Multiple refered from 2 places.'>PIPE_BUF</a> 512
<a name='L1791'><font color='darkred'>#endif</font>
<a name='L1792'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "PIPE_BUF", <a href='../D/2490.html' title='Multiple defined in 2 places.'>PIPE_BUF</a>);
<a name='L1793'><font color='darkred'>#endif</font>
<a name='L1794'>
<a name='L1795'><font color='darkred'>#if</font> <b>defined</b>(HAVE_POLL)
<a name='L1796'><font color='darkred'>#ifdef</font> __APPLE__
<a name='L1797'>    <b>if</b> (<a href='../S/2704.html#L671' title='Defined at 671 in Modules/selectmodule.c.'>select_have_broken_poll</a>()) <font color='red'>{</font>
<a name='L1798'>        <b>if</b> (<a href='../S/499.html#L218' title='Defined at 218 in Include/abstract.h.'>PyObject_DelAttrString</a>(m, "poll") == -1) <font color='red'>{</font>
<a name='L1799'>            <a href='../S/3106.html#L318' title='Defined at 318 in Python/errors.c.'>PyErr_Clear</a>();
<a name='L1800'>        <font color='red'>}</font>
<a name='L1801'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1802'><font color='darkred'>#else</font>
<a name='L1803'>    <font color='red'>{</font>
<a name='L1804'><font color='darkred'>#endif</font>
<a name='L1805'>        <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;poll_Type) &lt; 0)
<a name='L1806'>            <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1807'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLIN", POLLIN);
<a name='L1808'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLPRI", POLLPRI);
<a name='L1809'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLOUT", POLLOUT);
<a name='L1810'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLERR", POLLERR);
<a name='L1811'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLHUP", POLLHUP);
<a name='L1812'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLNVAL", POLLNVAL);
<a name='L1813'>
<a name='L1814'><font color='darkred'>#ifdef</font> POLLRDNORM
<a name='L1815'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLRDNORM", POLLRDNORM);
<a name='L1816'><font color='darkred'>#endif</font>
<a name='L1817'><font color='darkred'>#ifdef</font> POLLRDBAND
<a name='L1818'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLRDBAND", POLLRDBAND);
<a name='L1819'><font color='darkred'>#endif</font>
<a name='L1820'><font color='darkred'>#ifdef</font> POLLWRNORM
<a name='L1821'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLWRNORM", POLLWRNORM);
<a name='L1822'><font color='darkred'>#endif</font>
<a name='L1823'><font color='darkred'>#ifdef</font> POLLWRBAND
<a name='L1824'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLWRBAND", POLLWRBAND);
<a name='L1825'><font color='darkred'>#endif</font>
<a name='L1826'><font color='darkred'>#ifdef</font> POLLMSG
<a name='L1827'>        <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "POLLMSG", POLLMSG);
<a name='L1828'><font color='darkred'>#endif</font>
<a name='L1829'>    <font color='red'>}</font>
<a name='L1830'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_POLL */</font></i>
<a name='L1831'>
<a name='L1832'><font color='darkred'>#ifdef</font> HAVE_EPOLL
<a name='L1833'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(&amp;pyEpoll_Type) = &amp;PyType_Type;
<a name='L1834'>    <b>if</b> (<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;pyEpoll_Type) &lt; 0)
<a name='L1835'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1836'>
<a name='L1837'>    Py_INCREF(&amp;pyEpoll_Type);
<a name='L1838'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "epoll", (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *) &amp;pyEpoll_Type);
<a name='L1839'>
<a name='L1840'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLIN", EPOLLIN);
<a name='L1841'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLOUT", EPOLLOUT);
<a name='L1842'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLPRI", EPOLLPRI);
<a name='L1843'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLERR", EPOLLERR);
<a name='L1844'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLHUP", EPOLLHUP);
<a name='L1845'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLET", EPOLLET);
<a name='L1846'><font color='darkred'>#ifdef</font> EPOLLONESHOT
<a name='L1847'>    <i><font color='green'>/* Kernel 2.6.2+ */</font></i>
<a name='L1848'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLONESHOT", EPOLLONESHOT);
<a name='L1849'><font color='darkred'>#endif</font>
<a name='L1850'>    <i><font color='green'>/* PyModule_AddIntConstant(m, "EPOLL_RDHUP", EPOLLRDHUP); */</font></i>
<a name='L1851'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLRDNORM", EPOLLRDNORM);
<a name='L1852'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLRDBAND", EPOLLRDBAND);
<a name='L1853'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLWRNORM", EPOLLWRNORM);
<a name='L1854'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLWRBAND", EPOLLWRBAND);
<a name='L1855'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "EPOLLMSG", EPOLLMSG);
<a name='L1856'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_EPOLL */</font></i>
<a name='L1857'>
<a name='L1858'><font color='darkred'>#ifdef</font> HAVE_KQUEUE
<a name='L1859'>    kqueue_event_Type.tp_new = <a href='../S/2824.html#L730' title='Defined at 730 in Objects/typeobject.c.'>PyType_GenericNew</a>;
<a name='L1860'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(&amp;kqueue_event_Type) = &amp;PyType_Type;
<a name='L1861'>    <b>if</b>(<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;kqueue_event_Type) &lt; 0)
<a name='L1862'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1863'>
<a name='L1864'>    Py_INCREF(&amp;kqueue_event_Type);
<a name='L1865'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "kevent", (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;kqueue_event_Type);
<a name='L1866'>
<a name='L1867'>    <a href='../D/4259.html' title='Multiple defined in 5 places.'>Py_TYPE</a>(&amp;kqueue_queue_Type) = &amp;PyType_Type;
<a name='L1868'>    <b>if</b>(<a href='../S/2824.html#L3799' title='Defined at 3799 in Objects/typeobject.c.'>PyType_Ready</a>(&amp;kqueue_queue_Type) &lt; 0)
<a name='L1869'>        <b>return</b> <a href='../S/2891.html#L5' title='Defined at 5 in PC/os2emx/dllentry.c.'>NULL</a>;
<a name='L1870'>    Py_INCREF(&amp;kqueue_queue_Type);
<a name='L1871'>    <a href='../S/3125.html#L525' title='Defined at 525 in Python/modsupport.c.'>PyModule_AddObject</a>(m, "kqueue", (<a href='../D/3593.html' title='Multiple defined in 2 places.'>PyObject</a> *)&amp;kqueue_queue_Type);
<a name='L1872'>
<a name='L1873'>    <i><font color='green'>/* event filters */</font></i>
<a name='L1874'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_FILTER_READ", EVFILT_READ);
<a name='L1875'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_FILTER_WRITE", EVFILT_WRITE);
<a name='L1876'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_FILTER_AIO", EVFILT_AIO);
<a name='L1877'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_FILTER_VNODE", EVFILT_VNODE);
<a name='L1878'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_FILTER_PROC", EVFILT_PROC);
<a name='L1879'><font color='darkred'>#ifdef</font> EVFILT_NETDEV
<a name='L1880'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_FILTER_NETDEV", EVFILT_NETDEV);
<a name='L1881'><font color='darkred'>#endif</font>
<a name='L1882'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_FILTER_SIGNAL", EVFILT_SIGNAL);
<a name='L1883'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_FILTER_TIMER", EVFILT_TIMER);
<a name='L1884'>
<a name='L1885'>    <i><font color='green'>/* event flags */</font></i>
<a name='L1886'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_ADD", EV_ADD);
<a name='L1887'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_DELETE", EV_DELETE);
<a name='L1888'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_ENABLE", EV_ENABLE);
<a name='L1889'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_DISABLE", EV_DISABLE);
<a name='L1890'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_ONESHOT", EV_ONESHOT);
<a name='L1891'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_CLEAR", EV_CLEAR);
<a name='L1892'>
<a name='L1893'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_SYSFLAGS", EV_SYSFLAGS);
<a name='L1894'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_FLAG1", EV_FLAG1);
<a name='L1895'>
<a name='L1896'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_EOF", EV_EOF);
<a name='L1897'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_EV_ERROR", EV_ERROR);
<a name='L1898'>
<a name='L1899'>    <i><font color='green'>/* READ WRITE filter flag */</font></i>
<a name='L1900'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_LOWAT", NOTE_LOWAT);
<a name='L1901'>
<a name='L1902'>    <i><font color='green'>/* VNODE filter flags  */</font></i>
<a name='L1903'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_DELETE", NOTE_DELETE);
<a name='L1904'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_WRITE", NOTE_WRITE);
<a name='L1905'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_EXTEND", NOTE_EXTEND);
<a name='L1906'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_ATTRIB", NOTE_ATTRIB);
<a name='L1907'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_LINK", NOTE_LINK);
<a name='L1908'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_RENAME", NOTE_RENAME);
<a name='L1909'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_REVOKE", NOTE_REVOKE);
<a name='L1910'>
<a name='L1911'>    <i><font color='green'>/* PROC filter flags  */</font></i>
<a name='L1912'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_EXIT", NOTE_EXIT);
<a name='L1913'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_FORK", NOTE_FORK);
<a name='L1914'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_EXEC", NOTE_EXEC);
<a name='L1915'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_PCTRLMASK", NOTE_PCTRLMASK);
<a name='L1916'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_PDATAMASK", NOTE_PDATAMASK);
<a name='L1917'>
<a name='L1918'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_TRACK", NOTE_TRACK);
<a name='L1919'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_CHILD", NOTE_CHILD);
<a name='L1920'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_TRACKERR", NOTE_TRACKERR);
<a name='L1921'>
<a name='L1922'>    <i><font color='green'>/* NETDEV filter flags */</font></i>
<a name='L1923'><font color='darkred'>#ifdef</font> EVFILT_NETDEV
<a name='L1924'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_LINKUP", NOTE_LINKUP);
<a name='L1925'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_LINKDOWN", NOTE_LINKDOWN);
<a name='L1926'>    <a href='../S/3125.html#L554' title='Defined at 554 in Python/modsupport.c.'>PyModule_AddIntConstant</a>(m, "KQ_NOTE_LINKINV", NOTE_LINKINV);
<a name='L1927'><font color='darkred'>#endif</font>
<a name='L1928'>
<a name='L1929'><font color='darkred'>#endif</font> <i><font color='green'>/* HAVE_KQUEUE */</font></i>
<a name='L1930'>    <b>return</b> m;
<a name='L1931'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L67'>[^]</a><a href='#L1776'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
