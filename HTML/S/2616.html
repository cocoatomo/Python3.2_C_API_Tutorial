<html>
<head>
<title>Modules/_time.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.8.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/3353.html'>Modules</a>/_time.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L6'>[^]</a>[v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L6' title='Defined at 6.'>_PyTime_DoubleToTimet</a>
</ol>
<hr>
<pre>
<a name='L1'><font color='darkred'>#include</font> "<a href='570.html'>Python.h</a>"
<a name='L2'><font color='darkred'>#include</font> "<a href='2617.html'>_time.h</a>"
<a name='L3'>
<a name='L4'><i><font color='green'>/* Exposed in timefuncs.h. */</font></i>
<a name='L5'>time_t
<a name='L6'><a href='../R/5495.html' title='Multiple refered from 4 places.'>_PyTime_DoubleToTimet</a>(<b>double</b> x)
<a name='L7'><font color='red'>{</font>
<a name='L8'>    time_t <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L9'>    <b>double</b> <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a>;
<a name='L10'>
<a name='L11'>    <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (time_t)x;
<a name='L12'>    <i><font color='green'>/* How much info did we lose?  time_t may be an integral or</font></i>
<a name='L13'><i><font color='green'>     * floating type, and we don't know which.  If it's integral,</font></i>
<a name='L14'><i><font color='green'>     * we don't know whether C truncates, rounds, returns the floor,</font></i>
<a name='L15'><i><font color='green'>     * etc.  If we lost a second or more, the C rounding is</font></i>
<a name='L16'><i><font color='green'>     * unreasonable, or the input just doesn't fit in a time_t;</font></i>
<a name='L17'><i><font color='green'>     * call it an error regardless.  Note that the original cast to</font></i>
<a name='L18'><i><font color='green'>     * time_t can cause a C error too, but nothing we can do to</font></i>
<a name='L19'><i><font color='green'>     * work around that.</font></i>
<a name='L20'><i><font color='green'>     */</font></i>
<a name='L21'>    <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> = x - (<b>double</b>)<a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L22'>    <b>if</b> (<a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> &lt;= -1.0 || <a href='../S/3095.html#L906' title='Defined at 906 in Python/dtoa.c.'>diff</a> &gt;= 1.0) <font color='red'>{</font>
<a name='L23'>        <a href='../S/3106.html#L122' title='Defined at 122 in Python/errors.c.'>PyErr_SetString</a>(PyExc_ValueError,
<a name='L24'>                        "timestamp out of range for platform time_t");
<a name='L25'>        <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a> = (time_t)-1;
<a name='L26'>    <font color='red'>}</font>
<a name='L27'>    <b>return</b> <a href='../S/2250.html#L579' title='Defined at 579 in Modules/_ctypes/callproc.c.'>result</a>;
<a name='L28'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;][^]<a href='#L6'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
